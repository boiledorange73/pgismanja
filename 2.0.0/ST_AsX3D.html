<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ST_AsX3D</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="PostGIS 2.0.0マニュアル日本語訳"><link rel="up" href="reference.html#Geometry_Outputs" title="8.6. ジオメトリ出力"><link rel="prev" href="ST_AsSVG.html" title="ST_AsSVG"><link rel="next" href="ST_GeoHash.html" title="ST_GeoHash"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_AsX3D</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_AsSVG.html">戻る</a> </td><th width="60%" align="center">8.6. ジオメトリ出力</th><td width="20%" align="right"> <a accesskey="n" href="ST_GeoHash.html">次へ</a></td></tr></table><hr></div><div class="refentry" title="ST_AsX3D"><a name="ST_AsX3D"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>ST_AsX3D — ジオメトリをX3Dノード要素書式(ISO-IEC-19776-1.2-X3DEncodings-XML)で返します。</p></div><div class="refsynopsisdiv" title="概要"><h2>概要</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsX3D</b>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p></div></div><div class="refsection" title="説明"><a name="id287051242"></a><h2>説明</h2><p>ジオメトリをX3Dノード要素(<a class="ulink" href="http://web3d.org/x3d/specifications/ISO-IEC-19776-1.2-X3DEncodings-XML/Part01/EncodingOfNodes.html" target="_top">http://web3d.org/x3d/specifications/ISO-IEC-19776-1.2-X3DEncodings-XML/Part01/EncodingOfNodes.html</a>)で返します。<code class="varname">maxdecimaldigits</code>(精度)が指定されない場合のデフォルト値は15です。</p><div class="note" title="注記" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[注記]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGISジオメトリをX3Dに変換するには様々なオプションがあります。X3Dジオメトリのタイプは直接的にPostGISジオメトリタイプに対応付けされないためです。また、新しいX3D型は、よりよい対応付けになるかも知れませんが、大部分の描画ツールが現在のところ対応していないため避けています。これらは私たちが同意した対応付けです。アイデアまたは私たちが人々にそれらの好ましい対応付けを示すことができる方法についての考えがあるようでしたら、遠慮なくバグチケットに投稿して下さい。</p><p>次に現在PostGIS 2次元/3次元型からX3D型への対応付けを示します。</p></td></tr></table></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>PostGIS Type</th><th>2D X3D Type</th><th>3D X3D Type</th></tr></thead><tbody><tr><td>LINESTRING</td><td>未実装 - PolyLine2Dの予定</td><td>LineSet</td></tr><tr><td>MULTILINESTRING</td><td>未実装 - PolyLine2Dの予定</td><td>IndexedLineSet</td></tr><tr><td>MULTIPOINT</td><td>Polypoint2D</td><td>PointSet</td></tr><tr><td>POINT</td><td>空白区切り座標値を出力</td><td>空白区切り座標値を出力</td></tr><tr><td>(MULTI) POLYGON, POLYHEDRALSURFACE</td><td>不正なX3Dマークアップ</td><td>IndexedFaceSet (内環は現在は他のfacesetとして出力)</td></tr><tr><td>TIN</td><td>TriangleSet2D (未実装)</td><td>IndexedTriangleSet</td></tr></tbody></table></div><div class="note" title="注記" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[注記]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>2次元ジオメトリ対応はまだ不完全です。
内環は現在は分けられたポリゴンとして描画されます。</p></td></tr></table></div><p>3次元空間については、特に<a class="ulink" href="http://www.web3d.org/x3d/wiki/index.php/X3D_and_HTML5#Goals:_X3D_and_HTML5" target="_top">X3D Integration with HTML5</a>によって、よく進展しています。</p><p>また、描画されたジオメトリを閲覧するための素晴らしいオープンソースのX3Dビューアがあります。Free Wrl <a class="ulink" href="http://freewrl.sourceforge.net/" target="_top">http://freewrl.sourceforge.net/</a>のバイナリがMac, Linux, Windows用であります。ジオメトリを見るためのパッケージであるFreeWRL_Launcherを使います。</p><p>初出: 2.0.0: ISO-IEC-19776-1.2-X3DEncodings-XML</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 この関数は3次元に対応しています。Zインデクスを削除しません。</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 この関数は多面体サーフェスに対応しています。</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 この関数は三角形と不規則三角網(TIN)に対応しています。</p></div><div class="refsection" title="例: 完全に機能するX3D文書の作成 - FreeWrlや他のX3Dビューアで見ることができる立方体を生成しています。"><a name="id287051475"></a><h2>例: 完全に機能するX3D文書の作成 - FreeWrlや他のX3Dビューアで見ることができる立方体を生成しています。</h2><pre class="programlisting">SELECT '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor=''0 0 1''/&gt;   
       &lt;/Appearance&gt; ' || 
       ST_AsX3D( ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)), 
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)), 
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)), 
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )')) ||
      '&lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D&gt;' As x3ddoc;

		x3ddoc
		--------
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor='0 0 1'/&gt;   
       &lt;/Appearance&gt; 
       &lt;IndexedFaceSet  coordIndex='0 1 2 3 -1 4 5 6 7 -1 8 9 10 11 -1 12 13 14 15 -1 16 17 18 19 -1 20 21 22 23'&gt;
            &lt;Coordinate point='0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 0 1 0 1 0 0 1 1 1 0 1 1 1 1 0 1 1 0 0 0 1 0 0 1 1 1 1 1 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1' /&gt;
      &lt;/IndexedFaceSet&gt;
      &lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D&gt;</pre></div><div class="refsection" title="例: 高さ3単位で精度が6桁の八角柱"><a name="id287051485"></a><h2>例: 高さ3単位で精度が6桁の八角柱</h2><pre class="programlisting">SELECT ST_AsX3D(
ST_Translate(
    ST_Force_3d(
        ST_Buffer(ST_Point(10,10),5, 'quad_segs=2')), 0,0,
    3)
  ,6) As x3dfrag;

x3dfrag
--------
&lt;IndexedFaceSet coordIndex="0 1 2 3 4 5 6 7"&gt;
    &lt;Coordinate point="15 10 3 13.535534 6.464466 3 10 5 3 6.464466 6.464466 3 5 10 3 6.464466 13.535534 3 10 15 3 13.535534 13.535534 3 " /&gt;
&lt;/IndexedFaceSet&gt;</pre></div><div class="refsection" title="例: TIN"><a name="id287051496"></a><h2>例: TIN</h2><pre class="programlisting">SELECT ST_AsX3D(ST_GeomFromEWKT('TIN (((
                0 0 0, 
                0 0 1, 
                0 1 0, 
                0 0 0
            )), ((
                0 0 0, 
                0 1 0, 
                1 1 0, 
                0 0 0
            ))
            )')) As x3dfrag;

		x3dfrag
		--------
&lt;IndexedTriangleSet  index='0 1 2 3 4 5'&gt;&lt;Coordinate point='0 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 1 0'/&gt;&lt;/IndexedTriangleSet&gt;</pre></div><div class="refsection" title="Example: Closed multilinestring (the boundary of a polygon with holes)"><a name="id287051507"></a><h2>Example: Closed multilinestring (the boundary of a polygon with holes)</h2><pre class="programlisting">SELECT ST_AsX3D(
		    ST_GeomFromEWKT('MULTILINESTRING((20 0 10,16 -12 10,0 -16 10,-12 -12 10,-20 0 10,-12 16 10,0 24 10,16 16 10,20 0 10),
  (12 0 10,8 8 10,0 12 10,-8 8 10,-8 0 10,-8 -4 10,0 -8 10,8 -4 10,12 0 10))') 
) As x3dfrag;

		x3dfrag
		--------
&lt;IndexedLineSet  coordIndex='0 1 2 3 4 5 6 7 0 -1 8 9 10 11 12 13 14 15 8'&gt;
    &lt;Coordinate point='20 0 10 16 -12 10 0 -16 10 -12 -12 10 -20 0 10 -12 16 10 0 24 10 16 16 10 12 0 10 8 8 10 0 12 10 -8 8 10 -8 0 10 -8 -4 10 0 -8 10 8 -4 10 ' /&gt;
 &lt;/IndexedLineSet&gt;</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_AsSVG.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="reference.html#Geometry_Outputs">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_GeoHash.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">ST_AsSVG </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> ST_GeoHash</td></tr></table></div></body></html>
