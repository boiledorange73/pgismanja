<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第6章 PostGISリファレンス</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="PostGIS 1.3.6 マニュアル"><link rel="up" href="index.html" title="PostGIS 1.3.6 マニュアル"><link rel="prev" href="ch05.html" title="第5章 性能向上に関する技法"><link rel="next" href="ch07.html" title="第7章 問題を報告する"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第6章 PostGISリファレンス</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05.html">戻る</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch07.html">次へ</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="idp66878024"></a>第6章 PostGISリファレンス</h1></div></div></div><div class="toc"><p><b>目次</b></p><dl class="toc"><dt><span class="sect1"><a href="ch06.html#idp66879816">6.1. OpenGIS関数</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch06.html#idp66880456">6.1.1. 管理関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp66887880">6.1.2. 空間関係関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp66976840">6.1.3. ジオメトリ処理関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67024200">6.1.4. ジオメトリアクセサ</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67097928">6.1.5. ジオメトリ コンストラクタ</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch06.html#idp60552392">6.2. PostGIS独自拡張</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch06.html#idp60553032">6.2.1. 管理関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67170504">6.2.2. 演算子</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67193160">6.2.3. 計測関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67219016">6.2.4. ジオメトリ出力</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67239496">6.2.5. ジオメトリ コンストラクタ</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67277256">6.2.6. ジオメトリエディタ</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67361992">6.2.7. 線型参照</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67380680">6.2.8. その他の関数</a></span></dt><dt><span class="sect2"><a href="ch06.html#idp67453128">6.2.9. Long Transactions support</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch06.html#idp67513544">6.3. SQL-MM関数</a></span></dt><dt><span class="sect1"><a href="ch06.html#idp67668424">6.4. ArcSDE関数</a></span></dt></dl></div><p>ここで示す関数はPostGISユーザが必要とすると思われる関数です。この他に、一般的なユーザが使わないPostGISオブジェクトに対して求められるサポート関数があります。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>PostGISは、既存の名前付け方針からSQL-MM中心の方針への切り替えを開始しています。結果として、ユーザが知っていて愛用している関数の多くが標準空間型 (ST)プレフィクスを使うように名前変更されました。 以前の関数はまだ有効ですが、更新された等価な関数があるものについては、この文書の一覧から外しています。これらの関数は、将来のリリースでは非推奨になります。</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp66879816"></a>6.1. OpenGIS関数</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp66880456"></a>6.1.1. 管理関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><a name="AddGeometryColumn"></a><span class="term">AddGeometryColumn(varchar, varchar, varchar, integer, varchar, integer)</span></dt><dd><p>構文: AddGeometryColumn(&lt;スキーマ名&gt;, &lt;テーブル名&gt;, &lt;カラム名&gt;, &lt;srid&gt;, &lt;タイプ&gt;, &lt;次元&gt;). 存在する属性テーブル (訳注:ジオメトリカラムが存在しない意と思われますが、ジオメトリカラムが既に存在していても追加できます)」にジオメトリカラムを追加します。スキーマ名は、テーブルスキーマの名前です (プリスキーマ版PostgreSQLの場合は使われません)。 sridは、SPATIAL_REF_SYSテーブルに登録されている整数値でなければなりません。 型は、'POLGYON', 'MULTILINESTRING' などのように、常に大文字の文字列で、ジオメトリ型に対応していなければなりません。</p></dd><dt><span class="term">DropGeometryColumn(varchar, varchar, varchar)</span></dt><dd><p>構文: DropGeometryColumn(&lt;スキーマ名&gt;, &lt;テーブル名&gt;, &lt;カラム名&gt;). ジオメトリカラムを空間テーブルから削除します。 スキーマ名はgeometry_columnsテーブル内にある、そのテーブル名を持つ行のf_schema_nameフィールドと一致しなければならないことに注意して下さい。</p></dd><dt><span class="term">Probe_Geometry_Columns()</span></dt><dd><p>PostGISジオメトリ制約 (訳注: カラム型がジオメトリ型でSRID制約とgeometrytype制約を持つカラム)を持つテーブルの全てをスキャンして、まだgeometry_columnsテーブルに存在しない場合には、geometry_columnsに追加します。また、挿入数、既存数または廃止カラム数の統計を与えます。</p></dd><dt><span class="term">ST_SetSRID(geometry, integer)</span></dt><dd><p>ジオメトリのSRIDを特定の整数値に設定します。クエリのためのバウンディングボックスを生成する際に使います。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp66887880"></a>6.1.2. 空間関係関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_Distance(geometry, geometry)</span></dt><dd><p>投影された単位での二つのジオメトリの間のデカルト距離を返します。インデクスは使いません。</p></dd><dt><span class="term">ST_DWithin(geometry, geometry, float)</span></dt><dd><p>ジオメトリ間の距離が指定した距離以内ならtrueを返します。インデクスがあるならインデクスを使います。</p></dd><dt><a name="ST_Equals"></a><span class="term">ST_Equals(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的に等価」であるなら1 (TRUE)を返します。'='より「良い」回答が得られます。equals('LINESTRING(0 0, 10 10)','LINESTRING(0 0, 5 5, 10 10)')は、trueになります。</p><p>GEOSモジュールによって実現しています。</p><p>OGC SPEC s2.1.1.2</p></dd><dt><span class="term">ST_Disjoint(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的にインタセクトしている (訳注:共通領域を持つ)」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 //s2.1.13.3 - a.Relate(b, 'FF*FF****')</p></dd><dt><span class="term">ST_Intersects(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的にインタセクトしている (訳注:共通領域を持つ)」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数には、自動的に、ジオメトリに付けられたインデックスを使ったバウンディングボックス比較を含みます。インデックスの使用を避けたいなら、_ST_Intersectsを使います。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 //s2.1.13.3 - Intersects(g1, g2 ) --&gt; Not (Disjoint(g1, g2 ))</p></dd><dt><span class="term">ST_Touches(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的に接触している」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数には、自動的に、ジオメトリに付けられたインデックスを使ったバウンディングボックス比較を含みます。インデックスの使用を避けたいなら、_ST_Touchesを使います</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3- a.Touches(b) -&gt; (I(a) intersection I(b) = {empty set} ) and (a intersection b) not empty</p></dd><dt><span class="term">ST_Crosses(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的にクロスしている (訳注:共通領域を持ち、かつ共通領域の次元が引数ジオメトリの最大次元-1」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数には、自動的に、ジオメトリに付けられたインデックスを使ったバウンディングボックス比較を含みます。インデックスの使用を避けたいなら、_ST_Crossesを使います</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3 - a.Relate(b, 'T*T******')</p></dd><dt><span class="term">ST_Within(geometry A, geometry B)</span></dt><dd><p>ジオメトリAがジオメトリB「の中に空間的にいる」なら1 (TRUE)を返します。Aは完全にBの内部にいなければなりません。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数の呼び出しによって、ジオメトリで使用可能なインデックスを使用したバウンディングボックスの比較が自動的に行われます。インデックスの使用を避けるには_ST_Withinを使います。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3 - a.Relate(b, 'T*F**F***')</p></dd><dt><span class="term">ST_Overlaps(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的にオーバラップしている」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数の呼び出しによって、ジオメトリで使用可能なインデクスを使用したバウンディングボックスの比較が自動的に行われます。インデクスの使用を避けるには_ST_Overlapsを使います。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3</p></dd><dt><span class="term">ST_Contains(geometry A, geometry B)</span></dt><dd><p>ジオメトリAがジオメトリBを「空間的に含んでいる」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>この関数の呼び出しによって、ジオメトリで使用可能なインデクスを使用したバウンディングボックスの比較が自動的に行われます。インデクスの使用を避けるには、_ST_Containsを使います。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3 - within(geometry B, geometry A)と同じ</p></dd><dt><span class="term">ST_Covers(geometry A, geometry B)</span></dt><dd><p>ジオメトリBにジオメトリAの外となるポイントが無い場合には、1 (TRUE)を返します。</p><p>この関数の必要性についてはhttp://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.htmlを参照して下さい。</p><p>この関数の呼び出しによって、ジオメトリで使用可能なインデックスを使用したバウンディングボックスの比較が自動的に行われます。インデックスの使用を避けるには、_ST_Coversを使います。</p></dd><dt><span class="term">ST_CoveredBy(geometry A, geometry B)</span></dt><dd><p>ジオメトリAにジオメトリBの外となるポイントが無い場合には、1 (TRUE)を返します。</p><p>この関数の必要性についてはhttp://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.htmlを参照して下さい。</p></dd><dt><span class="term">ST_Intersects(geometry, geometry)</span></dt><dd><p>ジオメトリが「空間的にインタセクトしている (訳注:共通領域を持つ)」なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3 - NOT disjoint(geometry, geometry)</p></dd><dt><span class="term">ST_Relate(geometry, geometry, intersectionPatternMatrix)</span></dt><dd><p>このジオメトリが空間的に、もう一つのジオメトリに関連しているなら1 (TRUE)を返します。 この関連は、intersectionPatternMatrix行列の値によって指定された、 二つのジオメトリの内部、境界、外部の交差要素を見ることで決定されます。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>ご注意: これは論理値を返して整数を返さないのが「許される」版です。</p><p>OGC SPEC s2.1.1.2 // s2.1.13.3</p></dd><dt><span class="term">ST_Relate(geometry, geometry)</span></dt><dd><p>DE-9IM (次元拡張された9要素行列)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>OGC仕様にはありませんが実装しました。s2.1.13.2をご覧下さい。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp66976840"></a>6.1.3. ジオメトリ処理関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_Centroid(geometry)</span></dt><dd><p>ジオメトリの重心をポイントとして返します。</p><p>GEOSモジュールによって実現されている (コンパイル時に指定されます)なら、より正確に計算できます。</p></dd><dt><span class="term">ST_Area(geometry)</span></dt><dd><p>ジオメトリがポリゴンかマルチポリゴンならジオメトリの面積を返します。</p></dd><dt><span class="term">ST_Length(geometry)</span></dt><dd><p>ジオメトリの、組み込まれている空間参照系での曲線長を返します。</p><p>これはlength2d()の別名です。</p><p>OGC SPEC 2.1.5.1</p></dd><dt><span class="term">ST_PointOnSurface(geometry)</span></dt><dd><p>表面にあることが保障された点を返します。</p><p>GEOSモジュールによって実現しています。</p><p>OGC SPEC 3.2.14.2 and 3.2.18.2 -</p></dd><dt><span class="term">ST_Boundary(geometry)</span></dt><dd><p>ジオメトリの組み合わせ境界の閉包を返します (訳注: ラインストリングは端点、ポリゴンはエッジ、複合オブジェクトは境界のうち奇数番)。組み合わせ境界はOGC仕様の3.12.3.2節に記述されています。結果として出てくる境界は、OGC SPEC 3.12.2で議論されているように、ジオメトリプリミティブを使って表現できます。</p><p>GEOSモジュールによって実現しています。</p><p>OGC SPEC s2.1.1.1</p></dd><dt><span class="term">ST_Buffer(geometry, double, [integer])</span></dt><dd><p>ジオメトリからの距離が指定した距離未満となる全てのポイントを示すジオメトリを返します。オプションの第3引数では、4分の1にした円を近似するために使われる弦の数を設定します (デフォルトは8です)。</p><p>GEOSモジュールで実現しています。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_ConvexHull(geometry)</span></dt><dd><p>凸包(convex hull)は与えられた集合の全てのジオメトリを含む最小の閉じたジオメトリです (訳注: 板に何本も釘を刺して外側から輪ゴムをかけた様子を想像して下さい。釘がジオメトリを示し、輪ゴムを境界とした作られる図形が凸包です)。 </p><p>通常は、マルチ系ジオメトリとジオメトリコレクションで使われます。この関数は集計関数ではありませんが、ポイントの集合の凸包を得るために、ST_ConvexHull(ST_Collect(somepointfield))のようにST_Collectと併用して使います。この併用は、次のように、観測したポイントの集合をもとに影響を受ける領域を決定するためにしばしば使われます。 </p><pre class="programlisting">SELECT d.disease_type, ST_ConvexHull(ST_Collect(d.the_geom)) As the_geom 
        FROM disease_obs As d 
        GROUP BY d.disease_type</pre><p>GEOSモジュールによって実現しています。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_Intersection(geometry, geometry)</span></dt><dd><p>ジオメトリのインタセクションとなる点集合を表現するジオメトリを返します。 </p><p>言い換えると、ジオメトリAとジオメトリBとで共有されている部分のことです。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_Shift_Longitude(geometry)</span></dt><dd><p>ジオメトリの全ての地物の全てのポイント/頂点を読み、経度値が0より小さい場合には360を足します。結果は、180度を中心にした地図に描画される、経度が0-360の区間にあるデータです。</p><p>1.3.4より前ではMULTIPOINTでは動作しない誤りがありました。1.3.4以上ではMULTIPOINTでも動作します。</p></dd><dt><span class="term">ST_SymDifference(geometry A, geometry B)</span></dt><dd><p>AとBの、インタセクトしていない部分を表現するジオメトリを返します。対称と呼ばれるのは、ST_SymDifference(A,B) = ST_SymDifference(B,A) となるからです。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_Difference(geometry A, geometry B)</span></dt><dd><p>ジオメトリBにインタセクトしないジオメトリAの部分を表現するジオメトリを返します。</p><p>GEOSモジュールによって実現しています。</p><p>ジオメトリコレクションを引数として呼ばないでください。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_Union(geometry, geometry)</span></dt><dd><p>ジオメトリの結合の点集合を表現するジオメトリを返します。</p><p>GEOSモジュールで実現しています。</p><p>ジオメトリコレクションを引数として呼んではなりません。</p><p>ご注意: この関数は以前は、"Union"から名称変更してGeomUnion()と呼ばれていました。UNIONはSQLの予約語であるためです。</p><p>OGC SPEC s2.1.1.3</p></dd><dt><span class="term">ST_Union(geometry set)</span></dt><dd><p>与えられた集合の全てのジオメトリを結合したポイント集合を示すジオメトリを返します。</p><p>GEOSモジュールで実現しています。</p><p>ジオメトリコレクションを引数集合で呼んではなりません。</p><p>OGC仕様では明示的に定義されていません。</p></dd><dt><span class="term">ST_MemUnion(geometry set)</span></dt><dd><p>上と同じですが、メモリフレンドリ (少ないメモリ使用で長い処理時間)です。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67024200"></a>6.1.4. ジオメトリアクセサ</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_AsText(geometry)</span></dt><dd><p>ジオメトリのWell-Known Text表現を返します。たとえばPOLYGON(0 0,0 1,1 1,1 0,0 0)などです。</p><p>OGC SPEC s2.1.1.1</p></dd><dt><span class="term">ST_AsBinary(geometry)</span></dt><dd><p>ジオメトリをOGC"Well-Known Binary"表現で返します。データベースが動いているサーバのエンディアンを使います。これは文字列表現に変換せずにデータをデータベースから引き出すバイナリカーソルに有用です。</p><p>OGC SPEC s2.1.1.1 - asBinary(&lt;geometry&gt;,'XDR') and asBinary(&lt;geometry&gt;,'NDR')も参照して下さい</p></dd><dt><span class="term">ST_SRID(geometry)</span></dt><dd><p>ジオメトリの空間参照系SRIDを整数で返します。</p><p>OGC SPEC s2.1.1.1</p></dd><dt><span class="term">ST_Dimension(geometry)</span></dt><dd><p>このジオメトリオブジェクトの固有の次元です。 ジオメトリオブジェクトは座標の次元以下である必要があります。OGC SPEC s2.1.1.1 - 0ならポイント、1ならライン、2ならポリゴン、ジオメトリコレクションの場合は要素ごとの次元の最大値です。</p><pre class="programlisting">select dimension('GEOMETRYCOLLECTION(LINESTRING(1 1,0 0),POINT(0 0)'); 
dimension 
----------- 
1</pre></dd><dt><span class="term">ST_Envelope(geometry)</span></dt><dd><p>ジオメトリーのバウンディングボックスを表している有効なジオメトリ（POINT、LINESTRINGまたはPOLYGON）を返します。縮退した場合（垂直線、点）は、POLYGONより低い次元のジオメトリを返します。</p><p>OGC SPEC s2.1.1.1 -このジオメトリの最小のバウンディングボックスをジオメトリとして返します。ポリゴンはバウンディングボックスの頂点((MINX, MINY), (MAXX, MINY), (MAXX, MAXY), (MINX, MAXY), (MINX, MINY))で定義されます。</p><p>ご注意: PostGISはZmin/Zmax座標も同様に加えます。</p></dd><dt><span class="term">ST_IsEmpty(geometry)</span></dt><dd><p>ジオメトリが空ジオメトリなら1 (TRUE)を返します。 TRUEなら、このジオメトリは空のポイント集合を示すジオメトリ、すなわちGEOMETRYCOLLECTION(EMPTY)です。</p><p>OGC SPEC s2.1.1.1</p></dd><dt><a name="IsSimple"></a><span class="term">ST_IsSimple(geometry)</span></dt><dd><p>Returns 1 (TRUE) if this Geometry has no anomalous geometric points, such as self intersection or self tangency.</p><p>GEOSモジュールによって実現しています。</p><p>OGC SPEC s2.1.1.1</p></dd><dt><a name="IsClosed"></a><span class="term">ST_IsClosed(geometry)</span></dt><dd><p>開始点と終了点とが同じになっているジオメトリならTRUEを返します。</p></dd><dt><span class="term">ST_IsRing(geometry)</span></dt><dd><p>この曲線が閉じていて( StartPoint( ) = EndPoint( ) )、この曲線が単純 (2回以上同一点を通過しない)なら1 (TRUE)を返します。</p><p>GEOSモジュールによって実現しています。</p><p>OGC spec 2.1.5.1</p></dd><dt><span class="term">ST_NumGeometries(geometry)</span></dt><dd><p>ジオメトリがGEOMETRYCOLLECTION (または MULTI系)の場合はジオメトリ数を返し、そうでないならNULLを返します。</p></dd><dt><span class="term">ST_GeometryN(geometry,int)</span></dt><dd><p>ジオメトリがGEOMETRYCOLLECTION, MULTIPOINT, MULTILINESTRINGまたはMULTIPOLYGONの場合はN番目のジオメトリを返します。それ以外の場合はNULLを返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>OGC仕様のため0.8.0版からインデクスを1始まりにしています。これより前の版では0始まりになっています。</p></div></dd><dt><span class="term">ST_NumPoints(geometry)</span></dt><dd><p>ジオメトリの最初のラインストリングのポイント数を返します。ジオメトリにラインストリングが無い場合はNULLを返します。</p></dd><dt><span class="term">ST_PointN(geometry,integer)</span></dt><dd><p>ジオメトリの最初のラインストリングにおける、N番目のポイントを返します。ジオメトリにラインストリングが無い場合はNULLを返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>OGC仕様のため0.8.0版からインデクスを1始まりにしています。これより前の版では0始まりになっています。</p></div></dd><dt><span class="term">ST_ExteriorRing(geometry)</span></dt><dd><p>ポリゴンの外環を返します。ジオメトリがポリゴンでない場合はNULLを返します。</p></dd><dt><span class="term">ST_NumInteriorRings(geometry)</span></dt><dd><p>ジオメトリの最初のポリゴンの内環数を返します。ジオメトリにポリゴンが無い場合はNULLを返します。</p></dd><dt><span class="term">ST_NumInteriorRing(geometry)</span></dt><dd><p>NumInteriorRings(geometry)の別名です。OpenGIS仕様では、関数の名前付けについてあいまいであるため、両方のスペリングの関数を提供しています。</p></dd><dt><span class="term">ST_InteriorRingN(geometry,integer)</span></dt><dd><p>ポリゴンのN番目の内環を返します。ジオメトリがポリゴンでないか、N番が範囲外である場合はNULLを返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>OGC仕様のため0.8.0版からインデクスを1始まりにしています。これより前の版では0始まりになっています。</p></div></dd><dt><span class="term">ST_EndPoint(geometry)</span></dt><dd><p>ラインストリングの最後のポイントをポイントで返します。</p></dd><dt><a name="StartPoint"></a><span class="term">ST_StartPoint(geometry)</span></dt><dd><p>ラインストリングの最初のポイントをポイントで返します。</p></dd><dt><a name="GeometryType"></a><span class="term">GeometryType(geometry)</span></dt><dd><p>ジオメトリタイプを文字列で返します。たとえば'LINESTRING', 'POLYGON', 'MULTIPOINT'等です。</p><p>OGC SPEC s2.1.1.1 - このジオメトリインスタンスがメンバーになっているジオメトリのインスタンス化可能な派生タイプの名前を返します。インスタンス化可能な派生タイプの名前は、文字列として返されます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>この関数は、'POINTM'等が返るので、ジオメトリがM値を持っているかどうかも示します。</p></div></dd><dt><span class="term">ST_GeometryType(geometry)</span></dt><dd><p>ジオメトリタイプを文字列で返します。たとえば、'Linestring', 'Polygon' 等です。この関数は、GeometryType(geometry)と異なり、ジオメトリが計測された (訳注:「M座標を持つ」という意味)かどうかを示さず、また、返される文字列の大文字小文字の差があります。</p></dd><dt><span class="term">ST_X(geometry)</span></dt><dd><p>ポイントのX座標値を返します。引数はポイントでなければなりません。</p></dd><dt><span class="term">ST_Y(geometry)</span></dt><dd><p>ポイントのY座標値を返します。引数はポイントでなければなりません。</p></dd><dt><span class="term">ST_Z(geometry)</span></dt><dd><p>ポイントのZ座標値を返し、Z座標が無い場合はNULLを返します。引数はポイントでなければなりません。</p></dd><dt><span class="term">ST_M(geometry)</span></dt><dd><p>ポイントのM座標値を返し、M座標が無い場合はNULLを返します。引数はポイントでなければなりません。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>これは (いまだに)OGC仕様に入っていませんが、ポイント座標抽出関数のリストを完全にするために挙げています。</p></div></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67097928"></a>6.1.5. ジオメトリ コンストラクタ</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_GeomFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p></dd><dt><span class="term">ST_PointFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがポイントでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_LineFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p></dd><dt><span class="term">ST_LinestringFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>仕様適合のためです。</p><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p></dd><dt><span class="term">ST_PolyFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_PolygonFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>仕様適合のためです。</p><p>WKTがポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MPointFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがマルチポイントでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MLineFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがマルチラインストリングでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MPolyFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがマルチポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_GeomCollFromText(text,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKTから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKTがジオメトリコレクションでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_GeomFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p></dd><dt><span class="term">ST_GeometryFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p></dd><dt><span class="term">ST_PointFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがポイントでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_LineFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがラインストリングでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_LinestringFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>仕様適合のためです。</p><p>WKBがラインストリングでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_PolyFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_PolygonFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>仕様適合のためです。</p><p>WKBがポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MPointFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがマルチポイントでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MLineFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがマルチラインストリングでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_MPolyFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがマルチポリゴンでない場合はエラーを投げます。</p></dd><dt><span class="term">ST_GeomCollFromWKB(bytea,[&lt;srid&gt;])</span></dt><dd><p>ジオメトリをWKBから作成し、SRIDを与えます。SRIDが与えられない場合は-1をデフォルトで与えます。</p><p>OGC SPEC 3.2.6.2 - 任意引数SRIDは仕様適合のためです。</p><p>WKBがジオメトリコレクションでない場合はエラーを投げます。</p></dd><dt><a name="BdPolyFromText"></a><span class="term">ST_BdPolyFromText(text WKT, integer SRID)</span></dt><dd><p>マルチラインストリングのテキスト表現で示された、任意の閉じたラインストリングのコレクションで作られたポリゴンを生成します。</p><p>WKTがマルチラインストリングでないならエラーを投げます。出力がマルチポリゴンならエラーを投げるので、その場合は<a class="link" href="ch06.html#BdMPolyFromText">BdMPolyFromText</a>を使うか、PostGIS独自のアプローチの<a class="link" href="ch06.html#BuildArea">BuildArea()</a>をご覧下さい。</p><p>OGC SFSQL 1.1 - 3.2.6.2</p><p>Availability: 1.1.0 - GEOS 2.1.0以上が必要です。</p></dd><dt><a name="BdMPolyFromText"></a><span class="term">ST_BdMPolyFromText(text WKT, integer SRID)</span></dt><dd><p>マルチラインストリングのテキスト表現で示された、任意の閉じたラインストリングのコレクションで作られたマルチポリゴンを生成します。</p><p>WKTがマルチラインストリングでないならエラーを投げます。結果が本当に一つだけのポリゴンであったとしても、マルチポリゴンで出力します。一つだけのポリゴンが返ってくるのが確実でしたら、<a class="link" href="ch06.html#BdPolyFromText">BdPolyFromText</a>を使うか、PostGIS独自のアプローチである<a class="link" href="ch06.html#BuildArea">BuildArea()</a>をご覧下さい。</p><p>OGC SFSQL 1.1 - 3.2.6.2</p><p>Availability: 1.1.0 - GEOS 2.1.0以上が必要です。</p></dd></dl></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp60552392"></a>6.2. PostGIS独自拡張</h2></div></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp60553032"></a>6.2.1. 管理関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">DropGeometryTable([&lt;スキーマ名&gt;], &lt;テーブル名&gt;)</span></dt><dd><p>テーブルとgeometry_columnsからの参照を削除します。 ご注意: スキーマ対応版PostgreSQLでは、スキーマが与えられない場合はcurrent_schema()を使います。</p></dd><dt><span class="term">UpdateGeometrySRID([&lt;schema_name&gt;], &lt;table_name&gt;, &lt;column_name&gt;, &lt;srid&gt;)</span></dt><dd><p>ジオメトリカラムにある全てのフィーチャーのSRIDを更新し、SRIDに関するジオメトリ制限とgeometry_columnsのSRIDを更新します。ご注意: スキーマ対応版PostgreSQLでは、スキーマが与えられない場合はcurrent_schema()を使います。</p></dd><dt><span class="term">update_geometry_stats([&lt;table_name&gt;, &lt;column_name&gt;])</span></dt><dd><p>クエリプランナが使う、空間テーブルの統計情報を更新します。統計情報収集処理を完全にするためにはには"VACUUM ANALYZE [テーブル名] [カラム名]"も実行する必要があります。ご注意: PostgreSQL 8.0からは統計情報の収集は"VACUUM ANALYZE"で自動的に行われます。</p></dd><dt><span class="term">postgis_version()</span></dt><dd><p>PostGISの版番号とコンパイルオプションを返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>1.1.0版より前では、これはプロシージャだったので、不正確な情報が返る可能性があります (不完全なデータベースアップグレードを行った場合)。</p></div></dd><dt><a name="postgis_lib_version"></a><span class="term">postgis_lib_version()</span></dt><dd><p>PostGISライブラリの版を返します。</p><p>Availability: 0.9.0</p></dd><dt><span class="term">postgis_lib_build_date()</span></dt><dd><p>PostGISライブラリをビルドした日を返します。</p><p>Availability: 1.0.0RC1</p></dd><dt><span class="term">postgis_script_build_date()</span></dt><dd><p>PostGISスクリプトをビルドした日を返します。</p><p>Availability: 1.0.0RC1</p></dd><dt><span class="term">postgis_scripts_installed()</span></dt><dd><p>このデータベースにインストールしたPostGISスクリプトの版を返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>この関数の出力と<a class="link" href="ch06.html#postgis_scripts_released">postgis_scripts_released()</a>の出力が一致しない場合、既存データベースの完全なアップグレードに失敗しているかも知れません。詳細については、<a class="link" href="ch02.html#upgrading" title="2.2.2. アップグレード">アップグレード</a>の節をご覧下さい。</p></div><p>Availability: 0.9.0</p></dd><dt><a name="postgis_scripts_released"></a><span class="term">postgis_scripts_released()</span></dt><dd><p>インストールされたPostGISライブラリからリリースされたlwpostgis.sqlスクリプトの版番号を返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>1.1.0からは、この関数は<a class="link" href="ch06.html#postgis_lib_version">postgis_lib_version()</a>と同じ値を返します。後方互換のために維持されます。</p></div><p>Availability: 0.9.0</p></dd><dt><span class="term">postgis_geos_version()</span></dt><dd><p>GEOSライブラリの版を返します。GEOS対応が有効でないならNULLを返します。</p><p>Availability: 0.9.0</p></dd><dt><span class="term">postgis_jts_version()</span></dt><dd><p>JTSライブラリの版番号を返します。JTS対応が有効でないならNULLを返します。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">postgis_proj_version()</span></dt><dd><p>PROJ4ライブラリの版を返します。PROJ4対応が有効でないならNULLを返します。</p><p>Availability: 0.9.0</p></dd><dt><span class="term">postgis_uses_stats()</span></dt><dd><p>STATSの使用が可能になっているならTRUEを返し、そうでないならFALSEを返します。</p><p>Availability: 0.9.0</p></dd><dt><a name="postgis_full_version"></a><span class="term">postgis_full_version()</span></dt><dd><p>完全なPostGISの版情報とコンフィギュレーション情報を報告します。</p><p>Availability: 0.9.0</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67170504"></a>6.2.2. 演算子</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">A = B</span></dt><dd><p>"="演算子は、AのバウンダリボックスがBのバウンダリボックスが同じならTRUEを返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>この演算子は、多くの混乱を引き起こします。ジオメトリA=ジオメトリBの比較を実行すると、バウンダリボックスが同じならジオメトリが明らかに異なっていてもtrueを返します。本当に同等であるかをチェックするには、<a class="link" href="ch06.html#ST_OrderingEquals">ST_OrderingEquals</a>または<a class="link" href="ch06.html#ST_Equals">ST_Equals</a>を使用して下さい。</p></div></dd><dt><span class="term">A &amp;&lt; B</span></dt><dd><p>"&amp;&lt;"演算子は、AのバウンディングボックスがBのバウンディングボックスとオーバラップしているか左側にある場合にTRUEを返します。</p></dd><dt><span class="term">A &amp;&gt; B</span></dt><dd><p>"&amp;&gt;"演算子は、AのバウンディングボックスがBのバウンディングボックスとオーバラップしているか右側にある場合にTRUEを返します。</p></dd><dt><span class="term">A &lt;&lt; B</span></dt><dd><p>"&lt;&lt;"演算子は、Aのバウンディングボックスが厳密にBのバウンディングボックスの左側にある場合にTRUEを返します。</p></dd><dt><span class="term">A &gt;&gt; B</span></dt><dd><p>"&gt; &gt;" 演算子は、a の境界ボックスが B の境界ボックスの右側に厳密にある場合に true を返します。</p></dd><dt><span class="term">A &amp;&lt;| B</span></dt><dd><p>"&amp;&lt;|"演算子は、AのバウンディングボックスがBのバウンディングボックスとオーバラップしているか下にある場合にTRUEを返します。</p></dd><dt><span class="term">A |&amp;&gt; B</span></dt><dd><p>"|&amp;&gt;"演算子は、AのバウンディングボックスがBのバウンディングボックスとオーバラップしているか上にある場合にTRUEを返します。</p></dd><dt><span class="term">A &lt;&lt;| B</span></dt><dd><p>"&lt;&lt;|"演算子は、Aのバウンディングボックスが厳密にBのバウンディングボックスの下にある場合にTRUEを返します。</p></dd><dt><span class="term">A |&gt;&gt; B</span></dt><dd><p>"|&gt;&gt;"演算子は、Aのバウンディングボックスが厳密にBのバウンディングボックスの上にある場合にTRUEを返します。</p></dd><dt><span class="term">A ~= B</span></dt><dd><p>"~="演算子は、「同じ形のもの」演算子です。二つのジオメトリが実際に幾何学的に等価であるかどうかを見ます。AとBが頂点ごとに見て同じフィーチャーの場合にTRUEを返します。</p></dd><dt><span class="term">A @ B</span></dt><dd><p>"@"演算子は、Aのバウンディングボックスが完全にBのバウンディングボックスに含まれる場合にTRUEを返します。</p></dd><dt><span class="term">A ~ B</span></dt><dd><p>"~"演算子は、Aのバウンディングボックスが完全にBのバウンディングボックスを含む場合にTRUEを返します。</p></dd><dt><span class="term">A &amp;&amp; B</span></dt><dd><p>"&amp;&amp;"演算子は、オーバラップ演算子です。AのバウンディングボックスがBのバウンディングボックスをオーバラップする場合にTRUEを返します。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67193160"></a>6.2.3. 計測関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_Area(geometry)</span></dt><dd><p>ジオメトリがポリゴンかマルチポリゴンならジオメトリの面積を返します。</p></dd><dt><span class="term">ST_distance_sphere(point, point)</span></dt><dd><p>緯度経度で示された二点の直線距離をメートルで返します。半径6370986メートルの球体とします。<a class="link" href="ch06.html#distance_spheroid">distance_spheroid()</a>より早いですが、精度は落ちます。ポイントについてのみ実装しています。</p></dd><dt><a name="distance_spheroid"></a><span class="term">ST_distance_spheroid(point, point, spheroid)</span></dt><dd><p>指定した楕円体を使って、緯度経度で示された2点の直線距離をメートルで返します。<a class="link" href="ch06.html#length_spheroid">length_spheroid()</a>にある楕円体の説明をご覧下さい。現在は、ポイントについてのみ実装しています。</p></dd><dt><a name="length2d"></a><span class="term">ST_length2d(geometry)</span></dt><dd><p>ラインストリングまたはマルチラインストリングの場合に、ジオメトリの2次元の長さを返します。</p></dd><dt><span class="term">ST_length3d(geometry)</span></dt><dd><p>ラインストリングまたはマルチラインストリングの場合に、ジオメトリの3次元の長さを返します。</p></dd><dt><a name="length_spheroid"></a><span class="term">ST_length_spheroid(geometry,spheroid)</span></dt><dd><p>回転楕円体上の長さを計算します。この関数は、ジオメトリの座標が経度/緯度であって、投影変換を行わずに長さを求めたい場合に使います。回転楕円体は別々のデータベースタイプで、次のように構成されています。</p><div class="literallayout"><p>SPHEROID[&lt;名称&gt;,&lt;長軸半径&gt;,&lt;扁平率の逆数&gt;]</p></div><p>例:</p><div class="literallayout"><p>SPHEROID["GRS_1980",6378137,298.257222101]</p></div><p>計算例は次のようになるでしょう。</p><div class="literallayout"><p>SELECT length_spheroid( geometry_column,<br>
              'SPHEROID["GRS_1980",6378137,298.257222101]' )<br>
              FROM geometry_table;</p></div></dd><dt><span class="term">ST_length3d_spheroid(geometry,spheroid)</span></dt><dd><p>ジオメトリの楕円体上の長さを、標高を考慮して計算します。この関数は、鉛直変動によって加えられる距離を計算するために鉛直座標 (楕円体の軸と同じ単位です)を使うことを除くと、ちょうどlength_spheroidに似ています。</p></dd><dt><span class="term">ST_distance(geometry, geometry)</span></dt><dd><p>二つのジオメトリ間の最短距離を返します。</p></dd><dt><span class="term">ST_max_distance(linestring,linestring)</span></dt><dd><p>二つのラインストリング間の最長距離を返します。</p></dd><dt><span class="term">ST_perimeter(geometry)</span></dt><dd><p>POLYGONまたはMULTIPOLYGONジオメトリの場合に、2次元周囲長を返します。</p></dd><dt><span class="term">ST_perimeter2d(geometry)</span></dt><dd><p>POLYGONまたはMULTIPOLYGONジオメトリの場合に、2次元周囲長を返します。</p></dd><dt><span class="term">ST_perimeter3d(geometry)</span></dt><dd><p>POLYGONまたはMULTIPOLYGONジオメトリの場合には、3次元周囲長を返します。</p></dd><dt><span class="term">ST_azimuth(geometry, geometry)</span></dt><dd><p>与えられたポイントからなる線分の方位をラジアンで返します。二点が同位置にある場合はNULLを返します。</p><p>Availability: 1.1.0</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67219016"></a>6.2.4. ジオメトリ出力</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_AsBinary(geometry,{'NDR'|'XDR'})</span></dt><dd><p>リトルエンディアン(NDR)またはビッグエンディアン(XDR)を使ったOGC "Well-known-binary"表現をbytea型で返します。この関数は、データをデータベース外に文字列表現を使わずに持ち出すバイナリカーソルで有用です。</p></dd><dt><span class="term">ST_AsEWKT(geometry)</span></dt><dd><p>ジオメトリのEWKT表現をTEXT型で返します。</p></dd><dt><span class="term">ST_AsEWKB(geometry, {'NDR'|'XDR'})</span></dt><dd><p>リトルエンディアン (NDR)またはビッグエンディアン (XDR)を使ったEWKB表現をbytea型で返します。</p></dd><dt><span class="term">ST_AsHEXEWKB(geometry, {'NDR'|'XDR'})</span></dt><dd><p>ジオメトリのHEXEWKB表現を (文字列として)返します。リトルエンディアン (NDR)またはビッグエンディアン (XDR)のどちらかのエンコーディングを使います。</p></dd><dt><span class="term">ST_AsSVG(geometry, [rel], [precision])</span></dt><dd><p>ジオメトリをSVGパスデータで返します。第2引数に1を指定すると、相対移動によるパスデータ実装を返します。デフォルト (または0指定)では、絶対移動を使います。第3引数は、出力の十進数の最大桁数を減らすために使います (デフォルトは15です)。'rel'が0のときはポイントはcx/cyに、'rel'が1のときはx/yに、それぞれ出力します。マルチポイントはコンマ (",")で区切られ、ジオメトリコレクションはセミコロン (";")で区切られます。</p></dd><dt><span class="term">ST_AsGML([version], geometry, [precision])</span></dt><dd><p>ジオメトリをGMLエレメントで返します。version引数は、指定する場合は2または3にすることができます。version引数を指定しない場合は、デフォルトを2と仮定します。第3引数は、出力の最大有効桁数を減らすために使います (デフォルトは15です)。</p></dd><dt><span class="term">ST_AsKML([version], geometry, [precision])</span></dt><dd><p>ジオメトリをKMLエレメントを返します。第2引数は、出力の最大有効桁数を減らすために使います (デフォルトは15です)。versionのデフォルトは2です。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>PostGISがProj対応でコンパイルされている必要があります。PostGIS_Full_Version()を使ってProj対応でコンパイルされているか確認して下さい。</p></div></dd><dt><span class="term">ST_AsGeoJson([version], geometry, [precision], [options])</span></dt><dd><p>ジオメトリをGeoJsonエレメントで返します (<a class="ulink" href="http://www.geojson.org/geojson-spec.html" target="_top">GeoJson specifications 1.0</a>参照)。2次元および3次元のジオメトリの両方ともサポートされています。GeoJsonはSFS 1.1ジオメトリタイプのみサポートされています (たとえば曲線はサポートされていません)。 </p><p>version引数は、指定する場合には常に1でなければなりません。 </p><p>第3引数は、出力の最大有効桁数を減らすために使われることがあります (デフォルトは15です)。 </p><p>最後の"options"引数は、GeoJSON出力にBBoxまたはCRSを追加するために使われます。次のようにします。 </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>0: オプションなし (デフォルト値)</p></li><li class="listitem"><p>1: GeoJson CRS</p></li><li class="listitem"><p>2: GeoJson Bbox</p></li><li class="listitem"><p>3: GeoJson Bbox および CRS の両方</p></li></ul></div><p> GeoJson CRSパターンは、spatial_ref_sysテーブルから<code class="literal">auth_name:auth_srid</code>という形式で生成されます (例えば "EPSG:4326")。 </p><p>Availability: 1.3.4</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67239496"></a>6.2.5. ジオメトリ コンストラクタ</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_GeomFromEWKT(text)</span></dt><dd><p>EWKBからジオメトリを生成します。</p></dd><dt><span class="term">ST_GeomFromEWKB(bytea)</span></dt><dd><p>EWKBからジオメトリを生成します。</p></dd><dt><span class="term">ST_MakePoint(&lt;x&gt;, &lt;y&gt;, [&lt;z&gt;], [&lt;m&gt;])</span></dt><dd><p>2次元、3次元、4次元のポイントジオメトリを生成します。</p></dd><dt><span class="term">ST_MakePointM(&lt;x&gt;, &lt;y&gt;, &lt;m&gt;)</span></dt><dd><p>XYMのポイントジオメトリを生成します。</p></dd><dt><span class="term">ST_MakeBox2D(&lt;LL&gt;, &lt;UR&gt;)</span></dt><dd><p>与えられたポイントジオメトリから定義されるBOX2Dを生成します。</p></dd><dt><span class="term">ST_MakeBox3D(&lt;LLB&gt;, &lt;URT&gt;)</span></dt><dd><p>与えられた3次元ポイントジオメトリから定義されるBOX3Dを生成します。</p></dd><dt><span class="term">ST_MakeLine(geometry set)</span></dt><dd><p>ポイントジオメトリの集合からラインストリングをひとつ生成します。この集計関数に渡す前に、副問い合わせでポイントを並べ替えると良いかも知れません。</p></dd><dt><span class="term">ST_MakeLine(geometry, geometry)</span></dt><dd><p>与えられた二つのポイントからラインストリングを生成します。</p></dd><dt><span class="term">ST_LineFromMultiPoint(multipoint)</span></dt><dd><p>マルチポイントジオメトリからラインストリングを生成します。</p></dd><dt><span class="term">ST_MakePolygon(linestring, [linestring[]])</span></dt><dd><p>与えられた外周、穴の配列で形作られるポリゴンを生成します。ジオメトリ配列は<a class="link" href="ch06.html#Accum">Accum</a>を使って生成します。 入力ジオメトリは閉じたラインストリングである必要があります (<a class="link" href="ch06.html#IsClosed">IsClosed</a>と<a class="link" href="ch06.html#GeometryType">GeometryType</a>を参照して下さい)。</p></dd><dt><a name="BuildArea"></a><span class="term">ST_BuildArea(geometry)</span></dt><dd><p>与えられたジオメトリの構成する線によって形成される面ジオメトリを生成します。返り値は、入力に応じて、ポリゴンまたはマルチポリゴンになります。入力がポリゴンを形成できない場合はNULLを返します。</p><p>標準OGCインタフェースを持つ関数へのラッパーである<a class="link" href="ch06.html#BdPolyFromText">BdPolyFromText</a>と<a class="link" href="ch06.html#BdMPolyFromText">BdMPolyFromText</a>を参照してください。</p><p>Availability: 1.1.0 - GEOS 2.1.0以上が必要です。</p></dd><dt><span class="term">ST_Polygonize(geometry set)</span></dt><dd><p>集約関数。ジオメトリの集合のラインから形成されうるポリゴンを含むジオメトリコレクションを生成します。</p><p>Availability: 1.0.0RC1 - GEOS 2.1.0が必要です。</p></dd><dt><span class="term">ST_Collect(geometry set)</span></dt><dd><p>ジオメトリの集合からジオメトリコレクションまたはマルチ系オブジェクトを返します。collect()関数はPostgreSQLの用語で言うところの「集計関数」です。これは、sum()やmean()関数と同じようにデータの複数行を扱うということを意味します。たとえば、"SELECT COLLECT(GEOM) FROM GEOMTABLE GROUP BY ATTRCOLUMN"は、ATTRCOLUMNの値ごとに分かれたジオメトリコレクションを返します。</p><p>ST_CollectとST_Unionはしばしば交換して使うことができます。ST_Collectはバウンダリを消そうとしないので一般的にST_Unionよりも桁違いに早く動きます。ST_Collectは、単に、シングルジオメトリをマルチ系ジオメトリに巻き込み、マルチ系ジオメトリまたはジオメトリ型混在の集合をジオメトリコレクションに巻き込む、ということを行っているだけです。不幸なことに、GISツールはジオメトリコレクションを十分にサポートしていません。マルチ系ジオメトリを集める時にST_Collectがジオメトリコレクションを返すのを防ぐために、次に示すように、ST_Dumpでマルチ系ジオメトリをシングル系ジオメトリに展開したうえで再グループ化するというトリックを使うことができます。 </p><pre class="programlisting">Thread ref: http://postgis.refractions.net/pipermail/postgis-users/2008-June/020331.html
SELECT stusps, 
           ST_Multi(ST_Collect(f.the_geom)) as singlegeom  
         FROM (SELECT stusps, (ST_Dump(the_geom)).geom As the_geom 
                                FROM
                                somestatetable ) As f
GROUP BY stusps
                          </pre></dd><dt><span class="term">ST_Collect(geometry, geometry)</span></dt><dd><p>二つの入力ジオメトリをまとめたジオメトリを返します。出力タイプはMULTI系またはGEOMETRYCOLLECTIONです。</p></dd><dt><span class="term">ST_Dump(geometry)</span></dt><dd><p>これは集合を返す関数 (SRF=set-returning function)です。ジオメトリ (<code class="varname">geom</code>)と整数配列 (<code class="varname">path</code>)で作られる<code class="varname">geometry_dump</code>行を返します。入力ジオメトリが単純型 (POINT,LINESTRING,POLYGON)の場合は、単一の行で返り、pathには空配列、geomには入力ジオメトリが入ります。入力ジオメトリがジオメトリコレクションまたはMULTI系の場合は、要素ごとの行で返り、pathはコレクション内の要素位置を表します。</p><p>ST_Dumpはジオメトリを展開するのに使えます。新しい行を作る点では、GROUP BYの逆です。たとえば、MULTIPOLYGONをPOLYGONに展開するために使われます。</p><pre class="programlisting">SELECT sometable.*, (ST_Dump(the_geom)).geom As the_geom 
         FROM somestatetable
                          </pre><p>Availability: PostGIS 1.0.0RC1 PostgreSQL 7.3以上が必要です。</p></dd><dt><span class="term">ST_DumpRings(geometry)</span></dt><dd><p>この関数は、集合を返す関数 (set-returning function=SRF)です。ジオメトリ (geom)と整数配列 (path)からなるgeometry_dump行の集合を返します。入力ジオメトリがシンプルタイプ (ポイント、ラインストリング、ポリゴン)の場合、pathが空で、geomが入力ジオメトリであるレコード1行が返ります。入力ジオメトリがコレクションまたはマルチ系の場合、コレクションの要素ごとにレコードが返り、この行については、pathはコレクション内の要素位置が入ります。</p><p>Availability: PostGIS 1.1.3 PostgreSQL 7.3以上が必要です。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67277256"></a>6.2.6. ジオメトリエディタ</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><a name="addbbox"></a><span class="term">ST_AddBBOX(geometry)</span></dt><dd><p>ジオメトリにバウンディングボックスを追加します。これにより、バウンディングボックスに基づく検索が早くなりますが、ジオメトリのサイズが大きくなります。</p></dd><dt><a name="dropbbox"></a><span class="term">ST_DropBBOX(geometry)</span></dt><dd><p>ジオメトリからバウンディングボックスのキャッシュを削除します。この関数は、ジオメトリのサイズを減らしますが、バウンディングボックスを用いたクエリを遅くします。</p></dd><dt><span class="term">ST_AddPoint(linestring, point, [&lt;position&gt;])</span></dt><dd><p>ポイントを、ラインストリングの&lt;pos&gt;番目 (0はじまり)のポイントの前に追加します。第3引数を省略するか-1を設定すると、末尾に追加します。</p></dd><dt><span class="term">ST_RemovePoint(linestring, offset)</span></dt><dd><p>ラインストリングからポイントを削除します。offsetの値は0はじまりです。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">ST_SetPoint(linestring, N, point)</span></dt><dd><p>ラインストリングのN番目 (0はじまり)の点を引数のポイントに置き換えます。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">ST_Force_collection(geometry)</span></dt><dd><p>ジオメトリをジオメトリコレクションに変換します。これはWKB表現を単純化するのに便利です。</p></dd><dt><a name="force_2d"></a><span class="term">ST_Force_2d(geometry)</span></dt><dd><p>ジオメトリを「2次元モード」に強制させます。全ての出力表現はXY座標値のみを持つことになります。OGC準拠の出力 (OGCは2次元ジオメトリのみ策定しています)に強制するために使われます。</p></dd><dt><a name="force_3dz"></a><span class="term">ST_Force_3dz(geometry), </span><span class="term">ST_Force_3d(geometry)</span></dt><dd><p>ジオメトリをXYZモードに強制します。</p></dd><dt><a name="force_3dm"></a><span class="term">ST_Force_3dm(geometry)</span></dt><dd><p>ジオメトリをXYMモードに強制します。</p></dd><dt><a name="force_4d"></a><span class="term">ST_Force_4d(geometry)</span></dt><dd><p>ジオメトリをXYZMモードに強制します。</p></dd><dt><span class="term">ST_Multi(geometry)</span></dt><dd><p>マルチ系ジオメトリを返します。ジオメトリが既にマルチ系なら変更せずに返します。</p></dd><dt><span class="term">ST_Transform(geometry,integer)</span></dt><dd><p>新しいジオメトリを整数値で参照されるSRIDに座標変換します。変換先SRIDは<code class="varname">SPATIAL_REF_SYS</code>テーブルに存在するものでなければなりません。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>PostGISがProj対応でコンパイルされている必要があります。PostGIS_Full_Version()を使ってProj対応でコンパイルされているか確認して下さい。</p></div></dd><dt><span class="term">ST_Affine(geometry, float8, float8, float8, float8, float8, float8, float8, float8, float8, float8, float8, float8)</span></dt><dd><p>ジオメトリに対して3次元アフィン変換をかけます。次の関数を実行したとします。 </p><pre class="programlisting">Affine(geom, a, b, c, d, e, f, g, h, i, xoff, yoff, zoff) </pre><p> これは、次のような変換行列を示します。 </p><pre class="programlisting">/ a  b  c  xoff \ 
| d  e  f  yoff | 
| g  h  i  zoff | 
\ 0  0  0     1 /</pre><p> 頂点は、次のように変換されます。 </p><pre class="programlisting">x' = a*x + b*y + c*z + xoff 
y' = d*x + e*y + f*z + yoff 
z' = g*x + h*y + i*z + zoff</pre><p> これ以降の全ての移動、拡大関数はこのようなアフィン変換で表現されます。</p><p>Availability: 1.1.2.</p></dd><dt><span class="term">ST_Affine(geometry, float8, float8, float8, float8, float8, float8)</span></dt><dd><p>ジオメトリに2次元アフィン変換をかけます。次の関数を実行したとします。 </p><pre class="programlisting">Affine(geom, a, b, d, e, xoff, yoff)</pre><p> これは、次のような変換行列を示します。 </p><pre class="programlisting">/  a  b  0  xoff  \       /  a  b  xoff  \ 
|  d  e  0  yoff  | rsp.  |  d  e  yoff  | 
|  0  0  1     0  |       \  0  0     1  / 
\  0  0  0     1  /</pre><p> 頂点は、次のように変換されます。 </p><pre class="programlisting">x' = a*x + b*y + xoff 
y' = d*x + e*y + yoff 
z' = z </pre><p> この関数は3次元アフィン変換を特殊化したものです。</p><p>Availability: 1.1.2.</p></dd><dt><span class="term">ST_Translate(geometry, float8, float8, float8)</span></dt><dd><p>引数の数値をオフセットとして、ジオメトリを新しい位置に変換するものです。すなわちtranslate(geom,X,Y,Z)となります。</p></dd><dt><span class="term">ST_Scale(geometry, float8, float8, float8)</span></dt><dd><p>ジオメトリを引数で指定された軸に対する乗数により新しいサイズに拡大縮小します。すなわちscale(geom,Xfactor,Yfactor,Zfactor)となります。</p><p>Availability: 1.1.0</p></dd><dt><a name="Rotate"></a><span class="term">ST_RotateZ(geometry, float8), </span><span class="term">ST_RotateX(geometry, float8), </span><span class="term">ST_RotateY(geometry, float8)</span></dt><dd><p>ジオメトリをZ, XまたはY軸を中心に、与えられたラジアン角度分回転させます。右手系に従います。</p><p>Availability: 1.1.2.</p></dd><dt><span class="term">ST_TransScale(geometry, float8, float8, float8, float8)</span></dt><dd><p>まず前の二つのfloatを使ってジオメトリを移動させ、後の二つのfloatを使って拡大縮小を行います。これは2次元のみです。<code class="code">transscale(geom, X, Y, XFactor, YFactor)</code>を呼んだ場合、内部では<code class="code">affine(geom, XFactor, 0, 0, 0, YFactor, 0, 0, 0, 1, X*XFactor, Y*YFactor, 0)</code>を呼びます。</p><p>Availability: 1.1.0.</p></dd><dt><span class="term">ST_Reverse(geometry)</span></dt><dd><p>ジオメトリの頂点の並びを逆順にして返します。</p></dd><dt><span class="term">ST_ForceRHR(geometry)</span></dt><dd><p>コレクションのポリゴンを右回りに従わせます。</p></dd><dt><span class="term">ST_Simplify(geometry, tolerance)</span></dt><dd><p>引数のジオメトリをDouglas-Peukerアルゴリズムを使って「単純化した」ものを返します。(マルチ)ラインと(マルチ)ポリゴンでないと実際には動作しませんが、安全にあらゆる種類のジオメトリを引数にできます。単純化はオブジェクトごとに実行されるものですから、ジオメトリコレクションをこの関数に送ることもできます。返されるジオメトリが単純性を失う可能性もあることにご注意ください(<a class="link" href="ch06.html#IsSimple">IsSimple</a>を参照して下さい)。</p></dd><dt><span class="term">ST_SimplifyPreserveTopology(geometry, tolerance)</span></dt><dd><p>Douglas-Peukerを使って「単純化した」ものを返します。無効な派生ジオメトリ (特にポリゴン)の生成を避けます。</p></dd><dt><span class="term">ST_SnapToGrid(geometry, originX, originY, sizeX, sizeY), </span><span class="term">ST_SnapToGrid(geometry, sizeX, sizeY), </span><span class="term">ST_SnapToGrid(geometry, size)</span></dt><dd><p>引数のジオメトリの全てのポイントを、定義された原点とセルサイズを持つグリッド上にスナップします。同じセルに落ちた、連続するポイントを削除します。引数ジオメトリのジオメトリタイプを定義できないポイントしか残らなかった場合は、NULLを返します。コレクション内で崩壊したジオメトリはそこから削除されます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>返されるジオメトリは単純性を失う可能性があります (<a class="link" href="ch06.html#IsSimple">IsSimple</a>を参照して下さい)。</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>1.1.0版より前では、この関数は常に2次元ジオメトリを返しました。1.1.0版からは、返されるジオメトリの次元数は、入力値のうちで手のつけられていない最大の次元と同じになります。全てのグリッドの次元を定義するには、第2引数にジオメトリを取る形式を使って下さい。</p></div><p>Availability: 1.0.0RC1</p></dd><dt><span class="term">ST_SnapToGrid(geometry, geometry, sizeX, sizeY, sizeZ, sizeM)</span></dt><dd><p>引数ジオメトリの全てのポイントを原点 (第2引数で、これはポイントでなければなりません)とセルサイズで定義されたグリッドにスナップします。スナップを行いたくない次元があれば、その次元のサイズを0にして下さい。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">ST_Segmentize(geometry, maxlength)</span></dt><dd><p>与えられた距離を超えるセグメントを持たないように変更されたジオメトリを返します。差し込まれたポイントはZとM値を (必要なら)持ち、値は0に設定されます。距離計算は2次元でのみ行います。</p></dd><dt><span class="term">ST_LineMerge(geometry)</span></dt><dd><p>引数ジオメトリを構成する線をまとめ合わせることで形成されるラインストリング (またはその集合)を返します。</p><p>Availability: 1.1.0 - GEOS 2.1.0以上が必要です。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67361992"></a>6.2.7. 線型参照</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><a name="line_interpolate_point"></a><span class="term">ST_line_interpolate_point(linestring, location)</span></dt><dd><p>線に沿った内挿点を返します。第1引数はLINESTRINGでなければなりません。第2引数は、float8型で0から1の区間にある数でなければならず、返り値ポイントが置かれる位置ラインストリングの<a class="link" href="ch06.html#length2d">2次元線長</a>の合計に対する割合です。</p><p>ポイントに最も近い線を計算するには<a class="link" href="ch06.html#line_locate_point">line_locate_point()</a>を参照して下さい。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>1.1.1から、この関数はM軸やZ軸の内挿点も (存在するなら)計算するようになりました。それより前の版では0.0となります。</p></div><p>Availability: 0.8.2</p></dd><dt><a name="line_substring"></a><span class="term">ST_line_substring(linestring, start, end)</span></dt><dd><p>次元長に対する割合で示された開始位置と終了位置で切り取られた部分ラインストリングを返します。第2引数と第3引数は、float8で0から1の区間です。</p><p>'start'と'end'が同じ値を持つ場合は、この関数は<a class="link" href="ch06.html#line_interpolate_point">line_interpolate_point()</a>と等価です。</p><p>ポイントに最も近い線を計算するには<a class="link" href="ch06.html#line_locate_point">line_locate_point()</a>を参照して下さい。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>1.1.1から、この関数はM軸やZ軸の内挿点も (存在するなら)計算するようになりました。それより前の版では不定値となります。</p></div><p>Availability: 1.1.0</p></dd><dt><a name="line_locate_point"></a><span class="term">ST_line_locate_point(LineString, Point)</span></dt><dd><p>引数で示されたポイントに最も近いラインストリング上の点の、<a class="link" href="ch06.html#length2d">2次元長</a>の合計に対する割合を、0から1までの値で返します。</p><p>ポイント(<a class="link" href="ch06.html#line_interpolate_point">line_interpolate_point</a>)またはラインストリング(<a class="link" href="ch06.html#line_substring">line_substring</a>)を抽出するために、この関数から返された位置を使うことができます。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">ST_locate_along_measure(geometry, float8)</span></dt><dd><p>M値に一致する要素からなる、ジオメトリコレクションから派生した型の値を返します。ポリゴン要素には対応しません。</p><p>意味は ISO/IEC CD 13249-3:200x(E) - Text for Continuation CD Editing Meeting で決められています。</p><p>Availability: 1.1.0</p></dd><dt><span class="term">ST_locate_between_measures(geometry, float8, float8)</span></dt><dd><p>指定したM値の範囲内にある要素からなる、派生ジオメトリコレクション値を返します。ポリゴン要素には対応していません。</p><p>意味は ISO/IEC CD 13249-3:200x(E) - Text for Continuation CD Editing Meeting で決められています。</p><p>Availability: 1.1.0</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67380680"></a>6.2.8. その他の関数</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_Summary(geometry)</span></dt><dd><p>ジオメトリについての要約文を返します。</p></dd><dt><span class="term">ST_box2d(geometry)</span></dt><dd><p>ジオメトリの最大範囲を表すBOX2Dを返します。</p></dd><dt><span class="term">ST_box3d(geometry)</span></dt><dd><p>ジオメトリの最大範囲を表すBOX3Dを返します。</p></dd><dt><span class="term">ST_extent(geometry set)</span></dt><dd><p>extent()関数はPostgreSQL用語で言うところの「集計関数」です。これは、sum()やmean()と同じ方法でデータリストの操作を行うことを意味します。たとえば、"SELECT EXTENT(GEOM) FROM GEOMTABLE"は、テーブル内の全てのフィーチャーの最大範囲を示すBOX3Dを返します。同様に、"SELECT EXTENT(GEOM) FROM GEOMTABLE GROUP BY CATEGORY"は、カテゴリごとの範囲を返します。</p></dd><dt><a name="zmflag"></a><span class="term">ST_zmflag(geometry)</span></dt><dd><p>ジオメトリのZM (次元の意味)フラグをsmall intで返します。値は、0=2次元, 1=M-三次元, 2=Z-3次元, 3=4次元です。</p></dd><dt><a name="hasbbox"></a><span class="term">ST_HasBBOX(geometry)</span></dt><dd><p>このジオメトリのバウンディングボックスがキャッシュされている場合はTRUEを返し、それ以外の場合はFALSEを返します。キャッシュ制御には<a class="link" href="ch06.html#addbbox">addBBOX()</a>と<a class="link" href="ch06.html#dropbbox">dropBBOX()</a>を使います。</p></dd><dt><a name="ndims"></a><span class="term">ST_ndims(geometry)</span></dt><dd><p>ジオメトリの座標次元をsmall intで返します。値は2, 3, 4のいずれかです。</p></dd><dt><span class="term">ST_nrings(geometry)</span></dt><dd><p>ジオメトリがポリゴンまたはマルチポリゴンの場合、リング数を返します。</p></dd><dt><span class="term">ST_npoints(geometry)</span></dt><dd><p>ジオメトリのポイント (頂点)数を返します。</p></dd><dt><a name="IsValid"></a><span class="term">ST_isvalid(geometry)</span></dt><dd><p>ジオメトリが妥当な場合にはTRUEを返します。</p></dd><dt><span class="term">ST_expand(geometry, float)</span></dt><dd><p>入力ジオメトリのバウンディングボックスから、第2引数で指定される量によって、全ての方向に拡大させたバウンディングボックスを返します。 クエリにインデックスフィルタを追加するdistance()クエリにとても便利です。</p></dd><dt><span class="term">ST_estimated_extent([schema], table, geocolumn)</span></dt><dd><p>与えられた空間テーブルの「見積もられた」範囲を返します。ジオメトリカラムの統計情報から見積もります。指定されていない場合は現在のスキーマが使われます。</p><p>PostgreSQL 8.0.0以上では、統計情報はVACUUM ANALYZEで集められ、結果の範囲は実際の約95%です。</p><p>PostgreSQL 8.0.0より前では、統計情報はupdate_geometry_stats()で集められ、範囲は確実です。</p></dd><dt><span class="term">ST_find_srid(varchar,varchar,varchar)</span></dt><dd><p>この関数の書式はfind_srid(a_db_schema, a_table, a_column)です。GEOMETRY_COLUMNSで検索して、指定したカラムのSRID整数値を返します。ジオメトリカラムがAddGeometryColumn()関数で確実に追加していない場合には、確実には動作しません (訳注: GEOMETRY_COLUMNSビューで確実な登録が確認できていれば良いです)。</p></dd><dt><span class="term">ST_mem_size(geometry)</span></dt><dd><p>ジオメトリが取る容量 (バイト単位)を返します。</p></dd><dt><span class="term">ST_point_inside_circle(geometry, float, float, float)</span></dt><dd><p>この関数の書式はpoint_inside_circle(&lt;geometry&gt;,&lt;circle_center_x&gt;,&lt;circle_center_y&gt;,&lt;radius&gt;)です。ジオメトリがポイントで、かつ指定した円内にある場合はTRUEを返し、それ以外はFALSEを返します。</p></dd><dt><span class="term">ST_XMin(box3d) ST_YMin(box3d) ST_ZMin(box3d)</span></dt><dd><p>バウンディングボックスの、それぞれX,Y,Z軸の最小値を返します。</p></dd><dt><span class="term">ST_XMax(box3d) ST_YMax(box3d) ST_ZMax(box3d)</span></dt><dd><p>バウンディングボックスの、それぞれX,Y,Z軸の最大値を返します。</p></dd><dt><a name="Accum"></a><span class="term">ST_Accum(geometry set)</span></dt><dd><p>集約関数です。ジオメトリの配列を生成します。</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="idp67453128"></a>6.2.9. Long Transactions support</h3></div></div></div><p>
This module and associated pl/pgsql functions have been implemented
to provide long locking support required by
<a class="ulink" href="https://portal.opengeospatial.org/files/?artifact_id=7176" target="_top">Web Feature Service</a> specification.
	</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>
  Users must use <a class="ulink" href="http://www.postgresql.org/docs/7.4/static/transaction-iso.html" target="_top">serializable transaction level</a> otherwise locking mechanism would break.
	  </p></div><div class="variablelist"><dl class="variablelist"><dt><a name="EnableLongTransactions"></a><span class="term">EnableLongTransactions()</span></dt><dd><p>
		Enable long transaction support. This function creates the
		required metadata tables, needs to be called once before
		using the other functions in this section. Calling it twice
		is harmless.
	    </p><p>
		    Availability: 1.1.3
		</p></dd><dt><a name="DisableLongTransactions"></a><span class="term">DisableLongTransactions()</span></dt><dd><p>
		Disable long transaction support. This function removes the
		long transaction support metadata tables, and drops all
		triggers attached to lock-checked tables.
	    </p><p>
		    Availability: 1.1.3
		</p></dd><dt><a name="CheckAuth"></a><span class="term">CheckAuth([&lt;schema&gt;], &lt;table&gt;, &lt;rowid_col&gt;)</span></dt><dd><p>
		Check updates and deletes of rows in
		given table for being authorized.
		Identify rows using &lt;rowid_col&gt; column.
	    </p><p>
		    Availability: 1.1.3
		</p></dd><dt><a name="LockRow"></a><span class="term">LockRow([&lt;schema&gt;], &lt;table&gt;, &lt;rowid&gt;, &lt;authid&gt;, [&lt;expires&gt;])</span></dt><dd><p>
	Set lock/authorization for specific row in table
	&lt;authid&gt; is a text value, &lt;expires&gt; is a timestamp
	defaulting to now()+1hour.
	Returns 1 if lock has been assigned, 0 otherwise
	(already locked by other auth)
	    </p><p>
		    Availability: 1.1.3
		</p></dd><dt><a name="UnlockRows"></a><span class="term">UnlockRows(&lt;authid&gt;)</span></dt><dd><p>
	Remove all locks held by specified authorization id.
	Returns the number of locks released.
	    </p><p>
		    Availability: 1.1.3
		</p></dd><dt><a name="AddAuth"></a><span class="term">AddAuth(&lt;authid&gt;)</span></dt><dd><p>
	Add an authorization token to be used in current
	transaction. 
	    </p><p>
		    Availability: 1.1.3
		</p></dd></dl></div></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp67513544"></a>6.3. SQL-MM関数</h2></div></div></div><p>ここでは、SQL-MMで定義されている、PostGISで現在サポートしている関数を示します。これらの関数の実装はArcSDE実装に続くもので、このため、仕様とずれているものがあります。これらのずれについては注意書きを付けていくものとします。</p><p>1.2.0版では、これらの関数はPostGIS関数のラッパーとして実装されています。結果、曲線ジオメトリの完全なサポートは多くの関数にとって適切な位置づけにないかも知れません。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、全てのジオメトリコンストラクタのSRIDのデフォルトは0と定義されていますが、PostGISでは-1としています。</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">ST_Area</span></dt><dd><p>ST_SurfaceまたはST_MultiSurface値の面積計測を返します。</p><p>SQL-MM 3: 8.1.2, 9.5.3</p></dd><dt><span class="term">ST_AsBinary</span></dt><dd><p>ST_Geometry値のWell-Known Binary表現を返します。</p><p>SQL-MM 3: 5.1.37</p></dd><dt><span class="term">ST_AsText</span></dt><dd><p>ST_Geometry値のWell-Known Text表現を返します。</p><p>SQL-MM 3: 5.1.25</p></dd><dt><span class="term">ST_Boundary</span></dt><dd><p>ST_Geometry値の境界を返します。</p><p>SQL-MM 3: 5.1.14</p></dd><dt><span class="term">ST_Buffer</span></dt><dd><p>ST_Geometry値のバッファを返します。</p><p>SQL-MM 3: 5.1.17</p></dd><dt><span class="term">ST_Centroid</span></dt><dd><p>ST_SurfaceまたはST_MultiSurface値の数学的重心を返します。</p><p>SQL-MM 3: 8.1.4, 9.5.5</p></dd><dt><span class="term">ST_Contains</span></dt><dd><p>ST_Geometry値が空間的にもうひとつのST_Geometry値を含むかを見ます。</p><p>SQL-MM 3: 5.1.31</p></dd><dt><span class="term">ST_ConvexHull</span></dt><dd><p>凸包 (convex hull)は与えられた集合の全てのジオメトリを含む最小の閉じたジオメトリです。 </p><p>通常は、マルチ系ジオメトリとジオメトリコレクションで使われます。この関数は集計関数ではありませんが、ポイントの集合の凸包を得るために、ST_ConvexHull(ST_Collect(somepointfield))のようにST_Collectと併用して使います。この併用は、次のように、観測したポイントの集合をもとに影響を受ける領域を決定するためにしばしば使われます。 </p><p>SQL-MM 3: 5.1.16</p></dd><dt><span class="term">ST_CoordDim</span></dt><dd><p>ST_Geometry値の座標次元を返します。</p><p>SQL-MM 3: 5.1.3</p></dd><dt><span class="term">ST_Crosses</span></dt><dd><p>ST_Geometry値が空間的にもうひとつのST_Geometry値とクロスするかを見ます。</p><p>SQL-MM 3: 5.1.29</p></dd><dt><span class="term">ST_Difference</span></dt><dd><p>ふたつのST_Geometry値の差となるポイント集合を示すST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.20</p></dd><dt><span class="term">ST_Dimension</span></dt><dd><p>ST_Geometry値の次元を返します。</p><p>SQL-MM 3: 5.1.2</p></dd><dt><span class="term">ST_Disjoint</span></dt><dd><p>ST_Geometry値の次元を返します。</p><p>SQL-MM 3: 5.1.26</p></dd><dt><span class="term">ST_Distance</span></dt><dd><p>二つのジオメトリの距離を返します。</p><p>SQL-MM 3: 5.1.23</p></dd><dt><span class="term">ST_EndPoint</span></dt><dd><p>ST_Curve値の最後のST_Point値を返します。</p><p>SQL-MM 3: 7.1.4</p></dd><dt><span class="term">ST_Envelope</span></dt><dd><p>ST_Geometryのバウンディング長方形を返します。</p><p>SQL-MM 3: 5.1.15</p></dd><dt><span class="term">ST_Equals</span></dt><dd><p>ST_Geometry値がもうひとつのST_Geometry値と空間的に等価であるかを見ます。</p><p>SQL-MM 3: 5.1.24</p></dd><dt><span class="term">ST_ExteriorRing</span></dt><dd><p>ST_Surfaceの外環を返します。</p><p>SQL-MM 3: 8.2.3, 8.3.3</p></dd><dt><span class="term">ST_GeometryN</span></dt><dd><p>ST_GeomCollectionから指定されたST_Geometry値を返します。</p><p>SQL-MM 3: 9.1.5</p></dd><dt><span class="term">ST_GeometryType</span></dt><dd><p>ST_Geometry値のジオメトリ型を返します。</p><p>SQL-MM 3: 5.1.4</p></dd><dt><span class="term">ST_GeomFromText</span></dt><dd><p>指定したST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.40</p></dd><dt><span class="term">ST_GeomFromWKB</span></dt><dd><p>指定したST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.41</p></dd><dt><span class="term">ST_InteriorRingN</span></dt><dd><p>ST_Surface値の指定した内環を返します。</p><p>SQL-MM 3: 8.2.6, 8.3.5</p></dd><dt><span class="term">ST_Intersection</span></dt><dd><p>二つのST_Geometry値のインタセクトしたポイントの集合を表現するST_Geometry値を返します。</p><p>言い換えると、ジオメトリAとジオメトリBとで共有されている部分のことです。</p><p>SQL-MM 3: 5.1.18</p></dd><dt><span class="term">ST_Intersects</span></dt><dd><p>ST_Geometry値がもう一つのST_Geometry値と空間的にインタセクトするかを見ます。</p><p>SQL-MM 3: 5.1.27</p></dd><dt><span class="term">ST_IsClosed</span></dt><dd><p>ST_CurveまたはST_MultiCurve値が閉じているかを見ます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、ST_IsClosed(NULL)の返り値は0になると定義されていますが、PostGISではNULLを返します。</p></div><p>SQL-MM 3: 7.1.5, 9.3.3</p></dd><dt><span class="term">ST_IsEmpty</span></dt><dd><p>ST_Geometry値が空集合に相当するかを見ます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、ST_IsEmpty(NULL)は0を返しますが、PostGISではNULLを返します。</p></div><p>SQL-MM 3: 5.1.7</p></dd><dt><span class="term">ST_IsRing</span></dt><dd><p>ST_Curve値が環になっているかを見ます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、ST_IsRing(NULL)の返り値は0になると定義されていますが、PostGISではNULLを返します。</p></div><p>SQL-MM 3: 7.1.6</p></dd><dt><span class="term">ST_IsSimple</span></dt><dd><p>ST_Geometry値が、自己交差や自己接触をするといった、変則的なポイントを持たないかを見ます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、ST_IsSimple(NULL)は0を返しますが、PostGISではNULLを返します。</p></div><p>SQL-MM 3: 5.1.8</p></dd><dt><span class="term">ST_IsValid</span></dt><dd><p>ST_Geometry値が整形されているかを見ます。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>SQL-MMでは、ST_IsValid(NULL)は0を返しますが、PostGISではNULLを返します。</p></div><p>SQL-MMでは、ST_IsValid(NULL)の返り値は1になると定義されています</p><p>SQL-MM 3: 5.1.9</p></dd><dt><span class="term">ST_Length</span></dt><dd><p>ST_CurveまたはST_MultiCurve値の計測された長さを返します。</p><p>SQL-MM 3: 7.1.2, 9.3.4</p></dd><dt><span class="term">ST_LineFromText</span></dt><dd><p>指定したST_LineString値を返します。</p><p>SQL-MM 3: 7.2.8</p></dd><dt><span class="term">ST_LineFromWKB</span></dt><dd><p>指定したST_LineString値を返します。</p><p>SQL-MM 3: 7.2.9</p></dd><dt><span class="term">ST_MLineFromText</span></dt><dd><p>指定したST_MultiLineString値を返します。</p><p>SQL-MM 3: 9.4.4</p></dd><dt><span class="term">ST_MLineFromWKB</span></dt><dd><p>指定したST_MultiLineString値を返します。</p><p>SQL-MM 3: 9.4.5</p></dd><dt><span class="term">ST_MPointFromText</span></dt><dd><p>指定したST_MultiPoint値を返します。</p><p>SQL-MM 3: 9.2.4</p></dd><dt><span class="term">ST_MPointFromWKB</span></dt><dd><p>指定したST_MultiPoint値を返します。</p><p>SQL-MM 3: 9.2.5</p></dd><dt><span class="term">ST_MPolyFromText</span></dt><dd><p>指定したST_MultiPolygon値を返します。</p><p>SQL-MM 3: 9.6.4</p></dd><dt><span class="term">ST_MPolyFromWKB</span></dt><dd><p>指定したST_MultiPolygon値を返します。</p><p>SQL-MM 3: 9.6.5</p></dd><dt><span class="term">ST_NumGeometries</span></dt><dd><p>指定したST_GeomCollectionを返します。</p><p>SQL-MM 3: 9.1.4</p></dd><dt><span class="term">ST_NumInteriorRing</span></dt><dd><p>ST_Surfaceの内環数を返します。</p><p>SQL-MM 3: 8.2.5</p></dd><dt><span class="term">ST_NumPoints</span></dt><dd><p>ST_LineStringまたはST_CircularStringのポイント数を返します。</p><p>SQL-MM 3: 7.2.4</p></dd><dt><a name="ST_OrderingEquals"></a><span class="term">ST_OrderingEquals</span></dt><dd><p>二つのジオメトリを比較して、二つのジオメトリが等価で、かつ座標が同じ並び順ならt (TRUE)を返し、そうでないならf (FALSE)を返します。</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">注記</h3><p>この関数は、SQL-MM仕様ではなくArcSDE SQL仕様に従って実装しています。http://edndoc.esri.com/arcsde/9.1/sql_api/sqlapi3.htm#ST_OrderingEqualsをご覧ください。</p></div><p>SQL-MM 3: 5.1.43</p></dd><dt><span class="term">ST_Overlaps</span></dt><dd><p>ST_Geometry値がもうひとつのST_Geometry値に空間的にオーバラップしているかを見ます。</p><p>SQL-MM 3: 5.1.32</p></dd><dt><span class="term">ST_Perimeter</span></dt><dd><p>ST_SurfaceまたはST_MultiSurface値の境界の計測された長さを返します。</p><p>SQL-MM 3: 8.1.3, 9.5.4</p></dd><dt><span class="term">ST_Point</span></dt><dd><p>指定した座標値からST_Pointを返します。</p><p>SQL-MM 3: 6.1.2</p></dd><dt><span class="term">ST_PointFromText</span></dt><dd><p>指定したST_Point値を返します。</p><p>SQL-MM 3: 6.1.8</p></dd><dt><span class="term">ST_PointFromWKB</span></dt><dd><p>指定したST_Point値を返します。</p><p>SQL-MM 3: 6.1.9</p></dd><dt><span class="term">ST_PointN</span></dt><dd><p>ST_LineStringまたはST_CircularStringの中にある、指定したST_Point値を返します。</p><p>SQL-MM 3: 7.2.5, 7.3.5</p></dd><dt><span class="term">ST_PointOnSurface</span></dt><dd><p>ST_SurfaceまたはST_MultiSurface値と空間的に共通領域を持つことを保証されたST_Pointを返します。</p><p>SQL-MM 3: 8.1.5, 9.5.6</p></dd><dt><span class="term">ST_PolyFromText</span></dt><dd><p>指定したST_Polygon値を返します。</p><p>SQL-MM 3: 8.3.6</p></dd><dt><span class="term">ST_PolyFromWKB</span></dt><dd><p>指定したST_Polygon値を返します。</p><p>SQL-MM 3: 8.3.7</p></dd><dt><span class="term">ST_Polygon</span></dt><dd><p>指定したラインストリングとSRIDからST_Polygon値を返します。</p><p>SQL-MM 3: 8.3.2</p></dd><dt><span class="term">ST_Relate</span></dt><dd><p>ST_Geometry値がもうひとつのST_Geomaetry値に空間的に関連があるかを見ます。</p><p>SQL-MM 3: 5.1.25</p></dd><dt><span class="term">ST_SRID</span></dt><dd><p>ST_Geometry値の空間参照系識別子を返します。</p><p>SQL-MM 3: 5.1.5</p></dd><dt><span class="term">ST_StartPoint</span></dt><dd><p>ST_Curve値の最初のポイントをST_Point値で返します。</p><p>SQL-MM 3: 7.1.3</p></dd><dt><span class="term">ST_SymDifference</span></dt><dd><p>二つのST_Geometryの対称差をポイント集合で表現したST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.21</p></dd><dt><span class="term">ST_Touches</span></dt><dd><p>ST_Geometry値がもうひとつのST_Geometry値に空間的に接触しているかを見ます。</p><p>SQL-MM 3: 5.1.28</p></dd><dt><span class="term">ST_Transform</span></dt><dd><p>指定した空間参照系に変換したST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.6</p></dd><dt><span class="term">ST_Union</span></dt><dd><p>二つのST_Geometry値の結合のポイント集合を表すST_Geomety値を返します。</p><p>SQL-MM 3: 5.1.19</p></dd><dt><span class="term">ST_Within</span></dt><dd><p>ST_Geometry値が、空間的にもう一つのST_Geometry値の中にあるかを見ます。</p><p>SQL-MM 3: 5.1.30</p></dd><dt><span class="term">ST_WKBToSQL</span></dt><dd><p>Well-Known Binary表現で与えられたST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.36</p></dd><dt><span class="term">ST_WKTToSQL</span></dt><dd><p>Well-Known Text表現で与えられたST_Geometry値を返します。</p><p>SQL-MM 3: 5.1.34</p></dd><dt><span class="term">ST_X</span></dt><dd><p>ST_Point値のX値を返します。</p><p>SQL-MM 3: 6.1.3</p></dd><dt><span class="term">ST_Y</span></dt><dd><p>ST_Point値のY値を返します。</p><p>SQL-MM 3: 6.1.4</p></dd></dl></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp67668424"></a>6.4. ArcSDE関数</h2></div></div></div><p>ArcSDEスタイルのインタフェースへの対応を良くするために関数が追加されています。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">SE_EnvelopesIntersect</span></dt><dd><p>二つのジオメトリのエンベロープが共通部分を持つ場合はt (TRUE)を、そうでない場合はf (FALSE)を返します。</p></dd><dt><span class="term">SE_Is3d</span></dt><dd><p>ジオメトリ値がZ値を持っているかを見ます。</p></dd><dt><span class="term">SE_IsMeasured</span></dt><dd><p>ジオメトリ値がM値を持っているかを見ます。</p></dd><dt><span class="term">SE_LocateAlong</span></dt><dd><p>指定したM値に一致する要素からなる、ジオメトリコレクションから派生した型の値を返します。</p></dd><dt><span class="term">SE_LocateBetween</span></dt><dd><p>指定したM値の範囲と一致した要素からなる、ジオメトリコレクションから派生した型の値を返します。</p></dd><dt><span class="term">SE_M</span></dt><dd><p>ST_Point値のM値を返します。</p></dd><dt><span class="term">SE_Z</span></dt><dd><p>ST_Point値のZ値を返します。</p></dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05.html">戻る</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch07.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">第5章 性能向上に関する技法 </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> 第7章 問題を報告する</td></tr></table></div></body></html>
