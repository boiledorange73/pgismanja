<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>第12章 住所標準化</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="PostGIS 2.4.0 マニュアル"><link rel="up" href="index.html" title="PostGIS 2.4.0 マニュアル"><link rel="prev" href="TG_Intersects.html" title="Intersects"><link rel="next" href="stdaddr.html" title="stdaddr"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">第12章 住所標準化</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="TG_Intersects.html">戻る</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="stdaddr.html">次へ</a></td></tr></table><hr></div><div class="chapter" title="第12章 住所標準化"><div class="titlepage"><div><div><h2 class="title"><a name="Address_Standardizer"></a>第12章 住所標準化</h2></div></div></div><div class="toc"><p><b>目次</b></p><dl><dt><span class="sect1"><a href="Address_Standardizer.html#Address_Standardizer_Basics">12.1. パーサの動作</a></span></dt><dt><span class="sect1"><a href="Address_Standardizer.html#Address_Standardizer_Types">12.2. 住所標準化の型</a></span></dt><dt><span class="sect1"><a href="Address_Standardizer.html#Address_Standardizer_Tables">12.3. 住所標準化テーブル</a></span></dt><dt><span class="sect1"><a href="Address_Standardizer.html#Address_Standardizer_Functions">12.4. 住所標準化関数</a></span></dt></dl></div><p>これは、<a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-11.html" target="_top">PAGC standardizer</a>から分かれたものです (オリジナルのコードは<a class="ulink" href="http://sourceforge.net/p/pagc/code/360/tree/branches/sew-refactor/postgresql" target="_top">PAGC PostgreSQL Address Standardizer</a>にあります)。 </p><p>住所標準化は単一行の住所のパーサで、入力に住所を取り、テーブルに保存された規則と、補助テーブルlex (lexicon, 語彙)およびgaz (gazetteer, 地名集)とを基に正規化します。</p><p>コードは、<code class="code">address_standardizer</code>という名前の、1つのPostgreSQLエクステンションとしてビルドされます。<code class="code">CREATE EXTENSION address_standardizer;</code>でインストールできます。address_standardizerエクステンションとともに、<code class="code">address_standardizer_data_us</code>というサンプルデータのエクステンションがビルドされます。これには、アメリカのgaz, lexとrulesテーブルデータがあります。このエクステンションは<code class="code">CREATE EXTENSION address_standardizer_data_us;</code>でインストールできます。</p><p>このエクステンションのコードはPostGISの<code class="filename">extensions/address_standardizer</code>内にあり、現在は自己充足しています。</p><p>インストール手順については、<a class="xref" href="postgis_installation.html#installing_pagc_address_standardizer" title="2.7. PAGC住所標準化ツールのインストールと使用">「PAGC住所標準化ツールのインストールと使用」</a>を参照してください。</p><div class="sect1" title="12.1. パーサの動作"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Basics"></a>12.1. パーサの動作</h2></div></div></div><p>パーサは右から左に見ます。最初に郵便番号、州/県、市のMACRO (訳注: マクロ)要素を見ます。その後、番地または交差点もしくはランドマークを扱う場合には、MICRO (訳注: マイクロ)要素を見ます。現在は、国別コードや国名を見ませんが、将来的には導入できると思います。</p><div class="variablelist"><dl><dt><span class="term">国別コード</span></dt><dd><p>USまたはCAを仮定します。郵便番号か州/県で米国かカナダを分けますが、判別できない場合は米国とします。</p></dd><dt><span class="term">郵便番号</span></dt><dd><p>Perl互換の正規表現を使用して認識します。正規表現は現在はparseaddress-api.cにあり、必要な際の変更は比較的簡単です。</p></dd><dt><span class="term">州/県</span></dt><dd><p>Perl互換の正規表現を使用して認識します。正規表現は現在はparseaddress-api.cにありますが、将来的には、メンテナンスを簡単にするためにインクルードファイルに移動するかも知れません。</p></dd></dl></div></div><div class="sect1" title="12.2. 住所標準化の型"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Types"></a>12.2. 住所標準化の型</h2></div><div><div class="abstract" title="概要"><p class="title"><b>概要</b></p><p>本節では住所標準化でインストールされたPostgreSQLデータ型の一覧を挙げます。独自関数をデザインする時に特に重要となるキャストの振る舞いを記述しています。 </p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="stdaddr.html">stdaddr</a></span><span class="refpurpose"> — 住所の要素からなる複合型です。<code class="varname">standardize_address</code>関数が返す型です。</span></dt></dl></div></div><div class="sect1" title="12.3. 住所標準化テーブル"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Tables"></a>12.3. 住所標準化テーブル</h2></div><div><div class="abstract" title="概要"><p class="title"><b>概要</b></p><p>本節では、住所標準化が住所の正規化に使うPostgreSQLテーブルの書式を挙げます。これらのテーブルはここで参照している名前と同じである必要はありません。例または独自ジオコーダのために、国ごとに異なるlex (lexicon, 語彙)、gaz (gazetteer, 地名集)およびrulesテーブルを持つことができます。これらのテーブルの名前は、住所標準化関数に渡されます。 </p><p>同梱されている<code class="varname">address_standardizer_data_us</code>エクステンションには、米国の住所標準化のためのデータがあります。</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="rulestab.html">規則テーブル</a></span><span class="refpurpose"> — 規則テーブルには、住所入力順列トークンから標準化した出力順列への対応付けに関する規則の集合が入ります。それぞれの規則は、入力トークン、-1 (終端)、出力トークン、-1、規則の種類を示す数字、規則の階級、からなります。</span></dt><dt><span class="refentrytitle"><a href="lextab.html">lexテーブル</a></span><span class="refpurpose"> — lexテーブルは英数字の入力をクラス分けして (a) 入力トークン (<a class="xref" href="rulestab.html#rule_input_tokens" title="入力トークン">「入力トークン」</a> 参照)と (b)  標準化表現 とに関連付けます。</span></dt><dt><span class="refentrytitle"><a href="gaztab.html">gaz table</a></span><span class="refpurpose"> — gazテーブルは、地名を標準化し、入力と、(a)入力トークン (<a class="xref" href="rulestab.html#rule_input_tokens" title="入力トークン">「入力トークン」</a>を参照して下さい)および (b) 標準化された表現とを関連付けるために使われます。</span></dt></dl></div></div><div class="sect1" title="12.4. 住所標準化関数"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Functions"></a>12.4. 住所標準化関数</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="parse_address.html">parse_address</a></span><span class="refpurpose"> — 1行の住所を取り、分割します。</span></dt><dt><span class="refentrytitle"><a href="standardize_address.html">standardize_address</a></span><span class="refpurpose"> — lexテーブル、gazテーブルおよび規則テーブルを使って、入力住所をstdaddr形式で返します。</span></dt></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="TG_Intersects.html">戻る</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="stdaddr.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">Intersects </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> stdaddr</td></tr></table></div></body></html>
