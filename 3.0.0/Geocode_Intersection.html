<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Geocode_Intersection</title><link rel="stylesheet" type="text/css" href="docbook.css"><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="PostGIS 3.0.0 マニュアル"><link rel="up" href="Extras.html#Tiger_Geocoder" title="13.1. Tigerジオコーダ"><link rel="prev" href="Geocode.html" title="Geocode"><link rel="next" href="Get_Geocode_Setting.html" title="Get_Geocode_Setting"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Geocode_Intersection</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="Geocode.html">戻る</a> </td><th width="60%" align="center">13.1. Tigerジオコーダ</th><td width="20%" align="right"> <a accesskey="n" href="Get_Geocode_Setting.html">次へ</a></td></tr></table></div><div class="refentry"><a name="Geocode_Intersection"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>Geocode_Intersection — インタセクトする二つのストリート、州コード、市名、郵便番号を引数に取り、最初の交差点の可能性のある位置の集合を出力します。geomoutにNAD83経度緯度のポイント、<code class="varname">normalized_address</code>にそれぞれの位置、ratingに評価値がそれぞれ入ります。評価値が低いほど合致度が高くなります。結果は評価値の低い順にソートされます。最大結果数を渡すことができ、デフォルトは10です。Tigerデータ (エッジ、フェイス、住所)と、PostgreSQLあいまい文字列合致 (soundex, levenshtein)を使います。</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">geocode_intersection</b>(</code>text  <var class="pdparam"> roadway1</var>, text  <var class="pdparam"> roadway2</var>, text  <var class="pdparam"> in_state</var>, text  <var class="pdparam"> in_city</var>, text  <var class="pdparam"> in_zip</var>, integer  <var class="pdparam">max_results=10</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p></div></div><div class="refsection"><a name="idp105793608"></a><h2>説明</h2><p>インタセクトする二つのストリート、州コード、市名、郵便番号を引数に取り、最初の交差点の可能性のある位置の集合を出力します。集合の要素は、NAD83経度緯度のポイント、正規化された住所、評価値を持ちます。評価値が低いほど合致度が高くなります。結果は評価値の低い順にソートされます。最大結果数を渡すことができ、デフォルトは10です。<code class="varname">normalized_address</code> (addy)、NAD83経度緯度のポイントとしてgeomout、評価値としてratingを返します。評価値が低いほど合致度が高くなります。結果は評価値の低い順にソートされます。Tigerデータ (エッジ、フェイス、住所)と、PostgreSQLあいまい文字列合致 (soundex, levenshtein)を使います。 </p><p>Availability: 2.0.0</p></div><div class="refsection"><a name="idp105795528"></a><h2>例: 基本</h2><p>下の例では、3.0GHz単一プロセッサで2GBメモリのWindows 7機上でPostgreSQL 9.0/PostGIS 1.5を走らせ、マサチューセッツ州のTigerデータをロードしています。この場合は、少し遅いです (3000ミリ秒)。</p><p>Windows 2003 64ビット 8GBでPostGIS 2.0、PostgreSQL 64ビット版を動かし、Tiger 2011データがロードされている場合もテストしています (41ミリ秒)。</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
            FROM geocode_intersection( 'Haverford St','Germania St', 'MA', 'Boston', '02130',1);
           pprint_addy            |         st_astext          | rating
----------------------------------+----------------------------+--------
98 Haverford St, Boston, MA 02130 | POINT(-71.101375 42.31376) |      0
</pre><p>郵便番号をジオコーダに渡さない場合でも動作し、Windows 2003 64ビットで741ミリ秒でした(Windows 7機で3500ミリ秒)。</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
                FROM geocode_intersection('Weld', 'School', 'MA', 'Boston');
          pprint_addy          |        st_astext         | rating
-------------------------------+--------------------------+--------
 98 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
 99 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
</pre></div><div class="refsection"><a name="idp105806920"></a><h2>関連情報</h2><p><a class="xref" href="Geocode.html" title="Geocode">Geocode</a>, <a class="xref" href="Pprint_Addy.html" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="ST_AsText.html" title="ST_AsText">ST_AsText</a></p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="Geocode.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="Extras.html#Tiger_Geocoder">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="Get_Geocode_Setting.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">Geocode </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> Get_Geocode_Setting</td></tr></table></div></body></html>
