<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>&#31532;4&#31456; PostGIS&#12434;&#20351;&#12358;: &#12487;&#12540;&#12479;&#31649;&#29702;&#12392;&#12463;&#12456;&#12522;</title><link rel="stylesheet" href="style.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="PostGIS 1.5.1 &#12510;&#12491;&#12517;&#12450;&#12523; &#26085;&#26412;&#35486;&#35379;"><link rel="up" href="index.html" title="PostGIS 1.5.1 &#12510;&#12491;&#12517;&#12450;&#12523; &#26085;&#26412;&#35486;&#35379;"><link rel="prev" href="ch03.html" title="&#31532;3&#31456; &#12424;&#12367;&#12354;&#12427;&#36074;&#21839;"><link rel="next" href="ch05.html" title="&#31532;5&#31456; PostGIS&#12434;&#20351;&#12358;: &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12434;&#27083;&#31689;&#12377;&#12427;"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">&#31532;4&#31456; 
  PostGIS&#12434;&#20351;&#12358;: &#12487;&#12540;&#12479;&#31649;&#29702;&#12392;&#12463;&#12456;&#12522;
  
  </th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch03.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch05.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td></tr></table><hr></div><div class="chapter" title="&#31532;4&#31456; PostGIS&#12434;&#20351;&#12358;: &#12487;&#12540;&#12479;&#31649;&#29702;&#12392;&#12463;&#12456;&#12522;"><div class="titlepage"><div><div><h2 class="title"><a name="id286812091"></a>&#31532;4&#31456; 
  PostGIS&#12434;&#20351;&#12358;: &#12487;&#12540;&#12479;&#31649;&#29702;&#12392;&#12463;&#12456;&#12522;
  
  </h2></div></div></div><div class="toc"><p><b>&#30446;&#27425;</b></p><dl><dt><span class="sect1"><a href="ch04.html#RefObject">4.1. 
	GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#OpenGISWKBWKT">4.1.1. 
	  OpenGIS WKB &#12392;WKT
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#EWKB_EWKT">4.1.2. 
	  PostGIS EWKB&#65292;EWKT &#12392; &#27161;&#28310;&#24418;&#24335;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#SQL_MM_Part3">4.1.3. SQL-MM Part 3</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#PostGIS_Geography">4.2. 
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;
	  
	  </a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#Geography_Basics">4.2.1. 
		&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22522;&#30990;
		
		</a></span></dt><dt><span class="sect2"><a href="ch04.html#PostGIS_GeographyVSGeometry">4.2.2. 
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12434;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12395;&#12375;&#12390;&#20351;&#29992;&#12377;&#12409;&#12365;&#26178;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#PostGIS_Geography_AdvancedFAQ">4.2.3. 
			&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12398;&#39640;&#24230;&#12394;&#12424;&#12367;&#12354;&#12427;&#36074;&#21839;
			
			</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#id286813669">4.3. 
	OpenGIS&#27161;&#28310;&#12434;&#20351;&#12358;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#spatial_ref_sys">4.3.1. 
	  SPATIAL_REF_SYS&#12486;&#12540;&#12502;&#12523;&#12392;&#31354;&#38291;&#21442;&#29031;&#31995;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286814041">4.3.2. 
	  GEOMETRY_COLUMNS&#12486;&#12540;&#12502;&#12523;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#Create_Spatial_Table">4.3.3. 
	  &#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#Manual_Register_Spatial_Column">4.3.4. 
		&#25163;&#21205;&#12391;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;
		
		</a></span></dt><dt><span class="sect2"><a href="ch04.html#OGC_Validity">4.3.5. 
	  &#12472;&#12458;&#12513;&#12488;&#12522;&#12398;OpenGIS&#28310;&#25312;&#12434;&#30906;&#23455;&#12395;&#12377;&#12427;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#DE-9IM">4.3.6. 
		Dimensionally Extended 9 Intersection Model (DE-9IM)
		
		</a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#id286816897">4.4. 
	GIS&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;&#12377;&#12427;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#id286816909">4.4.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#shp2pgsql_usage">4.4.2. 
  &#12525;&#12540;&#12480;&#12434;&#20351;&#12358;
  
  </a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#id286817558">4.5. 
	GIS&#12487;&#12540;&#12479;&#12434;&#26908;&#32034;&#12377;&#12427;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#id286817571">4.5.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286817827">4.5.2. 
	  &#12480;&#12531;&#12497;&#12434;&#20351;&#12358;
	  
	  </a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#id286818023">4.6. 
	&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12377;&#12427;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#id286818134">4.6.1. 
	  GiST&#12452;&#12531;&#12487;&#12463;&#12473;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286818189">4.6.2. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;
	  
	  </a></span></dt></dl></dd><dt><span class="sect1"><a href="ch04.html#id286818722">4.7. 
	&#35079;&#38609;&#12394;&#12463;&#12456;&#12522;
	
	</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04.html#id286818738">4.7.1. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#21033;&#28857;&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286818798">4.7.2. 
	  &#31354;&#38291;SQL&#12398;&#20363;
	  
	  </a></span></dt></dl></dd></dl></div><div class="sect1" title="4.1. GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RefObject"></a>4.1. 
	GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#OpenGISWKBWKT">4.1.1. 
	  OpenGIS WKB &#12392;WKT
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#EWKB_EWKT">4.1.2. 
	  PostGIS EWKB&#65292;EWKT &#12392; &#27161;&#28310;&#24418;&#24335;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#SQL_MM_Part3">4.1.3. SQL-MM Part 3</a></span></dt></dl></div><p>
	PostGIS&#12391;&#12469;&#12509;&#12540;&#12488;&#12373;&#12428;&#12427;GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12399;&#65292;OpenGIS Consortium (OGC)&#12364;&#23450;&#32681;&#12377;&#12427; "Simple Features" &#12398;&#12473;&#12540;&#12497;&#12540;&#12475;&#12483;&#12488;&#12391;&#12377;&#65294;
	PostGIS 0.9&#29256;&#12363;&#12425;OGC&#12398;"Simple Features for SQL"&#20181;&#27096;&#12391;&#23450;&#12417;&#12425;&#12428;&#12383;&#20840;&#12390;&#12398;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12392;&#38306;&#25968;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
	
	</p><p>
	PostGIS&#12399;&#27161;&#28310;&#12363;&#12425;&#25313;&#24373;&#12375;&#12390; 3DZ, 3DM, 4D &#24231;&#27161;(&#35379;&#27880;: &#12381;&#12428;&#12382;&#12428;XYZ,XYM,XYZM)&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
	
	</p><div class="sect2" title="4.1.1. OpenGIS WKB &#12392;WKT"><div class="titlepage"><div><div><h3 class="title"><a name="OpenGISWKBWKT"></a>4.1.1. 
	  OpenGIS WKB &#12392;WKT
	  
	  </h3></div></div></div><p>
	  OpenGIS&#20181;&#27096;&#12399;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#34920;&#29694;&#12395;&#12388;&#12356;&#12390;&#20108;&#12388;&#12398;&#27161;&#28310;&#12434;&#23450;&#32681;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;Well-Known&#12486;&#12461;&#12473;&#12488;(WKT)&#24418;&#24335;&#12392;Well- Known&#12496;&#12452;&#12490;&#12522;(WKB)&#24418;&#24335;&#12391;&#12377;&#65294; WKT&#12418;WKB&#12418;&#65292;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#22411;&#12392;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#24418;&#25104;&#12377;&#12427;&#24231;&#27161;&#12395;&#38306;&#12377;&#12427;&#24773;&#22577;&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12486;&#12461;&#12473;&#12488;&#34920;&#29694;(WKT)&#12398;&#20363;&#12399;&#65292;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POINT(0 0)</p></li><li class="listitem"><p>LINESTRING(0 0,1 1,1 2)</p></li><li class="listitem"><p>POLYGON((0 0,4 0,4 4,0 4,0 0),(1 1, 2 1, 2 2, 1 2,1 1))</p></li><li class="listitem"><p>MULTIPOINT(0 0,1 2)</p></li><li class="listitem"><p>MULTILINESTRING((0 0,1 1,1 2),(2 3,3 2,5 4))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0,4 0,4 4,0 4,0 0),(1 1,2 1,2 2,1 2,1 1)),
		  ((-1 -1,-1 -2,-2 -2,-2 -1,-1 -1)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTION(POINT(2 3),LINESTRING(2 3,3 4))</p></li></ul></div><p>
	  OpenGIS&#20181;&#27096;&#12391;&#12399;&#65292;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#20869;&#37096;&#20445;&#23384;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12364;&#31354;&#38291;&#21442;&#29031;&#12471;&#12473;&#12486;&#12512;&#35672;&#21029;&#23376;(Spatial Referencing System IDentifier, SRID)&#12434;&#21547;&#12416;&#12371;&#12392;&#12418;&#27714;&#12417;&#12425;&#12428;&#12414;&#12377;&#65294; SRID&#12399;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12408;&#12398;&#25407;&#20837;&#12398;&#12383;&#12417;&#12395;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12364;&#29983;&#25104;&#12373;&#12428;&#12427;&#26178;&#12395;&#27714;&#12417;&#12425;&#12428;&#12414;&#12377;&#65294; 
	  
	  </p><p>
	  &#12371;&#12428;&#12425;&#12398;&#26360;&#24335;&#12398;&#20837;&#20986;&#21147;&#12399;&#27425;&#12398;&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12434;&#29992;&#12356;&#12390;&#23455;&#29694;&#12391;&#12365;&#12414;&#12377;&#65294; 
	  
	  </p><pre class="programlisting">bytea WKB = ST_AsBinary(geometry);
text WKT = ST_AsText(geometry);
geometry = ST_GeomFromWKB(bytea WKB, SRID);
geometry = ST_GeometryFromText(text WKT, SRID);</pre><p>
	  &#12383;&#12392;&#12360;&#12400;&#65292;OGC&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#29983;&#25104;&#12375;&#12390;&#25407;&#20837;&#12377;&#12427;&#22949;&#24403;&#12394;INSERT&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">INSERT INTO geotable ( the_geom, the_name )
  VALUES ( ST_GeomFromText('POINT(-126.4 45.32)', 312), 'A Place');</pre></div><div class="sect2" title="4.1.2. PostGIS EWKB&#65292;EWKT &#12392; &#27161;&#28310;&#24418;&#24335;"><div class="titlepage"><div><div><h3 class="title"><a name="EWKB_EWKT"></a>4.1.2. 
	  PostGIS EWKB&#65292;EWKT &#12392; &#27161;&#28310;&#24418;&#24335;
	  
	  </h3></div></div></div><p>
	  OGC&#26360;&#24335;&#12399;2&#27425;&#20803;&#12472;&#12458;&#12513;&#12488;&#12522;&#12375;&#12363;&#12469;&#12509;&#12540;&#12488;&#12373;&#12428;&#12390;&#12362;&#12425;&#12378;&#65292;&#12414;&#12383;&#65292;&#20837;&#20986;&#21147;&#12398;&#34920;&#29694;&#12395;&#12362;&#12356;&#12390;SRID&#32676;&#12399;*&#27770;&#12375;&#12390;*&#22475;&#12417;&#36796;&#12414;&#12428;&#12414;&#12379;&#12435;&#65294;
	  
	  </p><p>
	  PostGIS&#25313;&#24373;&#26360;&#24335;&#12399;&#29694;&#22312;&#12398;&#12392;&#12371;&#12429;OGC&#26360;&#24335;&#12398;&#12473;&#12540;&#12497;&#12540;&#12475;&#12483;&#12488;&#12392;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377; (&#20840;&#12390;&#12398;&#22949;&#24403;&#12394;WKB/WKT&#12399;&#22949;&#24403;&#12394;EWKB/EWKT&#12391;&#12377;)&#65294;&#12375;&#12363;&#12375;&#65292;&#29305;&#12395;&#12418;&#12375;OGC&#12364;PostGIS&#25313;&#24373;&#12392;&#30683;&#30462;&#12377;&#12427;&#26032;&#12375;&#12356;&#26360;&#24335;&#12434;&#20986;&#12377;&#12371;&#12392;&#12364;&#12354;&#12427;&#12394;&#12425;&#65292;&#12371;&#12428;&#12399;&#23558;&#26469;&#22793;&#26356;&#12373;&#12428;&#12427;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#65294;&#12422;&#12360;&#12395;&#12371;&#12398;&#27231;&#33021;&#12395;&#38972;&#12427;&#12409;&#12365;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
	  
	  </p><p>
	  PostGIS EWKB/EWKT &#12391;&#12399; 3dm, 3dz, 4d &#12398;&#24231;&#27161;&#12469;&#12509;&#12540;&#12488;&#12364;&#36861;&#21152;&#12373;&#12428;&#65292;SRID&#24773;&#22577;&#12364;&#22475;&#12417;&#36796;&#12414;&#12428;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#25313;&#24373;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12486;&#12461;&#12473;&#12488;&#34920;&#29694;(EKWT)&#12398;&#20363;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POINT(0 0 0) -- XYZ</p></li><li class="listitem"><p>SRID=32632;POINT(0 0) -- XY with SRID</p></li><li class="listitem"><p>POINTM(0 0 0) -- XYM</p></li><li class="listitem"><p>POINT(0 0 0 0) -- XYZM</p></li><li class="listitem"><p>SRID=4326;MULTIPOINTM(0 0 0,1 2 1) -- XYM with SRID</p></li><li class="listitem"><p>MULTILINESTRING((0 0 0,1 1 0,1 2 1),(2 3 1,3 2 1,5 4
		  1))</p></li><li class="listitem"><p>POLYGON((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2
		  0,1 1 0))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2
		  0,1 2 0,1 1 0)),((-1 -1 0,-1 -2 0,-2 -2 0,-2 -1 0,-1 -1 0)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTIONM(POINTM(2 3 9), LINESTRINGM(2 3 4, 3 4
		  5))</p></li></ul></div><p>
	  &#12371;&#12428;&#12425;&#12398;&#26360;&#24335;&#12398;&#20837;&#20986;&#21147;&#12399;&#27425;&#12398;&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12434;&#29992;&#12356;&#12390;&#23455;&#29694;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">bytea EWKB = ST_AsEWKB(geometry);
text EWKT = ST_AsEWKT(geometry);
geometry = ST_GeomFromEWKB(bytea EWKB);
geometry = ST_GeomFromEWKT(text EWKT);</pre><p>
	  &#12383;&#12392;&#12360;&#12400;&#65292;PostGIS&#12398;&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#20316;&#25104;&#12375;&#25407;&#20837;&#12377;&#12427;&#22949;&#24403;&#12394;INSERT&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">INSERT INTO geotable ( the_geom, the_name )
  VALUES ( ST_GeomFromEWKT('SRID=312;POINTM(-126.4 45.32 15)'), 'A Place' )</pre><p>
	  PostgreSQL&#12398;&#12300;&#27161;&#28310;&#30340;&#12394;&#24418;&#24335;&#12301;&#12399;&#21336;&#32020;&#12394;&#12463;&#12456;&#12522;(&#20840;&#12367;&#38306;&#25968;&#21628;&#12403;&#20986;&#12375;&#12364;&#28961;&#12356;)&#12391;&#34920;&#29694;&#12391;&#12391;&#12365;&#12390;&#12356;&#12390;&#65292;INSERT, UPDATE, COPY&#12391;&#21463;&#12369;&#20184;&#12369;&#12425;&#12428;&#12427;&#12371;&#12392;&#12364;&#20445;&#38556;&#12373;&#12428;&#12427;&#12418;&#12398;&#12391;&#12377;&#65294;PostGIS&#12398;"geometory"&#22411;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  </p><pre class="programlisting">- Output
  - binary: EWKB
	ascii: HEXEWKB (EWKB in hex form)
- Input
  - binary: EWKB
	ascii: HEXEWKB|EWKT</pre><p>
	  
	</p><p>
	  &#12383;&#12392;&#12360;&#12400;&#65292;&#12371;&#12398;&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12399;&#65292;&#27161;&#28310;&#30340;&#12394;ASCII&#25991;&#23383;&#21015;&#12395;&#12424;&#12427;&#20837;&#20986;&#21147;&#12398;&#20966;&#29702;&#12391;EWKT&#12434;&#35501;&#12415;&#65292;HEXEWKB&#12434;&#36820;&#12377;&#12418;&#12398;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">=# SELECT 'SRID=4;POINT(0 0)'::geometry;

geometry
----------------------------------------------------
01010000200400000000000000000000000000000000000000
(1 row)</pre></div><div class="sect2" title="4.1.3. SQL-MM Part 3"><div class="titlepage"><div><div><h3 class="title"><a name="SQL_MM_Part3"></a>4.1.3. SQL-MM Part 3</h3></div></div></div><p>
	  SQL&#12510;&#12523;&#12481;&#12513;&#12487;&#12451;&#12450;&#12539;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#31354;&#38291;&#20181;&#27096;&#12399;&#65292;&#20870;&#24359;&#35036;&#23436;&#26354;&#32218;&#12434;&#23450;&#32681;&#12375;&#12383;SQL&#20181;&#27096;&#12398;&#25313;&#24373;&#12391;&#12377;&#65294;
	  
	  </p><p>
	  SQL-MM&#12398;&#23450;&#32681;&#12391;&#12399;&#65292;3dm&#65292;3dz&#12392;4d&#12398;&#24231;&#27161;&#12434;&#21547;&#12415;&#12414;&#12377;&#12364;&#65292;SRID&#24773;&#22577;&#12398;&#22475;&#12417;&#36796;&#12415;&#12399;&#12391;&#12365;&#12414;&#12379;&#12435;&#65294;
	  
	  </p><p>
	  WKT&#25313;&#24373;&#12399;&#12414;&#12384;&#23436;&#20840;&#12395;&#12399;&#12469;&#12509;&#12540;&#12488;&#12373;&#12428;&#12390;&#12356;&#12414;&#12379;&#12435;&#65294;&#21336;&#32020;&#12394;&#26354;&#32218;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#20363;&#12434;&#27425;&#12395;&#31034;&#12375;&#12414;&#12377;&#65294; 
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>CIRCULARSTRING(0 0, 1 1, 1 0)</p><p>CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0)</p><p>
		  CIRCULARSTRING&#12399;&#22522;&#26412;&#30340;&#12394;&#26354;&#32218;&#22411;&#12391;&#65292;LINESTRING&#12395;&#20284;&#12390;&#12356;&#12414;&#12377;&#65294;
		  &#12402;&#12392;&#12388;&#12398;&#12475;&#12464;&#12513;&#12531;&#12488;&#12391;&#65292;&#22987;&#28857;&#65292;&#32066;&#28857;(&#19968;&#12388;&#12417;&#12392;&#19977;&#12388;&#12417;)&#12392;&#24359;&#19978;&#12398;&#20219;&#24847;&#12398;&#28857;&#65292;&#12398;3&#28857;&#12364;&#24517;&#35201;&#12391;&#12377;&#65294;
		  &#20363;&#22806;&#12392;&#12375;&#12390;&#65292;&#22987;&#28857;&#12392;&#32066;&#28857;&#12364;&#21516;&#12376;&#12392;&#12394;&#12427;&#38281;&#26354;&#32218;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
		  &#38281;&#26354;&#32218;&#12391;&#12399;&#20108;&#12388;&#12417;&#12398;&#28857;&#12364;&#24359;&#12398;&#20013;&#24515;&#65292;&#12377;&#12394;&#12431;&#12385;&#20870;&#12398;&#21453;&#23550;&#20596;&#12395;&#12394;&#12425;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#65294;
		  &#24359;&#12398;&#36899;&#32080;&#12391;&#12399;&#65292;LINESTRING&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#65292;&#21069;&#12398;&#24359;&#12398;&#26368;&#24460;&#12398;&#28857;&#12364;&#27425;&#12398;&#24359;&#12398;&#26368;&#21021;&#12398;&#28857;&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;
		  &#12424;&#12387;&#12390;&#65292;&#22949;&#24403;&#12394;CIRCULARSTRING&#12399;1&#20197;&#19978;&#12398;&#22855;&#25968;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
		  
		  </p></li><li class="listitem"><p>COMPOUNDCURVE(CIRCULARSTRING(0 0, 1 1, 1 0),(1 0, 0 1))</p><p>
		  &#35079;&#21512;&#26354;&#32218;&#12399;&#65292;&#26354;&#32218;(&#20870;&#24359;)&#12475;&#12464;&#12513;&#12531;&#12488;&#12392;&#32218;&#22411;&#12475;&#12464;&#12513;&#12531;&#12488;&#12398;&#20001;&#26041;&#12434;&#25345;&#12388;&#65292;&#21336;&#19968;&#12398;&#36899;&#32154;&#12375;&#12383;&#26354;&#32218;&#12391;&#12377;&#65294;
		  &#12424;&#12387;&#12390;&#65292;&#35201;&#32032;&#12364;&#30340;&#30906;&#12391;&#12354;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12371;&#12392;&#12395;&#21152;&#12360;&#65292;&#21508;&#35201;&#32032;(&#26368;&#32066;&#35201;&#32032;&#12399;&#38500;&#12367;)&#12398;&#32066;&#28857;&#12399;&#27425;&#12398;&#35201;&#32032;&#12398;&#22987;&#28857;&#12392;&#21516;&#12376;&#12395;&#12394;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
		  
		  </p></li><li class="listitem"><p>CURVEPOLYGON(CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0),(1 1, 3
		  3, 3 1, 1 1))</p><p>
		  &#26354;&#32218;&#12509;&#12522;&#12468;&#12531;&#12398;&#20013;&#12395;&#35079;&#21512;&#12509;&#12522;&#12468;&#12531;&#12364;&#12354;&#12427;&#20363;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
				CURVEPOLYGON(COMPOUNDCURVE(CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),(4 3, 4 5, 1 4, 0 0)),
					CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1) )
		  
		  </p><p>
		  CURVEPOLYGON&#12399;&#22806;&#29872;&#12392;0&#20197;&#19978;&#12398;&#20869;&#29872;&#12392;&#12434;&#25345;&#12388;&#28857;&#12391;POLYGON&#12392;&#20284;&#12390;&#12356;&#12414;&#12377;&#65294;
		  &#30064;&#12394;&#12427;&#28857;&#12399;&#65292;&#29872;&#12395;&#26354;&#32218;&#12473;&#12488;&#12522;&#12531;&#12464;&#65292;&#32218;&#22411;&#12473;&#12488;&#12522;&#12531;&#12464;&#65292;&#35079;&#21512;&#12473;&#12488;&#12522;&#12531;&#12464;&#12398;&#12356;&#12378;&#12428;&#12418;&#21462;&#12428;&#12427;&#28857;&#12391;&#12377;&#65294;
		  
		  </p><p>
		  PostGIS 1.4&#12363;&#12425;&#65292;PostGIS&#12391;&#26354;&#32218;&#12509;&#12522;&#12468;&#12531;&#12391;&#35079;&#21512;&#26354;&#32218;&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12375;&#12383;&#65294;
		  
		  </p></li><li class="listitem"><p>MULTICURVE((0 0, 5 5),CIRCULARSTRING(4 0, 4 4, 8 4))</p><p>
		  MULTICURVE&#12399;&#26354;&#32218;&#12398;&#12467;&#12524;&#12463;&#12471;&#12519;&#12531;&#12391;&#65292;&#32218;&#22411;&#12473;&#12488;&#12522;&#12531;&#12464;&#65292;&#26354;&#32218;&#12473;&#12488;&#12522;&#12531;&#12464;&#65292;&#35079;&#21512;&#12473;&#12488;&#12522;&#12531;&#12464;&#12434;&#21462;&#12428;&#12414;&#12377;&#65294;0
		  
		  </p></li><li class="listitem"><p>MULTISURFACE(CURVEPOLYGON(CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0
		  0),(1 1, 3 3, 3 1, 1 1)),((10 10, 14 12, 11 10, 10 10),(11 11, 11.5
		  11, 11 11.5, 11 11)))</p><p>
		  &#12469;&#12540;&#12501;&#12455;&#12473;&#12398;&#12467;&#12524;&#12463;&#12471;&#12519;&#12531;&#12391;&#12377;&#65294;(&#32218;&#22411;)&#12509;&#12522;&#12468;&#12531;&#12363;&#26354;&#32218;&#12509;&#12522;&#12468;&#12531;&#12434;&#21462;&#12428;&#12414;&#12377;&#65294;
		  
		  </p></li></ul></div><div class="note" title="&#27880;&#24847;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		PostGIS 1.4&#12424;&#12426;&#21069;&#12391;&#12399;&#65292;&#26354;&#32218;&#12509;&#12522;&#12468;&#12531;&#12391;&#35079;&#21512;&#26354;&#32218;&#12434;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12379;&#12435;&#12391;&#12375;&#12383;&#12364;&#65292;
		PostGIS 1.4&#20197;&#38477;&#12399;&#26354;&#32218;&#12509;&#12522;&#12468;&#12531;&#12391;&#12398;&#35079;&#21512;&#26354;&#32218;&#12398;&#20351;&#29992;&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12375;&#12383;&#65294;
		
		</p></td></tr></table></div><div class="note" title="&#27880;&#24847;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		SQL-MM&#23455;&#35013;&#12391;&#12398;&#20840;&#12390;&#12398;&#28014;&#21205;&#23567;&#25968;&#28857;&#25968;&#12398;&#27604;&#36611;&#12391;&#12399;&#65292;&#25152;&#23450;&#12398;&#20024;&#12417;&#35492;&#24046;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;&#29694;&#22312;&#12399;1E-8&#12391;&#12377;&#65294;
		
		</p></td></tr></table></div></div></div><div class="sect1" title="4.2. &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Geography"></a>4.2. 
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;
	  
	  </h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#Geography_Basics">4.2.1. 
		&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22522;&#30990;
		
		</a></span></dt><dt><span class="sect2"><a href="ch04.html#PostGIS_GeographyVSGeometry">4.2.2. 
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12434;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12395;&#12375;&#12390;&#20351;&#29992;&#12377;&#12409;&#12365;&#26178;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#PostGIS_Geography_AdvancedFAQ">4.2.3. 
			&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12398;&#39640;&#24230;&#12394;&#12424;&#12367;&#12354;&#12427;&#36074;&#21839;
			
			</a></span></dt></dl></div><p>
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12399;&#65292;&#12300;&#22320;&#29702;&#12301;&#24231;&#27161;(&#12375;&#12400;&#12375;&#12400;&#12300;&#28204;&#22320;&#12301;&#24231;&#27161;&#65292;"lat/lon", "lon/lat", &#32239;&#24230;&#32076;&#24230;, &#32076;&#24230;&#32239;&#24230; &#12394;&#12393;&#12392;&#12418;&#21628;&#12400;&#12428;&#12414;&#12377;)&#19978;&#12391;&#34920;&#29694;&#12373;&#12428;&#12383;&#31354;&#38291;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#12493;&#12452;&#12486;&#12451;&#12502;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12383;&#12417;&#12398;&#12418;&#12398;&#12391;&#12377;&#65294;&#22320;&#29702;&#24231;&#27161;&#12399;&#35282;&#24230;&#12398;&#21336;&#20301;(&#24230;)&#12391;&#21512;&#12431;&#12373;&#12425;&#12428;&#12427;&#29699;&#38754;&#24231;&#27161;&#12391;&#12377;&#65294;
	  
	  </p><p>
	  PostGIS&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12398;&#22522;&#30990;&#12399;&#24179;&#38754;&#12391;&#12377;&#65294;&#24179;&#38754;&#19978;&#12398;&#20108;&#28857;&#38291;&#12398;&#26368;&#30701;&#12467;&#12540;&#12473;&#12399;&#30452;&#32218;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;&#12424;&#12387;&#12390;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#19978;&#12398;&#35336;&#31639;(&#38754;&#31309;&#65292;&#36317;&#38626;&#65292;&#38263;&#12373;&#65292;&#12452;&#12531;&#12479;&#12475;&#12463;&#12471;&#12519;&#12531;&#31561;)&#12399;&#65292;&#12487;&#12459;&#12523;&#12488;&#24231;&#27161;&#12392;&#32218;&#22411;&#12505;&#12463;&#12488;&#12523;&#12434;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  PostGIS&#12398;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12398;&#22522;&#30990;&#12399;&#29699;&#38754;&#12391;&#12377;&#65294;&#29699;&#38754;&#19978;&#12391;&#12398;&#20108;&#28857;&#38291;&#12398;&#26368;&#30701;&#36317;&#38626;&#12399;&#22823;&#22287;&#12398;&#24359;&#12391;&#12377;&#65294;&#12424;&#12387;&#12390;&#65292;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#19978;&#12398;&#35336;&#31639;(&#38754;&#31309;&#65292;&#36317;&#38626;&#65292;&#38263;&#12373;&#65292;&#12452;&#12531;&#12479;&#12475;&#12463;&#12471;&#12519;&#12531;&#31561;)&#12399;&#65292;&#29699;&#38754;&#19978;&#12391;&#35336;&#31639;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12378;&#65292;&#35079;&#38609;&#12394;&#35336;&#31639;&#12364;&#24517;&#35201;&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;&#12424;&#12426;&#27491;&#30906;&#12394;&#35336;&#28204;&#12398;&#12383;&#12417;&#12395;&#12399;&#65292;&#19990;&#30028;&#12398;&#23455;&#38555;&#12398;&#22238;&#36578;&#26965;&#20870;&#20307;&#12398;&#24418;&#12434;&#32771;&#24942;&#12395;&#20837;&#12428;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12378;&#65292;&#38750;&#24120;&#12395;&#35079;&#38609;&#12391;&#12377;&#65294;
	  
	  </p><p>
	  &#22522;&#30990;&#12392;&#12394;&#12427;&#25968;&#23398;&#12364;&#22823;&#22793;&#12395;&#35079;&#38609;&#12394;&#12398;&#12391;&#65292;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#29992;&#12395;&#23450;&#32681;&#12373;&#12428;&#12383;&#38306;&#25968;&#12399;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12424;&#12426;&#12418;&#23569;&#12394;&#12356;&#12391;&#12377;&#65294;&#26178;&#38291;&#12392;&#12392;&#12418;&#12395;&#65292;&#26032;&#12375;&#12356;&#12450;&#12523;&#12468;&#12522;&#12474;&#12512;&#12364;&#36861;&#21152;&#12373;&#12428;&#12390;&#65292;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12398;&#33021;&#21147;&#12399;&#25313;&#22823;&#12375;&#12390;&#12356;&#12367;&#12391;&#12375;&#12423;&#12358;&#65294;
	  
	  </p><p>
	  WGS84&#32076;&#24230;&#32239;&#24230;(SRID:4326)&#12398;&#12415;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12427;&#12392;&#12356;&#12358;&#21046;&#38480;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12392;&#21628;&#12400;&#12428;&#12427;&#26032;&#12375;&#12356;&#12487;&#12540;&#12479;&#22411;&#12434;&#20351;&#29992;&#12375;&#12414;&#12377;&#65294;
	  GEOS&#38306;&#25968;&#12395;&#12371;&#12398;&#26032;&#12375;&#12356;&#22411;&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#38306;&#25968;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
	  &#22238;&#36991;&#31574;&#12392;&#12375;&#12390;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#12392;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12398;&#22411;&#22793;&#25563;&#12434;&#34892;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12399;PostgreSQL 8.3&#20197;&#19978;&#12398;typmod&#23450;&#32681;&#26360;&#24335;&#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12459;&#12521;&#12512;&#12434;&#25345;&#12388;&#12486;&#12540;&#12502;&#12523;&#12395;1&#12473;&#12486;&#12483;&#12503;&#12391;&#36861;&#21152;&#12391;&#12365;&#12414;&#12377;&#65294;&#27161;&#28310;OGC&#26360;&#24335;&#12399;&#26354;&#32218;&#12434;&#38500;&#12356;&#12390;&#12469;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#65294;
	  
			</p><div class="sect2" title="4.2.1. &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22522;&#30990;"><div class="titlepage"><div><div><h3 class="title"><a name="Geography_Basics"></a>4.2.1. 
		&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22522;&#30990;
		
		</h3></div></div></div><p>
		&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12399;&#31777;&#21336;&#12394;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#26368;&#12418;&#31777;&#21336;&#12394;&#12418;&#12398;&#12398;&#12415;&#12469;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#65294;&#27161;&#28310;&#30340;&#12394;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12487;&#12540;&#12479;&#12391;&#65292;SRID&#12364;4326&#12398;&#22580;&#21512;&#12399;&#65292;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12395;&#33258;&#21205;&#12391;&#12461;&#12515;&#12473;&#12488;&#12373;&#12428;&#12414;&#12377;&#65294;&#12414;&#12383;EWKT&#12392;EWKB&#12398;&#21462;&#12426;&#27770;&#12417;&#12434;&#20351;&#12358;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#65294;
		
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  POINT: 2&#27425;&#20803;&#12398;&#12509;&#12452;&#12531;&#12488;&#12472;&#12458;&#12513;&#12488;&#12522;&#12434;&#25345;&#12388;&#12486;&#12540;&#12502;&#12523;&#12398;&#20316;&#25104;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
		  
		  </p><pre class="programlisting">CREATE TABLE testgeog(gid serial PRIMARY KEY, the_geog geography(POINT,4326) );</pre><p>
		  Z&#20516;&#12434;&#25345;&#12388;&#12509;&#12452;&#12531;&#12488;&#12398;&#22580;&#21512;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
		  
		  </p><pre class="programlisting">CREATE TABLE testgeog(gid serial PRIMARY KEY, the_geog geography(POINTZ,4326) );</pre></li><li class="listitem"><p>LINESTRING</p></li><li class="listitem"><p>POLYGON</p></li><li class="listitem"><p>MULTIPOINT</p></li><li class="listitem"><p>MULTILINESTRING</p></li><li class="listitem"><p>MULTIPOLYGON</p></li><li class="listitem"><p>GEOMETRYCOLLECTION</p></li></ul></div><p>
		&#26032;&#12375;&#12356;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12459;&#12521;&#12512;&#12399;geometry_columns&#12395;&#30331;&#37682;&#12373;&#12428;&#12390;&#12414;&#12379;&#12435;&#65294;&#12471;&#12473;&#12486;&#12512;&#12459;&#12479;&#12525;&#12464;&#12434;&#35211;&#12427;geomgraphy_columns&#12392;&#12356;&#12358;&#26032;&#12375;&#12356;&#12499;&#12517;&#12540;&#12395;&#30331;&#37682;&#12373;&#12428;&#12427;&#12398;&#12391;&#65292;AddGeom... &#12392;&#12356;&#12387;&#12383;&#38306;&#25968;&#12434;&#20351;&#12431;&#12378;&#12395;&#65292;&#33258;&#21205;&#31649;&#29702;&#12373;&#12428;&#12414;&#12377;&#65294;
		
		</p><p>
		"geography_columns"&#12499;&#12517;&#12540;&#12434;&#12481;&#12455;&#12483;&#12463;&#12375;&#12390;&#65292;&#12486;&#12540;&#12502;&#12523;&#12364;&#12522;&#12473;&#12488;&#12373;&#12428;&#12390;&#12356;&#12427;&#12363;&#35211;&#12390;&#19979;&#12373;&#12356;&#65294;
		
		</p><p>
		CREATE TABLE&#12391;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12459;&#12521;&#12512;&#12434;&#25345;&#12388;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
		&#12472;&#12458;&#12513;&#12488;&#12522;&#12392;&#36949;&#12387;&#12390;&#65292;AddGeometryColumns()&#12391;&#12513;&#12479;&#12487;&#12540;&#12479;&#12395;&#12459;&#12521;&#12512;&#24773;&#22577;&#12434;&#30331;&#37682;&#12377;&#12427;&#20966;&#29702;&#12434;&#21029;&#12395;&#34892;&#12358;&#24517;&#35201;&#12364;&#12394;&#12367;&#12394;&#12426;&#12414;&#12375;&#12383;&#65294;
		
		</p><p>
</p><pre class="programlisting">CREATE TABLE global_points ( 
    id SERIAL PRIMARY KEY,
    name VARCHAR(64),
    location GEOGRAPHY(POINT,4326)
  );</pre><p>
  		</p><p>
		location&#12459;&#12521;&#12512;&#12399;GEOGRAPHY&#22411;&#12391;&#65292;&#20108;&#12388;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#20462;&#39166;&#23376;&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12371;&#12392;&#12395;&#12372;&#27880;&#24847;&#12367;&#12384;&#12373;&#12356;&#65294;
		&#12402;&#12392;&#12388;&#12399;&#65292;&#12381;&#12398;&#12459;&#12521;&#12512;&#12391;&#20351;&#29992;&#12391;&#12365;&#12427;&#24418;&#29366;&#12392;&#27425;&#20803;&#12434;&#38480;&#23450;&#12377;&#12427;&#22411;&#20462;&#39166;&#23376;&#12391;&#12377;&#65294;&#12418;&#12358;&#12402;&#12392;&#12388;&#12399;&#65292;&#24231;&#27161;&#21442;&#29031;ID&#12434;&#29305;&#23450;&#12398;&#25968;&#12395;&#38480;&#23450;&#12377;&#12427;SRID&#20462;&#39166;&#23376;&#12391;&#12377;&#65294;
		
		</p><p>
		&#22411;&#20462;&#39166;&#23376;&#12391;&#35377;&#12373;&#12428;&#12427;&#20516;&#12399; POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON &#12391;&#12377;&#65294;&#12371;&#12398;&#20462;&#39166;&#23376;&#12391;&#12399;Z, M, ZM &#12398;&#25313;&#24373;&#23376;&#12395;&#12424;&#12387;&#12390;&#27425;&#20803;&#12434;&#38480;&#23450;&#12375;&#12414;&#12377;&#65294;&#12383;&#12392;&#12360;&#12400;&#65292;'LINESTRINGM'&#12392;&#12356;&#12358;&#20516;&#12391;&#12399;&#65292;3&#27425;&#20803;&#12391;&#65292;&#31532;3&#27425;&#20803;&#12364;&#35336;&#28204;&#20516;(measure)&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;&#21516;&#12376;&#12424;&#12358;&#12395;&#35211;&#12390; 'POINTZM' &#12399;&#65292;4&#27425;&#20803;&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;
		
		</p><p>
		SRID&#20462;&#39166;&#23376;&#12395;&#12399;&#65292;&#29694;&#22312;&#12399;4326(WGS84)&#12398;&#35377;&#12373;&#12428;&#12427;&#12392;&#12356;&#12358;&#21046;&#38480;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;SRID&#12434;&#25351;&#23450;&#12375;&#12383;&#12367;&#12394;&#12356;&#22580;&#21512;&#12399; 0 (&#26410;&#23450;&#32681;&#12398;&#22238;&#36578;&#26965;&#20870;&#20307;) &#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#12371;&#12398;&#22580;&#21512;&#12398;&#20840;&#12390;&#12398;&#35336;&#31639;&#12399;&#65292;WGS84&#12392;&#12375;&#12414;&#12377;&#65294;
		
		</p><p>
		&#23558;&#26469;&#30340;&#12395;&#12399;&#65292;&#20182;&#12398;SRID&#12395;&#12424;&#12387;&#12390;&#65292;WGS84&#20197;&#22806;&#12398;&#22238;&#36578;&#26965;&#20870;&#20307;&#12395;&#38306;&#12377;&#12427;&#35336;&#31639;&#12364;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#65294;
		
		</p><p>
		&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12387;&#12383;&#12425;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#12375;&#12390;GEOGRAPHY_COLUMNS&#12434;&#35211;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
		
		</p><pre class="programlisting">
-- See the contents of the metadata view
SELECT * FROM geography_columns;</pre><p>
&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;&#20351;&#12358;&#12398;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12486;&#12540;&#12502;&#12523;&#12408;&#12398;&#12487;&#12540;&#12479;&#12398;&#25407;&#20837;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;

</p><pre class="programlisting">-- Add some data into the test table
INSERT INTO global_points (name, location) VALUES ('Town', ST_GeographyFromText('SRID=4326;POINT(-110 30)') );
INSERT INTO global_points (name, location) VALUES ('Forest', ST_GeographyFromText('SRID=4326;POINT(-109 29)') );
INSERT INTO global_points (name, location) VALUES ('London', ST_GeographyFromText('SRID=4326;POINT(0 49)') );</pre><p>
&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12392;&#21516;&#12376;&#25805;&#20316;&#12391;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20316;&#25104;&#12375;&#12414;&#12377;&#65294;
PostGIS&#12399;&#65292;&#12459;&#12521;&#12512;&#22411;&#12364;GEOGRAPHY&#12391;&#12354;&#12427;&#12363;&#12434;&#35211;&#12390;&#65292;GEOMETRY&#12391;&#20351;&#12431;&#12428;&#12427;&#24179;&#38754;&#29992;&#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#20195;&#12431;&#12426;&#12395;&#29699;&#38754;&#12505;&#12540;&#12473;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20316;&#25104;&#12375;&#12414;&#12377;&#65294;

</p><pre class="programlisting">-- Index the test table with a spherical index
  CREATE INDEX global_points_gix ON global_points USING GIST ( location );</pre><p>
</p><p>
&#12463;&#12456;&#12522;&#12392;&#35336;&#28204;&#38306;&#25968;&#12399;&#12513;&#12540;&#12488;&#12523;&#21336;&#20301;&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;&#12381;&#12398;&#12383;&#12417;&#36317;&#38626;&#12497;&#12521;&#12513;&#12540;&#12479;&#12399;&#12513;&#12540;&#12488;&#12523;(&#38754;&#31309;&#12398;&#22580;&#21512;&#12399;&#24179;&#26041;&#12513;&#12540;&#12488;&#12523;)&#21336;&#20301;&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;

</p><pre class="programlisting">-- Show a distance query and note, London is outside the 1000km tolerance
  SELECT name FROM global_points WHERE ST_DWithin(location, ST_GeographyFromText('SRID=4326;POINT(-110 29)'), 1000000);</pre><p>
</p><p>
GEOGRAPHY&#12398;&#23041;&#21147;&#12395;&#12388;&#12356;&#12390;&#12399;&#65292;&#12471;&#12450;&#12488;&#12523;&#12363;&#12425;&#12525;&#12531;&#12489;&#12531;&#12414;&#12391;(LINESTRING(-122.33 47.606, 0.0 51.5))&#12398;&#39131;&#34892;&#27231;&#12364;&#12524;&#12452;&#12461;&#12515;&#12499;&#12463;(POINT(-21.96 64.15))&#12395;&#26368;&#12418;&#36817;&#12367;&#12394;&#12427;&#12392;&#12365;&#12398;&#36317;&#38626;&#12434;&#27714;&#12417;&#12390;&#12415;&#12427;&#12392;&#20998;&#12363;&#12426;&#12414;&#12377;&#65294;
</p><pre class="programlisting">-- Distance calculation using GEOGRAPHY (122.2km)
  SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geography, 'POINT(-21.96 64.15)':: geography);</pre><p>
</p><pre class="programlisting">-- Distance calculation using GEOMETRY (13.3 "degrees")
  SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geometry, 'POINT(-21.96 64.15)':: geometry);</pre><p>
</p><p>
GEOGRAPHY&#22411;&#12399;&#65292;&#12524;&#12452;&#12461;&#12515;&#12499;&#12463;&#12392;&#12471;&#12450;&#12488;&#12523;-&#12525;&#12531;&#12489;&#12531;&#38291;&#12398;&#39131;&#34892;&#27231;&#12398;&#22823;&#22287;&#12467;&#12540;&#12473;&#12392;&#12398;&#38291;&#12398;&#65292;&#29699;&#38754;&#19978;&#12391;&#12398;&#26412;&#24403;&#12395;&#26368;&#12418;&#36817;&#12356;&#36317;&#38626;&#12434;&#35336;&#31639;&#12375;&#12414;&#12377;&#65294;

</p><p>
<a class="ulink" href="http://gc.kls2.com/cgi-bin/gc?PATH=SEA-LHR" target="_top">&#22823;&#22287;&#12467;&#12540;&#12473;&#12510;&#12483;&#12503;</a>
GEOMETRY&#22411;&#12399;&#65292;&#24179;&#38754;&#12398;&#19990;&#30028;&#22320;&#22259;&#19978;&#12395;&#12503;&#12525;&#12483;&#12488;&#12373;&#12428;&#12383;&#12524;&#12452;&#12461;&#12515;&#12499;&#12463;&#12392;&#12471;&#12450;&#12488;&#12523;-&#12525;&#12531;&#12489;&#12531;&#38291;&#12398;&#30452;&#32218;&#12392;&#12398;&#12487;&#12459;&#12523;&#12488;&#36317;&#38626;&#12392;&#12356;&#12358;&#24847;&#21619;&#12398;&#12394;&#12356;&#20516;&#12434;&#20986;&#12375;&#12414;&#12377;&#65294;&#32080;&#26524;&#12398;&#21517;&#30446;&#19978;&#12398;&#21336;&#20301;&#12399;&#12300;&#24230;&#12301;&#12391;&#12377;&#12364;&#65292;&#28857;&#38291;&#12398;&#26412;&#24403;&#12398;&#35282;&#24230;&#24046;&#12395;&#12354;&#12387;&#12390;&#12356;&#12414;&#12379;&#12435;&#12398;&#12391;&#65292;&#12300;&#24230;&#12301;&#12392;&#35328;&#12358;&#12371;&#12392;&#33258;&#20307;&#19981;&#27491;&#30906;&#12391;&#12377;&#65294;

</p></div><div class="sect2" title="4.2.2. &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12434;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12395;&#12375;&#12390;&#20351;&#29992;&#12377;&#12409;&#12365;&#26178;"><div class="titlepage"><div><div><h3 class="title"><a name="PostGIS_GeographyVSGeometry"></a>4.2.2. 
	  &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12434;&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12395;&#12375;&#12390;&#20351;&#29992;&#12377;&#12409;&#12365;&#26178;
	  
	  </h3></div></div></div><p>
	  GEOGRAPHY&#22411;&#12395;&#12424;&#12387;&#12390;&#65292;&#32076;&#24230;&#32239;&#24230;&#24231;&#27161;&#12391;&#12487;&#12540;&#12479;&#12434;&#26684;&#32013;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12375;&#12383;&#12364;&#65292;
	  GEOGRAPHY&#12391;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12427;&#38306;&#25968;&#12364;&#65292;GEOMETRY&#12424;&#12426;&#23569;&#12394;&#12356;&#12398;&#12392;&#65292;&#23455;&#34892;&#12395;CPU&#26178;&#38291;&#12364;&#12363;&#12363;&#12427;&#65292;&#12392;&#12356;&#12358;&#12392;&#12371;&#12429;&#12364;&#29344;&#29298;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;	  
	  
	  </p><p>
	  &#36984;&#25246;&#12375;&#12383;&#22411;&#12364;&#65292;&#26399;&#24453;&#12377;&#12427;&#38936;&#22495;&#12363;&#12425;&#20986;&#12394;&#12356;&#12371;&#12392;&#12434;&#26465;&#20214;&#12392;&#12377;&#12409;&#12365;&#12391;&#12377;&#65294;
	  &#20351;&#29992;&#12377;&#12427;&#12487;&#12540;&#12479;&#12399;&#22320;&#29699;&#20840;&#20307;&#12363;&#65292;&#22823;&#38520;&#12363;&#65292;&#24030;&#12363;&#65292;&#33258;&#27835;&#20307;&#12363;?
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
		&#12487;&#12540;&#12479;&#12364;&#23567;&#12373;&#12356;&#12456;&#12522;&#12450;&#20869;&#12395;&#12362;&#12373;&#12414;&#12427;&#12394;&#12425;&#65292;&#36969;&#20999;&#12394;&#25237;&#24433;&#12434;&#36984;&#25246;&#12375;&#12390;GEOMETRY&#12434;&#20351;&#12358;&#12398;&#12364;&#65292;&#21177;&#29575;&#38754;&#12391;&#12418;&#27231;&#33021;&#38754;&#12391;&#12418;&#26368;&#12418;&#33391;&#12356;&#26041;&#27861;&#12391;&#12377;&#65294;
		</li><li class="listitem">
		&#12487;&#12540;&#12479;&#12364;&#22320;&#29699;&#20840;&#20307;&#12363;&#22823;&#38520;&#12394;&#12425;&#65292;GEOGRAPHY&#12391;&#25237;&#24433;&#27861;&#12398;&#32048;&#12363;&#12356;&#21839;&#38988;&#12434;&#27671;&#12395;&#12379;&#12378;&#12395;&#12471;&#12473;&#12486;&#12512;&#12434;&#27083;&#31689;&#12391;&#12365;&#12427;&#12391;&#12375;&#12423;&#12358;&#65294;
		</li><li class="listitem">
		&#25237;&#24433;&#27861;&#12434;&#29702;&#35299;&#12375;&#12390;&#12356;&#12394;&#12367;&#12390;&#65292;&#23398;&#32722;&#12375;&#12383;&#12367;&#12418;&#12394;&#12367;&#12390;&#65292;&#12363;&#12388;&#65292;GEOGRAPHY&#12391;&#20351;&#12360;&#12427;&#38306;&#25968;&#12364;&#38480;&#12425;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12434;&#21463;&#12369;&#20837;&#12428;&#12427;&#12398;&#12394;&#12425;&#65292;GEOGRAPHY&#12434;&#20351;&#12387;&#12383;&#26041;&#12364;&#31777;&#21336;&#12391;&#12377;&#65294;&#21336;&#12395;&#12487;&#12540;&#12479;&#12434;&#32076;&#24230;&#32239;&#24230;&#12391;&#12525;&#12540;&#12489;&#12375;&#12390;&#65292;&#12381;&#12371;&#12363;&#12425;&#36914;&#12417;&#12390;&#19979;&#12373;&#12356;&#65294;
		</li></ul></div><p>
	&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12392;&#12472;&#12458;&#12513;&#12488;&#12522;&#38291;&#12398;&#12469;&#12509;&#12540;&#12488;&#29366;&#27841;&#12398;&#27604;&#36611;&#12395;&#12388;&#12356;&#12390;&#12399; <a class="xref" href="ch08.html#PostGIS_TypeFunctionMatrix" title="8.8. PostGIS&#38306;&#25968;&#12469;&#12509;&#12540;&#12488;&#12510;&#12488;&#12522;&#12463;&#12473;">&#12300;
            PostGIS&#38306;&#25968;&#12469;&#12509;&#12540;&#12488;&#12510;&#12488;&#12522;&#12463;&#12473;
            &#12301;</a> &#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#65294;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#38306;&#25968;&#12398;&#31777;&#28500;&#12394;&#12522;&#12473;&#12488;&#12392;&#35500;&#26126;&#12395;&#12388;&#12356;&#12390;&#12399; <a class="xref" href="ch08.html#PostGIS_GeographyFunctions" title="8.3. PostGIS&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12469;&#12509;&#12540;&#12488;&#38306;&#25968;">&#12300;
            PostGIS&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12469;&#12509;&#12540;&#12488;&#38306;&#25968;
            &#12301;</a> &#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#65294;
	
		</p></div><div class="sect2" title="4.2.3. &#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12398;&#39640;&#24230;&#12394;&#12424;&#12367;&#12354;&#12427;&#36074;&#21839;"><div class="titlepage"><div><div><h3 class="title"><a name="PostGIS_Geography_AdvancedFAQ"></a>4.2.3. 
			&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#12398;&#39640;&#24230;&#12394;&#12424;&#12367;&#12354;&#12427;&#36074;&#21839;
			
			</h3></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="id286813570"></a><dl><dt>4.2.3.1. <a href="ch04.html#id286813572">
					&#29699;&#12414;&#12383;&#12399;&#22238;&#36578;&#26965;&#20870;&#20307;&#12398;&#12393;&#12385;&#12425;&#12391;&#35336;&#31639;&#12377;&#12427;&#12398;&#12363;?
					
					</a></dt><dt>4.2.3.2. <a href="ch04.html#id286813598">
					&#26085;&#20184;&#22793;&#26356;&#32218;&#12420;&#26997;&#12395;&#38306;&#12375;&#12390;&#12399;&#12393;&#12358;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12363;?
					
					</a></dt><dt>4.2.3.3. <a href="ch04.html#id286813619">
					&#24359;&#12398;&#20966;&#29702;&#12398;&#26368;&#22823;&#38263;&#12399;&#12393;&#12358;&#12394;&#12426;&#12414;&#12377;&#12363;?
					
					</a></dt><dt>4.2.3.4. <a href="ch04.html#id286813640">
					&#12394;&#12380;&#12520;&#12540;&#12525;&#12483;&#12497;&#12420;&#12525;&#12471;&#12450;&#12392;&#12356;&#12387;&#12383;&#22823;&#12365;&#12394;&#31684;&#22258;&#12398;&#38754;&#31309;&#35336;&#31639;&#12399;&#12392;&#12390;&#12418;&#36933;&#12356;&#12398;&#12391;&#12377;&#12363;
					</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="4.2.3.1."><td align="left" valign="top"><a name="id286813572"></a><a name="id286813574"></a><p><b>4.2.3.1.</b></p></td><td align="left" valign="top"><p>
					&#29699;&#12414;&#12383;&#12399;&#22238;&#36578;&#26965;&#20870;&#20307;&#12398;&#12393;&#12385;&#12425;&#12391;&#35336;&#31639;&#12377;&#12427;&#12398;&#12363;?
					
					</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
					&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399;&#65292;&#20840;&#12390;&#12398;&#36317;&#38626;&#12392;&#38754;&#31309;&#12398;&#35336;&#31639;&#12399;&#22238;&#36578;&#26965;&#20870;&#20307;&#12391;&#34892;&#12356;&#12414;&#12377;&#65294;&#23616;&#25152;&#30340;&#12394;&#12456;&#12522;&#12450;&#12391;&#12398;&#35336;&#31639;&#32080;&#26524;&#12392;&#33391;&#22909;&#12394;&#25237;&#24433;&#12434;&#26045;&#12375;&#12383;&#24179;&#38754;&#12391;&#12398;&#32080;&#26524;&#12392;&#27604;&#36611;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;&#22823;&#12365;&#12394;&#12456;&#12522;&#12450;&#12398;&#22580;&#21512;&#12399;&#65292;&#22238;&#36578;&#26965;&#20870;&#20307;&#35336;&#31639;&#12399;&#65292;&#25237;&#24433;&#24179;&#38754;&#19978;&#12391;&#12398;&#12393;&#12398;&#35336;&#31639;&#12424;&#12426;&#12418;&#31934;&#24230;&#12364;&#39640;&#12367;&#12394;&#12426;&#12414;&#12377;&#65294;
					
					</p><p>
					&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#38306;&#25968;&#12395;&#12399;&#65292;&#26368;&#24460;&#12398;&#30495;&#20605;&#12497;&#12521;&#12513;&#12540;&#12479;&#12434; 'FALSE' &#12395;&#12377;&#12427;&#12392;&#29699;&#38754;&#12434;&#20351;&#12387;&#12383;&#35336;&#31639;&#12434;&#34892;&#12358;&#12392;&#12356;&#12358;&#12458;&#12503;&#12471;&#12519;&#12531;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
					&#12371;&#12428;&#12399;&#65292;&#29305;&#12395;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#38750;&#24120;&#12395;&#21336;&#32020;&#12391;&#12354;&#12427;&#22580;&#21512;&#12395;&#35336;&#31639;&#12434;&#36895;&#12367;&#12377;&#12427;&#12383;&#12417;&#12398;&#12418;&#12398;&#12391;&#12377;&#65294;					
					
					</p></td></tr><tr class="question" title="4.2.3.2."><td align="left" valign="top"><a name="id286813598"></a><a name="id286813601"></a><p><b>4.2.3.2.</b></p></td><td align="left" valign="top"><p>
					&#26085;&#20184;&#22793;&#26356;&#32218;&#12420;&#26997;&#12395;&#38306;&#12375;&#12390;&#12399;&#12393;&#12358;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12363;?
					
					</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
					&#20840;&#12390;&#12398;&#35336;&#31639;&#12395;&#26085;&#20184;&#22793;&#26356;&#32218;&#12420;&#26997;&#12398;&#27010;&#24565;&#12364;&#12354;&#12427;&#12392;&#12356;&#12358;&#12431;&#12369;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
					&#24231;&#27161;&#12399;&#29699;(&#32076;&#24230;/&#32239;&#24230;)&#12391;&#12354;&#12427;&#12398;&#12391;&#65292;&#26085;&#20184;&#22793;&#26356;&#32218;&#12392;&#12463;&#12525;&#12473;&#12377;&#12427;&#24418;&#29366;&#12399;&#65292;&#35336;&#31639;&#12398;&#35251;&#28857;&#12363;&#12425;&#12399;&#65292;&#20182;&#12398;&#12418;&#12398;&#12392;&#22793;&#12431;&#12426;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
					
					</p></td></tr><tr class="question" title="4.2.3.3."><td align="left" valign="top"><a name="id286813619"></a><a name="id286813621"></a><p><b>4.2.3.3.</b></p></td><td align="left" valign="top"><p>
					&#24359;&#12398;&#20966;&#29702;&#12398;&#26368;&#22823;&#38263;&#12399;&#12393;&#12358;&#12394;&#12426;&#12414;&#12377;&#12363;?
					
					</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
					&#22823;&#22287;&#12398;&#24359;&#12434;2&#28857;&#12398;&#12300;&#35036;&#23436;&#32218;&#12301;&#12392;&#12375;&#12390;&#20351;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;&#20219;&#24847;&#12398;2&#28857;&#12399;&#65292;&#23455;&#38555;&#12395;&#12399;2&#26041;&#21521;&#12395;&#12388;&#12394;&#12364;&#12387;&#12390;&#12356;&#12390;&#65292;&#12393;&#12385;&#12425;&#12398;&#26041;&#21521;&#12395;&#34892;&#12367;&#12363;&#12395;&#20381;&#23384;&#12375;&#12414;&#12377;&#65294;PostGIS&#12398;&#20840;&#12390;&#12398;&#12467;&#12540;&#12489;&#12399;&#65292;&#22823;&#22287;&#12467;&#12540;&#12473;&#12398;2&#12467;&#12540;&#12473;&#12398;&#12358;&#12385;*&#30701;&#12356;*&#26041;&#12391;&#12388;&#12394;&#12364;&#12387;&#12390;&#12356;&#12427;&#12392;&#20206;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;&#32080;&#26524;&#12392;&#12375;&#12390;&#65292;180&#24230;&#20197;&#19978;&#12398;&#24359;&#12434;&#25345;&#12388;&#24418;&#29366;&#12399;&#27491;&#12375;&#12367;&#12514;&#12487;&#12523;&#21270;&#12375;&#12414;&#12379;&#12435;&#65294;
					
					</p></td></tr><tr class="question" title="4.2.3.4."><td align="left" valign="top"><a name="id286813640"></a><a name="id286813642"></a><p><b>4.2.3.4.</b></p></td><td align="left" valign="top"><p>
					&#12394;&#12380;&#12520;&#12540;&#12525;&#12483;&#12497;&#12420;&#12525;&#12471;&#12450;&#12392;&#12356;&#12387;&#12383;&#22823;&#12365;&#12394;&#31684;&#22258;&#12398;&#38754;&#31309;&#35336;&#31639;&#12399;&#12392;&#12390;&#12418;&#36933;&#12356;&#12398;&#12391;&#12377;&#12363;
					</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
					&#12509;&#12522;&#12468;&#12531;&#12364;&#12392;&#12435;&#12391;&#12418;&#12394;&#12367;&#22823;&#12365;&#12356;&#12363;&#12425;&#12391;&#12377;&#65294;&#20108;&#12388;&#12398;&#29702;&#30001;&#12363;&#12425;&#65292;&#22823;&#12365;&#12394;&#12456;&#12522;&#12450;&#12399;&#24746;&#12356;&#12391;&#12377;&#65294;&#12402;&#12392;&#12388;&#12399;&#65292;&#22580;&#29983;&#12435;&#12384;&#12426;&#12508;&#12483;&#12463;&#12473;&#12364;&#22823;&#12365;&#12356;&#12383;&#12417;&#65292;&#12393;&#12398;&#12424;&#12358;&#12394;&#12463;&#12456;&#12522;&#12434;&#36208;&#12425;&#12379;&#12390;&#12418;&#65292;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12434;&#24341;&#12387;&#24373;&#12387;&#12390;&#12367;&#12427;&#20670;&#21521;&#12395;&#12354;&#12427;&#12383;&#12417;&#12391;&#12377;&#65294;&#12418;&#12358;&#12402;&#12392;&#12388;&#12399;&#65292;&#12496;&#12540;&#12486;&#12483;&#12463;&#25968;&#12364;&#24040;&#22823;&#12391;&#65292;&#12486;&#12473;&#12488;(&#36317;&#38626;&#65292;&#21253;&#21547;)&#38306;&#25968;&#12391;&#12399;&#65292;&#23569;&#12394;&#12367;&#12392;&#12418;1&#22238;&#65292;&#36890;&#24120;&#12399;N(N&#12399;&#65292;&#12418;&#12358;&#19968;&#26041;&#12398;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#12496;&#12540;&#12486;&#12483;&#12463;&#25968;)&#22238;&#65292;&#12496;&#12540;&#12486;&#12483;&#12463;&#12434;&#27178;&#26029;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12383;&#12417;&#12391;&#12377;&#65294;
					
					</p><p>
					GEOMETRY&#12391;&#12399;&#65292;&#22823;&#12365;&#12394;&#12509;&#12522;&#12468;&#12531;&#12434;&#25345;&#12387;&#12390;&#12356;&#12427;&#12364;&#23567;&#12373;&#12394;&#33521;&#12425;&#12398;&#12463;&#12456;&#12522;&#12434;&#23455;&#34892;&#12377;&#12427;&#26178;&#65292;
					&#12472;&#12458;&#12513;&#12488;&#12522;&#12487;&#12540;&#12479;&#24773;&#22577;&#12434;&#23567;&#29255;&#12395;&#12300;&#38750;&#27491;&#24120;&#21270;&#12301;&#12375;&#12414;&#12377;&#65294;&#12371;&#12428;&#12395;&#12424;&#12426;&#65292;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#21177;&#26524;&#30340;&#12395;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#19968;&#37096;&#12434;&#21839;&#12356;&#21512;&#12431;&#12379;&#12427;&#12424;&#12358;&#12395;&#12394;&#12426;&#65292;&#12414;&#12383;&#12463;&#12456;&#12522;&#12364;&#24120;&#12395;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#20840;&#20307;&#12434;&#24341;&#12387;&#24373;&#12426;&#12371;&#12416;&#12424;&#12358;&#12394;&#12371;&#12392;&#12364;&#12394;&#12356;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;&#12520;&#12540;&#12525;&#12483;&#12497;&#20840;&#20307;&#12434;&#19968;&#12388;&#12395;*&#26684;&#32013;&#12391;&#12365;&#12427;*&#12363;&#12425;&#12392;&#12356;&#12387;&#12390;&#65292;&#12381;&#12358;&#12377;&#12409;&#12365;&#12384;&#12392;&#12356;&#12358;&#12431;&#12369;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
					
					</p></td></tr></tbody></table></div></div></div><div class="sect1" title="4.3. OpenGIS&#27161;&#28310;&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id286813669"></a>4.3. 
	OpenGIS&#27161;&#28310;&#12434;&#20351;&#12358;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#spatial_ref_sys">4.3.1. 
	  SPATIAL_REF_SYS&#12486;&#12540;&#12502;&#12523;&#12392;&#31354;&#38291;&#21442;&#29031;&#31995;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286814041">4.3.2. 
	  GEOMETRY_COLUMNS&#12486;&#12540;&#12502;&#12523;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#Create_Spatial_Table">4.3.3. 
	  &#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#Manual_Register_Spatial_Column">4.3.4. 
		&#25163;&#21205;&#12391;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;
		
		</a></span></dt><dt><span class="sect2"><a href="ch04.html#OGC_Validity">4.3.5. 
	  &#12472;&#12458;&#12513;&#12488;&#12522;&#12398;OpenGIS&#28310;&#25312;&#12434;&#30906;&#23455;&#12395;&#12377;&#12427;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#DE-9IM">4.3.6. 
		Dimensionally Extended 9 Intersection Model (DE-9IM)
		
		</a></span></dt></dl></div><p>
	OpenGIS&#12398;&#12300;SQL&#29992;&#12471;&#12531;&#12503;&#12523;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#20181;&#27096;&#12301;&#12391;&#12399;&#65292;&#27161;&#28310;GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#22411;&#12392;&#12371;&#12428;&#12425;&#12434;&#25805;&#20316;&#12377;&#12427;&#12383;&#12417;&#12395;&#24517;&#35201;&#12394;&#38306;&#25968;&#65292;&#12513;&#12479;&#12487;&#12540;&#12479;&#12486;&#12540;&#12502;&#12523;&#12398;&#12475;&#12483;&#12488;&#12364;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#65294;&#12513;&#12479;&#12487;&#12540;&#12479;&#12364;&#19968;&#36011;&#24615;&#12434;&#32173;&#25345;&#12375;&#12390;&#12356;&#12427;&#12371;&#12392;&#12434;&#20445;&#35388;&#12377;&#12427;&#12383;&#12417;&#12395;&#65292;&#31354;&#38291;&#12459;&#12521;&#12512;&#12398;&#29983;&#25104;&#65292;&#28040;&#21435;&#12392;&#12356;&#12387;&#12383;&#25805;&#20316;&#12399;OpenGIS&#12391;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12427;&#31354;&#38291;&#12503;&#12525;&#12471;&#12540;&#12472;&#12515;&#12434;&#36890;&#12375;&#12390;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#65294;
	
	</p><p>
	OpenGIS&#12513;&#12479;&#12487;&#12540;&#12479;&#12486;&#12540;&#12502;&#12523;&#12399;&#20108;&#12388;&#12354;&#12426;&#12414;&#12377;&#65294;<code class="varname">SPATIAL_REF_SYS</code>&#12392;<code class="varname">GEOMETRY_COLUMNS</code>&#12391;&#12377;&#65294;<code class="varname">SPATIAL_REF_SYS</code>&#12486;&#12540;&#12502;&#12523;&#12399;&#31354;&#38291;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12391;&#29992;&#12356;&#12425;&#12428;&#12427;&#24231;&#27161;&#31995;&#12398;&#65292;&#25968;&#23383;&#12395;&#12424;&#12427;ID&#12392;&#25991;&#23383;&#12395;&#12424;&#12427;&#35500;&#26126;&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;
	
	</p><div class="sect2" title="4.3.1. SPATIAL_REF_SYS&#12486;&#12540;&#12502;&#12523;&#12392;&#31354;&#38291;&#21442;&#29031;&#31995;"><div class="titlepage"><div><div><h3 class="title"><a name="spatial_ref_sys"></a>4.3.1. 
	  SPATIAL_REF_SYS&#12486;&#12540;&#12502;&#12523;&#12392;&#31354;&#38291;&#21442;&#29031;&#31995;
	  
	  </h3></div></div></div><p>
	  spatial_ref_sys&#12486;&#12540;&#12502;&#12523;&#12399;&#65292;PostGIS&#12395;&#21547;&#12414;&#12428;&#12427;&#12418;&#12398;&#12391;&#65292;3000&#20197;&#19978;&#12398;<a class="ulink" href="http://www.sharpgis.net/post/2007/05/Spatial-references2c-coordinate-systems2c-projections2c-datums2c-ellipsoids-e28093-confusing.aspx" target="_top">&#31354;&#38291;&#21442;&#29031;&#31995;</a>&#12434;&#25345;&#12388;&#65292;OGC&#28310;&#25312;&#12398;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12486;&#12540;&#12502;&#12523;&#12391;&#65292;&#12373;&#12425;&#12395;&#35328;&#12358;&#12392;&#65292;&#31354;&#38291;&#21442;&#29031;&#31995;&#38291;&#12398;&#22793;&#25563;&#12420;&#25237;&#24433;&#22793;&#25563;&#12395;&#20351;&#12431;&#12428;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  PostGIS&#12398;spatial_ref_sys&#12486;&#12540;&#12502;&#12523;&#12395;&#12399;&#65292;proj&#12521;&#12452;&#12502;&#12521;&#12522;&#12391;&#20351;&#12431;&#12428;&#12427;3000&#20197;&#19978;&#12398;&#19968;&#33324;&#12395;&#20351;&#12431;&#12428;&#12427;&#31354;&#38291;&#21442;&#29031;&#31995;&#23450;&#32681;&#12364;&#12354;&#12426;&#12414;&#12377;&#12364;&#65292;&#20840;&#12390;&#12434;&#25345;&#12387;&#12390;&#12356;&#12427;&#12431;&#12369;&#12391;&#12399;&#12394;&#12367;&#65292;proj4&#12398;&#27083;&#31689;&#12395;&#24931;&#12428;&#12390;&#12356;&#12427;&#12394;&#12425;&#12459;&#12473;&#12479;&#12512;&#25237;&#24433;&#12434;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;&#12411;&#12392;&#12435;&#12393;&#12398;&#31354;&#38291;&#21442;&#29031;&#31995;&#12399;&#22320;&#22495;&#38480;&#23450;&#12398;&#12418;&#12398;&#12391;&#65292;&#24819;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#31684;&#22258;&#12398;&#22806;&#12391;&#20351;&#12358;&#12392;&#24847;&#21619;&#12364;&#28961;&#12356;&#12371;&#12392;&#12395;&#12372;&#30041;&#24847;&#12367;&#12384;&#12373;&#12356;&#65294;
	  
	  </p><p>
	  PostGIS&#12398;&#12467;&#12450;&#12475;&#12483;&#12488;&#12395;&#20837;&#12387;&#12390;&#12356;&#12394;&#12356;&#31354;&#38291;&#21442;&#29031;&#31995;&#12434;&#25506;&#12377;&#12383;&#12417;&#12398;&#32032;&#26228;&#12425;&#12375;&#12356;&#36039;&#26009;&#12364; <a class="ulink" href="http://spatialreference.org/" target="_top">http://spatialreference.org/</a> &#12395;&#12354;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#12424;&#12367;&#20849;&#36890;&#30340;&#12395;&#20351;&#12431;&#12428;&#12427;&#31354;&#38291;&#21442;&#29031;&#31995;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  <a class="ulink" href="http://spatialreference.org/ref/epsg/4326/" target="_top">4326 - WGS 84 &#32076;&#24230;&#32239;&#24230;</a>,
	  <a class="ulink" href="http://spatialreference.org/ref/epsg/4269/" target="_top">4269 - NAD 83 &#32076;&#24230;&#32239;&#24230;</a>,
	  <a class="ulink" href="http://spatialreference.org/ref/epsg/3395/" target="_top">3395 - WGS 84 &#12513;&#12523;&#12459;&#12488;&#12523;&#22259;&#27861;</a>,
	  <a class="ulink" href="http://spatialreference.org/ref/epsg/2163/" target="_top">2163 - &#31859;&#22269;&#12490;&#12471;&#12519;&#12490;&#12523;&#12450;&#12488;&#12521;&#12473;&#27491;&#31309;&#22259;&#27861;</a>,
	  NAD83, WGS84 UTM &#12398;&#31354;&#38291;&#21442;&#29031;&#31995; - UTM&#12478;&#12540;&#12531;&#12399;&#35336;&#28204;&#12395;&#26368;&#12418;&#29702;&#24819;&#30340;&#12394;&#12418;&#12398;&#12398;&#12402;&#12392;&#12388;&#12391;&#12377;&#12364;6&#24230;(&#35379;&#27880;: &#32076;&#24230;&#12434;&#25351;&#12375;&#12414;&#12377;)&#12398;&#38936;&#22495;&#12375;&#12363;&#12459;&#12496;&#12540;&#12375;&#12414;&#12379;&#12435;&#65294;
	  
	</p><p>
	&#12373;&#12414;&#12374;&#12414;&#12394;&#31859;&#22269;&#12398;&#24030;&#12398;&#24179;&#38754;&#31354;&#38291;&#21442;&#29031;&#31995;(&#12513;&#12540;&#12488;&#12523;&#12414;&#12383;&#12399;&#12501;&#12451;&#12540;&#12488;&#21336;&#20301;) - &#36890;&#24120;&#12399;&#24030;&#12372;&#12392;&#12395;&#19968;&#12388;&#12363;&#20108;&#12388;&#12354;&#12426;&#12414;&#12377;&#65294;&#12513;&#12540;&#12488;&#12523;&#21336;&#20301;&#12398;&#12418;&#12398;&#12398;&#12411;&#12392;&#12435;&#12393;&#12364;PostGIS&#12398;&#12467;&#12450;&#12475;&#12483;&#12488;&#12395;&#20837;&#12387;&#12390;&#12356;&#12414;&#12377;&#12364;&#65292;&#22810;&#25968;&#12398;&#12501;&#12451;&#12540;&#12488;&#21336;&#20301;&#12398;&#12418;&#12398;&#12420;ESRI&#12364;&#20316;&#12387;&#12383;&#12418;&#12398;&#12395;&#12388;&#12356;&#12390;&#12399; <a class="ulink" href="http://spatialreference.org" target="_top">spatialreference.org</a> &#12363;&#12425;&#21462;&#24471;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;
	
	</p><p>
	&#23550;&#35937;&#38936;&#22495;&#12364;&#12393;&#12398;UTM&#12478;&#12540;&#12531;&#12395;&#12394;&#12427;&#12363;&#12434;&#27770;&#12417;&#12427;&#12395;&#12399;&#65292;
	<a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiplpgsqlfunctionsDistance" target="_top">utmzone PostGIS plpgsql helper function</a> &#12434;&#21442;&#29031;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;
	
	</p><p>
	  <code class="varname">SPATIAL_REF_SYS</code>&#12486;&#12540;&#12502;&#12523;&#23450;&#32681;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">CREATE TABLE spatial_ref_sys (
  srid       INTEGER NOT NULL PRIMARY KEY,
  auth_name  VARCHAR(256),
  auth_srid  INTEGER,
  srtext     VARCHAR(2048),
  proj4text  VARCHAR(2048)
)</pre><p>
	  <code class="varname">SPATIAL_REF_SYS</code>&#12398;&#12459;&#12521;&#12512;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><div class="variablelist"><dl><dt><span class="term"><a class="ulink" href="http://en.wikipedia.org/wiki/SRID" target="_top">SRID</a></span></dt><dd><p>
			&#19968;&#24847;&#12395;&#23450;&#12417;&#12425;&#12428;&#12383;&#25972;&#25968;&#20516;&#12391;&#65292;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12391;&#31354;&#38291;&#21442;&#29031;&#31995;(SRS)&#12434;&#35672;&#21029;&#12377;&#12427;&#12418;&#12398;&#12391;&#12377;&#65294;
			
			</p></dd><dt><span class="term">AUTH_NAME</span></dt><dd><p>
			&#12381;&#12398;&#21442;&#29031;&#31995;&#12398;&#24341;&#29992;&#20803;&#12391;&#12354;&#12427;&#27161;&#28310;&#12398;&#21517;&#21069;&#12391;&#12377;&#65294;&#12383;&#12392;&#12360;&#12400;&#12300;EPSG&#12301;&#12399;&#22949;&#24403;&#12394;<code class="varname">AUTH_NAME</code>&#12391;&#12377;&#65294;
			
			</p></dd><dt><span class="term">AUTH_SRID</span></dt><dd><p>
			<code class="varname">AUTH_NAME</code>&#12391;&#24341;&#29992;&#12373;&#12428;&#12427;&#22243;&#20307;&#12395;&#12424;&#12387;&#12390;&#23450;&#32681;&#12373;&#12428;&#12383;&#31354;&#38291;&#21442;&#29031;&#31995;&#12398;ID&#12391;&#12377;&#65294;EPSG&#12398;&#22580;&#21512;&#65292;EPSG&#25237;&#24433;&#12467;&#12540;&#12489;&#12364;&#20837;&#12426;&#12414;&#12377;&#65294;
			
			</p></dd><dt><span class="term">SRTEXT</span></dt><dd><p>
			&#31354;&#38291;&#21442;&#29031;&#31995;&#12398;Well-Known&#12486;&#12461;&#12473;&#12488;&#34920;&#29694;&#12391;&#12377;&#65294;&#12383;&#12392;&#12360;&#12400;&#65292;WKT SRS&#12398;&#34920;&#29694;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
			
			</p><pre class="programlisting">PROJCS["NAD83 / UTM Zone 10N",
  GEOGCS["NAD83",
	DATUM["North_American_Datum_1983",
	  SPHEROID["GRS 1980",6378137,298.257222101]
	],
	PRIMEM["Greenwich",0],
	UNIT["degree",0.0174532925199433]
  ],
  PROJECTION["Transverse_Mercator"],
  PARAMETER["latitude_of_origin",0],
  PARAMETER["central_meridian",-123],
  PARAMETER["scale_factor",0.9996],
  PARAMETER["false_easting",500000],
  PARAMETER["false_northing",0],
  UNIT["metre",1]
]</pre><p>
			EPSG&#25237;&#24433;&#12467;&#12540;&#12489;&#12392;&#23550;&#24540;&#12377;&#12427;WKT&#34920;&#29694;&#12398;&#19968;&#35239;&#12395;&#12388;&#12356;&#12390;&#12399;&#65292;<a class="ulink" href="http://www.opengeospatial.org/" target="_top">http://www.opengeospatial.org/</a>&#12434;&#12372;&#35239;&#19979;&#12373;&#12356;&#65294; WKT&#12398;&#19968;&#33324;&#30340;&#12394;&#35696;&#35542;&#12395;&#12388;&#12356;&#12390;&#12399;&#65292;OpenGIS&#12398;&#12300;&#24231;&#27161;&#22793;&#25563;&#12469;&#12540;&#12499;&#12473;&#23455;&#35013;&#20181;&#27096;&#12301; <a class="ulink" href="http://www.opengeospatial.org/standards" target="_top">http://www.opengeospatial.org/standards</a> &#12434;&#12372;&#35239;&#19979;&#12373;&#12356;&#65294;&#27431;&#24030;&#30707;&#27833;&#35519;&#26619;&#12464;&#12523;&#12540;&#12503;(European Petroleum Survey Group, EPSG)&#12392; EPSG&#31354;&#38291;&#21442;&#29031;&#31995;&#12398;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#38306;&#12377;&#12427;&#24773;&#22577;&#12399;&#65292;<a class="ulink" href="http://www.epsg.org/" target="_top">http://www.epsg.org</a> &#12434;&#12372;&#35239;&#19979;&#12373;&#12356;&#65294;
			
			</p></dd><dt><span class="term">PROJ4TEXT</span></dt><dd><p>
			PostGIS&#12399;&#24231;&#27161;&#22793;&#25563;&#27231;&#33021;&#12434;&#25552;&#20379;&#12377;&#12427;&#12383;&#12417;&#12395;Proj4&#12521;&#12452;&#12502;&#12521;&#12522;&#12434;&#29992;&#12356;&#12390;&#12356;&#12414;&#12377;&#65294; <code class="varname">PROJ4TEXT</code>&#12459;&#12521;&#12512;&#12395;&#12399;&#65292;&#29305;&#23450;&#12398;SRID&#12434;&#31034;&#12377;Proj4&#24231;&#27161;&#23450;&#32681;&#25991;&#23383;&#21015;&#12364;&#20837;&#12426;&#12414;&#12377;&#65294;&#12383;&#12392;&#12360;&#12400;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
			
			</p><pre class="programlisting">+proj=utm +zone=10 +ellps=clrk66 +datum=NAD27 +units=m</pre><p>
			&#35443;&#32048;&#24773;&#22577;&#12395;&#12388;&#12356;&#12390;&#12399;&#65292;Proj4&#12454;&#12455;&#12502;&#12469;&#12452;&#12488;<a class="ulink" href="http://trac.osgeo.org/proj/" target="_top">http://trac.osgeo.org/proj/</a> &#12434;&#12372;&#35239;&#19979;&#12373;&#12356;&#65294;<code class="filename">spatial_ref_sys.sql</code>&#12399;&#65292;&#20840;&#12390;&#12398;EPSG&#25237;&#24433;&#27861;&#12398;&#12383;&#12417;&#12398;<code class="varname">SRTEXT</code>&#12392;<code class="varname">PROJ4TEXT</code>&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;
			
			</p></dd></dl></div></div><div class="sect2" title="4.3.2. GEOMETRY_COLUMNS&#12486;&#12540;&#12502;&#12523;"><div class="titlepage"><div><div><h3 class="title"><a name="id286814041"></a>4.3.2. 
	  GEOMETRY_COLUMNS&#12486;&#12540;&#12502;&#12523;
	  
	  </h3></div></div></div><p>
	  <code class="varname">GEOMETRY_COLUMNS</code>&#12486;&#12540;&#12502;&#12523;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">CREATE TABLE geometry_columns (
  f_table_catalog    VARRCHAR(256) NOT NULL,
  f_table_schema     VARCHAR(256) NOT NULL,
  f_table_nam        VARCHAR(256) NOT NULL,
  f_geometry_column  VARCHAR(256) NOT NULL,
  coord_dimension    INTEGER NOT NULL,
  srid               INTEGER NOT NULL,
  type               VARCHAR(30) NOT NULL
)</pre><p>
	  &#12459;&#12521;&#12512;&#12395;&#12388;&#12356;&#12390;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><div class="variablelist"><dl><dt><span class="term">F_TABLE_CATALOG, F_TABLE_SCHEMA, F_TABLE_NAME</span></dt><dd><p>
			&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;&#25345;&#12388;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12486;&#12540;&#12502;&#12523;&#12398;&#23436;&#20840;&#20462;&#39166;&#21517;&#65294;"catalog"&#12362;&#12424;&#12403;"schema"&#12398;&#35486;&#12399;Oracle&#39080;&#12391;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;"catalog"&#12395;&#39006;&#20284;&#12377;&#12427;&#12418;&#12398;&#12399;PostgreSQL&#12395;&#12394;&#12367;&#65292;&#12371;&#12398;&#12459;&#12521;&#12512;&#12399;&#31354;&#30333;&#12395;&#12373;&#12428;&#12414;&#12377;&#65294;"schema"&#12395;&#12388;&#12356;&#12390;&#12399;PostgreSQL&#12473;&#12461;&#12540;&#12510;&#21517;&#12364;&#20351;&#12431;&#12428;&#12390;&#12356;&#12414;&#12377;(<code class="varname">public</code> &#12364;&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12377;)&#65294; 
			
			</p></dd><dt><span class="term">F_GEOMETRY_COLUMN</span></dt><dd><p>
			&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12486;&#12540;&#12502;&#12523;&#20869;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12398;&#21517;&#21069;&#65294;
			
			</p></dd><dt><span class="term">COORD_DIMENSION</span></dt><dd><p>
			&#12381;&#12398;&#12459;&#12521;&#12512;&#12398;&#31354;&#38291;&#12398;&#27425;&#20803;(2, 3 &#12414;&#12383;&#12399; 4)&#65294;
			
			</p></dd><dt><span class="term">SRID</span></dt><dd><p>
			&#12371;&#12398;&#12486;&#12540;&#12502;&#12523;&#12398;&#24231;&#27161;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#12383;&#12417;&#12395;&#20351;&#12431;&#12428;&#12427;&#31354;&#38291;&#21442;&#29031;&#31995;&#12398;ID&#65294;<code class="varname">SPATIAL_REF_SYS</code>&#12408;&#12398;&#22806;&#37096;&#12461;&#12540;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;
			
			</p></dd><dt><span class="term">TYPE</span></dt><dd><p>
			&#31354;&#38291;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#22411;&#65294;&#31354;&#38291;&#12459;&#12521;&#12512;&#12434;&#21336;&#19968;&#22411;&#12395;&#21046;&#38480;&#12377;&#12427;&#12395;&#12399;&#65292;POINT, LINESTRING, POLYGON,&#12288;MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION &#12398;&#12358;&#12385;&#12398;&#12356;&#12378;&#12428;&#12363;&#12434;&#65292;&#12414;&#12383;&#65292;XYM&#12391;&#20351;&#12358;&#22580;&#21512;&#12395;&#12399; LINESTRINGM, POLYGONM, MULTIPOINTM, MULTILINESTRINGM, MULTIPOLYGONM, GEOMETRYCOLLECTIONM &#12398;&#12358;&#12385;&#12398;&#12356;&#12378;&#12428;&#12363;&#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#35079;&#25968;&#12398;&#22411;&#12364;&#28151;&#21512;&#12377;&#12427;&#12467;&#12524;&#12463;&#12471;&#12519;&#12531;&#12398;&#22580;&#21512;&#12399; "GEOMETRY" &#12434;&#22411;&#12392;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
			
			</p><div class="note" title="&#27880;&#24847;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
			  &#12371;&#12398;&#23646;&#24615;&#12399;(&#12362;&#12381;&#12425;&#12367;)OpenGIS&#20181;&#27096;&#12398;&#19968;&#37096;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12379;&#12435;&#12364;&#65292;&#22411;&#12398;&#21516;&#19968;&#24615;&#12434;&#20445;&#35388;&#12377;&#12427;&#12383;&#12417;&#12395;&#24517;&#35201;&#12391;&#12377;&#65294;
			  
			  </p></td></tr></table></div></dd></dl></div></div><div class="sect2" title="4.3.3. &#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;"><div class="titlepage"><div><div><h3 class="title"><a name="Create_Spatial_Table"></a>4.3.3. 
	  &#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;
	  
	  </h3></div></div></div><p>
	  &#31354;&#38291;&#12487;&#12540;&#12479;&#12434;&#25345;&#12388;&#12486;&#12540;&#12502;&#12523;&#12434;&#29983;&#25104;&#12377;&#12427;&#12395;&#12399;&#65292;&#27425;&#12398;&#36890;&#12426;&#20108;&#27573;&#38542;&#12391;&#34892;&#12356;&#12414;&#12377;&#65294;
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  &#36890;&#24120;&#12398;&#38750;&#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#29983;&#25104;&#12375;&#12414;&#12377;&#65294;
		  
		  </p><p>
		  &#20363;: <span class="command"><strong>CREATE TABLE ROADS_GEOM ( ID int4, NAME varchar(25) )</strong></span>
		  
		  </p></li><li class="listitem"><p>
		  OpenGIS&#12398; "AddGeometryColumn"&#38306;&#25968;&#12395;&#12424;&#12387;&#12390;&#31354;&#38291;&#12459;&#12521;&#12512;&#12434;&#12486;&#12540;&#12502;&#12523;&#12395;&#36861;&#21152;&#12375;&#12414;&#12377;&#65294;
		  
		  </p><p>
		  &#25991;&#27861;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
</p><pre class="programlisting">AddGeometryColumn(
  &lt;schema_name&gt;,
  &lt;table_name&gt;,
  &lt;column_name&gt;,
  &lt;srid&gt;,
  &lt;type&gt;,
  &lt;dimension&gt;
)</pre><p> &#29694;&#22312;&#12398;&#12473;&#12461;&#12540;&#12510;&#12434;&#20351;&#12358;&#22580;&#21512;&#12395;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#65294;
</p><pre class="programlisting">AddGeometryColumn(
  &lt;table_name&gt;,
  &lt;column_name&gt;,
  &lt;srid&gt;,
  &lt;type&gt;,
  &lt;dimension&gt;
)</pre><p>
		  
		  </p><p>
		  &#20363;1: <span class="command"><strong>SELECT AddGeometryColumn('public',
		  'roads_geom', 'geom', 423, 'LINESTRING', 2)</strong></span>
		  
		  </p><p>
		  &#20363;2: <span class="command"><strong>SELECT AddGeometryColumn( 'roads_geom',
		  'geom', 423, 'LINESTRING', 2)</strong></span>
		  
		  </p></li></ul></div><p>
	  &#27425;&#12399;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#25104;&#12375;&#12390;&#31354;&#38291;&#12459;&#12521;&#12512;&#12434;&#20316;&#12427;&#20363;&#12391;&#12377;(128&#12392;&#12356;&#12358;SRID&#12364;&#12354;&#12427;&#12392;&#20206;&#23450;&#12375;&#12414;&#12377;)&#65294;
	  
	  </p><pre class="programlisting">CREATE TABLE parks (
  park_id    INTEGER,
  park_name  VARCHAR,
  park_date  DATE,
  park_type  VARCHAR
);
SELECT AddGeometryColumn('parks', 'park_geom', 128, 'MULTIPOLYGON', 2 );</pre><p>
	  &#12418;&#12358;&#12402;&#12392;&#12388;&#65292;&#12472;&#12455;&#12493;&#12522;&#12483;&#12463;&#12394;"geometry"&#22411;&#12392;SRID&#19981;&#26126;&#12434;&#31034;&#12377;-1&#12434;&#20351;&#12387;&#12383;&#20363;&#12434;&#25369;&#12370;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">CREATE TABLE roads (
  road_id INTEGER,
  road_name VARCHAR
);
SELECT AddGeometryColumn( 'roads', 'roads_geom', -1, 'GEOMETRY', 3 );</pre></div><div class="sect2" title="4.3.4. &#25163;&#21205;&#12391;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;"><div class="titlepage"><div><div><h3 class="title"><a name="Manual_Register_Spatial_Column"></a>4.3.4. 
		&#25163;&#21205;&#12391;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;
		
		</h3></div></div></div><p>
		AddGeometryColumn()&#12450;&#12503;&#12525;&#12540;&#12481;&#12399;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;&#20316;&#25104;&#12375;&#12390;&#65292;&#26032;&#12375;&#12356;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12486;&#12540;&#12502;&#12523;&#12395;&#30331;&#37682;&#12375;&#12414;&#12377;&#65294;
		&#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12391;geometry_columns&#12434;&#20351;&#12358;&#22580;&#21512;&#12395;&#12399;&#65292;&#12463;&#12456;&#12522;&#12395;&#24517;&#35201;&#12394;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;&#20840;&#12390;&#12371;&#12398;&#12486;&#12540;&#12502;&#12523;&#12395;&#30331;&#37682;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
		&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12375;&#12383;&#12356;&#12369;&#12428;&#12393;&#12418;AddGeometryColumn&#12364;&#20351;&#12360;&#12394;&#12356;&#12392;&#12356;&#12358;&#12465;&#12540;&#12473;&#12392;&#12375;&#12390;&#12399;&#65292;
		SQL&#12499;&#12517;&#12540;&#12391;&#12354;&#12427;&#22580;&#21512;&#12392;&#65292;&#24040;&#22823;&#12394;&#12487;&#12540;&#12479;&#25407;&#20837;&#12398;&#22580;&#21512;&#12391;&#12377;&#65294;
		&#12371;&#12428;&#12425;&#12398;&#22580;&#21512;&#12399;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12486;&#12540;&#12502;&#12523;&#12395;&#25163;&#21205;&#12391;&#30331;&#37682;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;&#27425;&#12395;&#31777;&#21336;&#12394;&#30331;&#37682;&#12473;&#12463;&#12522;&#12503;&#12488;&#12434;&#31034;&#12375;&#12414;&#12377;&#65294;
		
		
		</p><pre class="programlisting">
--&#27425;&#12398;&#12424;&#12358;&#12395;&#20316;&#12387;&#12383;&#12499;&#12517;&#12540;&#12364;&#12354;&#12427;&#12392;&#12375;&#12414;&#12375;&#12423;&#12358;
CREATE VIEW  public.vwmytablemercator AS
	SELECT gid, ST_Transform(the_geom,3395) As the_geom, f_name
	FROM public.mytable;

--&#12371;&#12398;&#12499;&#12517;&#12540;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;&#12395;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#65294;
INSERT INTO geometry_columns(f_table_catalog, f_table_schema, f_table_name, f_geometry_column, coord_dimension, srid, "type")
SELECT '', 'public', 'vwmytablemercator', 'the_geom', ST_CoordDim(the_geom), ST_SRID(the_geom), GeometryType(the_geom)
FROM public.vwmytablemercator LIMIT 1;


		</pre><pre class="programlisting">
--&#24040;&#22823;&#12394;&#12487;&#12540;&#12479;&#25407;&#20837;&#12395;&#12424;&#12387;&#12390;&#27966;&#29983;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12387;&#12383;&#12392;&#12375;&#12414;&#12375;&#12423;&#12358;
SELECT poi.gid, poi.the_geom, citybounds.city_name
INTO myschema.myspecialpois
FROM poi INNER JOIN citybounds ON ST_Intersects(citybounds.the_geom, poi.the_geom);

--&#26032;&#12375;&#12356;&#12487;&#12540;&#12502;&#12523;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20316;&#12426;&#12414;&#12377;
CREATE INDEX idx_myschema_myspecialpois_geom_gist
  ON myschema.myspecialpois USING gist(the_geom);

--&#25163;&#21205;&#12391;&#12371;&#12398;&#26032;&#12375;&#12356;&#12486;&#12540;&#12502;&#12523;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;geometry_columns&#12395;&#30331;&#37682;&#12377;&#12427;&#12395;&#12399;&#65292;&#12499;&#12517;&#12540;&#12398;&#26178;&#12392;&#21516;&#12376;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#65294;
INSERT INTO geometry_columns(f_table_catalog, f_table_schema, f_table_name, f_geometry_column, coord_dimension, srid, "type")
SELECT '', 'myschema', 'myspecialpois', 'the_geom', ST_CoordDim(the_geom), ST_SRID(the_geom), GeometryType(the_geom)
FROM public.myschema.myspecialpois LIMIT 1;



		</pre></div><div class="sect2" title="4.3.5. &#12472;&#12458;&#12513;&#12488;&#12522;&#12398;OpenGIS&#28310;&#25312;&#12434;&#30906;&#23455;&#12395;&#12377;&#12427;"><div class="titlepage"><div><div><h3 class="title"><a name="OGC_Validity"></a>4.3.5. 
	  &#12472;&#12458;&#12513;&#12488;&#12522;&#12398;OpenGIS&#28310;&#25312;&#12434;&#30906;&#23455;&#12395;&#12377;&#12427;
	  
	  </h3></div></div></div><p>
	  PostGIS&#12399;Open Geospatial Consortium (OGC)&#12398;OpenGIS&#20351;&#29992;&#12395;&#28310;&#25312;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
	  &#12371;&#12398;&#12424;&#12358;&#12395;&#65292;&#22810;&#12367;&#12398;PostGIS&#12513;&#12477;&#12483;&#12489;&#12399;
	  &#25805;&#20316;&#12377;&#12427;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#21336;&#32020;&#12363;&#12388;&#22949;&#24403;&#12391;&#12354;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;(&#27491;&#30906;&#12395;&#35328;&#12358;&#12392;&#12381;&#12358;&#36942;&#31243;&#12375;&#12414;&#12377;)&#65294;
	  &#12383;&#12392;&#12360;&#12400;&#65292;&#12509;&#12522;&#12468;&#12531;&#12398;&#22806;&#12395;&#31348;&#12364;&#12354;&#12427;&#12424;&#12358;&#12394;&#12418;&#12398;&#12398;&#38754;&#31309;&#12434;&#35336;&#31639;&#12375;&#12383;&#12426;&#65292;&#21336;&#32020;&#12391;&#12394;&#12356;&#22659;&#30028;&#32218;&#12434;&#25345;&#12388;&#12509;&#12522;&#12468;&#12531;&#12434;&#20316;&#12387;&#12383;&#12426;&#12377;&#12427;&#12398;&#12399;&#65292;&#24847;&#21619;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;	  
	  
	  </p><p>
	  OGS&#20181;&#27096;&#12395;&#27839;&#12358;&#12392;&#65292;<span class="emphasis"><em>&#21336;&#32020;&#12394;</em></span>&#12472;&#12458;&#12513;&#12488;&#12522;&#12392;&#12399;&#65292;&#33258;&#24049;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12420;&#33258;&#24049;&#25509;&#35302;&#12364;&#12354;&#12427;&#12424;&#12358;&#12394;&#65292;&#30064;&#24120;&#12394;&#24190;&#20309;&#28857;&#12434;&#25345;&#12383;&#12394;&#12356;&#12371;&#12392;&#12391;&#12377;&#65294;&#20027;&#12395;0&#27425;&#20803;&#12414;&#12383;&#12399;1&#27425;&#20803;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;(<code class="varname">[MULTI]POINT, [MULTI]LINESTRING</code>)&#12395;&#36969;&#29992;&#12375;&#12414;&#12377;&#65294;
	  &#20182;&#26041;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#22949;&#24403;&#24615;&#12399;&#65292;&#20027;&#12395;2&#27425;&#20803;&#12472;&#12458;&#12513;&#12488;&#12522;(<code class="varname">[MULTI]POLYGON)</code>)&#12395;&#36969;&#29992;&#12375;&#65292;&#22949;&#24403;&#12394;&#12509;&#12522;&#12468;&#12531;&#12434;&#29305;&#24500;&#12389;&#12369;&#12427;&#20301;&#32622;&#25351;&#23450;&#23376;&#12398;&#38598;&#21512;&#12434;&#23450;&#32681;&#12375;&#12414;&#12377;&#65294;&#20491;&#12293;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12463;&#12521;&#12473;&#12395;&#12399;&#65292;&#21336;&#32020;&#24615;&#12392;&#22949;&#24403;&#24615;&#12434;&#12373;&#12425;&#12395;&#35443;&#32048;&#12395;&#36848;&#12409;&#12427;&#29305;&#23450;&#12398;&#26465;&#20214;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  <code class="varname">POINT</code>&#12399;0&#27425;&#20803;&#12472;&#12458;&#12513;&#12488;&#12522;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12392;&#12375;&#12390;&#24120;&#12395;<span class="emphasis"><em>&#21336;&#32020;</em></span>&#12391;&#12377;&#65294;
	  
	  </p><p>
	  <code class="varname">MULTIPOINT</code>&#12399;&#65292;&#20108;&#12388;&#12398;&#24231;&#27161;&#20516;(<code class="varname">POINT</code>)&#12364;&#21516;&#12376;&#12391;&#12394;&#12356;&#12394;&#12425;<span class="emphasis"><em>&#21336;&#32020;</em></span>&#12391;&#12377;&#65294;
	  
	  </p><p>
	  <code class="varname">LINESTRING</code>&#12399;2&#24230;&#21516;&#12376;<code class="varname">POINT</code>&#12434;&#36890;&#12425;&#12394;&#12356;(&#32066;&#28857;&#12399;&#38500;&#12365;&#12414;&#12377;&#65294;&#12371;&#12398;&#22580;&#21512;&#12399;&#32218;&#22411;&#29872;&#12392;&#21628;&#12400;&#12428;&#65292;&#12373;&#12425;&#12395;&#38281;&#12376;&#12390;&#12356;&#12427;&#12392;&#24605;&#12431;&#12428;&#12414;&#12377;)&#12394;&#12425;<span class="emphasis"><em>&#21336;&#32020;</em></span>&#12391;&#12377;&#65294;
	  
	  </p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple01.png"><div class="caption"><p><span class="bold"><strong>(a)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple02.png"><div class="caption"><p><span class="bold"><strong>(b)</strong></span></p></div></div></div></td></tr><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple03.png"><div class="caption"><p><span class="bold"><strong>(c)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple04.png"><div class="caption"><p><span class="bold"><strong>(d)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p>
				<span class="bold"><strong>(a)</strong></span>&#12392;<span class="bold"><strong>(c)</strong></span>&#12399;&#21336;&#32020;&#12394;<code class="varname">LINESTRING</code>&#12391;&#65292;<span class="bold"><strong>(b)</strong></span>&#12392;<span class="bold"><strong>(d)</strong></span>&#12399;&#21336;&#32020;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
				
				</p></td></tr></tbody></table></div><p>
	  <code class="varname">MULTILINESTRING</code>&#12399;&#65292;
	  &#20840;&#12390;&#12398;&#35201;&#32032;&#12364;&#21336;&#32020;&#12391;&#65292;&#12363;&#12388;&#20219;&#24847;&#12398;2&#35201;&#32032;&#12398;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12364;&#35201;&#32032;&#12398;&#22659;&#30028;&#12391;&#12354;&#12427;<code class="varname">POINT</code>&#12391;&#12384;&#12369;&#30330;&#29983;&#12377;&#12427;&#22580;&#21512;&#12395;&#38480;&#12387;&#12390;&#65292;
	  <span class="emphasis"><em>&#21336;&#32020;</em></span>&#12391;&#12377;&#65294;
	  
	  </p><div class="informaltable"><table border="0"><colgroup><col><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple05.png"><div class="caption"><p><span class="bold"><strong>(e)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple06.png"><div class="caption"><p><span class="bold"><strong>(f)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple07.png"><div class="caption"><p><span class="bold"><strong>(g)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p>
				<span class="bold"><strong>(e)</strong></span>&#12392;<span class="bold"><strong>(f)</strong></span>&#12399;&#21336;&#32020;&#12394;<code class="varname">MULTILINESTRING</code>&#12391;&#65292;<span class="bold"><strong>(g)</strong></span>&#12399;&#21336;&#32020;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
				
				</p></td></tr></tbody></table></div><p>
	  &#23450;&#32681;&#12363;&#12425;<code class="varname">POLYGON</code>&#12399;&#24120;&#12395;<span class="emphasis"><em>&#21336;&#32020;</em></span>&#12391;&#12377;&#65294;
	  &#12496;&#12454;&#12531;&#12480;&#12522;&#20869;&#12398;&#29872;(&#22806;&#29872;&#12392;&#20869;&#29872;&#12363;&#12425;&#12394;&#12427;)&#12398;&#12358;&#12385;&#20108;&#12388;&#12364;&#12463;&#12525;&#12473;&#12375;&#12390;&#12356;&#12394;&#12356;&#12394;&#12425;<span class="emphasis"><em>&#22949;&#24403;</em></span>&#12391;&#12377;&#65294;
	  <code class="varname">POLYGON</code>&#12398;&#22659;&#30028;&#12399;&#65292;<code class="varname">POINT</code>&#12392;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12377;&#12427;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#12364;&#65292;&#25509;&#28857;&#12395;&#12375;&#12363;&#12394;&#12426;&#12414;&#12379;&#12435;(&#12377;&#12394;&#12431;&#12385;&#32218;&#19978;&#12395;&#12394;&#12356;)&#65294;
	  <code class="varname">POLYGON</code>&#12399;&#20999;&#12425;&#12428;&#12383;&#32218;&#12414;&#12383;&#12399;&#12473;&#12497;&#12452;&#12463;(&#35379;&#27880;: &#12509;&#12522;&#12468;&#12531;&#12363;&#12425;&#12300;&#12473;&#12497;&#12452;&#12463;&#12301;&#12398;&#12424;&#12358;&#12395;&#20986;&#12383;&#32218;)&#12434;&#12418;&#12383;&#12394;&#12367;&#12390;&#12418;&#33391;&#12367;&#65292;&#20869;&#29872;&#12399;&#22806;&#29872;&#12398;&#20013;&#12395;&#23436;&#20840;&#12395;&#21547;&#12414;&#12428;&#12390;&#12356;&#12394;&#12369;&#12428;&#12400;&#12394;&#12426;&#12414;&#12379;&#12435;&#65294;	  
	  
	  </p><div class="informaltable"><table border="0"><colgroup><col><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid01.png"><div class="caption"><p><span class="bold"><strong>(h)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid02.png"><div class="caption"><p><span class="bold"><strong>(i)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid03.png"><div class="caption"><p><span class="bold"><strong>(j)</strong></span></p></div></div></div></td></tr><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid04.png"><div class="caption"><p><span class="bold"><strong>(k)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid05.png"><div class="caption"><p><span class="bold"><strong>(l)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid06.png"><div class="caption"><p><span class="bold"><strong>(m)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p>
				<span class="bold"><strong>(h)</strong></span>&#12392;<span class="bold"><strong>(i)</strong></span>&#12399;&#22949;&#24403;&#12394;<code class="varname">POLYGON</code>&#12391;&#12377;&#65294;<span class="bold"><strong>(j-m)</strong></span>&#12399;&#21336;&#19968;&#12398;<code class="varname">POLYGON</code>&#12392;&#12375;&#12390;&#12399;&#34920;&#29694;&#12391;&#12365;&#12414;&#12379;&#12435;&#65294;<span class="bold"><strong>(j)</strong></span>&#12392;<span class="bold"><strong>(m)</strong></span>&#12399;&#22949;&#24403;&#12394;<code class="varname">MULTIPOLYGON</code>&#12392;&#12375;&#12390;&#34920;&#29694;&#12391;&#12365;&#12414;&#12379;&#12435;&#65294;
				
				</p></td></tr></tbody></table></div><p>
	  <code class="varname">MULTIPOLYGON</code>&#12399;&#65292;&#20840;&#12390;&#12398;&#35201;&#32032;&#12364;&#22949;&#24403;&#12391;&#65292;&#12509;&#12522;&#12468;&#12531;&#35201;&#32032;&#12398;&#12358;&#12385;&#20108;&#12388;&#12395;&#12388;&#12356;&#12390;&#20869;&#29872;&#12364;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12375;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#12398;&#12415;<span class="emphasis"><em>&#22949;&#24403;</em></span>&#12391;&#12377;&#65294;
	  &#12509;&#12522;&#12468;&#12531;&#35201;&#32032;&#12398;&#20219;&#24847;&#12398;&#20108;&#12388;&#12398;&#22659;&#30028;&#12364;&#25509;&#35302;&#12375;&#12390;&#12418;&#12424;&#12356;&#12391;&#12377;&#12364;&#65292;<code class="varname">POINT</code>&#12398;&#25968;&#12399;&#26377;&#38480;&#12391;&#12377;&#65294;
	  
	  </p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid07.png"><div class="caption"><p><span class="bold"><strong>(n)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid08.png"><div class="caption"><p><span class="bold"><strong>(o)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p>
				<span class="bold"><strong>(n)</strong></span>&#12392;<span class="bold"><strong>(o)</strong></span>&#12399;&#22949;&#24403;&#12394;<code class="varname">MULTIPOLYGON</code>&#12391;&#12377;&#65294;
				
				</p></td></tr></tbody></table></div><p>
	  GEOS&#12521;&#12452;&#12502;&#12521;&#12522;&#12395;&#23455;&#35013;&#12373;&#12428;&#12390;&#12356;&#12427;&#38306;&#25968;&#12398;&#12411;&#12392;&#12435;&#12393;&#12399;&#65292;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;OpenGIS Simple Feature Specification&#12391;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12427;&#12424;&#12358;&#12395;&#22949;&#24403;&#12391;&#12354;&#12427;&#12392;&#20206;&#23450;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#21336;&#32020;&#12391;&#12354;&#12427;&#12363;&#65292;&#12414;&#12383;&#22949;&#24403;&#12391;&#12354;&#12427;&#12363;&#65292;&#12398;&#12481;&#12455;&#12483;&#12463;&#12392;&#12375;&#12390;<a class="link" href="ST_IsSimple.html" title="ST_IsSimple">ST_IsSimple()</a>&#12392;<a class="link" href="ST_IsValid.html" title="ST_IsValid">ST_IsValid()</a>&#12364;&#20351;&#12360;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">-- &#19968;&#33324;&#30340;&#12395;&#65292;&#32218;&#22411;&#12398;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#22949;&#24403;&#24615;&#12398;&#12481;&#12455;&#12483;&#12463;&#12399;&#65292;
-- &#24120;&#12395;TRUE&#12434;&#36820;&#12377;&#12398;&#12391;&#24847;&#21619;&#12364;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
-- &#12375;&#12363;&#12375;&#65292;&#12371;&#12398;&#20363;&#12391;&#12399;&#65292;PostGIS&#12399;&#65292;&#32218;&#22411;&#12398;&#29872;(&#38283;&#22987;&#28857;&#12392;&#32066;&#20102;&#28857;&#12364;&#21516;&#12376;)&#12364;
-- &#20108;&#12388;&#20197;&#19979;&#12398;&#12496;&#12540;&#12486;&#12483;&#12463;&#12363;&#12425;&#12394;&#12427;&#22580;&#21512;&#12399;FALSE&#12434;&#36820;&#12377;&#12424;&#12358;&#12395;
-- OGC&#12398;IsValid&#12398;&#23450;&#32681;&#12434;&#25313;&#24373;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
gisdb=# SELECT
   ST_IsValid('LINESTRING(0 0, 1 1)'),
   ST_IsValid('LINESTRING(0 0, 0 0)');

 st_isvalid | st_isvalid
------------+-----------
      t     |     f</pre><p>
	  &#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399;&#65292;PostGIS&#12399;&#12472;&#12458;&#12513;&#12488;&#12522;&#20837;&#21147;&#12395;&#38306;&#12377;&#12427;&#12371;&#12398;&#22949;&#24403;&#24615;&#12481;&#12455;&#12483;&#12463;&#12434;&#36969;&#29992;&#12375;&#12414;&#12379;&#12435;&#65294;
	  &#35079;&#38609;&#12394;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#22949;&#24403;&#24615;&#12398;&#12481;&#12455;&#12483;&#12463;&#12399;CPU&#26178;&#38291;&#12434;&#22810;&#12367;&#24517;&#35201;&#12392;&#12377;&#12427;&#12383;&#12417;&#12391;&#12377;&#65294;
	  &#12487;&#12540;&#12479;&#12477;&#12540;&#12473;&#12364;&#20449;&#29992;&#12391;&#12365;&#12394;&#12356;&#22580;&#21512;&#12399;&#65292;&#25163;&#21205;&#12391;&#12371;&#12398;&#12481;&#12455;&#12483;&#12463;&#12434;&#24375;&#21046;&#12377;&#12427;&#12383;&#12417;&#12398;&#21046;&#38480;&#12434;&#20184;&#12369;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">ALTER TABLE mytable
  ADD CONSTRAINT geometry_valid_check
	CHECK (ST_IsValid(the_geom));</pre><p>
	  &#22949;&#24403;&#12394;&#20837;&#21147;&#12472;&#12458;&#12513;&#12488;&#12522;&#12391;PostGIS&#38306;&#25968;&#12434;&#21628;&#12435;&#12384;&#12398;&#12395;
	  "GEOS Intersection()&#12364;&#12456;&#12521;&#12540;&#12434;&#25237;&#12370;&#12414;&#12375;&#12383;!" &#12420; "JTS Intersection()&#12364;&#12456;&#12521;&#12540;&#12434;&#25237;&#12370;&#12414;&#12375;&#12383;!"
	  &#12392;&#12356;&#12358;&#12424;&#12358;&#12394;&#12513;&#12483;&#12475;&#12540;&#12472;&#12395;&#36973;&#36935;&#12375;&#12383;&#12425;&#65292;&#12381;&#12428;&#12399;&#12383;&#12406;&#12435;&#65292;PostGIS&#12414;&#12383;&#12399;&#20351;&#29992;&#12375;&#12390;&#12356;&#12427;&#12521;&#12452;&#12502;&#12521;&#12522;&#12398;&#20013;&#12398;&#12456;&#12521;&#12540;&#12434;&#30330;&#35211;&#12375;&#12414;&#12375;&#12383;&#65294;
	  PostGIS&#38283;&#30330;&#32773;&#12395;&#12467;&#12531;&#12479;&#12463;&#12488;&#12434;&#21462;&#12427;&#12409;&#12365;&#12391;&#12377;&#65294;
	  PostGIS&#38306;&#25968;&#12364;&#22949;&#24403;&#12391;&#12354;&#12427;&#20837;&#21147;&#12472;&#12458;&#12513;&#12488;&#12522;&#12363;&#12425;&#22949;&#24403;&#12391;&#12394;&#12356;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#36820;&#12427;&#22580;&#21512;&#12418;&#21516;&#12376;&#12391;&#12377;&#65294;	  
	  
	  </p><div class="note" title="&#27880;&#24847;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		&#21427;&#26684;&#12395;OGC&#12472;&#12458;&#12513;&#12488;&#12522;&#12395;&#28310;&#25312;&#12377;&#12427;&#12392;&#65292;Z&#20516;&#12420;M&#20516;&#12434;&#25345;&#12390;&#12414;&#12379;&#12435;&#65294;
		<a class="link" href="ST_IsValid.html" title="ST_IsValid">ST_IsValid()</a>&#12399;&#39640;&#27425;&#12434;&#32771;&#24942;&#12395;&#20837;&#12428;&#12414;&#12379;&#12435;&#65294;
		<a class="link" href="AddGeometryColumn.html" title="AddGeometryColumn">AddGeometryColumn()</a>&#12434;&#23455;&#34892;&#12377;&#12427;&#12392;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#27425;&#20803;&#12434;&#12481;&#12455;&#12483;&#12463;&#12377;&#12427;&#21046;&#32004;&#12364;&#21152;&#12431;&#12427;&#12398;&#12391;&#65292;2&#12434;&#12381;&#12371;&#12391;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12391;&#21313;&#20998;&#12391;&#12377;&#65294;
		
		</p></td></tr></table></div></div><div class="sect2" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)"><div class="titlepage"><div><div><h3 class="title"><a name="DE-9IM"></a>4.3.6. 
		Dimensionally Extended 9 Intersection Model (DE-9IM)
		
		</h3></div></div></div><p>
		&#20195;&#34920;&#30340;&#12394;&#31354;&#38291;&#36848;&#35486;(<a class="xref" href="ST_Contains.html" title="ST_Contains">ST_Contains</a>, <a class="xref" href="ST_Crosses.html" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="ST_Intersects.html" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="ST_Touches.html" title="ST_Touches">ST_Touches</a>, ...)&#12399;&#65292;
		&#27714;&#12417;&#12427;&#31354;&#38291;&#12501;&#12451;&#12523;&#12479;&#12434;&#21313;&#20998;&#12395;&#25552;&#20379;&#12375;&#12365;&#12428;&#12394;&#12356;&#12371;&#12392;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
		
		</p><div class="informaltable"><table border="0"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure-float" style="float: left;"><div class="informalfigure"><div align="left"><img src="images/de9im01.png" align="left"></div></div></div>
				<p>
				&#12383;&#12392;&#12360;&#12400;&#65292;&#36947;&#36335;&#32178;&#12434;&#34920;&#29694;&#12377;&#12427;&#32218;&#22411;&#12398;&#12487;&#12540;&#12479;&#12475;&#12483;&#12488;&#12364;&#12354;&#12427;&#12392;&#12375;&#12414;&#12377;&#65294;&#12499;&#12472;&#12493;&#12473;&#12523;&#12540;&#12523;&#12434;&#28961;&#35222;&#12375;&#12390;&#12356;&#12427;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#12364;&#65292;&#28857;&#12391;&#12463;&#12525;&#12473;&#12377;&#12427;&#12384;&#12369;&#12391;&#12394;&#12367;&#32218;&#19978;&#12391;&#12463;&#12525;&#12473;&#12377;&#12427;&#36947;&#36335;&#21306;&#38291;&#12434;&#20840;&#12390;&#21028;&#21029;&#12377;&#12427;&#12371;&#12392;&#12364;GIS&#35299;&#26512;&#32773;&#12398;&#20181;&#20107;&#12392;&#12394;&#12427;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#65294;&#12371;&#12398;&#22580;&#21512;&#65292;<a class="xref" href="ST_Crosses.html" title="ST_Crosses">ST_Crosses</a>&#12391;&#12399;&#37325;&#35201;&#12394;&#31354;&#38291;&#12501;&#12451;&#12523;&#12479;&#12392;&#12375;&#12390;&#21313;&#20998;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;&#32218;&#22411;&#12398;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12391;&#12399;&#65292;&#28857;&#12391;&#12463;&#12525;&#12473;&#12375;&#12390;&#12356;&#12427;&#22580;&#21512;&#12398;&#12415;<code class="varname">true</code>&#12364;&#36820;&#12426;&#12414;&#12377;&#65294;
				
				</p>
				<p>
				&#31354;&#38291;&#30340;&#12395;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12375;&#12390;&#12356;&#12427;(<a class="xref" href="ST_Intersects.html" title="ST_Intersects">ST_Intersects</a>)&#12392;&#21028;&#21029;&#12373;&#12428;&#12383;&#20108;&#12388;&#12398;&#21306;&#38291;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12395;&#12388;&#12356;&#12390;&#12398;&#23455;&#38555;&#12398;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;(<a class="xref" href="ST_Intersection.html" title="ST_Intersection">ST_Intersection</a>)&#12434;&#21462;&#12426;&#65292;
				&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12398;<a class="xref" href="ST_GeometryType.html" title="ST_GeometryType">ST_GeometryType</a>&#12364;'<code class="varname">LINESTRING</code>'&#12391;&#12354;&#12427;&#12363;&#12434;&#35211;&#12427;
				(<code class="varname">[MULTI]POINT</code>, <code class="varname">[MULTI]LINESTRING</code>&#31561;&#12363;&#12425;&#12394;&#12427;<code class="varname">GEOMETRYCOLLECTION</code>&#12364;&#36820;&#12387;&#12390;&#12367;&#12427;&#22580;&#21512;&#12395;&#12375;&#12387;&#12363;&#12426;&#23550;&#20966;&#12375;&#12414;&#12377;)&#65292;&#12392;&#12356;2&#27573;&#38542;&#12398;&#26041;&#27861;&#12391;&#35299;&#12367;&#12371;&#12392;&#12399;&#12391;&#12365;&#12414;&#12377;&#65294;
				
				</p>
				<p>
				&#12424;&#12426;&#12456;&#12524;&#12460;&#12531;&#12488;&#12363;&#12388;&#36895;&#12356;&#35299;&#27861;&#12364;&#26412;&#24403;&#12395;&#26395;&#12414;&#12375;&#12356;&#12391;&#12375;&#12423;&#12358;&#65294;
				
				</p></td></tr></tbody></table></div><div class="informaltable"><table border="0"><colgroup><col></colgroup><tbody><tr><td><p> </p><div class="informalfigure-float" style="float: right;"><div class="informalfigure"><div align="right"><img src="images/de9im02.png" align="right"></div></div></div>
				<p>


&#20108;&#12388;&#30446;&#12398;[&#29702;&#35542;&#30340;&#12394;]&#20363;&#12392;&#12375;&#12390;&#65292;GIS&#35299;&#26512;&#32773;&#12364;&#20840;&#12390;&#12398;&#28246;&#12398;&#22659;&#30028;&#12395;&#32218;&#12391;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12377;&#12427;&#27874;&#27490;&#22580;&#12420;&#12489;&#12483;&#12463;&#12398;&#20840;&#12390;&#12398;&#20301;&#32622;&#12434;&#29305;&#23450;&#12375;&#12424;&#12358;&#12392;&#12377;&#12427;&#12392;&#12375;&#12414;&#12377;&#65294;&#12371;&#12371;&#12391;&#65292;&#27874;&#27490;&#22580;&#12398;&#19968;&#31471;&#12384;&#12369;&#38520;&#12395;&#12354;&#12427;&#12392;&#12375;&#12414;&#12377;&#65294;&#35328;&#12356;&#12363;&#12360;&#12427;&#12392;&#65292;&#27874;&#27490;&#22580;&#12364;&#28246;&#12398;&#20013;&#12395;&#12354;&#12427;&#12364;&#23436;&#20840;&#12395;&#20013;&#12395;&#20837;&#12426;&#12365;&#12387;&#12390;&#12399;&#12356;&#12394;&#12367;&#12390;&#65292;&#28246;&#12392;&#32218;&#12391;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12375;&#12390;&#65292;&#27874;&#27490;&#22580;&#12398;&#19968;&#26041;&#12398;&#31471;&#12364;&#23436;&#20840;&#12395;&#28246;&#12395;&#20837;&#12387;&#12390;&#12356;&#12390;&#65292;&#12363;&#12388;&#12418;&#12358;&#19968;&#26041;&#12398;&#31471;&#28857;&#12364;&#22659;&#30028;&#32218;&#19978;&#12395;&#12354;&#12426;&#12414;&#12377;&#65294;&#35299;&#26512;&#32773;&#12399;&#31354;&#38291;&#36848;&#35486;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12391;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#24460;&#12391;&#25506;&#32034;&#23550;&#35937;&#12434;&#24341;&#12365;&#20986;&#12373;&#12394;&#12367;&#12390;&#12399;&#12394;&#12425;&#12394;&#12356;&#12363;&#12418;&#30693;&#12428;&#12414;&#12379;&#12435;&#65294;


				
				</p> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="ST_Contains.html" title="ST_Contains">ST_Contains</a>(lake, wharf) = TRUE</p></li><li class="listitem"><p><a class="xref" href="ST_ContainsProperly.html" title="ST_ContainsProperly">ST_ContainsProperly</a>(lake, wharf) = FALSE</p></li><li class="listitem"><p><a class="xref" href="ST_GeometryType.html" title="ST_GeometryType">ST_GeometryType</a>(<a class="xref" href="ST_Intersection.html" title="ST_Intersection">ST_Intersection</a>(wharf, lake)) =
                      'LINESTRING'</p></li><li class="listitem"><p><a class="xref" href="ST_NumGeometries.html" title="ST_NumGeometries">ST_NumGeometries</a>(<a class="xref" href="ST_Multi.html" title="ST_Multi">ST_Multi</a>(<a class="xref" href="ST_Intersection.html" title="ST_Intersection">ST_Intersection</a>(<a class="xref" href="ST_Boundary.html" title="ST_Boundary">ST_Boundary</a>(wharf),
                      <a class="xref" href="ST_Boundary.html" title="ST_Boundary">ST_Boundary</a>(lake)))) = 1</p><p>
					  ... (&#35079;&#38609;&#12394;&#12398;&#12391;&#20197;&#19979;&#30053;)
					  
					  </p></li></ul></div></td></tr></tbody></table></div><p>
		&#12371;&#12371;&#12391;&#65292;Dimensionally Extended 9 Intersection Model&#12414;&#12383;&#12399;&#30053;&#12375;&#12390;DE-9IM&#12434;&#35211;&#12390;&#12415;&#12414;&#12375;&#12423;&#12358;&#65294;
		
		</p><div class="sect3" title="4.3.6.1. &#29702;&#35542;"><div class="titlepage"><div><div><h4 class="title"><a name="id286815692"></a>4.3.6.1. 
		  &#29702;&#35542;
		  
		  </h4></div></div></div><p>
		  <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features Implementation Specification for SQL</a>&#12395;&#12424;&#12427;&#12392;&#12300;&#20108;&#12388;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#27604;&#36611;&#12398;&#22522;&#26412;&#30340;&#12394;&#12450;&#12503;&#12525;&#12540;&#12481;&#12399;&#65292;&#20108;&#12388;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#20869;&#37096;&#65292;&#22659;&#30028;&#65292;&#22806;&#37096;&#12398;&#12452;&#12531;&#12479;&#12475;&#12463;&#12471;&#12519;&#12531;&#12398;&#27604;&#36611;&#12392;&#65292;&#12302;&#12452;&#12531;&#12479;&#12475;&#12463;&#12471;&#12519;&#12531;&#34892;&#21015;&#12303;&#12398;&#35201;&#32032;&#12395;&#22522;&#12389;&#12367;2&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#38306;&#20418;&#12398;&#20998;&#39006;&#12391;&#12377;&#12301;&#65294;
		  
		  </p><div class="glosslist"><dl><dt>
			  &#22659;&#30028;(Boundary)
			  
			  </dt><dd><p>
				&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#22659;&#30028;&#12399;&#12402;&#12392;&#12388;&#20302;&#12356;&#27425;&#20803;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#38598;&#21512;&#12391;&#12377;&#65294;0&#27425;&#20803;&#12398;<code class="varname">POINT</code>&#12398;&#22659;&#30028;&#12399;&#31354;&#38598;&#21512;&#12391;&#12377;&#65294;<code class="varname">LINESTRING</code>&#12398;&#22659;&#30028;&#12399;&#20108;&#12388;&#12398;&#31471;&#28857;&#12391;&#12377;&#65294;<code class="varname">POLYGON</code>&#12398;&#22659;&#30028;&#12399;&#22806;&#29872;&#12392;&#20869;&#29872;&#12434;&#24418;&#25104;&#12377;&#12427;&#32218;&#12391;&#12377;&#65294;
				
				</p></dd><dt>
			  &#20869;&#37096;(Interior)
			  
			  </dt><dd><p>
				&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#20869;&#37096;&#12399;&#22659;&#30028;&#12434;&#21462;&#12426;&#21435;&#12387;&#12383;&#38555;&#12395;&#27531;&#12427;&#12472;&#12458;&#12513;&#12488;&#12522;&#12391;&#12377;&#65294;
				<code class="varname">POINT</code>&#12398;&#20869;&#37096;&#12399;<code class="varname">POINT</code>&#12381;&#12398;&#12418;&#12398;&#12391;&#12377;&#65294;<code class="varname">LINESTRING</code>&#12398;&#20869;&#37096;&#12399;&#20108;&#12388;&#12398;&#31471;&#28857;&#12398;&#38291;&#12398;&#23455;&#38555;&#12398;&#28857;&#12391;&#12377;&#65294;<code class="varname">POLYGON</code>&#12398;&#20869;&#37096;&#12399;&#12509;&#12522;&#12468;&#12531;&#12398;&#20869;&#20596;&#12398;&#31684;&#22258;&#12391;&#12377;&#65294;
				
				</p></dd><dt>
			  &#22806;&#37096;(Exterior)
			  
			  </dt><dd><p>
				&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#22806;&#37096;&#12399;&#65292;&#20869;&#37096;&#12392;&#22659;&#30028;&#12434;&#38500;&#12356;&#12383;&#20840;&#38936;&#22495;&#12391;&#12377;&#65294;				
				
				</p></dd></dl></div><p>
		  &#12472;&#12458;&#12513;&#12488;&#12522;<span class="emphasis"><em>a</em></span>&#12364;&#12354;&#12426;&#65292;a&#12398;<span class="emphasis"><em>&#20869;&#37096;</em></span>&#65292;<span class="emphasis"><em>&#22659;&#30028;</em></span>&#65292;<span class="emphasis"><em>&#22806;&#37096;</em></span>&#12434;&#12381;&#12428;&#12382;&#12428;<span class="emphasis"><em>I(a)</em></span>, <span class="emphasis"><em>B(a)</em></span>, <span class="emphasis"><em>E(a)</em></span>&#12392;&#12375;&#12414;&#12377;&#65294;&#25968;&#23398;&#30340;&#12394;&#34892;&#21015;&#34920;&#29694;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;		  
		  
		  </p><div class="styledtable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th align="center"> </th><th align="center">
				  <span class="bold"><strong>&#20869;&#37096;</strong></span>
				  
				  </th><th align="center">
				  <span class="bold"><strong>&#22659;&#30028;</strong></span>
				  
				  </th><th align="center">
				  <span class="bold"><strong>&#22806;&#37096;</strong></span>
				  
				  </th></tr></thead><tbody><tr><td align="center">
				  <span class="bold"><strong>&#20869;&#37096;</strong></span>
				  
				  </td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          I(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">I(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          I(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">B(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          I(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">E(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td></tr><tr><td align="center">				  
				  <span class="bold"><strong>&#22659;&#30028;</strong></span>
				  
				  </td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          B(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">I(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          B(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">B(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          B(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">E(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td></tr><tr><td align="center">
				  <span class="bold"><strong>&#22806;&#37096;</strong></span>
				  
				  </td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          E(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">I(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          E(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">B(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td><td align="center"><span class="emphasis"><em><mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML" display="block">
                        <mml:mrow>
                          <mml:mtext mathvariant="italic">dim(
                          E(a)</mml:mtext>

                          <mml:mo>&#8745;</mml:mo>

                          <mml:mtext mathvariant="italic">E(b) )</mml:mtext>
                        </mml:mrow>
                      </mml:math></em></span></td></tr></tbody></table></div><p>
		  &#12371;&#12371;&#12391;<span class="emphasis"><em>dim(a)</em></span>&#12399;<span class="emphasis"><em>a</em></span>&#12398;&#27425;&#20803;&#12391;&#65292;<a class="xref" href="ST_Dimension.html" title="ST_Dimension">ST_Dimension</a>&#12391;&#35215;&#23450;&#12373;&#12428;&#12414;&#12377;&#12364;&#65292;<code class="literal">{0,1,2,T,F,*}</code>&#12398;&#20516;&#22495;&#12434;&#25345;&#12385;&#12414;&#12377;&#65294;
		  
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p>
			  <code class="literal">0</code> =&gt; &#12509;&#12452;&#12531;&#12488;
			  
			  </p></li><li class="listitem"><p>
			  <code class="literal">1</code> =&gt; &#12521;&#12452;&#12531;
			  
			  </p></li><li class="listitem"><p>
			  <code class="literal">2</code> =&gt; &#38936;&#22495;
			  
			  </p></li><li class="listitem"><p>
			  <code class="literal">T</code> =&gt; <code class="literal">{0,1,2}</code>
			  
			  </p></li><li class="listitem"><p>
			  <code class="literal">F</code> =&gt; &#31354;&#38598;&#21512;
			  
			  </p></li><li class="listitem"><p>
			  <code class="literal">*</code> =&gt; &#20309;&#12391;&#12418;&#33391;&#12356;
			  
			  </p></li></ul></div><p>
		  &#21487;&#35222;&#21270;&#12377;&#12427;&#12392;&#65292;&#20108;&#12388;&#12398;&#12458;&#12540;&#12496;&#12521;&#12483;&#12503;&#12377;&#12427;&#12509;&#12522;&#12468;&#12531;&#12395;&#12388;&#12356;&#12390;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
		  
		  </p><div class="informaltable"><table border="0"><colgroup><col width="80pt"><col></colgroup><tbody><tr><td> </td><td align="center"><div class="informalfigure"><div align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr><td align="center" valign="middle"><img src="images/de9im04.png" align="middle"></td></tr></table></div></div></td></tr><tr><td align="center" valign="middle"><div class="informalfigure"><div align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr><td align="center" valign="middle"><img src="images/de9im03.png" align="middle"></td></tr></table></div></div></td><td><p> </p><div class="styledtable"><table border="1"><colgroup><col><col><col><col></colgroup><thead valign="middle"><tr><th align="center" valign="middle"> </th><th align="center" valign="middle">
							<span class="bold"><strong>&#20869;&#37096;</strong></span>
							
							</th><th align="center" valign="middle">
							<span class="bold"><strong>&#22659;&#30028;</strong></span>
							
							</th><th align="center" valign="middle">
							<span class="bold"><strong>&#22806;&#37096;</strong></span>
							
							</th></tr></thead><tbody valign="middle"><tr><td align="center" valign="middle">
							<span class="bold"><strong>&#20869;&#37096;</strong></span>
							
							</td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im05.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im06.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im07.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td></tr><tr><td align="center" valign="middle">
							<span class="bold"><strong>&#22659;&#30028;</strong></span>
							
							</td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im08.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im09.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>0</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im10.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td></tr><tr><td align="center" valign="middle">
							<span class="bold"><strong>&#22806;&#37096;</strong></span>
							
							</td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im11.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im12.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im13.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td></tr></tbody></table></div></td></tr></tbody></table></div><p>
		  &#24038;&#12363;&#12425;&#21491;&#65292;&#19978;&#12363;&#12425;&#19979;&#12395;&#35501;&#12416;&#12392;&#65292;&#27425;&#20803;&#34892;&#21015;&#12399;'<span class="bold"><strong>212101212</strong></span>'&#12392;&#34920;&#29694;&#12373;&#12428;&#12414;&#12377;&#65294;
		  
		  </p><p>
		  &#19968;&#12388;&#30446;&#12398;&#20363;&#12391;&#12354;&#12427;&#32218;&#19978;&#12391;&#12398;2&#32218;&#12398;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12399;&#65292;&#38306;&#20418;&#34892;&#21015;&#12391;'<span class="bold"><strong>1*1***1**</strong></span>'&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;
		  
		  </p><pre class="programlisting">-- &#32218;&#19978;&#12391;&#12463;&#12525;&#12473;&#12377;&#12427;&#36947;&#36335;&#21306;&#38291;&#12398;&#21028;&#21029;
SELECT a.id
FROM roads a, roads b
WHERE a.id != b.id 
AND a.geom &amp;&amp; b.geom
AND ST_Relate(a.geom, b.geom, '1*1***1**');</pre><p>
		  &#20108;&#12388;&#30446;&#12398;&#20363;&#12391;&#12354;&#12427;&#19968;&#37096;&#12364;&#28246;&#12398;&#27700;&#28079;&#32218;&#19978;&#12395;&#12354;&#12427;&#27874;&#27490;&#22580;&#12399;&#65292;&#38306;&#20418;&#34892;&#21015;&#12391;'<span class="bold"><strong>102101FF2</strong></span>'&#12392;&#12394;&#12426;&#12414;&#12377;&#65294;
		  
		  </p><pre class="programlisting">-- &#19968;&#37096;&#12364;&#28246;&#12398;&#27700;&#28079;&#32218;&#19978;&#12395;&#12354;&#12427;&#27874;&#27490;&#22580;&#12398;&#21028;&#21029;
SELECT a.lake_id, b.wharf_id
FROM lakes a, wharfs b
WHERE a.geom &amp;&amp; b.geom
AND ST_Relate(a.geom, b.geom, '102101FF2');</pre><p>
		  &#12371;&#12428;&#20197;&#19978;&#12398;&#24773;&#22577;&#12388;&#12356;&#12390;&#12399;&#65292;&#27425;&#12398;&#12506;&#12540;&#12472;&#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;&#65294;
		  
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p><a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple
          Features Implementation Specification for SQL</a> (version 1.1, section 2.1.13.2)</p></li><li class="listitem"><p><a class="ulink" href="http://gis.hsr.ch/wiki/images/3/3d/9dem_springer.pdf" target="_top">Dimensionally 
              Extended Nine-Intersection Model (DE-9IM) by Christian Strobl</a></p></li><li class="listitem"><p><span class="emphasis"><em>Encyclopedia of GIS</em></span> By Hui Xiong</p></li></ul></div></div></div></div><div class="sect1" title="4.4. GIS&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;&#12377;&#12427;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id286816897"></a>4.4. 
	GIS&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;&#12377;&#12427;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#id286816909">4.4.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#shp2pgsql_usage">4.4.2. 
  &#12525;&#12540;&#12480;&#12434;&#20351;&#12358;
  
  </a></span></dt></dl></div><p>
	&#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#25104;&#12375;&#12383;&#12425;&#65292;&#12371;&#12428;&#12391;GIS&#12487;&#12540;&#12479;&#12434;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#12450;&#12483;&#12503;&#12525;&#12540;&#12489;&#12377;&#12427;&#28310;&#20633;&#12364;&#12391;&#12365;&#12383;&#12371;&#12392;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;&#29694;&#22312;&#65292;PostGIS/PostgreSQL&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;&#12377;&#12427;&#12395;&#12399;&#65292;SQL&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12434;&#20351;&#12358;&#65292;&#12414;&#12383;&#12399;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12398;&#12525;&#12540;&#12480;/&#12480;&#12531;&#12497;&#12434;&#20351;&#12358;&#65292;&#20108;&#12388;&#12398;&#26041;&#27861;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
	
	</p><div class="sect2" title="4.4.1. SQL&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="id286816909"></a>4.4.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </h3></div></div></div><p>
	  &#12487;&#12540;&#12479;&#12434;&#12486;&#12461;&#12473;&#12488;&#34920;&#29694;&#12395;&#22793;&#25563;&#12391;&#12365;&#12427;&#12394;&#12425;&#65292;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12373;&#12428;&#12383;SQL&#12434;&#20351;&#12358;&#12398;&#12364;&#12487;&#12540;&#12479;&#12434;PostGIS&#12395;&#20837;&#12428;&#12427;&#26368;&#12418;&#31777;&#21336;&#12394;&#26041;&#27861;&#12391;&#12377;&#65294;Oracle&#12420;&#20182;&#12398;SQL&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12434;&#20351;&#12358;&#12424;&#12358;&#12395;&#65292;SQL&#31471;&#26411;&#12514;&#12491;&#12479;&#12395;SQL&#12398;"INSERT"&#12473;&#12486;&#12540;&#12488;&#12513;&#12531;&#12488;&#12391;&#19968;&#26479;&#12395;&#12394;&#12387;&#12383;&#22823;&#12365;&#12394;&#12486;&#12461;&#12473;&#12488;&#12501;&#12449;&#12452;&#12523;&#12434;&#12497;&#12452;&#12503;&#12391;&#36865;&#12427;&#12371;&#12392;&#12391;&#65292;&#22823;&#37327;&#12398;&#12487;&#12540;&#12479;&#12434;&#12525;&#12540;&#12489;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#12487;&#12540;&#12479;&#12450;&#12483;&#12503;&#12525;&#12540;&#12489;&#12501;&#12449;&#12452;&#12523;(&#12383;&#12392;&#12360;&#12400;<code class="filename">roads.sql</code>l)&#12399;&#12371;&#12398;&#12424;&#12358;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;&#65294;
	  
	  </p><pre class="programlisting">BEGIN;
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (1,ST_GeomFromText('LINESTRING(191232 243118,191108 243242)',-1),'Jeff Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (2,ST_GeomFromText('LINESTRING(189141 244158,189265 244817)',-1),'Geordie Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (3,ST_GeomFromText('LINESTRING(192783 228138,192612 229814)',-1),'Paul St');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (4,ST_GeomFromText('LINESTRING(189412 252431,189631 259122)',-1),'Graeme Ave');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (5,ST_GeomFromText('LINESTRING(190131 224148,190871 228134)',-1),'Phil Tce');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (6,ST_GeomFromText('LINESTRING(198231 263418,198213 268322)',-1),'Dave Cres');
COMMIT;</pre><p>
	  &#12487;&#12540;&#12479;&#12501;&#12449;&#12452;&#12523;&#12399;&#65292;&#27425;&#12395;&#31034;&#12377;"psql"&#12392;&#12356;&#12358;SQL&#31471;&#26411;&#12514;&#12491;&#12479;&#12434;&#20351;&#12387;&#12390;&#65292;&#31777;&#21336;&#12395;PostgreSQL&#12395;&#12497;&#12452;&#12503;&#12391;&#36865;&#12425;&#12428;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">psql -d [database] -f roads.sql</pre></div><div class="sect2" title="4.4.2. &#12525;&#12540;&#12480;&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="shp2pgsql_usage"></a>4.4.2. 
  &#12525;&#12540;&#12480;&#12434;&#20351;&#12358;
  
  </h3></div></div></div><p>
  <code class="filename">shp2pgsql</code>&#12487;&#12540;&#12479;&#12525;&#12540;&#12480;&#12399;&#65292;ESRI&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12434;PostGIS/PostgreSQL&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#25407;&#20837;&#12377;&#12427;&#12383;&#12417;&#12398;&#36969;&#20999;&#12394;SQL&#12395;&#22793;&#25563;&#12375;&#12414;&#12377;&#65294;&#12525;&#12540;&#12480;&#12395;&#12399;&#65292;&#27425;&#12395;&#31034;&#12377;&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;&#12501;&#12521;&#12464;&#12395;&#12424;&#12387;&#12390;&#35672;&#21029;&#12373;&#12428;&#12427;&#65292;&#12356;&#12367;&#12388;&#12363;&#12398;&#25805;&#20316;&#12514;&#12540;&#12489;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
  
  </p><p>
  &#12373;&#12425;&#12395;&#65292;&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;&#12525;&#12540;&#12480;&#12398;&#12411;&#12392;&#12435;&#12393;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12395;&#23550;&#24540;&#12377;&#12427;<code class="filename">shp2pgsql-gui</code>&#12464;&#12521;&#12501;&#12451;&#12459;&#12523;&#12518;&#12540;&#12470;&#12452;&#12531;&#12479;&#12501;&#12455;&#12540;&#12473;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;&#19968;&#24230;&#38480;&#12426;&#12391;&#12473;&#12463;&#12522;&#12503;&#12488;&#21270;&#12375;&#12394;&#12356;&#12525;&#12540;&#12489;&#12434;&#34892;&#12358;&#22580;&#21512;&#12420;PostGIS&#12395;&#19981;&#24931;&#12428;&#12394;&#26041;&#12395;&#12392;&#12387;&#12390;&#20415;&#21033;&#12395;&#12394;&#12427;&#12363;&#12418;&#12375;&#12428;&#12414;&#12379;&#12435;&#65294;&#12371;&#12428;&#12399;PgAdminIII&#12398;&#12503;&#12521;&#12464;&#12452;&#12531;&#12392;&#12375;&#27083;&#31689;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#65294;
  
	</p><div class="variablelist"><dl><dt><span class="term">
	  (c|a|d|p) &#30456;&#20114;&#12395;&#25490;&#20182;&#30340;&#12394;&#12458;&#12503;&#12471;&#12519;&#12531;
	  
	  </span></dt><dd><p>
          </p><div class="variablelist"><dl><dt><span class="term">-c</span></dt><dd><p>
				&#26032;&#12375;&#12356;&#12486;&#12540;&#12502;&#12523;&#12398;&#20316;&#25104;&#12392;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12363;&#12425;&#12398;&#12487;&#12540;&#12479;&#12398;&#35501;&#12415;&#36796;&#12415;&#12434;&#34892;&#12356;&#12414;&#12377;&#65294;<span class="emphasis"><em>&#12371;&#12428;&#12364;&#12487;&#12501;&#12457;&#12523;&#12488;&#12514;&#12540;&#12489;&#12391;&#12377;&#65294;</em></span>
				
                </p></dd><dt><span class="term">-a</span></dt><dd><p>
				&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12363;&#12425;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12486;&#12540;&#12502;&#12523;&#12395;&#12487;&#12540;&#12479;&#12434;&#36861;&#21152;&#12375;&#12414;&#12377;&#65294;&#35079;&#25968;&#12398;&#12501;&#12449;&#12452;&#12523;&#12434;&#12525;&#12540;&#12489;&#12377;&#12427;&#12383;&#12417;&#12395;&#12371;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;&#20351;&#12358;&#22580;&#21512;&#12399;&#65292;&#12371;&#12428;&#12425;&#12398;&#12501;&#12449;&#12452;&#12523;&#12399;&#21516;&#12376;&#23646;&#24615;&#12392;&#21516;&#12376;&#12487;&#12540;&#12479;&#22411;&#12434;&#25345;&#12388;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
				
                </p></dd><dt><span class="term">-d</span></dt><dd><p>
				&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12395;&#12354;&#12427;&#12487;&#12540;&#12479;&#12434;&#25345;&#12388;&#26032;&#12375;&#12356;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#25104;&#12377;&#12427;&#21069;&#12395;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12486;&#12540;&#12502;&#12523;&#12434;&#21066;&#38500;&#12375;&#12414;&#12377;&#65294;
				
                </p></dd><dt><span class="term">-p</span></dt><dd><p>
				&#12486;&#12540;&#12502;&#12523;&#20316;&#25104;&#12398;SQL&#12467;&#12540;&#12489;&#12434;&#29983;&#25104;&#12377;&#12427;&#12384;&#12369;&#12391;&#65292;&#23455;&#38555;&#12398;&#12487;&#12540;&#12479;&#12399;&#36861;&#21152;&#12375;&#12414;&#12379;&#12435;&#65294;&#12371;&#12398;&#12514;&#12540;&#12489;&#12399;&#65292;&#12486;&#12540;&#12502;&#12523;&#20316;&#25104;&#12392;&#12487;&#12540;&#12479;&#12525;&#12540;&#12489;&#12392;&#12434;&#23436;&#20840;&#12395;&#20998;&#12369;&#12383;&#12356;&#22580;&#21512;&#12395;&#20351;&#29992;&#12375;&#12414;&#12377;&#65294;
				
                </p></dd></dl></div><p>
        </p></dd><dt><span class="term">-?</span></dt><dd><p>
		&#12504;&#12523;&#12503;&#30011;&#38754;&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-D</span></dt><dd><p>
		&#20986;&#21147;&#12487;&#12540;&#12479;&#12395;PostgreSQL&#12398;"dump"&#26360;&#24335;&#12434;&#29992;&#12356;&#12414;&#12377;&#65294;&#12371;&#12398;&#12514;&#12540;&#12489;&#12399; -a, -c, -d &#12364;&#21547;&#12414;&#12428;&#12414;&#12377;&#65294;&#12487;&#12501;&#12457;&#12523;&#12488;&#12398;"insert"&#12395;&#12424;&#12427;SQL&#26360;&#24335;&#12424;&#12426;&#12418;&#65292;&#22823;&#22793;&#26089;&#12367;&#12525;&#12540;&#12489;&#12391;&#12365;&#12414;&#12377;&#65294;&#22823;&#12365;&#12394;&#12487;&#12540;&#12479;&#12475;&#12483;&#12488;&#12391;&#12399;&#12371;&#12385;&#12425;&#12434;&#20351;&#29992;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;
		
        </p></dd><dt><span class="term">-s &lt;SRID&gt;</span></dt><dd><p>
		&#25351;&#23450;&#12375;&#12383;SRID&#12391;&#12472;&#12458;&#12513;&#12488;&#12522;&#12487;&#12540;&#12502;&#12523;&#12398;&#20316;&#25104;&#12392;&#12487;&#12540;&#12479;&#12398;&#35501;&#12415;&#36796;&#12415;&#12434;&#34892;&#12356;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-k</span></dt><dd><p>
		&#35672;&#21029;&#23376;(&#12459;&#12521;&#12512;&#65292;&#12473;&#12461;&#12540;&#12510;&#12362;&#12424;&#12403;&#23646;&#24615;)&#12398;&#22823;&#25991;&#23383;&#23567;&#25991;&#23383;&#12434;&#20445;&#25345;&#12375;&#12414;&#12377;&#65294;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12398;&#23646;&#24615;&#12399;&#20840;&#12390;&#22823;&#25991;&#23383;&#12391;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;
		
        </p></dd><dt><span class="term">-i</span></dt><dd><p>
		&#20840;&#12390;&#12398;&#25972;&#25968;&#12434;&#27161;&#28310;&#12398;32&#12499;&#12483;&#12488;&#25972;&#25968;&#12395;&#24375;&#21046;&#12375;&#12414;&#12377;&#65294; DBF&#12504;&#12483;&#12480;&#12391;&#12399;&#12381;&#12428;&#12364;&#27491;&#24403;&#12391;&#12354;&#12387;&#12383;&#12392;&#12375;&#12390;&#12418;&#65292;64&#12499;&#12483;&#12488;&#12398;bigint&#12434;&#29983;&#25104;&#12375;&#12414;&#12379;&#12435;&#65294;
		
        </p></dd><dt><span class="term">-I</span></dt><dd><p>
		&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12395;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#29983;&#25104;&#12375;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-w</span></dt><dd><p>
		&#21476;&#12356;&#29256;(0.x&#29256;)&#12398;PostGIS&#12398;&#12383;&#12417;&#12395;WKT&#26360;&#24335;&#12434;&#20986;&#21147;&#12375;&#12414;&#12377;&#65294;&#12371;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12395;&#12424;&#12387;&#12390;&#65292;&#24231;&#27161;&#22793;&#21205;&#12364;&#30330;&#29983;&#12375;&#65292;&#12414;&#12383;&#65292;M&#20516;&#12364;&#21066;&#38500;&#12373;&#12428;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;
		
        </p></dd><dt><span class="term">-W &lt;encoding&gt;</span></dt><dd><p>
		&#20837;&#21147;&#12487;&#12540;&#12479;(dbf&#12501;&#12449;&#12452;&#12523;)&#12398;&#25991;&#23383;&#12467;&#12540;&#12489;&#12434;&#25351;&#23450;&#12375;&#12414;&#12377;&#65294; dbf&#12398;&#20840;&#12390;&#12398;&#23646;&#24615;&#12399;&#25351;&#23450;&#12373;&#12428;&#12383;&#25991;&#23383;&#12467;&#12540;&#12489;&#12363;&#12425;UTF8&#12395;&#22793;&#25563;&#12373;&#12428;&#12414;&#12377;&#65294; SQL&#20986;&#21147;&#12395;SET CLIENT_ENCODING to UTF8&#12467;&#12510;&#12531;&#12489;&#12364;&#21152;&#12360;&#12425;&#12428;&#65292;&#12496;&#12483;&#12463;&#12456;&#12531;&#12489;&#12391;UTF8&#12363;&#12425;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12364;&#20869;&#37096;&#12391;&#20351;&#29992;&#12377;&#12427;&#12424;&#12358;&#12395;&#35373;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#25991;&#23383;&#12467;&#12540;&#12489;&#12395;&#20877;&#22793;&#25563;&#12391;&#12365;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-N &lt;policy&gt;</span></dt><dd><p>
		NULL&#12472;&#12458;&#12513;&#12488;&#12522;&#25805;&#20316;&#26041;&#37341;(insert* = &#25407;&#20837;, skip = &#12473;&#12461;&#12483;&#12503;, abort = &#24375;&#21046;&#32066;&#20102;)&#12434;&#36984;&#25246;&#12375;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-n</span></dt><dd><p>
		DBF&#12501;&#12449;&#12452;&#12523;&#12398;&#12415;&#12452;&#12531;&#12509;&#12540;&#12488;&#12375;&#12414;&#12377;&#65294;&#23550;&#24540;&#12377;&#12427;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12434;&#25345;&#12387;&#12390;&#12356;&#12394;&#12356;&#22580;&#21512;&#65292;
		&#33258;&#21205;&#30340;&#12395;&#12371;&#12398;&#12514;&#12540;&#12489;&#12395;&#12394;&#12426;&#65292;DBF&#12501;&#12449;&#12452;&#12523;&#12398;&#12415;&#12525;&#12540;&#12489;&#12375;&#12414;&#12377;&#65294;
		&#12371;&#12398;&#12501;&#12521;&#12464;&#12399;&#65292;&#23436;&#20840;&#12394;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#32676;&#12434;&#25345;&#12387;&#12390;&#12356;&#12390;&#65292;&#23646;&#24615;&#12487;&#12540;&#12479;&#12384;&#12369;&#12364;&#27442;&#12375;&#12367;&#12390;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#27442;&#12375;&#12367;&#12394;&#12356;&#26178;&#12398;&#12415;&#20351;&#29992;&#12375;&#12414;&#12377;&#65294;
		
        </p></dd><dt><span class="term">-G</span></dt><dd><p>
		&#12472;&#12458;&#12513;&#12488;&#12522;&#22411;&#12398;&#12363;&#12431;&#12426;&#12395;&#65292;&#12472;&#12458;&#12464;&#12521;&#12501;&#12451;&#22411;&#12391;&#65292;WGS84&#32076;&#24230;&#32239;&#24230;(SRID=4326)&#12434;&#20351;&#29992;&#12375;&#12414;&#12377;(&#32076;&#24230;&#32239;&#24230;&#12487;&#12540;&#12479;&#12364;&#24517;&#35201;&#12391;&#12377;)&#65294;
			
		</p></dd></dl></div><p>
  &#12525;&#12540;&#12480;&#12434;&#20351;&#12387;&#12390;&#20837;&#21147;&#12501;&#12449;&#12452;&#12523;&#12434;&#29983;&#25104;&#12375;&#12390;&#12487;&#12540;&#12479;&#12434;&#12450;&#12483;&#12503;&#12525;&#12540;&#12489;&#12377;&#12427;&#12475;&#12483;&#12471;&#12519;&#12531;&#12398;&#20363;&#12434;&#27425;&#12395;&#31034;&#12375;&#12414;&#12377;&#65294;
  
  </p><pre class="programlisting"># shp2pgsql -c -D -s 4269 -i -I shaperoads.shp myschema.roadstable &gt; roads.sql
# psql -d roadsdb -f roads.sql</pre><p>
  &#22793;&#25563;&#12392;&#12450;&#12483;&#12503;&#12525;&#12540;&#12489;&#12399;UNIX&#12398;&#12497;&#12452;&#12503;&#12434;&#20351;&#12358;&#12392;&#19968;&#22238;&#12391;&#23455;&#34892;&#12391;&#12365;&#12414;&#12377;&#65294;
  
  </p><pre class="programlisting"># shp2pgsql shaperoads.shp myschema.roadstable | psql -d roadsdb</pre></div></div><div class="sect1" title="4.5. GIS&#12487;&#12540;&#12479;&#12434;&#26908;&#32034;&#12377;&#12427;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id286817558"></a>4.5. 
	GIS&#12487;&#12540;&#12479;&#12434;&#26908;&#32034;&#12377;&#12427;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#id286817571">4.5.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286817827">4.5.2. 
	  &#12480;&#12531;&#12497;&#12434;&#20351;&#12358;
	  
	  </a></span></dt></dl></div><p>
	&#12487;&#12540;&#12479;&#12399;&#65292;SQL&#12414;&#12383;&#12399;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12525;&#12540;&#12480;/&#12480;&#12531;&#12497;&#12434;&#20351;&#12387;&#12390;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12363;&#12425;&#25244;&#12365;&#20986;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294; SQL&#12395;&#38306;&#12377;&#12427;&#31680;&#12395;&#12362;&#12356;&#12390;&#65292;&#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12391;&#12398;&#27604;&#36611;&#12392;&#12463;&#12456;&#12522;&#12434;&#34892;&#12358;&#12383;&#12417;&#12395;&#29992;&#12356;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#28436;&#31639;&#23376;&#12398;&#12356;&#12367;&#12388;&#12363;&#12434;&#35696;&#35542;&#12375;&#12414;&#12377;&#65294;
	
	</p><div class="sect2" title="4.5.1. SQL&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="id286817571"></a>4.5.1. 
	  SQL&#12434;&#20351;&#12358;
	  
	  </h3></div></div></div><p>
	  &#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12363;&#12425;&#12487;&#12540;&#12479;&#12434;&#24341;&#12365;&#20986;&#12377;&#26368;&#12418;&#12473;&#12488;&#12524;&#12540;&#12488;&#12394;&#25163;&#27573;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#65292;SQL&#12398;SELECT&#12463;&#12456;&#12522;&#12434;&#20351;&#12387;&#12390;&#12459;&#12521;&#12512;&#12434;&#21487;&#35501;&#12394;&#12486;&#12461;&#12473;&#12488;&#12501;&#12449;&#12452;&#12523;&#12392;&#12375;&#12390;&#20986;&#21147;&#12377;&#12427;&#12371;&#12392;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">db=# SELECT road_id, ST_AsText(road_geom) AS geom, road_name FROM roads;

road_id | geom                                    | road_name
--------+-----------------------------------------+-----------
	  1 | LINESTRING(191232 243118,191108 243242) | Jeff Rd
	  2 | LINESTRING(189141 244158,189265 244817) | Geordie Rd
	  3 | LINESTRING(192783 228138,192612 229814) | Paul St
	  4 | LINESTRING(189412 252431,189631 259122) | Graeme Ave
	  5 | LINESTRING(190131 224148,190871 228134) | Phil Tce
	  6 | LINESTRING(198231 263418,198213 268322) | Dave Cres
	  7 | LINESTRING(218421 284121,224123 241231) | Chris Way
(6 rows)</pre><p>
	  &#12375;&#12363;&#12375;&#65292;&#36820;&#12387;&#12390;&#12367;&#12427;&#32080;&#26524;&#12398;&#25968;&#12434;&#21066;&#12427;&#12383;&#12417;&#12395;&#65292;&#12394;&#12435;&#12425;&#12363;&#12398;&#21046;&#38480;&#12434;&#12363;&#12369;&#12427;&#12371;&#12392;&#12364;&#37325;&#35201;&#12392;&#12394;&#12427;&#12392;&#12365;&#12364;&#12354;&#12427;&#12391;&#12375;&#12423;&#12358;&#65294;&#23646;&#24615;&#12505;&#12540;&#12473;&#12398;&#21046;&#38480;&#12398;&#22580;&#21512;&#65292;&#38750;&#31354;&#38291;&#12486;&#12540;&#12502;&#12523;&#12391;&#20351;&#12358;&#36890;&#24120;&#12398;&#25991;&#27861;&#12392;&#21516;&#12376;SQL&#12434;&#20351;&#12358;&#12384;&#12369;&#12391;&#12377;&#65294;&#31354;&#38291;&#12505;&#12540;&#12473;&#12398;&#21046;&#38480;&#12398;&#22580;&#21512;&#65292;&#27425;&#12398;&#12458;&#12506;&#12524;&#12540;&#12479;&#12364;&#20351;&#29992;&#21487;&#33021;&#12391;&#12354;&#12426;&#65292;&#20415;&#21033;&#12391;&#12377;&#65294;
	  
	  </p><div class="variablelist"><dl><dt><span class="term">&amp;&amp;</span></dt><dd><p>
			&#12371;&#12398;&#28436;&#31639;&#23376;&#12391;&#65292;&#12402;&#12392;&#12388;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12364;&#20182;&#12398;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12392;&#12452;&#12531;&#12479;&#12475;&#12463;&#12488;&#12377;&#12427;&#12363;&#12434;&#21839;&#12356;&#21512;&#12431;&#12379;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
			
			</p></dd><dt><span class="term">~=</span></dt><dd><p>
			&#12371;&#12398;&#28436;&#31639;&#23376;&#12391;&#65292;&#20108;&#12388;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12364;&#24190;&#20309;&#30340;&#12395;&#21516;&#19968;&#12391;&#12354;&#12427;&#12363;&#12434;&#35211;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;&#12383;&#12392;&#12360;&#12400;&#65292;'POLYGON((0 0,1 1,1 0,0 0))' &#12399; 'POLYGON((0 0,1 1,1 0,0 0))' &#12392;&#21516;&#12376;&#12363;&#12434;&#35211;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377; (&#12371;&#12428;&#12399;&#21516;&#12376;&#12392;&#12394;&#12426;&#12414;&#12377;)&#65294;
			
			</p></dd><dt><span class="term">=</span></dt><dd><p>
			&#12371;&#12398;&#28436;&#31639;&#23376;&#12399;&#20182;&#12424;&#12426;&#33509;&#24178;&#32032;&#26420;&#12394;&#12418;&#12398;&#12391;&#65292;&#20108;&#12388;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12398;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12364;&#21516;&#12376;&#12363;&#12434;&#35211;&#12427;&#12384;&#12369;&#12391;&#12377;&#65294;
			
			</p></dd></dl></div><p>
	  &#27425;&#12395;&#65292;&#12371;&#12428;&#12425;&#12398;&#28436;&#31639;&#23376;&#12434;&#12463;&#12456;&#12522;&#12391;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294; SQL&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;&#12363;&#12425;&#12472;&#12458;&#12513;&#12488;&#12522;&#12392;&#12508;&#12483;&#12463;&#12473;&#12398;&#29305;&#23450;&#12434;&#34892;&#12358;&#12392;&#12365;&#12399;&#65292; "GeomFromText()"&#38306;&#25968;&#12391;&#65292;&#26126;&#31034;&#30340;&#12395;&#25991;&#23383;&#21015;&#34920;&#29694;&#12434;&#12472;&#12458;&#12513;&#12488;&#12522;&#12395;&#22793;&#25563;&#12375;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;&#12383;&#12392;&#12360;&#12400;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">SELECT road_id, road_name
  FROM roads
  WHERE roads_geom ~= ST_GeomFromText('LINESTRING(191232 243118,191108 243242)',-1);</pre><p>
	  &#19978;&#12398;&#12463;&#12456;&#12522;&#12399;"ROADS_GEOM"&#12486;&#12540;&#12502;&#12523;&#12363;&#12425;&#65292;&#12381;&#12398;&#20516;&#12392;&#31561;&#20385;&#12391;&#12354;&#12427;&#21336;&#19968;&#12398;&#12524;&#12467;&#12540;&#12489;&#12434;&#36820;&#12375;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  "&amp;&amp;"&#28436;&#31639;&#23376;&#12434;&#20351;&#12358;&#12392;&#12365;&#65292;&#27604;&#36611;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;BOX3D&#12363;GEOMETRY&#12363;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;&#12383;&#12384;&#12375;&#65292;GEOMETRY&#12434;&#25351;&#23450;&#12377;&#12427;&#12392;&#65292;&#12381;&#12428;&#12398;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12364;&#27604;&#36611;&#12395;&#20351;&#12431;&#12428;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">SELECT road_id, road_name
FROM roads
WHERE roads_geom &amp;&amp; ST_GeomFromText('POLYGON((...))',-1);</pre><p>
	  &#19978;&#12398;&#12463;&#12456;&#12522;&#12391;&#12399;&#65292;&#27604;&#36611;&#12377;&#12427;&#12383;&#12417;&#12395;&#12509;&#12522;&#12468;&#12531;&#12398;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12434;&#29992;&#12356;&#12390;&#12356;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#26368;&#12418;&#19968;&#33324;&#30340;&#12394;&#31354;&#38291;&#12463;&#12456;&#12522;&#12399;&#12300;&#12501;&#12524;&#12540;&#12512;&#12505;&#12540;&#12473;&#12301;&#12398;&#12463;&#12456;&#12522;&#12391;&#12375;&#12423;&#12358;&#65294;&#12371;&#12428;&#12399;&#65292;&#34920;&#31034;&#12377;&#12427;&#12383;&#12417;&#12398;&#12487;&#12540;&#12479;&#12398;&#20385;&#20516;&#12398;&#12354;&#12427;&#12300;&#12510;&#12483;&#12503;&#12501;&#12524;&#12540;&#12512;&#12301;&#12434;&#21462;&#24471;&#12377;&#12427;&#12383;&#12417;&#12395;&#65292;&#12487;&#12540;&#12479;&#12502;&#12521;&#12454;&#12470;&#12420;&#12454;&#12455;&#12502;&#12510;&#12483;&#12497;&#12398;&#12424;&#12358;&#12394;&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12477;&#12501;&#12488;&#12454;&#12455;&#12450;&#12395;&#20351;&#12431;&#12428;&#12414;&#12377;&#65294;&#12371;&#12398;&#12501;&#12524;&#12540;&#12512;&#12391;"BOX3D"&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12434;&#20351;&#12358;&#22580;&#21512;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12394;&#12463;&#12456;&#12522;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">SELECT ST_AsText(roads_geom) AS geom
FROM roads
WHERE
  roads_geom &amp;&amp; SetSRID('BOX3D(191232 243117,191232 243119)'::box3d,-1);</pre><p>
	  &#12371;&#12371;&#12391;&#65292;BOX3D&#12398;&#25237;&#24433;&#12434;&#25351;&#23450;&#12375;&#12390;&#12356;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294; SRID&#12434;-1&#12395;&#35373;&#23450;&#12375;&#12390;&#12356;&#12427;&#12398;&#12399;&#65292;SRID&#12434;&#25351;&#23450;&#12375;&#12394;&#12356;&#12392;&#12356;&#12358;&#12371;&#12392;&#12434;&#31034;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
	  
	  </p></div><div class="sect2" title="4.5.2. &#12480;&#12531;&#12497;&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="id286817827"></a>4.5.2. 
	  &#12480;&#12531;&#12497;&#12434;&#20351;&#12358;
	  
	  </h3></div></div></div><p>
	  <code class="filename">pgsql2shp</code>&#12486;&#12540;&#12502;&#12523;&#12480;&#12531;&#12497;&#12399;&#65292;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#30452;&#25509;&#25509;&#32154;&#12375;&#12390;&#65292;&#12486;&#12540;&#12502;&#12523;(&#12354;&#12427;&#12356;&#12399;&#12463;&#12456;&#12522;&#12395;&#12424;&#12387;&#12390;&#23450;&#32681;&#12373;&#12428;&#12383;&#12418;&#12398;)&#12434;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12395;&#22793;&#25563;&#12377;&#12427;&#12418;&#12398;&#12391;&#12377;&#65294;&#22522;&#26412;&#30340;&#12394;&#25991;&#27861;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;	  
	  </p><pre class="programlisting">pgsql2shp [&lt;&#12458;&#12503;&#12471;&#12519;&#12531;&gt;] &lt;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#21517;&gt; [&lt;&#12473;&#12461;&#12540;&#12510;&#21517;&gt;.]&lt;&#12486;&#12540;&#12502;&#12523;&#21517;&gt;</pre><pre class="programlisting">pgsql2shp [&lt;&#12458;&#12503;&#12471;&#12519;&#12531;&gt;] &lt;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#21517;&gt; &lt;&#12463;&#12456;&#12522;&gt;</pre><p>
	  &#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;&#12458;&#12503;&#12471;&#12519;&#12531;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><div class="variablelist"><dl><dt><span class="term">
		  -f &lt;&#12501;&#12449;&#12452;&#12523;&#21517;&gt;
		  
		  </span></dt><dd><p>
			&#29305;&#23450;&#12398;&#12501;&#12449;&#12452;&#12523;&#21517;&#12395;&#20986;&#21147;&#12434;&#26360;&#12365;&#12371;&#12415;&#12414;&#12377;&#65294;
			
			</p></dd><dt><span class="term">
		  -h &lt;&#12507;&#12473;&#12488;&#21517;&gt;
		  
		  </span></dt><dd><p>
			&#25509;&#32154;&#20808;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12398;&#12507;&#12473;&#12488;&#21517;&#65294;
			
			</p></dd><dt><span class="term">
		  -p &lt;&#12509;&#12540;&#12488;&gt;
		  
		  </span></dt><dd><p>
			&#25509;&#32154;&#20808;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12398;&#12509;&#12540;&#12488;&#65294;
			
			</p></dd><dt><span class="term">
		  -P &lt;&#12497;&#12473;&#12527;&#12540;&#12489;&gt;
		  
		  </span></dt><dd><p>
			&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#25509;&#32154;&#12377;&#12427;&#12383;&#12417;&#12398;&#12497;&#12473;&#12527;&#12540;&#12489;&#65294;
			
			</p></dd><dt><span class="term">
		  -u &lt;&#12518;&#12540;&#12470;&#21517;&gt;
		  
		  </span></dt><dd><p>
			&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12395;&#25509;&#32154;&#12377;&#12427;&#38555;&#12398;&#12518;&#12540;&#12470;&#21517;&#65294;
			
			</p></dd><dt><span class="term">
		  -g &lt;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#21517;&gt;
		  
		  </span></dt><dd><p>
			&#35079;&#25968;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#12434;&#25345;&#12388;&#12486;&#12540;&#12502;&#12523;&#12398;&#22580;&#21512;&#12398;&#65292;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12398;&#20986;&#21147;&#12395;&#20351;&#29992;&#12377;&#12427;&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#65294;
			
			</p></dd><dt><span class="term">-b</span></dt><dd><p>
			&#12496;&#12452;&#12490;&#12522;&#12459;&#12540;&#12477;&#12523;&#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#12371;&#12428;&#12399;&#65292;&#23455;&#34892;&#26178;&#38291;&#12434;&#30701;&#12367;&#12375;&#12414;&#12377;&#12364;&#65292;&#12486;&#12540;&#12502;&#12523;&#12398;&#38750;&#12472;&#12458;&#12513;&#12488;&#12522;&#23646;&#24615;&#12364;&#12486;&#12461;&#12473;&#12488;&#12408;&#12398;&#12461;&#12515;&#12473;&#12488;&#12364;&#28961;&#12356;&#22580;&#21512;&#12395;&#12399;&#65292;&#21205;&#20316;&#12375;&#12414;&#12379;&#12435;&#65294;
			
			</p></dd><dt><span class="term">-r</span></dt><dd><p>
			Raw&#12514;&#12540;&#12489;&#65294;<code class="varname">gid</code>&#12501;&#12451;&#12540;&#12523;&#12489;&#12434;&#33853;&#12392;&#12375;&#12383;&#12426;&#65292;&#12459;&#12521;&#12512;&#21517;&#12434;&#12456;&#12473;&#12465;&#12540;&#12503;&#12375;&#12390;&#12399;&#12356;&#12369;&#12414;&#12379;&#12435;&#65294;
			
			</p></dd><dt><span class="term">-d</span></dt><dd><p>
			&#24460;&#26041;&#20114;&#25563;: &#21476;&#12356;(1.0.0&#20197;&#21069;)&#12398;PostGIS&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12363;&#12425;&#12480;&#12531;&#12503;&#12377;&#12427;&#38555;&#12395;3&#27425;&#20803;&#12398;&#12471;&#12455;&#12540;&#12503;&#12501;&#12449;&#12452;&#12523;&#12434;&#20986;&#21147;&#12375;&#12414;&#12377; (&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12399;2&#27425;&#20803;&#12395;&#12394;&#12426;&#12414;&#12377;)&#65294; PostGIS-1.0.0+&#12363;&#12425;&#22987;&#12417;&#12390;&#12356;&#12427;&#22580;&#21512;&#12399;&#27425;&#20803;&#12399;&#23436;&#20840;&#12395;&#21453;&#26144;&#12373;&#12428;&#12414;&#12377;&#65294;
			
			</p></dd></dl></div></div></div><div class="sect1" title="4.6. &#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12377;&#12427;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id286818023"></a>4.6. 
	&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12377;&#12427;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#id286818134">4.6.1. 
	  GiST&#12452;&#12531;&#12487;&#12463;&#12473;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286818189">4.6.2. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;
	  
	  </a></span></dt></dl></div><p>
	&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;&#22823;&#12365;&#12394;&#12487;&#12540;&#12479;&#12475;&#12483;&#12488;&#12434;&#25345;&#12388;&#31354;&#38291;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12398;&#21033;&#29992;&#12434;&#21487;&#33021;&#12395;&#12377;&#12427;&#12418;&#12398;&#12391;&#12377;&#65294;&#12452;&#12531;&#12487;&#12463;&#12473;&#12394;&#12375;&#12391;&#12399;&#65292;&#12501;&#12451;&#12540;&#12481;&#12515;&#12540;&#12398;&#26908;&#32034;&#12391;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12398;&#20840;&#12524;&#12467;&#12540;&#12489;&#12434;&#12300;&#12471;&#12540;&#12465;&#12531;&#12471;&#12515;&#12523;&#12473;&#12461;&#12515;&#12531;&#12301;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#12388;&#12369;&#12427;&#12371;&#12392;&#12391;&#65292;&#12487;&#12540;&#12479;&#12434;&#26908;&#32034;&#26408;&#12395;&#32068;&#32340;&#21270;&#12375;&#12390;&#65292;&#29305;&#23450;&#12398;&#12524;&#12467;&#12540;&#12489;&#12434;&#30330;&#35211;&#12377;&#12427;&#12383;&#12417;&#12398;&#26908;&#32034;&#12434;&#12424;&#12426;&#26089;&#12367;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294; PostgreSQL&#12399;&#65292;B-Tree, R-Tree, GiST &#12398;&#19977;&#31278;&#39006;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#12487;&#12501;&#12457;&#12523;&#12488;&#12391;&#12469;&#12509;&#12540;&#12488;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
	
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		B-Tree&#12399;&#65292;&#25968;&#23383;&#65292;&#25991;&#23383;&#65292;&#26085;&#20184;&#12392;&#12356;&#12387;&#12383;&#65292;&#12402;&#12392;&#12388;&#12398;&#36600;&#12395;&#27839;&#12387;&#12390;&#12477;&#12540;&#12488;&#12391;&#12365;&#12427;&#12487;&#12540;&#12479;&#12395;&#20351;&#29992;&#12375;&#12414;&#12377;&#65294; GIS&#12487;&#12540;&#12479;&#12399;&#21512;&#29702;&#30340;&#12395;&#12402;&#12392;&#12388;&#12398;&#36600;&#12395;&#27839;&#12387;&#12383;&#12477;&#12540;&#12488;&#12399;&#12391;&#12365;&#12414;&#12379;&#12435; ((0,0)&#12392;(0,1)&#12392;(1,0)&#12391;&#22823;&#12365;&#12356;&#12398;&#12399;&#12393;&#12428;&#12391;&#12375;&#12423;&#12358;?)&#12398;&#12391;&#65292;B-Tree&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;&#12399;&#65292;&#12371;&#12371;&#12391;&#12399;&#20351;&#12360;&#12414;&#12379;&#12435;&#65294;
		
		</p></li><li class="listitem"><p>
		R-Tree&#12399;&#12487;&#12540;&#12479;&#12434;&#38263;&#26041;&#24418;&#12395;&#20998;&#21106;&#12375;&#12390;&#65292;&#12373;&#12425;&#12395;&#12381;&#12398;&#38263;&#26041;&#24418;&#12434;&#23567;&#12373;&#12356;&#38263;&#26041;&#24418;&#12395;&#20998;&#21106;&#12375;&#12390;&#12356;&#12387;&#12383;&#12418;&#12398;&#12391;&#12377;&#65294;R-Tree&#12399;&#12356;&#12367;&#12388;&#12363;&#12398;&#31354;&#38291;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12391;GIS&#12487;&#12540;&#12479;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12395;&#20351;&#12431;&#12428;&#12414;&#12377;&#12364;&#65292;PostgreSQL&#12398;R-Tree&#23455;&#35013;&#12399;&#65292;GiST&#23455;&#35013;&#12411;&#12393;&#12395;&#12525;&#12496;&#12473;&#12488;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
		
		</p></li><li class="listitem"><p>
		GiST(Generalized Search Trees)&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;&#12487;&#12540;&#12479;&#12434;&#12300;&#19968;&#26041;&#12408;&#12398;&#12418;&#12398;&#12301;(&#35379;&#27880;: &#12300;&#24038;&#20596;&#12395;&#12354;&#12427;&#12418;&#12398;&#12301;&#12300;&#19978;&#20596;&#12395;&#12354;&#12427;&#12418;&#12398;&#12301;&#12394;&#12393;)&#65292;&#12300;&#12458;&#12540;&#12496;&#12521;&#12483;&#12503;&#12377;&#12427;&#12418;&#12398;&#12301;&#65292;&#12300;&#20013;&#12395;&#12354;&#12427;&#12418;&#12398;&#12301;&#12395;&#20998;&#21106;&#12375;&#12390;&#65292; GIS&#12487;&#12540;&#12479;&#12434;&#21547;&#12416;&#24133;&#24195;&#12356;&#12487;&#12540;&#12479;&#22411;&#12391;&#20351;&#12360;&#12427;&#12424;&#12358;&#12395;&#12375;&#12383;&#12418;&#12398;&#12391;&#12377;&#65294; PostGIS&#12391;&#12399;GIS&#12487;&#12540;&#12479;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20184;&#12369;&#12427;&#12383;&#12417;&#12395;GiST&#12398;&#19978;&#12391;R-Tree&#12452;&#12531;&#12487;&#12463;&#12473;&#23455;&#35013;&#12434;&#20351;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
		
		</p></li></ul></div><div class="sect2" title="4.6.1. GiST&#12452;&#12531;&#12487;&#12463;&#12473;"><div class="titlepage"><div><div><h3 class="title"><a name="id286818134"></a>4.6.1. 
	  GiST&#12452;&#12531;&#12487;&#12463;&#12473;
	  
	  </h3></div></div></div><p>
	  GiST&#12399;&#12300;&#27726;&#29992;&#30340;&#12394;&#26908;&#32034;&#26408;(Generalized Search Tree)&#12301;&#12398;&#24847;&#21619;&#12391;&#65292;&#12452;&#12531;&#12487;&#12483;&#12463;&#12473;&#12398;&#19968;&#33324;&#21270;&#12373;&#12428;&#12383;&#24418;&#24335;&#12391;&#12377;&#65294;GIS&#12452;&#12531;&#12487;&#12463;&#12473;&#12395;&#21152;&#12360;&#12390;&#65292;GiST&#12399;&#36890;&#24120;&#12398;B-Tree&#12452;&#12531;&#12487;&#12463;&#12473;&#12395;&#24467;&#12431;&#12394;&#12356;&#20840;&#12390;&#12398;&#31278;&#39006;&#12398;&#19981;&#35215;&#21063;&#12394;&#12487;&#12540;&#12479;&#27083;&#36896;(&#25972;&#25968;&#37197;&#21015;, &#12473;&#12506;&#12463;&#12488;&#12521;&#12523;&#12487;&#12540;&#12479; &#12394;&#12393;)&#12398;&#26908;&#32034;&#36895;&#24230;&#12434;&#21521;&#19978;&#12373;&#12379;&#12427;&#12383;&#12417;&#12395;&#20351;&#12356;&#12414;&#12377;&#65294; 
	  
	  </p><p>
	  &#12402;&#12392;&#12383;&#12403;GIS&#12487;&#12540;&#12479;&#12486;&#12540;&#12502;&#12523;&#12364;&#25968;&#21315;&#34892;&#12434;&#36229;&#12360;&#12383;&#12425;&#65292;&#31354;&#38291;&#26908;&#32034;&#12398;&#36895;&#24230;&#21521;&#19978;&#12398;&#12383;&#12417;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12375;&#12383;&#12367;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358; (&#12371;&#12428;&#12399;&#23646;&#24615;&#26908;&#32034;&#12391;&#12394;&#12356;&#22580;&#21512;&#12391;&#12377;&#65294;&#23646;&#24615;&#12391;&#12375;&#12383;&#12425;&#36890;&#24120;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#23646;&#24615;&#12501;&#12451;&#12540;&#12523;&#12489;&#12395;&#36861;&#21152;&#12375;&#12414;&#12377;)&#65294;
	  
	  </p><p>
	  GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#12300;&#12472;&#12458;&#12513;&#12488;&#12522;&#12301;&#12459;&#12521;&#12512;&#12395;&#36861;&#21152;&#12377;&#12427;&#12383;&#12417;&#12398;&#25991;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><p>
	  </p><pre class="programlisting">CREATE INDEX [&#12452;&#12531;&#12487;&#12463;&#12473;&#21517;] ON [&#12486;&#12540;&#12502;&#12523;&#21517;] USING GIST ( [&#12472;&#12458;&#12513;&#12488;&#12522;&#12459;&#12521;&#12512;&#21517;] ); </pre><p>
	  
	  </p><p>
	  &#31354;&#38291;&#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#27083;&#31689;&#12399;&#65292;&#35336;&#31639;&#37327;&#12434;&#38598;&#20013;&#12373;&#12379;&#12390;&#34892;&#12431;&#12428;&#12414;&#12377;&#65294;100&#19975;&#34892;&#12398;&#12486;&#12540;&#12502;&#12523;&#12391;&#65292;300MHz&#12398;Solaris&#27231;&#12391;&#12399;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#27083;&#31689;&#12395;&#27010;&#12397;1&#26178;&#38291;&#12363;&#12363;&#12426;&#12414;&#12375;&#12383;&#65294;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12375;&#12383;&#12354;&#12392;&#12399;&#65292;&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12398;&#26368;&#36969;&#21270;&#12395;&#20351;&#12358;&#12383;&#12417;&#65292;&#27425;&#12398;&#12424;&#12358;&#12395;PostgreSQL&#12395;&#12486;&#12540;&#12502;&#12523;&#32113;&#35336;&#24773;&#22577;&#12398;&#21454;&#38598;&#12434;&#12373;&#12379;&#12427;&#12371;&#12392;&#12364;&#37325;&#35201;&#12391;&#12377;&#65294; 
	  
	  </p><p>
	  </p><pre class="programlisting">VACUUM ANALYZE [&#12486;&#12540;&#12502;&#12523;&#21517;] [&#12459;&#12521;&#12512;&#21517;];
-- &#27425;&#12398;&#12463;&#12456;&#12522;&#12399;PostgreSQL 7.4&#20197;&#21069;&#12391;&#12398;&#12415;&#24517;&#35201;&#12391;&#12377;
SELECT UPDATE_GEOMETRY_STATS([table_name], [column_name]);</pre><p>
	  
	  </p><p>
	  GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;PostgreSQL&#12398;R-Tree&#12452;&#12531;&#12487;&#12463;&#12473;&#12424;&#12426;&#20108;&#12388;&#12398;&#21033;&#28857;&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;&#12414;&#12378;&#65292;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;&#12300;NULL&#12475;&#12540;&#12501;&#12301;&#65292;&#12377;&#12394;&#12431;&#12385;null&#20516;&#12434;&#21547;&#12416;&#12452;&#12531;&#12487;&#12463;&#12473;&#12459;&#12521;&#12512;&#12391;&#21033;&#29992;&#12391;&#12365;&#12427;&#12371;&#12392;&#12391;&#12377;&#65294;&#27425;&#12395;&#65292;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12364;PostgreSQL&#12391;8K&#12398;&#12506;&#12540;&#12472;&#12469;&#12452;&#12474;&#12434;&#36229;&#12360;&#12427;&#12469;&#12452;&#12474;&#12434;&#25201;&#12358;&#38555;&#12395;&#37325;&#35201;&#12394;&#12300;&#19981;&#21487;&#36870;&#12301;&#12398;&#27010;&#24565;&#12434;&#25345;&#12387;&#12390;&#12356;&#12427;&#12371;&#12392;&#12391;&#12377;&#65294;&#19981;&#21487;&#36870;&#12395;&#12377;&#12427;&#12371;&#12392;&#12395;&#12424;&#12387;&#12390;&#65292;PostgreSQL&#12399;&#65292;&#12452;&#12531;&#12487;&#12463;&#12473;&#12395;&#12362;&#12369;&#12427;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12300;&#37325;&#35201;&#12394;&#12301;&#37096;&#20998;&#65292;GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#22580;&#21512;&#12395;&#12399;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12395;&#12394;&#12426;&#12414;&#12377;&#12364;&#65292;&#12371;&#12428;&#12398;&#12415;&#12434;&#32013;&#12417;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294; R-Tree&#12452;&#12531;&#12487;&#12463;&#12473;&#12391;8K&#12434;&#36229;&#12360;&#12427;GIS&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#27083;&#31689;&#12375;&#12424;&#12358;&#12392;&#12377;&#12427;&#12392;&#65292;&#22833;&#25943;&#12375;&#12414;&#12377;&#65294;
	  
	  </p></div><div class="sect2" title="4.6.2. &#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="id286818189"></a>4.6.2. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;
	  
	  </h3></div></div></div><p>
	  &#36890;&#24120;&#65292;&#12452;&#12531;&#12487;&#12463;&#12473;&#12399;&#35211;&#12360;&#12394;&#12356;&#12392;&#12371;&#12429;&#12391;&#12487;&#12540;&#12479;&#12450;&#12463;&#12475;&#12473;&#12398;&#36895;&#24230;&#21521;&#19978;&#12434;&#34892;&#12356;&#12414;&#12377;&#65294;&#12377;&#12394;&#12431;&#12385;&#65292;&#12402;&#12392;&#12383;&#12403;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#27083;&#31689;&#12373;&#12428;&#12383;&#12425;&#65292;&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12490;&#12399;&#36879;&#36942;&#30340;&#12395;&#65292;&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12398;&#36895;&#24230;&#12434;&#21521;&#19978;&#12373;&#12379;&#12427;&#12383;&#12417;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#24773;&#22577;&#12434;&#20351;&#12358;&#12409;&#12365;&#26178;&#12434;&#21028;&#26029;&#12375;&#12414;&#12377;&#65294;&#27531;&#24565;&#12394;&#12371;&#12392;&#12395;&#65292;PostgreSQL&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12490;&#12399;&#65292;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#20351;&#29992;&#12395;&#12388;&#12356;&#12390;&#21313;&#20998;&#12395;&#26368;&#36969;&#21270;&#12391;&#12365;&#12378;&#65292;&#26178;&#12293;&#65292;&#26908;&#32034;&#12391;&#31354;&#38291;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#29992;&#12377;&#12409;&#12365;&#12394;&#12398;&#12395;&#65292;&#12486;&#12540;&#12502;&#12523;&#12434;&#38918;&#12395;&#36208;&#26619;&#12377;&#12427;&#12371;&#12392;&#12364;&#12354;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><p>
	  &#31354;&#38291;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#20351;&#29992;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;(&#12414;&#12383;&#12399;&#23646;&#24615;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#12381;&#12398;&#21839;&#38988;&#12398;&#12383;&#12417;&#12395;&#20351;&#29992;&#12373;&#12428;&#12390;&#12356;&#12394;&#12356;)&#22580;&#21512;&#65292;&#27425;&#12398;&#20108;&#12388;&#12398;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
	  
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  &#12414;&#12378;&#65292;&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12490;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#20351;&#29992;&#12414;&#12431;&#12426;&#12398;&#21028;&#26029;&#12395;&#21033;&#29992;&#12377;&#12427;&#12383;&#12417;&#12398;&#12424;&#12426;&#33391;&#12356;&#24773;&#22577;&#12434;&#25552;&#20379;&#12377;&#12427;&#12383;&#12417;&#12395;&#65292;&#20516;&#12398;&#25968;&#37327;&#12392;&#20998;&#25955;&#12395;&#38306;&#12377;&#12427;&#32113;&#35336;&#24773;&#22577;&#12364;&#21454;&#38598;&#12373;&#12428;&#12383;&#12363;&#12434;&#30906;&#35469;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;&#65294; PostgreSQL 7.4&#20197;&#21069;&#12391;&#12399;&#65292;<span class="command"><strong>update_geometry_stats([&#12486;&#12540;&#12502;&#12523;&#21517;, &#12459;&#12521;&#12512;&#21517;])</strong></span>(&#20998;&#25955;&#35336;&#31639;)&#12392;<span class="command"><strong>VACUUM ANALYZE [&#12486;&#12540;&#12502;&#12523;&#21517;] [&#12459;&#12521;&#12512;&#21517;]</strong></span>(&#20516;&#12398;&#25968;&#37327;&#12398;&#35336;&#31639;)&#12392;&#12434;&#23455;&#34892;&#12375;&#12414;&#12377;&#65294; PostgreSQL 8.0&#12395;&#12388;&#12356;&#12390;&#12399;&#65292; <span class="command"><strong>VACUUM ANALYZE</strong></span>&#12434;&#23455;&#34892;&#12377;&#12427;&#12371;&#12392;&#12391;&#21516;&#12376;&#21205;&#20316;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;&#24120;&#12395;&#23450;&#26399;&#30340;&#12394;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12408;&#12398;vacuum&#12434;&#23455;&#34892;&#12377;&#12409;&#12365;&#12391;&#12377;&#65294;&#22810;&#12367;&#12398;PostgreSQL&#12398;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#12456;&#12540;&#12472;&#12455;&#12531;&#12488;&#12399;&#65292;&#38289;&#25955;&#26178;&#12398;cron&#12472;&#12519;&#12502;&#12392;&#12375;&#12390;&#23450;&#26399;&#30340;&#12395;<span class="command"><strong>VACUUM</strong></span>&#12434;&#23455;&#34892;&#12375;&#12414;&#12377;&#65294;
		  
		  </p></li><li class="listitem"><p>
		  vacuum&#12364;&#20685;&#12363;&#12394;&#12356;&#12394;&#12425;&#65292;<span class="command"><strong>SET ENABLE_SEQSCAN=OFF</strong></span>&#12467;&#12510;&#12531;&#12489;&#12391;&#65292;&#12503;&#12521;&#12531;&#12490;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#24773;&#22577;&#12434;&#24375;&#21046;&#30340;&#12395;&#20351;&#12431;&#12379;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;&#12371;&#12398;&#12467;&#12510;&#12531;&#12489;&#12399;&#25511;&#12360;&#30446;&#12395;&#23455;&#34892;&#12377;&#12409;&#12365;&#12391;&#65292;&#12363;&#12388;&#65292;&#31354;&#38291;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#12354;&#12427;&#12463;&#12456;&#12522;&#19978;&#12391;&#12398;&#12415;&#20351;&#12358;&#12409;&#12365;&#12391;&#12377;&#65294;&#19968;&#33324;&#30340;&#12395;&#35328;&#12358;&#12392;&#65292;&#36890;&#24120;&#12398;B-Tree&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;&#12409;&#12365;&#26178;&#12395;&#38306;&#12375;&#12390;&#12354;&#12394;&#12383;&#12364;&#30693;&#12387;&#12390;&#12356;&#12427;&#12371;&#12392;&#12424;&#12426;&#12418;&#65292;&#12503;&#12521;&#12531;&#12490;&#12399;&#12424;&#12426;&#33391;&#12367;&#30693;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294;&#12463;&#12456;&#12522;&#12434;&#23455;&#34892;&#12375;&#12383;&#12425;&#65292;<code class="varname">ENABLE_SEQSCAN</code>&#35373;&#23450;&#12434;&#25147;&#12375;&#12390;&#65292;&#20182;&#12398;&#12463;&#12456;&#12522;&#12391;&#12399;&#36890;&#24120;&#36890;&#12426;&#12503;&#12521;&#12531;&#12490;&#12434;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12434;&#32771;&#12360;&#12427;&#12409;&#12365;&#12391;&#12377;&#65294;
		  
		  </p><div class="note" title="&#27880;&#24847;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
			version 0.6&#12391;&#12399;&#65292;<code class="varname">ENABLE_SEQSCAN</code>&#12391;&#12503;&#12521;&#12531;&#12490;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12431;&#12379;&#12427;&#12371;&#12392;&#12399;&#37325;&#35201;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#65294;
			
			</p></td></tr></table></div></li><li class="listitem"><p>
		  &#12418;&#12375;&#65292;&#38918;&#12395;&#36208;&#26619;&#12377;&#12427;&#38555;&#12398;&#12467;&#12473;&#12488;&#12392;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;&#38555;&#12398;&#12467;&#12473;&#12488;&#12392;&#12434;&#27604;&#36611;&#12375;&#12390;&#12503;&#12521;&#12531;&#12490;&#12364;&#38291;&#36949;&#12387;&#12390;&#12356;&#12427;&#12371;&#12392;&#12395;&#27671;&#20184;&#12356;&#12383;&#12425;&#65292;postgresql.conf &#12391;random_page_cost&#12398;&#20516;&#12434;&#28187;&#12425;&#12375;&#12390;&#12415;&#12427;&#12363;&#65292;"SET random_page_cost=#" &#12434;&#20351;&#12387;&#12390;&#12415;&#12390;&#12367;&#12384;&#12373;&#12356;&#65294;&#12371;&#12398;&#12497;&#12521;&#12513;&#12540;&#12479;&#12398;&#12487;&#12501;&#12457;&#12523;&#12488;&#20516;&#12399;4&#12391;&#12377;&#12364;&#65292;&#12381;&#12428;&#12434;1&#12363;2&#12395;&#12375;&#12390;&#12415;&#12390;&#19979;&#12373;&#12356;&#65294;&#20516;&#12434;&#28187;&#12425;&#12377;&#12371;&#12392;&#12391;&#65292;&#12503;&#12521;&#12531;&#12490;&#12364;&#12424;&#12426;&#12452;&#12531;&#12487;&#12463;&#12473;&#12473;&#12461;&#12515;&#12531;&#12434;&#34892;&#12358;&#20670;&#21521;&#12395;&#12394;&#12426;&#12414;&#12377;&#65294;
		  
		  </p></li></ul></div></div></div><div class="sect1" title="4.7. &#35079;&#38609;&#12394;&#12463;&#12456;&#12522;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id286818722"></a>4.7. 
	&#35079;&#38609;&#12394;&#12463;&#12456;&#12522;
	
	</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="ch04.html#id286818738">4.7.1. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#21033;&#28857;&#12434;&#20351;&#12358;
	  
	  </a></span></dt><dt><span class="sect2"><a href="ch04.html#id286818798">4.7.2. 
	  &#31354;&#38291;SQL&#12398;&#20363;
	  
	  </a></span></dt></dl></div><p>
	&#31354;&#38291;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#27231;&#33021;&#12398;<span class="emphasis"><em>&#12524;&#12478;&#12531;&#12487;&#12540;&#12488;&#12523;</em></span>&#12399;&#65292;&#36890;&#24120;&#12399;&#12487;&#12473;&#12463;&#12488;&#12483;&#12503;GIS&#12395;&#27714;&#12417;&#12427;&#27231;&#33021;&#12434;&#65292;&#12487;&#12540;&#12479;&#12505;&#12540;&#12473;&#20869;&#37096;&#12398;&#12463;&#12456;&#12522;&#12391;&#23455;&#29694;&#12375;&#12390;&#12377;&#12427;&#12371;&#12392;&#12391;&#12377;&#65294; PostGIS&#12434;&#21177;&#26524;&#30340;&#12395;&#20351;&#29992;&#12377;&#12427;&#12395;&#12399;&#65292;&#12393;&#12398;&#31354;&#38291;&#27231;&#33021;&#12364;&#26377;&#21177;&#12363;&#12434;&#30693;&#12426;&#65292;&#12414;&#12383;&#65292;&#33391;&#22909;&#12394;&#12497;&#12501;&#12457;&#12540;&#12510;&#12531;&#12473;&#12434;&#25552;&#20379;&#12377;&#12427;&#25152;&#12395;&#36969;&#20999;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#12354;&#12427;&#12371;&#12392;&#12364;&#20445;&#35388;&#12373;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12364;&#27714;&#12417;&#12425;&#12428;&#12414;&#12377;&#65294;
	
	</p><div class="sect2" title="4.7.1. &#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#21033;&#28857;&#12434;&#20351;&#12358;"><div class="titlepage"><div><div><h3 class="title"><a name="id286818738"></a>4.7.1. 
	  &#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#21033;&#28857;&#12434;&#20351;&#12358;
	  
	  </h3></div></div></div><p>
	  &#12463;&#12456;&#12522;&#12434;&#20316;&#25104;&#12377;&#12427;&#12392;&#12365;&#65292;&amp;&amp;&#12398;&#12424;&#12358;&#12394;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12434;&#22522;&#28310;&#12392;&#12375;&#12383;&#28436;&#31639;&#23376;&#12395;&#12424;&#12387;&#12390;&#12398;&#12415;GiST&#31354;&#38291;&#12452;&#12531;&#12487;&#12463;&#12473;&#12398;&#21033;&#28857;&#12364;&#20986;&#12390;&#12367;&#12427;&#12371;&#12392;&#12384;&#12369;&#12399;&#35226;&#12360;&#12390;&#12362;&#12367;&#12371;&#12392;&#12364;&#37325;&#35201;&#12391;&#12377;&#65294; <code class="varname">distance()</code>&#12398;&#12424;&#12358;&#12394;&#38306;&#25968;&#12391;&#12399;&#28436;&#31639;&#12398;&#26368;&#36969;&#21270;&#12434;&#34892;&#12358;&#12383;&#12417;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12379;&#12435;&#65294;&#12383;&#12392;&#12360;&#12400;&#65292;&#27425;&#12398;&#12463;&#12456;&#12522;&#12391;&#12399;&#65292;&#22823;&#12365;&#12394;&#12486;&#12540;&#12502;&#12523;&#12391;&#12399;&#26412;&#24403;&#12395;&#36933;&#12367;&#12394;&#12426;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">SELECT the_geom
FROM geom_table
WHERE ST_Distance(the_geom, ST_GeomFromText('POINT(100000 200000)', -1)) &lt; 100</pre><p>
	  &#12371;&#12398;&#12463;&#12456;&#12522;&#12399;&#65292;geom_table&#12395;&#12362;&#12369;&#12427; (100000, 200000) &#12398;&#28857;&#12363;&#12425;&#36317;&#38626;&#12364;100&#21336;&#20301;&#20197;&#20869;&#12395;&#12354;&#12427;&#20840;&#12390;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#12434;&#36984;&#25246;&#12375;&#12414;&#12377;&#65294;&#12371;&#12428;&#12399;&#65292;&#12486;&#12540;&#12502;&#12523;&#20869;&#12395;&#12354;&#12427;&#12381;&#12428;&#12382;&#12428;&#12398;&#28857;&#12392;&#25351;&#23450;&#12375;&#12383;&#28857;&#12392;&#12398;&#36317;&#38626;&#12434;&#35336;&#31639;&#12377;&#12427;&#65292;&#12377;&#12394;&#12431;&#12385;&#65292;&#12381;&#12428;&#12382;&#12428;&#12398;&#34892;&#12391;&#12402;&#12392;&#12388;&#12398;<code class="varname">ST_Distance()</code>&#35336;&#31639;&#12434;&#34892;&#12358;&#12383;&#12417;&#65292;&#36933;&#12367;&#12394;&#12427;&#12398;&#12391;&#12377;&#65294;&#12371;&#12428;&#12399;&#65292;&amp;&amp;&#28436;&#31639;&#23376;&#12434;&#20351;&#12358;&#12392;&#65292;&#27714;&#12417;&#12425;&#12428;&#12427;&#36317;&#38626;&#35336;&#31639;&#12398;&#37327;&#12434;&#28187;&#12425;&#12377;&#12371;&#12392;&#12391;&#22238;&#36991;&#12391;&#12365;&#12414;&#12377;&#65294;&#27425;&#12398;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#65294;
	  
	  </p><pre class="programlisting">SELECT the_geom
FROM geom_table
WHERE the_geom &amp;&amp; 'BOX3D(90900 190900, 100100 200100)'::box3d
  AND
ST_Distance(the_geom, ST_GeomFromText('POINT(100000 200000)', -1)) &lt; 100</pre><p>
	  &#12371;&#12398;&#12463;&#12456;&#12522;&#12399;&#65292;&#21516;&#12376;&#12472;&#12458;&#12513;&#12488;&#12522;&#12434;&#36984;&#25246;&#12375;&#12414;&#12377;&#12364;&#65292;&#12424;&#12426;&#21177;&#26524;&#30340;&#12394;&#26041;&#27861;&#12391;&#34892;&#12431;&#12428;&#12414;&#12377;&#65294;the_geom&#12395;GiST&#12452;&#12531;&#12487;&#12463;&#12473;&#12364;&#12354;&#12427;&#12392;&#20206;&#23450;&#12377;&#12427;&#12392;&#65292;&#12463;&#12456;&#12522;&#12503;&#12521;&#12531;&#12490;&#12399;<code class="varname">distance()</code>&#38306;&#25968;&#12398;&#32080;&#26524;&#12434;&#35336;&#31639;&#12377;&#12427;&#21069;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12387;&#12390;&#34892;&#12434;&#28187;&#12425;&#12379;&#12427;&#12392;&#35469;&#35672;&#12375;&#12414;&#12377;&#65294; &amp;&amp;&#28436;&#31639;&#23376;&#12391;&#20351;&#12431;&#12428;&#12390;&#12356;&#12427;<code class="varname">BOX3D</code>&#12472;&#12458;&#12513;&#12488;&#12522;&#12399;&#65292;&#21407;&#28857;&#12434;&#20013;&#24515;&#12392;&#12375;&#12383;&#19968;&#36794; 200&#21336;&#20301;&#12398;&#27491;&#26041;&#24418;&#12391;&#12377;&#65294; &#12371;&#12428;&#12399;&#12300;&#12463;&#12456;&#12522;&#12508;&#12483;&#12463;&#12473;&#12301;&#12391;&#12377;&#65294;&amp;&amp;&#28436;&#31639;&#23376;&#12399; &#32080;&#26524;&#12475;&#12483;&#12488;&#12434;&#12300;&#12463;&#12456;&#12522;&#12508;&#12483;&#12463;&#12473;&#12301;&#12395;&#12458;&#12540;&#12496;&#12521;&#12483;&#12503;&#12377;&#12427;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12434;&#25345;&#12388;&#12472;&#12458;&#12513;&#12488;&#12522;&#12384;&#12369;&#12395;&#32032;&#26089;&#12367;&#28187;&#12425;&#12377;&#12383;&#12417;&#12395;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#12300;&#12463;&#12456;&#12522;&#12508;&#12483;&#12463;&#12473;&#12301;&#12364;&#12472;&#12458;&#12513;&#12488;&#12522;&#12486;&#12540;&#12502;&#12523;&#20840;&#20307;&#12398;&#31684;&#22258;&#12424;&#12426;&#21313;&#20998;&#12395;&#23567;&#12373;&#12356;&#12392;&#20206;&#23450;&#12377;&#12427;&#12392;&#65292;&#34892;&#12431;&#12428;&#12394;&#12369;&#12428;&#12400;&#12394;&#12425;&#12394;&#12356;&#36317;&#38626;&#35336;&#31639;&#12398;&#37327;&#12399;&#21127;&#30340;&#12395;&#28187;&#23569;&#12375;&#12414;&#12377;&#65294;
	  
	  </p><div class="note" title="&#12405;&#12427;&#12414;&#12356;&#12398;&#22793;&#26356;" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: 
		&#12405;&#12427;&#12414;&#12356;&#12398;&#22793;&#26356;
		
		"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[&#27880;&#24847;]" src="images/note.png"></td><th align="left">
		&#12405;&#12427;&#12414;&#12356;&#12398;&#22793;&#26356;
		
		</th></tr><tr><td align="left" valign="top"><p>
		PostGIS 1.3.0&#12391;&#12399;&#65292;ST_Disjoint&#12392;ST_Relate&#12398;&#27880;&#30446;&#12377;&#12409;&#12365;&#20363;&#22806;&#12364;&#12354;&#12426;&#12414;&#12377;&#12364;&#65292;&#12411;&#12392;&#12435;&#12393;&#12398;&#12472;&#12458;&#12513;&#12488;&#12522;&#38306;&#20418;&#38306;&#25968;&#12399;&#26263;&#40665;&#30340;&#12394;&#12496;&#12454;&#12531;&#12487;&#12451;&#12531;&#12464;&#12508;&#12483;&#12463;&#12473;&#12458;&#12540;&#12496;&#12521;&#12483;&#12503;&#28436;&#31639;&#23376;&#12434;&#21547;&#12435;&#12391;&#12356;&#12414;&#12377;&#65294;
		
		</p></td></tr></table></div></div><div class="sect2" title="4.7.2. &#31354;&#38291;SQL&#12398;&#20363;"><div class="titlepage"><div><div><h3 class="title"><a name="id286818798"></a>4.7.2. 
	  &#31354;&#38291;SQL&#12398;&#20363;
	  
	  </h3></div></div></div><p>
	  &#26412;&#31680;&#12398;&#20363;&#12391;&#12399;&#65292;&#32218;&#24418;&#12398;&#36947;&#65292;&#12509;&#12522;&#12468;&#12531;&#12398;&#33258;&#27835;&#20307;&#22659;&#30028;&#65292;&#12398;&#20108;&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12434;&#20351;&#12356;&#12414;&#12377;&#65294;&#12486;&#12540;&#12502;&#12523;&#12398;&#23450;&#32681;&#12399;&#65292;<code class="varname">bc_roads</code>&#12395;&#12388;&#12356;&#12390;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">Column      | Type              | Description
------------+-------------------+-------------------
gid         | integer           | Unique ID
name        | character varying | Road Name
the_geom    | geometry          | Location Geometry (Linestring)</pre><p>
	  <code class="varname">bc_municipality</code>&#12398;&#23450;&#32681;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
	  
	  </p><pre class="programlisting">Column     | Type              | Description
-----------+-------------------+-------------------
gid        | integer           | Unique ID
code       | integer           | Unique ID
name       | character varying | City / Town Name
the_geom   | geometry          | Location Geometry (Polygon)</pre><div class="qandaset" title="Frequently Asked Questions"><a name="id286818832"></a><dl><dt>4.7.2.1. <a href="ch04.html#id286818834">
			&#36947;&#36335;&#12398;&#32207;&#24310;&#38263;&#12399;km&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt><dt>4.7.2.2. <a href="ch04.html#id286818859">
			&#12503;&#12522;&#12531;&#12473;&#12472;&#12519;&#12540;&#12472;&#24066;&#12398;&#22823;&#12365;&#12373;&#12399;ha&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt><dt>4.7.2.3. <a href="ch04.html#id286818885">
			&#30476;&#20869;&#12391;&#26368;&#12418;&#22823;&#12365;&#12394;&#38754;&#31309;&#12434;&#25345;&#12388;&#33258;&#27835;&#20307;&#12399;&#12393;&#12371;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt><dt>4.7.2.4. <a href="ch04.html#id286818915">
			&#21508;&#33258;&#27835;&#20307;&#20869;&#12395;&#21547;&#12414;&#12428;&#12427;&#36947;&#36335;&#12398;&#32207;&#24310;&#38263;&#12399;&#12356;&#12367;&#12425;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt><dt>4.7.2.5. <a href="ch04.html#id286818946">
			&#12503;&#12522;&#12531;&#12473;&#12472;&#12519;&#12540;&#12472;&#24066;&#20869;&#12398;&#20840;&#12390;&#12398;&#36947;&#36335;&#12363;&#12425;&#12394;&#12427;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;
			
			</a></dt><dt>4.7.2.6. <a href="ch04.html#id286818970">
			&#12499;&#12463;&#12488;&#12522;&#12450;&#24030;&#12398;&#12300;&#12480;&#12464;&#12521;&#12473;&#36890;&#12426;&#12301;&#12398;&#38263;&#12373;&#12399;km&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt><dt>4.7.2.7. <a href="ch04.html#id286818990">
			&#20840;&#20307;&#12398;&#20013;&#12391;&#26368;&#12418;&#22823;&#12365;&#12356;&#33258;&#27835;&#20307;&#12509;&#12522;&#12468;&#12531;&#12399;&#12393;&#12428;&#12391;&#12375;&#12423;&#12358;?
			
			</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="4.7.2.1."><td align="left" valign="top"><a name="id286818834"></a><a name="id286818836"></a><p><b>4.7.2.1.</b></p></td><td align="left" valign="top"><p>
			&#36947;&#36335;&#12398;&#32207;&#24310;&#38263;&#12399;km&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
			&#12371;&#12398;&#21839;&#38988;&#12399;&#65292;&#27425;&#12398;&#12424;&#12358;&#12394;&#12392;&#12390;&#12418;&#21336;&#32020;&#12394;SQL&#12391;&#31572;&#12360;&#12434;&#24471;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294;
			
			</p><pre class="programlisting">SELECT sum(ST_Length(the_geom))/1000 AS km_roads FROM bc_roads;

km_roads
------------------
70842.1243039643
(1 row)</pre></td></tr><tr class="question" title="4.7.2.2."><td align="left" valign="top"><a name="id286818859"></a><a name="id286818861"></a><p><b>4.7.2.2.</b></p></td><td align="left" valign="top"><p>
			&#12503;&#12522;&#12531;&#12473;&#12472;&#12519;&#12540;&#12472;&#24066;&#12398;&#22823;&#12365;&#12373;&#12399;ha&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
			&#12371;&#12398;&#12463;&#12456;&#12522;&#12391;&#12399;&#65292;&#23646;&#24615;&#26465;&#20214;(municipality name, &#33258;&#27835;&#20307;&#21517;)&#12395;&#31354;&#38291;&#35336;&#31639;(&#38754;&#31309;)&#12434;&#20341;&#29992;&#12375;&#12390;&#12356;&#12414;&#12377;&#65294;
			
			</p><pre class="programlisting">SELECT
  ST_Area(the_geom)/10000 AS hectares
FROM bc_municipality
WHERE name = 'PRINCE GEORGE';

hectares
------------------
32657.9103824927
(1 row)</pre></td></tr><tr class="question" title="4.7.2.3."><td align="left" valign="top"><a name="id286818885"></a><a name="id286818887"></a><p><b>4.7.2.3.</b></p></td><td align="left" valign="top"><p>
			&#30476;&#20869;&#12391;&#26368;&#12418;&#22823;&#12365;&#12394;&#38754;&#31309;&#12434;&#25345;&#12388;&#33258;&#27835;&#20307;&#12399;&#12393;&#12371;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
			&#12371;&#12398;&#12463;&#12456;&#12522;&#12399;&#65292;&#31354;&#38291;&#35336;&#28204;&#12434;&#12463;&#12456;&#12522;&#26465;&#20214;&#12395;&#25345;&#12387;&#12390;&#12365;&#12390;&#12356;&#12414;&#12377;&#65294;&#12371;&#12398;&#21839;&#38988;&#12408;&#12398;&#12450;&#12503;&#12525;&#12540;&#12481;&#12398;&#26041;&#27861;&#12399;&#12356;&#12367;&#12388;&#12363;&#12354;&#12426;&#12414;&#12377;&#12364;&#65292;&#26368;&#12418;&#21177;&#29575;&#30340;&#12394;&#12398;&#12399;&#27425;&#12398;&#36890;&#12426;&#12391;&#12377;&#65294;
			
			</p><pre class="programlisting">SELECT
  name,
  ST_Area(the_geom)/10000 AS hectares
FROM
  bc_municipality
ORDER BY hectares DESC
LIMIT 1;

name           | hectares
---------------+-----------------
TUMBLER RIDGE  | 155020.02556131
(1 row)</pre><p>
			&#12371;&#12398;&#12463;&#12456;&#12522;&#12398;&#31572;&#12360;&#12434;&#20986;&#12377;&#12383;&#12417;&#12395;&#12399;&#65292;&#20840;&#12390;&#12398;&#12509;&#12522;&#12468;&#12531;&#12398;&#38754;&#31309;&#12434;&#27714;&#12417;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#19979;&#12373;&#12356;&#65294;&#12371;&#12398;&#12463;&#12456;&#12522;&#12434;&#22810;&#12367;&#23455;&#34892;&#12377;&#12427;&#22580;&#21512;&#65292;&#24615;&#33021;&#21521;&#19978;&#12398;&#12383;&#12417;&#12395;&#12486;&#12540;&#12502;&#12523;&#12395;"are"&#12459;&#12521;&#12512;&#12434;&#36861;&#21152;&#12375;&#12390;&#65292;&#21029;&#12398;&#12452;&#12531;&#12487;&#12463;&#12473;&#12434;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#12424;&#12358;&#12395;&#12377;&#12427;&#12398;&#12399;&#65292;&#24847;&#32681;&#12398;&#12354;&#12427;&#12371;&#12392;&#12391;&#12377;&#65294;&#32080;&#26524;&#12434;&#36317;&#38626;&#12395;&#12388;&#12356;&#12390;&#38477;&#38918;&#12395;&#20006;&#12409;&#26367;&#12360;&#65292;PostgreSQL&#12398;"LIMIT"&#12467;&#12510;&#12531;&#12489;&#12434;&#29992;&#12356;&#12427;&#12371;&#12392;&#12391;&#65292; max()&#12398;&#12424;&#12358;&#12394;&#38598;&#35336;&#38306;&#25968;&#12434;&#20351;&#12431;&#12378;&#12395;&#65292;&#31777;&#21336;&#12395;&#26368;&#12418;&#22823;&#12365;&#12356;&#20516;&#12434;&#38598;&#35336;&#38306;&#25968;&#12434;&#24471;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#65294; 
			
			</p></td></tr><tr class="question" title="4.7.2.4."><td align="left" valign="top"><a name="id286818915"></a><a name="id286818917"></a><p><b>4.7.2.4.</b></p></td><td align="left" valign="top"><p>
			&#21508;&#33258;&#27835;&#20307;&#20869;&#12395;&#21547;&#12414;&#12428;&#12427;&#36947;&#36335;&#12398;&#32207;&#24310;&#38263;&#12399;&#12356;&#12367;&#12425;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
			&#12371;&#12428;&#12399;&#65292;&#20108;&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12363;&#12425;&#12487;&#12540;&#12479;&#12434;&#25345;&#12385;&#36796;&#12435;&#12391;(&#12472;&#12519;&#12452;&#12531;&#12375;&#12390;)&#12356;&#12427;&#12398;&#12391;&#12300;&#31354;&#38291;&#12472;&#12519;&#12452;&#12531;&#12301;&#12398;&#20363;&#12391;&#12377;&#65294;&#12375;&#12363;&#12375;&#65292;&#12472;&#12519;&#12452;&#12531;&#12398;&#26465;&#20214;&#12392;&#12375;&#12390;&#20849;&#36890;&#12461;&#12540;&#12398;&#19978;&#12391;&#25509;&#32154;&#12377;&#12427;&#12392;&#12356;&#12358;&#26222;&#36890;&#12398;&#12522;&#12524;&#12540;&#12471;&#12519;&#12531;&#12398;&#12420;&#12426;&#26041;&#12391;&#12394;&#12367;&#31354;&#38291;&#12452;&#12531;&#12479;&#12521;&#12463;&#12471;&#12519;&#12531;&#26465;&#20214;("contained")&#12434;&#20351;&#12387;&#12390;&#12356;&#12414;&#12377;&#65294; 
			
			</p><pre class="programlisting">SELECT
  m.name,
  sum(ST_Length(r.the_geom))/1000 as roads_km
FROM
  bc_roads AS r,
  bc_municipality AS m
WHERE
  ST_Contains(m.the_geom,r.the_geom)
GROUP BY m.name
ORDER BY roads_km;

name                        | roads_km
----------------------------+------------------
SURREY                      | 1539.47553551242
VANCOUVER                   | 1450.33093486576
LANGLEY DISTRICT            | 833.793392535662
BURNABY                     | 773.769091404338
PRINCE GEORGE               | 694.37554369147
...</pre><p>
			&#12371;&#12398;&#12463;&#12456;&#12522;&#12399;&#65292;&#12486;&#12540;&#12502;&#12523;&#20869;&#12398;&#20840;&#12390;&#12398;&#36947;&#36335;&#12398;&#21512;&#35336;&#12434;&#26368;&#32066;&#32080;&#26524;(&#12371;&#12398;&#20363;&#12391;&#12398;&#35441;&#12391;&#12377;&#12364;&#32004;250Km&#12398;&#36947;&#12391;&#12377;)&#12395;&#12414;&#12392;&#12417;&#12425;&#12428;&#12427;&#12398;&#12391;&#65292;&#23569;&#12375;&#26178;&#38291;&#12364;&#12363;&#12363;&#12426;&#12414;&#12377;&#65294;&#12424;&#12426;&#23567;&#12373;&#12356;&#12458;&#12540;&#12496;&#12524;&#12452;(&#25968;&#30334;&#12398;&#36947;&#36335;&#12391;&#25968;&#21315;&#12398;&#12524;&#12467;&#12540;&#12489;)&#12398;&#22580;&#21512;&#65292;&#24540;&#31572;&#12399;&#12418;&#12387;&#12392;&#26089;&#12367;&#12394;&#12426;&#12360;&#12414;&#12377;&#65294; 
			
			</p></td></tr><tr class="question" title="4.7.2.5."><td align="left" valign="top"><a name="id286818946"></a><a name="id286818948"></a><p><b>4.7.2.5.</b></p></td><td align="left" valign="top"><p>
			&#12503;&#12522;&#12531;&#12473;&#12472;&#12519;&#12540;&#12472;&#24066;&#20869;&#12398;&#20840;&#12390;&#12398;&#36947;&#36335;&#12363;&#12425;&#12394;&#12427;&#12486;&#12540;&#12502;&#12523;&#12434;&#20316;&#12427;
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>
			&#12371;&#12428;&#12399;&#12300;&#12458;&#12540;&#12496;&#12524;&#12452;&#12301;&#12398;&#20363;&#12391;&#12377;&#65294;&#12388;&#12414;&#12426;&#65292;&#20108;&#12388;&#12398;&#12486;&#12540;&#12502;&#12523;&#12434;&#21462;&#24471;&#12375;&#12390;&#65292;&#31354;&#38291;&#30340;&#12395;&#20999;&#12426;&#21462;&#12425;&#12428;&#12383;&#32080;&#26524;&#12363;&#12425;&#12394;&#12427;&#26032;&#12375;&#12356;&#12486;&#12540;&#12502;&#12523;&#12434;&#20986;&#21147;&#12375;&#12414;&#12377;&#65294;&#19978;&#12391;&#31034;&#12375;&#12383;&#12300;&#31354;&#38291;&#12472;&#12519;&#12452;&#12531;&#12301;&#12392;&#36949;&#12356;&#65292;&#12371;&#12398;&#12463;&#12456;&#12522;&#12399;&#23455;&#38555;&#12395;&#26032;&#12375;&#12356;&#12472;&#12458;&#12513;&#12488;&#12522;&#12434;&#29983;&#25104;&#12375;&#12414;&#12377;&#65294;&#29983;&#25104;&#12373;&#12428;&#12383;&#12458;&#12540;&#12496;&#12524;&#12452;&#12399;&#12479;&#12540;&#12508;&#12398;&#12363;&#12363;&#12387;&#12383;&#31354;&#38291;&#12472;&#12519;&#12452;&#12531;&#12415;&#12383;&#12356;&#12394;&#12418;&#12398;&#12391;&#65292;&#12424;&#12426;&#30906;&#12363;&#12394;&#35299;&#26512;&#20316;&#26989;&#12395;&#20415;&#21033;&#12391;&#12377;&#65294; 
			
			</p><pre class="programlisting">CREATE TABLE pg_roads as
SELECT
  ST_Intersection(r.the_geom, m.the_geom) AS intersection_geom,
  ST_Length(r.the_geom) AS rd_orig_length,
  r.*
FROM
  bc_roads AS r,
  bc_municipality AS m
WHERE  m.name = 'PRINCE GEORGE' AND ST_Intersects(r.the_geom, m.the_geom);</pre></td></tr><tr class="question" title="4.7.2.6."><td align="left" valign="top"><a name="id286818970"></a><a name="id286818972"></a><p><b>4.7.2.6.</b></p></td><td align="left" valign="top"><p>
			&#12499;&#12463;&#12488;&#12522;&#12450;&#24030;&#12398;&#12300;&#12480;&#12464;&#12521;&#12473;&#36890;&#12426;&#12301;&#12398;&#38263;&#12373;&#12399;km&#34920;&#35352;&#12391;&#12356;&#12367;&#12425;&#12395;&#12394;&#12427;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><pre class="programlisting">SELECT
  sum(ST_Length(r.the_geom))/1000 AS kilometers
FROM
  bc_roads r,
  bc_municipality m
WHERE  r.name = 'Douglas St' AND m.name = 'VICTORIA'
	AND ST_Contains(m.the_geom, r.the_geom) ;

kilometers
------------------
4.89151904172838
(1 row)</pre></td></tr><tr class="question" title="4.7.2.7."><td align="left" valign="top"><a name="id286818990"></a><a name="id286818993"></a><p><b>4.7.2.7.</b></p></td><td align="left" valign="top"><p>
			&#20840;&#20307;&#12398;&#20013;&#12391;&#26368;&#12418;&#22823;&#12365;&#12356;&#33258;&#27835;&#20307;&#12509;&#12522;&#12468;&#12531;&#12399;&#12393;&#12428;&#12391;&#12375;&#12423;&#12358;?
			
			</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><pre class="programlisting">SELECT gid, name, ST_Area(the_geom) AS area
FROM bc_municipality
WHERE ST_NRings(the_geom) &gt; 1
ORDER BY area DESC LIMIT 1;

gid  | name         | area
-----+--------------+------------------
12   | SPALLUMCHEEN | 257374619.430216
(1 row)</pre></td></tr></tbody></table></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03.html">&#21069;&#12398;&#12506;&#12540;&#12472;</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch05.html">&#27425;&#12398;&#12506;&#12540;&#12472;</a></td></tr><tr><td width="40%" align="left" valign="top">&#31532;3&#31456; 
  &#12424;&#12367;&#12354;&#12427;&#36074;&#21839;
  
   </td><td width="20%" align="center"><a accesskey="h" href="index.html">&#12507;&#12540;&#12512;</a></td><td width="40%" align="right" valign="top"> &#31532;5&#31456; 
  PostGIS&#12434;&#20351;&#12358;: &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12434;&#27083;&#31689;&#12377;&#12427;
  
  </td></tr></table></div></body></html>
