<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ST_CoverageSimplify</title><link rel="stylesheet" type="text/css" href="docbook.css"><link rel="stylesheet" type="text/css" href="../style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="PostGIS 3.4.0 マニュアル"><link rel="up" href="reference.html#Coverage" title="7.15. カバレッジ"><link rel="prev" href="ST_CoverageInvalidEdges.html" title="ST_CoverageInvalidEdges"><link rel="next" href="ST_CoverageUnion.html" title="ST_CoverageUnion"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_CoverageSimplify</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_CoverageInvalidEdges.html">戻る</a> </td><th width="60%" align="center">7.15. カバレッジ</th><td width="20%" align="right"> <a accesskey="n" href="ST_CoverageUnion.html">次へ</a></td></tr></table></div><div class="refentry"><a name="ST_CoverageSimplify"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>ST_CoverageSimplify — ポリゴンカバレッジのエッジを単純化するウィンドウ関数。</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_CoverageSimplify</b>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">tolerance</var>, boolean  <var class="pdparam">simplifyBoundary = true</var><code>)</code>;</p></div></div><div class="refsection"><a name="idp261641248"></a><h2>説明</h2><p>ポリゴンカバレッジ内でポリゴンのエッジを単純化するウィンドウ関数です。この単純化ではカバレッジのトポロジが保持されます。単純化した出力ポリゴンは共有するエッジに沿って構成され、妥当なカバレッジを形成します。 </p><p>単純化では<a class="ulink" href="https://en.wikipedia.org/wiki/Visvalingam%E2%80%93Whyatt_algorithm" target="_top">Visvalingam–Whyatt algorithm</a>版を使います。<em class="parameter"><code>tolerance</code></em>パラメータは距離の単位を持ち、単純化する三角形面積の平方根とだいたい同じです。 </p><p>カバレッジの「内部の」エッジ (二つのポリゴンに共有されている)だけを単純化するには、<em class="parameter"><code>simplifyBoundary</code></em>パラメタをFALSEに設定します。</p><div class="note"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[注記]" src="../images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>入力が妥当なカバレッジでない場合には、出力に予期しない何か (境界のインタセクト、共有されているように見えるのに分かれている境界)が出現する可能性があります。カバレッジが妥当かどうかを判断するには<a class="xref" href="ST_CoverageInvalidEdges.html" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>を使います。 </p></td></tr></table></div><p class="availability">Availability: 3.4.0</p><p class="geos_requirement">GEOS 3.12.0以上が必要です</p></div><div class="refsection"><a name="idp261647136"></a><h2>例</h2><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col><col></colgroup><tbody><tr><td style="border-right: 1px solid ; "><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="../images/st_coveragesimplify01.png"><div class="caption"><p>入力カバレッジ</p></div></div></div><p>
        </p></td><td style=""><p>
        </p><div class="informalfigure"><div class="mediaobject"><img src="../images/st_coveragesimplify02.png"><div class="caption"><p>カバレッジの単純化</p></div></div></div><p>
        </p></td></tr></tbody></table></div><pre class="programlisting">WITH coverage(id, geom) AS (VALUES
  (1, 'POLYGON ((160 150, 110 130, 90 100, 90 70, 60 60, 50 10, 30 30, 40 50, 25 40, 10 60, 30 100, 30 120, 20 170, 60 180, 90 190, 130 180, 130 160, 160 150), (40 160, 50 140, 66 125, 60 100, 80 140, 90 170, 60 160, 40 160))'::geometry),
  (2, 'POLYGON ((40 160, 60 160, 90 170, 80 140, 60 100, 66 125, 50 140, 40 160))'::geometry),
  (3, 'POLYGON ((110 130, 160 50, 140 50, 120 33, 90 30, 50 10, 60 60, 90 70, 90 100, 110 130))'::geometry),
  (4, 'POLYGON ((160 150, 150 120, 160 90, 160 50, 110 130, 160 150))'::geometry)
)
SELECT id, ST_AsText(ST_CoverageSimplify(geom, 30) OVER ())
  FROM coverage;

 id |               st_astext
----+---------------------------------------
  1 | POLYGON ((160 150, 110 130, 50 10, 10 60, 20 170, 90 190, 160 150), (40 160, 66 125, 90 170, 40 160))
  2 | POLYGON ((40 160, 66 125, 90 170, 40 160))
  3 | POLYGON ((110 130, 160 50, 50 10, 110 130))
  3 | POLYGON ((160 150, 160 50, 110 130, 160 150))
      </pre></div><div class="refsection"><a name="idp261659552"></a><h2>関連情報</h2><p>
        <a class="xref" href="ST_CoverageInvalidEdges.html" title="ST_CoverageInvalidEdges">ST_CoverageInvalidEdges</a>
      </p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_CoverageInvalidEdges.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="reference.html#Coverage">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_CoverageUnion.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">ST_CoverageInvalidEdges </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> ST_CoverageUnion</td></tr></table></div></body></html>
