<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ST_CoverageInvalidEdges</title><link rel="stylesheet" type="text/css" href="docbook.css"><link rel="stylesheet" type="text/css" href="../style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="PostGIS 3.4.0 マニュアル"><link rel="up" href="reference.html#Coverage" title="7.15. カバレッジ"><link rel="prev" href="ST_VoronoiPolygons.html" title="ST_VoronoiPolygons"><link rel="next" href="ST_CoverageSimplify.html" title="ST_CoverageSimplify"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ST_CoverageInvalidEdges</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ST_VoronoiPolygons.html">戻る</a> </td><th width="60%" align="center">7.15. カバレッジ</th><td width="20%" align="right"> <a accesskey="n" href="ST_CoverageSimplify.html">次へ</a></td></tr></table></div><div class="refentry"><a name="ST_CoverageInvalidEdges"></a><div class="titlepage"></div><div class="refnamediv"><h2>名前</h2><p>ST_CoverageInvalidEdges — ポリゴンが妥当なカバレッジの形成に失敗する位置を検索するウィンドウ関数。</p></div><div class="refsynopsisdiv"><h2>概要</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_CoverageInvalidEdges</b>(</code>geometry winset  <var class="pdparam">geom</var>, float8  <var class="pdparam">tolerance = 0</var><code>)</code>;</p></div></div><div class="refsection"><a name="idp261621408"></a><h2>説明</h2><p>ウィンドウパーティション内のポリゴンが妥当なポリゴンカバレッジを形成するかどうかチェックするウィンドウ関数です。個々のポリゴン内の不正なエッジの位置 (あるなら)を示す線形インジケータを返します。 </p><p>次の条件を満たすなら妥当なポリゴンの集合は妥当なカバレッジです: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>オーバラップなし</strong></span> - ポリゴン同士がオーバラップしない (ポリゴンの内部でインタセクトしない) </p></li><li class="listitem"><p><span class="bold"><strong>エッジ一致</strong></span> - 共有エッジに沿った頂点が同一 </p></li></ul></div><p>ウィンドウ関数として、入力ポリゴンごとに値が返されます。妥当性条件の一つ以上に違反するポリゴンについては返り値は、問題のあるエッジを含むMULTILINESTRINGです。カバレッジ妥当なポリゴンに対してはNULLを返します。非ポリゴンや空ジオメトリに対してもNULL値が返ります。</p><p>この条件では、周囲のポリゴンがエッジ一致になっている限りは、妥当なカバレッジは穴 (ポリゴン間の隙間)を含むことができます。しかしながら、非常に小さい隙間は、望まれないものとされることがしばしばあります。<em class="parameter"><code>tolerance</code></em>パラメタが0でない距離で指定されている場合には、小さい隙間を形成するエッジば不正なものとして返されます。 </p><p>カバレッジ妥当性のチェックがなされたポリゴンも妥当なジオメトリです。<a class="xref" href="ST_IsValid.html" title="ST_IsValid">ST_IsValid</a>でチェックできます。 </p><p class="availability">Availability: 3.4.0</p><p class="geos_requirement">GEOS 3.12.0以上が必要です</p></div><div class="refsection"><a name="idp261628448"></a><h2>例</h2><div class="informalfigure"><div class="mediaobject"><img src="../images/st_coverageinvalidedges01.png"><div class="caption"><p>オーバラップと頂点不一致により発生した不正エッジ</p></div></div></div><pre class="programlisting">WITH coverage(id, geom) AS (VALUES
  (1, 'POLYGON ((10 190, 30 160, 40 110, 100 70, 120 10, 10 10, 10 190))'::geometry),
  (2, 'POLYGON ((100 190, 10 190, 30 160, 40 110, 50 80, 74 110.5, 100 130, 140 120, 140 160, 100 190))'::geometry),
  (3, 'POLYGON ((140 190, 190 190, 190 80, 140 80, 140 190))'::geometry),
  (4, 'POLYGON ((180 40, 120 10, 100 70, 140 80, 190 80, 180 40))'::geometry)
)
SELECT id, ST_AsText(ST_CoverageInvalidEdges(geom) OVER ())
  FROM coverage;

 id |               st_astext
----+---------------------------------------
  1 | LINESTRING (40 110, 100 70)
  2 | MULTILINESTRING ((100 130, 140 120, 140 160, 100 190), (40 110, 50 80, 74 110.5))
  3 | LINESTRING (140 80, 140 190)
  3 | null
      </pre><pre class="programlisting">-- Test entire table for coverage validity
SELECT true = ALL (
    SELECT ST_CoverageInvalidEdges(geom) OVER () IS NULL
    FROM coverage
    );
      </pre></div><div class="refsection"><a name="idp261632416"></a><h2>関連情報</h2><p><a class="xref" href="ST_IsValid.html" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="ST_CoverageUnion.html" title="ST_CoverageUnion">ST_CoverageUnion</a>, <a class="xref" href="ST_CoverageSimplify.html" title="ST_CoverageSimplify">ST_CoverageSimplify</a> </p></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ST_VoronoiPolygons.html">戻る</a> </td><td width="20%" align="center"><a accesskey="u" href="reference.html#Coverage">上に戻る</a></td><td width="40%" align="right"> <a accesskey="n" href="ST_CoverageSimplify.html">次へ</a></td></tr><tr><td width="40%" align="left" valign="top">ST_VoronoiPolygons </td><td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td><td width="40%" align="right" valign="top"> ST_CoverageSimplify</td></tr></table></div></body></html>
