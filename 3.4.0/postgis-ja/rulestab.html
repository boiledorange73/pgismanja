<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>rules table</title><link rel="stylesheet" type="text/css" href="docbook.css"><link rel="stylesheet" type="text/css" href="../style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="PostGIS 3.4.0 マニュアル"><link rel="up" href="Extras.html#Address_Standardizer_Tables" title="11.1.3. 住所標準化テーブル"><link rel="prev" href="stdaddr.html" title="stdaddr"><link rel="next" href="lextab.html" title="lex table"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">rules table</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="stdaddr.html">Prev</a> </td><th width="60%" align="center">11.1.3. 住所標準化テーブル</th><td width="20%" align="right"> <a accesskey="n" href="lextab.html">Next</a></td></tr></table></div><div class="refentry"><a name="rulestab"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>rules table — 規則テーブルには、住所入力順列トークンから標準化した出力順列への対応付けに関する規則の集合が入ります。それぞれの規則は、入力トークン、-1 (終端)、出力トークン、-1、規則の種類を示す数字、規則の階級、からなります。</p></div><div class="refsection"><a name="idp361445792"></a><h2>説明</h2><p>規則テーブルには、少なくとも次に示すカラムが必要です。それ以外にカラムを追加してもかまいません。 </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">id</span></dt><dd><p>テーブルの主キー</p></dd><dt><span class="term">rule</span></dt><dd><p>規則を示す文字列フィールド。 <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-rec--" target="_top">PAGC Address Standardizer Rule records</a>に詳細情報があります。</p><p>ruleには、入力トークンを表現する非負の整数、終端を示す-1、郵便属性を表現する非負の整数、終端を示す-1、規則種別を表現する整数、規則の階級を示す整数からなる集合が入ります。規則は0 (最低)から17 (最高)まであります。</p><p>たとえば、<code class="code">2 0 2 22 3 -1 5 5 6 7 3 -1 2 6</code>は、<span class="emphasis"><em>TYPE NUMBER TYPE DIRECT QUALIF</em></span>なる入力トークン順列が、<span class="emphasis"><em>STREET STREET SUFTYP SUFDIR QUALIF</em></span>なる出力トークン順列に対応付けされ、規則はARC_Cで、階級は6となります。 </p><p>対応する出力トークンは<a class="xref" href="stdaddr.html" title="stdaddr">stdaddr</a>に挙げています。</p></dd></dl></div></div><div class="refsection"><a name="rule_input_tokens"></a><h2>入力トークン</h2><p>個々の規則は、入力トークン順列、終端を示す<code class="code">-1</code>の順です。<a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#ss12.2" target="_top">PAGC Input Tokens</a>から引用した正当な入力トークンは次の通りです。</p><p><span class="bold"><strong>書式ベースの入力トークン</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">AMPERS</span></dt><dd><p>(13) アンパサンド (&amp;)は、"and"という語を短縮するために、よく使われます。</p></dd><dt><span class="term">DASH</span></dt><dd><p>(9) 区切り記号。</p></dd><dt><span class="term">DOUBLE</span></dt><dd><p>(21) 二つの文字の順列。しばしば識別子に用いられます。</p></dd><dt><span class="term">FRACT</span></dt><dd><p>(25) ときどき"civic nunber"または"unit number" (訳注: 各戸に付けられる番号)で使われます。</p></dd><dt><span class="term">MIXED</span></dt><dd><p>(23) 英数文字列。識別子に用います。</p></dd><dt><span class="term">NUMBER</span></dt><dd><p>(0) 数字からなる文字列。</p></dd><dt><span class="term">ORD</span></dt><dd><p>(15) "First"や"1st"といったものを表現する文字列。しばしばストリート名の中で使われています。</p></dd><dt><span class="term">ORD</span></dt><dd><p>(18) 一つの文字。</p></dd><dt><span class="term">WORD</span></dt><dd><p>(1) 任意長を持つ文字列です。一つの文字はSINGLEおよびWORDの両方になりえます。</p></dd></dl></div><p><span class="bold"><strong>機能ベースの入力トークン</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">BOXH</span></dt><dd><p>(14) 私書箱を示すために使われる語です。たとえば <span class="emphasis"><em>Box</em></span>または<span class="emphasis"><em>PO Box</em></span>です。</p></dd><dt><span class="term">BUILDH</span></dt><dd><p>(19) 建物またはその複合体を示すための語で、通常は前置語になります。たとえば<span class="emphasis"><em>Tower 7A</em></span>では<span class="emphasis"><em>Tower</em></span>が該当します。</p></dd><dt><span class="term">BUILDT</span></dt><dd><p>(24) 建物またはその複合体を示すために使われる語または略語で、通常は後置語になります。たとえば<span class="emphasis"><em>Shopping Centre</em></span>です。</p></dd><dt><span class="term">DIRECT</span></dt><dd><p>(22) 方位を示す語です。たとえば <span class="emphasis"><em>North</em></span>です。</p></dd><dt><span class="term">MILE</span></dt><dd><p>(20) 距離標の住所を示す語です。</p></dd><dt><span class="term">ROAD</span></dt><dd><p>(6) 高速道路と道路を示す語または略語です。たとえば<span class="emphasis"><em>Interstate 5</em></span>の<span class="emphasis"><em>Interstate</em></span>です。</p></dd><dt><span class="term">RR</span></dt><dd><p>(8) 地方集配路線を示す語または略語です。たとえば<span class="emphasis"><em>RR</em></span>です。</p></dd><dt><span class="term">TYPE</span></dt><dd><p>(2) ストリート種別を示す語または略語です。たとえば<span class="emphasis"><em>ST</em></span>や<span class="emphasis"><em>AVE</em></span>です。</p></dd><dt><span class="term">UNITH</span></dt><dd><p>(16) 内部の部分住所を示す語または略語です。たとえば<span class="emphasis"><em>APT</em></span>や<span class="emphasis"><em>UNIT</em></span>です。</p></dd></dl></div><p><span class="bold"><strong>郵便型入力トークン</strong></span></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">QUINT</span></dt><dd><p>(28) 5桁の番号。ZIPコードです。</p></dd><dt><span class="term">QUAD</span></dt><dd><p>(29) 4桁の番号。ZIP4です。</p></dd><dt><span class="term">PCH</span></dt><dd><p>(27) 英数3文字の順列です。カナダの郵便番号の先頭3文字であるFSAを示します。</p></dd><dt><span class="term">PCT</span></dt><dd><p>(26) 英数3文字の順列です。カナダの郵便番号の末尾3文字です。</p></dd></dl></div><p><span class="bold"><strong>ストップワード</strong></span></p><p>STOPWORD (訳注: 処理対象外とする語)はWORDと結合します。規則で、複数のWORDとSTOPWORDの列は、単一のWORDトークンで表現されます。</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">STOPWORD</span></dt><dd><p>(7) 重要性が低い語で、パース時に省かれます。たとえば<span class="emphasis"><em>THE</em></span>が該当します。</p></dd></dl></div></div><div class="refsection"><a name="idp361500704"></a><h2>出力トークン</h2><p>1番目の-1 (終端)の後に、出力トークンが続き、その後に<code class="code">-1</code>が続きます。対応する出力トークンの番号は、<a class="xref" href="stdaddr.html" title="stdaddr">stdaddr</a>に挙げています。許されるものは、規則の種類に依存します。それぞれの規則種別で有効なトークンは<a class="xref" href="rulestab.html#rule_types_rank" title="規則種別と階級">the section called “規則種別と階級”</a>に挙げています。</p></div><div class="refsection"><a name="rule_types_rank"></a><h2>規則種別と階級</h2><p>規則の最後の部分は規則種別で、次に挙げるものの一つが示すものです。この後には階級が続きます。規則は0 (最低) から17 (最高)までに階級付けされます。</p><p><span class="bold"><strong>MACRO_C</strong></span></p><p>(トークン番号 = "<span class="bold"><strong>0</strong></span>") <span class="emphasis"><em>PLACE STATE ZIP</em></span>のようなMACRO節をパースするための規則のクラス。</p><p><span class="bold"><strong>MACRO_C出力トークン</strong></span> (<a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>からの引用)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">CITY</span></dt><dd><p>(トークン番号 "10") たとえば"Albany" (訳注: ニューヨーク州の州都)等。</p></dd><dt><span class="term">STATE</span></dt><dd><p>(トークン番号 "11") たとえば"NY" (訳注: ニューヨーク州)等。</p></dd><dt><span class="term">NATION</span></dt><dd><p>(トークン番号 "12") ほとんどの参照ファイル内で使われない属性です。たとえば"USA"等。</p></dd><dt><span class="term">POSTAL</span></dt><dd><p>(トークン番号 "13") (SADS elements "ZIP CODE" , "PLUS 4" ). 米国Zip (郵便番号)とカナダ郵便番号の両方で使われます。</p></dd></dl></div><p><span class="bold"><strong>MICRO_C</strong></span></p><p>(トークン番号 = "<span class="bold"><strong>1</strong></span>") 完全なMICRO節 (House, street, sufdir, predir, pretyp, suftype, qualif等)をパースするための規則のクラス (ARC_CとCIVIC_Cの和)。建物フェーズでは使われません。</p><p><span class="bold"><strong>MICRO_C 出力トークン</strong></span> (<a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>からの引用)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">HOUSE</span></dt><dd><p>文字列 (トークン番号<code class="code">1</code>): ストリートの番号です。<code class="code">75 State Street</code>では <span class="emphasis"><em>75</em></span>にあたります。</p></dd><dt><span class="term">predir</span></dt><dd><p>文字列 (トークン番号<code class="code">2</code>): North, South, East, Westといった、ストリート名の方角前置語です。</p></dd><dt><span class="term">qual</span></dt><dd><p>文字列 (トークン番号 <code class="code">3</code>): ストリート名の修飾前置語です。<code class="code">3715 OLD HIGHWAY 99</code>では<span class="emphasis"><em>OLD</em></span>にあたります。</p></dd><dt><span class="term">pretype</span></dt><dd><p>文字列 (トークン番号 <code class="code">4</code>): STREET PREFIX TYPE (ストリート名の前置詞の種別)</p></dd><dt><span class="term">street</span></dt><dd><p>文字列 (トークン番号 <code class="code">5</code>): ストリート名</p></dd><dt><span class="term">suftype</span></dt><dd><p>文字列 (トークン番号 <code class="code">6</code>): St, Ave, Cir等の後置詞の種別です。ストリート名に続いて記述されるものです。<code class="code">75 State Street</code>では<span class="emphasis"><em>STREET</em></span>が該当します。</p></dd><dt><span class="term">sufdir</span></dt><dd><p>文字列 (トークン番号 <code class="code">7</code>): ストリート名に続くNorth, South, East, Westといった、ストリート名の方角前置語です。<code class="code">3715 TENTH AVENUE WEST</code>では<span class="emphasis"><em>WEST</em></span>が該当します。</p></dd></dl></div><p><span class="bold"><strong>ARC_C</strong></span></p><p>(トークン番号 = "<span class="bold"><strong>2</strong></span>") HOUSE属性を除いたMICRO節をパースするための規則のクラス。MICRO_CからHOUSEトークンを除いた出力トークン集合と同じです。</p><p><span class="bold"><strong>CIVIC_C</strong></span></p><p>(トークン番号 = "<span class="bold"><strong>3</strong></span>") HOUSE属性をパースするための規則のクラス。</p><p><span class="bold"><strong>EXTRA_C</strong></span></p><p>(トークン番号 = "<span class="bold"><strong>4</strong></span>") EXTRA属性 (ジオコーディングから除かれる属性)をパースするための規則のクラス。</p><p><span class="bold"><strong>EXTRA_C 出力トークン</strong></span> (<a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>からの引用)</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">BLDNG</span></dt><dd><p>(トークン番号 <code class="code">0</code>): パースされていない建物識別子と種別。</p></dd><dt><span class="term">BOXH</span></dt><dd><p>(トークン番号 <code class="code">14</code>): <code class="code">BOX 3B</code>内の <span class="bold"><strong>BOX</strong></span>にあたります。</p></dd><dt><span class="term">BOXT</span></dt><dd><p>(トークン番号 <code class="code">15</code>): <code class="code">BOX 3B</code>内の<span class="bold"><strong>3B</strong></span>にあたります。</p></dd><dt><span class="term">RR</span></dt><dd><p>(トークン番号 <code class="code">8</code>): <code class="code">RR 7</code>内の<span class="bold"><strong>RR</strong></span>にあたります。</p></dd><dt><span class="term">UNITH</span></dt><dd><p>(トークン番号 <code class="code">16</code>): <code class="code">APT 3B</code>内の<span class="bold"><strong>APT</strong></span>にあたります。</p></dd><dt><span class="term">UNITT</span></dt><dd><p>(トークン番号<code class="code">17</code>): <code class="code">APT 3B</code>内の<span class="bold"><strong>3B</strong></span>にあたります。</p></dd><dt><span class="term">UNKNWN</span></dt><dd><p>(トークン番号<code class="code">9</code>): その他分類対象外の出力。</p></dd></dl></div></div></div><div class="navfooter"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="stdaddr.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="Extras.html#Address_Standardizer_Tables">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="lextab.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">stdaddr </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> lex table</td></tr></table></div></body></html>
