<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>PostGIS 2.3.0 Manual</title><link rel="stylesheet" type="text/css" href="style.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><meta name="description" content="PostGIS is an extension to the PostgreSQL object-relational database system which allows GIS (Geographic Information Systems) objects to be stored in the database. PostGIS includes support for GiST-based R-Tree spatial indexes, and functions for analysis and processing of GIS objects.  This is the manual for version 2.3.0 This work is licensed under a Creative Commons Attribution-Share Alike 3.0 License. Feel free to use this material any way you like, but we ask that you attribute credit to the PostGIS Project and wherever possible, a link back to http://postgis.net."></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title="PostGIS 2.3.0 Manual"><div class="titlepage"><div><div><h1 class="title"><a name="idp64557648"></a>PostGIS 2.3.0 Manual</h1></div><div><h3 class="corpauthor">The PostGIS Development Group</h3></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>PostGIS is an extension to the PostgreSQL object-relational
      database system which allows GIS (Geographic Information Systems)
      objects to be stored in the database. PostGIS includes support for
      GiST-based R-Tree spatial indexes, and functions for analysis and
      processing of GIS objects.</p><p><span class="inlinemediaobject"><img src="images/PostGIS_logo.png"></span>
            <span class="inlinemediaobject"><img src="images/osgeo_logo.png"></span>
      </p><p>This is the manual for version 2.3.0</p><p><span class="inlinemediaobject"><img src="images/ccbysa.png"></span> This work is licensed under a <a class="ulink" href="http://creativecommons.org/licenses/by-sa/3.0/" target="_top">Creative Commons Attribution-Share Alike 3.0 License</a>.
      Feel free to use this material any way you like, but we ask that you attribute credit to the PostGIS Project
      and wherever possible, a link back to <a class="ulink" href="http://postgis.net" target="_top">http://postgis.net</a>.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#postgis_introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="sect1"><a href="#psc">1.1. Project Steering Committee</a></span></dt><dt><span class="sect1"><a href="#credits_core_present">1.2. Core Contributors Present</a></span></dt><dt><span class="sect1"><a href="#credits_core_past">1.3. Core Contributors Past</a></span></dt><dt><span class="sect1"><a href="#credits_other_contributors">1.4. Other Contributors</a></span></dt><dt><span class="sect1"><a href="#idp64612176">1.5. More Information</a></span></dt></dl></dd><dt><span class="chapter"><a href="#postgis_installation">2. PostGIS Installation</a></span></dt><dd><dl><dt><span class="sect1"><a href="#install_short_version">2.1. Short Version</a></span></dt><dt><span class="sect1"><a href="#install_requirements">2.2. Install Requirements</a></span></dt><dt><span class="sect1"><a href="#install_getting_source">2.3. Getting the Source</a></span></dt><dt><span class="sect1"><a href="#PGInstall">2.4. Compiling and Install from Source: Detailed</a></span></dt><dd><dl><dt><span class="sect2"><a href="#installation_configuration">2.4.1. Configuration</a></span></dt><dt><span class="sect2"><a href="#idp64874960">2.4.2. Building</a></span></dt><dt><span class="sect2"><a href="#make_install_postgis_extensions">2.4.3. Building PostGIS Extensions and Deploying them</a></span></dt><dt><span class="sect2"><a href="#idp64924752">2.4.4. Testing</a></span></dt><dt><span class="sect2"><a href="#idp64936144">2.4.5. Installation</a></span></dt></dl></dd><dt><span class="sect1"><a href="#create_new_db_extensions">2.5. Creating a spatial database using EXTENSIONS</a></span></dt><dt><span class="sect1"><a href="#create_new_db">2.6. Create a spatially-enabled database without using extensions</a></span></dt><dt><span class="sect1"><a href="#installing_pagc_address_standardizer">2.7. Installing and Using the address standardizer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp64994256">2.7.1. Installing Regex::Assemble</a></span></dt></dl></dd><dt><span class="sect1"><a href="#loading_extras_tiger_geocoder">2.8. Installing, Upgrading Tiger Geocoder and loading data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#install_tiger_geocoder_extension">2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension</a></span></dt><dt><span class="sect2"><a href="#install_tiger_geocoder">2.8.2. Tiger Geocoder Enabling your PostGIS database: Not Using Extensions</a></span></dt><dt><span class="sect2"><a href="#tiger_pagc_address_standardizing">2.8.3. Using Address Standardizer Extension with Tiger geocoder</a></span></dt><dt><span class="sect2"><a href="#tiger_geocoder_loading_data">2.8.4. Loading Tiger Data</a></span></dt><dt><span class="sect2"><a href="#upgrade_tiger_geocoder">2.8.5. Upgrading your Tiger Geocoder Install</a></span></dt></dl></dd><dt><span class="sect1"><a href="#templatepostgis">2.9. Create a spatially-enabled database from a template</a></span></dt><dt><span class="sect1"><a href="#upgrading">2.10. Upgrading</a></span></dt><dd><dl><dt><span class="sect2"><a href="#soft_upgrade">2.10.1. Soft upgrade</a></span></dt><dt><span class="sect2"><a href="#hard_upgrade">2.10.2. Hard upgrade</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp65174992">2.11. Common Problems during installation</a></span></dt><dt><span class="sect1"><a href="#idp65184592">2.12. Loader/Dumper</a></span></dt></dl></dd><dt><span class="chapter"><a href="#PostGIS_FAQ">3. PostGIS Frequently Asked Questions</a></span></dt><dt><span class="chapter"><a href="#using_postgis_dbmanagement">4. Using PostGIS: Data Management and Queries</a></span></dt><dd><dl><dt><span class="sect1"><a href="#RefObject">4.1. GIS Objects</a></span></dt><dd><dl><dt><span class="sect2"><a href="#OpenGISWKBWKT">4.1.1. OpenGIS WKB and WKT</a></span></dt><dt><span class="sect2"><a href="#EWKB_EWKT">4.1.2. PostGIS EWKB, EWKT and Canonical Forms</a></span></dt><dt><span class="sect2"><a href="#SQL_MM_Part3">4.1.3. SQL-MM Part 3</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PostGIS_Geography">4.2. PostGIS Geography Type</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Geography_Basics">4.2.1. Geography Basics</a></span></dt><dt><span class="sect2"><a href="#PostGIS_GeographyVSGeometry">4.2.2. When to use Geography Data type over Geometry data type</a></span></dt><dt><span class="sect2"><a href="#PostGIS_Geography_AdvancedFAQ">4.2.3. Geography Advanced FAQ</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp65939152">4.3. Using OpenGIS Standards</a></span></dt><dd><dl><dt><span class="sect2"><a href="#spatial_ref_sys">4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems</a></span></dt><dt><span class="sect2"><a href="#geometry_columns">4.3.2. The GEOMETRY_COLUMNS VIEW</a></span></dt><dt><span class="sect2"><a href="#Create_Spatial_Table">4.3.3. Creating a Spatial Table</a></span></dt><dt><span class="sect2"><a href="#Manual_Register_Spatial_Column">4.3.4. Manually Registering Geometry Columns in geometry_columns</a></span></dt><dt><span class="sect2"><a href="#OGC_Validity">4.3.5. Ensuring OpenGIS compliancy of geometries</a></span></dt><dt><span class="sect2"><a href="#DE-9IM">4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#loading_geometry_data">4.4. Loading GIS (Vector) Data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66402384">4.4.1. Loading Data Using SQL</a></span></dt><dt><span class="sect2"><a href="#shp2pgsql_usage">4.4.2. shp2pgsql: Using the ESRI Shapefile Loader</a></span></dt></dl></dd><dt><span class="sect1"><a href="#retrieving_vector-data">4.5. Retrieving GIS Data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66453072">4.5.1. Using SQL to Retrieve Data</a></span></dt><dt><span class="sect2"><a href="#idp65821392">4.5.2. Using the Dumper</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp66504912">4.6. Building Indexes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gist_indexes">4.6.1. GiST Indexes</a></span></dt><dt><span class="sect2"><a href="#brin_indexes">4.6.2. BRIN Indexes</a></span></dt><dt><span class="sect2"><a href="#idp66523856">4.6.3. Using Indexes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp66532560">4.7. Complex Queries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66534352">4.7.1. Taking Advantage of Indexes</a></span></dt><dt><span class="sect2"><a href="#examples_spatial_sql">4.7.2. Examples of Spatial SQL</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#using_raster_dataman">5. Raster Data Management, Queries, and Applications</a></span></dt><dd><dl><dt><span class="sect1"><a href="#RT_Loading_Rasters">5.1. Loading and Creating Rasters</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_Raster_Loader">5.1.1. Using raster2pgsql to load rasters</a></span></dt><dt><span class="sect2"><a href="#RT_Creating_Rasters">5.1.2. Creating rasters using PostGIS raster functions</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Raster_Catalog">5.2. Raster Catalogs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_Raster_Columns">5.2.1. Raster Columns Catalog</a></span></dt><dt><span class="sect2"><a href="#RT_Raster_Overviews">5.2.2. Raster Overviews</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Raster_Applications">5.3. Building Custom Applications with PostGIS Raster</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_PHP_Output">5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Net_Output_CS">5.3.2. ASP.NET C# Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Java_Console_App">5.3.3. Java console app that outputs raster query as Image file</a></span></dt><dt><span class="sect2"><a href="#RT_PLPython">5.3.4. Use PLPython to dump out images via SQL</a></span></dt><dt><span class="sect2"><a href="#RasterOutput_PSQL">5.3.5. Outputting Rasters with PSQL</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#idp67662544">6. Using PostGIS Geometry: Building Applications</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Using_MapServer">6.1. Using MapServer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67704528">6.1.1. Basic Usage</a></span></dt><dt><span class="sect2"><a href="#idp67724624">6.1.2. Frequently Asked Questions</a></span></dt><dt><span class="sect2"><a href="#idp67741008">6.1.3. Advanced Usage</a></span></dt><dt><span class="sect2"><a href="#idp67749712">6.1.4. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp67756112">6.2. Java Clients (JDBC)</a></span></dt><dt><span class="sect1"><a href="#idp67759056">6.3. C Clients (libpq)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67760080">6.3.1. Text Cursors</a></span></dt><dt><span class="sect2"><a href="#idp67683536">6.3.2. Binary Cursors</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#performance_tips">7. Performance tips</a></span></dt><dd><dl><dt><span class="sect1"><a href="#small_tables_large_objects">7.1. Small tables of large geometries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67856592">7.1.1. Problem description</a></span></dt><dt><span class="sect2"><a href="#idp67859408">7.1.2. Workarounds</a></span></dt></dl></dd><dt><span class="sect1"><a href="#database_clustering">7.2. CLUSTERing on geometry indices</a></span></dt><dt><span class="sect1"><a href="#avoiding_dimension_conversion">7.3. Avoiding dimension conversion</a></span></dt><dt><span class="sect1"><a href="#database_tuning_configuration">7.4. Tuning your configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67873744">7.4.1. Startup</a></span></dt><dt><span class="sect2"><a href="#idp67883472">7.4.2. Runtime</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#reference">8. PostGIS Reference</a></span></dt><dd><dl><dt><span class="sect1"><a href="#PostGIS_Types">8.1. PostgreSQL PostGIS Geometry/Geography/Box Types</a></span></dt><dt><span class="sect1"><a href="#PostGIS_GUC">8.2. PostGIS Grand Unified Custom Variables (GUCs)</a></span></dt><dt><span class="sect1"><a href="#Management_Functions">8.3. Management Functions</a></span></dt><dt><span class="sect1"><a href="#Geometry_Constructors">8.4. Geometry Constructors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Accessors">8.5. Geometry Accessors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Editors">8.6. Geometry Editors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Outputs">8.7. Geometry Outputs</a></span></dt><dt><span class="sect1"><a href="#Operators">8.8. Operators</a></span></dt><dt><span class="sect1"><a href="#Spatial_Relationships_Measurements">8.9. Spatial Relationships and Measurements</a></span></dt><dt><span class="sect1"><a href="#reference_sfcgal">8.10. SFCGAL Functions</a></span></dt><dt><span class="sect1"><a href="#Geometry_Processing">8.11. Geometry Processing</a></span></dt><dt><span class="sect1"><a href="#Linear_Referencing">8.12. Linear Referencing</a></span></dt><dt><span class="sect1"><a href="#Temporal">8.13. Temporal Support</a></span></dt><dt><span class="sect1"><a href="#Long_Transactions_Support">8.14. Long Transactions Support</a></span></dt><dt><span class="sect1"><a href="#Miscellaneous_Functions">8.15. Miscellaneous Functions</a></span></dt><dt><span class="sect1"><a href="#Exceptional_Functions">8.16. Exceptional Functions</a></span></dt></dl></dd><dt><span class="chapter"><a href="#RT_reference">9. Raster Reference</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Raster_Types">9.1. Raster Support Data types</a></span></dt><dt><span class="sect1"><a href="#Raster_Management_Functions">9.2. Raster Management</a></span></dt><dt><span class="sect1"><a href="#Raster_Constructors">9.3. Raster Constructors</a></span></dt><dt><span class="sect1"><a href="#Raster_Accessors">9.4. Raster Accessors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Accessors">9.5. Raster Band Accessors</a></span></dt><dt><span class="sect1"><a href="#Raster_Pixel_Accessors">9.6. Raster Pixel Accessors and Setters</a></span></dt><dt><span class="sect1"><a href="#Raster_Editors">9.7. Raster Editors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Editors">9.8. Raster Band Editors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Stats">9.9. Raster Band Statistics and Analytics</a></span></dt><dt><span class="sect1"><a href="#Raster_Outputs">9.10. Raster Outputs</a></span></dt><dt><span class="sect1"><a href="#Raster_Processing">9.11. Raster Processing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra">9.11.1. Map Algebra</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra_Callbacks">9.11.2. Built-in Map Algebra Callback Functions</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_DEM">9.11.3. DEM (Elevation)</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_Geometry">9.11.4. Raster to Geometry</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Operators">9.12. Raster Operators</a></span></dt><dt><span class="sect1"><a href="#Raster_Relationships">9.13. Raster and Raster Band Spatial Relationships</a></span></dt></dl></dd><dt><span class="chapter"><a href="#RT_FAQ">10. PostGIS Raster Frequently Asked Questions</a></span></dt><dt><span class="chapter"><a href="#Topology">11. Topology</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Topology_Types">11.1. Topology Types</a></span></dt><dt><span class="sect1"><a href="#Topology_Domains">11.2. Topology Domains</a></span></dt><dt><span class="sect1"><a href="#Topology_ManagementFunctions">11.3. Topology and TopoGeometry Management</a></span></dt><dt><span class="sect1"><a href="#Topology_Constructors">11.4. Topology Constructors</a></span></dt><dt><span class="sect1"><a href="#Topology_Editing">11.5. Topology Editors</a></span></dt><dt><span class="sect1"><a href="#Topology_Accessors">11.6. Topology Accessors</a></span></dt><dt><span class="sect1"><a href="#Topology_Processing">11.7. Topology Processing</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Constructors">11.8. TopoGeometry Constructors</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Editors">11.9. TopoGeometry Editors</a></span></dt><dt><span class="sect1"><a href="#TopoGeom_Accessors">11.10. TopoGeometry Accessors</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Outputs">11.11. TopoGeometry Outputs</a></span></dt><dt><span class="sect1"><a href="#Topology_Relationships">11.12. Topology Spatial Relationships</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Address_Standardizer">12. Address Standardizer</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Address_Standardizer_Basics">12.1. How the Parser Works</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Types">12.2. Address Standardizer Types</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Tables">12.3. Address Standardizer Tables</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Functions">12.4. Address Standardizer Functions</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Extras">13. PostGIS Extras</a></span></dt><dd><dl><dt><span class="sect1"><a href="#Tiger_Geocoder">13.1. Tiger Geocoder</a></span></dt></dl></dd><dt><span class="chapter"><a href="#PostGIS_Special_Functions_Index">14. PostGIS Special Functions Index</a></span></dt><dd><dl><dt><span class="sect1"><a href="#PostGIS_Aggregate_Functions">14.1. PostGIS Aggregate Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Window_Functions">14.2. PostGIS Window Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_SQLMM_Functions">14.3. PostGIS SQL-MM Compliant Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_GeographyFunctions">14.4. PostGIS Geography Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_RasterFunctions">14.5. PostGIS Raster Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Geometry_DumpFunctions">14.6. PostGIS Geometry / Geography / Raster Dump Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_BoxFunctions">14.7. PostGIS Box Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_3D_Functions">14.8. PostGIS Functions that support 3D</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Curved_GeometryFunctions">14.9. PostGIS Curved Geometry Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_PS_GeometryFunctions">14.10. PostGIS Polyhedral Surface Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_TypeFunctionMatrix">14.11. PostGIS Function Support Matrix</a></span></dt><dt><span class="sect1"><a href="#NewFunctions">14.12. New, Enhanced or changed PostGIS Functions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#NewFunctions_2_3">14.12.1. PostGIS Functions new or enhanced in 2.3</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_2">14.12.2. PostGIS Functions new or enhanced in 2.2</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_2">14.12.3. PostGIS functions breaking changes in 2.2</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_1">14.12.4. PostGIS Functions new or enhanced in 2.1</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_1">14.12.5. PostGIS functions breaking changes in 2.1</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0">14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0_Changed">14.12.7. PostGIS Functions changed behavior in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_5">14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_4">14.12.9. PostGIS Functions new, behavior changed, or enhanced in 1.4</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_3">14.12.10. PostGIS Functions new in 1.3</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#idp108553936">15. Reporting Problems</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp108554576">15.1. Reporting Software Bugs</a></span></dt><dt><span class="sect1"><a href="#idp108559184">15.2. Reporting Documentation Issues</a></span></dt></dl></dd><dt><span class="appendix"><a href="#release_notes">A. Appendix</a></span></dt><dd><dl><dt><span class="sect1"><a href="#idp108610512">A.1. Release 2.3.0</a></span></dt><dt><span class="sect1"><a href="#idp108633552">A.2. Release 2.2.2</a></span></dt><dt><span class="sect1"><a href="#idp108640592">A.3. Release 2.2.1</a></span></dt><dt><span class="sect1"><a href="#idp108651600">A.4. Release 2.2.0</a></span></dt><dt><span class="sect1"><a href="#idp108726224">A.5. Release 2.1.8</a></span></dt><dt><span class="sect1"><a href="#idp108731600">A.6. Release 2.1.7</a></span></dt><dt><span class="sect1"><a href="#idp108735184">A.7. Release 2.1.6</a></span></dt><dt><span class="sect1"><a href="#idp108743760">A.8. Release 2.1.5</a></span></dt><dt><span class="sect1"><a href="#idp108754128">A.9. Release 2.1.4</a></span></dt><dt><span class="sect1"><a href="#idp108806864">A.10. Release 2.1.3</a></span></dt><dt><span class="sect1"><a href="#idp108814032">A.11. Release 2.1.2</a></span></dt><dt><span class="sect1"><a href="#idp108838480">A.12. Release 2.1.1</a></span></dt><dt><span class="sect1"><a href="#idp108864848">A.13. Release 2.1.0</a></span></dt><dt><span class="sect1"><a href="#idp108991568">A.14. Release 2.0.5</a></span></dt><dt><span class="sect1"><a href="#idp109005648">A.15. Release 2.0.4</a></span></dt><dt><span class="sect1"><a href="#idp109042128">A.16. Release 2.0.3</a></span></dt><dt><span class="sect1"><a href="#idp109054416">A.17. Release 2.0.2</a></span></dt><dt><span class="sect1"><a href="#idp109105232">A.18. Release 2.0.1</a></span></dt><dt><span class="sect1"><a href="#idp109157200">A.19. Release 2.0.0</a></span></dt><dt><span class="sect1"><a href="#idp109196496">A.20. Release 1.5.4</a></span></dt><dt><span class="sect1"><a href="#idp109224016">A.21. Release 1.5.3</a></span></dt><dt><span class="sect1"><a href="#idp109248592">A.22. Release 1.5.2</a></span></dt><dt><span class="sect1"><a href="#idp109265488">A.23. Release 1.5.1</a></span></dt><dt><span class="sect1"><a href="#idp109279056">A.24. Release 1.5.0</a></span></dt><dt><span class="sect1"><a href="#idp109301584">A.25. Release 1.4.0</a></span></dt><dt><span class="sect1"><a href="#idp109326544">A.26. Release 1.3.6</a></span></dt><dt><span class="sect1"><a href="#idp109328208">A.27. Release 1.3.5</a></span></dt><dt><span class="sect1"><a href="#idp109329744">A.28. Release 1.3.4</a></span></dt><dt><span class="sect1"><a href="#idp109331664">A.29. Release 1.3.3</a></span></dt><dt><span class="sect1"><a href="#idp109333200">A.30. Release 1.3.2</a></span></dt><dt><span class="sect1"><a href="#idp109334736">A.31. Release 1.3.1</a></span></dt><dt><span class="sect1"><a href="#idp109336528">A.32. Release 1.3.0</a></span></dt><dt><span class="sect1"><a href="#idp109343952">A.33. Release 1.2.1</a></span></dt><dt><span class="sect1"><a href="#idp109348176">A.34. Release 1.2.0</a></span></dt><dt><span class="sect1"><a href="#idp109351504">A.35. Release 1.1.6</a></span></dt><dt><span class="sect1"><a href="#idp109362000">A.36. Release 1.1.5</a></span></dt><dt><span class="sect1"><a href="#idp109372240">A.37. Release 1.1.4</a></span></dt><dt><span class="sect1"><a href="#idp109383120">A.38. Release 1.1.3</a></span></dt><dt><span class="sect1"><a href="#idp109398864">A.39. Release 1.1.2</a></span></dt><dt><span class="sect1"><a href="#idp109411408">A.40. Release 1.1.1</a></span></dt><dt><span class="sect1"><a href="#idp109443664">A.41. Release 1.1.0</a></span></dt><dt><span class="sect1"><a href="#idp109478096">A.42. Release 1.0.6</a></span></dt><dt><span class="sect1"><a href="#idp109488464">A.43. Release 1.0.5</a></span></dt><dt><span class="sect1"><a href="#idp109501392">A.44. Release 1.0.4</a></span></dt><dt><span class="sect1"><a href="#rel_1.0.3_upgrading">A.45. Release 1.0.3</a></span></dt><dt><span class="sect1"><a href="#idp109528272">A.46. Release 1.0.2</a></span></dt><dt><span class="sect1"><a href="#idp109536208">A.47. Release 1.0.1</a></span></dt><dt><span class="sect1"><a href="#idp109546064">A.48. Release 1.0.0</a></span></dt><dt><span class="sect1"><a href="#idp109555536">A.49. Release 1.0.0RC6</a></span></dt><dt><span class="sect1"><a href="#idp109567184">A.50. Release 1.0.0RC5</a></span></dt><dt><span class="sect1"><a href="#idp109574352">A.51. Release 1.0.0RC4</a></span></dt><dt><span class="sect1"><a href="#idp109586512">A.52. Release 1.0.0RC3</a></span></dt><dt><span class="sect1"><a href="#idp109603152">A.53. Release 1.0.0RC2</a></span></dt><dt><span class="sect1"><a href="#idp109613008">A.54. Release 1.0.0RC1</a></span></dt></dl></dd></dl></div><div class="chapter" title="Chapter 1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a name="postgis_introduction"></a>Chapter 1. Introduction</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#psc">1.1. Project Steering Committee</a></span></dt><dt><span class="sect1"><a href="#credits_core_present">1.2. Core Contributors Present</a></span></dt><dt><span class="sect1"><a href="#credits_core_past">1.3. Core Contributors Past</a></span></dt><dt><span class="sect1"><a href="#credits_other_contributors">1.4. Other Contributors</a></span></dt><dt><span class="sect1"><a href="#idp64612176">1.5. More Information</a></span></dt></dl></div><p>PostGIS was developed by Refractions Research Inc, as a spatial
  database technology research project. Refractions is a GIS and database
  consulting company in Victoria, British Columbia, Canada, specializing in
  data integration and custom software development. We plan on supporting and
  developing PostGIS to support a range of important GIS functionality,
  including full OpenGIS support, advanced topological constructs (coverages,
  surfaces, networks), desktop user interface tools for viewing and editing
  GIS data, and web-based access tools.</p><p>PostGIS is an incubation project of the OSGeo Foundation. PostGIS is being continually improved and funded by many FOSS4G Developers as well
    as corporations all over the world that gain great benefit from its functionality and versatility.</p><div class="sect1" title="1.1. Project Steering Committee"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="psc"></a>1.1. Project Steering Committee</h2></div></div></div><p>
		The PostGIS Project Steering Committee (PSC) coordinates the general direction,
			release cycles, documentation, and outreach efforts for the PostGIS project.  In addition
			the PSC provides general user support, accepts and approves patches from the general PostGIS community
			and votes on miscellaneous issues involving PostGIS such as developer commit access, new PSC members
			or significant API changes.
	</p><div class="variablelist"><dl><dt><span class="term">Mark Cave-Ayland</span></dt><dd><p>Coordinates bug fixing and maintenance effort, alignment of
		  PostGIS with PostgreSQL releases, spatial index selectivity and binding, loader/dumper, and Shapefile GUI Loader, integration of new
		   and new function enhancements.</p></dd><dt><span class="term">Regina Obe</span></dt><dd><p>Buildbot Maintenance, windows production and experimental builds, Documentation, general user support on PostGIS newsgroup,
		  X3D support, Tiger Geocoder Support, management functions,  and
		  smoke testing new functionality or major code changes.</p></dd><dt><span class="term">Bborie Park</span></dt><dd><p>Raster development, integration with GDAL, raster loader, user support, general bug fixing, testing on various OS (Slackware, Mac, Windows, and more)</p></dd><dt><span class="term">Paul Ramsey (Chair)</span></dt><dd><p>Co-founder of PostGIS project.  General bug fixing, geography support,  geography and geometry index support (2D, 3D, nD index and anything spatial index), underlying geometry internal structures, PointCloud (in development), GEOS functionality integration and alignment with
		  GEOS releases, loader/dumper, and Shapefile GUI loader.</p></dd><dt><span class="term">Sandro Santilli</span></dt><dd><p>Bug fixes and maintenance and integration of new GEOS functionality and alignment with GEOS releases, Topology support, and Raster framework and low level api functions.</p></dd></dl></div></div><div class="sect1" title="1.2. Core Contributors Present"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="credits_core_present"></a>1.2. Core Contributors Present</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">Jorge Arévalo</span></dt><dd><p>Raster development, GDAL driver support, loader</p></dd><dt><span class="term">Nicklas Avén</span></dt><dd><p>Distance function enhancements (including 3D distance and relationship functions) and additions, Tiny WKB output format (TWKB) (in development) and general user support</p></dd><dt><span class="term">Dan Baston</span></dt><dd><p>Geometry clustering function additions, other geometry algorithm enhancements, and general user support</p></dd><dt><span class="term">Olivier Courtin</span></dt><dd><p>Input output XML (KML,GML)/GeoJSON functions, 3D support and bug fixes.</p></dd><dt><span class="term">Mateusz Loskot</span></dt><dd><p>CMake support for PostGIS, built original raster loader in python and low level raster api functions</p></dd><dt><span class="term">Pierre Racine</span></dt><dd><p>Raster overall architecture, prototyping, programming support</p></dd><dt><span class="term">David Zwarg</span></dt><dd><p>Raster development (mostly map algebra analytic functions)</p></dd></dl></div></div><div class="sect1" title="1.3. Core Contributors Past"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="credits_core_past"></a>1.3. Core Contributors Past</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">Chris Hodgson</span></dt><dd><p>Prior PSC Member. General development, site and buildbot maintenance, OSGeo incubation management</p></dd><dt><span class="term">Kevin Neufeld</span></dt><dd><p>Prior PSC Member. Documentation and documentation support tools, buildbot maintenance, advanced user support
		  on PostGIS newsgroup, and PostGIS maintenance function enhancements.</p></dd><dt><span class="term">Dave Blasby</span></dt><dd><p>The original developer/Co-founder of PostGIS. Dave wrote the server side
		  objects, index bindings, and many of the server side analytical
		  functions.</p></dd><dt><span class="term">Jeff Lounsbury</span></dt><dd><p>Original development of the Shape file loader/dumper. Current PostGIS Project Owner representative.</p></dd><dt><span class="term">Mark Leslie</span></dt><dd><p>Ongoing maintenance and development of core functions.  Enhanced curve support. Shapefile GUI loader.</p></dd></dl></div></div><div class="sect1" title="1.4. Other Contributors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="credits_other_contributors"></a>1.4. Other Contributors</h2></div></div></div><div class="variablelist"><dl><dt><span class="term">Individual Contributors</span></dt><dd><p>In alphabetical order:
Alex Bodnaru,
Alex Mayrhofer,
Andrea Peri,
Andreas Forø Tollefsen,
Andreas Neumann,
Anne Ghisla,
Barbara Phillipot,
Ben Jubb,
Bernhard Reiter,
Brian Hamlin,
Bruce Rindahl,
Bruno Wolff III,
Bryce L. Nordgren,
Carl Anderson,
Charlie Savage,
Dane Springmeyer,
David Skea,
David Techer,
Eduin Carrillo,
Even Rouault,
Frank Warmerdam,
George Silva,
Gerald Fenoy,
Gino Lucrezi,
Guillaume Lelarge,
IIDA Tetsushi,
Ingvild Nystuen,
Jason Smith,
Jeff Adams,
Jose Carlos Martinez Llari,
Julien Rouhaud,
Kashif Rasul,
Klaus Foerster,
Kris Jurka,
Leo Hsu,
Loic Dachary,
Luca S. Percich,
Maria Arias de Reyna,
Mark Sondheim,
Markus Schaber,
Maxime Guillaud,
Maxime van Noppen,
Michael Fuhr,
Mike Toews,
Nathan Wagner,
Nathaniel Clay,
Nikita Shulga,
Norman Vine,
Rafal Magda,
Ralph Mason,
Rémi Cura,
Richard Greenwood,
Silvio Grosso,
Steffen Macke,
Stephen Frost,
Tom van Tilburg,
Vincent Mora,
Vincent Picavet
		  </p></dd><dt><span class="term">Corporate Sponsors</span></dt><dd><p>These are corporate entities that have contributed developer time, hosting, or direct monetary funding to the PostGIS project</p><p>In alphabetical order:
Arrival 3D,
Associazione Italiana per l'Informazione Geografica Libera (GFOSS.it),
AusVet,
Avencia,
Azavea,
Cadcorp,
CampToCamp,
CartoDB,
City of Boston (DND),
Clever Elephant Solutions,
Cooperativa Alveo,
Deimos Space,
Faunalia,
Geographic Data BC,
Hunter Systems Group,
Lidwala Consulting Engineers,
LisaSoft,
Logical Tracking &amp; Tracing International AG,
Maponics,
Michigan Tech Research Institute,
Natural Resources Canada,
Norwegian Forest and Landscape Institute,
Boundless (former OpenGeo),
OSGeo,
Oslandia,
Palantir Technologies,
Paragon Corporation,
R3 GIS,
Refractions Research,
Regione Toscana - SITA,
Safe Software,
Sirius Corporation plc,
Stadt Uster,
UC Davis Center for Vectorborne Diseases,
University of Laval,
U.S Department of State (HIU),
Zonar Systems</p></dd><dt><span class="term">Crowd Funding Campaigns</span></dt><dd><p>Crowd funding campaigns are campaigns we run to get badly wanted features funded that can service a large number of people.  Each campaign is specifically focused on a particular feature or set of features.  Each sponsor chips in a small fraction of the needed funding and with enough people/organizations contributing, we have the funds to pay for the work that will help many.  If you have an idea for a feature you think many others would be willing to co-fund, please post to the <a class="ulink" href="https://lists.osgeo.org/mailman/listinfo/postgis-users" target="_top">PostGIS newsgroup</a> your thoughts and together we can make it happen. </p><p>PostGIS 2.0.0 was the first release we tried this strategy. We used <a class="ulink" href="http://www.pledgebank.com" target="_top">PledgeBank</a> and we got two successful campaigns out of it.</p><p><a class="ulink" href="http://www.pledgebank.com/postgistopology" target="_top"><span class="bold"><strong>postgistopology</strong></span></a> - 10 plus sponsors each contributed $250 USD to build toTopoGeometry function and beef up topology support in 2.0.0. It happened.</p><p><a class="ulink" href="http://www.pledgebank.com/postgis64windows" target="_top"><span class="bold"><strong>postgis64windows</strong></span></a> - 20 someodd sponsors each contributed $100 USD to pay for the work needed to work out PostGIS 64-bit issues on windows. It happened.  We now have a 64-bit release for PostGIS 2.0.1 available on PostgreSQL stack builder.</p></dd><dt><span class="term">Important Support Libraries</span></dt><dd><p>The <a class="ulink" href="http://trac.osgeo.org/geos/" target="_top">GEOS</a>
		  geometry operations library, and the algorithmic work of Martin
		  Davis in making it all work, ongoing maintenance and support of
		  Mateusz Loskot, Sandro Santilli (strk), Paul Ramsey and others.</p><p>The <a class="ulink" href="http://trac.osgeo.org/gdal/" target="_top">GDAL</a>
		  Geospatial Data Abstraction Library, by Frank Warmerdam and others is used to
		  power much of the raster functionality introduced in PostGIS 2.0.0. In kind, improvements needed in GDAL
		  to support PostGIS are contributed back to the GDAL project.</p><p>The <a class="ulink" href="http://trac.osgeo.org/proj/" target="_top">Proj4</a>
		  cartographic projection library, and the work of Gerald Evenden and
		  Frank Warmerdam in creating and maintaining it.</p><p>Last but not least, the <a class="ulink" href="http://www.postgresql.org" target="_top">PostgreSQL DBMS</a>,
		  The giant that PostGIS stands on.  Much of the speed and flexibility of PostGIS would not be possible without
		  the extensibility, great query planner, GIST index, and plethora of SQL features provided by PostgreSQL.</p></dd></dl></div></div><div class="sect1" title="1.5. More Information"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp64612176"></a>1.5. More Information</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The latest software, documentation and news items are available
		at the PostGIS web site, <a class="ulink" href="http://postgis.net" target="_top">http://postgis.net</a>.</p></li><li class="listitem"><p>More information about the GEOS geometry operations library is
		available at<a class="ulink" href="http://trac.osgeo.org/geos/" target="_top">
		http://trac.osgeo.org/geos/</a>.</p></li><li class="listitem"><p>More information about the Proj4 reprojection library is
		available at <a class="ulink" href="http://trac.osgeo.org/proj/" target="_top">http://trac.osgeo.org/proj/</a>.</p></li><li class="listitem"><p>More information about the PostgreSQL database server is
		available at the PostgreSQL main site <a class="ulink" href="http://www.postgresql.org" target="_top">http://www.postgresql.org</a>.</p></li><li class="listitem"><p>More information about GiST indexing is available at the
		PostgreSQL GiST development site, <a class="ulink" href="http://www.sai.msu.su/~megera/postgres/gist/" target="_top">http://www.sai.msu.su/~megera/postgres/gist/</a>.</p></li><li class="listitem"><p>More information about MapServer internet map server is
		available at <a class="ulink" href="http://mapserver.org/" target="_top">http://mapserver.org</a>.</p></li><li class="listitem"><p>The "<a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">Simple Features for
		Specification for SQL</a>" is available at the OpenGIS Consortium
		web site: <a class="ulink" href="http://www.opengeospatial.org/" target="_top">http://www.opengeospatial.org/</a>.</p></li></ul></div></div></div><div class="chapter" title="Chapter 2. PostGIS Installation"><div class="titlepage"><div><div><h2 class="title"><a name="postgis_installation"></a>Chapter 2. PostGIS Installation</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#install_short_version">2.1. Short Version</a></span></dt><dt><span class="sect1"><a href="#install_requirements">2.2. Install Requirements</a></span></dt><dt><span class="sect1"><a href="#install_getting_source">2.3. Getting the Source</a></span></dt><dt><span class="sect1"><a href="#PGInstall">2.4. Compiling and Install from Source: Detailed</a></span></dt><dd><dl><dt><span class="sect2"><a href="#installation_configuration">2.4.1. Configuration</a></span></dt><dt><span class="sect2"><a href="#idp64874960">2.4.2. Building</a></span></dt><dt><span class="sect2"><a href="#make_install_postgis_extensions">2.4.3. Building PostGIS Extensions and Deploying them</a></span></dt><dt><span class="sect2"><a href="#idp64924752">2.4.4. Testing</a></span></dt><dt><span class="sect2"><a href="#idp64936144">2.4.5. Installation</a></span></dt></dl></dd><dt><span class="sect1"><a href="#create_new_db_extensions">2.5. Creating a spatial database using EXTENSIONS</a></span></dt><dt><span class="sect1"><a href="#create_new_db">2.6. Create a spatially-enabled database without using extensions</a></span></dt><dt><span class="sect1"><a href="#installing_pagc_address_standardizer">2.7. Installing and Using the address standardizer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp64994256">2.7.1. Installing Regex::Assemble</a></span></dt></dl></dd><dt><span class="sect1"><a href="#loading_extras_tiger_geocoder">2.8. Installing, Upgrading Tiger Geocoder and loading data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#install_tiger_geocoder_extension">2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension</a></span></dt><dt><span class="sect2"><a href="#install_tiger_geocoder">2.8.2. Tiger Geocoder Enabling your PostGIS database: Not Using Extensions</a></span></dt><dt><span class="sect2"><a href="#tiger_pagc_address_standardizing">2.8.3. Using Address Standardizer Extension with Tiger geocoder</a></span></dt><dt><span class="sect2"><a href="#tiger_geocoder_loading_data">2.8.4. Loading Tiger Data</a></span></dt><dt><span class="sect2"><a href="#upgrade_tiger_geocoder">2.8.5. Upgrading your Tiger Geocoder Install</a></span></dt></dl></dd><dt><span class="sect1"><a href="#templatepostgis">2.9. Create a spatially-enabled database from a template</a></span></dt><dt><span class="sect1"><a href="#upgrading">2.10. Upgrading</a></span></dt><dd><dl><dt><span class="sect2"><a href="#soft_upgrade">2.10.1. Soft upgrade</a></span></dt><dt><span class="sect2"><a href="#hard_upgrade">2.10.2. Hard upgrade</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp65174992">2.11. Common Problems during installation</a></span></dt><dt><span class="sect1"><a href="#idp65184592">2.12. Loader/Dumper</a></span></dt></dl></div><p>
	This chapter details the steps required to install PostGIS.
  </p><div class="sect1" title="2.1. Short Version"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_short_version"></a>2.1. Short Version</h2></div></div></div><p>To compile assuming you have all the dependencies in your search path:</p><pre class="programlisting">tar xvfz postgis-2.3.0.tar.gz
cd postgis-2.3.0
./configure
make
make install</pre><p>Once postgis is installed, it needs to be enabled in each individual database you want to use it in.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The raster support is currently optional, but installed by default. For enabling using the PostgreSQL 9.1+ extensions model raster is required. Using the extension enable process is preferred and more user-friendly. To spatially enable your database:</p></td></tr></table></div><pre class="programlisting">psql -d yourdatabase -c "CREATE EXTENSION postgis;"
psql -d yourdatabase -c "CREATE EXTENSION postgis_topology;"
-- if you built with sfcgal support --
psql -d yourdatabase -c "CREATE EXTENSION postgis_sfcgal;"

-- if you want to install tiger geocoder --
psql -d yourdatabase -c "CREATE EXTENSION fuzzystrmatch"
psql -d yourdatabase -c "CREATE EXTENSION postgis_tiger_geocoder;"

-- if you installed with pcre
-- you should have address standardizer extension as well
psql -d yourdatabase -c "CREATE EXTENSION address_standardizer;"
</pre><p>Please refer to <a class="xref" href="#make_install_postgis_extensions" title="2.4.3. Building PostGIS Extensions and Deploying them">Section 2.4.3, “Building PostGIS Extensions and Deploying them”</a> for more details about querying installed/available extensions and upgrading extensions, or switching from a non-extension install to an extension install.</p><p>For those running who decided for some reason not to compile with raster support, or just are old-fashioned, here are longer more painful instructions for you:</p><p>All the .sql files once installed will be installed in share/contrib/postgis-2.2 folder
		of your PostgreSQL install</p><pre class="programlisting">createdb yourdatabase
createlang plpgsql yourdatabase
psql -d yourdatabase -f postgis.sql
psql -d yourdatabase -f postgis_comments.sql
psql -d yourdatabase -f spatial_ref_sys.sql
psql -d yourdatabase -f topology.sql
psql -d yourdatabase -f topology_comments.sql

-- only if you compiled with raster (GDAL)
psql -d yourdatabase -f rtpostgis.sql
psql -d yourdatabase -f raster_comments.sql

--if you built with sfcgal support --
psql -d yourdatabase -f sfcgal.sql
psql -d yourdatabase -f sfcgal_comments.sql
</pre><p>
	  The rest of this chapter goes into detail each of the above installation
	  steps.
	</p><p>As of PostGIS 2.1.3, out-of-db rasters and all raster drivers are disabled by default. In order to re-enable these, you need to set the following environment variables
	<code class="varname">POSTGIS_GDAL_ENABLED_DRIVERS</code> and <code class="varname">POSTGIS_ENABLE_OUTDB_RASTERS</code> in the server environment. For PostGIS 2.2, you can use the more cross-platform approach of setting the corresponding <a class="xref" href="#PostGIS_GUC" title="8.2. PostGIS Grand Unified Custom Variables (GUCs)">Section 8.2, “PostGIS Grand Unified Custom Variables (GUCs)”</a>.</p><p>If you want to enable offline raster:</p><pre class="programlisting">POSTGIS_ENABLE_OUTDB_RASTERS=1</pre><p>Any other setting or no setting at all will disable out of db rasters.</p><p>In order to enable all GDAL drivers available in your GDAL install, set this environment variable as follows</p><pre class="programlisting">POSTGIS_GDAL_ENABLED_DRIVERS=ENABLE_ALL</pre><p>If you want to only enable specific drivers, set your environment variable as follows:</p><pre class="programlisting">POSTGIS_GDAL_ENABLED_DRIVERS="GTiff PNG JPEG GIF XYZ"</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are on windows, do not quote the driver list</p></td></tr></table></div><p>Setting environment variables varies depending on OS.  For PostgreSQL installed on Ubuntu or Debian via apt-postgresql, the preferred way is to
	edit <code class="filename">/etc/postgresql/<em class="replaceable"><code>9.3</code></em>/<em class="replaceable"><code>main</code></em>/environment</code> where 9.3 refers to version of PostgreSQL and main refers to the cluster.</p><p>On windows, if you are running as a service, you can set via System variables which for Windows 7 you can get to by right-clicking on Computer-&gt;Properties Advanced System Settings or in explorer navigating to <code class="varname">Control Panel\All Control Panel Items\System</code>.
	Then clicking <span class="emphasis"><em>Advanced System Settings -&gt;Advanced-&gt;Environment Variables</em></span> and adding new system variables.</p><p>After you set the environment variables, you'll need to restart your PostgreSQL service for the changes to take effect.</p></div><div class="sect1" title="2.2. Install Requirements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_requirements"></a>2.2. Install Requirements</h2></div></div></div><p>
	  PostGIS has the following requirements for building and usage:
	</p><p>
	  <span class="bold"><strong>Required</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  PostgreSQL 9.2 or higher. A complete installation
		  of PostgreSQL (including server headers) is required. PostgreSQL
		  is available from
		  <a class="ulink" href="http://www.postgresql.org" target="_top">
			http://www.postgresql.org
		  </a>
		  .
		</p><p>For a full PostgreSQL / PostGIS support matrix and PostGIS/GEOS support matrix refer to
			<a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS" target="_top">http://trac.osgeo.org/postgis/wiki/UsersWikiPostgreSQLPostGIS</a>
		</p></li><li class="listitem"><p>
		  GNU C compiler (<code class="filename">gcc</code>). Some other ANSI C compilers
		  can be used to compile PostGIS, but we find far fewer problems when
		  compiling with <code class="filename">gcc</code>.
		</p></li><li class="listitem"><p>
		  GNU Make (<code class="filename">gmake</code> or <code class="filename">make</code>).
		  For many systems, GNU <code class="filename">make</code> is the default version
		  of make. Check the version by invoking <code class="filename">make -v</code>.
		  Other versions of <code class="filename">make</code> may not process the
		  PostGIS <code class="filename">Makefile</code> properly.
		</p></li><li class="listitem"><p>
		  Proj4 reprojection library, version 4.6.0 or greater. The Proj4
		  library is used to provide coordinate reprojection support within
		  PostGIS. Proj4 is available for download from
		  <a class="ulink" href="http://trac.osgeo.org/proj/" target="_top">
			http://trac.osgeo.org/proj/
		  </a>
		  .
		</p></li><li class="listitem"><p>
		  GEOS geometry library, version 3.3 or greater, but GEOS 3.5+ is recommended to take full advantage of all the new functions and features.  Without GEOS 3.5,
			you will be missing some major enhancements such as <a class="xref" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a> and <a class="xref" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>. GEOS is available for download from
		  <a class="ulink" href="http://trac.osgeo.org/geos/" target="_top">
			http://trac.osgeo.org/geos/
		  </a> and 3.4+ is backward-compatible with older versions so fairly safe to upgrade.
		</p></li><li class="listitem"><p>
		  LibXML2, version 2.5.x or higher. LibXML2 is currently used in some imports
		  functions (ST_GeomFromGML and ST_GeomFromKML). LibXML2 is available for download from
		  <a class="ulink" href="http://xmlsoft.org/downloads.html" target="_top">http://xmlsoft.org/downloads.html</a>.
		</p></li><li class="listitem"><p>
		  JSON-C, version 0.9 or higher. JSON-C is currently used to import GeoJSON via the
		  function ST_GeomFromGeoJson. JSON-C is available for download from
		  <a class="ulink" href="https://github.com/json-c/json-c/releases" target="_top">https://github.com/json-c/json-c/releases/</a>.
		</p></li><li class="listitem"><p>
		  GDAL, version 1.8 or higher (1.9 or higher is strongly recommended since some things will not work well or behavior differently with lower versions).  This is required for raster support and to be able to install with <code class="code">CREATE EXTENSION postgis</code> so highly recommended for those running 9.1+.
		  <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/DownloadSource" target="_top">http://trac.osgeo.org/gdal/wiki/DownloadSource</a>.
		</p></li></ul></div><p>
	  <span class="bold"><strong>Optional</strong></span>
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
		  GDAL (pseudo optional) only if you don't want raster and don't care about installing with <code class="code">CREATE EXTENSION postgis</code> can you leave it out.
		  Keep in mind other extensions may have a requires postgis extension which will prevent you from installing them unless you install postgis as an extension. So it is highly recommended you compile with GDAL support.
		</p><p>Also make sure to enable the drivers you want to use as described in <a class="xref" href="#install_short_version" title="2.1. Short Version">Section 2.1, “Short Version”</a>.</p></li><li class="listitem"><p>
		  GTK (requires GTK+2.0, 2.8+) to compile the shp2pgsql-gui shape file loader.
		  <a class="ulink" href="http://www.gtk.org/" target="_top">
			http://www.gtk.org/
		  </a>
		  .
		</p></li><li class="listitem"><p>
                  SFCGAL, version 1.1 (or higher) could be used to provide additional 2D and 3D advanced analysis functions to PostGIS cf <a class="xref" href="#reference_sfcgal" title="8.10. SFCGAL Functions">Section 8.10, “SFCGAL Functions”</a>. And also allow to use SFCGAL rather than GEOS for some 2D functions provided by both backends (like ST_Intersection or ST_Area, for instance). A PostgreSQL configuration variable <code class="code">postgis.backend</code> allow end user to control which backend he want to use if SFCGAL is installed (GEOS by default). Nota: SFCGAL 1.2 require at least CGAL 4.3 and Boost 1.54 (cf: <a class="ulink" href="http://oslandia.github.io/SFCGAL/installation.html" target="_top">http://oslandia.github.io/SFCGAL/installation.html</a>)

		  <a class="ulink" href="https://github.com/Oslandia/SFCGAL" target="_top">https://github.com/Oslandia/SFCGAL</a>.
		</p></li><li class="listitem"><p>
				In order to build the <a class="xref" href="#Address_Standardizer" title="Chapter 12. Address Standardizer">Chapter 12, <i>Address Standardizer</i></a> you will also need PCRE <a class="ulink" href="http://www.pcre.org" target="_top">http://www.pcre.org</a> (which generally is already installed on nix systems).  <code class="code">Regex::Assemble</code> perl CPAN package is only needed if you want to rebuild the data encoded in <code class="filename">parseaddress-stcities.h</code>.
				<a class="xref" href="#Address_Standardizer" title="Chapter 12. Address Standardizer">Chapter 12, <i>Address Standardizer</i></a> will automatically be built if it detects a PCRE library, or you pass in a valid <code class="varname">--with-pcre-dir=/path/to/pcre</code> during configure.
			</p></li><li class="listitem"><p>
		 CUnit (<code class="filename">CUnit</code>). This is needed for regression testing. <a class="ulink" href="http://cunit.sourceforge.net/" target="_top">http://cunit.sourceforge.net/</a>
		</p></li><li class="listitem"><p>
		  DocBook (<code class="filename">xsltproc</code>) is required for building the
		  documentation. Docbook is available from
		  <a class="ulink" href="http://www.docbook.org/" target="_top">
			http://www.docbook.org/
		  </a>
		  .
		</p></li><li class="listitem"><p>
		  DBLatex (<code class="filename">dblatex</code>) is required for building the
		  documentation in PDF format. DBLatex is available from
		  <a class="ulink" href="http://dblatex.sourceforge.net/" target="_top">
			http://dblatex.sourceforge.net/
		  </a>
		  .
		</p></li><li class="listitem"><p>
		  ImageMagick (<code class="filename">convert</code>) is required to generate the
		  images used in the documentation. ImageMagick is available from
		  <a class="ulink" href="http://www.imagemagick.org/" target="_top">
			http://www.imagemagick.org/
		  </a>
		  .
		</p></li></ul></div></div><div class="sect1" title="2.3. Getting the Source"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="install_getting_source"></a>2.3. Getting the Source</h2></div></div></div><p>
	  Retrieve the PostGIS source archive from the downloads website
	  <a class="ulink" href="http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz" target="_top">
		http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz
	  </a>
	</p><pre class="programlisting">wget http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz
tar -xvzf postgis-2.3.0.tar.gz</pre><p>
	  This will create a directory called
	  <code class="varname">postgis-2.3.0</code> in the current working
	  directory.
	</p><p>
	  Alternatively, checkout the source from the
	  <a class="ulink" href="http://subversion.apache.org/" target="_top">
		svn
	  </a>
	  repository
	  <a class="ulink" href="http://svn.osgeo.org/postgis/trunk/" target="_top">
		http://svn.osgeo.org/postgis/trunk/
	  </a>
	  .
	</p><pre class="programlisting">svn checkout http://svn.osgeo.org/postgis/trunk/ postgis-2.3.0</pre><p>
	  Change into the newly created
	  <code class="varname">postgis-2.3.0</code> directory to continue
	  the installation.
	</p></div><div class="sect1" title="2.4. Compiling and Install from Source: Detailed"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PGInstall"></a>2.4. Compiling and Install from Source: Detailed</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#installation_configuration">2.4.1. Configuration</a></span></dt><dt><span class="sect2"><a href="#idp64874960">2.4.2. Building</a></span></dt><dt><span class="sect2"><a href="#make_install_postgis_extensions">2.4.3. Building PostGIS Extensions and Deploying them</a></span></dt><dt><span class="sect2"><a href="#idp64924752">2.4.4. Testing</a></span></dt><dt><span class="sect2"><a href="#idp64936144">2.4.5. Installation</a></span></dt></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		Many OS systems now include pre-built packages for PostgreSQL/PostGIS.
		In many cases compilation is only necessary if you want the most
		bleeding edge versions or you are a package maintainer.
	  </p><p>This section includes general compilation instructions, if you are compiling for Windows etc
		or another OS, you may find additional more detailed help at <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiInstall" target="_top">PostGIS User contributed compile guides</a> and <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/DevWikiMain" target="_top">PostGIS Dev Wiki</a>.</p><p>Pre-Built Packages for various OS are listed in <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPackages" target="_top">PostGIS Pre-built Packages</a></p><p>If you are a windows user, you can get stable builds via Stackbuilder or <a class="ulink" href="http://www.postgis.org/download/windows/" target="_top">PostGIS Windows download site</a>
	  We also have <a class="ulink" href="http://www.postgis.org/download/windows/experimental.php" target="_top">very bleeding-edge windows experimental builds</a> that are built usually once or twice a week or whenever anything exciting happens.  You can
	  use these to experiment with the in progress releases of PostGIS</p></td></tr></table></div><p>
	  The PostGIS module is an extension to the PostgreSQL backend server. As
	  such, PostGIS 2.3.0 <span class="emphasis"><em>requires</em></span> full
	  PostgreSQL server headers access in order to compile. It can be built
	  against PostgreSQL versions 9.2 or higher. Earlier
	  versions of PostgreSQL are <span class="emphasis"><em>not</em></span> supported.
	</p><p>
	  Refer to the PostgreSQL installation guides if you haven't already
	  installed PostgreSQL.
	  <a class="ulink" href="http://www.postgresql.org" target="_top">
		http://www.postgresql.org
	  </a>
	  .
	</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		For GEOS functionality, when you install PostgresSQL you may need to
		explicitly link PostgreSQL against the standard C++ library:
	  </p><pre class="programlisting">LDFLAGS=-lstdc++ ./configure [YOUR OPTIONS HERE]</pre><p>
		This is a workaround for bogus C++ exceptions interaction with older
		development tools. If you experience weird problems (backend
		unexpectedly closed or similar things) try this trick. This will require
		recompiling your PostgreSQL from scratch, of course.
	  </p></td></tr></table></div><p>
	  The following steps outline the configuration and compilation of the
	  PostGIS source. They are written for Linux users and will not work on
	  Windows or Mac.
	</p><div class="sect2" title="2.4.1. Configuration"><div class="titlepage"><div><div><h3 class="title"><a name="installation_configuration"></a>2.4.1. Configuration</h3></div></div></div><p>
		As with most linux installations, the first step is to generate the
		Makefile that will be used to build the source code. This is done by
		running the shell script
	  </p><p>
		<span class="command"><strong>./configure</strong></span>
	  </p><p>
		With no additional parameters, this command will attempt to
		automatically locate the required components and libraries needed to
		build the PostGIS source code on your system. Although this is the most
		common usage of <span class="command"><strong>./configure</strong></span>, the script accepts
		several parameters for those who have the required libraries and
		programs in non-standard locations.
	  </p><p>
		The following list shows only the most commonly used parameters. For a
		complete list, use the <span class="command"><strong>--help</strong></span> or
		<span class="command"><strong>--help=short</strong></span> parameters.
	  </p><div class="variablelist"><dl><dt><span class="term"><span class="command"><strong>--prefix=PREFIX</strong></span></span></dt><dd><p>
			  This is the location the PostGIS libraries and SQL scripts will be
			  installed to. By default, this location is the same as the
			  detected PostgreSQL installation.
			</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
				This parameter is currently broken, as the package will only
				install into the PostgreSQL installation directory. Visit
				<a class="ulink" href="http://trac.osgeo.org/postgis/ticket/635" target="_top">
				  http://trac.osgeo.org/postgis/ticket/635
				</a>
				to track this bug.
			  </p></td></tr></table></div></dd><dt><span class="term"><span class="command"><strong>--with-pgconfig=FILE</strong></span></span></dt><dd><p>
			  PostgreSQL provides a utility called <span class="command"><strong>pg_config</strong></span>
			  to enable extensions like PostGIS to locate the PostgreSQL
			  installation directory. Use this parameter
			  (<span class="command"><strong>--with-pgconfig=/path/to/pg_config</strong></span>) to
			  manually specify a particular PostgreSQL installation that PostGIS
			  will build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-gdalconfig=FILE</strong></span></span></dt><dd><p>
			  GDAL, a required library, provides functionality needed for raster support
			  <span class="command"><strong>gdal-config</strong></span> to enable software installations to
			  locate the GDAL installation directory. Use this parameter
			  (<span class="command"><strong>--with-gdalconfig=/path/to/gdal-config</strong></span>) to
			  manually specify a particular GDAL installation that PostGIS will
			  build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-geosconfig=FILE</strong></span></span></dt><dd><p>
			  GEOS, a required geometry library, provides a utility called
			  <span class="command"><strong>geos-config</strong></span> to enable software installations to
			  locate the GEOS installation directory. Use this parameter
			  (<span class="command"><strong>--with-geosconfig=/path/to/geos-config</strong></span>) to
			  manually specify a particular GEOS installation that PostGIS will
			  build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-xml2config=FILE</strong></span></span></dt><dd><p>
			  LibXML is the library required for doing GeomFromKML/GML processes.
			  It normally is found if you have libxml installed, but if not or you want
			  a specific version used, you'll need to point PostGIS at a specific
			  <code class="filename">xml2-config</code> confi file to enable software installations to
			  locate the LibXML installation directory. Use this parameter
			  (<span class="command"><strong>&gt;--with-xml2config=/path/to/xml2-config</strong></span>) to
			  manually specify a particular LibXML installation that PostGIS will
			  build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-projdir=DIR</strong></span></span></dt><dd><p>
			  Proj4 is a reprojection library required by PostGIS. Use this
			  parameter (<span class="command"><strong>--with-projdir=/path/to/projdir</strong></span>) to
			  manually specify a particular Proj4 installation directory that
			  PostGIS will build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-libiconv=DIR</strong></span></span></dt><dd><p>
			  Directory where iconv is installed.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-jsondir=DIR</strong></span></span></dt><dd><p>
			  <a class="ulink" href="http://oss.metaparadigm.com/json-c/" target="_top">JSON-C</a> is an MIT-licensed JSON library required by PostGIS ST_GeomFromJSON support. Use this
			  parameter (<span class="command"><strong>--with-jsondir=/path/to/jsondir</strong></span>) to
			  manually specify a particular JSON-C installation directory that
			  PostGIS will build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-pcredir=DIR</strong></span></span></dt><dd><p>
			  <a class="ulink" href="http://www.pcre.org/" target="_top">PCRE</a> is an BSD-licensed Perl Compatible Regular Expression library required by address_standardizer extension. Use this
			  parameter (<span class="command"><strong>--with-pcredir=/path/to/pcredir</strong></span>) to
			  manually specify a particular PCRE installation directory that
			  PostGIS will build against.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-gui</strong></span></span></dt><dd><p>
			  Compile the data import GUI (requires GTK+2.0).  This will create shp2pgsql-gui graphical interface
			  to shp2pgsql.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-raster</strong></span></span></dt><dd><p>
			  Compile with raster support.  This will build rtpostgis-2.3.0 library and rtpostgis.sql file.  This may not
			  be required in final release as plan is to build in raster support by default.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-topology</strong></span></span></dt><dd><p>
			  Compile with topology support.  This will build the topology.sql file.  There is no corresponding library
			  as all logic needed for topology is in postgis-2.3.0 library.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-gettext=no</strong></span></span></dt><dd><p>
			  By default PostGIS will try to detect gettext support and compile with it, however if you run into incompatibility issues that
			  cause breakage of loader, you can disable it entirely with this command.  Refer to ticket <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/748" target="_top">http://trac.osgeo.org/postgis/ticket/748</a> for an example issue solved by configuring with this.
			  NOTE: that you aren't missing much by turning this off.  This is used for international help/label support for the GUI loader which is not yet documented
			  and still experimental.
			</p></dd><dt><span class="term"><span class="command"><strong>--with-sfcgal=PATH</strong></span></span></dt><dd><p>
			  By default PostGIS will not install with sfcgal support without this switch.
			  <code class="varname">PATH</code> is an optional argument that allows to specify an alternate PATH to sfcgal-config.
			</p></dd></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  If you obtained PostGIS from the SVN
		  <a class="ulink" href="http://svn.osgeo.org/postgis/trunk/" target="_top">
			repository
		  </a>
		  , the first step is really to run the script
		</p><p>
		  <span class="command"><strong>./autogen.sh</strong></span>
		</p><p>
		  This script will generate the <span class="command"><strong>configure</strong></span> script that
		  in turn is used to customize the installation of PostGIS.
		</p><p>
		  If you instead obtained PostGIS as a tarball, running
		  <span class="command"><strong>./autogen.sh</strong></span> is not necessary as
		  <span class="command"><strong>configure</strong></span> has already been generated.
		</p></td></tr></table></div></div><div class="sect2" title="2.4.2. Building"><div class="titlepage"><div><div><h3 class="title"><a name="idp64874960"></a>2.4.2. Building</h3></div></div></div><p>
		Once the Makefile has been generated, building PostGIS is as simple as
		running
	  </p><p>
		<span class="command"><strong>make</strong></span>
	  </p><p>
		The last line of the output should be "<code class="code">PostGIS was built
		successfully. Ready to install.</code>"
	  </p><p>
		As of PostGIS v1.4.0, all the functions have comments generated from the
		documentation. If you wish to install these comments into your spatial
		databases later, run the command which requires docbook.  The postgis_comments.sql and other
		package comments files raster_comments.sql, topology_comments.sql are
			also packaged in the tar.gz distribution in the doc folder so no need to make comments
			if installing from the tar ball.
	  </p><p>
		<span class="command"><strong>make comments</strong></span>
	  </p><p>
		Introduced in PostGIS 2.0. This generates html cheat sheets suitable for quick reference or for student handouts.
		This requires xsltproc to build and will generate 4 files in doc folder <code class="filename">topology_cheatsheet.html</code>, <code class="filename">tiger_geocoder_cheatsheet.html</code>,
			<code class="filename">raster_cheatsheet.html</code>, <code class="filename">postgis_cheatsheet.html</code>
	  </p><p>You can download some pre-built ones available in html and pdf from <a class="ulink" href="http://www.postgis.us/study_guides" target="_top">PostGIS / PostgreSQL Study Guides</a></p><p>
		<span class="command"><strong>make cheatsheets</strong></span>
	  </p></div><div class="sect2" title="2.4.3. Building PostGIS Extensions and Deploying them"><div class="titlepage"><div><div><h3 class="title"><a name="make_install_postgis_extensions"></a>2.4.3. Building PostGIS Extensions and Deploying them</h3></div></div></div><p>
		The PostGIS extensions are built and installed automatically if you are using PostgreSQL 9.1+.
	  </p><p>If you are building from source repository, you need to build the function descriptions first. These get built if you have docbook installed. You can also manually build with the statement:
    </p><p>
	  <span class="command"><strong>make comments</strong></span>
    </p><p>Building the comments is not necessary if you are building from a release tar ball since these are packaged pre-built with the tar ball already.</p><p>If you are building against PostgreSQL 9.1, the extensions should automatically build as part of the make install process.  You can if needed build from the extensions
	  folders or copy files if you need them on a different server. </p><pre class="programlisting">cd extensions
cd postgis
make clean
make
make install
cd ..
cd postgis_topology
make clean
make
make install
cd ..
cd postgis_sfcgal
make clean
make
make install

cd ..
cd address_standardizer
make clean
make
make install
make installcheck

cd ..
cd postgis_tiger_geocoder
make clean
make
make install
make installcheck
	  </pre><p>The extension files will always be the same for the same version of PostGIS regardless of OS, so it is fine to copy over the extension files from one OS to another as long as you
	  have the PostGIS binaries already installed on your servers. </p><p>If you want to install the extensions manually on a separate server different from your development,
		You need to copy the following files from the extensions folder into the <code class="filename">PostgreSQL / share / extension</code> folder
		of your PostgreSQL install as well as the needed binaries for regular PostGIS if you don't have them already on the server.
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			These are the control files that denote information such as the version of the extension to install if not specified.
			<code class="filename">postgis.control, postgis_topology.control</code>.
		  </p></li><li class="listitem"><p>
			All the files in the /sql folder of each extension.  Note that these need to be copied to the root of the PostgreSQL share/extension folder
			<code class="filename">extensions/postgis/sql/*.sql</code>, <code class="filename">extensions/postgis_topology/sql/*.sql</code>
		  </p></li></ul></div><p>Once you do that, you should see <code class="varname">postgis</code>, <code class="varname">postgis_topology</code> as available extensions in PgAdmin -&gt; extensions.</p><p>If you are using psql, you can verify that the extensions are installed by running this query:</p><pre class="programlisting">SELECT name, default_version,installed_version
FROM pg_available_extensions WHERE name LIKE 'postgis%' or name LIKE 'address%';

             name             | default_version | installed_version
------------------------------+-----------------+-------------------
 address_standardizer         | 2.3.0         | 2.3.0
 address_standardizer_data_us | 2.3.0         | 2.3.0
 postgis                      | 2.3.0         | 2.3.0
 postgis_sfcgal               | 2.3.0         |
 postgis_tiger_geocoder       | 2.3.0         | 2.3.0
 postgis_topology             | 2.3.0         |
(6 rows)</pre><p>If you have the extension installed in the database you are querying, you'll see mention in the <code class="varname">installed_version</code> column.
If you get no records back, it means you don't have postgis extensions installed on the server at all.  PgAdmin III 1.14+ will also provide this information
in the <code class="varname">extensions</code> section of the database browser tree and will even allow upgrade or uninstall by right-clicking.</p><p>If you have the extensions available, you can install postgis extension in your database of choice by either using pgAdmin extension interface or running these sql commands:</p><pre class="programlisting">CREATE EXTENSION postgis;
CREATE EXTENSION postgis_sfcgal;
CREATE EXTENSION fuzzystrmatch; --needed for postgis_tiger_geocoder
--optional used by postgis_tiger_geocoder, or can be used standalone
CREATE EXTENSION address_standardizer;
CREATE EXTENSION address_standardizer_data_us;
CREATE EXTENSION postgis_tiger_geocoder;
CREATE EXTENSION postgis_topology;</pre><p>In psql you can use to see what versions you have installed and also what schema they are installed. </p><pre class="programlisting">\connect mygisdb
\x
\dx postgis*</pre><pre class="screen">List of installed extensions
-[ RECORD 1 ]-------------------------------------------------
-
Name        | postgis
Version     | 2.3.0
Schema      | public
Description | PostGIS geometry, geography, and raster spat..
-[ RECORD 2 ]-------------------------------------------------
-
Name        | postgis_tiger_geocoder
Version     | 2.3.0
Schema      | tiger
Description | PostGIS tiger geocoder and reverse geocoder
-[ RECORD 3 ]-------------------------------------------------
-
Name        | postgis_topology
Version     | 2.3.0
Schema      | topology
Description | PostGIS topology spatial types and functions</pre><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Extension tables <code class="varname">spatial_ref_sys</code>, <code class="varname">layer</code>, <code class="varname">topology</code> can not be explicitly backed up.  They can only
be backed up when the respective <code class="varname">postgis</code> or <code class="varname">postgis_topology</code> extension is backed up, which only seems to happen when you backup the whole database.
As of PostGIS 2.0.1, only srid records not packaged with PostGIS are backed up when the database is backed up so don't go around changing srids we package and expect your changes to be there. Put in a ticket if you find an issue.  The structures of extension tables are never backed up since they are created with <code class="code">CREATE EXTENSION</code>
and assumed to be the same for a given version of an extension. These behaviors are built into the current PostgreSQL extension model, so nothing we can do about it.</p></td></tr></table></div><p>If you installed 2.3.0, without using our wonderful extension system, you can change it to be extension based by first upgrading to the latest micro version running the upgrade scripts: <code class="filename">postgis_upgrade_22_minor.sql</code>,<code class="filename">raster_upgrade_22_minor.sql</code>,<code class="filename">topology_upgrade_22_minor.sql</code>.</p><p>If you installed postgis without raster support, you'll need to install raster support first (using the full <code class="filename">rtpostgis.sql</code></p><p>Then you can run the below commands to package the functions in their respective extension.</p><pre class="programlisting">CREATE EXTENSION postgis FROM unpackaged;
CREATE EXTENSION postgis_topology FROM unpackaged;
CREATE EXTENSION postgis_tiger_geocoder FROM unpackaged;</pre></div><div class="sect2" title="2.4.4. Testing"><div class="titlepage"><div><div><h3 class="title"><a name="idp64924752"></a>2.4.4. Testing</h3></div></div></div><p>
		If you wish to test the PostGIS build, run
	  </p><p>
		<span class="command"><strong>make check</strong></span>
	  </p><p>
		The above command will run through various checks and regression tests
		using the generated library against an actual PostgreSQL database.
	  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  If you configured PostGIS using non-standard PostgreSQL, GEOS, or
		  Proj4 locations, you may need to add their library locations to the
		  LD_LIBRARY_PATH environment variable.
		</p></td></tr></table></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  Currently, the <span class="command"><strong>make check</strong></span> relies on the
		  <code class="code">PATH</code> and <code class="code">PGPORT</code> environment variables when
		  performing the checks - it does <span class="emphasis"><em>not</em></span> use the
		  PostgreSQL version that may have been specified using the
		  configuration parameter <span class="command"><strong>--with-pgconfig</strong></span>. So make
		  sure to modify your PATH to match the detected PostgreSQL installation
		  during configuration or be prepared to deal with the impending
		  headaches.
		</p></td></tr></table></div><p>
		If successful, the output of the test should be similar to the
		following:
	  </p><pre class="programlisting">    CUnit - A unit testing framework for C - Version 2.1-2
     http://cunit.sourceforge.net/


Suite: computational_geometry
  Test: test_lw_segment_side ...passed
  Test: test_lw_segment_intersects ...passed
  Test: test_lwline_crossing_short_lines ...passed
  Test: test_lwline_crossing_long_lines ...passed
  Test: test_lwline_crossing_bugs ...passed
  Test: test_lwpoint_set_ordinate ...passed
  Test: test_lwpoint_get_ordinate ...passed
  Test: test_point_interpolate ...passed
  Test: test_lwline_clip ...passed
  Test: test_lwline_clip_big ...passed
  Test: test_lwmline_clip ...passed
  Test: test_geohash_point ...passed
  Test: test_geohash_precision ...passed
  Test: test_geohash ...passed
  Test: test_geohash_point_as_int ...passed
  Test: test_isclosed ...passed
  Test: test_lwgeom_simplify ...passed
Suite: buildarea
  Test: buildarea1 ...passed
  Test: buildarea2 ...passed
  Test: buildarea3 ...passed
  Test: buildarea4 ...passed
  Test: buildarea4b ...passed
  Test: buildarea5 ...passed
  Test: buildarea6 ...passed
  Test: buildarea7 ...passed
Suite: geometry_clean
  Test: test_lwgeom_make_valid ...passed
Suite: clip_by_rectangle
  Test: test_lwgeom_clip_by_rect ...passed
Suite: force_sfs
  Test: test_sfs_11 ...passed
  Test: test_sfs_12 ...passed
  Test: test_sqlmm ...passed
Suite: geodetic
  Test: test_sphere_direction ...passed
  Test: test_sphere_project ...passed
  Test: test_lwgeom_area_sphere ...passed
  Test: test_signum ...passed
  Test: test_gbox_from_spherical_coordinates ...passed
  Test: test_gserialized_get_gbox_geocentric ...passed
  Test: test_clairaut ...passed
  Test: test_edge_intersection ...passed
  Test: test_edge_intersects ...passed
  Test: test_edge_distance_to_point ...passed
  Test: test_edge_distance_to_edge ...passed
  Test: test_lwgeom_distance_sphere ...passed
  Test: test_lwgeom_check_geodetic ...passed
  Test: test_gserialized_from_lwgeom ...passed
  Test: test_spheroid_distance ...passed
  Test: test_spheroid_area ...passed
  Test: test_lwpoly_covers_point2d ...passed
  Test: test_gbox_utils ...passed
  Test: test_vector_angle ...passed
  Test: test_vector_rotate ...passed
  Test: test_lwgeom_segmentize_sphere ...passed
  Test: test_ptarray_contains_point_sphere ...passed
  Test: test_ptarray_contains_point_sphere_iowa ...passed
Suite: GEOS
  Test: test_geos_noop ...passed
  Test: test_geos_subdivide ...passed
  Test: test_geos_linemerge ...passed
Suite: Clustering
  Test: basic_test ...passed
  Test: nonsequential_test ...passed
  Test: basic_distance_test ...passed
  Test: single_input_test ...passed
  Test: empty_inputs_test ...passed
Suite: Clustering Union-Find
  Test: test_unionfind_create ...passed
  Test: test_unionfind_union ...passed
  Test: test_unionfind_ordered_by_cluster ...passed
Suite: homogenize
  Test: test_coll_point ...passed
  Test: test_coll_line ...passed
  Test: test_coll_poly ...passed
  Test: test_coll_coll ...passed
  Test: test_geom ...passed
  Test: test_coll_curve ...passed
Suite: encoded_polyline_input
  Test: in_encoded_polyline_test_geoms ...passed
  Test: in_encoded_polyline_test_precision ...passed
Suite: geojson_input
  Test: in_geojson_test_srid ...passed
  Test: in_geojson_test_bbox ...passed
  Test: in_geojson_test_geoms ...passed
Suite: twkb_input
  Test: test_twkb_in_point ...passed
  Test: test_twkb_in_linestring ...passed
  Test: test_twkb_in_polygon ...passed
  Test: test_twkb_in_multipoint ...passed
  Test: test_twkb_in_multilinestring ...passed
  Test: test_twkb_in_multipolygon ...passed
  Test: test_twkb_in_collection ...passed
  Test: test_twkb_in_precision ...passed
Suite: serialization/deserialization
  Test: test_typmod_macros ...passed
  Test: test_flags_macros ...passed
  Test: test_serialized_srid ...passed
  Test: test_gserialized_from_lwgeom_size ...passed
  Test: test_gbox_serialized_size ...passed
  Test: test_lwgeom_from_gserialized ...passed
  Test: test_lwgeom_count_vertices ...passed
  Test: test_on_gser_lwgeom_count_vertices ...passed
  Test: test_geometry_type_from_string ...passed
  Test: test_lwcollection_extract ...passed
  Test: test_lwgeom_free ...passed
  Test: test_lwgeom_flip_coordinates ...passed
  Test: test_f2d ...passed
  Test: test_lwgeom_clone ...passed
  Test: test_lwgeom_force_clockwise ...passed
  Test: test_lwgeom_calculate_gbox ...passed
  Test: test_lwgeom_is_empty ...passed
  Test: test_lwgeom_same ...passed
  Test: test_lwline_from_lwmpoint ...passed
  Test: test_lwgeom_as_curve ...passed
  Test: test_lwgeom_scale ...passed
  Test: test_gserialized_is_empty ...passed
  Test: test_gbox_same_2d ...passed
Suite: measures
  Test: test_mindistance2d_tolerance ...passed
  Test: test_rect_tree_contains_point ...passed
  Test: test_rect_tree_intersects_tree ...passed
  Test: test_lwgeom_segmentize2d ...passed
  Test: test_lwgeom_locate_along ...passed
  Test: test_lw_dist2d_pt_arc ...passed
  Test: test_lw_dist2d_seg_arc ...passed
  Test: test_lw_dist2d_arc_arc ...passed
  Test: test_lw_arc_length ...passed
  Test: test_lw_dist2d_pt_ptarrayarc ...passed
  Test: test_lw_dist2d_ptarray_ptarrayarc ...passed
  Test: test_lwgeom_tcpa ...passed
  Test: test_lwgeom_is_trajectory ...passed
Suite: effectivearea
  Test: do_test_lwgeom_effectivearea_lines ...passed
  Test: do_test_lwgeom_effectivearea_polys ...passed
Suite: miscellaneous
  Test: test_misc_force_2d ...passed
  Test: test_misc_simplify ...passed
  Test: test_misc_count_vertices ...passed
  Test: test_misc_area ...passed
  Test: test_misc_wkb ...passed
  Test: test_grid ...passed
Suite: noding
  Test: test_lwgeom_node ...passed
Suite: encoded_polyline_output
  Test: out_encoded_polyline_test_geoms ...passed
  Test: out_encoded_polyline_test_srid ...passed
  Test: out_encoded_polyline_test_precision ...passed
Suite: geojson_output
  Test: out_geojson_test_precision ...passed
  Test: out_geojson_test_dims ...passed
  Test: out_geojson_test_srid ...passed
  Test: out_geojson_test_bbox ...passed
  Test: out_geojson_test_geoms ...passed
Suite: gml_output
  Test: out_gml_test_precision ...passed
  Test: out_gml_test_srid ...passed
  Test: out_gml_test_dims ...passed
  Test: out_gml_test_geodetic ...passed
  Test: out_gml_test_geoms ...passed
  Test: out_gml_test_geoms_prefix ...passed
  Test: out_gml_test_geoms_nodims ...passed
  Test: out_gml2_extent ...passed
  Test: out_gml3_extent ...passed
Suite: kml_output
  Test: out_kml_test_precision ...passed
  Test: out_kml_test_dims ...passed
  Test: out_kml_test_geoms ...passed
  Test: out_kml_test_prefix ...passed
Suite: svg_output
  Test: out_svg_test_precision ...passed
  Test: out_svg_test_dims ...passed
  Test: out_svg_test_relative ...passed
  Test: out_svg_test_geoms ...passed
  Test: out_svg_test_srid ...passed
Suite: x3d_output
  Test: out_x3d3_test_precision ...passed
  Test: out_x3d3_test_geoms ...passed
  Test: out_x3d3_test_option ...passed
Suite: ptarray
  Test: test_ptarray_append_point ...passed
  Test: test_ptarray_append_ptarray ...passed
  Test: test_ptarray_locate_point ...passed
  Test: test_ptarray_isccw ...passed
  Test: test_ptarray_signed_area ...passed
  Test: test_ptarray_unstroke ...passed
  Test: test_ptarray_insert_point ...passed
  Test: test_ptarray_contains_point ...passed
  Test: test_ptarrayarc_contains_point ...passed
  Test: test_ptarray_scale ...passed
Suite: printing
  Test: test_lwprint_default_format ...passed
  Test: test_lwprint_format_orders ...passed
  Test: test_lwprint_optional_format ...passed
  Test: test_lwprint_oddball_formats ...passed
  Test: test_lwprint_bad_formats ...passed
Suite: SFCGAL
  Test: test_sfcgal_noop ...passed
Suite: split
  Test: test_lwline_split_by_point_to ...passed
  Test: test_lwgeom_split ...passed
Suite: stringbuffer
  Test: test_stringbuffer_append ...passed
  Test: test_stringbuffer_aprintf ...passed
Suite: surface
  Test: triangle_parse ...passed
  Test: tin_parse ...passed
  Test: polyhedralsurface_parse ...passed
  Test: surface_dimension ...passed
Suite: Internal Spatial Trees
  Test: test_tree_circ_create ...passed
  Test: test_tree_circ_pip ...passed
  Test: test_tree_circ_pip2 ...passed
  Test: test_tree_circ_distance ...passed
  Test: test_tree_circ_distance_threshold ...passed
Suite: triangulate
  Test: test_lwgeom_delaunay_triangulation ...passed
Suite: twkb_output
  Test: test_twkb_out_point ...passed
  Test: test_twkb_out_linestring ...passed
  Test: test_twkb_out_polygon ...passed
  Test: test_twkb_out_multipoint ...passed
  Test: test_twkb_out_multilinestring ...passed
  Test: test_twkb_out_multipolygon ...passed
  Test: test_twkb_out_collection ...passed
  Test: test_twkb_out_idlist ...passed
Suite: varint
  Test: test_zigzag ...passed
  Test: test_varint ...passed
  Test: test_varint_roundtrip ...passed
Suite: wkb_input
  Test: test_wkb_in_point ...passed
  Test: test_wkb_in_linestring ...passed
  Test: test_wkb_in_polygon ...passed
  Test: test_wkb_in_multipoint ...passed
  Test: test_wkb_in_multilinestring ...passed
  Test: test_wkb_in_multipolygon ...passed
  Test: test_wkb_in_collection ...passed
  Test: test_wkb_in_circularstring ...passed
  Test: test_wkb_in_compoundcurve ...passed
  Test: test_wkb_in_curvpolygon ...passed
  Test: test_wkb_in_multicurve ...passed
  Test: test_wkb_in_multisurface ...passed
  Test: test_wkb_in_malformed ...passed
Suite: wkb_output
  Test: test_wkb_out_point ...passed
  Test: test_wkb_out_linestring ...passed
  Test: test_wkb_out_polygon ...passed
  Test: test_wkb_out_multipoint ...passed
  Test: test_wkb_out_multilinestring ...passed
  Test: test_wkb_out_multipolygon ...passed
  Test: test_wkb_out_collection ...passed
  Test: test_wkb_out_circularstring ...passed
  Test: test_wkb_out_compoundcurve ...passed
  Test: test_wkb_out_curvpolygon ...passed
  Test: test_wkb_out_multicurve ...passed
  Test: test_wkb_out_multisurface ...passed
  Test: test_wkb_out_polyhedralsurface ...passed
Suite: wkt_input
  Test: test_wkt_in_point ...passed
  Test: test_wkt_in_linestring ...passed
  Test: test_wkt_in_polygon ...passed
  Test: test_wkt_in_multipoint ...passed
  Test: test_wkt_in_multilinestring ...passed
  Test: test_wkt_in_multipolygon ...passed
  Test: test_wkt_in_collection ...passed
  Test: test_wkt_in_circularstring ...passed
  Test: test_wkt_in_compoundcurve ...passed
  Test: test_wkt_in_curvpolygon ...passed
  Test: test_wkt_in_multicurve ...passed
  Test: test_wkt_in_multisurface ...passed
  Test: test_wkt_in_tin ...passed
  Test: test_wkt_in_polyhedralsurface ...passed
  Test: test_wkt_in_errlocation ...passed
Suite: wkt_output
  Test: test_wkt_out_point ...passed
  Test: test_wkt_out_linestring ...passed
  Test: test_wkt_out_polygon ...passed
  Test: test_wkt_out_multipoint ...passed
  Test: test_wkt_out_multilinestring ...passed
  Test: test_wkt_out_multipolygon ...passed
  Test: test_wkt_out_collection ...passed
  Test: test_wkt_out_circularstring ...passed
  Test: test_wkt_out_compoundcurve ...passed
  Test: test_wkt_out_curvpolygon ...passed
  Test: test_wkt_out_multicurve ...passed
  Test: test_wkt_out_multisurface ...passed

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites     38     38    n/a      0        0
               tests    251    251    251      0        0
             asserts   2468   2468   2468      0      n/a

Elapsed time =    0.298 seconds

Creating database 'postgis_reg'
Loading PostGIS into 'postgis_reg'
  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/postgis.sql
  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/postgis_comments.sql
Loading SFCGAL into 'postgis_reg'
  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/sfcgal.sql
  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/sfcgal_comments.sql
PostgreSQL 9.4.4, compiled by Visual C++ build 1800, 32-bit
  Postgis 2.2.0dev - r13980 - 2015-08-23 06:13:07
  scripts 2.2.0dev r13980
  GEOS: 3.5.0-CAPI-1.9.0 r4088
  PROJ: Rel. 4.9.1, 04 March 2015
  SFCGAL: 1.1.0

Running tests

 loader/Point .............. ok
 loader/PointM .............. ok
 loader/PointZ .............. ok
 loader/MultiPoint .............. ok
 loader/MultiPointM .............. ok
 loader/MultiPointZ .............. ok
 loader/Arc .............. ok
 loader/ArcM .............. ok
 loader/ArcZ .............. ok
 loader/Polygon .............. ok
 loader/PolygonM .............. ok
 loader/PolygonZ .............. ok
 loader/TSTPolygon ......... ok
 loader/TSIPolygon ......... ok
 loader/TSTIPolygon ......... ok
 loader/PointWithSchema ..... ok
 loader/NoTransPoint ......... ok
 loader/NotReallyMultiPoint ......... ok
 loader/MultiToSinglePoint ......... ok
 loader/ReprojectPts ........ ok
 loader/ReprojectPtsGeog ........ ok
 loader/Latin1 .... ok
 loader/Latin1-implicit .... ok
 loader/mfile .... ok
 dumper/literalsrid ....... ok
 dumper/realtable ....... ok
 affine .. ok
 bestsrid .. ok
 binary .. ok
 boundary .. ok
 cluster .. ok
 concave_hull .. ok
 ctors .. ok
 dump .. ok
 dumppoints .. ok
 empty .. ok
 forcecurve .. ok
 geography .. ok
 in_geohash .. ok
 in_gml .. ok
 in_kml .. ok
 in_encodedpolyline .. ok
 iscollection .. ok
 legacy .. ok
 long_xact .. ok
 lwgeom_regress .. ok
 measures .. ok
 operators .. ok
 out_geometry .. ok
 out_geography .. ok
 polygonize .. ok
 polyhedralsurface .. ok
 postgis_type_name .. ok
 regress .. ok
 regress_bdpoly .. ok
 regress_index .. ok
 regress_index_nulls .. ok
 regress_management .. ok
 regress_selectivity .. ok
 regress_lrs .. ok
 regress_ogc .. ok
 regress_ogc_cover .. ok
 regress_ogc_prep .. ok
 regress_proj .. ok
 relate .. ok
 remove_repeated_points .. ok
 removepoint .. ok
 setpoint .. ok
 simplify .. ok
 simplifyvw .. ok
 size .. ok
 snaptogrid .. ok
 split .. ok
 sql-mm-serialize .. ok
 sql-mm-circularstring .. ok
 sql-mm-compoundcurve .. ok
 sql-mm-curvepoly .. ok
 sql-mm-general .. ok
 sql-mm-multicurve .. ok
 sql-mm-multisurface .. ok
 swapordinates .. ok
 summary .. ok
 temporal .. ok
 tickets .. ok
 twkb .. ok
 typmod .. ok
 wkb .. ok
 wkt .. ok
 wmsservers .. ok
 knn .. ok
 hausdorff .. ok
 regress_buffer_params .. ok
 offsetcurve .. ok
 relatematch .. ok
 isvaliddetail .. ok
 sharedpaths .. ok
 snap .. ok
 node .. ok
 unaryunion .. ok
 clean .. ok
 relate_bnr .. ok
 delaunaytriangles .. ok
 clipbybox2d .. ok
 subdivide .. ok
 in_geojson .. ok
 regress_sfcgal .. ok
 sfcgal/empty .. ok
 sfcgal/geography .. ok
 sfcgal/legacy .. ok
 sfcgal/measures .. ok
 sfcgal/regress_ogc_prep .. ok
 sfcgal/regress_ogc .. ok
 sfcgal/regress .. ok
 sfcgal/tickets .. ok
 sfcgal/concave_hull .. ok
 sfcgal/wmsservers .. ok
 sfcgal/approximatemedialaxis .. ok
 uninstall .  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/uninstall_sfcgal.sql
  /projects/postgis/branches/2.2/regress/00-regress-install/share/contrib/postgis/uninstall_postgis.sql
. ok (4336)

Run tests: 118
Failed: 0

-- if you built --with-gui, you should see this too

     CUnit - A unit testing framework for C - Version 2.1-2
     http://cunit.sourceforge.net/


Suite: Shapefile Loader File shp2pgsql Test
  Test: test_ShpLoaderCreate() ...passed
  Test: test_ShpLoaderDestroy() ...passed
Suite: Shapefile Loader File pgsql2shp Test
  Test: test_ShpDumperCreate() ...passed
  Test: test_ShpDumperDestroy() ...passed

Run Summary:    Type  Total    Ran Passed Failed Inactive
              suites      2      2    n/a      0        0
               tests      4      4      4      0        0
             asserts      4      4      4      0      n/a</pre><p>The <code class="varname">postgis_tiger_geocoder</code> and <code class="varname">address_standardizer</code> extensions, currenlty only support the standard PostgreSQL installcheck.  To test these use the below.  Note: the make install is not necessary if you already did make install at root of PostGIS code folder.</p><p>For address_standardizer:
	  </p><pre class="programlisting">cd extensions/address_standardizer
make install
make installcheck
	  </pre><p>Output should look like:
	  </p><pre class="screen">============== dropping database "contrib_regression" ==============
DROP DATABASE
============== creating database "contrib_regression" ==============
CREATE DATABASE
ALTER DATABASE
============== running regression test queries        ==============
test test-init-extensions     ... ok
test test-parseaddress        ... ok
test test-standardize_address_1 ... ok
test test-standardize_address_2 ... ok

=====================
 All 4 tests passed.
=====================</pre><p>For tiger geocoder, make sure you have postgis and fuzzystrmatch extensions available in your PostgreSQL instance. The address_standardizer tests will also kick in if you built postgis with address_standardizer support:
	  </p><pre class="programlisting">cd extensions/postgis_tiger_geocoder
make install
make installcheck
	  </pre><p>output should look like:
	  </p><pre class="screen">============== dropping database "contrib_regression" ==============
DROP DATABASE
============== creating database "contrib_regression" ==============
CREATE DATABASE
ALTER DATABASE
============== installing fuzzystrmatch               ==============
CREATE EXTENSION
============== installing postgis                     ==============
CREATE EXTENSION
============== installing postgis_tiger_geocoder      ==============
CREATE EXTENSION
============== installing address_standardizer        ==============
CREATE EXTENSION
============== running regression test queries        ==============
test test-normalize_address   ... ok
test test-pagc_normalize_address ... ok

=====================
All 2 tests passed.
=====================</pre></div><div class="sect2" title="2.4.5. Installation"><div class="titlepage"><div><div><h3 class="title"><a name="idp64936144"></a>2.4.5. Installation</h3></div></div></div><p>
		To install PostGIS, type
	  </p><p>
		<span class="command"><strong>make install</strong></span>
	  </p><p>
		This will copy the PostGIS installation files into their appropriate
		subdirectory specified by the <span class="command"><strong>--prefix</strong></span> configuration
		parameter. In particular:
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
			The loader and dumper binaries are installed in
			<code class="filename">[prefix]/bin</code>.
		  </p></li><li class="listitem"><p>
			The SQL files, such as <code class="filename">postgis.sql</code>, are
			installed in <code class="filename">[prefix]/share/contrib</code>.
		  </p></li><li class="listitem"><p>
			The PostGIS libraries are installed in
			<code class="filename">[prefix]/lib</code>.
		  </p></li></ul></div><p>
		If you previously ran the <span class="command"><strong>make comments</strong></span> command to
		generate the <code class="filename">postgis_comments.sql</code>, <code class="filename">raster_comments.sql</code> file, install the
		sql file by running
	  </p><p>
		<span class="command"><strong>make comments-install</strong></span>
	  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  <code class="filename">postgis_comments.sql</code>, <code class="filename">raster_comments.sql</code>, <code class="filename">topology_comments.sql</code> was separated from the
		  typical build and installation targets since with it comes the extra
		  dependency of <span class="command"><strong>xsltproc</strong></span>.
		</p></td></tr></table></div></div></div><div class="sect1" title="2.5. Creating a spatial database using EXTENSIONS"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_new_db_extensions"></a>2.5. Creating a spatial database using EXTENSIONS</h2></div></div></div><p>
	 If you are using PostgreSQL 9.1+ and have compiled and installed the extensions/ postgis modules, you
	 can create a spatial database the new way.
	</p><p>
	  <span class="command"><strong>createdb [yourdatabase]</strong></span>
	</p><p>
	  The core postgis extension installs PostGIS geometry, geography, raster, spatial_ref_sys and all the functions and comments with a simple:
	  </p><pre class="programlisting">CREATE EXTENSION postgis;</pre><p> command.
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -c "CREATE EXTENSION postgis;"</strong></span>
	</p><p>
	  Topology is packaged as a separate extension and installable with command:
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -c "CREATE EXTENSION postgis_topology;"</strong></span>
	</p><p>If you plan to restore an old backup from prior versions in this new db, run:</p><p><span class="command"><strong>psql -d [yourdatabase] -f legacy.sql</strong></span></p><p>You can later run <code class="filename">uninstall_legacy.sql</code> to get rid of the deprecated functions after you are done with restoring and cleanup.</p></div><div class="sect1" title="2.6. Create a spatially-enabled database without using extensions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="create_new_db"></a>2.6. Create a spatially-enabled database without using extensions</h2></div></div></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is generally only needed if you built-PostGIS without raster support. Since raster functions are part of the postgis extension, extension support is not enabled if PostGIS is built without raster.</p></td></tr></table></div><p> The first step in creating a PostGIS database is to create a simple
	  PostgreSQL database.
	</p><p>
	  <span class="command"><strong>createdb [yourdatabase]</strong></span>
	</p><p>
	  Many of the PostGIS functions are written in the PL/pgSQL procedural
	  language. As such, the next step to create a PostGIS database is to enable
	  the PL/pgSQL language in your new database. This is accomplish by the
	  command below command.  For PostgreSQL 8.4+, this is generally already installed
	</p><p>
	  <span class="command"><strong>createlang plpgsql [yourdatabase]</strong></span>
	</p><p>
	  Now load the PostGIS object and function definitions into your database by
	  loading the <code class="filename">postgis.sql</code> definitions file (located in
	  <code class="filename">[prefix]/share/contrib</code> as specified during the
	  configuration step).
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f postgis.sql</strong></span>
	</p><p>
	  For a complete set of EPSG coordinate system definition identifiers, you
	  can also load the <code class="filename">spatial_ref_sys.sql</code> definitions
	  file and populate the <code class="varname">spatial_ref_sys</code> table. This will
	  permit you to perform ST_Transform() operations on geometries.
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f spatial_ref_sys.sql</strong></span>
	</p><p>
	  If you wish to add comments to the PostGIS functions, the final step is to
	  load the <code class="filename">postgis_comments.sql</code> into your spatial
	  database. The comments can be viewed by simply typing <span class="command"><strong>\dd
	  [function_name]</strong></span> from a <span class="command"><strong>psql</strong></span> terminal window.
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f postgis_comments.sql</strong></span>
	</p><p>
	  Install raster support
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f rtpostgis.sql</strong></span>
	</p><p>
	  Install raster support comments.  This will provide quick help info for each raster function
	  using psql or PgAdmin or any other PostgreSQL tool that can show function comments
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f raster_comments.sql</strong></span>
	</p><p>
	  Install topology support
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f topology/topology.sql</strong></span>
	</p><p>
	  Install topology support comments.  This will provide quick help info for each topology function / type
	  using psql or PgAdmin or any other PostgreSQL tool that can show function comments
	</p><p>
	  <span class="command"><strong>psql -d [yourdatabase] -f topology/topology_comments.sql</strong></span>
	</p><p>If you plan to restore an old backup from prior versions in this new db, run:</p><p><span class="command"><strong>psql -d [yourdatabase] -f legacy.sql</strong></span></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>There is an alternative <code class="filename">legacy_minimal.sql</code> you can run instead which will install barebones needed to recover tables and work with apps like MapServer
	and GeoServer. If you have views that use things like distance / length etc, you'll need the full blown <code class="filename">legacy.sql</code></p></td></tr></table></div><p>You can later run <code class="filename">uninstall_legacy.sql</code> to get rid of the deprecated functions after you are done with restoring and cleanup.</p></div><div class="sect1" title="2.7. Installing and Using the address standardizer"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="installing_pagc_address_standardizer"></a>2.7. Installing and Using the address standardizer</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp64994256">2.7.1. Installing Regex::Assemble</a></span></dt></dl></div><p>The <code class="code">address_standardizer</code> extension used to be a separate package that required separate download. From PostGIS 2.2 on, it is now bundled in.
		For more information about the address_standardize, what it does, and how to configure it for your needs, refer to <a class="xref" href="#Address_Standardizer" title="Chapter 12. Address Standardizer">Chapter 12, <i>Address Standardizer</i></a>.</p><p>This standardizer can be used in conjunction with the PostGIS packaged tiger geocoder extension as a replacement for the <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> discussed.
		To use as replacement refer to  <a class="xref" href="#tiger_pagc_address_standardizing" title="2.8.3. Using Address Standardizer Extension with Tiger geocoder">Section 2.8.3, “Using Address Standardizer Extension with Tiger geocoder”</a>.
		You can also use it as a building block for your own geocoder or use it to standardize your addresses for easier compare of addresses.</p><p>The address standardizer relies on PCRE which is usually already installed on many Nix systems,
but you can download the latest at: <a class="ulink" href="http://www.pcre.org" target="_top">http://www.pcre.org</a>. If during <a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a>, PCRE is found, then the address standardizer extension will automatically be built.  If you have a custom pcre install you want to use instead, pass to configure <code class="code">--with-pcredir=/path/to/pcre</code> where <code class="filename">/path/to/pcre</code> is the root folder for your pcre include and lib directories.</p><p>For Windows users, the PostGIS 2.1+ bundle is packaged with the address_standardizer already so no need to compile and can move straight to <code class="code">CREATE EXTENSION</code> step.</p><p>Once you have installed, you can connect to your database and run the SQL:</p><pre class="programlisting">CREATE EXTENSION address_standardizer;</pre><p>The following test requires no rules, gaz, or lex tables</p><pre class="programlisting">SELECT num, street, city, state, zip
 FROM parse_address('1 Devonshire Place, Boston, MA 02109');</pre><p>Output should be</p><pre class="screen"> num |         street         |  city  | state |  zip
-----+------------------------+--------+-------+-------
 1   | Devonshire Place PH301 | Boston | MA    | 02109</pre><div class="sect2" title="2.7.1. Installing Regex::Assemble"><div class="titlepage"><div><div><h3 class="title"><a name="idp64994256"></a>2.7.1. Installing Regex::Assemble</h3></div></div></div><p>Perl Regex:Assemble is no longer needed for compiling address_standardizer extension since the files it generates are part of the source tree.  However if you need to edit the <code class="filename">usps-st-city-orig.txt</code> or <code class="filename">usps-st-city-orig.txt usps-st-city-adds.tx</code>, you need to rebuild <code class="filename">parseaddress-stcities.h</code> which does require Regex:Assemble.</p><pre class="programlisting">cpan Regexp::Assemble</pre><p>or if you are on Ubuntu / Debian you might need to do</p><pre class="programlisting">sudo perl -MCPAN -e "install Regexp::Assemble"</pre></div></div><div class="sect1" title="2.8. Installing, Upgrading Tiger Geocoder and loading data"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="loading_extras_tiger_geocoder"></a>2.8. Installing, Upgrading Tiger Geocoder and loading data</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#install_tiger_geocoder_extension">2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension</a></span></dt><dt><span class="sect2"><a href="#install_tiger_geocoder">2.8.2. Tiger Geocoder Enabling your PostGIS database: Not Using Extensions</a></span></dt><dt><span class="sect2"><a href="#tiger_pagc_address_standardizing">2.8.3. Using Address Standardizer Extension with Tiger geocoder</a></span></dt><dt><span class="sect2"><a href="#tiger_geocoder_loading_data">2.8.4. Loading Tiger Data</a></span></dt><dt><span class="sect2"><a href="#upgrade_tiger_geocoder">2.8.5. Upgrading your Tiger Geocoder Install</a></span></dt></dl></div><p>Extras like Tiger geocoder may not be packaged in your PostGIS distribution, but will always be available in the postgis-2.3.0.tar.gz file. The instructions provided here are also available in the <code class="filename">extras/tiger_geocoder/README</code> </p><p>If you are on Windows and you don't have tar installed, you can use <a class="ulink" href="http://www.7-zip.org/" target="_top">http://www.7-zip.org/</a> to unzip the PostGIS tarball.</p><div class="sect2" title="2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension"><div class="titlepage"><div><div><h3 class="title"><a name="install_tiger_geocoder_extension"></a>2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension</h3></div></div></div><div class="toc"><dl><dt><span class="sect3"><a href="#convert_tiger_geocoder_extension">2.8.1.1. Converting a Tiger Geocoder Regular Install to Extension Model</a></span></dt></dl></div><p>If you are using PostgreSQL 9.1+ and PostGIS 2.1+, you can take advantage of the new extension model for installing tiger geocoder. To do so:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>First get binaries for PostGIS 2.1+ or compile and install as usual.  This should install the necessary extension files as well for tiger geocoder.</p></li><li class="listitem"><p>Connect to your database via psql or pgAdmin or some other tool and run the following SQL commands.  Note that if you are installing in a database that already has postgis, you don't need to do the first step.  If you have <code class="varname">fuzzystrmatch</code> extension already installed, you don't need to do the second step either.</p><pre class="programlisting">CREATE EXTENSION postgis;
CREATE EXTENSION fuzzystrmatch;
--this one is optional if you want to use the rules based standardizer (pagc_normalize_address)
CREATE EXTENSION address_standardizer;
CREATE EXTENSION postgis_tiger_geocoder;</pre><p>If you already have postgis_tiger_geocoder extension installed, and just want to update to the latest run:</p><pre class="programlisting">ALTER EXTENSION postgis UPDATE;
ALTER EXTENSION postgis_tiger_geocoder UPDATE;</pre><p>If you made custom entries or changes to <code class="varname">tiger.loader_platform</code> and <code class="varname">tiger.loader_variables</code> you may need to update these.</p></li><li class="listitem"><p>To confirm your install is working correctly, run this sql in your database:</p><pre class="programlisting">SELECT na.address, na.streetname,na.streettypeabbrev, na.zip
	FROM normalize_address('1 Devonshire Place, Boston, MA 02109') AS na;</pre><p>Which should output</p><pre class="screen"> address | streetname | streettypeabbrev |  zip
---------+------------+------------------+-------
	   1 | Devonshire | Pl               | 02109</pre></li><li class="listitem"><p>Create a new record in <code class="varname">tiger.loader_platform</code> table with the paths of your executables and server. </p><p>So for example to create a profile called debbie that follows <code class="code">sh</code> convention. You would do:</p><pre class="programlisting">INSERT INTO tiger.loader_platform(os, declare_sect, pgbin, wget, unzip_command, psql, path_sep,
		   loader, environ_set_command, county_process_command)
SELECT 'debbie', declare_sect, pgbin, wget, unzip_command, psql, path_sep,
	   loader, environ_set_command, county_process_command
  FROM tiger.loader_platform
  WHERE os = 'sh';</pre><p>And then edit the paths in the <span class="emphasis"><em>declare_sect</em></span> column to those that fit Debbie's pg, unzip,shp2pgsql, psql, etc path locations.</p><p>If you don't edit this  <code class="varname">loader_platform</code> table, it will just contain common case locations of items and you'll have to edit the generated script after the script is generated.</p></li><li class="listitem"><p>Create a folder called <code class="filename">gisdata</code> on root of server or your local pc if you have a fast network connection to the server. This folder is
where the tiger files will be downloaded to and processed.  If you are not happy with having the folder on the root of the server, or simply want to change to a different folder for staging, then edit the field <code class="varname">staging_fold</code> in the <code class="varname">tiger.loader_variables</code> table.</p></li><li class="listitem"><p>Create a folder called temp in the <code class="filename">gisdata</code> folder or whereever you designated the <code class="varname">staging_fold</code> to be.  This will be
the folder where the loader extracts the downloaded tiger data.</p></li><li class="listitem"><p>Then run the  <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> and <a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>  SQL functions make sure to use the name of your custom profile and copy the scripts to a .sh or .bat file.  So for example to do the nation load and one state using our new profile, you can do this using psql:</p><pre class="programlisting">psql -c "SELECT Loader_Generate_Nation_Script('debbie')" -d geocoder -tA &gt; /gisdata/nation_script_load.sh</pre><pre class="programlisting">psql -c "SELECT Loader_Generate_Script(ARRAY['MA'], 'debbie')" -d geocoder -tA &gt; /gisdata/ma_load.sh</pre></li><li class="listitem"><p>Run the generated commandline scripts.</p><pre class="programlisting">cd /gisdata
sh nation_script_load.sh
sh ma_load.sh</pre></li><li class="listitem"><p>After you are done loading all data or at a stopping point, it's a good idea to analyze all the tiger tables to update the stats (include inherited stats)</p><pre class="programlisting">SELECT install_missing_indexes();
vacuum analyze verbose tiger.addr;
vacuum analyze verbose tiger.edges;
vacuum analyze verbose tiger.faces;
vacuum analyze verbose tiger.featnames;
vacuum analyze verbose tiger.place;
vacuum analyze verbose tiger.cousub;
vacuum analyze verbose tiger.county;
vacuum analyze verbose tiger.state;
vacuum analyze verbose tiger.zip_lookup_base;
vacuum analyze verbose tiger.zip_state;
vacuum analyze verbose tiger.zip_state_loc;</pre></li></ol></div><div class="sect3" title="2.8.1.1. Converting a Tiger Geocoder Regular Install to Extension Model"><div class="titlepage"><div><div><h4 class="title"><a name="convert_tiger_geocoder_extension"></a>2.8.1.1. Converting a Tiger Geocoder Regular Install to Extension Model</h4></div></div></div><p>If you installed the tiger geocoder without using the extension model, you can convert to the extension model as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Follow instructions in <a class="xref" href="#upgrade_tiger_geocoder" title="2.8.5. Upgrading your Tiger Geocoder Install">Section 2.8.5, “Upgrading your Tiger Geocoder Install”</a> for the non-extension model upgrade.</p></li><li class="listitem"><p>Connect to your database with psql or pgAdmin and run the following command:</p><pre class="programlisting">CREATE EXTENSION postgis_tiger_geocoder FROM unpackaged;</pre></li></ol></div></div></div><div class="sect2" title="2.8.2. Tiger Geocoder Enabling your PostGIS database: Not Using Extensions"><div class="titlepage"><div><div><h3 class="title"><a name="install_tiger_geocoder"></a>2.8.2. Tiger Geocoder Enabling your PostGIS database: Not Using Extensions</h3></div></div></div><p>
		  First install PostGIS using the prior instructions.
		</p><p>
		  If you don't have an extras folder, download <a class="ulink" href="http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz" target="_top">http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz</a>
		</p><p>
		  <span class="command"><strong>tar xvfz postgis-2.3.0.tar.gz</strong></span>
		</p><p>
		  <span class="command"><strong>cd postgis-2.3.0/extras/tiger_geocoder</strong></span>
		</p><p>Edit the <code class="filename">tiger_loader_2015.sql</code> (or latest loader file you find, unless you want to load different year) to the paths of your executables server etc or alternatively you can update the <code class="varname">loader_platform</code> table once installed. If you don't edit this file or the <code class="varname">loader_platform</code> table, it will just contain common case locations of items and you'll have to edit the generated script after the fact when you run the  <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> and <a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>  SQL functions.
		 </p><p>If you are installing Tiger geocoder for the first time edit either the <code class="filename">create_geocode.bat</code> script If you are on windows
			or the <code class="filename">create_geocode.sh</code> if you are on Linux/Unix/Mac OSX with your PostgreSQL specific settings and run the corresponding script from the commandline. </p><p>Verify that you now have a <code class="varname">tiger</code> schema in your database and that it is part of your database search_path.  If it is not, add it with a command something along the line of: </p><pre class="programlisting">ALTER DATABASE geocoder SET search_path=public, tiger;</pre><p>The normalizing address functionality works more or less without any data except for tricky addresses.  Run this test and verify things look like this:
			</p><pre class="programlisting">SELECT pprint_addy(normalize_address('202 East Fremont Street, Las Vegas, Nevada 89101')) As pretty_address;
pretty_address
---------------------------------------
202 E Fremont St, Las Vegas, NV 89101
			</pre><p>
		</p></div><div class="sect2" title="2.8.3. Using Address Standardizer Extension with Tiger geocoder"><div class="titlepage"><div><div><h3 class="title"><a name="tiger_pagc_address_standardizing"></a>2.8.3. Using Address Standardizer Extension with Tiger geocoder</h3></div></div></div><p>One of the many complaints of folks is the address normalizer function <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> function that normalizes an address for prepping before geocoding.  The normalizer is far from perfect and trying to patch its imperfectness takes a vast amount of resources.  As such we have integrated with another
			project that has a much better address standardizer engine.  To use this new address_standardizer, you compile the extension as described in <a class="xref" href="#installing_pagc_address_standardizer" title="2.7. Installing and Using the address standardizer">Section 2.7, “Installing and Using the address standardizer”</a> and install as an extension in your database.</p><p>Once you install this extension in the same database as you have installed <code class="code">postgis_tiger_geocoder</code>, then the <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> can be used instead of <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>. This extension is tiger agnostic, so can be used with other data sources such as international addresses. The tiger geocoder extension does come packaged with its own custom versions of <a class="xref" href="#rulestab" title="rules table">rules table</a> ( <code class="code">tiger.pagc_rules</code>) , <a class="xref" href="#gaztab" title="gaz table">gaz table</a> (<code class="code">tiger.pagc_gaz</code>), and <a class="xref" href="#lextab" title="lex table">lex table</a> (<code class="code">tiger.pagc_lex</code>).  These you can add and update to improve your standardizing experience for your own needs.</p></div><div class="sect2" title="2.8.4. Loading Tiger Data"><div class="titlepage"><div><div><h3 class="title"><a name="tiger_geocoder_loading_data"></a>2.8.4. Loading Tiger Data</h3></div></div></div><p>The instructions for loading data are available in a more detailed form  in the <code class="filename">extras/tiger_geocoder/tiger_2011/README</code>.  This just includes the general steps.</p><p>The load process downloads data from the census website for the respective nation files, states requested, extracts the files, and then loads each state into its own separate
		set of state tables.  Each state table inherits from the tables defined in <code class="varname">tiger</code> schema so that its sufficient to just query those tables to access all the data and drop a set of state tables at any time using the <a class="xref" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a> if you need to reload a state or just don't need a state anymore.</p><p>In order to be able to load data you'll need the following tools:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>A tool to unzip the zip files from census website.</p><p>For Unix like systems: <code class="varname">unzip</code> executable which is usually already installed on most Unix like platforms.</p><p>For Windows, 7-zip which is a free compress/uncompress tool you can download from <a class="ulink" href="http://www.7-zip.org/" target="_top">http://www.7-zip.org/</a> </p></li><li class="listitem"><p><code class="filename">shp2pgsql</code> commandline which is installed by default when you install PostGIS.</p></li><li class="listitem"><p><code class="filename">wget</code> which is a web grabber tool usually installed on most Unix/Linux systems.</p><p>If you are on windows, you can get pre-compiled binaries from <a class="ulink" href="http://gnuwin32.sourceforge.net/packages/wget.htm" target="_top">http://gnuwin32.sourceforge.net/packages/wget.htm</a> </p></li></ul></div><p>If you are upgrading from tiger_2010, you'll need to first generate and run <a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a>. Before you load any state data, you need to load the nation wide data which you do with  <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a>. Which will
		generate a loader script for you.   <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> is a one-time step that should be done for upgrading (from 2010) and for new installs.</p><p>To load state data refer to <a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a> to generate a data load script for your platform for the states you desire.
			Note that you can install these piecemeal. You don't have to load all the states you want all at once.  You can load them as you need them.</p><p>After the states you desire have been loaded, make sure to run the:
		</p><pre class="programlisting">SELECT install_missing_indexes();</pre><p> as described in  <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>.</p><p>To test that things are working as they should, try to run a geocode on an address in your state using <a class="xref" href="#Geocode" title="Geocode">Geocode</a> </p></div><div class="sect2" title="2.8.5. Upgrading your Tiger Geocoder Install"><div class="titlepage"><div><div><h3 class="title"><a name="upgrade_tiger_geocoder"></a>2.8.5. Upgrading your Tiger Geocoder Install</h3></div></div></div><p>
		  If you have Tiger Geocoder packaged with 2.0+ already installed, you can upgrade the functions at any time even from an interim tar ball if there are fixes you badly need.  This will only work for Tiger geocoder not installed with extensions.
		</p><p>
		  If you don't have an extras folder, download <a class="ulink" href="http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz" target="_top">http://download.osgeo.org/postgis/source/postgis-2.3.0.tar.gz</a>
		</p><p>
		  <span class="command"><strong>tar xvfz postgis-2.3.0.tar.gz</strong></span>
		</p><p>
		  <span class="command"><strong>cd postgis-2.3.0/extras/tiger_geocoder/tiger_2011</strong></span>
		</p><p>Locate the  <code class="filename">upgrade_geocoder.bat</code> script If you are on windows
			or the <code class="filename">upgrade_geocoder.sh</code> if you are on Linux/Unix/Mac OSX.  Edit the file to have your postgis database credentials.</p><p>If you are upgrading from 2010 or 2011, make sure to unremark out the loader script line so you get the latest script for loading 2012 data.</p><p>
			Then run th corresponding script from the commandline.
		</p><p>Next drop all nation tables and load up the new ones. Generate a drop script with this SQL statement as detailed in <a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a></p><pre class="programlisting">SELECT drop_nation_tables_generate_script();</pre><p>Run the generated drop SQL statements.</p><p>Generate a nation load script with this SELECT statement as detailed in <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></p><p><span class="bold"><strong>For windows</strong></span></p><pre class="programlisting">SELECT loader_generate_nation_script('windows'); </pre><p><span class="bold"><strong>For unix/linux</strong></span></p><pre class="programlisting">SELECT loader_generate_nation_script('sh');</pre><p>Refer to <a class="xref" href="#tiger_geocoder_loading_data" title="2.8.4. Loading Tiger Data">Section 2.8.4, “Loading Tiger Data”</a> for instructions on how to run the generate script. This only needs to be done once.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>You can have a mix of 2010/2011 state tables and can upgrade each state separately.  Before you upgrade a state to 2011, you first need to drop the 2010 tables for that state using <a class="xref" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a>.</p></td></tr></table></div></div></div><div class="sect1" title="2.9. Create a spatially-enabled database from a template"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="templatepostgis"></a>2.9. Create a spatially-enabled database from a template</h2></div></div></div><p>
	  Some packaged distributions of PostGIS (in particular the Win32 installers
	  for PostGIS &gt;= 1.1.5) load the PostGIS functions into a template
	  database called <code class="varname">template_postgis</code>. If the
	  <code class="varname">template_postgis</code> database exists in your PostgreSQL
	  installation then it is possible for users and/or applications to create
	  spatially-enabled databases using a single command. Note that in both
	  cases, the database user must have been granted the privilege to create
	  new databases.
	</p><p>
	  From the shell:
	</p><pre class="programlisting"># createdb -T template_postgis my_spatial_db</pre><p>
	  From SQL:
	</p><pre class="programlisting">postgres=# CREATE DATABASE my_spatial_db TEMPLATE=template_postgis</pre></div><div class="sect1" title="2.10. Upgrading"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="upgrading"></a>2.10. Upgrading</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#soft_upgrade">2.10.1. Soft upgrade</a></span></dt><dt><span class="sect2"><a href="#hard_upgrade">2.10.2. Hard upgrade</a></span></dt></dl></div><p>
	  Upgrading existing spatial databases can be tricky as it requires
	  replacement or introduction of new PostGIS object definitions.
	</p><p>
	  Unfortunately not all definitions can be easily replaced in a live
	  database, so sometimes your best bet is a dump/reload process.
	</p><p>
	  PostGIS provides a SOFT UPGRADE procedure for minor or bugfix releases,
	  and a HARD UPGRADE procedure for major releases.
	</p><p>
	  Before attempting to upgrade PostGIS, it is always worth to backup your
	  data. If you use the -Fc flag to pg_dump you will always be able to
	  restore the dump with a HARD UPGRADE.
	</p><div class="sect2" title="2.10.1. Soft upgrade"><div class="titlepage"><div><div><h3 class="title"><a name="soft_upgrade"></a>2.10.1. Soft upgrade</h3></div></div></div><div class="toc"><dl><dt><span class="sect3"><a href="#soft_upgrade_sql_script">2.10.1.1. Soft Upgrade Pre 9.1+ or without extensions</a></span></dt><dt><span class="sect3"><a href="#soft_upgrade_extensions">2.10.1.2. Soft Upgrade 9.1+ using extensions</a></span></dt></dl></div><p>If you installed your database using extensions, you'll need to upgrade using the extension model as well.  If you installed using the old sql script way,
	  then you should upgrade using the sql script way. Please refer to the appropriate.</p><div class="sect3" title="2.10.1.1. Soft Upgrade Pre 9.1+ or without extensions"><div class="titlepage"><div><div><h4 class="title"><a name="soft_upgrade_sql_script"></a>2.10.1.1. Soft Upgrade Pre 9.1+ or without extensions</h4></div></div></div><p>This section applies only to those who installed PostGIS not using extensions.  If you have extensions and try to upgrade with this approach you'll get messages like:</p><pre class="programlisting">can't drop ... because postgis extension depends on it</pre><p>
		After compiling and installing (make install) you should find a  <code class="filename">postgis_upgrade.sql</code> and <code class="filename">rtpostgis_upgrade.sql</code> in the installation folders. For example <code class="filename">/usr/share/postgresql/9.3/contrib/postgis_upgrade.sql</code>.  Install the <code class="filename">postgis_upgrade.sql</code>. If you have raster functionality installed, you will also need to install the <code class="filename">/usr/share/postgresql/9.3/contrib/postgis_upgrade.sql</code>. If you are moving from PostGIS 1.* to PostGIS 2.* or from PostGIS 2.* prior to r7409, you need to do a HARD UPGRADE.
	  </p><pre class="programlisting">psql -f postgis_upgrade.sql -d your_spatial_database</pre><p>
		The same procedure applies to raster and
		topology extensions, with upgrade files named
		<code class="filename">rtpostgis_upgrade*.sql</code> and
		<code class="filename">topology_upgrade*.sql</code> respectively.
		If you need them:
	  </p><pre class="programlisting">psql -f rtpostgis_upgrade.sql -d your_spatial_database</pre><pre class="programlisting">psql -f topology_upgrade.sql -d your_spatial_database</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  If you can't find the <code class="filename">postgis_upgrade*.sql</code> specific for upgrading your version you are using a version too early for
		  a soft upgrade and need to do a HARD UPGRADE.
		</p></td></tr></table></div><p>
		The <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> function
		should inform you about the need to run this kind of
		upgrade using a "procs need upgrade" message.
	  </p></div><div class="sect3" title="2.10.1.2. Soft Upgrade 9.1+ using extensions"><div class="titlepage"><div><div><h4 class="title"><a name="soft_upgrade_extensions"></a>2.10.1.2. Soft Upgrade 9.1+ using extensions</h4></div></div></div><p>If you originally installed PostGIS with extensions, then you need to upgrade using extensions as well.  Doing a minor upgrade with extensions, is fairly painless.</p><pre class="programlisting">ALTER EXTENSION postgis UPDATE TO "2.3.0";
ALTER EXTENSION postgis_topology UPDATE TO "2.3.0";</pre><p>If you get an error notice something like:</p><pre class="programlisting">No migration path defined for ... to 2.3.0</pre><p>Then you'll need to backup your database, create a fresh one as described in <a class="xref" href="#create_new_db_extensions" title="2.5. Creating a spatial database using EXTENSIONS">Section 2.5, “Creating a spatial database using EXTENSIONS”</a> and then restore your backup ontop of this new database.</p><p>If you get a notice message like:</p><pre class="programlisting">Version "2.3.0" of extension "postgis" is already installed</pre><p>
Then everything is already up to date and you can safely ignore it. <span class="bold"><strong>UNLESS</strong></span>
you're attempting to upgrade from an SVN version to the next (which
doesn't get a new version number); in that case you can append "next" to the version
string, and next time you'll need to drop the "next" suffix again:
    </p><pre class="programlisting">ALTER EXTENSION postgis UPDATE TO "2.3.0next";
ALTER EXTENSION postgis_topology UPDATE TO "2.3.0next";</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you installed PostGIS originally without a version specified, you can often skip the reinstallation of postgis extension before restoring since the backup just has <code class="code">CREATE EXTENSION postgis</code> and thus
		picks up the newest latest version during restore.</p></td></tr></table></div></div></div><div class="sect2" title="2.10.2. Hard upgrade"><div class="titlepage"><div><div><h3 class="title"><a name="hard_upgrade"></a>2.10.2. Hard upgrade</h3></div></div></div><p>
		By HARD UPGRADE we mean full dump/reload of postgis-enabled databases.
		You need a HARD UPGRADE when PostGIS objects' internal storage changes
		or when SOFT UPGRADE is not possible. The
		<a class="link" href="#release_notes" title="Appendix A. Appendix">Release Notes</a>
		appendix reports for each version whether you need a dump/reload (HARD
		UPGRADE) to upgrade.
	  </p><p>
		The dump/reload process is assisted by the postgis_restore.pl
		script which takes care of skipping from the dump all
		definitions which belong to PostGIS (including old ones),
		allowing you to restore your schemas and data into a
		database with PostGIS installed without getting duplicate
		symbol errors or bringing forward deprecated objects.
	  </p><p>Supplementary instructions for windows users are available at  <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiWinUpgrade" target="_top">Windows Hard upgrade</a>.</p><p>
		The Procedure is as follows:
	  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
		Create a "custom-format" dump of the database you want
		to upgrade (let's call it <code class="varname">olddb</code>)
		include binary blobs (-b) and verbose (-v) output.
		The user can be the owner of the db, need not be postgres
		super account.
	  </p><pre class="programlisting">pg_dump -h localhost -p 5432 -U postgres -Fc -b -v -f "/somepath/olddb.backup" olddb</pre></li><li class="listitem"><p>
		Do a fresh install of PostGIS in a new database -- we'll
		refer to this database as <code class="varname">newdb</code>.
		Please refer to <a class="xref" href="#create_new_db" title="2.6. Create a spatially-enabled database without using extensions">Section 2.6, “Create a spatially-enabled database without using extensions”</a> and <a class="xref" href="#create_new_db_extensions" title="2.5. Creating a spatial database using EXTENSIONS">Section 2.5, “Creating a spatial database using EXTENSIONS”</a> for
		instructions on how to do this.
	  </p><p>
		The spatial_ref_sys entries found in your dump will be
		restored, but they will not override existing ones in
		spatial_ref_sys.  This is to ensure that fixes in the
		official set will be properly propagated to restored
		databases. If for any reason you really want your own
		overrides of standard entries just don't load the
		spatial_ref_sys.sql file when creating the new db.
	  </p><p>
		If your database is really old or you know you've
		been using long deprecated functions in your
		views and functions, you might need to load
		<code class="filename">legacy.sql</code> for all your functions
		and views etc. to properly come back.
		Only do this if _really_ needed. Consider upgrading your
		views and functions before dumping instead, if possible.
		The deprecated functions can be later removed by loading
		<code class="filename">uninstall_legacy.sql</code>.
	  </p></li><li class="listitem"><p>
		Restore your backup into your fresh
		<code class="varname">newdb</code> database using
		postgis_restore.pl.
		Unexpected errors, if any, will be printed to the standard
		error stream by psql. Keep a log of those.
	  </p><pre class="programlisting">perl utils/postgis_restore.pl "/somepath/olddb.backup" | psql -h localhost -p 5432 -U postgres newdb 2&gt; errors.txt</pre></li></ol></div><p>
		Errors may arise in the following cases:
	</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
		Some of your views or functions make use of deprecated PostGIS objects.
		In order to fix this you may try loading <code class="filename">legacy.sql</code>
		script prior to restore or you'll have to restore to a
		version of PostGIS which still contains those objects
		and try a migration again after porting your code.
		If the <code class="filename">legacy.sql</code> way works for you, don't forget
		to fix your code to stop using deprecated functions and drop them
		loading <code class="filename">uninstall_legacy.sql</code>.
	</p></li><li class="listitem"><p>
		Some custom records of spatial_ref_sys in dump file have
		an invalid SRID value. Valid SRID values are bigger than 0
		and smaller than 999000. Values in the 999000.999999 range
    are reserved for internal use while values &gt; 999999 can't
    be used at all.
    All your custom records with invalid SRIDs will be retained,
    with those &gt; 999999 moved into the reserved range, but the
    spatial_ref_sys table would lose a check constraint guarding
    for that invariant to hold and possibly also its primary key
    ( when multiple invalid SRIDS get converted to the same reserved
    SRID value ).
  </p><p>
		In order to fix this you should copy your custom SRS to
		a SRID with a valid value (maybe in the 910000..910999
		range), convert all your tables to the new srid (see
		<a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a>), delete the invalid
		entry from spatial_ref_sys and re-construct the check(s) with:

		</p><pre class="programlisting">ALTER TABLE spatial_ref_sys ADD CONSTRAINT spatial_ref_sys_srid_check check (srid &gt; 0 AND srid &lt; 999000 );</pre><p>

		</p><pre class="programlisting">ALTER TABLE spatial_ref_sys ADD PRIMARY KEY(srid));</pre><p>

	</p></li></ol></div></div></div><div class="sect1" title="2.11. Common Problems during installation"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp65174992"></a>2.11. Common Problems during installation</h2></div></div></div><p>
	  There are several things to check when your installation or upgrade
	  doesn't go as you expected.
	</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
		  Check that you have installed PostgreSQL 9.2
		  or newer, and that you are compiling against the same version of the
		  PostgreSQL source as the version of PostgreSQL that is running.
		  Mix-ups can occur when your (Linux) distribution has already
		  installed PostgreSQL, or you have otherwise installed PostgreSQL
		  before and forgotten about it. PostGIS will only work with PostgreSQL
		  9.2 or newer, and strange, unexpected
		  error messages will result if you use an older version. To check the
		  version of PostgreSQL which is running, connect to the database using
		  psql and run this query:
		</p><pre class="programlisting">SELECT version();</pre><p>
		  If you are running an RPM based distribution, you can check for the
		  existence of pre-installed packages using the <span class="command"><strong>rpm</strong></span>
		  command as follows: <span class="command"><strong>rpm -qa | grep postgresql</strong></span>
		</p></li><li class="listitem"><p>If your upgrade fails, make sure you are restoring into a database that already has PostGIS installed.</p><pre class="programlisting">SELECT postgis_full_version();</pre></li></ol></div><p>
	  Also check that configure has correctly detected the location and version
	  of PostgreSQL, the Proj4 library and the GEOS library.
	</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
		  The output from configure is used to generate the
		  <code class="filename">postgis_config.h</code> file. Check that the
		  <code class="varname">POSTGIS_PGSQL_VERSION</code>,
		  <code class="varname">POSTGIS_PROJ_VERSION</code> and
		  <code class="varname">POSTGIS_GEOS_VERSION</code> variables have been set
		  correctly.
		</p></li></ol></div></div><div class="sect1" title="2.12. Loader/Dumper"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp65184592"></a>2.12. Loader/Dumper</h2></div></div></div><p>
	  The data loader and dumper are built and installed automatically as part
	  of the PostGIS build. To build and install them manually:
	</p><pre class="programlisting"># cd postgis-2.3.0/loader
# make
# make install</pre><p>
	  The loader is called <code class="filename">shp2pgsql</code> and converts ESRI
	  Shape files into SQL suitable for loading in PostGIS/PostgreSQL. The
	  dumper is called <code class="filename">pgsql2shp</code> and converts PostGIS
	  tables (or queries) into ESRI Shape files. For more verbose documentation,
	  see the online help, and the manual pages.
	</p></div></div><div class="chapter" title="Chapter 3. PostGIS Frequently Asked Questions"><div class="titlepage"><div><div><h2 class="title"><a name="PostGIS_FAQ"></a>Chapter 3. PostGIS Frequently Asked Questions</h2></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="idp65592272"></a><dl><dt>3.1. <a href="#faq_where_tutorials">Where can I find tutorials, guides and workshops on working with PostGIS</a></dt><dt>3.2. <a href="#legacy_faq">My applications and desktop tools worked with PostGIS 1.5,but they don't work with PostGIS 2.0.  How do I fix this?</a></dt><dt>3.3. <a href="#legacy_faq_gist">When I load OpenStreetMap data with osm2pgsql, I'm getting an error
    failed: ERROR:  operator class "gist_geometry_ops" does not exist for access method "gist" Error occurred.  This worked fine in PostGIS 1.5.</a></dt><dt>3.4. <a href="#legacy_faq_read_view">I'm running PostgreSQL 9.0 and I can no longer read/view geometries in OpenJump, Safe FME, and some other tools?</a></dt><dt>3.5. <a href="#pgadmin_shows_no_data_in_geom">I tried to use PgAdmin to view my geometry column and it is blank, what gives?</a></dt><dt>3.6. <a href="#idp65643344">What kind of geometric objects can I store?</a></dt><dt>3.7. <a href="#idp65646032">I'm all confused.  Which data store should I use geometry or geography?</a></dt><dt>3.8. <a href="#idp65650256">I have more intense questions about geography, such as how big of a geographic region can I stuff in a geography column and
			still get reasonable answers.  Are there limitations such as poles, everything in the field must fit in a hemisphere (like SQL Server 2008 has), speed etc?</a></dt><dt>3.9. <a href="#faq_how_to_define_geometry_table">How do I insert a GIS object into the database?</a></dt><dt>3.10. <a href="#idp65661008">How do I construct a spatial query?</a></dt><dt>3.11. <a href="#idp65665104">How do I speed up spatial queries on large tables?</a></dt><dt>3.12. <a href="#idp65672144">Why aren't PostgreSQL R-Tree indexes supported?</a></dt><dt>3.13. <a href="#idp65676368">Why should I use the AddGeometryColumn()
        function and all the other OpenGIS stuff?</a></dt><dt>3.14. <a href="#idp65680336">What is the best way to find all objects within a radius of
        another object?</a></dt><dt>3.15. <a href="#idp65684048">How do I perform a coordinate reprojection as part of a
        query?</a></dt><dt>3.16. <a href="#idp65686480">I did an ST_AsEWKT and ST_AsText on my rather large geometry and it returned blank field.  What gives?</a></dt><dt>3.17. <a href="#idp65689168">When I do an ST_Intersects, it says my two geometries don't intersect when I KNOW THEY DO. What gives?</a></dt><dt>3.18. <a href="#license_faq">I am releasing software that uses PostGIS, does that mean my software has to be licensed using the GPL like PostGIS? Will I have to publish all my code if I use PostGIS?</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="3.1."><td align="left" valign="top"><a name="faq_where_tutorials"></a><a name="idp65592912"></a><p><b>3.1.</b></p></td><td align="left" valign="top"><p>Where can I find tutorials, guides and workshops on working with PostGIS</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>OpenGeo has a step by step tutorial guide workshop <a class="ulink" href="http://workshops.boundlessgeo.com/postgis-intro/" target="_top">Introduction to PostGIS</a>.  It includes packaged data as well as intro to working with OpenGeo Suite. It is probably the best tutorial on PostGIS.</p><p>BostonGIS also has a <a class="ulink" href="http://www.bostongis.com/PrinterFriendly.aspx?content_name=postgis_tut01" target="_top">PostGIS almost idiot's guide on getting started</a>. That one is more focused on the windows user.</p></td></tr><tr class="question" title="3.2."><td align="left" valign="top"><a name="legacy_faq"></a><a name="idp65625296"></a><p><b>3.2.</b></p></td><td align="left" valign="top"><p>My applications and desktop tools worked with PostGIS 1.5,but they don't work with PostGIS 2.0.  How do I fix this?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>A lot of deprecated functions were removed from the PostGIS code base in PostGIS 2.0.  This has affected applications in addition to third-party tools such as
            Geoserver, MapServer, QuantumGIS, and OpenJump to name a few.  There are a couple of ways to resolve this. For the third-party apps, you can try to upgrade to the latest versions
                of these which have many of these issues fixed.  For your own code, you can change your code to not use the functions removed.  Most of these functions are non ST_ aliases of ST_Union, ST_Length etc.
               and as a last resort, install the whole of <code class="varname">legacy.sql</code> or just the
                portions of <code class="varname">legacy.sql</code> you need.</p><p>The <code class="varname">legacy.sql</code> file is located in the same folder as postgis.sql.  You can install this file after you have installed postgis.sql and spatial_ref_sys.sql
            to get back all the 200 some-odd old functions we removed.</p></td></tr><tr class="question" title="3.3."><td align="left" valign="top"><a name="legacy_faq_gist"></a><a name="idp65629008"></a><p><b>3.3.</b></p></td><td align="left" valign="top"><p>When I load OpenStreetMap data with osm2pgsql, I'm getting an error
    failed: ERROR:  operator class "gist_geometry_ops" does not exist for access method "gist" Error occurred.  This worked fine in PostGIS 1.5.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>In PostGIS 2, the default geometry operator class gist_geometry_ops was changed to gist_geometry_ops_2d and the gist_geometry_ops was completely removed. This was done because PostGIS 2 also introduced Nd spatial indexes for 3D support and the old name was deemed confusing and a misnomer.</p><p>Some older applications that as part of the process create tables and indexes, explicitly referenced the operator class name.  This was unnecessary if you want the default 2D index.  So if you manage said good, change index creation from:</p><p>BAD:</p><pre class="programlisting">CREATE INDEX idx_my_table_geom ON my_table USING gist(geom gist_geometry_ops);</pre><p>To GOOD:</p><pre class="programlisting">CREATE INDEX idx_my_table_geom ON my_table USING gist(geom);</pre><p>The only case where you WILL need to specify the operator class is if you want a 3D spatial index as follows:</p><pre class="programlisting">CREATE INDEX idx_my_super3d_geom ON my_super3d USING gist(geom gist_geometry_ops_nd);</pre><p>If you are unfortunate to be stuck with compiled code you can't change that has the old gist_geometry_ops hard-coded, then you can create the old class using the <code class="filename">legacy_gist.sql</code> packaged in PostGIS 2.0.2+. However if you use this fix, you are advised to at a later point drop the index and recreate it without the operator class.  This will save you grief in the future when you need to upgrade again.</p></td></tr><tr class="question" title="3.4."><td align="left" valign="top"><a name="legacy_faq_read_view"></a><a name="idp65635152"></a><p><b>3.4.</b></p></td><td align="left" valign="top"><p>I'm running PostgreSQL 9.0 and I can no longer read/view geometries in OpenJump, Safe FME, and some other tools?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>In PostgreSQL 9.0+, the default encoding for bytea data has been changed to hex and older JDBC drivers still assume escape format. This has affected some applications
        such as Java applications using older JDBC drivers or .NET applications that use the older npgsql driver
	that expect the old behavior of ST_AsBinary.  There are two approaches to getting this to work again.</p><p>You can upgrade your JDBC driver to the latest PostgreSQL 9.0 version which you can get from
            <a class="ulink" href="http://jdbc.postgresql.org/download.html" target="_top">http://jdbc.postgresql.org/download.html</a></p><p>If you are running a .NET app, you can use Npgsql 2.0.11 or higher which you can download from
	<a class="ulink" href="http://pgfoundry.org/frs/?group_id=1000140" target="_top">http://pgfoundry.org/frs/?group_id=1000140</a> and
        as described on <a class="ulink" href="http://fxjr.blogspot.com/2010/11/npgsql-2011-released.html" target="_top">Francisco Figueiredo's NpgSQL 2.0.11 released blog entry</a></p><p>If upgrading your PostgreSQL driver is not an option, then you can set the default back to the old behavior  with the following change:</p><pre class="programlisting">ALTER DATABASE mypostgisdb SET bytea_output='escape';</pre></td></tr><tr class="question" title="3.5."><td align="left" valign="top"><a name="pgadmin_shows_no_data_in_geom"></a><a name="idp65640400"></a><p><b>3.5.</b></p></td><td align="left" valign="top"><p>I tried to use PgAdmin to view my geometry column and it is blank, what gives?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>PgAdmin doesn't show anything for large geometries.  The best ways to verify you do have data in your geometry columns are?</p><pre class="programlisting">-- this should return no records if all your geom fields are filled in
SELECT somefield FROM mytable WHERE geom IS NULL;</pre><pre class="programlisting">-- To tell just how large your geometry is do a query of the form
--which will tell you the most number of points you have in any of your geometry columns
SELECT MAX(ST_NPoints(geom)) FROM sometable;</pre></td></tr><tr class="question" title="3.6."><td align="left" valign="top"><a name="idp65643344"></a><a name="idp65643600"></a><p><b>3.6.</b></p></td><td align="left" valign="top"><p>What kind of geometric objects can I store?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You can store Point, LineString, Polygon, MultiPoint, MultiLineString,
        MultiPolygon, and GeometryCollection geometries. In PostGIS 2.0 and above you can also store TINS and Polyhedral Surfaces in the basic geometry type.
        These are specified in the Open
        GIS Well Known Text Format (with Z, M, and ZM extensions).  There are three data types currently supported.
		The standard OGC geometry data type which uses a planar coordinate system for measurement, the
		geography data type which uses a geodetic coordinate system, with calculations on either a sphere or spheroid.
		The newest family member of the PostGIS spatial type family is raster for storing and analyzing raster data. Raster has its very own FAQ. Refer to <a class="xref" href="#RT_FAQ" title="Chapter 10. PostGIS Raster Frequently Asked Questions">Chapter 10, <i>PostGIS Raster Frequently Asked Questions</i></a>
		and <a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a> for more details.</p></td></tr><tr class="question" title="3.7."><td align="left" valign="top"><a name="idp65646032"></a><a name="idp65646288"></a><p><b>3.7.</b></p></td><td align="left" valign="top"><p>I'm all confused.  Which data store should I use geometry or geography?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Short Answer: geography is a newer data type that supports long range distances measurements, but most computations on it are
        slower than they are on geometry.  If
		 you use geography, you don't need to learn much about planar coordinate systems. Geography is generally best
		 if all you care about is measuring distances and lengths and you have data from all over the world.
		 Geometry data type is an older data type that has many more functions supporting it, enjoys greater support from third party tools,
		 and operations on it are generally faster -- sometimes as much as 10 fold faster for larger geometries.
		 Geometry is best if you are pretty comfortable with spatial reference systems or you are dealing with localized data
		  where all your data fits in a single <a class="link" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">spatial reference system (SRID)</a>, or you need to do a lot of spatial processing.
		  Note: It is fairly easy to do one-off conversions between the two types to gain the benefits of each.
		  Refer to <a class="xref" href="#PostGIS_TypeFunctionMatrix" title="14.11. PostGIS Function Support Matrix">Section 14.11, “PostGIS Function Support Matrix”</a> to see what is currently supported and what is not.
		 </p><p>
			Long Answer: Refer to our more lengthy discussion in the <a class="xref" href="#PostGIS_GeographyVSGeometry" title="4.2.2. When to use Geography Data type over Geometry data type">Section 4.2.2, “When to use Geography Data type over Geometry data type”</a> and <a class="link" href="#PostGIS_TypeFunctionMatrix" title="14.11. PostGIS Function Support Matrix">function type matrix</a>.
		 </p></td></tr><tr class="question" title="3.8."><td align="left" valign="top"><a name="idp65650256"></a><a name="idp65650512"></a><p><b>3.8.</b></p></td><td align="left" valign="top"><p>I have more intense questions about geography, such as how big of a geographic region can I stuff in a geography column and
			still get reasonable answers.  Are there limitations such as poles, everything in the field must fit in a hemisphere (like SQL Server 2008 has), speed etc?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Your questions are too deep and complex to be adequately answered in this section. Please refer to our
			<a class="xref" href="#PostGIS_Geography_AdvancedFAQ" title="4.2.3. Geography Advanced FAQ">Section 4.2.3, “Geography Advanced FAQ”</a>.</p></td></tr><tr class="question" title="3.9."><td align="left" valign="top"><a name="faq_how_to_define_geometry_table"></a><a name="idp65652944"></a><p><b>3.9.</b></p></td><td align="left" valign="top"><p>How do I insert a GIS object into the database?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>First, you need to create a table with a column of type
        "geometry" or "geography" to hold your GIS data.
		Storing geography type data is a little different than storing geometry.  Refer
		to <a class="xref" href="#Geography_Basics" title="4.2.1. Geography Basics">Section 4.2.1, “Geography Basics”</a> for details on storing geography. </p><p>
		For geometry: Connect to your database with
        <code class="filename">psql</code> and try the following SQL:</p><pre class="programlisting">CREATE TABLE gtest ( gid serial primary key, name varchar(20)
        , geom geometry(LINESTRING) );</pre><p>If the geometry column definition fails, you probably have not
        loaded the PostGIS functions and objects into this database or are using a pre-2.0 version of PostGIS. See the
        <a class="xref" href="#PGInstall" title="2.4. Compiling and Install from Source: Detailed">Section 2.4, “Compiling and Install from Source: Detailed”</a>.</p><p>Then, you can insert a geometry into the table using a SQL
        insert statement. The GIS object itself is formatted using the OpenGIS
        Consortium "well-known text" format:</p><pre class="programlisting">INSERT INTO gtest (ID, NAME, GEOM)
VALUES (
  1,
  'First Geometry',
  ST_GeomFromText('LINESTRING(2 3,4 5,6 5,7 8)')
);</pre><p>For more information about other GIS objects, see the <a class="link" href="#RefObject" title="4.1. GIS Objects">object reference</a>.</p><p>To view your GIS data in the table:</p><pre class="programlisting">SELECT id, name, ST_AsText(geom) AS geom FROM gtest;</pre><p>The return value should look something like this:</p><pre class="programlisting"> id | name           | geom
----+----------------+-----------------------------
  1 | First Geometry | LINESTRING(2 3,4 5,6 5,7 8)
(1 row)</pre></td></tr><tr class="question" title="3.10."><td align="left" valign="top"><a name="idp65661008"></a><a name="idp65661264"></a><p><b>3.10.</b></p></td><td align="left" valign="top"><p>How do I construct a spatial query?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The same way you construct any other database query, as an SQL
        combination of return values, functions, and boolean tests.</p><p>For spatial queries, there are two issues that are important to
        keep in mind while constructing your query: is there a spatial index
        you can make use of; and, are you doing expensive calculations on a
        large number of geometries.</p><p>In general, you will want to use the "intersects operator"
        (&amp;&amp;) which tests whether the bounding boxes of features
        intersect. The reason the &amp;&amp; operator is useful is because if
        a spatial index is available to speed up the test, the &amp;&amp;
        operator will make use of this. This can make queries much much
        faster.</p><p>You will also make use of spatial functions, such as Distance(),
        ST_Intersects(), ST_Contains() and ST_Within(), among others, to
        narrow down the results of your search. Most spatial queries include
        both an indexed test and a spatial function test. The index test
        serves to limit the number of return tuples to only tuples that
        <span class="emphasis"><em>might</em></span> meet the condition of interest. The spatial
        functions are then use to test the condition exactly.</p><pre class="programlisting">SELECT id, the_geom
FROM thetable
WHERE
  ST_Contains(the_geom,'POLYGON((0 0, 0 10, 10 10, 10 0, 0 0))');</pre></td></tr><tr class="question" title="3.11."><td align="left" valign="top"><a name="idp65665104"></a><a name="idp65665360"></a><p><b>3.11.</b></p></td><td align="left" valign="top"><p>How do I speed up spatial queries on large tables?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Fast queries on large tables is the <span class="emphasis"><em>raison
        d'etre</em></span> of spatial databases (along with transaction
        support) so having a good index is important.</p><p>To build a spatial index on a table with a
        <code class="varname">geometry</code> column, use the "CREATE INDEX" function as
        follows:</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ( [geometrycolumn] );</pre><p>The "USING GIST" option tells the server to use a GiST
        (Generalized Search Tree) index.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>GiST indexes are assumed to be lossy. Lossy indexes uses a
          proxy object (in the spatial case, a bounding box) for building the
          index.</p></td></tr></table></div><p>You should also ensure that the PostgreSQL query planner has
        enough information about your index to make rational decisions about
        when to use it. To do this, you have to "gather statistics" on your
        geometry tables.</p><p>For PostgreSQL 8.0.x and greater, just run the <span class="command"><strong>VACUUM
        ANALYZE</strong></span> command.</p><p>For PostgreSQL 7.4.x and below, run the <span class="command"><strong>SELECT
        UPDATE_GEOMETRY_STATS()</strong></span> command.</p></td></tr><tr class="question" title="3.12."><td align="left" valign="top"><a name="idp65672144"></a><a name="idp65672400"></a><p><b>3.12.</b></p></td><td align="left" valign="top"><p>Why aren't PostgreSQL R-Tree indexes supported?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Early versions of PostGIS used the PostgreSQL R-Tree indexes.
        However, PostgreSQL R-Trees have been completely discarded since
        version 0.6, and spatial indexing is provided with an R-Tree-over-GiST
        scheme.</p><p>Our tests have shown search speed for native R-Tree and GiST to
        be comparable. Native PostgreSQL R-Trees have two limitations which
        make them undesirable for use with GIS features (note that these
        limitations are due to the current PostgreSQL native R-Tree
        implementation, not the R-Tree concept in general):</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>R-Tree indexes in PostgreSQL cannot handle features which
            are larger than 8K in size. GiST indexes can, using the "lossy"
            trick of substituting the bounding box for the feature
            itself.</p></li><li class="listitem"><p>R-Tree indexes in PostgreSQL are not "null safe", so
            building an index on a geometry column which contains null
            geometries will fail.</p></li></ul></div></td></tr><tr class="question" title="3.13."><td align="left" valign="top"><a name="idp65676368"></a><a name="idp65676624"></a><p><b>3.13.</b></p></td><td align="left" valign="top"><p>Why should I use the <code class="varname">AddGeometryColumn()</code>
        function and all the other OpenGIS stuff?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>If you do not want to use the OpenGIS support functions, you do
        not have to. Simply create tables as in older versions, defining your
        geometry columns in the CREATE statement. All your geometries will
        have SRIDs of -1, and the OpenGIS meta-data tables will
        <span class="emphasis"><em>not</em></span> be filled in properly. However, this will
        cause most applications based on PostGIS to fail, and it is generally
        suggested that you do use <code class="varname">AddGeometryColumn()</code> to
        create geometry tables.</p><p>MapServer is one application which makes use of the
        <code class="varname">geometry_columns</code> meta-data. Specifically, MapServer
        can use the SRID of the geometry column to do on-the-fly reprojection
        of features into the correct map projection.</p></td></tr><tr class="question" title="3.14."><td align="left" valign="top"><a name="idp65680336"></a><a name="idp65680592"></a><p><b>3.14.</b></p></td><td align="left" valign="top"><p>What is the best way to find all objects within a radius of
        another object?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>To use the database most efficiently, it is best to do radius
        queries which combine the radius test with a bounding box test: the
        bounding box test uses the spatial index, giving fast access to a
        subset of data which the radius test is then applied to.</p><p>The <code class="varname">ST_DWithin(geometry, geometry, distance)</code>
        function is a handy way of performing an indexed distance search. It
        works by creating a search rectangle large enough to enclose the
        distance radius, then performing an exact distance search on the
        indexed subset of results.</p><p>For example, to find all objects with 100 meters of POINT(1000
        1000) the following query would work well:</p><pre class="programlisting">SELECT * FROM geotable
WHERE ST_DWithin(geocolumn, 'POINT(1000 1000)', 100.0);</pre></td></tr><tr class="question" title="3.15."><td align="left" valign="top"><a name="idp65684048"></a><a name="idp65684304"></a><p><b>3.15.</b></p></td><td align="left" valign="top"><p>How do I perform a coordinate reprojection as part of a
        query?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>To perform a reprojection, both the source and destination
        coordinate systems must be defined in the SPATIAL_REF_SYS table, and
        the geometries being reprojected must already have an SRID set on
        them. Once that is done, a reprojection is as simple as referring to
        the desired destination SRID. The below projects a geometry to NAD 83 long lat.
		The below will only work if the srid of the_geom is not -1 (not undefined spatial ref)</p><pre class="programlisting">SELECT ST_Transform(the_geom,4269) FROM geotable;</pre></td></tr><tr class="question" title="3.16."><td align="left" valign="top"><a name="idp65686480"></a><a name="idp65686736"></a><p><b>3.16.</b></p></td><td align="left" valign="top"><p>I did an ST_AsEWKT and ST_AsText on my rather large geometry and it returned blank field.  What gives?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You are probably using PgAdmin or some other tool that doesn't output large text.  If your geometry is big
			enough, it will appear blank in these tools. Use PSQL if you really need to see it or output it in WKT.</p><pre class="programlisting">
				--To check number of geometries are really blank
				SELECT count(gid) FROM geotable WHERE the_geom IS NULL;</pre></td></tr><tr class="question" title="3.17."><td align="left" valign="top"><a name="idp65689168"></a><a name="idp65689424"></a><p><b>3.17.</b></p></td><td align="left" valign="top"><p>When I do an ST_Intersects, it says my two geometries don't intersect when I KNOW THEY DO. What gives?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This generally happens in two common cases.  Your geometry is invalid -- check <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>
			or you are assuming they intersect because ST_AsText truncates the numbers and you have lots of decimals after
				it is not showing you.</p></td></tr><tr class="question" title="3.18."><td align="left" valign="top"><a name="license_faq"></a><a name="idp65691856"></a><p><b>3.18.</b></p></td><td align="left" valign="top"><p>I am releasing software that uses PostGIS, does that mean my software has to be licensed using the GPL like PostGIS? Will I have to publish all my code if I use PostGIS?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Almost certainly not. As an example, consider Oracle database running on Linux. Linux is GPL, Oracle is not, does Oracle running on Linux have to be distributed using the GPL? No. So your software can use a PostgreSQL/PostGIS database as much as it wants and be under any license you like.</p><p>The only exception would be if you made changes to the PostGIS source code, and distributed your changed version of PostGIS. In that case you would have to share the code of your changed PostGIS (but not the code of applications running on top of it). Even in this limited case, you would still only have to distribute source code to people you distributed binaries to. The GPL does not require that you <span class="emphasis"><em>publish</em></span> your source code, only that you share it with people you give binaries to.</p></td></tr></tbody></table></div></div><div class="chapter" title="Chapter 4. Using PostGIS: Data Management and Queries"><div class="titlepage"><div><div><h2 class="title"><a name="using_postgis_dbmanagement"></a>Chapter 4. Using PostGIS: Data Management and Queries</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#RefObject">4.1. GIS Objects</a></span></dt><dd><dl><dt><span class="sect2"><a href="#OpenGISWKBWKT">4.1.1. OpenGIS WKB and WKT</a></span></dt><dt><span class="sect2"><a href="#EWKB_EWKT">4.1.2. PostGIS EWKB, EWKT and Canonical Forms</a></span></dt><dt><span class="sect2"><a href="#SQL_MM_Part3">4.1.3. SQL-MM Part 3</a></span></dt></dl></dd><dt><span class="sect1"><a href="#PostGIS_Geography">4.2. PostGIS Geography Type</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Geography_Basics">4.2.1. Geography Basics</a></span></dt><dt><span class="sect2"><a href="#PostGIS_GeographyVSGeometry">4.2.2. When to use Geography Data type over Geometry data type</a></span></dt><dt><span class="sect2"><a href="#PostGIS_Geography_AdvancedFAQ">4.2.3. Geography Advanced FAQ</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp65939152">4.3. Using OpenGIS Standards</a></span></dt><dd><dl><dt><span class="sect2"><a href="#spatial_ref_sys">4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems</a></span></dt><dt><span class="sect2"><a href="#geometry_columns">4.3.2. The GEOMETRY_COLUMNS VIEW</a></span></dt><dt><span class="sect2"><a href="#Create_Spatial_Table">4.3.3. Creating a Spatial Table</a></span></dt><dt><span class="sect2"><a href="#Manual_Register_Spatial_Column">4.3.4. Manually Registering Geometry Columns in geometry_columns</a></span></dt><dt><span class="sect2"><a href="#OGC_Validity">4.3.5. Ensuring OpenGIS compliancy of geometries</a></span></dt><dt><span class="sect2"><a href="#DE-9IM">4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)</a></span></dt></dl></dd><dt><span class="sect1"><a href="#loading_geometry_data">4.4. Loading GIS (Vector) Data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66402384">4.4.1. Loading Data Using SQL</a></span></dt><dt><span class="sect2"><a href="#shp2pgsql_usage">4.4.2. shp2pgsql: Using the ESRI Shapefile Loader</a></span></dt></dl></dd><dt><span class="sect1"><a href="#retrieving_vector-data">4.5. Retrieving GIS Data</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66453072">4.5.1. Using SQL to Retrieve Data</a></span></dt><dt><span class="sect2"><a href="#idp65821392">4.5.2. Using the Dumper</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp66504912">4.6. Building Indexes</a></span></dt><dd><dl><dt><span class="sect2"><a href="#gist_indexes">4.6.1. GiST Indexes</a></span></dt><dt><span class="sect2"><a href="#brin_indexes">4.6.2. BRIN Indexes</a></span></dt><dt><span class="sect2"><a href="#idp66523856">4.6.3. Using Indexes</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp66532560">4.7. Complex Queries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp66534352">4.7.1. Taking Advantage of Indexes</a></span></dt><dt><span class="sect2"><a href="#examples_spatial_sql">4.7.2. Examples of Spatial SQL</a></span></dt></dl></dd></dl></div><div class="sect1" title="4.1. GIS Objects"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RefObject"></a>4.1. GIS Objects</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#OpenGISWKBWKT">4.1.1. OpenGIS WKB and WKT</a></span></dt><dt><span class="sect2"><a href="#EWKB_EWKT">4.1.2. PostGIS EWKB, EWKT and Canonical Forms</a></span></dt><dt><span class="sect2"><a href="#SQL_MM_Part3">4.1.3. SQL-MM Part 3</a></span></dt></dl></div><p>The GIS objects supported by PostGIS are a superset of the "Simple
	Features" defined by the OpenGIS Consortium (OGC). As of version 0.9,
	PostGIS supports all the objects and functions specified in the OGC
	"Simple Features for SQL" specification.</p><p>PostGIS extends the standard with support for 3DZ,3DM and 4D
	coordinates.</p><div class="sect2" title="4.1.1. OpenGIS WKB and WKT"><div class="titlepage"><div><div><h3 class="title"><a name="OpenGISWKBWKT"></a>4.1.1. OpenGIS WKB and WKT</h3></div></div></div><p>The OpenGIS specification defines two standard ways of expressing
	  spatial objects: the Well-Known Text (WKT) form and the Well-Known
	  Binary (WKB) form. Both WKT and WKB include information about the type
	  of the object and the coordinates which form the object.</p><p>Examples of the text representations (WKT) of the spatial objects
	  of the features are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POINT(0 0)</p></li><li class="listitem"><p>LINESTRING(0 0,1 1,1 2)</p></li><li class="listitem"><p>POLYGON((0 0,4 0,4 4,0 4,0 0),(1 1, 2 1, 2 2, 1 2,1 1))</p></li><li class="listitem"><p>MULTIPOINT((0 0),(1 2))</p></li><li class="listitem"><p>MULTILINESTRING((0 0,1 1,1 2),(2 3,3 2,5 4))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0,4 0,4 4,0 4,0 0),(1 1,2 1,2 2,1 2,1 1)),
		  ((-1 -1,-1 -2,-2 -2,-2 -1,-1 -1)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTION(POINT(2 3),LINESTRING(2 3,3 4))</p></li></ul></div><p>The OpenGIS specification also requires that the internal storage
	  format of spatial objects include a spatial referencing system
	  identifier (SRID). The SRID is required when creating spatial objects
	  for insertion into the database.</p><p>Input/Output of these formats are available using the following
	  interfaces:</p><pre class="programlisting">bytea WKB = ST_AsBinary(geometry);
text WKT = ST_AsText(geometry);
geometry = ST_GeomFromWKB(bytea WKB, SRID);
geometry = ST_GeometryFromText(text WKT, SRID);</pre><p>For example, a valid insert statement to create and insert an OGC
	  spatial object would be:</p><pre class="programlisting">INSERT INTO geotable ( the_geom, the_name )
  VALUES ( ST_GeomFromText('POINT(-126.4 45.32)', 312), 'A Place');</pre></div><div class="sect2" title="4.1.2. PostGIS EWKB, EWKT and Canonical Forms"><div class="titlepage"><div><div><h3 class="title"><a name="EWKB_EWKT"></a>4.1.2. PostGIS EWKB, EWKT and Canonical Forms</h3></div></div></div><p>OGC formats only support 2d geometries, and the associated SRID is
	  *never* embedded in the input/output representations.</p><p>PostGIS extended formats are currently superset of OGC one (every
	  valid WKB/WKT is a valid EWKB/EWKT) but this might vary in the future,
	  specifically if OGC comes out with a new format conflicting with our
	  extensions. Thus you SHOULD NOT rely on this feature!</p><p>PostGIS EWKB/EWKT add 3dm,3dz,4d coordinates support and embedded
	  SRID information.</p><p>Examples of the text representations (EWKT) of the extended
	  spatial objects of the features are as follows. The * ones are new in this version of PostGIS:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POINT(0 0 0) -- XYZ</p></li><li class="listitem"><p>SRID=32632;POINT(0 0) -- XY with SRID</p></li><li class="listitem"><p>POINTM(0 0 0) -- XYM</p></li><li class="listitem"><p>POINT(0 0 0 0) -- XYZM</p></li><li class="listitem"><p>SRID=4326;MULTIPOINTM(0 0 0,1 2 1) -- XYM with SRID</p></li><li class="listitem"><p>MULTILINESTRING((0 0 0,1 1 0,1 2 1),(2 3 1,3 2 1,5 4
		  1))</p></li><li class="listitem"><p>POLYGON((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2
		  0,1 1 0))</p></li><li class="listitem"><p>MULTIPOLYGON(((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2
		  0,1 2 0,1 1 0)),((-1 -1 0,-1 -2 0,-2 -2 0,-2 -1 0,-1 -1 0)))</p></li><li class="listitem"><p>GEOMETRYCOLLECTIONM( POINTM(2 3 9), LINESTRINGM(2 3 4, 3 4 5) )</p></li><li class="listitem"><p>MULTICURVE( (0 0, 5 5), CIRCULARSTRING(4 0, 4 4, 8 4) )</p></li><li class="listitem"><p>POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),  ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),  ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )</p></li><li class="listitem"><p>TRIANGLE ((0 0, 0 9, 9 0, 0 0))</p></li><li class="listitem"><p>TIN( ((0 0 0, 0 0 1, 0 1 0, 0 0 0)),
		  ((0 0 0, 0 1 0, 1 1 0, 0 0 0)) )</p></li></ul></div><p>Input/Output of these formats are available using the following
	  interfaces:</p><pre class="programlisting">bytea EWKB = ST_AsEWKB(geometry);
text EWKT = ST_AsEWKT(geometry);
geometry = ST_GeomFromEWKB(bytea EWKB);
geometry = ST_GeomFromEWKT(text EWKT);</pre><p>For example, a valid insert statement to create and insert a
	  PostGIS spatial object would be:</p><pre class="programlisting">INSERT INTO geotable ( the_geom, the_name )
  VALUES ( ST_GeomFromEWKT('SRID=312;POINTM(-126.4 45.32 15)'), 'A Place' )</pre><p>The "canonical forms" of a PostgreSQL type are the representations
	  you get with a simple query (without any function call) and the one
	  which is guaranteed to be accepted with a simple insert, update or copy.
	  For the postgis 'geometry' type these are: </p><pre class="programlisting">- Output
  - binary: EWKB
	ascii: HEXEWKB (EWKB in hex form)
- Input
  - binary: EWKB
	ascii: HEXEWKB|EWKT </pre><p>For example this statement reads EWKT and returns HEXEWKB in the
	  process of canonical ascii input/output:</p><pre class="programlisting">=# SELECT 'SRID=4;POINT(0 0)'::geometry;

geometry
----------------------------------------------------
01010000200400000000000000000000000000000000000000
(1 row)</pre></div><div class="sect2" title="4.1.3. SQL-MM Part 3"><div class="titlepage"><div><div><h3 class="title"><a name="SQL_MM_Part3"></a>4.1.3. SQL-MM Part 3</h3></div></div></div><p>The SQL Multimedia Applications Spatial specification extends the
	  simple features for SQL spec by defining a number of circularly
	  interpolated curves.</p><p>The SQL-MM definitions include 3dm, 3dz and 4d coordinates, but do
	  not allow the embedding of SRID information.</p><p>The well-known text extensions are not yet fully supported.
	  Examples of some simple curved geometries are shown below:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>CIRCULARSTRING(0 0, 1 1, 1 0)</p><p>CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0)</p><p>The CIRCULARSTRING is the basic curve type, similar to a
		  LINESTRING in the linear world.  A single segment required three
		  points, the start and end points (first and third) and any other
		  point on the arc.  The exception to this is for a closed circle,
		  where the start and end points are the same.  In this case the
		  second point MUST be the center of the arc, ie the opposite side of
		  the circle.  To chain arcs together, the last point of the previous
		  arc becomes the first point of the next arc, just like in
		  LINESTRING.  This means that a valid circular string must have an
		  odd number of points greated than 1.</p></li><li class="listitem"><p>COMPOUNDCURVE(CIRCULARSTRING(0 0, 1 1, 1 0),(1 0, 0 1))</p><p>A compound curve is a single, continuous curve that has both
		  curved (circular) segments and linear segments.  That means that
		  in addition to having well-formed components, the end point of
		  every component (except the last) must be coincident with the
		  start point of the following component.</p></li><li class="listitem"><p>CURVEPOLYGON(CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0 0),(1 1, 3
		  3, 3 1, 1 1))</p><p>Example compound curve in a curve polygon:
				CURVEPOLYGON(COMPOUNDCURVE(CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),(4 3, 4 5, 1 4, 0 0)),
					CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1) )
		  </p><p>A CURVEPOLYGON is just like a polygon, with an outer ring
		  and zero or more inner rings.  The difference is that a ring can
		  take the form of a circular string, linear string or compound
		  string.</p><p>As of PostGIS 1.4 PostGIS supports compound curves in a curve polygon.</p></li><li class="listitem"><p>MULTICURVE((0 0, 5 5),CIRCULARSTRING(4 0, 4 4, 8 4))</p><p>The MULTICURVE is a collection of curves, which can include
		  linear strings, circular strings or compound strings.</p></li><li class="listitem"><p>MULTISURFACE(CURVEPOLYGON(CIRCULARSTRING(0 0, 4 0, 4 4, 0 4, 0
		  0),(1 1, 3 3, 3 1, 1 1)),((10 10, 14 12, 11 10, 10 10),(11 11, 11.5
		  11, 11 11.5, 11 11)))</p><p>This is a collection of surfaces, which can be (linear)
		  polygons or curve polygons.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS prior to 1.4 does not support compound curves in a curve polygon, but
				PostGIS 1.4 and above do support the use of Compound Curves in
		a Curve Polygon.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>All floating point comparisons within the SQL-MM implementation
		are performed to a specified tolerance, currently 1E-8.</p></td></tr></table></div></div></div><div class="sect1" title="4.2. PostGIS Geography Type"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Geography"></a>4.2. PostGIS Geography Type</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#Geography_Basics">4.2.1. Geography Basics</a></span></dt><dt><span class="sect2"><a href="#PostGIS_GeographyVSGeometry">4.2.2. When to use Geography Data type over Geometry data type</a></span></dt><dt><span class="sect2"><a href="#PostGIS_Geography_AdvancedFAQ">4.2.3. Geography Advanced FAQ</a></span></dt></dl></div><p>The geography type provides native support for spatial features represented on "geographic" coordinates (sometimes called "geodetic" coordinates, or "lat/lon", or "lon/lat"). Geographic coordinates are spherical coordinates expressed in angular units (degrees). </p><p>The basis for the PostGIS geometry type is a plane. The shortest path between two points on the plane is a straight line. That means calculations on geometries (areas, distances, lengths, intersections, etc) can be calculated using cartesian mathematics and straight line vectors.</p><p>The basis for the PostGIS geographic type is a sphere. The shortest path between two points on the sphere is a great circle arc. That means that calculations on geographies (areas, distances, lengths, intersections, etc) must be calculated on the sphere, using more complicated mathematics. For more accurate measurements, the calculations must take the actual spheroidal shape of the world into account, and the mathematics becomes very complicated indeed.</p><p>Because the underlying mathematics is much more complicated, there are fewer functions defined for the geography type than for the geometry type. Over time, as new algorithms are added, the capabilities of the geography type will expand.</p><p>One restriction is that it only supports WGS 84 long lat (SRID:4326).  It uses a new data type called
	  geography.  None of the GEOS functions support this new
	  type. As a workaround one can convert back and forth between geometry and geography types.</p><p>The new geography type uses the PostgreSQL 8.3+ typmod definition format so that a table with a geography field
			can be added in a single step.  All the standard OGC formats except for curves are supported.</p><div class="sect2" title="4.2.1. Geography Basics"><div class="titlepage"><div><div><h3 class="title"><a name="Geography_Basics"></a>4.2.1. Geography Basics</h3></div></div></div><p>The geography type only supports the simplest of simple features. Standard geometry type data will autocast to geography if it is of SRID 4326.  You can also use the EWKT and EWKB
			conventions to insert data.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>POINT: Creating a table with 2d point geometry:</p><pre class="programlisting">CREATE TABLE testgeog(gid serial PRIMARY KEY, the_geog geography(POINT,4326) );</pre><p>Creating a table with z coordinate point</p><pre class="programlisting">CREATE TABLE testgeog(gid serial PRIMARY KEY, the_geog geography(POINTZ,4326) );</pre></li><li class="listitem"><p>LINESTRING</p></li><li class="listitem"><p>POLYGON</p></li><li class="listitem"><p>MULTIPOINT</p></li><li class="listitem"><p>MULTILINESTRING</p></li><li class="listitem"><p>MULTIPOLYGON</p></li><li class="listitem"><p>GEOMETRYCOLLECTION</p></li></ul></div><p>The new geography fields don't get registered in the <code class="varname">geometry_columns</code>.  They get registered in a new view called
				geography_columns which is a view against the system catalogs so is always automatically kept up to date without need
					for an AddGeom... like function.</p><p>Now, check the "geography_columns" view and see that your table is listed.</p><p>You can create a new table with a GEOGRAPHY column using the CREATE TABLE syntax.
			Unlike GEOMETRY, there is no need to run a separate AddGeometryColumns() process to register the column in metadata.</p><p>
</p><pre class="programlisting">CREATE TABLE global_points (
    id SERIAL PRIMARY KEY,
    name VARCHAR(64),
    location GEOGRAPHY(POINT,4326)
  );</pre><p>
		</p><p>Note that the location column has type GEOGRAPHY and that geography type supports two optional modifier: a type modifier that restricts the kind of shapes and dimensions allowed in the column; an SRID modifier that restricts the coordinate reference identifier to a particular number.</p><p>Allowable values for the type modifier are: POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON. The modifier also supports dimensionality restrictions through suffixes: Z, M and ZM. So, for example a modifier of 'LINESTRINGM' would only allow line strings with three dimensions in, and would treat the third dimension as a measure.
		Similarly, 'POINTZM' would expect four dimensional data.</p><p>The SRID modifier is currently of limited use: only 4326 (WGS84) is allowed as a value. If you do not specify an SRID, the a value 0 (undefined spheroid) will be used, and all calculations will proceed using WGS84 anyways.</p><p>In the future, alternate SRIDs will allow calculations on spheroids other than WGS84.</p><p>Once you have created your table, you can see it in the GEOGRAPHY_COLUMNS table:</p><pre class="programlisting">
-- See the contents of the metadata view
SELECT * FROM geography_columns;</pre><p>You can insert data into the table the same as you would if it was using a GEOMETRY column:</p><pre class="programlisting">-- Add some data into the test table
INSERT INTO global_points (name, location) VALUES ('Town', ST_GeographyFromText('SRID=4326;POINT(-110 30)') );
INSERT INTO global_points (name, location) VALUES ('Forest', ST_GeographyFromText('SRID=4326;POINT(-109 29)') );
INSERT INTO global_points (name, location) VALUES ('London', ST_GeographyFromText('SRID=4326;POINT(0 49)') );</pre><p>Creating an index works the same as GEOMETRY.
	PostGIS will note that the column type is GEOGRAPHY and create an appropriate sphere-based index instead of the usual planar index used for GEOMETRY.</p><pre class="programlisting">-- Index the test table with a spherical index
  CREATE INDEX global_points_gix ON global_points USING GIST ( location );</pre><p>
</p><p>Query and measurement functions use units of meters. So distance parameters should be expressed in meters, and return values should be expected in meters (or square meters for areas).</p><pre class="programlisting">-- Show a distance query and note, London is outside the 1000km tolerance
  SELECT name FROM global_points WHERE ST_DWithin(location, ST_GeographyFromText('SRID=4326;POINT(-110 29)'), 1000000);</pre><p>
</p><p>You can see the power of GEOGRAPHY in action by calculating the how close a plane flying from Seattle to London (LINESTRING(-122.33 47.606, 0.0 51.5)) comes to Reykjavik (POINT(-21.96 64.15)).</p><pre class="programlisting">-- Distance calculation using GEOGRAPHY (122.2km)
  SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geography, 'POINT(-21.96 64.15)':: geography);</pre><p>
</p><pre class="programlisting">-- Distance calculation using GEOMETRY (13.3 "degrees")
  SELECT ST_Distance('LINESTRING(-122.33 47.606, 0.0 51.5)'::geometry, 'POINT(-21.96 64.15)':: geometry);</pre><p>
</p><p>The GEOGRAPHY type calculates the true shortest distance over the sphere between Reykjavik and the great circle flight path between Seattle and London.</p><p> <a class="ulink" href="http://gc.kls2.com/cgi-bin/gc?PATH=SEA-LHR" target="_top">Great Circle mapper</a>
The GEOMETRY type calculates a meaningless cartesian distance between Reykjavik and the straight line path from Seattle to London plotted on a flat map of the world. The nominal units of the result might be called "degrees", but the result doesn't correspond to any true angular difference between the points, so even calling them "degrees" is inaccurate.</p></div><div class="sect2" title="4.2.2. When to use Geography Data type over Geometry data type"><div class="titlepage"><div><div><h3 class="title"><a name="PostGIS_GeographyVSGeometry"></a>4.2.2. When to use Geography Data type over Geometry data type</h3></div></div></div><p>The new GEOGRAPHY type allows you to store data in longitude/latitude coordinates, but at a cost: there are fewer functions defined on GEOGRAPHY than there are on GEOMETRY; those functions that are defined take more CPU time to execute.</p><p>The type you choose should be conditioned on the expected working area of the application you are building. Will your data span the globe or a large continental area, or is it local to a state, county or municipality? </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>If your data is contained in a small area, you might find that choosing an appropriate projection and using GEOMETRY is the best solution, in terms of performance and functionality available.</p></li><li class="listitem"><p>If your data is global or covers a continental region, you may find that GEOGRAPHY allows you to build a system without having to worry about projection details.
				You store your data in longitude/latitude, and use the functions that have been defined on GEOGRAPHY.</p></li><li class="listitem"><p>If you don't understand projections, and you don't want to learn about them, and you're prepared to accept the limitations in functionality available in GEOGRAPHY, then it might be easier for you to use GEOGRAPHY than GEOMETRY.
		Simply load your data up as longitude/latitude and go from there.</p></li></ul></div><p>Refer to <a class="xref" href="#PostGIS_TypeFunctionMatrix" title="14.11. PostGIS Function Support Matrix">Section 14.11, “PostGIS Function Support Matrix”</a> for compare between
			what is supported for Geography vs. Geometry.  For a brief listing and description of Geography functions, refer to
				<a class="xref" href="#PostGIS_GeographyFunctions" title="14.4. PostGIS Geography Support Functions">Section 14.4, “PostGIS Geography Support Functions”</a>
		</p></div><div class="sect2" title="4.2.3. Geography Advanced FAQ"><div class="titlepage"><div><div><h3 class="title"><a name="PostGIS_Geography_AdvancedFAQ"></a>4.2.3. Geography Advanced FAQ</h3></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="idp65909456"></a><dl><dt>4.2.3.1. <a href="#idp65909712">Do you calculate on the sphere or the spheroid?</a></dt><dt>4.2.3.2. <a href="#idp65912016">What about the date-line and the poles?</a></dt><dt>4.2.3.3. <a href="#idp65934544">What is the longest arc you can process?</a></dt><dt>4.2.3.4. <a href="#idp65936464">Why is it so slow to calculate the area of Europe / Russia / insert big geographic region here ?</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="4.2.3.1."><td align="left" valign="top"><a name="idp65909712"></a><a name="idp65909968"></a><p><b>4.2.3.1.</b></p></td><td align="left" valign="top"><p>Do you calculate on the sphere or the spheroid?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> By default, all distance and area calculations are done on the spheroid. You should find that the results of calculations in local areas match up will with local planar results in good local projections.
					Over larger areas, the spheroidal calculations will be more accurate than any calculation done on a projected plane.
					</p><p>All the geography functions have the option of using a sphere calculation, by setting a final boolean parameter to 'FALSE'. This will somewhat speed up calculations, particularly for cases where the geometries are very simple.</p></td></tr><tr class="question" title="4.2.3.2."><td align="left" valign="top"><a name="idp65912016"></a><a name="idp65912272"></a><p><b>4.2.3.2.</b></p></td><td align="left" valign="top"><p>What about the date-line and the poles?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p> All the calculations have no conception of date-line or poles, the coordinates are spherical (longitude/latitude)
					so a shape that crosses the dateline is, from a calculation point of view, no different from any other shape.
					</p></td></tr><tr class="question" title="4.2.3.3."><td align="left" valign="top"><a name="idp65934544"></a><a name="idp65934800"></a><p><b>4.2.3.3.</b></p></td><td align="left" valign="top"><p>What is the longest arc you can process?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>We use great circle arcs as the "interpolation line" between two points. That means any two points are actually joined up two ways, depending on which direction you travel along the great circle. All our code assumes that the points are joined by the *shorter* of the two paths along the great circle.
					As a consequence, shapes that have arcs of more than 180 degrees will not be correctly modelled.</p></td></tr><tr class="question" title="4.2.3.4."><td align="left" valign="top"><a name="idp65936464"></a><a name="idp65936720"></a><p><b>4.2.3.4.</b></p></td><td align="left" valign="top"><p>Why is it so slow to calculate the area of Europe / Russia / insert big geographic region here ?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Because the polygon is so darned huge! Big areas are bad for two reasons: their bounds are huge,
						so the index tends to pull the feature no matter what query you run; the number of vertices is huge,
						and tests (distance, containment) have to traverse the vertex list at least once and sometimes N times
						(with N being the number of vertices in the other candidate feature).
					</p><p>As with GEOMETRY, we recommend that when you have very large polygons, but are doing queries in small areas, you "denormalize" your geometric data into smaller chunks so that the index can effectively subquery parts of the object and so queries don't have to pull out the whole object every time.
					Just because you *can* store all of Europe in one polygon doesn't mean you *should*.</p></td></tr></tbody></table></div></div></div><div class="sect1" title="4.3. Using OpenGIS Standards"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp65939152"></a>4.3. Using OpenGIS Standards</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#spatial_ref_sys">4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems</a></span></dt><dt><span class="sect2"><a href="#geometry_columns">4.3.2. The GEOMETRY_COLUMNS VIEW</a></span></dt><dt><span class="sect2"><a href="#Create_Spatial_Table">4.3.3. Creating a Spatial Table</a></span></dt><dt><span class="sect2"><a href="#Manual_Register_Spatial_Column">4.3.4. Manually Registering Geometry Columns in geometry_columns</a></span></dt><dt><span class="sect2"><a href="#OGC_Validity">4.3.5. Ensuring OpenGIS compliancy of geometries</a></span></dt><dt><span class="sect2"><a href="#DE-9IM">4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)</a></span></dt></dl></div><p>The OpenGIS "Simple Features Specification for SQL" defines standard
	GIS object types, the functions required to manipulate them, and a set of
	meta-data tables. In order to ensure that meta-data remain consistent,
	operations such as creating and removing a spatial column are carried out
	through special procedures defined by OpenGIS.</p><p>There are two OpenGIS meta-data tables:
	<code class="varname">SPATIAL_REF_SYS</code> and
	<code class="varname">GEOMETRY_COLUMNS</code>. The
	<code class="varname">SPATIAL_REF_SYS</code> table holds the numeric IDs and textual
	descriptions of coordinate systems used in the spatial database.</p><div class="sect2" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems"><div class="titlepage"><div><div><h3 class="title"><a name="spatial_ref_sys"></a>4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems</h3></div></div></div><p>The spatial_ref_sys table is a PostGIS included and OGC compliant database table that lists over 3000
			known <a class="ulink" href="http://www.sharpgis.net/post/2007/05/Spatial-references2c-coordinate-systems2c-projections2c-datums2c-ellipsoids-e28093-confusing.aspx" target="_top">spatial reference systems</a>
			and details needed to transform/reproject between them.</p><p>Although the PostGIS spatial_ref_sys table contains over 3000 of the more commonly used spatial reference system definitions that can be handled by the proj library, it does not contain all known to man and
			you can even define your own custom projection if you are familiar with proj4 constructs.  Keep in mind that most spatial reference systems are regional and have no meaning when used outside of the bounds they were intended for.</p><p>An excellent resource for finding spatial reference systems not defined in the core set is <a class="ulink" href="http://spatialreference.org/" target="_top">http://spatialreference.org/</a></p><p>Some of the more commonly used spatial reference systems are: <a class="ulink" href="http://spatialreference.org/ref/epsg/4326/" target="_top">4326 - WGS 84 Long Lat</a>,
			<a class="ulink" href="http://spatialreference.org/ref/epsg/4269/" target="_top">4269 - NAD 83 Long Lat</a>,
			<a class="ulink" href="http://spatialreference.org/ref/epsg/3395/" target="_top">3395 - WGS 84 World Mercator</a>,
			<a class="ulink" href="http://spatialreference.org/ref/epsg/2163/" target="_top">2163 - US National Atlas Equal Area</a>,
			Spatial reference systems for each NAD 83, WGS 84 UTM zone - UTM zones are one of the most ideal for measurement, but only cover 6-degree regions.
	</p><p>
		Various US state plane spatial reference systems (meter or feet based) - usually one or 2 exists per US state.  Most of the meter ones are in the core set, but many of the
		feet based ones or ESRI created ones you will need to pull from <a class="ulink" href="http://spatialreference.org" target="_top">spatialreference.org</a>.
	</p><p>
		For details on determining which UTM zone to use for your area of interest, check out the <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiplpgsqlfunctionsDistance" target="_top">utmzone PostGIS plpgsql helper function</a>.
	</p><p>The <code class="varname">SPATIAL_REF_SYS</code> table definition is as
	  follows:</p><pre class="programlisting">CREATE TABLE spatial_ref_sys (
  srid       INTEGER NOT NULL PRIMARY KEY,
  auth_name  VARCHAR(256),
  auth_srid  INTEGER,
  srtext     VARCHAR(2048),
  proj4text  VARCHAR(2048)
)</pre><p>The <code class="varname">SPATIAL_REF_SYS</code> columns are as
	  follows:</p><div class="variablelist"><dl><dt><span class="term"><a class="ulink" href="http://en.wikipedia.org/wiki/SRID" target="_top">SRID</a></span></dt><dd><p>An integer value that uniquely identifies the Spatial
			Referencing System (SRS) within the database.</p></dd><dt><span class="term">AUTH_NAME</span></dt><dd><p>The name of the standard or standards body that is being
			cited for this reference system. For example, "EPSG" would be a
			valid <code class="varname">AUTH_NAME</code>.</p></dd><dt><span class="term">AUTH_SRID</span></dt><dd><p>The ID of the Spatial Reference System as defined by the
			Authority cited in the <code class="varname">AUTH_NAME</code>. In the case
			of EPSG, this is where the EPSG projection code would go.</p></dd><dt><span class="term">SRTEXT</span></dt><dd><p>The Well-Known Text representation of the Spatial Reference
			System. An example of a WKT SRS representation is:</p><pre class="programlisting">PROJCS["NAD83 / UTM Zone 10N",
  GEOGCS["NAD83",
	DATUM["North_American_Datum_1983",
	  SPHEROID["GRS 1980",6378137,298.257222101]
	],
	PRIMEM["Greenwich",0],
	UNIT["degree",0.0174532925199433]
  ],
  PROJECTION["Transverse_Mercator"],
  PARAMETER["latitude_of_origin",0],
  PARAMETER["central_meridian",-123],
  PARAMETER["scale_factor",0.9996],
  PARAMETER["false_easting",500000],
  PARAMETER["false_northing",0],
  UNIT["metre",1]
]</pre><p>For a listing of EPSG projection codes and their
			corresponding WKT representations, see <a class="ulink" href="http://www.opengeospatial.org/" target="_top">http://www.opengeospatial.org/</a>.
			For a discussion of WKT in general, see the OpenGIS "Coordinate
			Transformation Services Implementation Specification" at <a class="ulink" href="http://www.opengeospatial.org/standards" target="_top">http://www.opengeospatial.org/standards</a>.
			For information on the European Petroleum Survey Group (EPSG) and
			their database of spatial reference systems, see <a class="ulink" href="http://www.epsg.org/" target="_top">http://www.epsg.org</a>.</p></dd><dt><span class="term">PROJ4TEXT</span></dt><dd><p>PostGIS uses the Proj4 library to provide coordinate
			transformation capabilities. The <code class="varname">PROJ4TEXT</code>
			column contains the Proj4 coordinate definition string for a
			particular SRID. For example:</p><pre class="programlisting">+proj=utm +zone=10 +ellps=clrk66 +datum=NAD27 +units=m</pre><p>For more information about, see the Proj4 web site at <a class="ulink" href="http://trac.osgeo.org/proj/" target="_top">http://trac.osgeo.org/proj/</a>.
			The <code class="filename">spatial_ref_sys.sql</code> file contains both
			<code class="varname">SRTEXT</code> and <code class="varname">PROJ4TEXT</code>
			definitions for all EPSG projections.</p></dd></dl></div></div><div class="sect2" title="4.3.2. The GEOMETRY_COLUMNS VIEW"><div class="titlepage"><div><div><h3 class="title"><a name="geometry_columns"></a>4.3.2. The GEOMETRY_COLUMNS VIEW</h3></div></div></div><p>In versions of PostGIS prior to 2.0.0, geometry_columns was a table that could be directly edited, and sometimes got out of synch with the actual definition of the geometry columns.
	  In PostGIS 2.0.0, <code class="varname">GEOMETRY_COLUMNS</code> became a view with the same front-facing structure as prior versions, but reading from database system catalogs
	  Its structure is as follows:</p><pre class="programlisting">\d geometry_columns</pre><pre class="screen">             View "public.geometry_columns"
      Column       |          Type          | Modifiers
-------------------+------------------------+-----------
 f_table_catalog   | character varying(256) |
 f_table_schema    | character varying(256) |
 f_table_name      | character varying(256) |
 f_geometry_column | character varying(256) |
 coord_dimension   | integer                |
 srid              | integer                |
 type              | character varying(30)  |</pre><p>The column meanings have not changed from prior versions and are:</p><div class="variablelist"><dl><dt><span class="term">F_TABLE_CATALOG, F_TABLE_SCHEMA, F_TABLE_NAME</span></dt><dd><p>The fully qualified name of the feature table containing the
			geometry column. Note that the terms "catalog" and "schema" are
			Oracle-ish. There is not PostgreSQL analogue of "catalog" so that
			column is left blank -- for "schema" the PostgreSQL schema name is
			used (<code class="varname">public</code> is the default).</p></dd><dt><span class="term">F_GEOMETRY_COLUMN</span></dt><dd><p>The name of the geometry column in the feature table.</p></dd><dt><span class="term">COORD_DIMENSION</span></dt><dd><p>The spatial dimension (2, 3 or 4 dimensional) of the
			column.</p></dd><dt><span class="term">SRID</span></dt><dd><p>The ID of the spatial reference system used for the
			coordinate geometry in this table. It is a foreign key reference
			to the <code class="varname">SPATIAL_REF_SYS</code>.</p></dd><dt><span class="term">TYPE</span></dt><dd><p>The type of the spatial object. To restrict the spatial
			column to a single type, use one of: POINT, LINESTRING, POLYGON,
			MULTIPOINT, MULTILINESTRING, MULTIPOLYGON, GEOMETRYCOLLECTION or
			corresponding XYM versions POINTM, LINESTRINGM, POLYGONM,
			MULTIPOINTM, MULTILINESTRINGM, MULTIPOLYGONM, GEOMETRYCOLLECTIONM.
			For heterogeneous (mixed-type) collections, you can use "GEOMETRY"
			as the type.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This attribute is (probably) not part of the OpenGIS
			  specification, but is required for ensuring type
			  homogeneity.</p></td></tr></table></div></dd></dl></div></div><div class="sect2" title="4.3.3. Creating a Spatial Table"><div class="titlepage"><div><div><h3 class="title"><a name="Create_Spatial_Table"></a>4.3.3. Creating a Spatial Table</h3></div></div></div><p>Creating a table with spatial data, can be done in one step. As shown in the following example
	  which creates a roads table with a 2D linestring geometry column in WGS84 long lat</p><pre class="programlisting">CREATE TABLE ROADS ( ID int4
		, ROAD_NAME varchar(25), geom geometry(LINESTRING,4326) );</pre><p>We can add additional columns using standard ALTER TABLE command as we do in this next example where we add a 3-D linestring.</p><pre class="programlisting">ALTER TABLE roads ADD COLUMN geom2 geometry(LINESTRINGZ,4326);</pre><p>For backwards compability, you can still create a spatial table in two stages using the management functions.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Create a normal non-spatial table.</p><p>For example: <span class="command"><strong>CREATE TABLE ROADS ( ID int4, ROAD_NAME
		  varchar(25) )</strong></span></p></li><li class="listitem"><p>Add a spatial column to the table using the OpenGIS
		  "AddGeometryColumn" function. Refer to <a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> for more details.</p><p>The syntax is: </p><pre class="programlisting">AddGeometryColumn(
  &lt;schema_name&gt;,
  &lt;table_name&gt;,
  &lt;column_name&gt;,
  &lt;srid&gt;,
  &lt;type&gt;,
  &lt;dimension&gt;
)</pre><p> Or, using current schema: </p><pre class="programlisting">AddGeometryColumn(
  &lt;table_name&gt;,
  &lt;column_name&gt;,
  &lt;srid&gt;,
  &lt;type&gt;,
  &lt;dimension&gt;
)</pre><p>Example1: <span class="command"><strong>SELECT AddGeometryColumn('public',
		  'roads', 'geom', 423, 'LINESTRING', 2)</strong></span></p><p>Example2: <span class="command"><strong>SELECT AddGeometryColumn( 'roads',
		  'geom', 423, 'LINESTRING', 2)</strong></span></p></li></ul></div><p>Here is an example of SQL used to create a table and add a spatial
	  column (assuming that an SRID of 128 exists already):</p><pre class="programlisting">CREATE TABLE parks (
  park_id    INTEGER,
  park_name  VARCHAR,
  park_date  DATE,
  park_type  VARCHAR
);
SELECT AddGeometryColumn('parks', 'park_geom', 128, 'MULTIPOLYGON', 2 );</pre><p>Here is another example, using the generic "geometry" type and the
	  undefined SRID value of 0:</p><pre class="programlisting">CREATE TABLE roads (
  road_id INTEGER,
  road_name VARCHAR
);
SELECT AddGeometryColumn( 'roads', 'roads_geom', 0, 'GEOMETRY', 3 );</pre></div><div class="sect2" title="4.3.4. Manually Registering Geometry Columns in geometry_columns"><div class="titlepage"><div><div><h3 class="title"><a name="Manual_Register_Spatial_Column"></a>4.3.4. Manually Registering Geometry Columns in geometry_columns</h3></div></div></div><p>The AddGeometryColumn() approach creates a geometry column and also registers the new
		column in the geometry_columns table.  If your software utilizes geometry_columns, then
		any geometry columns you need to query by must be registered in this view.
		Starting with PostGIS 2.0, geometry_columns is no longer editable and all geometry columns are autoregistered.</p><p>However they may be registered as a generic geometry column if the column was not defined as a specific type during creation.</p><p>Two of the cases
		where this may happen, but you can't use
		AddGeometryColumn, is in the case of SQL Views and bulk inserts.  For these cases, you can correct the registration in the geometry_columns table
		by constraining the column.  Note in PostGIS 2.0+ if your column is typmod based, the creation process would register it correctly, so no need to do anything.</p><pre class="programlisting">--Lets say you have a view created like this
CREATE VIEW  public.vwmytablemercator AS
	SELECT gid, ST_Transform(geom,3395) As geom, f_name
	FROM public.mytable;

-- For it to register correctly in PostGIS 2.0+
-- You need to cast the geometry
--
DROP VIEW public.vwmytablemercator;
CREATE VIEW  public.vwmytablemercator AS
	SELECT gid, ST_Transform(geom,3395)::geometry(Geometry, 3395) As geom, f_name
	FROM public.mytable;

-- If you know the geometry type for sure is a 2D POLYGON then you could do
DROP VIEW public.vwmytablemercator;
CREATE VIEW  public.vwmytablemercator AS
	SELECT gid, ST_Transform(geom,3395)::geometry(Polygon, 3395) As geom, f_name
	FROM public.mytable;</pre><pre class="programlisting">--Lets say you created a derivative table by doing a bulk insert
SELECT poi.gid, poi.geom, citybounds.city_name
INTO myschema.my_special_pois
FROM poi INNER JOIN citybounds ON ST_Intersects(citybounds.geom, poi.geom);

--Create 2d index on new table
CREATE INDEX idx_myschema_myspecialpois_geom_gist
  ON myschema.my_special_pois USING gist(geom);

-- If your points are 3D points or 3M points,
-- then you might want to create an nd index instead of a 2d index
-- like so
CREATE INDEX my_special_pois_geom_gist_nd
	ON my_special_pois USING gist(geom gist_geometry_ops_nd);

--To manually register this new table's geometry column in geometry_columns
-- Note that this approach will work for both PostGIS 2.0+ and PostGIS 1.4+
-- For PostGIS 2.0 it will also change the underlying structure of the table to
-- to make the column typmod based.
-- For PostGIS prior to 2.0, this technique can also be used to register views
SELECT populate_geometry_columns('myschema.my_special_pois'::regclass);

--If you are using PostGIS 2.0 and for whatever reason, you
-- you need the old constraint based definition behavior
-- (such as case of inherited tables where all children do not have the same type and srid)
-- set new optional  use_typmod argument to false
SELECT populate_geometry_columns('myschema.my_special_pois'::regclass, false); </pre><p>Although the old-constraint based method is still supported, a constraint-based geomentry column used directly
in a view, will not register correctly in geometry_columns, as will a typmod one.
In this example we define a column using typmod and another using constraints.</p><pre class="programlisting">CREATE TABLE pois_ny(gid SERIAL PRIMARY KEY
   , poi_name text, cat varchar(20)
   , geom geometry(POINT,4326) );
SELECT AddGeometryColumn('pois_ny', 'geom_2160', 2160, 'POINT', 2, false);</pre><p>If we run in psql</p><pre class="programlisting">\d pois_ny;</pre><p>We observe they are defined differently -- one is typmod, one is constraint</p><pre class="screen">                                  Table "public.pois_ny"
  Column   |         Type          |                       Modifiers

-----------+-----------------------+------------------------------------------------------
 gid       | integer               | not null default nextval('pois_ny_gid_seq'::regclass)
 poi_name  | text                  |
 cat       | character varying(20) |
 geom      | geometry(Point,4326)  |
 geom_2160 | geometry              |
Indexes:
    "pois_ny_pkey" PRIMARY KEY, btree (gid)
Check constraints:
    "enforce_dims_geom_2160" CHECK (st_ndims(geom_2160) = 2)
    "enforce_geotype_geom_2160" CHECK (geometrytype(geom_2160) = 'POINT'::text
        OR geom_2160 IS NULL)
    "enforce_srid_geom_2160" CHECK (st_srid(geom_2160) = 2160)</pre><p>In geometry_columns, they both register correctly</p><pre class="programlisting">SELECT f_table_name, f_geometry_column, srid, type
	FROM geometry_columns
	WHERE f_table_name = 'pois_ny';</pre><pre class="screen">f_table_name | f_geometry_column | srid | type
-------------+-------------------+------+-------
pois_ny      | geom              | 4326 | POINT
pois_ny      | geom_2160         | 2160 | POINT</pre><p>However -- if we were to create a view like this</p><pre class="programlisting">CREATE VIEW vw_pois_ny_parks AS
SELECT *
  FROM pois_ny
  WHERE cat='park';

SELECT f_table_name, f_geometry_column, srid, type
	FROM geometry_columns
	WHERE f_table_name = 'vw_pois_ny_parks';</pre><p>The typmod based geom view column registers correctly,
but the constraint based one does not.</p><pre class="screen">   f_table_name   | f_geometry_column | srid |   type
------------------+-------------------+------+----------
 vw_pois_ny_parks | geom              | 4326 | POINT
 vw_pois_ny_parks | geom_2160         |    0 | GEOMETRY</pre><p>This may change in future versions of PostGIS, but for now
To force the constraint based view column to register correctly, we need to do this:</p><pre class="programlisting">DROP VIEW vw_pois_ny_parks;
CREATE VIEW vw_pois_ny_parks AS
SELECT gid, poi_name, cat
  , geom
  , geom_2160::geometry(POINT,2160) As geom_2160
  FROM pois_ny
  WHERE cat='park';
SELECT f_table_name, f_geometry_column, srid, type
	FROM geometry_columns
	WHERE f_table_name = 'vw_pois_ny_parks';</pre><pre class="screen">   f_table_name   | f_geometry_column | srid | type
------------------+-------------------+------+-------
 vw_pois_ny_parks | geom              | 4326 | POINT
 vw_pois_ny_parks | geom_2160         | 2160 | POINT</pre></div><div class="sect2" title="4.3.5. Ensuring OpenGIS compliancy of geometries"><div class="titlepage"><div><div><h3 class="title"><a name="OGC_Validity"></a>4.3.5. Ensuring OpenGIS compliancy of geometries</h3></div></div></div><p>PostGIS is compliant with the Open Geospatial Consortium’s (OGC)
	  OpenGIS Specifications.  As such, many PostGIS methods require, or more
	  accurately, assume that geometries that are operated on are both simple
	  and valid. For example, it does not make sense to calculate the area of
	  a polygon that has a hole defined outside of the polygon, or to construct
	  a polygon from a non-simple boundary line.</p><p>According to the OGC Specifications, a <span class="emphasis"><em>simple</em></span>
	  geometry is one that has no anomalous geometric points, such as self
	  intersection or self tangency and primarily refers to 0 or 1-dimensional
	  geometries (i.e. <code class="varname">[MULTI]POINT, [MULTI]LINESTRING</code>).
	  Geometry validity, on the other hand, primarily refers to 2-dimensional
	  geometries (i.e. <code class="varname">[MULTI]POLYGON)</code> and defines the set
	  of assertions that characterizes a valid polygon. The description of each
	  geometric class includes specific conditions that further detail geometric
	  simplicity and validity.</p><p>A <code class="varname">POINT</code> is inheritably <span class="emphasis"><em>simple</em></span>
	  as a 0-dimensional geometry object.</p><p><code class="varname">MULTIPOINT</code>s are <span class="emphasis"><em>simple</em></span> if
	  no two coordinates (<code class="varname">POINT</code>s) are equal (have identical
	  coordinate values).</p><p>A <code class="varname">LINESTRING</code> is <span class="emphasis"><em>simple</em></span> if
	  it does not pass through the same <code class="varname">POINT</code> twice (except
	  for the endpoints, in which case it is referred to as a linear ring and
	  additionally considered closed).</p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple01.png"><div class="caption"><p><span class="bold"><strong>(a)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple02.png"><div class="caption"><p><span class="bold"><strong>(b)</strong></span></p></div></div></div></td></tr><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple03.png"><div class="caption"><p><span class="bold"><strong>(c)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple04.png"><div class="caption"><p><span class="bold"><strong>(d)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p><span class="bold"><strong>(a)</strong></span> and
				<span class="bold"><strong>(c)</strong></span> are simple
				<code class="varname">LINESTRING</code>s, <span class="bold"><strong>(b)</strong></span>
				and <span class="bold"><strong>(d)</strong></span> are not.</p></td></tr></tbody></table></div><p>A <code class="varname">MULTILINESTRING</code> is <span class="emphasis"><em>simple</em></span>
	  only if all of its elements are simple and the only intersection between
	  any two elements occurs at <code class="varname">POINT</code>s that are on the
	  boundaries of both elements.  </p><div class="informaltable"><table border="0"><colgroup><col><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple05.png"><div class="caption"><p><span class="bold"><strong>(e)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple06.png"><div class="caption"><p><span class="bold"><strong>(f)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_issimple07.png"><div class="caption"><p><span class="bold"><strong>(g)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p><span class="bold"><strong>(e)</strong></span> and
				<span class="bold"><strong>(f)</strong></span> are simple
				<code class="varname">MULTILINESTRING</code>s, <span class="bold"><strong>(g)</strong></span>
				is not.</p></td></tr></tbody></table></div><p>By definition, a <code class="varname">POLYGON</code> is always
	  <span class="emphasis"><em>simple</em></span>.  It is <span class="emphasis"><em>valid</em></span> if no two
	  rings in the boundary (made up of an exterior ring and interior rings)
	  cross.  The boundary of a <code class="varname">POLYGON</code> may intersect at a
	  <code class="varname">POINT</code> but only as a tangent (i.e. not on a line).
	  A <code class="varname">POLYGON</code> may not have cut lines or spikes and the
	  interior rings must be contained entirely within the exterior ring.</p><div class="informaltable"><table border="0"><colgroup><col><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid01.png"><div class="caption"><p><span class="bold"><strong>(h)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid02.png"><div class="caption"><p><span class="bold"><strong>(i)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid03.png"><div class="caption"><p><span class="bold"><strong>(j)</strong></span></p></div></div></div></td></tr><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid04.png"><div class="caption"><p><span class="bold"><strong>(k)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid05.png"><div class="caption"><p><span class="bold"><strong>(l)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid06.png"><div class="caption"><p><span class="bold"><strong>(m)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p><span class="bold"><strong>(h)</strong></span> and
				<span class="bold"><strong>(i)</strong></span> are valid
				<code class="varname">POLYGON</code>s, <span class="bold"><strong>(j-m)</strong></span>
				cannot be represented as single <code class="varname">POLYGON</code>s, but
				<span class="bold"><strong>(j)</strong></span> and <span class="bold"><strong>(m)</strong></span>
				could be represented as a valid <code class="varname">MULTIPOLYGON</code>.
				</p></td></tr></tbody></table></div><p>A <code class="varname">MULTIPOLYGON</code> is <span class="emphasis"><em>valid</em></span>
	  if and only if all of its elements are valid and the interiors of no two
	  elements intersect.  The boundaries of any two elements may touch, but
	  only at a finite number of <code class="varname">POINT</code>s.</p><div class="informaltable"><table border="0"><colgroup><col><col></colgroup><tbody><tr><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid07.png"><div class="caption"><p><span class="bold"><strong>(n)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid08.png"><div class="caption"><p><span class="bold"><strong>(o)</strong></span></p></div></div></div></td><td align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_isvalid09.png"><div class="caption"><p><span class="bold"><strong>(p)</strong></span></p></div></div></div></td></tr></tbody></table><table border="0"><colgroup><col></colgroup><tbody><tr><td><p><span class="bold"><strong>(n)</strong></span> and
				<span class="bold"><strong>(o)</strong></span> are not valid
				<code class="varname">MULTIPOLYGON</code>s.
				<span class="bold"><strong>(p)</strong></span>, however, is valid.</p></td></tr></tbody></table></div><p>Most of the functions implemented by the GEOS library rely on the
	  assumption that your geometries are valid as specified by the OpenGIS
	  Simple Feature Specification. To check simplicity or validity of
	  geometries you can use the <a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple()</a> and
	  <a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid()</a></p><pre class="programlisting">-- Typically, it doesn't make sense to check
-- for validity on linear features since it will always return TRUE.
-- But in this example, PostGIS extends the definition of the OGC IsValid
-- by returning false if a LineString has less than 2 *distinct* vertices.
gisdb=# SELECT
   ST_IsValid('LINESTRING(0 0, 1 1)'),
   ST_IsValid('LINESTRING(0 0, 0 0, 0 0)');

 st_isvalid | st_isvalid
------------+-----------
      t     |     f</pre><p>By default, PostGIS does not apply this validity check on geometry
	  input, because testing for validity needs lots of CPU time for complex
	  geometries, especially polygons. If you do not trust your data sources,
	  you can manually enforce such a check to your tables by adding a check
	  constraint:</p><pre class="programlisting">ALTER TABLE mytable
  ADD CONSTRAINT geometry_valid_check
	CHECK (ST_IsValid(the_geom));</pre><p>If you encounter any strange error messages such as "GEOS
	  Intersection() threw an error!" or "JTS Intersection() threw an error!"
	  when calling PostGIS functions with valid input geometries, you likely
	  found an error in either PostGIS or one of the libraries it uses, and
	  you should contact the PostGIS developers. The same is true if a PostGIS
	  function returns an invalid geometry for valid input.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Strictly compliant OGC geometries cannot have Z or M values. The
		<a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid()</a> function won't consider
		higher dimensioned geometries invalid! Invocations of <a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn()</a> will add a
		constraint checking geometry dimensions, so it is enough to specify 2
		there.</p></td></tr></table></div></div><div class="sect2" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)"><div class="titlepage"><div><div><h3 class="title"><a name="DE-9IM"></a>4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)</h3></div></div></div><div class="toc"><dl><dt><span class="sect3"><a href="#idp66315728">4.3.6.1. Theory</a></span></dt></dl></div><p>It is sometimes the case that the typical spatial predicates
        (<a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>,
         <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a>, ...) are
        insufficient in and of themselves to adequately provide that desired
        spatial filter.</p><div class="informaltable"><table border="0"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure-float" style="float: left;"><div class="informalfigure"><div align="left"><img src="images/de9im01.png" align="left"></div></div></div><p>For example, consider a linear
                dataset representing a road network. It may be the task of a
                GIS analyst to identify all road segments that cross
                each other, not at a point, but on a line, perhaps invalidating
                some business rule. In this case, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a> does not
                adequately provide the necessary spatial filter since, for
                linear features, it returns <code class="varname">true</code> only where
                they cross at a point.</p> <p>One two-step solution
                might be to first perform the actual intersection
                (<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>) of pairs of road segments that spatially
                intersect (<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>), and then compare the intersection's
                <a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> with '<code class="varname">LINESTRING</code>' (properly
                dealing with cases that return
                <code class="varname">GEOMETRYCOLLECTION</code>s of
                <code class="varname">[MULTI]POINT</code>s,
                <code class="varname">[MULTI]LINESTRING</code>s, etc.).</p> <p>A
                more elegant / faster solution may indeed be
                desirable.</p></td></tr></tbody></table></div><div class="informaltable"><table border="0"><colgroup><col></colgroup><tbody><tr><td><p> </p><div class="informalfigure-float" style="float: right;"><div class="informalfigure"><div align="right"><img src="images/de9im02.png" align="right"></div></div></div> <p>A second [theoretical]
                example may be that of a GIS analyst trying to locate all
                wharfs or docks that intersect a lake's boundary on a line and
                where only one end of the wharf is up on shore. In other
                words, where a wharf is within, but not completely within a
                lake, intersecting the boundary of a lake on a line, and where
                the wharf's endpoints are both completely within and on the
                boundary of the lake. The analyst may need to use a
                combination of spatial predicates to isolate the sought after
                features:</p> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>(lake, wharf) = TRUE</p></li><li class="listitem"><p><a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>(lake, wharf) = FALSE</p></li><li class="listitem"><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>(<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>(wharf, lake)) =
                      'LINESTRING'</p></li><li class="listitem"><p><a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a>(<a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>(<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>(<a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>(wharf),
                      <a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>(lake)))) = 1</p><p>... (needless to say, this could get quite
                      complicated)</p></li></ul></div></td></tr></tbody></table></div><p>So enters the Dimensionally Extended 9 Intersection Model, or
        DE-9IM for short.</p><div class="sect3" title="4.3.6.1. Theory"><div class="titlepage"><div><div><h4 class="title"><a name="idp66315728"></a>4.3.6.1. Theory</h4></div></div></div><p>According to the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple
          Features Implementation Specification for SQL</a>, "the basic
          approach to comparing two geometries is to make pair-wise tests of
          the intersections between the Interiors, Boundaries and Exteriors of
          the two geometries and to classify the relationship between the two
          geometries based on the entries in the resulting 'intersection'
          matrix."</p><div class="glosslist"><dl><dt>Boundary</dt><dd><p>The boundary of a geometry is the set of geometries of
                the next lower dimension. For <code class="varname">POINT</code>s, which
                have a dimension of 0, the boundary is the empty set. The
                boundary of a <code class="varname">LINESTRING</code> are the two
                endpoints. For <code class="varname">POLYGON</code>s, the boundary is
                the linework that make up the exterior and interior
                rings.</p></dd><dt>Interior</dt><dd><p>The interior of a geometry are those points of a
                geometry that are left when the boundary is removed. For
                <code class="varname">POINT</code>s, the interior is the
                <code class="varname">POINT</code> itself. The interior of a
                <code class="varname">LINESTRING</code> are the set of real points
                between the endpoints. For <code class="varname">POLYGON</code>s, the
                interior is the areal surface inside the polygon.</p></dd><dt>Exterior</dt><dd><p>The exterior of a geometry is the universe, an areal
                surface, not on the interior or boundary of the
                geometry.</p></dd></dl></div><p>Given geometry <span class="emphasis"><em>a</em></span>, where the
          <span class="emphasis"><em>I(a)</em></span>, <span class="emphasis"><em>B(a)</em></span>, and
          <span class="emphasis"><em>E(a)</em></span> are the <span class="emphasis"><em>Interior</em></span>,
          <span class="emphasis"><em>Boundary</em></span>, and <span class="emphasis"><em>Exterior</em></span> of
          a, the mathematical representation of the matrix is:</p><div class="styledtable"><table border="1"><colgroup><col><col><col><col></colgroup><thead><tr><th align="center"> </th><th align="center"><span class="bold"><strong>Interior</strong></span></th><th align="center"><span class="bold"><strong>Boundary</strong></span></th><th align="center"><span class="bold"><strong>Exterior</strong></span></th></tr></thead><tbody><tr><td align="center"><span class="bold"><strong>Interior</strong></span></td><td align="center"><span class="emphasis"><em>dim( I(a) ∩ I(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( I(a) ∩ B(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( I(a) ∩ E(b) )</em></span></td></tr><tr><td align="center"><span class="bold"><strong>Boundary</strong></span></td><td align="center"><span class="emphasis"><em>dim( B(a) ∩ I(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( B(a) ∩ B(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( B(a) ∩ E(b) )</em></span></td></tr><tr><td align="center"><span class="bold"><strong>Exterior</strong></span></td><td align="center"><span class="emphasis"><em>dim( E(a) ∩ I(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( E(a) ∩ B(b) )</em></span></td><td align="center"><span class="emphasis"><em>dim( E(a) ∩ E(b) )</em></span></td></tr></tbody></table></div><p>Where <span class="emphasis"><em>dim(a)</em></span> is the dimension of
          <span class="emphasis"><em>a</em></span> as specified by
          <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> but has the domain of
          <code class="literal">{0,1,2,T,F,*}</code></p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p><code class="literal">0</code> =&gt; point</p></li><li class="listitem"><p><code class="literal">1</code> =&gt; line</p></li><li class="listitem"><p><code class="literal">2</code> =&gt; area</p></li><li class="listitem"><p><code class="literal">T</code> =&gt;
              <code class="literal">{0,1,2}</code></p></li><li class="listitem"><p><code class="literal">F</code> =&gt; empty set</p></li><li class="listitem"><p><code class="literal">*</code> =&gt; don't care</p></li></ul></div><p>Visually, for two overlapping polygonal geometries, this looks
          like:</p><div class="informaltable"><table border="0"><colgroup><col width="80pt"><col></colgroup><tbody><tr><td> </td><td align="center"><div class="informalfigure"><div align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr><td align="center" valign="middle"><img src="images/de9im04.png" align="middle"></td></tr></table></div></div></td></tr><tr><td align="center" valign="middle"><div class="informalfigure"><div align="center"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0"><tr><td align="center" valign="middle"><img src="images/de9im03.png" align="middle"></td></tr></table></div></div></td><td><p> </p><div class="styledtable"><table border="1"><colgroup><col><col><col><col></colgroup><thead valign="middle"><tr><th align="center" valign="middle"> </th><th align="center" valign="middle"><span class="bold"><strong>Interior</strong></span></th><th align="center" valign="middle"><span class="bold"><strong>Boundary</strong></span></th><th align="center" valign="middle"><span class="bold"><strong>Exterior</strong></span></th></tr></thead><tbody valign="middle"><tr><td align="center" valign="middle"><span class="bold"><strong>Interior</strong></span></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im05.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im06.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im07.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td></tr><tr><td align="center" valign="middle"><span class="bold"><strong>Boundary</strong></span></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im08.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im09.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>0</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im10.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td></tr><tr><td align="center" valign="middle"><span class="bold"><strong>Exterior</strong></span></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im11.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im12.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>1</strong></span></p></td><td align="center" valign="middle"><div class="informalfigure"><div><img src="images/de9im13.png"></div></div><p><span class="emphasis"><em>dim(...) =
                            </em></span><span class="bold"><strong>2</strong></span></p></td></tr></tbody></table></div></td></tr></tbody></table></div><p>Read from left to right and from top to bottom, the dimensional matrix is
          represented, '<span class="bold"><strong>212101212</strong></span>'.</p><p>A relate matrix that would therefore represent our first
          example of two lines that intersect on a line would be: '<span class="bold"><strong>1*1***1**</strong></span>'</p><pre class="programlisting">-- Identify road segments that cross on a line
SELECT a.id
FROM roads a, roads b
WHERE a.id != b.id
AND a.geom &amp;&amp; b.geom
AND ST_Relate(a.geom, b.geom, '1*1***1**');</pre><p>A relate matrix that represents the second example of wharfs
          partly on the lake's shoreline would be '<span class="bold"><strong>102101FF2</strong></span>'</p><pre class="programlisting">-- Identify wharfs partly on a lake's shoreline
SELECT a.lake_id, b.wharf_id
FROM lakes a, wharfs b
WHERE a.geom &amp;&amp; b.geom
AND ST_Relate(a.geom, b.geom, '102101FF2');</pre><p>For more information or reading, see:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc" compact><li class="listitem"><p><a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple
          Features Implementation Specification for SQL</a> (version 1.1, section 2.1.13.2)</p></li><li class="listitem"><p><a class="ulink" href="https://en.wikipedia.org/wiki/DE-9IM" target="_top">Dimensionally
              Extended Nine-Intersection Model (DE-9IM)</a></p></li><li class="listitem"><p><a class="ulink" href="http://docs.geotools.org/latest/userguide/library/jts/dim9.html" target="_top">GeoTools: Point Set Theory and the DE-9IM Matrix</a></p></li><li class="listitem"><p><span class="emphasis"><em>Encyclopedia of GIS</em></span> By Hui Xiong</p></li></ul></div></div></div></div><div class="sect1" title="4.4. Loading GIS (Vector) Data"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="loading_geometry_data"></a>4.4. Loading GIS (Vector) Data</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp66402384">4.4.1. Loading Data Using SQL</a></span></dt><dt><span class="sect2"><a href="#shp2pgsql_usage">4.4.2. shp2pgsql: Using the ESRI Shapefile Loader</a></span></dt></dl></div><p>Once you have created a spatial table, you are ready to upload GIS
	data to the database. Currently, there are two ways to get data into a
	PostGIS/PostgreSQL database: using formatted SQL statements or using the
	Shape file loader/dumper.</p><div class="sect2" title="4.4.1. Loading Data Using SQL"><div class="titlepage"><div><div><h3 class="title"><a name="idp66402384"></a>4.4.1. Loading Data Using SQL</h3></div></div></div><p>If you can convert your data to a text representation, then using
	  formatted SQL might be the easiest way to get your data into PostGIS. As
	  with Oracle and other SQL databases, data can be bulk loaded by piping a
	  large text file full of SQL "INSERT" statements into the SQL terminal
	  monitor.</p><p>A data upload file (<code class="filename">roads.sql</code> for example)
	  might look like this:</p><pre class="programlisting">BEGIN;
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (1,ST_GeomFromText('LINESTRING(191232 243118,191108 243242)',-1),'Jeff Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (2,ST_GeomFromText('LINESTRING(189141 244158,189265 244817)',-1),'Geordie Rd');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (3,ST_GeomFromText('LINESTRING(192783 228138,192612 229814)',-1),'Paul St');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (4,ST_GeomFromText('LINESTRING(189412 252431,189631 259122)',-1),'Graeme Ave');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (5,ST_GeomFromText('LINESTRING(190131 224148,190871 228134)',-1),'Phil Tce');
INSERT INTO roads (road_id, roads_geom, road_name)
  VALUES (6,ST_GeomFromText('LINESTRING(198231 263418,198213 268322)',-1),'Dave Cres');
COMMIT;</pre><p>The data file can be piped into PostgreSQL very easily using the
	  "psql" SQL terminal monitor:</p><pre class="programlisting">psql -d [database] -f roads.sql</pre></div><div class="sect2" title="4.4.2. shp2pgsql: Using the ESRI Shapefile Loader"><div class="titlepage"><div><div><h3 class="title"><a name="shp2pgsql_usage"></a>4.4.2. shp2pgsql: Using the ESRI Shapefile Loader</h3></div></div></div><p>
    The <code class="filename">shp2pgsql</code> data loader converts ESRI Shape files into SQL suitable for
    insertion into a PostGIS/PostgreSQL database either in geometry or geography format. The loader has several operating modes
    distinguished by command line flags:
  </p><p>In addition to the shp2pgsql command-line loader, there is an <code class="filename">shp2pgsql-gui</code> graphical interface with most
	of the options as the command-line loader, but may be easier to use for one-off non-scripted loading or if you are new to PostGIS.
	It can also be configured as a plugin to PgAdminIII.
	</p><div class="variablelist"><dl><dt><span class="term">(c|a|d|p) These are mutually exclusive options:</span></dt><dd><p>
          </p><div class="variablelist"><dl><dt><span class="term">-c</span></dt><dd><p>
                  Creates a new table and populates it from the shapefile. <span class="emphasis"><em>This is the
                  default mode.</em></span>
                </p></dd><dt><span class="term">-a</span></dt><dd><p>
                  Appends data from the Shape file into the database table. Note that to use this
                  option to load multiple files, the files must have the same attributes and same
                  data types.
                </p></dd><dt><span class="term">-d</span></dt><dd><p>
                  Drops the database table before creating a new table with the data in the Shape
                  file.
                </p></dd><dt><span class="term">-p</span></dt><dd><p>
                  Only produces the table creation SQL code, without adding any actual data. This
                  can be used if you need to completely separate the table creation and data loading
                  steps.
                </p></dd></dl></div><p>
        </p></dd><dt><span class="term">-?</span></dt><dd><p>
          Display help screen.
        </p></dd><dt><span class="term">-D</span></dt><dd><p>
          Use the PostgreSQL "dump" format for the output data. This can be combined with -a, -c and
          -d. It is much faster to load than the default "insert" SQL format. Use this for very
          large data sets.
        </p></dd><dt><span class="term">-s [&lt;FROM_SRID%gt;:]&lt;SRID&gt;</span></dt><dd><p>
          Creates and populates the geometry tables with the specified SRID.
          Optionally specifies that the input shapefile uses the given
          FROM_SRID, in which case the geometries will be reprojected to the
          target SRID.
	  FROM_SRID cannot be specified with -D.
        </p></dd><dt><span class="term">-k</span></dt><dd><p>
          Keep identifiers' case (column, schema and attributes). Note that attributes in Shapefile
          are all UPPERCASE.
        </p></dd><dt><span class="term">-i</span></dt><dd><p>
          Coerce all integers to standard 32-bit integers, do not create 64-bit bigints, even if the
          DBF header signature appears to warrant it.
        </p></dd><dt><span class="term">-I</span></dt><dd><p>
          Create a GiST index on the geometry column.
        </p></dd><dt><span class="term">-m</span></dt><dd><p>
          -m <code class="filename">a_file_name</code>  Specify a file containing a set of mappings of (long) column
     names to 10 character DBF column names. The content of the file is one or
     more lines of two names separated by white space and no trailing or
     leading space. For example:
         </p><pre class="programlisting">COLUMNNAME DBFFIELD1
AVERYLONGCOLUMNNAME DBFFIELD2</pre><p>
        </p></dd><dt><span class="term">-S </span></dt><dd><p>
          Generate simple geometries instead of MULTI geometries.  Will only succeed if
          all the geometries are actually single (I.E. a MULTIPOLYGON with a single shell, or
          or a MULTIPOINT with a single vertex).
        </p></dd><dt><span class="term">-t &lt;dimensionality&gt;</span></dt><dd><p>
          Force the output geometry to have the specified dimensionality. Use the following
          strings to indicate the dimensionality: 2D, 3DZ, 3DM, 4D.
        </p><p>
	        If the input has fewer dimensions that specified, the output will have those dimensions filled
	        in with zeroes. If the input has more dimensions that specified, the unwanted dimensions will
	        be stripped.
        </p></dd><dt><span class="term">-w</span></dt><dd><p>
          Output WKT format, instead of WKB.  Note that this can
          introduce coordinate drifts due to loss of precision.
        </p></dd><dt><span class="term">-e</span></dt><dd><p>
          Execute each statement on its own, without using a transaction.
          This allows loading of the majority of good data when there are some bad
          geometries that generate errors.  Note that this cannot be used with the
          -D flag as the "dump" format always uses a transaction.
        </p></dd><dt><span class="term">-W &lt;encoding&gt;</span></dt><dd><p>
          Specify encoding of the input data (dbf file). When used, all attributes of the dbf are
          converted from the specified encoding to UTF8. The resulting SQL output will contain a
          <code class="code">SET CLIENT_ENCODING to UTF8</code> command, so that the backend will be able to
          reconvert from UTF8 to whatever encoding the database is configured to use internally.
        </p></dd><dt><span class="term">-N &lt;policy&gt;</span></dt><dd><p>
           NULL geometries handling policy (insert*,skip,abort)
        </p></dd><dt><span class="term">-n</span></dt><dd><p>
          -n  Only import DBF file.  If your data has no corresponding shapefile, it will automatically switch to this mode
	and load just the dbf.  So setting this flag is only needed if you have a full shapefile set, and you only want the attribute data and no geometry.
        </p></dd><dt><span class="term">-G</span></dt><dd><p>
			Use geography type instead of geometry (requires lon/lat data) in WGS84 long lat (SRID=4326)
		</p></dd><dt><span class="term">-T &lt;tablespace&gt;</span></dt><dd><p>
          Specify the tablespace for the new table.  Indexes will still use the
          default tablespace unless the -X parameter is also used.  The PostgreSQL
          documentation has a good description on when to use custom tablespaces.
        </p></dd><dt><span class="term">-X &lt;tablespace&gt;</span></dt><dd><p>
          Specify the tablespace for the new table's indexes.  This applies to
          the primary key index, and the GIST spatial index if -I is also used.
        </p></dd></dl></div><p>
    An example session using the loader to create an input file and uploading it might look like
    this:
  </p><pre class="programlisting"># shp2pgsql -c -D -s 4269 -i -I shaperoads.shp myschema.roadstable &gt; roads.sql
# psql -d roadsdb -f roads.sql</pre><p>
    A conversion and upload can be done all in one step using UNIX pipes:
  </p><pre class="programlisting"># shp2pgsql shaperoads.shp myschema.roadstable | psql -d roadsdb</pre></div></div><div class="sect1" title="4.5. Retrieving GIS Data"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="retrieving_vector-data"></a>4.5. Retrieving GIS Data</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp66453072">4.5.1. Using SQL to Retrieve Data</a></span></dt><dt><span class="sect2"><a href="#idp65821392">4.5.2. Using the Dumper</a></span></dt></dl></div><p>Data can be extracted from the database using either SQL or the
	Shape file loader/dumper. In the section on SQL we will discuss some of
	the operators available to do comparisons and queries on spatial
	tables.</p><div class="sect2" title="4.5.1. Using SQL to Retrieve Data"><div class="titlepage"><div><div><h3 class="title"><a name="idp66453072"></a>4.5.1. Using SQL to Retrieve Data</h3></div></div></div><p>The most straightforward means of pulling data out of the
        database is to use a SQL select query to reduce the number of RECORDS and COLUMNS returned
        and dump the resulting columns
        into a parsable text file:</p><pre class="programlisting">db=# SELECT road_id, ST_AsText(road_geom) AS geom, road_name FROM roads;

road_id | geom                                    | road_name
--------+-----------------------------------------+-----------
	  1 | LINESTRING(191232 243118,191108 243242) | Jeff Rd
	  2 | LINESTRING(189141 244158,189265 244817) | Geordie Rd
	  3 | LINESTRING(192783 228138,192612 229814) | Paul St
	  4 | LINESTRING(189412 252431,189631 259122) | Graeme Ave
	  5 | LINESTRING(190131 224148,190871 228134) | Phil Tce
	  6 | LINESTRING(198231 263418,198213 268322) | Dave Cres
	  7 | LINESTRING(218421 284121,224123 241231) | Chris Way
(6 rows)</pre><p>However, there will be times when some kind of restriction is
	  necessary to cut down the number of fields returned. In the case of
	  attribute-based restrictions, just use the same SQL syntax as normal
	  with a non-spatial table. In the case of spatial restrictions, the
	  following operators are available/useful:</p><div class="variablelist"><dl><dt><span class="term">&amp;&amp;</span></dt><dd><p>This operator tells whether the bounding box of one geometry
			intersects the bounding box of another.</p></dd><dt><span class="term">ST_OrderingEquals</span></dt><dd><p>This tests whether two geometries are
			geometrically identical. For example, if 'POLYGON((0 0,1 1,1 0,0
			0))' is the same as 'POLYGON((0 0,1 1,1 0,0 0))' (it is).</p></dd><dt><span class="term">=</span></dt><dd><p>This operator is a little more naive, it only tests whether
			the bounding boxes of two geometries are the same.</p></dd></dl></div><p>Next, you can use these operators in queries. Note that when
	  specifying geometries and boxes on the SQL command line, you must
	  explicitly turn the string representations into geometries by using the
	  "ST_GeomFromText()" function. The 312 is a fictitious spatial reference system that matches our data.
	  So, for example:</p><pre class="programlisting">SELECT road_id, road_name
  FROM roads
  WHERE ST_OrderingEquals(roads_geom , ST_GeomFromText('LINESTRING(191232 243118,191108 243242)',312) ) ;</pre><p>The above query would return the single record from the
	  "ROADS_GEOM" table in which the geometry was equal to that value.</p><p>When using the "&amp;&amp;" operator, you can specify either a
	  BOX3D as the comparison feature or a GEOMETRY. When you specify a
	  GEOMETRY, however, its bounding box will be used for the
	  comparison.</p><pre class="programlisting">SELECT road_id, road_name
FROM roads
WHERE roads_geom &amp;&amp; ST_GeomFromText('POLYGON((...))',312);</pre><p>The above query will use the bounding box of the polygon for
	  comparison purposes.</p><p>The most common spatial query will probably be a "frame-based"
	  query, used by client software, like data browsers and web mappers, to
	  grab a "map frame" worth of data for display. Using a "BOX3D" object for
	  the frame, such a query looks like this:</p><pre class="programlisting">SELECT ST_AsText(roads_geom) AS geom
FROM roads
WHERE
  roads_geom &amp;&amp; ST_MakeEnvelope(191232, 243117,191232, 243119,312);</pre><p>Note the use of the SRID 312, to specify the projection of the envelope.</p></div><div class="sect2" title="4.5.2. Using the Dumper"><div class="titlepage"><div><div><h3 class="title"><a name="idp65821392"></a>4.5.2. Using the Dumper</h3></div></div></div><p>The <code class="filename">pgsql2shp</code> table dumper connects directly
	  to the database and converts a table (possibly defined by a query) into
	  a shape file. The basic syntax is:</p><pre class="programlisting">pgsql2shp [&lt;options&gt;] &lt;database&gt; [&lt;schema&gt;.]&lt;table&gt;</pre><pre class="programlisting">pgsql2shp [&lt;options&gt;] &lt;database&gt; &lt;query&gt;</pre><p>The commandline options are:</p><div class="variablelist"><dl><dt><span class="term">-f &lt;filename&gt;</span></dt><dd><p>Write the output to a particular filename.</p></dd><dt><span class="term">-h &lt;host&gt;</span></dt><dd><p>The database host to connect to.</p></dd><dt><span class="term">-p &lt;port&gt;</span></dt><dd><p>The port to connect to on the database host.</p></dd><dt><span class="term">-P &lt;password&gt;</span></dt><dd><p>The password to use when connecting to the database.</p></dd><dt><span class="term">-u &lt;user&gt;</span></dt><dd><p>The username to use when connecting to the database.</p></dd><dt><span class="term">-g &lt;geometry column&gt;</span></dt><dd><p>In the case of tables with multiple geometry columns, the
			geometry column to use when writing the shape file.</p></dd><dt><span class="term">-b</span></dt><dd><p>Use a binary cursor. This will make the operation faster,
			but will not work if any NON-geometry attribute in the table lacks
			a cast to text.</p></dd><dt><span class="term">-r</span></dt><dd><p>Raw mode. Do not drop the <code class="varname">gid</code> field, or
			escape column names.</p></dd><dt><span class="term">-d</span></dt><dd><p>For backward compatibility: write a 3-dimensional shape file
			when dumping from old (pre-1.0.0) postgis databases (the default
			is to write a 2-dimensional shape file in that case). Starting
			from postgis-1.0.0+, dimensions are fully encoded.</p></dd><dt><span class="term">-m <code class="varname">filename</code></span></dt><dd><p> Remap identifiers to ten character names.
			The content of the file is lines of two symbols separated by
			a single white space and no trailing or leading space:
			VERYLONGSYMBOL SHORTONE
			ANOTHERVERYLONGSYMBOL SHORTER
			etc.</p></dd></dl></div></div></div><div class="sect1" title="4.6. Building Indexes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp66504912"></a>4.6. Building Indexes</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#gist_indexes">4.6.1. GiST Indexes</a></span></dt><dt><span class="sect2"><a href="#brin_indexes">4.6.2. BRIN Indexes</a></span></dt><dt><span class="sect2"><a href="#idp66523856">4.6.3. Using Indexes</a></span></dt></dl></div><p>Indexes are what make using a spatial database for large data sets
	possible. Without indexing, any search for a feature would require a
	"sequential scan" of every record in the database. Indexing speeds up
	searching by organizing the data into a search tree which can be quickly
	traversed to find a particular record. PostgreSQL supports three kinds of
	indexes by default: B-Tree indexes, R-Tree indexes, and GiST
	indexes.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>B-Trees are used for data which can be sorted along one axis;
		for example, numbers, letters, dates. GIS data cannot be rationally
		sorted along one axis (which is greater, (0,0) or (0,1) or (1,0)?) so
		B-Tree indexing is of no use for us.</p></li><li class="listitem"><p>R-Trees break up data into rectangles, and sub-rectangles, and
		sub-sub rectangles, etc. R-Trees are used by some spatial databases to
		index GIS data, but the PostgreSQL R-Tree implementation is not as
		robust as the GiST implementation.</p></li><li class="listitem"><p>GiST (Generalized Search Trees) indexes break up data into
		"things to one side", "things which overlap", "things which are
		inside" and can be used on a wide range of data-types, including GIS
		data. PostGIS uses an R-Tree index implemented on top of GiST to index
		GIS data.</p></li></ul></div><div class="sect2" title="4.6.1. GiST Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="gist_indexes"></a>4.6.1. GiST Indexes</h3></div></div></div><p>GiST stands for "Generalized Search Tree" and is a generic form of
	  indexing. In addition to GIS indexing, GiST is used to speed up searches
	  on all kinds of irregular data structures (integer arrays, spectral
	  data, etc) which are not amenable to normal B-Tree indexing.</p><p>Once a GIS data table exceeds a few thousand rows, you will want
	  to build an index to speed up spatial searches of the data (unless all
	  your searches are based on attributes, in which case you'll want to
	  build a normal index on the attribute fields).</p><p>The syntax for building a GiST index on a "geometry" column is as
	  follows:</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ( [geometryfield] ); </pre><p>The above syntax will always build a 2D-index.  To get the an n-dimensional index supported in PostGIS 2.0+ for the geometry type, you can create one using this syntax</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ([geometryfield] gist_geometry_ops_nd);</pre><p>Building a spatial index is a computationally intensive exercise:
	  on tables of around 1 million rows, on a 300MHz Solaris machine, we have
	  found building a GiST index takes about 1 hour. After building an index,
	  it is important to force PostgreSQL to collect table statistics, which
	  are used to optimize query plans:</p><pre class="programlisting">VACUUM ANALYZE [table_name] [(column_name)];
-- This is only needed for PostgreSQL 7.4 installations and below
SELECT UPDATE_GEOMETRY_STATS([table_name], [column_name]);</pre><p>GiST indexes have two advantages over R-Tree indexes in
	  PostgreSQL. Firstly, GiST indexes are "null safe", meaning they can
	  index columns which include null values. Secondly, GiST indexes support
	  the concept of "lossiness" which is important when dealing with GIS
	  objects larger than the PostgreSQL 8K page size. Lossiness allows
	  PostgreSQL to store only the "important" part of an object in an index
	  -- in the case of GIS objects, just the bounding box. GIS objects larger
	  than 8K will cause R-Tree indexes to fail in the process of being
	  built.</p></div><div class="sect2" title="4.6.2. BRIN Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="brin_indexes"></a>4.6.2. BRIN Indexes</h3></div></div></div><p>BRIN stands for "Block Range Index" and is a generic form of
	  indexing that has been introduced in PostgreSQL 9.5. BRIN is a lossy kind
	  of index, and its main usage is to provide a compromise for both read and
	  write performance. It's primary goal is to handle very large tables for
	  which some of the columns have some natural correlation with their
	  physical location within the table.  In addition to GIS indexing, BRIN is
	  used to speed up searches on various kinds of regular or irregular data
	  structures (integer, arrays etc).</p><p>Once a GIS data table exceeds a few thousand rows, you will want
	  to build an index to speed up spatial searches of the data (unless all
	  your searches are based on attributes, in which case you'll want to
      build a normal index on the attribute fields). GiST indexes are really
      performant as long as their size doesn't exceed the amount of RAM
      available for the database, and as long as you can afford the storage
      size, and the penalty in write workload. Otherwise, BRIN index can be
      considered as an alternative. </p><p>The idea of a BRIN index is to store only the bouding box englobing
      all the geometries contained in all the rows in a set of table blocks,
      called a range.  Obviously, this indexing method will only be efficient
      if the data is physically ordered in a way where the resulting bouding
      boxes for block ranges will be mutually exclusive. The resulting index
      will be really small, but will be less efficient than a GiST index in
      many cases.</p><p>Building a BRIN index is way less intensive than building a GiST
	  index. It's quite common to build a BRIN index in more than ten time less
	  than a GiST index would have required. As a BRIN index only store one
	  bouding box for one to many table blocks, it's pretty common to consume
	  up to a thousand time less disk space for this kind of indexes.</p><p>You can choose the number of blocks to summarize in a range. If you
      decrease this number, the index will be bigger but will probably help to
      get better performance.</p><p>The syntax for building a BRIN index on a "geometry" column is as
	  follows:</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ( [geometryfield] ); </pre><p>The above syntax will always build a 2D-index.  To get the 3d-dimensional index supported in PostGIS 2.0+ for the geometry type, you can create one using this syntax</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ([geometryfield] brin_geometry_inclusion_ops_3d);</pre><p>These above syntaxes will use the default number or block in a range, which is 128. To specify the number of blocks you want to summarise in a range, you can create one using this syntax</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ( [geometryfield] ) WITH (pages_per_range = [number]); </pre><p>Also the "geography" datatype is supported for BRIN indexing. The
          syntax for building a BRIN index on a "geometry" column is as follows:</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING BRIN ( [geographyfield] ); </pre><p>The above syntax will always build a 2D-index for geospatial objetcs on the spheroid. </p><p>Currently, just the "inclusion support" is considered here, meaning
          that just <code class="varname">&amp;&amp;</code>, <code class="varname">~</code> and
          <code class="varname">@</code> operators can be used for the 2D cases (both for
          "geometry" and for "geography"), and just the <code class="varname">&amp;&amp;&amp;</code>
          operator can be used for the 3D geometries. There is no support
          for kNN searches at the moment.</p><pre class="programlisting">VACUUM ANALYZE [table_name] [(column_name)];
-- This is only needed for PostgreSQL 7.4 installations and below
SELECT UPDATE_GEOMETRY_STATS([table_name], [column_name]);</pre></div><div class="sect2" title="4.6.3. Using Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="idp66523856"></a>4.6.3. Using Indexes</h3></div></div></div><p>Ordinarily, indexes invisibly speed up data access: once the index
	  is built, the query planner transparently decides when to use index
	  information to speed up a query plan. Unfortunately, the PostgreSQL
	  query planner does not optimize the use of GiST indexes well, so
	  sometimes searches which should use a spatial index instead default to a
	  sequence scan of the whole table.</p><p>If you find your spatial indexes are not being used (or your
	  attribute indexes, for that matter) there are a couple things you can
	  do:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Firstly, make sure statistics are gathered about the number
		  and distributions of values in a table, to provide the query planner
		  with better information to make decisions around index usage. For
		  PostgreSQL 7.4 installations and below this is done by running
		  <span class="command"><strong>update_geometry_stats([table_name, column_name])</strong></span>
		  (compute distribution) and <span class="command"><strong>VACUUM ANALYZE [table_name]
		  [column_name]</strong></span> (compute number of values). Starting with
		  PostgreSQL 8.0 running <span class="command"><strong>VACUUM ANALYZE</strong></span> will do
		  both operations. You should regularly vacuum your databases anyways
		  -- many PostgreSQL DBAs have <span class="command"><strong>VACUUM</strong></span> run as an
		  off-peak cron job on a regular basis.</p></li><li class="listitem"><p>If vacuuming does not work, you can force the planner to use
		  the index information by using the <span class="command"><strong>SET
		  ENABLE_SEQSCAN=OFF</strong></span> command. You should only use this
		  command sparingly, and only on spatially indexed queries: generally
		  speaking, the planner knows better than you do about when to use
		  normal B-Tree indexes. Once you have run your query, you should
		  consider setting <code class="varname">ENABLE_SEQSCAN</code> back on, so that
		  other queries will utilize the planner as normal.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>As of version 0.6, it should not be necessary to force the
			planner to use the index with
			<code class="varname">ENABLE_SEQSCAN</code>.</p></td></tr></table></div></li><li class="listitem"><p>If you find the planner wrong about the cost of sequential vs
		  index scans try reducing the value of random_page_cost in
		  postgresql.conf or using SET random_page_cost=#. Default value for
		  the parameter is 4, try setting it to 1 or 2. Decrementing the value
		  makes the planner more inclined of using Index scans.</p></li></ul></div></div></div><div class="sect1" title="4.7. Complex Queries"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp66532560"></a>4.7. Complex Queries</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp66534352">4.7.1. Taking Advantage of Indexes</a></span></dt><dt><span class="sect2"><a href="#examples_spatial_sql">4.7.2. Examples of Spatial SQL</a></span></dt></dl></div><p>The <span class="emphasis"><em>raison d'etre</em></span> of spatial database
	functionality is performing queries inside the database which would
	ordinarily require desktop GIS functionality. Using PostGIS effectively
	requires knowing what spatial functions are available, and ensuring that
	appropriate indexes are in place to provide good performance. The SRID of 312 used in these
	examples is purely for demonstration.  You should be using a REAL SRID listed in the the spatial_ref_sys table
	and one that matches the projection of your data.  If your data has no spatial reference system
	specified, you should be THINKING very thoughtfully why it doesn't and maybe it should.
	If your reason is because you are modeling something that doesn't have a geographic spatial reference system defined such as the internals of a molecule
	or a good location
	on Mars to transport the human race in the event of a nuclear holocaust,
	then simply leave out the SRID or make one up and insert it in the <code class="varname">spatial_ref_sys</code> table.</p><div class="sect2" title="4.7.1. Taking Advantage of Indexes"><div class="titlepage"><div><div><h3 class="title"><a name="idp66534352"></a>4.7.1. Taking Advantage of Indexes</h3></div></div></div><p>When constructing a query it is important to remember that only
	  the bounding-box-based operators such as &amp;&amp; can take advantage
	  of the GiST spatial index. Functions such as
	  <code class="varname">ST_Distance()</code> cannot use the index to optimize their
	  operation. For example, the following query would be quite slow on a
	  large table:</p><pre class="programlisting">SELECT the_geom
FROM geom_table
WHERE ST_Distance(the_geom, ST_GeomFromText('POINT(100000 200000)', 312)) &lt; 100</pre><p>This query is selecting all the geometries in geom_table which are
	  within 100 units of the point (100000, 200000). It will be slow because
	  it is calculating the distance between each point in the table and our
	  specified point, ie. one <code class="varname">ST_Distance()</code> calculation
	  for each row in the table. We can avoid this by using the &amp;&amp;
	  operator to reduce the number of distance calculations required:</p><pre class="programlisting">SELECT the_geom
FROM geom_table
WHERE ST_DWithin(the_geom,  ST_MakeEnvelope(90900, 190900, 100100, 200100,312), 100)
</pre><p>This query selects the same geometries, but it does it in a more
	  efficient way. Assuming there is a GiST index on the_geom, the query
	  planner will recognize that it can use the index to reduce the number of
	  rows before calculating the result of the <code class="varname">ST_distance()</code>
	  function. Notice that the <code class="varname">ST_MakeEnvelope</code> geometry which is
	  used in the &amp;&amp; operation is a 200 unit square box centered on
	  the original point - this is our "query box". The &amp;&amp; operator
	  uses the index to quickly reduce the result set down to only those
	  geometries which have bounding boxes that overlap the "query box".
	  Assuming that our query box is much smaller than the extents of the
	  entire geometry table, this will drastically reduce the number of
	  distance calculations that need to be done.</p><div class="note" title="Change in Behavior" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note: Change in Behavior"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Change in Behavior</th></tr><tr><td align="left" valign="top"><p>As of PostGIS 1.3.0, most of the Geometry Relationship
		Functions, with the notable exceptions of ST_Disjoint and ST_Relate,
		include implicit bounding box overlap operators.</p></td></tr></table></div></div><div class="sect2" title="4.7.2. Examples of Spatial SQL"><div class="titlepage"><div><div><h3 class="title"><a name="examples_spatial_sql"></a>4.7.2. Examples of Spatial SQL</h3></div></div></div><p>The examples in this section will make use of two tables, a table
	  of linear roads, and a table of polygonal municipality boundaries. The
	  table definitions for the <code class="varname">bc_roads</code> table is:</p><pre class="programlisting">Column      | Type              | Description
------------+-------------------+-------------------
gid         | integer           | Unique ID
name        | character varying | Road Name
the_geom    | geometry          | Location Geometry (Linestring)</pre><p>The table definition for the <code class="varname">bc_municipality</code>
	  table is:</p><pre class="programlisting">Column     | Type              | Description
-----------+-------------------+-------------------
gid        | integer           | Unique ID
code       | integer           | Unique ID
name       | character varying | City / Town Name
the_geom   | geometry          | Location Geometry (Polygon)</pre><div class="qandaset" title="Frequently Asked Questions"><a name="idp66543696"></a><dl><dt>4.7.2.1. <a href="#qa_total_length_roads">What is the total length of all roads, expressed in
			kilometers?</a></dt><dt>4.7.2.2. <a href="#idp66546640">How large is the city of Prince George, in hectares?</a></dt><dt>4.7.2.3. <a href="#idp66549328">What is the largest municipality in the province, by
			area?</a></dt><dt>4.7.2.4. <a href="#idp66552144">What is the length of roads fully contained within each
			municipality?</a></dt><dt>4.7.2.5. <a href="#idp66554960">Create a new table with all the roads within the city of
			Prince George.</a></dt><dt>4.7.2.6. <a href="#idp66557520">What is the length in kilometers of "Douglas St" in
			Victoria?</a></dt><dt>4.7.2.7. <a href="#idp66559568">What is the largest municipality polygon that has a
			hole?</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="4.7.2.1."><td align="left" valign="top"><a name="qa_total_length_roads"></a><a name="idp66544336"></a><p><b>4.7.2.1.</b></p></td><td align="left" valign="top"><p>What is the total length of all roads, expressed in
			kilometers?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You can answer this question with a very simple piece of
			SQL:</p><pre class="programlisting">SELECT sum(ST_Length(the_geom))/1000 AS km_roads FROM bc_roads;

km_roads
------------------
70842.1243039643
(1 row)</pre></td></tr><tr class="question" title="4.7.2.2."><td align="left" valign="top"><a name="idp66546640"></a><a name="idp66546896"></a><p><b>4.7.2.2.</b></p></td><td align="left" valign="top"><p>How large is the city of Prince George, in hectares?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This query combines an attribute condition (on the
			municipality name) with a spatial calculation (of the
			area):</p><pre class="programlisting">SELECT
  ST_Area(the_geom)/10000 AS hectares
FROM bc_municipality
WHERE name = 'PRINCE GEORGE';

hectares
------------------
32657.9103824927
(1 row)</pre></td></tr><tr class="question" title="4.7.2.3."><td align="left" valign="top"><a name="idp66549328"></a><a name="idp66549584"></a><p><b>4.7.2.3.</b></p></td><td align="left" valign="top"><p>What is the largest municipality in the province, by
			area?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This query brings a spatial measurement into the query
			condition. There are several ways of approaching this problem, but
			the most efficient is below:</p><pre class="programlisting">SELECT
  name,
  ST_Area(the_geom)/10000 AS hectares
FROM
  bc_municipality
ORDER BY hectares DESC
LIMIT 1;

name           | hectares
---------------+-----------------
TUMBLER RIDGE  | 155020.02556131
(1 row)</pre><p>Note that in order to answer this query we have to calculate
			the area of every polygon. If we were doing this a lot it would
			make sense to add an area column to the table that we could
			separately index for performance. By ordering the results in a
			descending direction, and them using the PostgreSQL "LIMIT"
			command we can easily pick off the largest value without using an
			aggregate function like max().</p></td></tr><tr class="question" title="4.7.2.4."><td align="left" valign="top"><a name="idp66552144"></a><a name="idp66552400"></a><p><b>4.7.2.4.</b></p></td><td align="left" valign="top"><p>What is the length of roads fully contained within each
			municipality?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This is an example of a "spatial join", because we are
			bringing together data from two tables (doing a join) but using a
			spatial interaction condition ("contained") as the join condition
			rather than the usual relational approach of joining on a common
			key:</p><pre class="programlisting">SELECT
  m.name,
  sum(ST_Length(r.the_geom))/1000 as roads_km
FROM
  bc_roads AS r,
  bc_municipality AS m
WHERE
  ST_Contains(m.the_geom,r.the_geom)
GROUP BY m.name
ORDER BY roads_km;

name                        | roads_km
----------------------------+------------------
SURREY                      | 1539.47553551242
VANCOUVER                   | 1450.33093486576
LANGLEY DISTRICT            | 833.793392535662
BURNABY                     | 773.769091404338
PRINCE GEORGE               | 694.37554369147
...</pre><p>This query takes a while, because every road in the table is
			summarized into the final result (about 250K roads for our
			particular example table). For smaller overlays (several thousand
			records on several hundred) the response can be very fast.</p></td></tr><tr class="question" title="4.7.2.5."><td align="left" valign="top"><a name="idp66554960"></a><a name="idp66555216"></a><p><b>4.7.2.5.</b></p></td><td align="left" valign="top"><p>Create a new table with all the roads within the city of
			Prince George.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>This is an example of an "overlay", which takes in two
			tables and outputs a new table that consists of spatially clipped
			or cut resultants. Unlike the "spatial join" demonstrated above,
			this query actually creates new geometries. An overlay is like a
			turbo-charged spatial join, and is useful for more exact analysis
			work:</p><pre class="programlisting">CREATE TABLE pg_roads as
SELECT
  ST_Intersection(r.the_geom, m.the_geom) AS intersection_geom,
  ST_Length(r.the_geom) AS rd_orig_length,
  r.*
FROM
  bc_roads AS r,
  bc_municipality AS m
WHERE  m.name = 'PRINCE GEORGE' AND ST_Intersects(r.the_geom, m.the_geom);</pre></td></tr><tr class="question" title="4.7.2.6."><td align="left" valign="top"><a name="idp66557520"></a><a name="idp66557776"></a><p><b>4.7.2.6.</b></p></td><td align="left" valign="top"><p>What is the length in kilometers of "Douglas St" in
			Victoria?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><pre class="programlisting">SELECT
  sum(ST_Length(r.the_geom))/1000 AS kilometers
FROM
  bc_roads r,
  bc_municipality m
WHERE  r.name = 'Douglas St' AND m.name = 'VICTORIA'
	AND ST_Contains(m.the_geom, r.the_geom) ;

kilometers
------------------
4.89151904172838
(1 row)</pre></td></tr><tr class="question" title="4.7.2.7."><td align="left" valign="top"><a name="idp66559568"></a><a name="idp66559824"></a><p><b>4.7.2.7.</b></p></td><td align="left" valign="top"><p>What is the largest municipality polygon that has a
			hole?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><pre class="programlisting">SELECT gid, name, ST_Area(the_geom) AS area
FROM bc_municipality
WHERE ST_NRings(the_geom) &gt; 1
ORDER BY area DESC LIMIT 1;

gid  | name         | area
-----+--------------+------------------
12   | SPALLUMCHEEN | 257374619.430216
(1 row)</pre></td></tr></tbody></table></div></div></div></div><div class="chapter" title="Chapter 5. Raster Data Management, Queries, and Applications"><div class="titlepage"><div><div><h2 class="title"><a name="using_raster_dataman"></a>Chapter 5. Raster Data Management, Queries, and Applications</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#RT_Loading_Rasters">5.1. Loading and Creating Rasters</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_Raster_Loader">5.1.1. Using raster2pgsql to load rasters</a></span></dt><dt><span class="sect2"><a href="#RT_Creating_Rasters">5.1.2. Creating rasters using PostGIS raster functions</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Raster_Catalog">5.2. Raster Catalogs</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_Raster_Columns">5.2.1. Raster Columns Catalog</a></span></dt><dt><span class="sect2"><a href="#RT_Raster_Overviews">5.2.2. Raster Overviews</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Raster_Applications">5.3. Building Custom Applications with PostGIS Raster</a></span></dt><dd><dl><dt><span class="sect2"><a href="#RT_PHP_Output">5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Net_Output_CS">5.3.2. ASP.NET C# Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Java_Console_App">5.3.3. Java console app that outputs raster query as Image file</a></span></dt><dt><span class="sect2"><a href="#RT_PLPython">5.3.4. Use PLPython to dump out images via SQL</a></span></dt><dt><span class="sect2"><a href="#RasterOutput_PSQL">5.3.5. Outputting Rasters with PSQL</a></span></dt></dl></dd></dl></div><div class="sect1" title="5.1. Loading and Creating Rasters"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RT_Loading_Rasters"></a>5.1. Loading and Creating Rasters</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#RT_Raster_Loader">5.1.1. Using raster2pgsql to load rasters</a></span></dt><dt><span class="sect2"><a href="#RT_Creating_Rasters">5.1.2. Creating rasters using PostGIS raster functions</a></span></dt></dl></div><p>For most use cases, you will create PostGIS rasters by loading existing raster files using the packaged <code class="varname">raster2pgsql</code> raster loader.</p><div class="sect2" title="5.1.1. Using raster2pgsql to load rasters"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Raster_Loader"></a>5.1.1. Using raster2pgsql to load rasters</h3></div></div></div><p>
        The <code class="varname">raster2pgsql</code> is a raster loader executable that loads GDAL supported raster formats into sql suitable for loading into a PostGIS raster table.
        It is capable of loading folders of raster files as well as creating overviews of rasters. </p><p>Since the raster2pgsql is compiled as part of PostGIS most often (unless you compile your own GDAL library), the raster types supported
	by the executable will be the same as those compiled in the GDAL dependency library.  To get a list of raster types your particular raster2pgsql supports use the <code class="varname">-G</code> switch.  These should be the same as those provided by your PostGIS install documented here  <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> if you are using the same gdal library for both.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The older version of this tool was a python script.  The executable has replaced the python script.  If you still find the need for the Python script
        Examples of the python one can be found at <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html" target="_top">GDAL PostGIS Raster Driver Usage</a>.
        Please note that the raster2pgsql python script may not work with future versions of PostGIS raster and is no longer supported.
        </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>When creating overviews of a specific factor from a set of rasters that are aligned, it is possible for the overviews to not align.  Visit <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1764" target="_top">http://trac.osgeo.org/postgis/ticket/1764</a> for an example where the overviews do not align.</p></td></tr></table></div><p>EXAMPLE USAGE:
	</p><pre class="programlisting">raster2pgsql <code class="varname">raster_options_go_here</code> <code class="varname">raster_file</code> <code class="varname">someschema</code>.<code class="varname">sometable</code> &gt; out.sql</pre><p>
    </p><div class="variablelist"><dl><dt><span class="term">-?</span></dt><dd><p>
              Display help screen.  Help will also display if you don't pass in any arguments.
            </p></dd><dt><span class="term">-G</span></dt><dd><p>
             Print the supported raster formats.
            </p></dd><dt><span class="term">(c|a|d|p) These are mutually exclusive options:</span></dt><dd><p>
              </p><div class="variablelist"><dl><dt><span class="term">-c</span></dt><dd><p>
                      Create new table and populate it with raster(s), <span class="emphasis"><em>this is the default mode</em></span>
                    </p></dd><dt><span class="term">-a</span></dt><dd><p>
                      Append raster(s) to an existing table.
                    </p></dd><dt><span class="term">-d</span></dt><dd><p>
                      Drop table, create new one and populate it with raster(s)
                    </p></dd><dt><span class="term">-p</span></dt><dd><p>
                      Prepare mode, only create the table.
                    </p></dd></dl></div><p>
            </p></dd><dt><span class="term">Raster processing: Applying constraints for proper registering in raster catalogs</span></dt><dd><p>
					</p><div class="variablelist"><dl><dt><span class="term">-C </span></dt><dd><p>
									Apply raster constraints -- srid, pixelsize etc. to ensure raster is properly registered in <code class="varname">raster_columns</code> view.
								</p></dd><dt><span class="term">-x </span></dt><dd><p>
									Disable setting the max extent constraint.  Only applied if -C flag is also used.
								</p></dd><dt><span class="term">-r </span></dt><dd><p>
									Set the constraints (spatially unique and coverage tile) for regular blocking.  Only applied if -C flag is also used.
								</p></dd></dl></div><p>
				</p></dd><dt><span class="term">Raster processing: Optional parameters used to manipulate input raster dataset</span></dt><dd><p>
            </p><div class="variablelist"><dl><dt><span class="term">-s &lt;SRID&gt;</span></dt><dd><p>
                            Assign output raster with specified SRID.  If not provided or is zero, raster's metadata will be checked to determine an appropriate SRID.
                        </p></dd><dt><span class="term">-b BAND</span></dt><dd><p>
                           Index (1-based) of band to extract from raster.  For more than one band index, separate with comma (,).  If unspecified,
                           all bands of raster will be extracted.
                        </p></dd><dt><span class="term">-t TILE_SIZE</span></dt><dd><p>
                            Cut raster into tiles to be inserted one per table row.  <code class="varname">TILE_SIZE</code> is expressed as WIDTHxHEIGHT or set to the value "auto" to allow the loader to compute an appropriate tile size using the first raster and applied to all rasters.
                        </p></dd><dt><span class="term">-P</span></dt><dd><p>
                            Pad right-most and bottom-most tiles to guarantee that all tiles
                            have the same width and height.
                        </p></dd><dt><span class="term">-R, --register</span></dt><dd><p>Register the raster as a filesystem (out-db) raster.</p><p>Only the metadata of the raster and path location to the raster is stored in the database (not the pixels).</p></dd><dt><span class="term">-l <code class="varname">OVERVIEW_FACTOR</code></span></dt><dd><p>Create overview of the raster.  For more than
     one factor, separate with comma(,).  Overview table name follows
		 the pattern o_<code class="varname">overview factor</code>_<code class="varname">table</code>, where <code class="varname">overview factor</code> is a placeholder for numerical overview factor and <code class="varname">table</code> is replaced with the base table name.  Created overview is
     stored in the database and is not affected by -R. Note that your generated sql file will contain both the main table and overview tables.</p></dd><dt><span class="term">-N <code class="varname">NODATA</code></span></dt><dd><p>
											NODATA value to use on bands without a NODATA value.
										</p></dd></dl></div><p>
            </p></dd><dt><span class="term">Optional parameters used to manipulate database objects</span></dt><dd><p>
              </p><div class="variablelist"><dl><dt><span class="term">-q </span></dt><dd><p>Wrap PostgreSQL identifiers in quotes
                    </p></dd><dt><span class="term">-f COLUMN</span></dt><dd><p>Specify name of destination raster column, default is 'rast'
                    </p></dd><dt><span class="term">-F</span></dt><dd><p>Add a column with the name of the file</p></dd><dt><span class="term">-n COLUMN</span></dt><dd><p>Specify the name of the filename column. Implies -F.</p></dd><dt><span class="term">-q</span></dt><dd><p>Wrap PostgreSQL identifiers in quotes.</p></dd><dt><span class="term">-I</span></dt><dd><p>
                      Create a GiST index on the raster column.
                    </p></dd><dt><span class="term">-M</span></dt><dd><p>
                      Vacuum analyze the raster table.
                    </p></dd><dt><span class="term">-k</span></dt><dd><p>
                        Skip NODATA value checks for each raster band.
                    </p></dd><dt><span class="term">-T <code class="varname">tablespace</code></span></dt><dd><p>
                      Specify the tablespace for the new table.
     Note that indices (including the primary key) will still use
     the default tablespace unless the -X flag is also used.
                    </p></dd><dt><span class="term">-X <code class="varname">tablespace</code></span></dt><dd><p>
                      Specify the tablespace for the table's new index.
     This applies to the primary key and the spatial index if the
     -I flag is used.
                    </p></dd><dt><span class="term">-Y</span></dt><dd><p>
                      Use copy statements instead of insert statements.</p></dd></dl></div><p>
            </p></dd><dt><span class="term">-e</span></dt><dd><p>Execute each statement individually, do not use a transaction.</p></dd><dt><span class="term">-E ENDIAN</span></dt><dd><p>Control endianness of generated binary output of raster; specify 0 for XDR and 1 for NDR (default); only NDR output is supported now</p></dd><dt><span class="term">-V <code class="varname">version</code></span></dt><dd><p>Specify version of output format.  Default  is 0.  Only 0 is supported at this time.</p></dd></dl></div><p>An example session using the loader to create an input file and uploading it chunked in 100x100 tiles might look like this:</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>You can leave the schema name out e.g <code class="varname">demelevation</code> instead of <code class="varname">public.demelevation</code> and
    the raster table will be created in the default schema of the database or user</p></td></tr></table></div><pre class="programlisting">raster2pgsql -s 4326 -I -C -M *.tif -F -t 100x100 public.demelevation &gt; elev.sql
psql -d gisdb -f elev.sql</pre><p>A conversion and upload can be done all in one step using UNIX pipes:</p><pre class="programlisting">raster2pgsql -s 4326 -I -C -M *.tif -F -t 100x100 public.demelevation | psql -d gisdb</pre><p>Load rasters Massachusetts state plane meters aerial tiles
	into a schema called <code class="varname">aerial</code> and create a full view, 2 and 4 level overview tables, use copy mode for inserting (no intermediary file just straight to db), and -e don't force everything in a transaction (good if you want to see data in tables right away without waiting).  Break up the rasters into 128x128 pixel tiles and apply raster constraints. Use copy mode instead of table insert. (-F) Include a field called filename to hold the name of the file the tiles were cut from.</p><pre class="programlisting">raster2pgsql -I -C -e -Y -F -s 26986 -t 128x128  -l 2,4 bostonaerials2008/*.jpg aerials.boston | psql -U postgres -d gisdb -h localhost -p 5432</pre><pre class="programlisting">--get a list of raster types supported:
raster2pgsql -G</pre><p>The -G commands outputs a list something like </p><pre class="screen">
Available GDAL raster formats:
  Virtual Raster
  GeoTIFF
  National Imagery Transmission Format
  Raster Product Format TOC format
  ECRG TOC format
  Erdas Imagine Images (.img)
  CEOS SAR Image
  CEOS Image
  JAXA PALSAR Product Reader (Level 1.1/1.5)
  Ground-based SAR Applications Testbed File Format (.gff)
  ELAS
  Arc/Info Binary Grid
  Arc/Info ASCII Grid
  GRASS ASCII Grid
  SDTS Raster
  DTED Elevation Raster
  Portable Network Graphics
  JPEG JFIF
  In Memory Raster
  Japanese DEM (.mem)
  Graphics Interchange Format (.gif)
  Graphics Interchange Format (.gif)
  Envisat Image Format
  Maptech BSB Nautical Charts
  X11 PixMap Format
  MS Windows Device Independent Bitmap
  SPOT DIMAP
  AirSAR Polarimetric Image
  RadarSat 2 XML Product
  PCIDSK Database File
  PCRaster Raster File
  ILWIS Raster Map
  SGI Image File Format 1.0
  SRTMHGT File Format
  Leveller heightfield
  Terragen heightfield
  USGS Astrogeology ISIS cube (Version 3)
  USGS Astrogeology ISIS cube (Version 2)
  NASA Planetary Data System
  EarthWatch .TIL
  ERMapper .ers Labelled
  NOAA Polar Orbiter Level 1b Data Set
  FIT Image
  GRIdded Binary (.grb)
  Raster Matrix Format
  EUMETSAT Archive native (.nat)
  Idrisi Raster A.1
  Intergraph Raster
  Golden Software ASCII Grid (.grd)
  Golden Software Binary Grid (.grd)
  Golden Software 7 Binary Grid (.grd)
  COSAR Annotated Binary Matrix (TerraSAR-X)
  TerraSAR-X Product
  DRDC COASP SAR Processor Raster
  R Object Data Store
  Portable Pixmap Format (netpbm)
  USGS DOQ (Old Style)
  USGS DOQ (New Style)
  ENVI .hdr Labelled
  ESRI .hdr Labelled
  Generic Binary (.hdr Labelled)
  PCI .aux Labelled
  Vexcel MFF Raster
  Vexcel MFF2 (HKV) Raster
  Fuji BAS Scanner Image
  GSC Geogrid
  EOSAT FAST Format
  VTP .bt (Binary Terrain) 1.3 Format
  Erdas .LAN/.GIS
  Convair PolGASP
  Image Data and Analysis
  NLAPS Data Format
  Erdas Imagine Raw
  DIPEx
  FARSITE v.4 Landscape File (.lcp)
  NOAA Vertical Datum .GTX
  NADCON .los/.las Datum Grid Shift
  NTv2 Datum Grid Shift
  ACE2
  Snow Data Assimilation System
  Swedish Grid RIK (.rik)
  USGS Optional ASCII DEM (and CDED)
  GeoSoft Grid Exchange Format
  Northwood Numeric Grid Format .grd/.tab
  Northwood Classified Grid Format .grc/.tab
  ARC Digitized Raster Graphics
  Standard Raster Product (ASRP/USRP)
  Magellan topo (.blx)
  SAGA GIS Binary Grid (.sdat)
  Kml Super Overlay
  ASCII Gridded XYZ
  HF2/HFZ heightfield raster
  OziExplorer Image File
  USGS LULC Composite Theme Grid
  Arc/Info Export E00 GRID
  ZMap Plus Grid
  NOAA NGS Geoid Height Grids</pre></div><div class="sect2" title="5.1.2. Creating rasters using PostGIS raster functions"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Creating_Rasters"></a>5.1.2. Creating rasters using PostGIS raster functions</h3></div></div></div><p>On many occasions, you'll want to create rasters and raster tables right in the database.  There are a plethora of functions to do that.  The general steps to follow.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Create a table with a raster column to hold the new raster records which can be accomplished with:</p><pre class="programlisting">CREATE TABLE myrasters(rid serial primary key, rast raster);</pre></li><li class="listitem"><p>There are many functions to help with that goal.  If you are creating rasters not as a derivative of other rasters, you will want to start with:
				<a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>, followed by <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a></p><p>You can also create rasters from geometries.  To achieve that you'll want to use <a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> perhaps accompanied with
			other functions such as <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> or <a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> or any of the family of other map algebra functions.</p><p>There are even many more options for creating new raster tables from existing tables.  For example you can create a raster table in a different projection from an existing one using <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> </p></li><li class="listitem"><p>Once you are done populating your table initially, you'll want to create a spatial index on the raster column with something like:</p><pre class="programlisting">CREATE INDEX myrasters_rast_st_convexhull_idx ON myrasters USING gist( ST_ConvexHull(rast) );</pre><p>Note the use of <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> since most raster operators are based on the convex hull of the rasters.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Pre-2.0 versions of PostGIS raster were based on the envelop rather than the convex hull.  For the spatial indexes to work properly you'll need to drop those and replace with convex hull based index.</p></td></tr></table></div></li><li class="listitem"><p>Apply raster constraints using <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a></p></li></ol></div></div></div><div class="sect1" title="5.2. Raster Catalogs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RT_Raster_Catalog"></a>5.2. Raster Catalogs</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#RT_Raster_Columns">5.2.1. Raster Columns Catalog</a></span></dt><dt><span class="sect2"><a href="#RT_Raster_Overviews">5.2.2. Raster Overviews</a></span></dt></dl></div><p>There are two raster catalog views that come packaged with PostGIS.  Both views utilize information embedded in the constraints of the raster tables.  As a result
		the catalog views are always consistent with the raster data in the tables since the constraints are enforced. </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">raster_columns</code> this view catalogs all the raster table columns in your database.</p></li><li class="listitem"><p><code class="varname">raster_overviews</code> this view catalogs all the raster table columns in your database that serve as overviews for a finer grained table.  Tables of this type are generated when you use the <code class="varname">-l</code> switch during load.</p></li></ol></div><div class="sect2" title="5.2.1. Raster Columns Catalog"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Raster_Columns"></a>5.2.1. Raster Columns Catalog</h3></div></div></div><p>The <code class="varname">raster_columns</code> is a catalog of all raster table columns in your database that are of type raster.  It is a view utilizing the constraints on the tables
	so the information is always consistent even if you restore one raster table from a backup of another database.  The following columns exist in the <code class="varname">raster_columns</code> catalog.</p><p>If you created your tables not with the loader or forgot to specify the <code class="varname">-C</code> flag during load, you can enforce the constraints after the
	fact using <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> so that the <code class="varname">raster_columns</code> catalog registers the common information about your raster tiles.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">r_table_catalog</code> The database the table is in.  This will always read the current database.</p></li><li class="listitem"><p><code class="varname">r_table_schema</code> The database schema the raster table belongs to.</p></li><li class="listitem"><p><code class="varname">r_table_name</code> raster table</p></li><li class="listitem"><p><code class="varname">r_raster_column</code> the column in the <code class="varname">r_table_name</code> table that is of type raster.  There is nothing in PostGIS preventing you from having multiple raster columns per table so its possible to have a raster table listed multiple times with a different raster column for each.</p></li><li class="listitem"><p><code class="varname">srid</code> The spatial reference identifier of the raster.  Should be an entry in the <a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>.</p></li><li class="listitem"><p><code class="varname">scale_x</code> The scaling between geometric spatial coordinates and pixel.  This is only available if all tiles in the raster column have the same <code class="varname">scale_x</code> and this constraint is applied. Refer to <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a> for more details.</p></li><li class="listitem"><p><code class="varname">scale_y</code> The scaling between geometric spatial coordinates and pixel.  This is only available if all tiles in the raster column have the same <code class="varname">scale_y</code> and the <code class="varname">scale_y</code> constraint is applied. Refer to <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a> for more details.</p></li><li class="listitem"><p><code class="varname">blocksize_x</code> The width (number of pixels across) of each raster tile . Refer to <a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a> for more details.</p></li><li class="listitem"><p><code class="varname">blocksize_y</code> The width (number of pixels down) of each raster tile . Refer to <a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a> for more details.</p></li><li class="listitem"><p><code class="varname">same_alignment</code> A boolean that is true if all the raster tiles have the same alignment . Refer to <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> for more details.</p></li><li class="listitem"><p><code class="varname">regular_blocking</code> If the raster column has the spatially unique and coverage tile constraints, the value with be TRUE.  Otherwise, it will be FALSE.</p></li><li class="listitem"><p><code class="varname">num_bands</code> The number of bands in each tile of your raster set.  This is the same information as what is provided by <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></li><li class="listitem"><p><code class="varname">pixel_types</code> An array defining the pixel type for each band.  You will have the same number of elements in this array as you have number of bands.  The pixel_types are one of the following defined in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>.</p></li><li class="listitem"><p><code class="varname">nodata_values</code> An array of double precision numbers denoting the <code class="varname">nodata_value</code> for each band.  You will have the same number of elements in this array as you have number of bands. These numbers define the pixel value for each band that should be ignored for most operations.  This is similar information provided by <a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>.</p></li><li class="listitem"><p><code class="varname">out_db</code> An array of boolean flags indicating if the raster bands data is maintained outside the database. You will have the same number of elements in this array as you have number of bands.</p></li><li class="listitem"><p><code class="varname">extent</code> This is the extent of all the raster rows in your raster set. If you plan to load more data that will change the extent of the set, you'll want to run the <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> function before load and then reapply constraints with <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> after load. </p></li><li class="listitem"><p><code class="varname">spatial_index</code> A boolean that is true if raster column has a spatial index.</p></li></ul></div></div><div class="sect2" title="5.2.2. Raster Overviews"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Raster_Overviews"></a>5.2.2. Raster Overviews</h3></div></div></div><p><code class="varname">raster_overviews</code> catalogs information about raster table columns used for overviews and additional information about them that is useful to know when utilizing overviews. Overview tables are cataloged in both <code class="varname">raster_columns</code> and <code class="varname">raster_overviews</code> because they are rasters in their own right but also serve an additional special purpose of being a lower resolution caricature of a higher resolution table. These are generated along-side the main raster table when you use the <code class="varname">-l</code> switch in raster loading or can be generated manually using <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>.</p><p>Overview tables contain the same constraints as other raster tables as well as additional informational only constraints specific to overviews.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The information in <code class="varname">raster_overviews</code> does not duplicate the information in <code class="varname">raster_columns</code>.  If you need the information about an overview table present in <code class="varname">raster_columns</code> you can join the <code class="varname">raster_overviews</code> and <code class="varname">raster_columns</code> together to get the full set of information you need.</p></td></tr></table></div><p>Two main reasons for overviews are:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Low resolution representation of the core tables commonly used for fast mapping zoom-out.</p></li><li class="listitem"><p>Computations are generally faster to do on them than their higher resolution parents because there are fewer records and each pixel covers more territory.  Though the computations are not as accurate as the high-res tables they support, they can be sufficient in many rule-of-thumb computations.</p></li></ol></div><p>The <code class="varname">raster_overviews</code> catalog contains the following columns of information.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">o_table_catalog</code> The database the overview table is in.  This will always read the current database.</p></li><li class="listitem"><p><code class="varname">o_table_schema</code> The database schema the overview raster table belongs to.</p></li><li class="listitem"><p><code class="varname">o_table_name</code> raster overview table name</p></li><li class="listitem"><p><code class="varname">o_raster_column</code> the raster column in the overview table.</p></li><li class="listitem"><p><code class="varname">r_table_catalog</code> The database the raster table that this overview services is in.  This will always read the current database.</p></li><li class="listitem"><p><code class="varname">r_table_schema</code> The database schema the raster table that this overview services belongs to.</p></li><li class="listitem"><p><code class="varname">r_table_name</code> raster table that this overview services.</p></li><li class="listitem"><p><code class="varname">r_raster_column</code> the raster column that this overview column services.</p></li><li class="listitem"><p><code class="varname">overview_factor</code> - this is the pyramid level of the overview table.  The higher the number the lower the resolution of the table.
					raster2pgsql if given a folder of images, will compute overview of each image file and load separately.  Level 1 is assumed and always the original file. Level 2 is
					will have each tile represent 4 of the original.  So for example if you have a folder of 5000x5000 pixel image files that you chose to chunk 125x125, for each image file your base table will
						have (5000*5000)/(125*125) records = 1600, your (l=2) <code class="varname">o_2</code> table will have ceiling(1600/Power(2,2)) = 400 rows, your (l=3) <code class="varname">o_3</code> will have ceiling(1600/Power(2,3) ) = 200 rows.
						If your pixels aren't divisible by the size of your tiles, you'll get some scrap tiles (tiles not completely filled).  Note that each overview tile generated by raster2pgsql has the same number of
						pixels as its parent, but is of a lower resolution where each pixel of it represents (Power(2,overview_factor) pixels of the original).</p></li></ul></div></div></div><div class="sect1" title="5.3. Building Custom Applications with PostGIS Raster"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RT_Raster_Applications"></a>5.3. Building Custom Applications with PostGIS Raster</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#RT_PHP_Output">5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Net_Output_CS">5.3.2. ASP.NET C# Example Outputting using ST_AsPNG in concert with other raster functions</a></span></dt><dt><span class="sect2"><a href="#RT_Java_Console_App">5.3.3. Java console app that outputs raster query as Image file</a></span></dt><dt><span class="sect2"><a href="#RT_PLPython">5.3.4. Use PLPython to dump out images via SQL</a></span></dt><dt><span class="sect2"><a href="#RasterOutput_PSQL">5.3.5. Outputting Rasters with PSQL</a></span></dt></dl></div><p>The fact that PostGIS raster provides you with SQL functions to render rasters in known image formats gives  you a lot of optoins for rendering them.
		For example you can use OpenOffice / LibreOffice for rendering as demonstrated in <a class="ulink" href="http://www.postgresonline.com/journal/archives/244-Rendering-PostGIS-Raster-graphics-with-LibreOffice-Base-Reports.html" target="_top">Rendering PostGIS Raster graphics with LibreOffice Base Reports</a>.  In addition you can use a wide variety of languages as demonstrated in this section.</p><div class="sect2" title="5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions"><div class="titlepage"><div><div><h3 class="title"><a name="RT_PHP_Output"></a>5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions</h3></div></div></div><p>In this section, we'll demonstrate how to use the PHP PostgreSQL driver and the <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> family of functions to
				output band 1,2,3 of a raster to a PHP request stream that can then be embedded in an img src html tag.</p><p>The sample query demonstrates how to combine a whole bunch of raster functions together to grab all tiles that intersect
				a particular wgs 84 bounding box and then unions with <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> the intersecting tiles together returning all bands, transforms to user specified projection using <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>,
				and then outputs the results as a png using <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>.</p><p>You would call the below using </p><pre class="programlisting">http://mywebserver/test_raster.php?srid=2249</pre><p> to get the raster image in Massachusetts state plane feet.</p><pre class="programlisting">
&lt;?php
/** contents of test_raster.php **/
$conn_str ='dbname=mydb host=localhost port=5432 user=myuser password=mypwd';
$dbconn = pg_connect($conn_str);
header('Content-Type: image/png');
/**If a particular projection was requested use it otherwise use mass state plane meters **/
if (!empty( $_REQUEST['srid'] ) &amp;&amp; is_numeric( $_REQUEST['srid']) ){
		$input_srid = intval($_REQUEST['srid']);
}
else { $input_srid = 26986; }
/** The set bytea_output may be needed for PostgreSQL 9.0+, but not for 8.4 **/
$sql = "set bytea_output='escape';
SELECT ST_AsPNG(ST_Transform(
			ST_AddBand(ST_Union(rast,1), ARRAY[ST_Union(rast,2),ST_Union(rast,3)])
				,$input_srid) ) As new_rast
 FROM aerials.boston
	WHERE
	 ST_Intersects(rast, ST_Transform(ST_MakeEnvelope(-71.1217, 42.227, -71.1210, 42.218,4326),26986) )";
$result = pg_query($sql);
$row = pg_fetch_row($result);
pg_free_result($result);
if ($row === false) return;
echo pg_unescape_bytea($row[0]);
?&gt;</pre></div><div class="sect2" title="5.3.2. ASP.NET C# Example Outputting using ST_AsPNG in concert with other raster functions"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Net_Output_CS"></a>5.3.2. ASP.NET C# Example Outputting using ST_AsPNG in concert with other raster functions</h3></div></div></div><p>In this section, we'll demonstrate how to use Npgsql PostgreSQL .NET driver and the <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> family of functions to
				output band 1,2,3 of a raster to a PHP request stream that can then be embedded in an img src html tag.</p><p>You will need the npgsql .NET PostgreSQL driver for this exercise which you can get the latest of from <a class="ulink" href="http://npgsql.projects.postgresql.org/" target="_top">http://npgsql.projects.postgresql.org/</a>.  Just download the latest and drop into your ASP.NET bin folder and you'll be good to go.</p><p>The sample query demonstrates how to combine a whole bunch of raster functions together to grab all tiles that intersect
				a particular wgs 84 bounding box and then unions with <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a> the intersecting tiles together returning all bands, transforms to user specified projection using <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>,
				and then outputs the results as a png using <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>.</p><p>This is same example as <a class="xref" href="#RT_PHP_Output" title="5.3.1. PHP Example Outputting using ST_AsPNG in concert with other raster functions">Section 5.3.1, “PHP Example Outputting using ST_AsPNG in concert with other raster functions”</a> except implemented in C#.</p><p>You would call the below using </p><pre class="programlisting">http://mywebserver/TestRaster.ashx?srid=2249</pre><p> to get the raster image in Massachusetts state plane feet.</p><pre class="programlisting"> -- web.config connection string section --
&lt;connectionStrings&gt;
    &lt;add name="DSN"
        connectionString="server=localhost;database=mydb;Port=5432;User Id=myuser;password=mypwd"/&gt;
&lt;/connectionStrings&gt;</pre><pre class="programlisting">// Code for TestRaster.ashx
&lt;%@ WebHandler Language="C#" Class="TestRaster" %&gt;
using System;
using System.Data;
using System.Web;
using Npgsql;

public class TestRaster : IHttpHandler
{
	public void ProcessRequest(HttpContext context)
	{

		context.Response.ContentType = "image/png";
		context.Response.BinaryWrite(GetResults(context));

	}

	public bool IsReusable {
		get { return false; }
	}

	public byte[] GetResults(HttpContext context)
	{
		byte[] result = null;
		NpgsqlCommand command;
		string sql = null;
		int input_srid = 26986;
        try {
		    using (NpgsqlConnection conn = new NpgsqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["DSN"].ConnectionString)) {
			    conn.Open();

                if (context.Request["srid"] != null)
                {
                    input_srid = Convert.ToInt32(context.Request["srid"]);
                }
                sql = @"SELECT ST_AsPNG(
                            ST_Transform(
			                ST_AddBand(
                                ST_Union(rast,1), ARRAY[ST_Union(rast,2),ST_Union(rast,3)])
				                    ,:input_srid) ) As new_rast
                        FROM aerials.boston
	                        WHERE
	                            ST_Intersects(rast,
                                    ST_Transform(ST_MakeEnvelope(-71.1217, 42.227, -71.1210, 42.218,4326),26986) )";
			    command = new NpgsqlCommand(sql, conn);
                command.Parameters.Add(new NpgsqlParameter("input_srid", input_srid));


			    result = (byte[]) command.ExecuteScalar();
                conn.Close();
			}

		}
        catch (Exception ex)
        {
            result = null;
            context.Response.Write(ex.Message.Trim());
        }
		return result;
	}
}</pre></div><div class="sect2" title="5.3.3. Java console app that outputs raster query as Image file"><div class="titlepage"><div><div><h3 class="title"><a name="RT_Java_Console_App"></a>5.3.3. Java console app that outputs raster query as Image file</h3></div></div></div><p>This is a simple java console app that takes a query that returns one image and outputs to specified file.</p><p>You can download the latest PostgreSQL JDBC drivers from <a class="ulink" href="http://jdbc.postgresql.org/download.html" target="_top">http://jdbc.postgresql.org/download.html</a> </p><p>You can compile the following code using a command something like:</p><pre class="programlisting">set env CLASSPATH .:..\postgresql-9.0-801.jdbc4.jar
javac SaveQueryImage.java
jar cfm SaveQueryImage.jar Manifest.txt *.class</pre><p>And call it from the command-line with something like</p><pre class="programlisting">java -jar SaveQueryImage.jar "SELECT ST_AsPNG(ST_AsRaster(ST_Buffer(ST_Point(1,5),10, 'quad_segs=2'),150, 150, '8BUI',100));" "test.png" </pre><pre class="programlisting"> -- Manifest.txt --
Class-Path: postgresql-9.0-801.jdbc4.jar
Main-Class: SaveQueryImage</pre><pre class="programlisting">// Code for SaveQueryImage.java
import java.sql.Connection;
import java.sql.SQLException;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.io.*;

public class SaveQueryImage {
  public static void main(String[] argv) {
      System.out.println("Checking if Driver is registered with DriverManager.");

      try {
        //java.sql.DriverManager.registerDriver (new org.postgresql.Driver());
        Class.forName("org.postgresql.Driver");
      }
      catch (ClassNotFoundException cnfe) {
        System.out.println("Couldn't find the driver!");
        cnfe.printStackTrace();
        System.exit(1);
      }

      Connection conn = null;

      try {
        conn = DriverManager.getConnection("jdbc:postgresql://localhost:5432/mydb","myuser", "mypwd");
        conn.setAutoCommit(false);

        PreparedStatement sGetImg = conn.prepareStatement(argv[0]);

        ResultSet rs = sGetImg.executeQuery();

		FileOutputStream fout;
		try
		{
			rs.next();
			/** Output to file name requested by user **/
			fout = new FileOutputStream(new File(argv[1]) );
			fout.write(rs.getBytes(1));
			fout.close();
		}
		catch(Exception e)
		{
			System.out.println("Can't create file");
			e.printStackTrace();
		}

        rs.close();
		sGetImg.close();
        conn.close();
      }
      catch (SQLException se) {
        System.out.println("Couldn't connect: print out a stack trace and exit.");
        se.printStackTrace();
        System.exit(1);
      }
  }
}</pre></div><div class="sect2" title="5.3.4. Use PLPython to dump out images via SQL"><div class="titlepage"><div><div><h3 class="title"><a name="RT_PLPython"></a>5.3.4. Use PLPython to dump out images via SQL</h3></div></div></div><p>This is a plpython stored function that creates a file in the server directory for each record.
			Requires you have plpython installed.  Should work fine with both plpythonu and plpython3u.</p><pre class="programlisting">CREATE OR REPLACE FUNCTION write_file (param_bytes bytea, param_filepath text)
RETURNS text
AS $$
f = open(param_filepath, 'wb+')
f.write(param_bytes)
return param_filepath
$$ LANGUAGE plpythonu;</pre><pre class="programlisting">--write out 5 images to the PostgreSQL server in varying sizes
-- note the postgresql daemon account needs to have write access to folder
-- this echos back the file names created;
 SELECT write_file(ST_AsPNG(
	ST_AsRaster(ST_Buffer(ST_Point(1,5),j*5, 'quad_segs=2'),150*j, 150*j, '8BUI',100)),
	 'C:/temp/slices'|| j || '.png')
	 FROM generate_series(1,5) As j;

     write_file
---------------------
 C:/temp/slices1.png
 C:/temp/slices2.png
 C:/temp/slices3.png
 C:/temp/slices4.png
 C:/temp/slices5.png
</pre></div><div class="sect2" title="5.3.5. Outputting Rasters with PSQL"><div class="titlepage"><div><div><h3 class="title"><a name="RasterOutput_PSQL"></a>5.3.5. Outputting Rasters with PSQL</h3></div></div></div><p>Sadly PSQL doesn't have easy to use built-in functionality for outputting binaries.  This is a bit of a hack that piggy backs on PostgreSQL somewhat legacy large object support.  To use first launch your psql commandline connected to your database.
			</p><p>Unlike the python approach, this approach creates the file on your local computer.</p><pre class="screen">SELECT oid, lowrite(lo_open(oid, 131072), png) As num_bytes
 FROM
 ( VALUES (lo_create(0),
   ST_AsPNG( (SELECT rast FROM aerials.boston WHERE rid=1) )
  ) ) As v(oid,png);
-- you'll get an output something like --
   oid   | num_bytes
---------+-----------
 2630819 |     74860

-- next note the oid and do this replacing the c:/test.png to file path location
-- on your local computer
 \lo_export 2630819 'C:/temp/aerial_samp.png'

-- this deletes the file from large object storage on db
SELECT lo_unlink(2630819);
			</pre></div></div></div><div class="chapter" title="Chapter 6. Using PostGIS Geometry: Building Applications"><div class="titlepage"><div><div><h2 class="title"><a name="idp67662544"></a>Chapter 6. Using PostGIS Geometry: Building Applications</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Using_MapServer">6.1. Using MapServer</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67704528">6.1.1. Basic Usage</a></span></dt><dt><span class="sect2"><a href="#idp67724624">6.1.2. Frequently Asked Questions</a></span></dt><dt><span class="sect2"><a href="#idp67741008">6.1.3. Advanced Usage</a></span></dt><dt><span class="sect2"><a href="#idp67749712">6.1.4. Examples</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp67756112">6.2. Java Clients (JDBC)</a></span></dt><dt><span class="sect1"><a href="#idp67759056">6.3. C Clients (libpq)</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67760080">6.3.1. Text Cursors</a></span></dt><dt><span class="sect2"><a href="#idp67683536">6.3.2. Binary Cursors</a></span></dt></dl></dd></dl></div><div class="sect1" title="6.1. Using MapServer"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Using_MapServer"></a>6.1. Using MapServer</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp67704528">6.1.1. Basic Usage</a></span></dt><dt><span class="sect2"><a href="#idp67724624">6.1.2. Frequently Asked Questions</a></span></dt><dt><span class="sect2"><a href="#idp67741008">6.1.3. Advanced Usage</a></span></dt><dt><span class="sect2"><a href="#idp67749712">6.1.4. Examples</a></span></dt></dl></div><p>The Minnesota MapServer is an internet web-mapping server which
    conforms to the OpenGIS Web Mapping Server specification.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The MapServer homepage is at <a class="ulink" href="http://mapserver.org" target="_top">http://mapserver.org</a>.</p></li><li class="listitem"><p>The OpenGIS Web Map Specification is at <a class="ulink" href="http://www.opengeospatial.org/standards/wms" target="_top">http://www.opengeospatial.org/standards/wms</a>.</p></li></ul></div><div class="sect2" title="6.1.1. Basic Usage"><div class="titlepage"><div><div><h3 class="title"><a name="idp67704528"></a>6.1.1. Basic Usage</h3></div></div></div><p>To use PostGIS with MapServer, you will need to know about how to
      configure MapServer, which is beyond the scope of this documentation.
      This section will cover specific PostGIS issues and configuration
      details.</p><p>To use PostGIS with MapServer, you will need:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Version 0.6 or newer of PostGIS.</p></li><li class="listitem"><p>Version 3.5 or newer of MapServer.</p></li></ul></div><p>MapServer accesses PostGIS/PostgreSQL data like any other
      PostgreSQL client -- using the <code class="filename">libpq</code> interface. This means that
      MapServer can be installed on any machine with network access to the
      PostGIS server, and use PostGIS as a source of data. The faster the connection
      between the systems, the better.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Compile and install MapServer, with whatever options you
          desire, including the "--with-postgis" configuration option.</p></li><li class="listitem"><p>In your MapServer map file, add a PostGIS layer. For
          example:</p><pre class="programlisting">LAYER
  CONNECTIONTYPE postgis
  NAME "widehighways"
  # Connect to a remote spatial database
  CONNECTION "user=dbuser dbname=gisdatabase host=bigserver"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  # Get the lines from the 'geom' column of the 'roads' table
  DATA "geom from roads using srid=4326 using unique gid"
  STATUS ON
  TYPE LINE
  # Of the lines in the extents, only render the wide highways
  FILTER "type = 'highway' and numlanes &gt;= 4"
  CLASS
    # Make the superhighways brighter and 2 pixels wide
    EXPRESSION ([numlanes] &gt;= 6)
    STYLE
      COLOR 255 22 22
      WIDTH 2
    END
  END
  CLASS
    # All the rest are darker and only 1 pixel wide
    EXPRESSION ([numlanes] &lt; 6)
    STYLE
      COLOR 205 92 82
    END
  END
END</pre><p>In the example above, the PostGIS-specific directives are as
          follows:</p><div class="variablelist"><dl><dt><span class="term">CONNECTIONTYPE</span></dt><dd><p>For PostGIS layers, this is always "postgis".</p></dd><dt><span class="term">CONNECTION</span></dt><dd><p>The database connection is governed by the a 'connection
                string' which is a standard set of keys and values like this
                (with the default values in &lt;&gt;):</p><p>user=&lt;username&gt; password=&lt;password&gt;
                dbname=&lt;username&gt; hostname=&lt;server&gt;
                port=&lt;5432&gt;</p><p>An empty connection string is still valid, and any of
                the key/value pairs can be omitted. At a minimum you will
                generally supply the database name and username to connect
                with.</p></dd><dt><span class="term">DATA</span></dt><dd><p>The form of this parameter is "&lt;geocolumn&gt; from
                &lt;tablename&gt; using srid=&lt;srid&gt; using unique &lt;primary key&gt;" where the column is the spatial column to
                be rendered to the map, the SRID is SRID used by the column and the primary key is the table primary key (or any
                other uniquely-valued column with an index).</p><p>You can omit the "using srid" and "using unique" clauses and MapServer will automatically determine the
                correct values if possible, but at the cost of running a few extra queries on the server for each map
                draw.</p></dd><dt><span class="term">PROCESSING</span></dt><dd><p>Putting in a CLOSE_CONNECTION=DEFER if you have multiple layers reuses existing connections instead of closing them.  This improves
					speed.  Refer to for <a class="ulink" href="http://blog.cleverelephant.ca/2008/10/mapserverpostgis-performance-tips.html" target="_top">MapServer PostGIS Performance Tips</a> for a more detailed explanation.  </p></dd><dt><span class="term">FILTER</span></dt><dd><p>The filter must be a valid SQL string corresponding to
                the logic normally following the "WHERE" keyword in a SQL
                query. So, for example, to render only roads with 6 or more
                lanes, use a filter of "num_lanes &gt;= 6".</p></dd></dl></div></li><li class="listitem"><p>In your spatial database, ensure you have spatial (GiST)
          indexes built for any the layers you will be drawing.</p><pre class="programlisting">CREATE INDEX [indexname] ON [tablename] USING GIST ( [geometrycolumn] );</pre></li><li class="listitem"><p>If you will be querying your layers using MapServer you will
          also need to use the "using unique" clause in your DATA statement.</p><p>MapServer requires unique identifiers for each spatial record
          when doing queries, and the PostGIS module of MapServer uses the
          unique value you specify in order to provide these unique
          identifiers. Using the table primary key is the best practice.</p></li></ol></div></div><div class="sect2" title="6.1.2. Frequently Asked Questions"><div class="titlepage"><div><div><h3 class="title"><a name="idp67724624"></a>6.1.2. Frequently Asked Questions</h3></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="idp67725264"></a><dl><dt>6.1.2.1. <a href="#idp67725520">When I use an EXPRESSION in my map file,
            the condition never returns as true, even though I know the values
            exist in my table.</a></dt><dt>6.1.2.2. <a href="#idp67728976">The FILTER I use for my Shape files is not working for my
            PostGIS table of the same data.</a></dt><dt>6.1.2.3. <a href="#idp67731408">My PostGIS layer draws much slower than my Shape file layer,
            is this normal?</a></dt><dt>6.1.2.4. <a href="#idp67734224">My PostGIS layer draws fine, but queries are really slow.
            What is wrong?</a></dt><dt>6.1.2.5. <a href="#idp67737936">Can I use "geography" columns (new in PostGIS 1.5) as a source for
            MapServer layers?</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="6.1.2.1."><td align="left" valign="top"><a name="idp67725520"></a><a name="idp67725776"></a><p><b>6.1.2.1.</b></p></td><td align="left" valign="top"><p>When I use an <code class="varname">EXPRESSION</code> in my map file,
            the condition never returns as true, even though I know the values
            exist in my table.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Unlike shape files, PostGIS field names have to be
            referenced in EXPRESSIONS using <span class="emphasis"><em>lower
            case</em></span>.</p><pre class="programlisting">EXPRESSION ([numlanes] &gt;= 6)</pre></td></tr><tr class="question" title="6.1.2.2."><td align="left" valign="top"><a name="idp67728976"></a><a name="idp67729232"></a><p><b>6.1.2.2.</b></p></td><td align="left" valign="top"><p>The FILTER I use for my Shape files is not working for my
            PostGIS table of the same data.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Unlike shape files, filters for PostGIS layers use SQL
            syntax (they are appended to the SQL statement the PostGIS
            connector generates for drawing layers in MapServer).</p><pre class="programlisting">FILTER "type = 'highway' and numlanes &gt;= 4"</pre></td></tr><tr class="question" title="6.1.2.3."><td align="left" valign="top"><a name="idp67731408"></a><a name="idp67731664"></a><p><b>6.1.2.3.</b></p></td><td align="left" valign="top"><p>My PostGIS layer draws much slower than my Shape file layer,
            is this normal?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>In general, the more features you are drawing into a given map,
            the more likely it is that PostGIS will be slower than Shape files.
            For maps with relatively few features (100s), PostGIS will often be faster.
            For maps with high feature density (1000s), PostGIS will always be slower.
            </p><p>If you are finding substantial draw performance problems, it
            is possible that you have not built a spatial index on your
            table.</p><pre class="programlisting">postgis# CREATE INDEX geotable_gix ON geotable USING GIST ( geocolumn );
postgis# VACUUM ANALYZE;</pre></td></tr><tr class="question" title="6.1.2.4."><td align="left" valign="top"><a name="idp67734224"></a><a name="idp67734480"></a><p><b>6.1.2.4.</b></p></td><td align="left" valign="top"><p>My PostGIS layer draws fine, but queries are really slow.
            What is wrong?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>For queries to be fast, you must have a unique key for your
            spatial table and you must have an index on that unique
            key.</p><p>You can specify what unique key for mapserver to use with
            the <code class="varname">USING UNIQUE</code> clause in your
            <code class="varname">DATA</code> line:</p><pre class="programlisting">DATA "geom FROM geotable USING UNIQUE gid"</pre></td></tr><tr class="question" title="6.1.2.5."><td align="left" valign="top"><a name="idp67737936"></a><a name="idp67738192"></a><p><b>6.1.2.5.</b></p></td><td align="left" valign="top"><p>Can I use "geography" columns (new in PostGIS 1.5) as a source for
            MapServer layers?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes! MapServer understands geography columns as being the same as
            geometry columns, but always using an SRID of 4326. Just make sure to include
            a "using srid=4326" clause in your <code class="varname">DATA</code> statement. Everything else
            works exactly the same as with geometry.</p><pre class="programlisting">DATA "geog FROM geogtable USING SRID=4326 USING UNIQUE gid"</pre></td></tr></tbody></table></div></div><div class="sect2" title="6.1.3. Advanced Usage"><div class="titlepage"><div><div><h3 class="title"><a name="idp67741008"></a>6.1.3. Advanced Usage</h3></div></div></div><p>The <code class="varname">USING</code> pseudo-SQL clause is used to add some
      information to help mapserver understand the results of more complex
      queries. More specifically, when either a view or a subselect is used as
      the source table (the thing to the right of "FROM" in a
      <code class="varname">DATA</code> definition) it is more difficult for mapserver
      to automatically determine a unique identifier for each row and also the
      SRID for the table. The <code class="varname">USING</code> clause can provide
      mapserver with these two pieces of information as follows:</p><pre class="programlisting">DATA "geom FROM (
  SELECT
    table1.geom AS geom,
    table1.gid AS gid,
    table2.data AS data
  FROM table1
  LEFT JOIN table2
  ON table1.id = table2.id
) AS new_table USING UNIQUE gid USING SRID=4326"</pre><div class="variablelist"><dl><dt><span class="term">USING UNIQUE &lt;uniqueid&gt;</span></dt><dd><p>MapServer requires a unique id for each row in order to
            identify the row when doing map queries. Normally it identifies
            the primary key from the system tables. However, views and subselects don't
            automatically have an known unique column. If you want to use MapServer's
            query functionality, you need to ensure your view
            or subselect includes a uniquely valued column, and declare it with <code class="varname">USING UNIQUE</code>.
            For example, you could explicitly select nee of the table's primary key
            values for this purpose, or any other column which is guaranteed
            to be unique for the result set.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>"Querying a Map" is the action of clicking on a map to ask
              for information about the map features in that location. Don't
              confuse "map queries" with the SQL query in a
              <code class="varname">DATA</code> definition.</p></td></tr></table></div></dd><dt><span class="term">USING SRID=&lt;srid&gt;</span></dt><dd><p>PostGIS needs to know which spatial referencing system is
            being used by the geometries in order to return the correct data
            back to MapServer. Normally it is possible to find this
            information in the "geometry_columns" table in the PostGIS
            database, however, this is not possible for tables which are
            created on the fly such as subselects and views. So the
            <code class="varname">USING SRID=</code> option allows the correct SRID to
            be specified in the <code class="varname">DATA</code> definition.</p></dd></dl></div></div><div class="sect2" title="6.1.4. Examples"><div class="titlepage"><div><div><h3 class="title"><a name="idp67749712"></a>6.1.4. Examples</h3></div></div></div><p>Lets start with a simple example and work our way up. Consider the
      following MapServer layer definition:</p><pre class="programlisting">LAYER
  CONNECTIONTYPE postgis
  NAME "roads"
  CONNECTION "user=theuser password=thepass dbname=thedb host=theserver"
  DATA "geom from roads"
  STATUS ON
  TYPE LINE
  CLASS
    STYLE
      COLOR 0 0 0
    END
  END
END</pre><p>This layer will display all the road geometries in the roads table
      as black lines.</p><p>Now lets say we want to show only the highways until we get zoomed
      in to at least a 1:100000 scale - the next two layers will achieve this
      effect:</p><pre class="programlisting">LAYER
  CONNECTIONTYPE postgis
  CONNECTION "user=theuser password=thepass dbname=thedb host=theserver"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "geom from roads"
  MINSCALE 100000
  STATUS ON
  TYPE LINE
  FILTER "road_type = 'highway'"
  CLASS
    COLOR 0 0 0
  END
END
LAYER
  CONNECTIONTYPE postgis
  CONNECTION "user=theuser password=thepass dbname=thedb host=theserver"
  PROCESSING "CLOSE_CONNECTION=DEFER"
  DATA "geom from roads"
  MAXSCALE 100000
  STATUS ON
  TYPE LINE
  CLASSITEM road_type
  CLASS
    EXPRESSION "highway"
    STYLE
      WIDTH 2
      COLOR 255 0 0
    END
  END
  CLASS
    STYLE
      COLOR 0 0 0
    END
  END
END</pre><p>The first layer is used when the scale is greater than 1:100000,
      and displays only the roads of type "highway" as black lines. The
      <code class="varname">FILTER</code> option causes only roads of type "highway" to
      be displayed.</p><p>The second layer is used when the scale is less than 1:100000, and
      will display highways as double-thick red lines, and other roads as
      regular black lines.</p><p>So, we have done a couple of interesting things using only
      MapServer functionality, but our <code class="varname">DATA</code> SQL statement
      has remained simple. Suppose that the name of the road is stored in
      another table (for whatever reason) and we need to do a join to get it
      and label our roads.</p><pre class="programlisting">LAYER
  CONNECTIONTYPE postgis
  CONNECTION "user=theuser password=thepass dbname=thedb host=theserver"
  DATA "geom FROM (SELECT roads.gid AS gid, roads.geom AS geom,
        road_names.name as name FROM roads LEFT JOIN road_names ON
        roads.road_name_id = road_names.road_name_id)
        AS named_roads USING UNIQUE gid USING SRID=4326"
  MAXSCALE 20000
  STATUS ON
  TYPE ANNOTATION
  LABELITEM name
  CLASS
    LABEL
      ANGLE auto
      SIZE 8
      COLOR 0 192 0
      TYPE truetype
      FONT arial
    END
  END
END</pre><p>This annotation layer adds green labels to all the roads when the
      scale gets down to 1:20000 or less. It also demonstrates how to use an
      SQL join in a <code class="varname">DATA</code> definition.</p></div></div><div class="sect1" title="6.2. Java Clients (JDBC)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp67756112"></a>6.2. Java Clients (JDBC)</h2></div></div></div><p>Java clients can access PostGIS "geometry" objects in the PostgreSQL
    database either directly as text representations or using the JDBC
    extension objects bundled with PostGIS. In order to use the extension
    objects, the "postgis.jar" file must be in your CLASSPATH along with the
    "postgresql.jar" JDBC driver package.</p><pre class="programlisting">import java.sql.*;
import java.util.*;
import java.lang.*;
import org.postgis.*;

public class JavaGIS {

public static void main(String[] args) {

  java.sql.Connection conn;

  try {
    /*
    * Load the JDBC driver and establish a connection.
    */
    Class.forName("org.postgresql.Driver");
    String url = "jdbc:postgresql://localhost:5432/database";
    conn = DriverManager.getConnection(url, "postgres", "");
    /*
    * Add the geometry types to the connection. Note that you
    * must cast the connection to the pgsql-specific connection
    * implementation before calling the addDataType() method.
    */
    ((org.postgresql.PGConnection)conn).addDataType("geometry",Class.forName("org.postgis.PGgeometry"));
    ((org.postgresql.PGConnection)conn).addDataType("box3d",Class.forName("org.postgis.PGbox3d"));
    /*
    * Create a statement and execute a select query.
    */
    Statement s = conn.createStatement();
    ResultSet r = s.executeQuery("select geom,id from geomtable");
    while( r.next() ) {
      /*
      * Retrieve the geometry as an object then cast it to the geometry type.
      * Print things out.
      */
      PGgeometry geom = (PGgeometry)r.getObject(1);
      int id = r.getInt(2);
      System.out.println("Row " + id + ":");
      System.out.println(geom.toString());
    }
    s.close();
    conn.close();
  }
catch( Exception e ) {
  e.printStackTrace();
  }
}
}</pre><p>The "PGgeometry" object is a wrapper object which contains a
    specific topological geometry object (subclasses of the abstract class
    "Geometry") depending on the type: Point, LineString, Polygon, MultiPoint,
    MultiLineString, MultiPolygon.</p><pre class="programlisting">PGgeometry geom = (PGgeometry)r.getObject(1);
if( geom.getType() == Geometry.POLYGON ) {
  Polygon pl = (Polygon)geom.getGeometry();
  for( int r = 0; r &lt; pl.numRings(); r++) {
    LinearRing rng = pl.getRing(r);
    System.out.println("Ring: " + r);
    for( int p = 0; p &lt; rng.numPoints(); p++ ) {
      Point pt = rng.getPoint(p);
      System.out.println("Point: " + p);
      System.out.println(pt.toString());
    }
  }
}</pre><p>The JavaDoc for the extension objects provides a reference for the
    various data accessor functions in the geometric objects.</p></div><div class="sect1" title="6.3. C Clients (libpq)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp67759056"></a>6.3. C Clients (libpq)</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp67760080">6.3.1. Text Cursors</a></span></dt><dt><span class="sect2"><a href="#idp67683536">6.3.2. Binary Cursors</a></span></dt></dl></div><p>...</p><div class="sect2" title="6.3.1. Text Cursors"><div class="titlepage"><div><div><h3 class="title"><a name="idp67760080"></a>6.3.1. Text Cursors</h3></div></div></div><p>...</p></div><div class="sect2" title="6.3.2. Binary Cursors"><div class="titlepage"><div><div><h3 class="title"><a name="idp67683536"></a>6.3.2. Binary Cursors</h3></div></div></div><p>...</p></div></div></div><div class="chapter" title="Chapter 7. Performance tips"><div class="titlepage"><div><div><h2 class="title"><a name="performance_tips"></a>Chapter 7. Performance tips</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#small_tables_large_objects">7.1. Small tables of large geometries</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67856592">7.1.1. Problem description</a></span></dt><dt><span class="sect2"><a href="#idp67859408">7.1.2. Workarounds</a></span></dt></dl></dd><dt><span class="sect1"><a href="#database_clustering">7.2. CLUSTERing on geometry indices</a></span></dt><dt><span class="sect1"><a href="#avoiding_dimension_conversion">7.3. Avoiding dimension conversion</a></span></dt><dt><span class="sect1"><a href="#database_tuning_configuration">7.4. Tuning your configuration</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp67873744">7.4.1. Startup</a></span></dt><dt><span class="sect2"><a href="#idp67883472">7.4.2. Runtime</a></span></dt></dl></dd></dl></div><div class="sect1" title="7.1. Small tables of large geometries"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="small_tables_large_objects"></a>7.1. Small tables of large geometries</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp67856592">7.1.1. Problem description</a></span></dt><dt><span class="sect2"><a href="#idp67859408">7.1.2. Workarounds</a></span></dt></dl></div><div class="sect2" title="7.1.1. Problem description"><div class="titlepage"><div><div><h3 class="title"><a name="idp67856592"></a>7.1.1. Problem description</h3></div></div></div><p>Current PostgreSQL versions (including 8.0) suffer from a query
      optimizer weakness regarding TOAST tables. TOAST tables are a kind of
      "extension room" used to store large (in the sense of data size) values
      that do not fit into normal data pages (like long texts, images or
      complex geometries with lots of vertices), see
      <a class="ulink" href="http://www.postgresql.org/docs/current/static/storage-toast.html" target="_top">the PostgreSQL Documentation for TOAST</a> for more
      information).</p><p>The problem appears if you happen to have a table with rather
      large geometries, but not too much rows of them (like a table containing
      the boundaries of all European countries in high resolution). Then the
      table itself is small, but it uses lots of TOAST space. In our example
      case, the table itself had about 80 rows and used only 3 data pages, but
      the TOAST table used 8225 pages.</p><p>Now issue a query where you use the geometry operator &amp;&amp;
      to search for a bounding box that matches only very few of those rows.
      Now the query optimizer sees that the table has only 3 pages and 80
      rows. He estimates that a sequential scan on such a small table is much
      faster than using an index. And so he decides to ignore the GIST index.
      Usually, this estimation is correct. But in our case, the &amp;&amp;
      operator has to fetch every geometry from disk to compare the bounding
      boxes, thus reading all TOAST pages, too.</p><p>To see whether your suffer from this bug, use the "EXPLAIN
      ANALYZE" postgresql command. For more information and the technical
      details, you can read the thread on the postgres performance mailing
      list:
      http://archives.postgresql.org/pgsql-performance/2005-02/msg00030.php</p></div><div class="sect2" title="7.1.2. Workarounds"><div class="titlepage"><div><div><h3 class="title"><a name="idp67859408"></a>7.1.2. Workarounds</h3></div></div></div><p>The PostgreSQL people are trying to solve this issue by making the
      query estimation TOAST-aware. For now, here are two workarounds:</p><p>The first workaround is to force the query planner to use the
      index. Send "SET enable_seqscan TO off;" to the server before issuing
      the query. This basically forces the query planner to avoid sequential
      scans whenever possible. So it uses the GIST index as usual. But this
      flag has to be set on every connection, and it causes the query planner
      to make misestimations in other cases, so you should "SET enable_seqscan
      TO on;" after the query.</p><p>The second workaround is to make the sequential scan as fast as
      the query planner thinks. This can be achieved by creating an additional
      column that "caches" the bbox, and matching against this. In our
      example, the commands are like:</p><pre class="programlisting">SELECT AddGeometryColumn('myschema','mytable','bbox','4326','GEOMETRY','2');
UPDATE mytable SET bbox = ST_Envelope(ST_Force2D(the_geom));</pre><p>Now change your query to use the &amp;&amp; operator against bbox
      instead of geom_column, like:</p><pre class="programlisting">SELECT geom_column
FROM mytable
WHERE bbox &amp;&amp; ST_SetSRID('BOX3D(0 0,1 1)'::box3d,4326);</pre><p>Of course, if you change or add rows to mytable, you have to keep
      the bbox "in sync". The most transparent way to do this would be
      triggers, but you also can modify your application to keep the bbox
      column current or run the UPDATE query above after every
      modification.</p></div></div><div class="sect1" title="7.2. CLUSTERing on geometry indices"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="database_clustering"></a>7.2. CLUSTERing on geometry indices</h2></div></div></div><p>For tables that are mostly read-only, and where a single index is
    used for the majority of queries, PostgreSQL offers the CLUSTER command.
    This command physically reorders all the data rows in the same order as
    the index criteria, yielding two performance advantages: First, for index
    range scans, the number of seeks on the data table is drastically reduced.
    Second, if your working set concentrates to some small intervals on the
    indices, you have a more efficient caching because the data rows are
    spread along fewer data pages. (Feel invited to read the CLUSTER command
    documentation from the PostgreSQL manual at this point.)</p><p>However, currently PostgreSQL does not allow clustering on PostGIS
    GIST indices because GIST indices simply ignores NULL values, you get an
    error message like:</p><pre class="programlisting">lwgeom=# CLUSTER my_geom_index ON my_table;
ERROR: cannot cluster when index access method does not handle null values
HINT: You may be able to work around this by marking column "the_geom" NOT NULL.</pre><p>As the HINT message tells you, one can work around this deficiency
    by adding a "not null" constraint to the table:</p><pre class="programlisting">lwgeom=# ALTER TABLE my_table ALTER COLUMN the_geom SET not null;
ALTER TABLE</pre><p>Of course, this will not work if you in fact need NULL values in
    your geometry column. Additionally, you must use the above method to add
    the constraint, using a CHECK constraint like "ALTER TABLE blubb ADD CHECK
    (geometry is not null);" will not work.</p></div><div class="sect1" title="7.3. Avoiding dimension conversion"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="avoiding_dimension_conversion"></a>7.3. Avoiding dimension conversion</h2></div></div></div><p>Sometimes, you happen to have 3D or 4D data in your table, but
    always access it using OpenGIS compliant ST_AsText() or ST_AsBinary()
    functions that only output 2D geometries. They do this by internally
    calling the ST_Force2D() function, which introduces a significant
    overhead for large geometries. To avoid this overhead, it may be feasible
    to pre-drop those additional dimensions once and forever:</p><pre class="programlisting">UPDATE mytable SET the_geom = ST_Force2D(the_geom);
VACUUM FULL ANALYZE mytable;</pre><p>Note that if you added your geometry column using
    AddGeometryColumn() there'll be a constraint on geometry dimension. To
    bypass it you will need to drop the constraint. Remember to update the
    entry in the geometry_columns table and recreate the constraint
    afterwards.</p><p>In case of large tables, it may be wise to divide this UPDATE into
    smaller portions by constraining the UPDATE to a part of the table via a
    WHERE clause and your primary key or another feasible criteria, and
    running a simple "VACUUM;" between your UPDATEs. This drastically reduces
    the need for temporary disk space. Additionally, if you have mixed
    dimension geometries, restricting the UPDATE by "WHERE
    dimension(the_geom)&gt;2" skips re-writing of geometries that already are
    in 2D.</p></div><div class="sect1" title="7.4. Tuning your configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="database_tuning_configuration"></a>7.4. Tuning your configuration</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#idp67873744">7.4.1. Startup</a></span></dt><dt><span class="sect2"><a href="#idp67883472">7.4.2. Runtime</a></span></dt></dl></div><p>Tuning for PostGIS is much like tuning for any PostgreSQL workload.  The only additional note to keep in mind is that
    geometries and rasters are heavy so memory related optimizations generally have more of an impact on PostGIS than other types of PostgreSQL queries.</p><p>For general details about optimizing PostgreSQL, refer to <a class="ulink" href="https://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server" target="_top">Tuning your PostgreSQL Server</a>.</p><p>For PostgreSQL 9.4+ all these can be set at the server level without touching postgresql.conf or postgresql.auto.conf
    by using the <code class="code">ALTER SYSTEM..</code> command.</p><pre class="programlisting">ALTER SYSTEM SET work_mem = '256MB';
-- this will force, non-startup configs to take effect for new connections
SELECT pg_reload_conf();
-- show current setting value
-- use SHOW ALL to see all settings
SHOW work_mem;</pre><p>In addition to these settings, PostGIS also has some custom settings which you can find listed in <a class="xref" href="#PostGIS_GUC" title="8.2. PostGIS Grand Unified Custom Variables (GUCs)">Section 8.2, “PostGIS Grand Unified Custom Variables (GUCs)”</a>.</p><div class="sect2" title="7.4.1. Startup"><div class="titlepage"><div><div><h3 class="title"><a name="idp67873744"></a>7.4.1. Startup</h3></div></div></div><p>
          These settings are configured in postgresql.conf:
        </p><p>
           <a class="ulink" href="http://www.postgresql.org/docs/current/static/runtime-config-query.html#GUC-CONSTRAINT-EXCLUSION" target="_top">constraint_exclusion</a>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: partition
            </p></li><li class="listitem"><p>
              This is generally used for table partitioning. The default for this is set to "partition" which is ideal for PostgreSQL 8.4 and above since
			  it will force the planner to only analyze tables for constraint consideration if they are in an inherited hierarchy
			  and not pay the planner penalty otherwise.
            </p></li></ul></div><p>
           <a class="ulink" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-SHARED-BUFFERS" target="_top">shared_buffers</a>
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: ~32MB
            </p></li><li class="listitem"><p>
              Set to about 1/3 to 3/4 of available RAM
            </p></li></ul></div><p>
          <a class="ulink" href="https://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAX-WORKER-PROCESSES" target="_top">max_worker_processes</a>
          This setting is only available for PostgreSQL 9.4+.  For PostgreSQL 9.6+ this setting has additional importance in that it controls the
          max number of processes you can have for parallel queries.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: 8
            </p></li><li class="listitem"><p>
              Sets the maximum number of background processes that
          the system can support. This parameter can only be set at
          server start.
            </p></li></ul></div></div><div class="sect2" title="7.4.2. Runtime"><div class="titlepage"><div><div><h3 class="title"><a name="idp67883472"></a>7.4.2. Runtime</h3></div></div></div><p>
          <a class="ulink" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-WORK-MEM" target="_top">work_mem</a> (the memory used for sort operations and complex queries)
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: 1-4MB
            </p></li><li class="listitem"><p>
              Adjust up for large dbs, complex queries, lots of RAM
            </p></li><li class="listitem"><p>
              Adjust down for many concurrent users or low RAM.
            </p></li><li class="listitem"><p>
                If you have lots of RAM and few developers:
                </p><pre class="programlisting">
                    SET work_mem TO '256MB';;
                </pre><p>
            </p></li></ul></div><p>
          <a class="ulink" href="http://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAINTENANCE-WORK-MEM" target="_top">maintenance_work_mem</a> (used for VACUUM, CREATE INDEX, etc.)
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: 16-64MB
            </p></li><li class="listitem"><p>
              Generally too low - ties up I/O, locks objects while swapping memory
            </p></li><li class="listitem"><p>
              Recommend 32MB to 1GB on production servers w/lots of RAM, but depends
              on the # of concurrent users.  If you have lots of RAM and few developers:
                </p><pre class="programlisting">
                   SET maintenance_work_mem TO '1GB';
                </pre><p>
            </p></li></ul></div><p>
          <a class="ulink" href="https://www.postgresql.org/docs/current/static/runtime-config-resource.html#GUC-MAX-PARALLEL-WORKERS-PER-GATHER" target="_top">max_parallel_workers_per_gather</a>
          This setting is only available for PostgreSQL 9.6+ and will only affect PostGIS 2.3+, since only PostGIS 2.3+ supports parallel queries.  
          If set to higher than 0, then some queries such as those involving relation functions like <code class="code">ST_Intersects</code> can use multiple processes and can run
          more than twice as fast when doing so.  If you have a lot of processors to spare, you should change the value of this to as many processors as you have.
          Also make sure to bump up <code class="code">max_worker_processes</code> to at least as high as this number.
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
              Default: 0
            </p></li><li class="listitem"><p>
              Sets the maximum number of workers that can be started
          by a single <code class="varname">Gather</code> node.
          Parallel workers are taken from the pool of processes
          established by <code class="varname">max_worker_processes</code>.
          Note that the requested number of workers may not
          actually be available at run time. If this occurs, the
          plan will run with fewer workers than expected, which may
          be inefficient. Setting this value to 0, which is the
          default, disables parallel query execution.
            </p></li></ul></div></div></div></div><div class="chapter" title="Chapter 8. PostGIS Reference"><div class="titlepage"><div><div><h2 class="title"><a name="reference"></a>Chapter 8. PostGIS Reference</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#PostGIS_Types">8.1. PostgreSQL PostGIS Geometry/Geography/Box Types</a></span></dt><dt><span class="sect1"><a href="#PostGIS_GUC">8.2. PostGIS Grand Unified Custom Variables (GUCs)</a></span></dt><dt><span class="sect1"><a href="#Management_Functions">8.3. Management Functions</a></span></dt><dt><span class="sect1"><a href="#Geometry_Constructors">8.4. Geometry Constructors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Accessors">8.5. Geometry Accessors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Editors">8.6. Geometry Editors</a></span></dt><dt><span class="sect1"><a href="#Geometry_Outputs">8.7. Geometry Outputs</a></span></dt><dt><span class="sect1"><a href="#Operators">8.8. Operators</a></span></dt><dt><span class="sect1"><a href="#Spatial_Relationships_Measurements">8.9. Spatial Relationships and Measurements</a></span></dt><dt><span class="sect1"><a href="#reference_sfcgal">8.10. SFCGAL Functions</a></span></dt><dt><span class="sect1"><a href="#Geometry_Processing">8.11. Geometry Processing</a></span></dt><dt><span class="sect1"><a href="#Linear_Referencing">8.12. Linear Referencing</a></span></dt><dt><span class="sect1"><a href="#Temporal">8.13. Temporal Support</a></span></dt><dt><span class="sect1"><a href="#Long_Transactions_Support">8.14. Long Transactions Support</a></span></dt><dt><span class="sect1"><a href="#Miscellaneous_Functions">8.15. Miscellaneous Functions</a></span></dt><dt><span class="sect1"><a href="#Exceptional_Functions">8.16. Exceptional Functions</a></span></dt></dl></div><p>The functions given below are the ones which a user of PostGIS is
  likely to need. There are other functions which are required support
  functions to the PostGIS objects which are not of use to a general
  user.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS has begun a transition from the existing naming convention
	to an SQL-MM-centric convention. As a result, most of the functions that
	you know and love have been renamed using the standard spatial type (ST)
	prefix. Previous functions are still available, though are not listed in
	this document where updated functions are equivalent. The non ST_ functions not listed in this documentation are
	deprecated and will be removed in a future release so STOP USING THEM.</p></td></tr></table></div><div class="sect1" title="8.1. PostgreSQL PostGIS Geometry/Geography/Box Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Types"></a>8.1. PostgreSQL PostGIS Geometry/Geography/Box Types</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL data types installed by PostGIS.  Note we describe the casting behavior of these which is very
	important especially when designing your own functions.
    </p><p>A Cast is when one type is coerced into another type.  PostgreSQL
	is unique from most databases in that it allows you to define casting behavior for custom types and the functions used for casting.
	A cast can be specified as automatic in which case, you do not have to do a CAST(myfoo As otherfootype) or myfoo::otherfootype
	if you are feeding it to a function that only works with otherfootype and there is an automatic cast in place for it.
    </p><p>The danger of relying on automatic cast behavior is when you have an overloaded function say one that takes a box2d and one that takes a box3d
	but no geometry.  What happens is that both functions are equally good to use with geometry since geometry has an autocast for both
	-- so you end up with an ambiguous function error. To force PostgreSQL to choose, you do a CAST(mygeom As box3d)  or mygeom::box3d.</p><p><span class="emphasis"><em>At least as of PostgreSQL 8.3</em></span> - Everything can be CAST to text (presumably because of the magical unknown type), so no defined CASTS for that need to be present for you to CAST an object to text.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#box2d_type">box2d</a></span><span class="refpurpose"> — A box composed of x min, ymin,  xmax, ymax.  Often used to return the 2d enclosing box of a geometry. </span></dt><dt><span class="refentrytitle"><a href="#box3d_type">box3d</a></span><span class="refpurpose"> — A box composed of x min, ymin, zmin, xmax, ymax, zmax.  Often used to return the 3d extent of a geometry or collection of geometries. </span></dt><dt><span class="refentrytitle"><a href="#geometry">geometry</a></span><span class="refpurpose"> — Planar spatial data type.</span></dt><dt><span class="refentrytitle"><a href="#geometry_dump">geometry_dump</a></span><span class="refpurpose"> — A spatial datatype with two fields - geom (holding a geometry object)
				and path[] (a 1-d array holding the position of the geometry within the dumped object.)</span></dt><dt><span class="refentrytitle"><a href="#geography">geography</a></span><span class="refpurpose"> — Ellipsoidal spatial data type.</span></dt></dl></div><div class="refentry" title="box2d"><a name="box2d_type"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>box2d — A box composed of x min, ymin,  xmax, ymax.  Often used to return the 2d enclosing box of a geometry. </p></div><div class="refsection" title="Description"><a name="idp67989328"></a><h2>Description</h2><p>box2d is a spatial data type used to represent the enclosing box of a geometry or set of geometries. ST_Extent in earlier versions prior to PostGIS 1.4 would return a box2d.</p></div></div><div class="refentry" title="box3d"><div class="refentry.separator"><hr></div><a name="box3d_type"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>box3d — A box composed of x min, ymin, zmin, xmax, ymax, zmax.  Often used to return the 3d extent of a geometry or collection of geometries. </p></div><div class="refsection" title="Description"><a name="idp67992144"></a><h2>Description</h2><p>box3d is a postgis spatial data type used to represent the enclosing box of a geometry or set of geometries. ST_3DExtent returns a box3d object.</p></div><div class="refsection" title="Casting Behavior"><a name="idp67993296"></a><h2>Casting Behavior</h2><p>This section lists the automatic as well as explicit casts allowed for this data type</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Cast To</td><td>Behavior</td></tr><tr><td>box</td><td>automatic</td></tr><tr><td>box2d</td><td>automatic</td></tr><tr><td>geometry</td><td>automatic</td></tr></tbody></table></div></div></div><div class="refentry" title="geometry"><div class="refentry.separator"><hr></div><a name="geometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>geometry — Planar spatial data type.</p></div><div class="refsection" title="Description"><a name="idp68002512"></a><h2>Description</h2><p>geometry is a fundamental postgis spatial data type used to represent a feature in the Euclidean coordinate system.</p></div><div class="refsection" title="Casting Behavior"><a name="idp68003792"></a><h2>Casting Behavior</h2><p>This section lists the automatic as well as explicit casts allowed for this data type</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Cast To</td><td>Behavior</td></tr><tr><td>box</td><td>automatic</td></tr><tr><td>box2d</td><td>automatic</td></tr><tr><td>box3d</td><td>automatic</td></tr><tr><td>bytea</td><td>automatic</td></tr><tr><td>geography</td><td>automatic</td></tr><tr><td>text</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp68014672"></a><h2>See Also</h2><p><a class="xref" href="#RefObject" title="4.1. GIS Objects">Section 4.1, “GIS Objects”</a></p></div></div><div class="refentry" title="geometry_dump"><div class="refentry.separator"><hr></div><a name="geometry_dump"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>geometry_dump — A spatial datatype with two fields - geom (holding a geometry object)
				and path[] (a 1-d array holding the position of the geometry within the dumped object.)</p></div><div class="refsection" title="Description"><a name="idp68017616"></a><h2>Description</h2><p>geometry_dump is a compound data type consisting of a geometry object referenced by the .geom field
			and path[] a 1-dimensional integer array (starting at 1 e.g. path[1] to get first element) array that defines the navigation path within the dumped geometry to find this element.
			It is used by the ST_Dump* family of functions as an output type to explode a more complex geometry into its
				constituent parts and location of parts.</p></div><div class="refsection" title="See Also"><a name="idp68018896"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions">Section 14.6, “PostGIS Geometry / Geography / Raster Dump Functions”</a> </p></div></div><div class="refentry" title="geography"><div class="refentry.separator"><hr></div><a name="geography"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>geography — Ellipsoidal spatial data type.</p></div><div class="refsection" title="Description"><a name="idp68021968"></a><h2>Description</h2><p>geography is a spatial data type used to represent a feature in the round-earth coordinate system.</p></div><div class="refsection" title="Casting Behavior"><a name="idp68023120"></a><h2>Casting Behavior</h2><p>This section lists the automatic as well as explicit casts allowed for this data type</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Cast To</td><td>Behavior</td></tr><tr><td>geometry</td><td>explicit</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp68028240"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_GeographyFunctions" title="14.4. PostGIS Geography Support Functions">Section 14.4, “PostGIS Geography Support Functions”</a>, <a class="xref" href="#PostGIS_Geography" title="4.2. PostGIS Geography Type">Section 4.2, “PostGIS Geography Type”</a></p></div></div></div><div class="sect1" title="8.2. PostGIS Grand Unified Custom Variables (GUCs)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_GUC"></a>8.2. PostGIS Grand Unified Custom Variables (GUCs)</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists custom PostGIS Grand Unified Custom Variables(GUC).  These can be set globally, by database, by session or by transaction. Best set at global or database level.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#postgis_backend">postgis.backend</a></span><span class="refpurpose"> — The backend to service a function where GEOS and SFCGAL overlap. Options: geos or sfcgal. Defaults to geos.</span></dt><dt><span class="refentrytitle"><a href="#postgis_gdal_datapath">postgis.gdal_datapath</a></span><span class="refpurpose"> — 
					A configuration option to assign the value of GDAL's GDAL_DATA option. If not set, the environmentally set GDAL_DATA variable is used.
				</span></dt><dt><span class="refentrytitle"><a href="#postgis_gdal_enabled_drivers">postgis.gdal_enabled_drivers</a></span><span class="refpurpose"> — 
					A configuration option to set the enabled GDAL drivers in the PostGIS environment. Affects the GDAL configuration variable GDAL_SKIP.
				</span></dt><dt><span class="refentrytitle"><a href="#postgis_enable_outdb_rasters">postgis.enable_outdb_rasters</a></span><span class="refpurpose"> — 
					A boolean configuration option to enable access to out-db raster bands.
				</span></dt></dl></div><div class="refentry" title="postgis.backend"><a name="postgis_backend"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>postgis.backend — The backend to service a function where GEOS and SFCGAL overlap. Options: geos or sfcgal. Defaults to geos.</p></div><div class="refsection" title="Description"><a name="idp68100048"></a><h2>Description</h2><p>This GUC is only relevant if you compiled PostGIS with sfcgal support.  By default <code class="varname">geos</code> backend is used for functions where both GEOS and SFCGAL have the same named function.  This variable allows you to override and make sfcgal the backend to service the request.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp68101968"></a><h2>Examples</h2><p>Sets backend just for life of connection</p><pre class="programlisting">set postgis.backend = sfcgal;</pre><p>Sets backend for new connections to database</p><pre class="programlisting">ALTER DATABASE mygisdb SET postgis.backend = sfcgal;</pre></div><div class="refsection" title="See Also"><a name="idp68104528"></a><h2>See Also</h2><p><a class="xref" href="#reference_sfcgal" title="8.10. SFCGAL Functions">Section 8.10, “SFCGAL Functions”</a></p></div></div><div class="refentry" title="postgis.gdal_datapath"><div class="refentry.separator"><hr></div><a name="postgis_gdal_datapath"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>postgis.gdal_datapath — 
					A configuration option to assign the value of GDAL's GDAL_DATA option. If not set, the environmentally set GDAL_DATA variable is used.
				</p></div><div class="refsection" title="Description"><a name="idp68107600"></a><h2>Description</h2><p>
					A PostgreSQL GUC variable for setting the value of GDAL's GDAL_DATA option. The <code class="varname">postgis.gdal_datapath</code> value should be the complete physical path to GDAL's data files.
				</p><p>
					This configuration option is of most use for Windows platforms where GDAL's data files path is not hard-coded. This option should also be set when GDAL's data files are not located in GDAL's expected path.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						This option can be set in PostgreSQL's configuration file postgresql.conf. It can also be set by connection or transaction.
					</p></td></tr></table></div><p>Availability: 2.2.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Additional information about GDAL_DATA is available at GDAL's <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions" target="_top">Configuration Options</a>.
					</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp68111952"></a><h2>Examples</h2><p>Set and reset <code class="varname">postgis.gdal_datapath</code></p><pre class="programlisting">
SET postgis.gdal_datapath TO '/usr/local/share/gdal.hidden';
SET postgis.gdal_datapath TO default;
				</pre><p>Setting on windows for a particular database</p><pre class="programlisting">ALTER DATABASE gisdb
SET postgis.gdal_datapath = 'C:/Program Files/PostgreSQL/9.3/gdal-data';</pre></div><div class="refsection" title="See Also"><a name="idp68123088"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_PostGIS_GDAL_Version" title="PostGIS_GDAL_Version">PostGIS_GDAL_Version</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>
				</p></div></div><div class="refentry" title="postgis.gdal_enabled_drivers"><div class="refentry.separator"><hr></div><a name="postgis_gdal_enabled_drivers"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>postgis.gdal_enabled_drivers — 
					A configuration option to set the enabled GDAL drivers in the PostGIS environment. Affects the GDAL configuration variable GDAL_SKIP.
				</p></div><div class="refsection" title="Description"><a name="idp68126672"></a><h2>Description</h2><p>
					A configuration option to set the enabled GDAL drivers in the PostGIS environment. Affects the GDAL configuration variable GDAL_SKIP. This option can be set in PostgreSQL's configuration file: postgresql.conf. It can also be set by connection or transaction.
				</p><p>
					The initial value of <code class="varname">postgis.gdal_enabled_drivers</code> may also be set by passing the environment variable <code class="varname">POSTGIS_GDAL_ENABLED_DRIVERS</code> with the list of enabled drivers to the process starting PostgreSQL.
				</p><p>
					Enabled GDAL specified drivers can be specified by the driver's short-name or code. Driver short-names or codes can be found at <a class="ulink" href="http://www.gdal.org/formats_list.html" target="_top">GDAL Raster Formats</a>. Multiple drivers can be specified by putting a space between each driver.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						There are three special codes available for <code class="varname">postgis.gdal_enabled_drivers</code>. The codes are case-sensitive.

						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">DISABLE_ALL</code> disables all GDAL drivers. If present, <code class="varname">DISABLE_ALL</code> overrides all other values in <code class="varname">postgis.gdal_enabled_drivers</code>.</p></li><li class="listitem"><p><code class="varname">ENABLE_ALL</code> enables all GDAL drivers.</p></li><li class="listitem"><p><code class="varname">VSICURL</code> enables GDAL's <code class="varname">/vsicurl/</code> virtual file system.</p></li></ul></div><p>
					</p><p>
						When <code class="varname">postgis.gdal_enabled_drivers</code> is set to DISABLE_ALL, attempts to use out-db rasters, ST_FromGDALRaster(), ST_AsGDALRaster(), ST_AsTIFF(), ST_AsJPEG() and ST_AsPNG() will result in error messages.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						In the standard PostGIS installation, <code class="varname">postgis.gdal_enabled_drivers</code> is set to DISABLE_ALL.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Additional information about GDAL_SKIP is available at GDAL's <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions" target="_top">Configuration Options</a>.
					</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp68139472"></a><h2>Examples</h2><p>Set and reset <code class="varname">postgis.gdal_enabled_drivers</code></p><p>Sets backend for all new connections to database</p><pre class="programlisting">ALTER DATABASE mygisdb SET postgis.gdal_enabled_drivers TO 'GTiff PNG JPEG';</pre><p>Sets default enabled drivers for all new connections to server. Requires super user access and PostgreSQL 9.4+.
				    Also not that database, session, and user settings override this.</p><pre class="programlisting">ALTER SYSTEM SET postgis.gdal_enabled_drivers TO 'GTiff PNG JPEG';
SELECT pg_reload_conf();
				</pre><pre class="programlisting">
SET postgis.gdal_enabled_drivers TO 'GTiff PNG JPEG';
SET postgis.gdal_enabled_drivers = default;
				</pre><p>Enable all GDAL Drivers</p><pre class="programlisting">
SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
				</pre><p>Disable all GDAL Drivers</p><pre class="programlisting">
SET postgis.gdal_enabled_drivers = 'DISABLE_ALL';
				</pre></div><div class="refsection" title="See Also"><a name="idp68144976"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a>,
					<a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>,
					<a class="xref" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a>,
					<a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>,
					<a class="xref" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a>,
					<a class="xref" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a>
				</p></div></div><div class="refentry" title="postgis.enable_outdb_rasters"><div class="refentry.separator"><hr></div><a name="postgis_enable_outdb_rasters"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>postgis.enable_outdb_rasters — 
					A boolean configuration option to enable access to out-db raster bands.
				</p></div><div class="refsection" title="Description"><a name="idp68150224"></a><h2>Description</h2><p>
					A boolean configuration option to enable access to out-db raster bands. This option can be set in PostgreSQL's configuration file: postgresql.conf. It can also be set by connection or transaction.
				</p><p>
					The initial value of <code class="varname">postgis.enable_outdb_rasters</code> may also be set by passing the environment variable <code class="varname">POSTGIS_ENABLE_OUTDB_RASTERS</code> with a non-zero value to the process starting PostgreSQL.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Even if <code class="varname">postgis.enable_outdb_rasters</code> is True, the GUC <code class="varname">postgis.enable_outdb_rasters</code> determines the accessible raster formats.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						In the standard PostGIS installation, <code class="varname">postgis.enable_outdb_rasters</code> is set to False.
					</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp68155728"></a><h2>Examples</h2><p>Set and reset <code class="varname">postgis.enable_outdb_rasters</code></p><pre class="programlisting">
SET postgis.enable_outdb_rasters TO True;
SET postgis.enable_outdb_rasters = default;
SET postgis.enable_outdb_rasters = True;
SET postgis.enable_outdb_rasters = False;
				</pre></div><div class="refsection" title="See Also"><a name="idp68157648"></a><h2>See Also</h2><p>
					<a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>
				</p></div></div></div><div class="sect1" title="8.3. Management Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Management_Functions"></a>8.3. Management Functions</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#AddGeometryColumn">AddGeometryColumn</a></span><span class="refpurpose"> — Adds a geometry column to an existing table of
		attributes. By default uses type modifier to define rather than constraints.
		Pass in false for use_typmod to get old check constraint based behavior</span></dt><dt><span class="refentrytitle"><a href="#DropGeometryColumn">DropGeometryColumn</a></span><span class="refpurpose"> — Removes a geometry column from a spatial
		table.</span></dt><dt><span class="refentrytitle"><a href="#DropGeometryTable">DropGeometryTable</a></span><span class="refpurpose"> — Drops a table and all its references in
		geometry_columns.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Full_Version">PostGIS_Full_Version</a></span><span class="refpurpose"> — Reports full postgis version and build configuration
		infos.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_GEOS_Version">PostGIS_GEOS_Version</a></span><span class="refpurpose"> — Returns the version number of the GEOS
		library.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_LibXML_Version">PostGIS_LibXML_Version</a></span><span class="refpurpose"> — Returns the version number of the libxml2
		library.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Lib_Build_Date">PostGIS_Lib_Build_Date</a></span><span class="refpurpose"> — Returns build date of the PostGIS library.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Lib_Version">PostGIS_Lib_Version</a></span><span class="refpurpose"> — Returns the version number of the PostGIS
		library.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_PROJ_Version">PostGIS_PROJ_Version</a></span><span class="refpurpose"> — Returns the version number of the PROJ4
		library.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Scripts_Build_Date">PostGIS_Scripts_Build_Date</a></span><span class="refpurpose"> — Returns build date of the PostGIS scripts.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Scripts_Installed">PostGIS_Scripts_Installed</a></span><span class="refpurpose"> — Returns version of the postgis scripts installed in this
			database.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Scripts_Released">PostGIS_Scripts_Released</a></span><span class="refpurpose"> — Returns the version number of the postgis.sql script
		released with the installed postgis lib.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_Version">PostGIS_Version</a></span><span class="refpurpose"> — Returns PostGIS version number and compile-time
		options.</span></dt><dt><span class="refentrytitle"><a href="#Populate_Geometry_Columns">Populate_Geometry_Columns</a></span><span class="refpurpose"> — Ensures geometry columns are defined with type modifiers or have appropriate spatial constraints
		This ensures they will be registered correctly in <code class="varname">geometry_columns</code> view. By default will convert all geometry
		    columns with no type modifier to ones with type modifiers. To get old behavior set <code class="varname">use_typmod=false</code></span></dt><dt><span class="refentrytitle"><a href="#UpdateGeometrySRID">UpdateGeometrySRID</a></span><span class="refpurpose"> — Updates the SRID of all features in a geometry
		column, geometry_columns metadata and srid. If it was enforced with constraints, the constraints will be updated with new srid constraint.
		If the old was enforced by type definition, the type definition will be changed.</span></dt></dl></div><div class="refentry" title="AddGeometryColumn"><a name="AddGeometryColumn"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddGeometryColumn — Adds a geometry column to an existing table of
		attributes. By default uses type modifier to define rather than constraints.
		Pass in false for use_typmod to get old check constraint based behavior</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">AddGeometryColumn</b>(</code>varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var>, varchar 
			<var class="pdparam">type</var>, integer 
			<var class="pdparam">dimension</var>, boolean 
			<var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AddGeometryColumn</b>(</code>varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var>, varchar 
			<var class="pdparam">type</var>, integer 
			<var class="pdparam">dimension</var>, boolean 
			<var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AddGeometryColumn</b>(</code>varchar 
			<var class="pdparam">catalog_name</var>, varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var>, varchar 
			<var class="pdparam">type</var>, integer 
			<var class="pdparam">dimension</var>, boolean 
			<var class="pdparam">use_typmod=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68247248"></a><h2>Description</h2><p>Adds a geometry column to an existing table of attributes. The
		<code class="varname">schema_name</code> is the name of the table schema. The <code class="varname">srid</code>
		must be an integer value reference to an entry in the SPATIAL_REF_SYS
		table. The <code class="varname">type</code> must be a string
		corresponding to the geometry type, eg, 'POLYGON' or
		'MULTILINESTRING' .  An error is thrown if the schemaname doesn't exist
		(or not visible in the current search_path) or the specified SRID,
		geometry type, or dimension is invalid.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 This function no longer updates geometry_columns since geometry_columns is a view that reads from system catalogs.  It by default
			also does not create constraints, but instead uses the built in type modifier behavior of PostgreSQL.  So for example building a wgs84 POINT column with this function is now
			equivalent to: <code class="code">ALTER TABLE some_table ADD COLUMN geom geometry(Point,4326);</code> </p><p>Changed: 2.0.0 If you require the old behavior of constraints use the default <code class="varname">use_typmod</code>, but set it to false.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 Views can no longer be manually registered in geometry_columns, however views built against geometry typmod tables geometries and used without wrapper functions will register themselves correctly
		            because they inherit the typmod behavior of their parent table column.
		            Views that use geometry functions that output other geometries will need to be cast to typmod geometries for these view geometry columns to be registered correctly
		            in geometry_columns. Refer to <a class="xref" href="#Manual_Register_Spatial_Column" title="4.3.4. Manually Registering Geometry Columns in geometry_columns">Section 4.3.4, “Manually Registering Geometry Columns in geometry_columns”</a>.
			</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p>Enhanced: 2.0.0 use_typmod argument introduced.  Defaults to creating typmod geometry column instead of constraint-based.</p></div><div class="refsection" title="Examples"><a name="idp68281296"></a><h2>Examples</h2><pre class="programlisting">-- Create schema to hold data
CREATE SCHEMA my_schema;
-- Create a new simple PostgreSQL table
CREATE TABLE my_schema.my_spatial_table (id serial);

-- Describing the table shows a simple table with a single "id" column.
postgis=# \d my_schema.my_spatial_table
							 Table "my_schema.my_spatial_table"
 Column |  Type   |                                Modifiers
--------+---------+-------------------------------------------------------------------------
 id     | integer | not null default nextval('my_schema.my_spatial_table_id_seq'::regclass)

-- Add a spatial column to the table
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geom',4326,'POINT',2);

-- Add a point using the old constraint based behavior
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geom_c',4326,'POINT',2, false);

--Add a curvepolygon using old constraint behavior
SELECT AddGeometryColumn ('my_schema','my_spatial_table','geomcp_c',4326,'CURVEPOLYGON',2, false);

-- Describe the table again reveals the addition of a new geometry columns.
\d my_schema.my_spatial_table
                            addgeometrycolumn
-------------------------------------------------------------------------
 my_schema.my_spatial_table.geomcp_c SRID:4326 TYPE:CURVEPOLYGON DIMS:2
(1 row)

                                    Table "my_schema.my_spatial_table"
  Column  |         Type         |                                Modifiers
----------+----------------------+-------------------------------------------------------------------------
 id       | integer              | not null default nextval('my_schema.my_spatial_table_id_seq'::regclass)
 geom     | geometry(Point,4326) |
 geom_c   | geometry             |
 geomcp_c | geometry             |
Check constraints:
    "enforce_dims_geom_c" CHECK (st_ndims(geom_c) = 2)
    "enforce_dims_geomcp_c" CHECK (st_ndims(geomcp_c) = 2)
    "enforce_geotype_geom_c" CHECK (geometrytype(geom_c) = 'POINT'::text OR geom_c IS NULL)
    "enforce_geotype_geomcp_c" CHECK (geometrytype(geomcp_c) = 'CURVEPOLYGON'::text OR geomcp_c IS NULL)
    "enforce_srid_geom_c" CHECK (st_srid(geom_c) = 4326)
    "enforce_srid_geomcp_c" CHECK (st_srid(geomcp_c) = 4326)

-- geometry_columns view also registers the new columns --
SELECT f_geometry_column As col_name, type, srid, coord_dimension As ndims
    FROM geometry_columns
    WHERE f_table_name = 'my_spatial_table' AND f_table_schema = 'my_schema';

 col_name |     type     | srid | ndims
----------+--------------+------+-------
 geom     | Point        | 4326 |     2
 geom_c   | Point        | 4326 |     2
 geomcp_c | CurvePolygon | 4326 |     2
</pre></div><div class="refsection" title="See Also"><a name="idp68282576"></a><h2>See Also</h2><p><a class="xref" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a>, <a class="xref" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a>, <a class="xref" href="#geometry_columns" title="4.3.2. The GEOMETRY_COLUMNS VIEW">Section 4.3.2, “The GEOMETRY_COLUMNS VIEW”</a>, <a class="xref" href="#Manual_Register_Spatial_Column" title="4.3.4. Manually Registering Geometry Columns in geometry_columns">Section 4.3.4, “Manually Registering Geometry Columns in geometry_columns”</a></p></div></div><div class="refentry" title="DropGeometryColumn"><div class="refentry.separator"><hr></div><a name="DropGeometryColumn"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropGeometryColumn — Removes a geometry column from a spatial
		table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">DropGeometryColumn</b>(</code>varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">DropGeometryColumn</b>(</code>varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">DropGeometryColumn</b>(</code>varchar 
			<var class="pdparam">catalog_name</var>, varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68292176"></a><h2>Description</h2><p>Removes a geometry column from a spatial table. Note that
		schema_name will need to match the f_table_schema field of the table's
		row in the geometry_columns table.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 This function is provided for backward compatibility.  Now that since geometry_columns is now a view against the system catalogs,
			    you can drop a geometry column like any other table column using <code class="code">ALTER TABLE</code></p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp68298576"></a><h2>Examples</h2><pre class="programlisting">
			SELECT DropGeometryColumn ('my_schema','my_spatial_table','geom');
			----RESULT output ---
			                  dropgeometrycolumn
------------------------------------------------------
 my_schema.my_spatial_table.geom effectively removed.

-- In PostGIS 2.0+ the above is also equivalent to the standard
-- the standard alter table.  Both will deregister from geometry_columns
ALTER TABLE my_schema.my_spatial_table DROP column geom;
		</pre></div><div class="refsection" title="See Also"><a name="idp68299856"></a><h2>See Also</h2><p><a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a>, <a class="xref" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a>, <a class="xref" href="#geometry_columns" title="4.3.2. The GEOMETRY_COLUMNS VIEW">Section 4.3.2, “The GEOMETRY_COLUMNS VIEW”</a></p></div></div><div class="refentry" title="DropGeometryTable"><div class="refentry.separator"><hr></div><a name="DropGeometryTable"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropGeometryTable — Drops a table and all its references in
		geometry_columns.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">DropGeometryTable</b>(</code>varchar 
			<var class="pdparam">table_name</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">DropGeometryTable</b>(</code>varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">DropGeometryTable</b>(</code>varchar 
			<var class="pdparam">catalog_name</var>, varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68314192"></a><h2>Description</h2><p>Drops a table and all its references in geometry_columns. Note:
		uses current_schema() on schema-aware pgsql installations if schema is
		not provided.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 This function is provided for backward compatibility.  Now that since geometry_columns is now a view against the system catalogs,
			    you can drop a table with geometry columns like any other table using <code class="code">DROP TABLE</code></p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp68316368"></a><h2>Examples</h2><pre class="programlisting">SELECT DropGeometryTable ('my_schema','my_spatial_table');
----RESULT output ---
my_schema.my_spatial_table dropped.

-- The above is now equivalent to --
DROP TABLE my_schema.my_spatial_table;
		</pre></div><div class="refsection" title="See Also"><a name="idp68317776"></a><h2>See Also</h2><p><a class="xref" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a>, <a class="xref" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a>, <a class="xref" href="#geometry_columns" title="4.3.2. The GEOMETRY_COLUMNS VIEW">Section 4.3.2, “The GEOMETRY_COLUMNS VIEW”</a></p></div></div><div class="refentry" title="PostGIS_Full_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_Full_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Full_Version — Reports full postgis version and build configuration
		infos.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Full_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68323664"></a><h2>Description</h2><p>Reports full postgis version and build configuration
		infos. Also informs about synchronization between
		libraries and scripts suggesting upgrades as needed.</p></div><div class="refsection" title="Examples"><a name="idp68324816"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Full_Version();
							   postgis_full_version
----------------------------------------------------------------------------------
POSTGIS="2.2.0dev r12699" GEOS="3.5.0dev-CAPI-1.9.0 r3989" SFCGAL="1.0.4" PROJ="Rel. 4.8.0, 6 March 2012"
GDAL="GDAL 1.11.0, released 2014/04/16" LIBXML="2.7.8" LIBJSON="0.12" RASTER
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68326224"></a><h2>See Also</h2><p>
		<a class="xref" href="#upgrading" title="2.10. Upgrading">Section 2.10, “Upgrading”</a>,
		<a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>,
		<a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>,
		<a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>,
		<a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>,
		<a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a>
		</p></div></div><div class="refentry" title="PostGIS_GEOS_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_GEOS_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_GEOS_Version — Returns the version number of the GEOS
		library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_GEOS_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68333520"></a><h2>Description</h2><p>Returns the version number of the GEOS library, or
		<code class="varname">NULL</code> if GEOS support is not enabled.</p></div><div class="refsection" title="Examples"><a name="idp68335184"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_GEOS_Version();
 postgis_geos_version
----------------------
 3.1.0-CAPI-1.5.0
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68336464"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_LibXML_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_LibXML_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_LibXML_Version — Returns the version number of the libxml2
		library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_LibXML_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68343248"></a><h2>Description</h2><p>Returns the version number of the LibXML2 library.</p><p>Availability: 1.5</p></div><div class="refsection" title="Examples"><a name="idp68344784"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_LibXML_Version();
 postgis_libxml_version
----------------------
 2.7.6
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68346064"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_Lib_Build_Date"><div class="refentry.separator"><hr></div><a name="PostGIS_Lib_Build_Date"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Lib_Build_Date — Returns build date of the PostGIS library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Lib_Build_Date</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68352848"></a><h2>Description</h2><p>Returns build date of the PostGIS library.</p></div><div class="refsection" title="Examples"><a name="idp68354000"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Lib_Build_Date();
 postgis_lib_build_date
------------------------
 2008-06-21 17:53:21
(1 row)</pre></div></div><div class="refentry" title="PostGIS_Lib_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_Lib_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Lib_Version — Returns the version number of the PostGIS
		library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Lib_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68367440"></a><h2>Description</h2><p>Returns the version number of the PostGIS library.</p></div><div class="refsection" title="Examples"><a name="idp68368592"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Lib_Version();
 postgis_lib_version
---------------------
 1.3.3
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68369872"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>,  <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_PROJ_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_PROJ_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_PROJ_Version — Returns the version number of the PROJ4
		library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_PROJ_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68376656"></a><h2>Description</h2><p>Returns the version number of the PROJ4 library, or
		<code class="varname">NULL</code> if PROJ4 support is not enabled.</p></div><div class="refsection" title="Examples"><a name="idp68378192"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_PROJ_Version();
  postgis_proj_version
-------------------------
 Rel. 4.4.9, 29 Oct 2004
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68379600"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>,  <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_Scripts_Build_Date"><div class="refentry.separator"><hr></div><a name="PostGIS_Scripts_Build_Date"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Build_Date — Returns build date of the PostGIS scripts.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Scripts_Build_Date</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68386384"></a><h2>Description</h2><p>Returns build date of the PostGIS scripts.</p><p>Availability: 1.0.0RC1</p></div><div class="refsection" title="Examples"><a name="idp68387920"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Scripts_Build_Date();
  postgis_scripts_build_date
-------------------------
 2007-08-18 09:09:26
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68389328"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_Scripts_Installed"><div class="refentry.separator"><hr></div><a name="PostGIS_Scripts_Installed"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Installed — Returns version of the postgis scripts installed in this
			database.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Scripts_Installed</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68400208"></a><h2>Description</h2><p>Returns version of the postgis scripts installed in this
			database.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If the output of this function doesn't match the output of
			  <a class="xref" href="#PostGIS_Scripts_Released" title="PostGIS_Scripts_Released">PostGIS_Scripts_Released</a>
			  you probably missed to properly upgrade an existing database.
			  See the <a class="link" href="#upgrading" title="2.10. Upgrading">Upgrading</a> section for
			  more info.</p></td></tr></table></div><p>Availability: 0.9.0</p></div><div class="refsection" title="Examples"><a name="idp68403408"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Scripts_Installed();
  postgis_scripts_installed
-------------------------
 1.5.0SVN
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68404816"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Scripts_Released" title="PostGIS_Scripts_Released">PostGIS_Scripts_Released</a>, <a class="xref" href="#PostGIS_Version" title="PostGIS_Version">PostGIS_Version</a></p></div></div><div class="refentry" title="PostGIS_Scripts_Released"><div class="refentry.separator"><hr></div><a name="PostGIS_Scripts_Released"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Scripts_Released — Returns the version number of the postgis.sql script
		released with the installed postgis lib.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Scripts_Released</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68410704"></a><h2>Description</h2><p>Returns the version number of the postgis.sql script
		released with the installed postgis lib.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Starting with version 1.1.0 this function returns the same
		  value of <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>. Kept
		  for backward compatibility.</p></td></tr></table></div><p>Availability: 0.9.0</p></div><div class="refsection" title="Examples"><a name="idp68413520"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Scripts_Released();
  postgis_scripts_released
-------------------------
 1.3.4SVN
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68414800"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_Scripts_Installed" title="PostGIS_Scripts_Installed">PostGIS_Scripts_Installed</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a></p></div></div><div class="refentry" title="PostGIS_Version"><div class="refentry.separator"><hr></div><a name="PostGIS_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Version — Returns PostGIS version number and compile-time
		options.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68420816"></a><h2>Description</h2><p>Returns PostGIS version number and compile-time options.</p></div><div class="refsection" title="Examples"><a name="idp68421968"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Version();
			postgis_version
---------------------------------------
 1.3 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp68423248"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#PostGIS_GEOS_Version" title="PostGIS_GEOS_Version">PostGIS_GEOS_Version</a>, <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a>, <a class="xref" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a>, <a class="xref" href="#PostGIS_PROJ_Version" title="PostGIS_PROJ_Version">PostGIS_PROJ_Version</a></p></div></div><div class="refentry" title="Populate_Geometry_Columns"><div class="refentry.separator"><hr></div><a name="Populate_Geometry_Columns"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Populate_Geometry_Columns — Ensures geometry columns are defined with type modifiers or have appropriate spatial constraints
		This ensures they will be registered correctly in <code class="varname">geometry_columns</code> view. By default will convert all geometry
		    columns with no type modifier to ones with type modifiers. To get old behavior set <code class="varname">use_typmod=false</code></p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Populate_Geometry_Columns</b>(</code>boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p><p><code class="funcdef">int <b class="fsfunc">Populate_Geometry_Columns</b>(</code>oid <var class="pdparam">relation_oid</var>, boolean  <var class="pdparam">use_typmod=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68434640"></a><h2>Description</h2><p>Ensures geometry columns have appropriate type modifiers or spatial constraints to ensure they are registered correctly in <code class="varname">geometry_columns</code> table.</p><p>For backwards compatibility and for spatial needs such as table inheritance where each child table may have different geometry type, the old check constraint behavior is still supported.
		If you need the old behavior, you need to pass in the new optional argument as false <code class="varname">use_typmod=false</code>. When this is done geometry columns will be created with no type modifiers
		but will have 3 constraints defined.  In particular,
		this means that every geometry column belonging to a table has at least
		three constraints:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">enforce_dims_the_geom</code> - ensures every
			geometry has the same dimension (see <a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a>)</p></li><li class="listitem"><p><code class="varname">enforce_geotype_the_geom</code> - ensures every
			geometry is of the same type (see <a class="xref" href="#GeometryType" title="GeometryType">GeometryType</a>)</p></li><li class="listitem"><p><code class="varname">enforce_srid_the_geom</code> - ensures every
			geometry is in the same projection (see <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>)</p></li></ul></div><p>If a table <code class="varname">oid</code> is provided, this function
		tries to determine the srid, dimension, and geometry type of all
		geometry columns in the table, adding constraints as necessary. If
		successful, an appropriate row is inserted into the geometry_columns
		table, otherwise, the exception is caught and an error notice is raised
		describing the problem.</p><p>If the <code class="varname">oid</code> of a view is provided, as with a
		table oid, this function tries to determine the srid, dimension, and
		type of all the geometries in the view, inserting appropriate entries
		into the <code class="varname">geometry_columns</code> table, but nothing is done
		to enforce constraints.</p><p>The parameterless variant is a simple wrapper for the parameterized
		variant that first truncates and repopulates the geometry_columns table
		for every spatial table and view in the database, adding spatial
		constraints to tables where appropriate.  It returns a summary of the
		number of geometry columns detected in the database and the number that
		were inserted into the <code class="varname">geometry_columns</code> table.  The
		parameterized version simply returns the number of rows inserted into
		the <code class="varname">geometry_columns</code> table.</p><p>Availability: 1.4.0</p><p>Changed: 2.0.0 By default, now uses type modifiers instead of check constraints to constrain geometry types.  You can still use check
		    constraint behavior instead by using the new  <code class="varname">use_typmod</code> and setting it to false.</p><p>Enhanced: 2.0.0 <code class="varname">use_typmod</code> optional argument was introduced that allows controlling if columns are created with typmodifiers or with check constraints.</p></div><div class="refsection" title="Examples"><a name="idp68447056"></a><h2>Examples</h2><pre class="programlisting">
CREATE TABLE public.myspatial_table(gid serial, geom geometry);
INSERT INTO myspatial_table(geom) VALUES(ST_GeomFromText('LINESTRING(1 2, 3 4)',4326) );
-- This will now use typ modifiers.  For this to work, there must exist data
SELECT Populate_Geometry_Columns('public.myspatial_table'::regclass);

populate_geometry_columns
--------------------------
                        1


\d myspatial_table

                                   Table "public.myspatial_table"
 Column |           Type            |                           Modifiers
--------+---------------------------+---------------------------------------------------------------
 gid    | integer                   | not null default nextval('myspatial_table_gid_seq'::regclass)
 geom   | geometry(LineString,4326) |
</pre><pre class="programlisting">-- This will change the geometry columns to use constraints if they are not typmod or have constraints already.
--For this to work, there must exist data
CREATE TABLE public.myspatial_table_cs(gid serial, geom geometry);
INSERT INTO myspatial_table_cs(geom) VALUES(ST_GeomFromText('LINESTRING(1 2, 3 4)',4326) );
SELECT Populate_Geometry_Columns('public.myspatial_table_cs'::regclass, false);
populate_geometry_columns
--------------------------
                        1
\d myspatial_table_cs

                          Table "public.myspatial_table_cs"
 Column |   Type   |                            Modifiers
--------+----------+------------------------------------------------------------------
 gid    | integer  | not null default nextval('myspatial_table_cs_gid_seq'::regclass)
 geom   | geometry |
Check constraints:
    "enforce_dims_geom" CHECK (st_ndims(geom) = 2)
    "enforce_geotype_geom" CHECK (geometrytype(geom) = 'LINESTRING'::text OR geom IS NULL)
    "enforce_srid_geom" CHECK (st_srid(geom) = 4326)</pre></div></div><div class="refentry" title="UpdateGeometrySRID"><div class="refentry.separator"><hr></div><a name="UpdateGeometrySRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>UpdateGeometrySRID — Updates the SRID of all features in a geometry
		column, geometry_columns metadata and srid. If it was enforced with constraints, the constraints will be updated with new srid constraint.
		If the old was enforced by type definition, the type definition will be changed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">UpdateGeometrySRID</b>(</code>varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">UpdateGeometrySRID</b>(</code>varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">UpdateGeometrySRID</b>(</code>varchar 
			<var class="pdparam">catalog_name</var>, varchar 
			<var class="pdparam">schema_name</var>, varchar 
			<var class="pdparam">table_name</var>, varchar 
			<var class="pdparam">column_name</var>, integer 
			<var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68467664"></a><h2>Description</h2><p>Updates the SRID of all features in a geometry column, updating
		constraints and reference in geometry_columns. Note: uses
		current_schema() on schema-aware pgsql installations if schema is not
		provided.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp68471504"></a><h2>Examples</h2><p>This will change the srid of the roads table to 4326 from whatever it was before</p><pre class="programlisting">SELECT UpdateGeometrySRID('roads','geom',4326);</pre><p>The prior example is equivalent to this DDL statement</p><pre class="programlisting">ALTER TABLE roads
  ALTER COLUMN geom TYPE geometry(MULTILINESTRING, 4326)
    USING ST_SetSRID(geom,4326);</pre><p>If you got the projection wrong (or brought it in as unknown) in load and you wanted to transform to web mercator all in one shot
		You can do this with
	DDL but there is no equivalent PostGIS management function to do so in one go.</p><pre class="programlisting">ALTER TABLE roads
 ALTER COLUMN geom TYPE geometry(MULTILINESTRING, 3857) USING ST_Transform(ST_SetSRID(geom,4326),3857) ;</pre></div><div class="refsection" title="See Also"><a name="idp68475088"></a><h2>See Also</h2><p>
  <a class="xref" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a>,
  <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>,
  <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>
		</p></div></div></div><div class="sect1" title="8.4. Geometry Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Geometry_Constructors"></a>8.4. Geometry Constructors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_BdPolyFromText">ST_BdPolyFromText</a></span><span class="refpurpose"> — Construct a Polygon given an arbitrary collection of closed
			linestrings as a MultiLineString Well-Known text representation.</span></dt><dt><span class="refentrytitle"><a href="#ST_BdMPolyFromText">ST_BdMPolyFromText</a></span><span class="refpurpose"> — Construct a MultiPolygon given an arbitrary collection of
					closed linestrings as a MultiLineString text
					representation Well-Known text representation.</span></dt><dt><span class="refentrytitle"><a href="#ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a></span><span class="refpurpose"> — Return a BOX2D from a GeoHash string.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeogFromText">ST_GeogFromText</a></span><span class="refpurpose"> — Return a specified geography value from Well-Known Text representation or extended (WKT). </span></dt><dt><span class="refentrytitle"><a href="#ST_GeographyFromText">ST_GeographyFromText</a></span><span class="refpurpose"> — Return a specified geography value from Well-Known Text representation or extended (WKT). </span></dt><dt><span class="refentrytitle"><a href="#ST_GeogFromWKB">ST_GeogFromWKB</a></span><span class="refpurpose"> — Creates a geography instance from a Well-Known Binary geometry
		representation (WKB) or extended Well Known Binary (EWKB).</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromTWKB">ST_GeomFromTWKB</a></span><span class="refpurpose"> — Creates a geometry instance from a TWKB ("<a class="ulink" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">Tiny Well-Known Binary</a>") geometry
		representation.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomCollFromText">ST_GeomCollFromText</a></span><span class="refpurpose"> — Makes a collection Geometry from collection WKT with the given SRID. If SRID is
			not give, it defaults to 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromEWKB">ST_GeomFromEWKB</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Extended Well-Known Binary representation (EWKB).</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromEWKT">ST_GeomFromEWKT</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Extended Well-Known Text representation (EWKT).</span></dt><dt><span class="refentrytitle"><a href="#ST_GeometryFromText">ST_GeometryFromText</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Well-Known Text representation (WKT).  This is an alias name for ST_GeomFromText</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromGeoHash">ST_GeomFromGeoHash</a></span><span class="refpurpose"> — Return a geometry from a GeoHash string.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromGML">ST_GeomFromGML</a></span><span class="refpurpose"> — Takes as input GML representation of geometry and outputs a PostGIS geometry object</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a></span><span class="refpurpose"> — Takes as input a geojson representation of a geometry and outputs a PostGIS geometry object</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromKML">ST_GeomFromKML</a></span><span class="refpurpose"> — Takes as input KML representation of geometry and outputs a PostGIS geometry object</span></dt><dt><span class="refentrytitle"><a href="#ST_GMLToSQL">ST_GMLToSQL</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from GML representation.  This is an alias name for ST_GeomFromGML</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromText">ST_GeomFromText</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Well-Known Text representation (WKT).</span></dt><dt><span class="refentrytitle"><a href="#ST_GeomFromWKB">ST_GeomFromWKB</a></span><span class="refpurpose"> — Creates a geometry instance from a Well-Known Binary geometry
		representation (WKB) and optional SRID.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a></span><span class="refpurpose"> — Creates a LineString from an Encoded Polyline.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineFromMultiPoint">ST_LineFromMultiPoint</a></span><span class="refpurpose"> — Creates a LineString from a MultiPoint geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineFromText">ST_LineFromText</a></span><span class="refpurpose"> — Makes a Geometry from WKT representation with the given SRID. If SRID is
				not given, it defaults to 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineFromWKB">ST_LineFromWKB</a></span><span class="refpurpose"> — Makes a <code class="varname">LINESTRING</code> from WKB with the given SRID</span></dt><dt><span class="refentrytitle"><a href="#ST_LinestringFromWKB">ST_LinestringFromWKB</a></span><span class="refpurpose"> — Makes a geometry from WKB with the given SRID.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakeBox2D">ST_MakeBox2D</a></span><span class="refpurpose"> — Creates a BOX2D defined by the given point
			geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_3DMakeBox">ST_3DMakeBox</a></span><span class="refpurpose"> — Creates a BOX3D defined by the given 3d point
			geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakeLine">ST_MakeLine</a></span><span class="refpurpose"> — Creates a Linestring from point, multipoint, or line geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakeEnvelope">ST_MakeEnvelope</a></span><span class="refpurpose"> — Creates a rectangular Polygon formed from the given minimums and maximums. Input
			values must be in SRS specified by the SRID.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakePolygon">ST_MakePolygon</a></span><span class="refpurpose"> — Creates a Polygon formed by the given shell. Input
			geometries must be closed LINESTRINGS.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakePoint">ST_MakePoint</a></span><span class="refpurpose"> — Creates a 2D,3DZ or 4D point geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakePointM">ST_MakePointM</a></span><span class="refpurpose"> — Creates a point geometry with an x y and m coordinate.</span></dt><dt><span class="refentrytitle"><a href="#ST_MLineFromText">ST_MLineFromText</a></span><span class="refpurpose"> — Return a specified ST_MultiLineString value from WKT representation.</span></dt><dt><span class="refentrytitle"><a href="#ST_MPointFromText">ST_MPointFromText</a></span><span class="refpurpose"> — Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_MPolyFromText">ST_MPolyFromText</a></span><span class="refpurpose"> — Makes a MultiPolygon Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_Point">ST_Point</a></span><span class="refpurpose"> — Returns an ST_Point with the given coordinate values. OGC alias for ST_MakePoint.</span></dt><dt><span class="refentrytitle"><a href="#ST_PointFromGeoHash">ST_PointFromGeoHash</a></span><span class="refpurpose"> — Return a point from a GeoHash string.</span></dt><dt><span class="refentrytitle"><a href="#ST_PointFromText">ST_PointFromText</a></span><span class="refpurpose"> — Makes a point Geometry from WKT with the given SRID. If SRID is
			not given, it defaults to unknown.</span></dt><dt><span class="refentrytitle"><a href="#ST_PointFromWKB">ST_PointFromWKB</a></span><span class="refpurpose"> — Makes a geometry from WKB with the given SRID</span></dt><dt><span class="refentrytitle"><a href="#ST_Polygon">ST_Polygon</a></span><span class="refpurpose"> — Returns a polygon built from the specified linestring and SRID.</span></dt><dt><span class="refentrytitle"><a href="#ST_PolygonFromText">ST_PolygonFromText</a></span><span class="refpurpose"> — Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_WKBToSQL">ST_WKBToSQL</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Well-Known Binary representation (WKB).  This is an alias name for ST_GeomFromWKB that takes no srid</span></dt><dt><span class="refentrytitle"><a href="#ST_WKTToSQL">ST_WKTToSQL</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from Well-Known Text representation (WKT).  This is an alias name for ST_GeomFromText</span></dt></dl></div><div class="refentry" title="ST_BdPolyFromText"><a name="ST_BdPolyFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BdPolyFromText — Construct a Polygon given an arbitrary collection of closed
			linestrings as a MultiLineString Well-Known text representation.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_BdPolyFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68777168"></a><h2>Description</h2><p>Construct a Polygon given an arbitrary collection of closed
			linestrings as a MultiLineString Well-Known text representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Throws an error if WKT is not a MULTILINESTRING. Throws an
			error if output is a MULTIPOLYGON; use ST_BdMPolyFromText in that case, or
			see ST_BuildArea() for a
			postgis-specific approach.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p>Availability: 1.1.0 - requires GEOS &gt;= 2.1.0.</p></div><div class="refsection" title="Examples"><a name="idp68781520"></a><h2>Examples</h2><pre class="programlisting">Forthcoming</pre></div><div class="refsection" title="See Also"><a name="idp68782800"></a><h2>See Also</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a></p></div></div><div class="refentry" title="ST_BdMPolyFromText"><div class="refentry.separator"><hr></div><a name="ST_BdMPolyFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BdMPolyFromText — Construct a MultiPolygon given an arbitrary collection of
					closed linestrings as a MultiLineString text
					representation Well-Known text representation.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_BdMPolyFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68790224"></a><h2>Description</h2><p>Construct a Polygon given an arbitrary collection of closed
				linestrings, polygons, MultiLineStrings as  Well-Known text representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Throws an error if WKT is not a MULTILINESTRING. Forces
					MULTIPOLYGON output even when result is really only composed by a
					single POLYGON; use <a class="link" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a> if you're sure a
					single POLYGON will result from operation, or see <a class="link" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea()</a> for a postgis-specific
					approach.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p>Availability: 1.1.0 - requires GEOS &gt;= 2.1.0.</p></div><div class="refsection" title="Examples"><a name="idp68795600"></a><h2>Examples</h2><pre class="programlisting">Forthcoming</pre></div><div class="refsection" title="See Also"><a name="idp68796880"></a><h2>See Also</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>, <a class="xref" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a></p></div></div><div class="refentry" title="ST_Box2dFromGeoHash"><div class="refentry.separator"><hr></div><a name="ST_Box2dFromGeoHash"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Box2dFromGeoHash — Return a BOX2D from a GeoHash string.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <b class="fsfunc">ST_Box2dFromGeoHash</b>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68804432"></a><h2>Description</h2><p>Return a BOX2D from a GeoHash string.</p><p>If no <code class="varname">precision</code> is specficified ST_Box2dFromGeoHash returns a BOX2D based on full precision of the input GeoHash string.</p><p>If <code class="varname">precision</code> is specified ST_Box2dFromGeoHash will use that many characters from the GeoHash to create the BOX2D. Lower precision values results in larger BOX2Ds and larger values increase the precision.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp68807504"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0');

                st_geomfromgeohash
--------------------------------------------------
 BOX(-115.172816 36.114646,-115.172816 36.114646)

SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 0);

 st_box2dfromgeohash
----------------------
 BOX(-180 -90,180 90)

 SELECT ST_Box2dFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10);
                            st_box2dfromgeohash
---------------------------------------------------------------------------
 BOX(-115.17282128334 36.1146408319473,-115.172810554504 36.1146461963654)
		
		</pre></div><div class="refsection" title="See Also"><a name="idp68808784"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>, <a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a>, <a class="xref" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a></p></div></div><div class="refentry" title="ST_GeogFromText"><div class="refentry.separator"><hr></div><a name="ST_GeogFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeogFromText — Return a specified geography value from Well-Known Text representation or extended (WKT). </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <b class="fsfunc">ST_GeogFromText</b>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68815568"></a><h2>Description</h2><p>Returns a geography object from the well-known text or extended well-known representation. SRID 4326 is assumed if unspecified.
				This is an alias for ST_GeographyFromText.  Points are always expressed in long lat form.</p></div><div class="refsection" title="Examples"><a name="idp68816720"></a><h2>Examples</h2><pre class="programlisting">
--- converting lon lat coords to geography
ALTER TABLE sometable ADD COLUMN geog geography(POINT,4326);
UPDATE sometable SET geog = ST_GeogFromText('SRID=4326;POINT(' || lon || ' ' || lat || ')');

--- specify a geography point using EPSG:4267, NAD27
SELECT ST_AsEWKT(ST_GeogFromText('SRID=4267;POINT(-77.0092 38.889588)'));
			</pre></div><div class="refsection" title="See Also"><a name="idp68818128"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a></p></div></div><div class="refentry" title="ST_GeographyFromText"><div class="refentry.separator"><hr></div><a name="ST_GeographyFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeographyFromText — Return a specified geography value from Well-Known Text representation or extended (WKT). </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <b class="fsfunc">ST_GeographyFromText</b>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68824400"></a><h2>Description</h2><p>Returns a geography object from the  well-known text representation. SRID 4326 is assumed if unspecified.</p></div><div class="refsection" title="See Also"><a name="idp68858704"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" title="ST_GeogFromWKB"><div class="refentry.separator"><hr></div><a name="ST_GeogFromWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeogFromWKB — Creates a geography instance from a Well-Known Binary geometry
		representation (WKB) or extended Well Known Binary (EWKB).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <b class="fsfunc">ST_GeogFromWKB</b>(</code>bytea  <var class="pdparam">wkb</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68865104"></a><h2>Description</h2><p>The <code class="varname">ST_GeogFromWKB</code> function, takes a well-known
		binary representation (WKB) of a geometry or PostGIS Extended WKB and creates an instance of the appropriate
		geography type. This function plays the role of the Geometry Factory in
		SQL. </p><p>If SRID is not specified, it defaults to 4326 (WGS 84 long lat).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp68868304"></a><h2>Examples</h2><pre class="programlisting">--Although bytea rep contains single \, these need to be escaped when inserting into a table
SELECT ST_AsText(
ST_GeogFromWKB(E'\\001\\002\\000\\000\\000\\002\\000\\000\\000\\037\\205\\353Q\\270~\\\\\\300\\323Mb\\020X\\231C@\\020X9\\264\\310~\\\\\\300)\\\\\\217\\302\\365\\230C@')
);
					  st_astext
------------------------------------------------------
 LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)

</pre></div><div class="refsection" title="See Also"><a name="idp68869584"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a></p></div></div><div class="refentry" title="ST_GeomFromTWKB"><div class="refentry.separator"><hr></div><a name="ST_GeomFromTWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromTWKB — Creates a geometry instance from a TWKB ("<a class="ulink" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">Tiny Well-Known Binary</a>") geometry
		representation.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromTWKB</b>(</code>bytea  <var class="pdparam">twkb</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68876496"></a><h2>Description</h2><p>The <code class="varname">ST_GeomFromTWKB</code> function, takes a a TWKB ("<a class="ulink" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">Tiny Well-Known Binary</a>") geometry representation (WKB) and creates an instance of the appropriate
		geometry type.</p></div><div class="refsection" title="Examples"><a name="idp68878544"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_GeomFromTWKB(ST_AsTWKB('LINESTRING(126 34, 127 35)'::geometry)));

         st_astext
-----------------------------
 LINESTRING(126 34, 127 35)
(1 row)


SELECT ST_AsEWKT(
  ST_GeomFromTWKB(E'\\x620002f7f40dbce4040105')
);
					  st_asewkt
------------------------------------------------------
LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)
</pre></div><div class="refsection" title="See Also"><a name="idp68879824"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a></p></div></div><div class="refentry" title="ST_GeomCollFromText"><div class="refentry.separator"><hr></div><a name="ST_GeomCollFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomCollFromText — Makes a collection Geometry from collection WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomCollFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomCollFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68897232"></a><h2>Description</h2><p>Makes a collection Geometry from the Well-Known-Text (WKT) representation with the given SRID. If SRID is
			not give, it defaults to 0.</p><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance suite</p><p>Returns null if the WKT is not a GEOMETRYCOLLECTION</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are collections, don't use this function.
				It is slower than ST_GeomFromText since it adds an additional validation step.
			</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.</p></div><div class="refsection" title="Examples"><a name="idp68904272"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeomCollFromText('GEOMETRYCOLLECTION(POINT(1 2),LINESTRING(1 2, 3 4))');
</pre></div><div class="refsection" title="See Also"><a name="idp68905808"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_GeomFromEWKB"><div class="refentry.separator"><hr></div><a name="ST_GeomFromEWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromEWKB — Return a specified ST_Geometry value from Extended Well-Known Binary representation (EWKB).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromEWKB</b>(</code>bytea  <var class="pdparam">EWKB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68912208"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry object from the OGC Extended Well-Known binary (EWKT) representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The EWKB format is not an OGC standard, but a PostGIS specific format that includes the spatial reference system (SRID)
			identifier</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp68926416"></a><h2>Examples</h2><p>line string binary rep 0f
		LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932) in NAD 83 long lat (4269).</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>NOTE: Even though byte arrays are delimited with \ and may have ', we need to escape both out with \ and '' if standard_conforming_strings is off.  So it does not
			look exactly like its AsEWKB representation.</p></td></tr></table></div><pre class="programlisting">SELECT ST_GeomFromEWKB(E'\\001\\002\\000\\000 \\255\\020\\000\\000\\003\\000\\000\\000\\344J=
\\013B\\312Q\\300n\\303(\\010\\036!E@''\\277E''K
\\312Q\\300\\366{b\\235*!E@\\225|\\354.P\\312Q
\\300p\\231\\323e1!E@');</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In PostgreSQL 9.1+ - standard_conforming_strings is set to on by default, where as in past versions it was set to off.  You can change defaults as needed
		    for a single query or at the database or server level.  Below is how you would do it with standard_conforming_strings = on.  In this case we escape the ' with standard ansi ',
		    but slashes are not escaped</p></td></tr></table></div><pre class="programlisting">
	    set standard_conforming_strings = on;
SELECT ST_GeomFromEWKB('\001\002\000\000 \255\020\000\000\003\000\000\000\344J=\012\013B
    \312Q\300n\303(\010\036!E@''\277E''K\012\312Q\300\366{b\235*!E@\225|\354.P\312Q\012\300p\231\323e1')</pre></div><div class="refsection" title="See Also"><a name="idp68929744"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a></p></div></div><div class="refentry" title="ST_GeomFromEWKT"><div class="refentry.separator"><hr></div><a name="ST_GeomFromEWKT"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromEWKT — Return a specified ST_Geometry value from Extended Well-Known Text representation (EWKT).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromEWKT</b>(</code>text  <var class="pdparam">EWKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68940624"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry object from the OGC Extended Well-Known text (EWKT) representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The EWKT format is not an OGC standard, but an PostGIS specific format that includes the spatial reference system (SRID)
			identifier</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp68948304"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeomFromEWKT('SRID=4269;LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)');
SELECT ST_GeomFromEWKT('SRID=4269;MULTILINESTRING((-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932))');

SELECT ST_GeomFromEWKT('SRID=4269;POINT(-71.064544 42.28787)');

SELECT ST_GeomFromEWKT('SRID=4269;POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');

SELECT ST_GeomFromEWKT('SRID=4269;MULTIPOLYGON(((-71.1031880899493 42.3152774590236,
-71.1031627617667 42.3152960829043,-71.102923838298 42.3149156848307,
-71.1023097974109 42.3151969047397,-71.1019285062273 42.3147384934248,
-71.102505233663 42.3144722937587,-71.10277487471 42.3141658254797,
-71.103113945163 42.3142739188902,-71.10324876416 42.31402489987,
-71.1033002961013 42.3140393340215,-71.1033488797549 42.3139495090772,
-71.103396240451 42.3138632439557,-71.1041521907712 42.3141153348029,
-71.1041411411543 42.3141545014533,-71.1041287795912 42.3142114839058,
-71.1041188134329 42.3142693656241,-71.1041112482575 42.3143272556118,
-71.1041072845732 42.3143851580048,-71.1041057218871 42.3144430686681,
-71.1041065602059 42.3145009876017,-71.1041097995362 42.3145589148055,
-71.1041166403905 42.3146168544148,-71.1041258822717 42.3146748022936,
-71.1041375307579 42.3147318674446,-71.1041492906949 42.3147711126569,
-71.1041598612795 42.314808571739,-71.1042515013869 42.3151287620809,
-71.1041173835118 42.3150739481917,-71.1040809891419 42.3151344119048,
-71.1040438678912 42.3151191367447,-71.1040194562988 42.3151832057859,
-71.1038734225584 42.3151140942995,-71.1038446938243 42.3151006300338,
-71.1038315271889 42.315094347535,-71.1037393329282 42.315054824985,
-71.1035447555574 42.3152608696313,-71.1033436658644 42.3151648370544,
-71.1032580383161 42.3152269126061,-71.103223066939 42.3152517403219,
-71.1031880899493 42.3152774590236)),
((-71.1043632495873 42.315113108546,-71.1043583974082 42.3151211109857,
-71.1043443253471 42.3150676015829,-71.1043850704575 42.3150793250568,-71.1043632495873 42.315113108546)))');
</pre><pre class="programlisting">
--3d circular string
SELECT ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)');
</pre><pre class="programlisting">
--Polyhedral Surface example
SELECT ST_GeomFromEWKT('POLYHEDRALSURFACE(
	((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
	((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
	((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
	((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
	((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
	((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)');
</pre></div><div class="refsection" title="See Also"><a name="idp68950864"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_GeometryFromText"><div class="refentry.separator"><hr></div><a name="ST_GeometryFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeometryFromText — Return a specified ST_Geometry value from Well-Known Text representation (WKT).  This is an alias name for ST_GeomFromText</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeometryFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeometryFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68960976"></a><h2>Description</h2><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.40</p></div><div class="refsection" title="See Also"><a name="idp68964688"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_GeomFromGeoHash"><div class="refentry.separator"><hr></div><a name="ST_GeomFromGeoHash"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGeoHash — Return a geometry from a GeoHash string.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromGeoHash</b>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68971856"></a><h2>Description</h2><p>Return a geometry from a GeoHash string. The geometry will be a polygon representing the GeoHash bounds.</p><p>If no <code class="varname">precision</code> is specified ST_GeomFromGeoHash returns a polygon based on full precision of the input GeoHash string.</p><p>If <code class="varname">precision</code> is specified ST_GeomFromGeoHash will use that many characters from the GeoHash to create the polygon.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp68975056"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0'));
                                                        st_astext
--------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646,-115.172816 36.114646))

SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 4));
                                                          st_astext
------------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.3125 36.03515625,-115.3125 36.2109375,-114.9609375 36.2109375,-114.9609375 36.03515625,-115.3125 36.03515625))

SELECT ST_AsText(ST_GeomFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10));
                                                                                       st_astext
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 POLYGON((-115.17282128334 36.1146408319473,-115.17282128334 36.1146461963654,-115.172810554504 36.1146461963654,-115.172810554504 36.1146408319473,-115.17282128334 36.1146408319473))
		
		</pre></div><div class="refsection" title="See Also"><a name="idp68976336"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>,<a class="xref" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>, <a class="xref" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a></p></div></div><div class="refentry" title="ST_GeomFromGML"><div class="refentry.separator"><hr></div><a name="ST_GeomFromGML"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGML — Takes as input GML representation of geometry and outputs a PostGIS geometry object</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromGML</b>(</code>text  <var class="pdparam">geomgml</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromGML</b>(</code>text  <var class="pdparam">geomgml</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp68986320"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry object from the OGC GML representation.</p><p>ST_GeomFromGML works only for GML Geometry fragments. It throws an error if you try to use it on a whole GML document.</p><p>
			OGC GML versions supported:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>GML 3.2.1 Namespace</p></li><li class="listitem"><p>GML 3.1.1 Simple Features profile SF-2 (with GML 3.1.0 and 3.0.0 backward compatibility)</p></li><li class="listitem"><p>GML 2.1.2</p></li></ul></div><p>
			OGC GML standards, cf: <a class="ulink" href="http://www.opengeospatial.org/standards/gml" target="_top">http://www.opengeospatial.org/standards/gml</a>:
		</p><p>Availability: 1.5, requires libxml2 1.6+</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</p><p>Enhanced: 2.0.0 default srid optional parameter added.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p>GML allow mixed dimensions (2D and 3D inside the same MultiGeometry for instance). As PostGIS geometries don't, ST_GeomFromGML convert the whole geometry to 2D if a missing Z dimension is found once.</p><p>GML support mixed SRS inside the same MultiGeometry. As PostGIS geometries don't, ST_GeomFromGML, in this case, reproject all subgeometries to the SRS root node. If no srsName attribute available for the GML root node, the function throw an error.</p><p>ST_GeomFromGML function is not pedantic about an explicit GML namespace. You could avoid to mention it explicitly for common usages. But you need it if you want to use XLink feature inside GML.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_GeomFromGML function not support SQL/MM curves geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples - A single geometry with srsName"><a name="idp68999120"></a><h2>Examples - A single geometry with srsName</h2><pre class="programlisting">SELECT ST_GeomFromGML('
		&lt;gml:LineString srsName="EPSG:4269"&gt;
			&lt;gml:coordinates&gt;
				-71.16028,42.258729 -71.160837,42.259112 -71.161143,42.25932
			&lt;/gml:coordinates&gt;
		&lt;/gml:LineString&gt;');
		</pre></div><div class="refsection" title="Examples - XLink usage"><a name="idp69000400"></a><h2>Examples - XLink usage</h2><pre class="programlisting">SELECT ST_GeomFromGML('
		&lt;gml:LineString xmlns:gml="http://www.opengis.net/gml"
				xmlns:xlink="http://www.w3.org/1999/xlink"
				srsName="urn:ogc:def:crs:EPSG::4269"&gt;
			&lt;gml:pointProperty&gt;
				&lt;gml:Point gml:id="p1"&gt;&lt;gml:pos&gt;42.258729 -71.16028&lt;/gml:pos&gt;&lt;/gml:Point&gt;
			&lt;/gml:pointProperty&gt;
			&lt;gml:pos&gt;42.259112 -71.160837&lt;/gml:pos&gt;
			&lt;gml:pointProperty&gt;
				&lt;gml:Point xlink:type="simple" xlink:href="#p1"/&gt;
			&lt;/gml:pointProperty&gt;
		&lt;/gml:LineString&gt;'););
		</pre></div><div class="refsection" title="Examples - Polyhedral Surface"><a name="idp69001680"></a><h2>Examples - Polyhedral Surface</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_GeomFromGML('
&lt;gml:PolyhedralSurface&gt;
&lt;gml:polygonPatches&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
      &lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;0 0 0 0 0 1 0 1 1 0 1 0 0 0 0&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
	&lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;0 0 0 0 1 0 1 1 0 1 0 0 0 0 0&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
	&lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;0 0 0 1 0 0 1 0 1 0 0 1 0 0 0&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
	&lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;1 1 0 1 1 1 1 0 1 1 0 0 1 1 0&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
	&lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;0 1 0 0 1 1 1 1 1 1 1 0 0 1 0&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
  &lt;gml:PolygonPatch&gt;
    &lt;gml:exterior&gt;
	&lt;gml:LinearRing&gt;&lt;gml:posList srsDimension="3"&gt;0 0 1 1 0 1 1 1 1 0 1 1 0 0 1&lt;/gml:posList&gt;&lt;/gml:LinearRing&gt;
    &lt;/gml:exterior&gt;
  &lt;/gml:PolygonPatch&gt;
&lt;/gml:polygonPatches&gt;
&lt;/gml:PolyhedralSurface&gt;'));

-- result --
 POLYHEDRALSURFACE(((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
 ((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
 ((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
 ((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
 ((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
 ((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1)))
		</pre></div><div class="refsection" title="See Also"><a name="idp69002960"></a><h2>See Also</h2><p><a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a>, <a class="xref" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a></p></div></div><div class="refentry" title="ST_GeomFromGeoJSON"><div class="refentry.separator"><hr></div><a name="ST_GeomFromGeoJSON"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromGeoJSON — Takes as input a geojson representation of a geometry and outputs a PostGIS geometry object</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromGeoJSON</b>(</code>text  <var class="pdparam">geomjson</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69030224"></a><h2>Description</h2><p>Constructs a PostGIS geometry object from the GeoJSON representation.</p><p>ST_GeomFromGeoJSON works only for JSON Geometry fragments. It throws an error if you try to use it on a whole JSON document.</p><p>Availability: 2.0.0 requires - JSON-C &gt;= 0.9</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you do not have JSON-C enabled, support you will get an error notice instead of seeing an output.
			To enable JSON-C, run configure --with-jsondir=/path/to/json-c.  See <a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a> for details.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp69034704"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_GeomFromGeoJSON('{"type":"Point","coordinates":[-48.23456,20.12345]}')) As wkt;
wkt
------
POINT(-48.23456 20.12345)
</pre><pre class="programlisting">-- a 3D linestring
SELECT ST_AsText(ST_GeomFromGeoJSON('{"type":"LineString","coordinates":[[1,2,3],[4,5,6],[7,8,9]]}')) As wkt;

wkt
-------------------
LINESTRING(1 2,4 5,7 8)
</pre></div><div class="refsection" title="See Also"><a name="idp69036496"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a>, <a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a></p></div></div><div class="refentry" title="ST_GeomFromKML"><div class="refentry.separator"><hr></div><a name="ST_GeomFromKML"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromKML — Takes as input KML representation of geometry and outputs a PostGIS geometry object</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromKML</b>(</code>text  <var class="pdparam">geomkml</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69043280"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry object from the OGC KML representation.</p><p>ST_GeomFromKML works only for KML Geometry fragments. It throws an error if you try to use it on a whole KML document.</p><p>
			OGC KML versions supported:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>KML 2.2.0 Namespace</p></li></ul></div><p>
			OGC KML standards, cf: <a class="ulink" href="http://www.opengeospatial.org/standards/kml" target="_top">http://www.opengeospatial.org/standards/kml</a>:
		</p><p>Availability: 1.5,libxml2 2.6+</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_GeomFromKML function not support SQL/MM curves geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples - A single geometry with srsName"><a name="idp69049552"></a><h2>Examples - A single geometry with srsName</h2><pre class="programlisting">SELECT ST_GeomFromKML('
		&lt;LineString&gt;
			&lt;coordinates&gt;-71.1663,42.2614
				-71.1667,42.2616&lt;/coordinates&gt;
		&lt;/LineString&gt;');
		</pre></div><div class="refsection" title="See Also"><a name="idp69050960"></a><h2>See Also</h2><p><a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a>, <a class="xref" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a></p></div></div><div class="refentry" title="ST_GMLToSQL"><div class="refentry.separator"><hr></div><a name="ST_GMLToSQL"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GMLToSQL — Return a specified ST_Geometry value from GML representation.  This is an alias name for ST_GeomFromGML</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GMLToSQL</b>(</code>text  <var class="pdparam">geomgml</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GMLToSQL</b>(</code>text  <var class="pdparam">geomgml</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69060560"></a><h2>Description</h2><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.50 (except for curves support).</p><p>Availability: 1.5, requires libxml2 1.6+</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</p><p>Enhanced: 2.0.0 default srid optional parameter added.</p></div><div class="refsection" title="See Also"><a name="idp69063888"></a><h2>See Also</h2><p><a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a>, <a class="xref" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a></p></div></div><div class="refentry" title="ST_GeomFromText"><div class="refentry.separator"><hr></div><a name="ST_GeomFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromText — Return a specified ST_Geometry value from Well-Known Text representation (WKT).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69073872"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry object from the OGC Well-Known text representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>There are two variants of ST_GeomFromText function.  The first takes no SRID and returns a geometry
					with no defined spatial reference system (SRID=0).  The second takes a SRID as the second argument
					and returns a geometry that includes this SRID as part of its metadata.
				</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2 - option SRID is from the conformance suite.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.40</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 In prior versions of PostGIS ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') was allowed.  This is now illegal in PostGIS 2.0.0 to better conform with SQL/MM standards. This should now be
			    written as ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp69080912"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeomFromText('LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)');
SELECT ST_GeomFromText('LINESTRING(-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932)',4269);

SELECT ST_GeomFromText('MULTILINESTRING((-71.160281 42.258729,-71.160837 42.259113,-71.161144 42.25932))');

SELECT ST_GeomFromText('POINT(-71.064544 42.28787)');

SELECT ST_GeomFromText('POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');

SELECT ST_GeomFromText('MULTIPOLYGON(((-71.1031880899493 42.3152774590236,
-71.1031627617667 42.3152960829043,-71.102923838298 42.3149156848307,
-71.1023097974109 42.3151969047397,-71.1019285062273 42.3147384934248,
-71.102505233663 42.3144722937587,-71.10277487471 42.3141658254797,
-71.103113945163 42.3142739188902,-71.10324876416 42.31402489987,
-71.1033002961013 42.3140393340215,-71.1033488797549 42.3139495090772,
-71.103396240451 42.3138632439557,-71.1041521907712 42.3141153348029,
-71.1041411411543 42.3141545014533,-71.1041287795912 42.3142114839058,
-71.1041188134329 42.3142693656241,-71.1041112482575 42.3143272556118,
-71.1041072845732 42.3143851580048,-71.1041057218871 42.3144430686681,
-71.1041065602059 42.3145009876017,-71.1041097995362 42.3145589148055,
-71.1041166403905 42.3146168544148,-71.1041258822717 42.3146748022936,
-71.1041375307579 42.3147318674446,-71.1041492906949 42.3147711126569,
-71.1041598612795 42.314808571739,-71.1042515013869 42.3151287620809,
-71.1041173835118 42.3150739481917,-71.1040809891419 42.3151344119048,
-71.1040438678912 42.3151191367447,-71.1040194562988 42.3151832057859,
-71.1038734225584 42.3151140942995,-71.1038446938243 42.3151006300338,
-71.1038315271889 42.315094347535,-71.1037393329282 42.315054824985,
-71.1035447555574 42.3152608696313,-71.1033436658644 42.3151648370544,
-71.1032580383161 42.3152269126061,-71.103223066939 42.3152517403219,
-71.1031880899493 42.3152774590236)),
((-71.1043632495873 42.315113108546,-71.1043583974082 42.3151211109857,
-71.1043443253471 42.3150676015829,-71.1043850704575 42.3150793250568,-71.1043632495873 42.315113108546)))',4326);

SELECT ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)');
	</pre></div><div class="refsection" title="See Also"><a name="idp69082192"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_GeomFromWKB"><div class="refentry.separator"><hr></div><a name="ST_GeomFromWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeomFromWKB — Creates a geometry instance from a Well-Known Binary geometry
		representation (WKB) and optional SRID.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromWKB</b>(</code>bytea  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromWKB</b>(</code>bytea  <var class="pdparam">geom</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69100496"></a><h2>Description</h2><p>The <code class="varname">ST_GeomFromWKB</code> function, takes a well-known
		binary representation of a geometry and a Spatial Reference System ID
		(<code class="varname">SRID</code>) and creates an instance of the appropriate
		geometry type. This function plays the role of the Geometry Factory in
		SQL. This is an alternate name for ST_WKBToSQL.</p><p>If SRID is not specified, it defaults to 0 (Unknown).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.7.2 - the optional SRID is from the conformance suite</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.41</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp69107024"></a><h2>Examples</h2><pre class="programlisting">--Although bytea rep contains single \, these need to be escaped when inserting into a table
		-- unless standard_conforming_strings is set to on.
SELECT ST_AsEWKT(
ST_GeomFromWKB(E'\\001\\002\\000\\000\\000\\002\\000\\000\\000\\037\\205\\353Q\\270~\\\\\\300\\323Mb\\020X\\231C@\\020X9\\264\\310~\\\\\\300)\\\\\\217\\302\\365\\230C@',4326)
);
					  st_asewkt
------------------------------------------------------
 SRID=4326;LINESTRING(-113.98 39.198,-113.981 39.195)
(1 row)

SELECT
  ST_AsText(
	ST_GeomFromWKB(
	  ST_AsEWKB('POINT(2 5)'::geometry)
	)
  );
 st_astext
------------
 POINT(2 5)
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp69141456"></a><h2>See Also</h2><p><a class="xref" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a>, <a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a></p></div></div><div class="refentry" title="ST_LineFromEncodedPolyline"><div class="refentry.separator"><hr></div><a name="ST_LineFromEncodedPolyline"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineFromEncodedPolyline — Creates a LineString from an Encoded Polyline.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromEncodedPolyline</b>(</code>text  <var class="pdparam">polyline</var>, integer  <var class="pdparam">precision=5</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69149392"></a><h2>Description</h2><p>Creates a LineString from an Encoded Polyline string.</p><p>See http://developers.google.com/maps/documentation/utilities/polylinealgorithm</p><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp69151312"></a><h2>Examples</h2><pre class="programlisting">
--Create a line string from a polyline
SELECT ST_AsEWKT(ST_LineFromEncodedPolyline('_p~iF~ps|U_ulLnnqC_mqNvxq`@'));
--result--
LINESTRING(-120.2 38.5,-120.95 40.7,-126.453 43.252)
    </pre></div><div class="refsection" title="See Also"><a name="idp69152848"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a></p></div></div><div class="refentry" title="ST_LineFromMultiPoint"><div class="refentry.separator"><hr></div><a name="ST_LineFromMultiPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineFromMultiPoint — Creates a LineString from a MultiPoint geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromMultiPoint</b>(</code>geometry  <var class="pdparam">aMultiPoint</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69158864"></a><h2>Description</h2><p>Creates a LineString from a MultiPoint geometry.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp69161424"></a><h2>Examples</h2><pre class="programlisting">
--Create a 3d line string from a 3d multipoint
SELECT ST_AsEWKT(ST_LineFromMultiPoint(ST_GeomFromEWKT('MULTIPOINT(1 2 3, 4 5 6, 7 8 9)')));
--result--
LINESTRING(1 2 3,4 5 6,7 8 9)
		</pre></div><div class="refsection" title="See Also"><a name="idp69162960"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a></p></div></div><div class="refentry" title="ST_LineFromText"><div class="refentry.separator"><hr></div><a name="ST_LineFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineFromText — Makes a Geometry from WKT representation with the given SRID. If SRID is
				not given, it defaults to 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69172944"></a><h2>Description</h2><p>Makes a Geometry from WKT with the given SRID. If SRID is
				not give, it defaults to 0.  If WKT passed in is not a LINESTRING, then null is returned.  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance
				suite.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you know all your geometries are LINESTRINGS, its more efficient to just use ST_GeomFromText.
			This just calls ST_GeomFromText and adds additional validation that it returns a linestring.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.2.8</p></div><div class="refsection" title="Examples"><a name="idp69178832"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_LineFromText('LINESTRING(1 2, 3 4)') AS aline, ST_LineFromText('POINT(1 2)') AS null_return;
aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t
		</pre></div><div class="refsection" title="See Also"><a name="idp69180368"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_LineFromWKB"><div class="refentry.separator"><hr></div><a name="ST_LineFromWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineFromWKB — Makes a <code class="varname">LINESTRING</code> from WKB with the given SRID</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromWKB</b>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_LineFromWKB</b>(</code>bytea  <var class="pdparam">WKB</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69198160"></a><h2>Description</h2><p>The <code class="varname">ST_LineFromWKB</code> function, takes a well-known binary
		representation of geometry and a Spatial Reference System ID (<code class="varname">SRID</code>)
		and creates an instance of the appropriate geometry type - in this case, a
		<code class="varname">LINESTRING</code> geometry. This function plays the role of the Geometry
		Factory in SQL.</p><p>If an SRID is not specified, it defaults to 0. <code class="varname">NULL</code> is
		returned if the input <code class="varname">bytea</code>
		does not represent a <code class="varname">LINESTRING</code>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance
				suite.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you know all your geometries are <code class="varname">LINESTRING</code>s, its more
		  efficient to just use <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>.  This function just
		  calls <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> and adds additional validation that
		  it returns a linestring.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.2.9</p></div><div class="refsection" title="Examples"><a name="idp69208016"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_LineFromWKB(ST_AsBinary(ST_GeomFromText('LINESTRING(1 2, 3 4)'))) AS aline,
		ST_LineFromWKB(ST_AsBinary(ST_GeomFromText('POINT(1 2)'))) IS NULL AS null_return;
aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t
		</pre></div><div class="refsection" title="See Also"><a name="idp69209552"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a></p></div></div><div class="refentry" title="ST_LinestringFromWKB"><div class="refentry.separator"><hr></div><a name="ST_LinestringFromWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LinestringFromWKB — Makes a geometry from WKB with the given SRID.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LinestringFromWKB</b>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_LinestringFromWKB</b>(</code>bytea  <var class="pdparam">WKB</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69219152"></a><h2>Description</h2><p>The <code class="varname">ST_LinestringFromWKB</code> function, takes a well-known binary
		representation of geometry and a Spatial Reference System ID (<code class="varname">SRID</code>)
		and creates an instance of the appropriate geometry type - in this case, a
		<code class="varname">LINESTRING</code> geometry. This function plays the role of the Geometry
		Factory in SQL.</p><p>If an SRID is not specified, it defaults to 0.  <code class="varname">NULL</code> is
		returned if the input <code class="varname">bytea</code> does not represent a
		<code class="varname">LINESTRING</code> geometry. This an alias for <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a>.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>OGC SPEC 3.2.6.2 - optional SRID is from the conformance suite.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you know all your geometries are <code class="varname">LINESTRING</code>s, it's more
		  efficient to just use <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>.  This function just calls
		  <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> and adds additional validation that it returns a
		  <code class="varname">LINESTRING</code>.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.2.9</p></div><div class="refsection" title="Examples"><a name="idp69229648"></a><h2>Examples</h2><pre class="programlisting">SELECT
  ST_LineStringFromWKB(
	ST_AsBinary(ST_GeomFromText('LINESTRING(1 2, 3 4)'))
  ) AS aline,
  ST_LinestringFromWKB(
	ST_AsBinary(ST_GeomFromText('POINT(1 2)'))
  ) IS NULL AS null_return;
   aline                            | null_return
------------------------------------------------
010200000002000000000000000000F ... | t</pre></div><div class="refsection" title="See Also"><a name="idp69231312"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a></p></div></div><div class="refentry" title="ST_MakeBox2D"><div class="refentry.separator"><hr></div><a name="ST_MakeBox2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeBox2D — Creates a BOX2D defined by the given point
			geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <b class="fsfunc">ST_MakeBox2D</b>(</code>geometry  <var class="pdparam">pointLowLeft</var>, geometry  <var class="pdparam">pointUpRight</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69238608"></a><h2>Description</h2><p>Creates a BOX2D defined by the given point
			geometries.  This is useful for doing range queries</p></div><div class="refsection" title="Examples"><a name="idp69239888"></a><h2>Examples</h2><pre class="programlisting">
--Return all features that fall reside or partly reside in a US national atlas coordinate bounding box
--It is assumed here that the geometries are stored with SRID = 2163 (US National atlas equal area)
SELECT feature_id, feature_name, the_geom
FROM features
WHERE the_geom &amp;&amp; ST_SetSRID(ST_MakeBox2D(ST_Point(-989502.1875, 528439.5625),
	ST_Point(-987121.375 ,529933.1875)),2163)</pre></div><div class="refsection" title="See Also"><a name="idp69241424"></a><h2>See Also</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_3DMakeBox"><div class="refentry.separator"><hr></div><a name="ST_3DMakeBox"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DMakeBox — Creates a BOX3D defined by the given 3d point
			geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <b class="fsfunc">ST_3DMakeBox</b>(</code>geometry  <var class="pdparam">point3DLowLeftBottom</var>, geometry  <var class="pdparam">point3DUpRightTop</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69249616"></a><h2>Description</h2><p>Creates a BOX3D defined by the given 2 3D point
			geometries. </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This function supports 3d and will not drop the z-index.</p><p>Changed: 2.0.0 In prior versions this used to be called ST_MakeBox3D</p></div><div class="refsection" title="Examples"><a name="idp69252816"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_3DMakeBox(ST_MakePoint(-989502.1875, 528439.5625, 10),
	ST_MakePoint(-987121.375 ,529933.1875, 10)) As abb3d

--bb3d--
--------
BOX3D(-989502.1875 528439.5625 10,-987121.375 529933.1875 10)
	</pre></div><div class="refsection" title="See Also"><a name="idp69254352"></a><h2>See Also</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_MakeLine"><div class="refentry.separator"><hr></div><a name="ST_MakeLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeLine — Creates a Linestring from point, multipoint, or line geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakeLine</b>(</code>geometry set <var class="pdparam">geoms</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_MakeLine</b>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_MakeLine</b>(</code>geometry[] <var class="pdparam">geoms_array</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69266640"></a><h2>Description</h2><p>ST_MakeLine comes in 3 forms: a spatial aggregate that takes
			rows of point, multipoint, or line geometries and returns a line string, a
			function that takes an array of point, multipoint, or line, and a regular
			function that takes two point, multipoint, or line geometries. You
			might want to use a subselect to order points before feeding them
			to  the aggregate version of this function.</p><p>Inputs other than point, multipoint, or lines are ignored.</p><p>
			When adding line components common nodes at the beginning of lines are removed from the output. Common nodes in point and multipoint inputs are not removed.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Availability: 2.3.0 -  Support for multipoint input elements was introduced</p><p>Availability: 2.0.0 -  Support for linestring input elements was introduced</p><p>Availability: 1.4.0 -  ST_MakeLine(geomarray) was introduced. ST_MakeLine aggregate functions was enhanced to handle more points faster.</p></div><div class="refsection" title="Examples: Spatial Aggregate version"><a name="idp69271120"></a><h2>Examples: Spatial Aggregate version</h2><p>This example takes a sequence of GPS points and creates one record for each
			gps travel where the geometry field is a line string composed of the gps points
			in the order of the travel.</p><pre class="programlisting">
-- For pre-PostgreSQL 9.0 - this usually works,
-- but the planner may on occasion choose not to respect the order of the subquery
SELECT gps.gps_track, ST_MakeLine(gps.the_geom) As newgeom
	FROM (SELECT gps_track,gps_time, the_geom
			FROM gps_points ORDER BY gps_track, gps_time) As gps
	GROUP BY gps.gps_track;</pre><pre class="programlisting">
-- If you are using PostgreSQL 9.0+
-- (you can use the new ORDER BY support for aggregates)
-- this is a guaranteed way to get a correctly ordered linestring
-- Your order by part can order by more than one column if needed
SELECT gps.gps_track, ST_MakeLine(gps.the_geom ORDER BY gps_time) As newgeom
	FROM gps_points As gps
	GROUP BY gps.gps_track;</pre></div><div class="refsection" title="Examples: Non-Spatial Aggregate version"><a name="idp69273424"></a><h2>Examples: Non-Spatial Aggregate version</h2><p>First example is a simple one off line string composed of 2 points.  The second formulates
				line strings from 2 points a user draws.  The third is a one-off that joins 2 3d points to create a line in 3d space.</p><pre class="programlisting">
SELECT ST_AsText(ST_MakeLine(ST_MakePoint(1,2), ST_MakePoint(3,4)));
	  st_astext
---------------------
 LINESTRING(1 2,3 4)

SELECT userpoints.id, ST_MakeLine(startpoint, endpoint) As drawn_line
	FROM userpoints ;

SELECT ST_AsEWKT(ST_MakeLine(ST_MakePoint(1,2,3), ST_MakePoint(3,4,5)));
		st_asewkt
-------------------------
 LINESTRING(1 2 3,3 4 5)
			</pre></div><div class="refsection" title="Examples: Using Array version"><a name="idp69275088"></a><h2>Examples: Using Array version</h2><pre class="programlisting">
SELECT ST_MakeLine(ARRAY(SELECT ST_Centroid(the_geom) FROM visit_locations ORDER BY visit_time));

--Making a 3d line with 3 3-d points
SELECT ST_AsEWKT(ST_MakeLine(ARRAY[ST_MakePoint(1,2,3),
				ST_MakePoint(3,4,5), ST_MakePoint(6,6,6)]));
		st_asewkt
-------------------------
LINESTRING(1 2 3,3 4 5,6 6 6)
			</pre></div><div class="refsection" title="See Also"><a name="idp69276624"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a></p></div></div><div class="refentry" title="ST_MakeEnvelope"><div class="refentry.separator"><hr></div><a name="ST_MakeEnvelope"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeEnvelope — Creates a rectangular Polygon formed from the given minimums and maximums. Input
			values must be in SRS specified by the SRID.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakeEnvelope</b>(</code>double precision <var class="pdparam">xmin</var>, double precision <var class="pdparam">ymin</var>, double precision <var class="pdparam">xmax</var>, double precision <var class="pdparam">ymax</var>, integer  <var class="pdparam">srid=unknown</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69288016"></a><h2>Description</h2><p>Creates a rectangular Polygon formed from the minima and maxima. by the given shell. Input
				values must be in SRS specified by the SRID.  If no SRID is specified the unknown spatial reference system is assumed</p><p>Availability: 1.5</p><p>Enhanced: 2.0: Ability to specify an envelope without specifying an SRID was introduced.</p></div><div class="refsection" title="Example: Building a bounding box polygon"><a name="idp69290064"></a><h2>Example: Building a bounding box polygon</h2><pre class="programlisting">
SELECT ST_AsText(ST_MakeEnvelope(10, 10, 11, 11, 4326));

st_asewkt
-----------
POLYGON((10 10, 10 11, 11 11, 11 10, 10 10))
			  </pre></div><div class="refsection" title="See Also"><a name="idp69291344"></a><h2>See Also</h2><p><a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a></p></div></div><div class="refentry" title="ST_MakePolygon"><div class="refentry.separator"><hr></div><a name="ST_MakePolygon"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakePolygon — Creates a Polygon formed by the given shell. Input
			geometries must be closed LINESTRINGS.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePolygon</b>(</code>geometry <var class="pdparam">linestring</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePolygon</b>(</code>geometry <var class="pdparam">outerlinestring</var>, geometry[] <var class="pdparam">interiorlinestrings</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69309904"></a><h2>Description</h2><p>Creates a Polygon formed by the given shell. Input
				geometries must be closed LINESTRINGS. Comes in 2 variants.</p><p>Variant 1:  Takes one closed linestring.</p><p>Variant 2:  Creates a Polygon formed by the given shell and array of
			holes. You can construct a geometry array using ST_Accum or the PostgreSQL ARRAY[] and
			ARRAY() constructs. Input geometries must be closed LINESTRINGS.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function will not accept a MULTILINESTRING.  Use <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a> or <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> to generate line strings.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples: Single closed LINESTRING"><a name="idp69315024"></a><h2>Examples: Single closed LINESTRING</h2><pre class="programlisting">
--2d line
SELECT ST_MakePolygon(ST_GeomFromText('LINESTRING(75.15 29.53,77 29,77.6 29.5, 75.15 29.53)'));
--If linestring is not closed
--you can add the start point to close it
SELECT ST_MakePolygon(ST_AddPoint(foo.open_line, ST_StartPoint(foo.open_line)))
FROM (
SELECT ST_GeomFromText('LINESTRING(75.15 29.53,77 29,77.6 29.5)') As open_line) As foo;

--3d closed line
SELECT ST_MakePolygon(ST_GeomFromText('LINESTRING(75.15 29.53 1,77 29 1,77.6 29.5 1, 75.15 29.53 1)'));

st_asewkt
-----------
POLYGON((75.15 29.53 1,77 29 1,77.6 29.5 1,75.15 29.53 1))

--measured line --
SELECT ST_MakePolygon(ST_GeomFromText('LINESTRINGM(75.15 29.53 1,77 29 1,77.6 29.5 2, 75.15 29.53 2)'));

st_asewkt
----------
POLYGONM((75.15 29.53 1,77 29 1,77.6 29.5 2,75.15 29.53 2))
			  </pre></div><div class="refsection" title="Examples: Outer shell with inner shells"><a name="idp69316304"></a><h2>Examples: Outer shell with inner shells</h2><p>Build a donut with an ant hole</p><pre class="programlisting">
SELECT ST_MakePolygon(
		ST_ExteriorRing(ST_Buffer(foo.line,10)),
	ARRAY[ST_Translate(foo.line,1,1),
		ST_ExteriorRing(ST_Buffer(ST_MakePoint(20,20),1)) ]
	)
FROM
	(SELECT ST_ExteriorRing(ST_Buffer(ST_MakePoint(10,10),10,10))
		As line )
		As foo;
		</pre><p>Build province boundaries with holes
		representing lakes in the province from a set of
		province polygons/multipolygons and water linestrings.
		This is an example of using PostGIS ST_Accum.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The CASE construct is used because feeding a null array into
		ST_MakePolygon results in NULL.</p></td></tr></table></div><p>
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>A left join is used to guarantee we get all provinces back even if they have no lakes.</p></td></tr></table></div><pre class="programlisting">
	SELECT p.gid, p.province_name,
		CASE WHEN
			ST_Accum(w.the_geom) IS NULL THEN p.the_geom
		ELSE  ST_MakePolygon(ST_LineMerge(ST_Boundary(p.the_geom)), ST_Accum(w.the_geom)) END
	FROM
		provinces p LEFT JOIN waterlines w
			ON (ST_Within(w.the_geom, p.the_geom) AND ST_IsClosed(w.the_geom))
	GROUP BY p.gid, p.province_name, p.the_geom;

	--Same example above but utilizing a correlated subquery
	--and PostgreSQL built-in ARRAY() function that converts a row set to an array

	SELECT p.gid,  p.province_name, CASE WHEN
		EXISTS(SELECT w.the_geom
			FROM waterlines w
			WHERE ST_Within(w.the_geom, p.the_geom)
			AND ST_IsClosed(w.the_geom))
		THEN
		ST_MakePolygon(ST_LineMerge(ST_Boundary(p.the_geom)),
			ARRAY(SELECT w.the_geom
				FROM waterlines w
				WHERE ST_Within(w.the_geom, p.the_geom)
				AND ST_IsClosed(w.the_geom)))
		ELSE p.the_geom END As the_geom
	FROM
		provinces p;
			  </pre></div><div class="refsection" title="See Also"><a name="idp69319760"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>,
				<a class="xref" href="#ST_Accum" title="ST_Accum">ST_Accum</a>,
				<a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>,
				<a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>,
				<a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>,
				<a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>,
				<a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>
			</p></div></div><div class="refentry" title="ST_MakePoint"><div class="refentry.separator"><hr></div><a name="ST_MakePoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakePoint — Creates a 2D,3DZ or 4D point geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePoint</b>(</code>double precision <var class="pdparam">x</var>, double precision <var class="pdparam">y</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePoint</b>(</code>double precision <var class="pdparam">x</var>, double precision <var class="pdparam">y</var>, double precision <var class="pdparam">z</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePoint</b>(</code>double precision <var class="pdparam">x</var>, double precision <var class="pdparam">y</var>, double precision <var class="pdparam">z</var>, double precision <var class="pdparam">m</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69339856"></a><h2>Description</h2><p>Creates a 2D,3DZ or 4D point geometry (geometry with measure).
			<code class="varname">ST_MakePoint</code> while not being OGC compliant is
			generally faster and more precise than <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>
			and <a class="xref" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>.  It is also easier to use if
			you have raw coordinates rather than WKT.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note x is longitude and y is latitude</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Use <a class="xref" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a> if you need to make a point with x,y,m.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp69344976"></a><h2>Examples</h2><pre class="programlisting">--Return point with unknown SRID
SELECT ST_MakePoint(-71.1043443253471, 42.3150676015829);

--Return point marked as WGS 84 long lat
SELECT ST_SetSRID(ST_MakePoint(-71.1043443253471, 42.3150676015829),4326);

--Return a 3D point (e.g. has altitude)
SELECT ST_MakePoint(1, 2,1.5);

--Get z of point
SELECT ST_Z(ST_MakePoint(1, 2,1.5));
result
-------
1.5</pre></div><div class="refsection" title="See Also"><a name="idp69346384"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a></p></div></div><div class="refentry" title="ST_MakePointM"><div class="refentry.separator"><hr></div><a name="ST_MakePointM"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakePointM — Creates a point geometry with an x y and m coordinate.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakePointM</b>(</code>float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">m</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69355600"></a><h2>Description</h2><p>Creates a point with x, y and measure coordinates. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note x is longitude and y is latitude.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp69357264"></a><h2>Examples</h2><p>We use ST_AsEWKT in these examples to show the text representation instead of ST_AsText because ST_AsText does not
			support returning M.</p><pre class="programlisting">
--Return EWKT representation of point with unknown SRID
SELECT ST_AsEWKT(ST_MakePointM(-71.1043443253471, 42.3150676015829, 10));

--result
				   st_asewkt
-----------------------------------------------
 POINTM(-71.1043443253471 42.3150676015829 10)

--Return EWKT representation of point with measure marked as WGS 84 long lat
SELECT ST_AsEWKT(ST_SetSRID(ST_MakePointM(-71.1043443253471, 42.3150676015829,10),4326));

						st_asewkt
---------------------------------------------------------
SRID=4326;POINTM(-71.1043443253471 42.3150676015829 10)

--Return a 3d point (e.g. has altitude)
SELECT ST_MakePoint(1, 2,1.5);

--Get m of point
SELECT ST_M(ST_MakePointM(-71.1043443253471, 42.3150676015829,10));
result
-------
10
			  </pre></div><div class="refsection" title="See Also"><a name="idp69358928"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div><div class="refentry" title="ST_MLineFromText"><div class="refentry.separator"><hr></div><a name="ST_MLineFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MLineFromText — Return a specified ST_MultiLineString value from WKT representation.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MLineFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_MLineFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69368912"></a><h2>Description</h2><p>Makes a Geometry from  Well-Known-Text (WKT) with the given SRID. If SRID is
			not give, it defaults to 0.</p><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance
			suite</p><p>Returns null if the WKT is not a MULTILINESTRING</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are points, don't use this function.
				It is slower than ST_GeomFromText since it adds an additional validation step.
			</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.SQL-MM 3: 9.4.4</p></div><div class="refsection" title="Examples"><a name="idp69374800"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MLineFromText('MULTILINESTRING((1 2, 3 4), (4 5, 6 7))');</pre></div><div class="refsection" title="See Also"><a name="idp69376336"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_MPointFromText"><div class="refentry.separator"><hr></div><a name="ST_MPointFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MPointFromText — Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MPointFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_MPointFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69389648"></a><h2>Description</h2><p>Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance
			suite</p><p>Returns null if the WKT is not a MULTIPOINT</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are points, don't use this function.
				It is slower than ST_GeomFromText since it adds an additional validation step.
			</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> 3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 9.2.4</p></div><div class="refsection" title="Examples"><a name="idp69395536"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MPointFromText('MULTIPOINT(1 2, 3 4)');
SELECT ST_MPointFromText('MULTIPOINT(-70.9590 42.1180, -70.9611 42.1223)', 4326);</pre></div><div class="refsection" title="See Also"><a name="idp69397072"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_MPolyFromText"><div class="refentry.separator"><hr></div><a name="ST_MPolyFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MPolyFromText — Makes a MultiPolygon Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MPolyFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_MPolyFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69406288"></a><h2>Description</h2><p>Makes a MultiPolygon from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance suite</p><p>Throws an error if the WKT is not a MULTIPOLYGON</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are multipolygons, don't use this function.
				It is slower than ST_GeomFromText since it adds an additional validation step.
			</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 9.6.4</p></div><div class="refsection" title="Examples"><a name="idp69412176"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MPolyFromText('MULTIPOLYGON(((0 0 1,20 0 1,20 20 1,0 20 1,0 0 1),(5 5 3,5 7 3,7 7 3,7 5 3,5 5 3)))');
SELECt ST_MPolyFromText('MULTIPOLYGON(((-70.916 42.1002,-70.9468 42.0946,-70.9765 42.0872,-70.9754 42.0875,-70.9749 42.0879,-70.9752 42.0881,-70.9754 42.0891,-70.9758 42.0894,-70.9759 42.0897,-70.9759 42.0899,-70.9754 42.0902,-70.9756 42.0906,-70.9753 42.0907,-70.9753 42.0917,-70.9757 42.0924,-70.9755 42.0928,-70.9755 42.0942,-70.9751 42.0948,-70.9755 42.0953,-70.9751 42.0958,-70.9751 42.0962,-70.9759 42.0983,-70.9767 42.0987,-70.9768 42.0991,-70.9771 42.0997,-70.9771 42.1003,-70.9768 42.1005,-70.977 42.1011,-70.9766 42.1019,-70.9768 42.1026,-70.9769 42.1033,-70.9775 42.1042,-70.9773 42.1043,-70.9776 42.1043,-70.9778 42.1048,-70.9773 42.1058,-70.9774 42.1061,-70.9779 42.1065,-70.9782 42.1078,-70.9788 42.1085,-70.9798 42.1087,-70.9806 42.109,-70.9807 42.1093,-70.9806 42.1099,-70.9809 42.1109,-70.9808 42.1112,-70.9798 42.1116,-70.9792 42.1127,-70.979 42.1129,-70.9787 42.1134,-70.979 42.1139,-70.9791 42.1141,-70.9987 42.1116,-71.0022 42.1273,
	-70.9408 42.1513,-70.9315 42.1165,-70.916 42.1002)))',4326);
</pre></div><div class="refsection" title="See Also"><a name="idp69413712"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_Point"><div class="refentry.separator"><hr></div><a name="ST_Point"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Point — Returns an ST_Point with the given coordinate values. OGC alias for ST_MakePoint.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Point</b>(</code>float  <var class="pdparam">x_lon</var>, float  <var class="pdparam">y_lat</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69433424"></a><h2>Description</h2><p>Returns an ST_Point with the given coordinate values. MM compliant alias for ST_MakePoint that takes just an x and y.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 6.1.2</p></div><div class="refsection" title="Examples: Geometry"><a name="idp69436240"></a><h2>Examples: Geometry</h2><pre class="programlisting">SELECT ST_SetSRID(ST_Point(-71.1043443253471, 42.3150676015829),4326)</pre></div><div class="refsection" title="Examples: Geography"><a name="idp69437520"></a><h2>Examples: Geography</h2><pre class="programlisting">SELECT CAST(ST_SetSRID(ST_Point(-71.1043443253471, 42.3150676015829),4326) As geography);</pre><pre class="programlisting">-- the :: is PostgreSQL short-hand for casting.
SELECT ST_SetSRID(ST_Point(-71.1043443253471, 42.3150676015829),4326)::geography;</pre><pre class="programlisting">--If your point coordinates are in a different spatial reference from WGS-84 long lat, then you need to transform before casting
-- This example we convert a point in Pennsylvania State Plane feet to WGS 84 and then geography
SELECT ST_Transform(ST_SetSRID(ST_Point(3637510, 3014852),2273),4326)::geography;</pre></div><div class="refsection" title="See Also"><a name="idp69440080"></a><h2>See Also</h2><p><a class="xref" href="#Geography_Basics" title="4.2.1. Geography Basics">Section 4.2.1, “Geography Basics”</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_PointFromGeoHash"><div class="refentry.separator"><hr></div><a name="ST_PointFromGeoHash"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointFromGeoHash — Return a point from a GeoHash string.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">point <b class="fsfunc">ST_PointFromGeoHash</b>(</code>text  <var class="pdparam">geohash</var>, integer  <var class="pdparam">precision=full_precision_of_geohash</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69452496"></a><h2>Description</h2><p>Return a point from a GeoHash string. The point represents the center point of the GeoHash.</p><p>If no <code class="varname">precision</code> is specified ST_PointFromGeoHash returns a point based on full precision of the input GeoHash string.</p><p>If <code class="varname">precision</code> is specified ST_PointFromGeoHash will use that many characters from the GeoHash to create the point.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp69455568"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0'));
          st_astext
------------------------------
 POINT(-115.172816 36.114646)

SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 4));
             st_astext
-----------------------------------
 POINT(-115.13671875 36.123046875)

SELECT ST_AsText(ST_PointFromGeoHash('9qqj7nmxncgyy4d0dbxqz0', 10));
                 st_astext
-------------------------------------------
 POINT(-115.172815918922 36.1146435141563)
		
		</pre></div><div class="refsection" title="See Also"><a name="idp69456976"></a><h2>See Also</h2><p> <a class="xref" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>, <a class="xref" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>, <a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a></p></div></div><div class="refentry" title="ST_PointFromText"><div class="refentry.separator"><hr></div><a name="ST_PointFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointFromText — Makes a point Geometry from WKT with the given SRID. If SRID is
			not given, it defaults to unknown.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PointFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_PointFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69467088"></a><h2>Description</h2><p>Constructs a PostGIS ST_Geometry point object from the OGC Well-Known text representation. If SRID is
			not give, it defaults to unknown (currently 0).  If geometry is not a WKT point representation, returns null.
			If completely invalid WKT, then throws an error.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>There are 2 variants of ST_PointFromText function, the first takes no SRID and returns a geometry
					with no defined spatial reference system.  The second takes a spatial reference id as the second argument
					and returns an ST_Geometry that includes this srid as part of its meta-data.  The srid must be defined
					in the spatial_ref_sys table.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are points, don't use this function.
					It is slower than ST_GeomFromText since it adds an additional validation step.  If you are building points from long lat coordinates and care more about performance and accuracy than OGC compliance, use <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a> or OGC compliant alias <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>.   </p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2 - option SRID is from the conformance suite.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 6.1.8</p></div><div class="refsection" title="Examples"><a name="idp69474000"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_PointFromText('POINT(-71.064544 42.28787)');
SELECT ST_PointFromText('POINT(-71.064544 42.28787)', 4326);
	</pre></div><div class="refsection" title="See Also"><a name="idp69475408"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>, <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_PointFromWKB"><div class="refentry.separator"><hr></div><a name="ST_PointFromWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointFromWKB — Makes a geometry from WKB with the given SRID</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromWKB</b>(</code>bytea  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_GeomFromWKB</b>(</code>bytea  <var class="pdparam">geom</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69485776"></a><h2>Description</h2><p>The <code class="varname">ST_PointFromWKB</code> function, takes a well-known binary
			representation of geometry and a Spatial Reference System ID (<code class="varname">SRID</code>)
			and creates an instance of the appropriate geometry type - in this case, a
			<code class="varname">POINT</code> geometry. This function plays the role of the Geometry
			Factory in SQL.</p><p>If an SRID is not specified, it defaults to 0.  <code class="varname">NULL</code> is
		returned if the input <code class="varname">bytea</code> does not represent a
		<code class="varname">POINT</code> geometry.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.7.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 6.1.9</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp69495376"></a><h2>Examples</h2><pre class="programlisting">SELECT
  ST_AsText(
	ST_PointFromWKB(
	  ST_AsEWKB('POINT(2 5)'::geometry)
	)
  );
 st_astext
------------
 POINT(2 5)
(1 row)

SELECT
  ST_AsText(
	ST_PointFromWKB(
	  ST_AsEWKB('LINESTRING(2 5, 2 6)'::geometry)
	)
  );
 st_astext
-----------

(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp69496912"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>, <a class="xref" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a></p></div></div><div class="refentry" title="ST_Polygon"><div class="refentry.separator"><hr></div><a name="ST_Polygon"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Polygon — Returns a polygon built from the specified linestring and SRID.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Polygon</b>(</code>geometry  <var class="pdparam">aLineString</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69504336"></a><h2>Description</h2><p>Returns a polygon built from the specified linestring and SRID.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Polygon is similar to first version oST_MakePolygon except it also sets the spatial ref sys (SRID) of the polygon. Will not work with MULTILINESTRINGS
			so use LineMerge to merge multilines.  Also does not create polygons with holes.  Use ST_MakePolygon for that.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.3.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp69510992"></a><h2>Examples</h2><pre class="programlisting">
--a 2d polygon
SELECT ST_Polygon(ST_GeomFromText('LINESTRING(75.15 29.53,77 29,77.6 29.5, 75.15 29.53)'), 4326);

--result--
POLYGON((75.15 29.53,77 29,77.6 29.5,75.15 29.53))
--a 3d polygon
SELECT ST_AsEWKT(ST_Polygon(ST_GeomFromEWKT('LINESTRING(75.15 29.53 1,77 29 1,77.6 29.5 1, 75.15 29.53 1)'), 4326));

result
------
SRID=4326;POLYGON((75.15 29.53 1,77 29 1,77.6 29.5 1,75.15 29.53 1))
			</pre></div><div class="refsection" title="See Also"><a name="idp69512528"></a><h2>See Also</h2><p> <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a></p></div></div><div class="refentry" title="ST_PolygonFromText"><div class="refentry.separator"><hr></div><a name="ST_PolygonFromText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PolygonFromText — Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PolygonFromText</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_PolygonFromText</b>(</code>text  <var class="pdparam">WKT</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69523920"></a><h2>Description</h2><p>Makes a Geometry from WKT with the given SRID. If SRID is
			not give, it defaults to 0.  Returns null if WKT is not a polygon.</p><p>OGC SPEC 3.2.6.2 - option SRID is from the conformance
			suite</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are absolutely sure all your WKT geometries are polygons, don't use this function.
					It is slower than ST_GeomFromText since it adds an additional validation step. </p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.6.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.3.6</p></div><div class="refsection" title="Examples"><a name="idp69529168"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_PolygonFromText('POLYGON((-71.1776585052917 42.3902909739571,-71.1776820268866 42.3903701743239,
-71.1776063012595 42.3903825660754,-71.1775826583081 42.3903033653531,-71.1776585052917 42.3902909739571))');
st_polygonfromtext
------------------
010300000001000000050000006...


SELECT ST_PolygonFromText('POINT(1 2)') IS NULL as point_is_notpoly;

point_is_not_poly
----------
t
</pre></div><div class="refsection" title="See Also"><a name="idp69539024"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_WKBToSQL"><div class="refentry.separator"><hr></div><a name="ST_WKBToSQL"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WKBToSQL — Return a specified ST_Geometry value from Well-Known Binary representation (WKB).  This is an alias name for ST_GeomFromWKB that takes no srid</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_WKBToSQL</b>(</code>bytea  <var class="pdparam">WKB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69544912"></a><h2>Description</h2><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.36</p></div><div class="refsection" title="See Also"><a name="idp69547216"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a></p></div></div><div class="refentry" title="ST_WKTToSQL"><div class="refentry.separator"><hr></div><a name="ST_WKTToSQL"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WKTToSQL — Return a specified ST_Geometry value from Well-Known Text representation (WKT).  This is an alias name for ST_GeomFromText</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_WKTToSQL</b>(</code>text  <var class="pdparam">WKT</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp69553232"></a><h2>Description</h2><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.34</p></div><div class="refsection" title="See Also"><a name="idp69555536"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div></div><div class="sect1" title="8.5. Geometry Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Geometry_Accessors"></a>8.5. Geometry Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#GeometryType">GeometryType</a></span><span class="refpurpose"> — Returns the type of the geometry as a string. Eg:
			'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</span></dt><dt><span class="refentrytitle"><a href="#ST_Boundary">ST_Boundary</a></span><span class="refpurpose"> — Returns the closure of the combinatorial boundary of this
			Geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_CoordDim">ST_CoordDim</a></span><span class="refpurpose"> — Return the coordinate dimension of the ST_Geometry value.</span></dt><dt><span class="refentrytitle"><a href="#ST_Dimension">ST_Dimension</a></span><span class="refpurpose"> — The inherent dimension of this Geometry object, which must
			be less than or equal to the coordinate dimension. </span></dt><dt><span class="refentrytitle"><a href="#ST_EndPoint">ST_EndPoint</a></span><span class="refpurpose"> — Returns the last point of a <code class="varname">LINESTRING</code> or <code class="varname">CIRCULARLINESTRING</code>
		geometry as a <code class="varname">POINT</code>.</span></dt><dt><span class="refentrytitle"><a href="#ST_Envelope">ST_Envelope</a></span><span class="refpurpose"> — Returns a geometry representing the double precision (float8) bounding box of the
			supplied geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_BoundingDiagonal">ST_BoundingDiagonal</a></span><span class="refpurpose"> — Returns the diagonal of the supplied geometry's bounding box.</span></dt><dt><span class="refentrytitle"><a href="#ST_ExteriorRing">ST_ExteriorRing</a></span><span class="refpurpose"> — Returns a line string representing the exterior ring of the <code class="varname">POLYGON</code> geometry. Return
				NULL if the geometry is not a polygon.  Will not work with MULTIPOLYGON</span></dt><dt><span class="refentrytitle"><a href="#ST_GeometryN">ST_GeometryN</a></span><span class="refpurpose"> — Return the 1-based Nth geometry if the geometry is a
			GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE
			Otherwise, return NULL.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeometryType">ST_GeometryType</a></span><span class="refpurpose"> — Return the geometry type of the ST_Geometry value.</span></dt><dt><span class="refentrytitle"><a href="#ST_InteriorRingN">ST_InteriorRingN</a></span><span class="refpurpose"> — Return the Nth interior linestring ring of the polygon geometry.
			Return NULL if the geometry is not a polygon or the given N is out
			of range.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsClosed">ST_IsClosed</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if the
		<code class="varname">LINESTRING</code>'s start and end points are coincident. For Polyhedral surface is closed (volumetric).
		</span></dt><dt><span class="refentrytitle"><a href="#ST_IsCollection">ST_IsCollection</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if the argument is a
                  collection (<code class="varname">MULTI*</code>, <code class="varname">GEOMETRYCOLLECTION</code>, ...)
                </span></dt><dt><span class="refentrytitle"><a href="#ST_IsEmpty">ST_IsEmpty</a></span><span class="refpurpose"> — Returns true if this Geometry is an empty geometrycollection, polygon, point etc.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsRing">ST_IsRing</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if this
	  <code class="varname">LINESTRING</code> is both closed and simple.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsSimple">ST_IsSimple</a></span><span class="refpurpose"> — Returns (TRUE) if this Geometry has no anomalous geometric
				points, such as self intersection or self tangency.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsValid">ST_IsValid</a></span><span class="refpurpose"> — Returns <code class="varname">true</code> if the
		<code class="varname">ST_Geometry</code> is well formed.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_IsValidReason">ST_IsValidReason</a></span><span class="refpurpose"> — Returns text stating if a geometry is valid or not and if not valid, a reason why.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsValidDetail">ST_IsValidDetail</a></span><span class="refpurpose"> — Returns a valid_detail (valid,reason,location) row stating if a geometry is valid or not and if not valid, a reason why and a location where.</span></dt><dt><span class="refentrytitle"><a href="#ST_M">ST_M</a></span><span class="refpurpose"> — Return the M coordinate of the point, or NULL if not
			available. Input must be a point.</span></dt><dt><span class="refentrytitle"><a href="#ST_NDims">ST_NDims</a></span><span class="refpurpose"> — Returns coordinate dimension of the geometry as a small int.
			Values are: 2,3 or 4.</span></dt><dt><span class="refentrytitle"><a href="#ST_NPoints">ST_NPoints</a></span><span class="refpurpose"> — Return the number of points (vertexes) in a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_NRings">ST_NRings</a></span><span class="refpurpose"> — If the geometry is a polygon or multi-polygon returns the number of rings.</span></dt><dt><span class="refentrytitle"><a href="#ST_NumGeometries">ST_NumGeometries</a></span><span class="refpurpose"> — If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the
			number of geometries, for single geometries will return 1, otherwise return NULL.</span></dt><dt><span class="refentrytitle"><a href="#ST_NumInteriorRings">ST_NumInteriorRings</a></span><span class="refpurpose"> — Return the number of interior rings of a polygon geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_NumInteriorRing">ST_NumInteriorRing</a></span><span class="refpurpose"> — Return the number of interior rings of a polygon in
			the geometry. Synonym for ST_NumInteriorRings. </span></dt><dt><span class="refentrytitle"><a href="#ST_NumPatches">ST_NumPatches</a></span><span class="refpurpose"> — Return the number of faces on a Polyhedral Surface.  Will return null for non-polyhedral geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_NumPoints">ST_NumPoints</a></span><span class="refpurpose"> — Return the number of points in an ST_LineString or
		  ST_CircularString value.</span></dt><dt><span class="refentrytitle"><a href="#ST_PatchN">ST_PatchN</a></span><span class="refpurpose"> — Return the 1-based Nth geometry (face) if the geometry is a
			POLYHEDRALSURFACE, POLYHEDRALSURFACEM.
			Otherwise, return NULL.</span></dt><dt><span class="refentrytitle"><a href="#ST_PointN">ST_PointN</a></span><span class="refpurpose"> — Return the Nth point in the first LineString or circular LineString in the
			geometry. Negative values are counted backwards from the end of the LineString. Returns NULL if there is no linestring in the
			geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Points">ST_Points</a></span><span class="refpurpose"> — Returns a MultiPoint containing all of the coordinates of a geometry.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_SRID">ST_SRID</a></span><span class="refpurpose"> — Returns the spatial reference identifier for the ST_Geometry as defined in spatial_ref_sys table.</span></dt><dt><span class="refentrytitle"><a href="#ST_StartPoint">ST_StartPoint</a></span><span class="refpurpose"> — Returns the first point of a <code class="varname">LINESTRING</code>
	  geometry as a <code class="varname">POINT</code>.</span></dt><dt><span class="refentrytitle"><a href="#ST_Summary">ST_Summary</a></span><span class="refpurpose"> — 
Returns a text summary of the contents of the geometry.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_X">ST_X</a></span><span class="refpurpose"> — Return the X coordinate of the point, or NULL if not
			available. Input must be a point.</span></dt><dt><span class="refentrytitle"><a href="#ST_XMax">ST_XMax</a></span><span class="refpurpose"> — Returns X maxima of a bounding box 2d or 3d or a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_XMin">ST_XMin</a></span><span class="refpurpose"> — Returns X minima of a bounding box 2d or 3d or a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Y">ST_Y</a></span><span class="refpurpose"> — Return the Y coordinate of the point, or NULL if not
			available. Input must be a point.</span></dt><dt><span class="refentrytitle"><a href="#ST_YMax">ST_YMax</a></span><span class="refpurpose"> — Returns Y maxima of a bounding box 2d or 3d or a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_YMin">ST_YMin</a></span><span class="refpurpose"> — Returns Y minima of a bounding box 2d or 3d or a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Z">ST_Z</a></span><span class="refpurpose"> — Return the Z coordinate of the point, or NULL if not
			available. Input must be a point.</span></dt><dt><span class="refentrytitle"><a href="#ST_ZMax">ST_ZMax</a></span><span class="refpurpose"> — Returns Z minima of a bounding box 2d or 3d or a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Zmflag">ST_Zmflag</a></span><span class="refpurpose"> — Returns ZM (dimension semantic) flag of the geometries as a
			small int. Values are: 0=2d, 1=3dm, 2=3dz, 3=4d.</span></dt><dt><span class="refentrytitle"><a href="#ST_ZMin">ST_ZMin</a></span><span class="refpurpose"> — Returns Z minima of a bounding box 2d or 3d or a geometry.</span></dt></dl></div><div class="refentry" title="GeometryType"><a name="GeometryType"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GeometryType — Returns the type of the geometry as a string. Eg:
			'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">GeometryType</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70312656"></a><h2>Description</h2><p>Returns the type of the geometry as a string. Eg:
		'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</p><p>OGC SPEC s2.1.1.1 - Returns the name of the instantiable
		subtype of Geometry of which this Geometry instance is a member.
		The name of the instantiable subtype of Geometry is returned as a
		string.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function also indicates if the geometry is measured,
		  by returning a string of the form 'POINTM'.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp70330576"></a><h2>Examples</h2><pre class="programlisting">SELECT GeometryType(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
 geometrytype
--------------
 LINESTRING
</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
			--result
			POLYHEDRALSURFACE
			</pre><pre class="programlisting">SELECT GeometryType(geom) as result
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
 result
--------
 TIN    </pre></div><div class="refsection" title="See Also"><a name="idp70333264"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a></p></div></div><div class="refentry" title="ST_Boundary"><div class="refentry.separator"><hr></div><a name="ST_Boundary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Boundary — Returns the closure of the combinatorial boundary of this
			Geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Boundary</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70339152"></a><h2>Description</h2><p>Returns the closure of the combinatorial boundary of this
			Geometry. The combinatorial boundary is defined as described in
			section 3.12.3.2 of the OGC SPEC. Because the result of this
			function is a closure, and hence topologically closed, the
			resulting boundary can be represented using representational
			geometry primitives as discussed in the OGC SPEC, section
			3.12.2.</p><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 2.0.0, this function throws an exception if used with <code class="varname">GEOMETRYCOLLECTION</code>. From 2.0.0 up it will return NULL instead (unsupported input).</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> OGC SPEC s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.14</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Enhanced: 2.1.0 support for Triangle was introduced</p></div><div class="refsection" title="Examples"><a name="idp70346704"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_boundary01.png"><div class="caption"><p>Linestring with boundary points overlaid</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_Boundary(geom)
FROM (SELECT 'LINESTRING(100 150,50 60, 70 80, 160 170)'::geometry As geom) As f;
				</pre><p>
</p><pre class="screen">-- ST_AsText output
MULTIPOINT(100 150,160 170)
</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_boundary02.png"><div class="caption"><p>polygon holes with boundary multilinestring</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_Boundary(geom)
FROM (SELECT
'POLYGON (( 10 130, 50 190, 110 190, 140 150, 150 80, 100 10, 20 40, 10 130 ),
	( 70 40, 100 50, 120 80, 80 110, 50 90, 70 40 ))'::geometry As geom) As f;
				</pre><p>
</p><pre class="screen">-- ST_AsText output
MULTILINESTRING((10 130,50 190,110 190,140 150,150 80,100 10,20 40,10 130),
	(70 40,100 50,120 80,80 110,50 90,70 40))
</pre><p>
						</p></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_Boundary(ST_GeomFromText('LINESTRING(1 1,0 0, -1 1)')));
st_astext
-----------
MULTIPOINT(1 1,-1 1)

SELECT ST_AsText(ST_Boundary(ST_GeomFromText('POLYGON((1 1,0 0, -1 1, 1 1))')));
st_astext
----------
LINESTRING(1 1,0 0,-1 1,1 1)

--Using a 3d polygon
SELECT ST_AsEWKT(ST_Boundary(ST_GeomFromEWKT('POLYGON((1 1 1,0 0 1, -1 1 1, 1 1 1))')));

st_asewkt
-----------------------------------
LINESTRING(1 1 1,0 0 1,-1 1 1,1 1 1)

--Using a 3d multilinestring
SELECT ST_AsEWKT(ST_Boundary(ST_GeomFromEWKT('MULTILINESTRING((1 1 1,0 0 0.5, -1 1 1),(1 1 0.5,0 0 0.5, -1 1 0.5, 1 1 0.5) )')));

st_asewkt
----------
MULTIPOINT(-1 1 1,1 1 0.75)
</pre></div><div class="refsection" title="See Also"><a name="idp70356944"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a></p></div></div><div class="refentry" title="ST_CoordDim"><div class="refentry.separator"><hr></div><a name="ST_CoordDim"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CoordDim — Return the coordinate dimension of the ST_Geometry value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_CoordDim</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70363728"></a><h2>Description</h2><p>Return the coordinate dimension of the ST_Geometry value.</p><p>This is the MM compliant alias name for <a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp70374096"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_CoordDim('CIRCULARSTRING(1 2 3, 1 3 4, 5 6 7, 8 9 10, 11 12 13)');
			---result--
				3

				SELECT ST_CoordDim(ST_Point(1,2));
			--result--
				2

		</pre></div><div class="refsection" title="See Also"><a name="idp70375632"></a><h2>See Also</h2><p><a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a></p></div></div><div class="refentry" title="ST_Dimension"><div class="refentry.separator"><hr></div><a name="ST_Dimension"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Dimension — The inherent dimension of this Geometry object, which must
			be less than or equal to the coordinate dimension. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_Dimension</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70381648"></a><h2>Description</h2><p>The inherent dimension of this Geometry object, which must
			be less than or equal to the coordinate dimension. OGC SPEC
			s2.1.1.1 - returns 0 for <code class="varname">POINT</code>, 1 for <code class="varname">LINESTRING</code>, 2 for <code class="varname">POLYGON</code>, and
			the largest dimension of the components of a
			<code class="varname">GEOMETRYCOLLECTION</code>.
			If unknown (empty geometry) null is returned.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.2</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TINs was introduced. No longer throws an exception if given empty geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 2.0.0, this function throws an exception if used with empty geometry. </p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp70389840"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Dimension('GEOMETRYCOLLECTION(LINESTRING(1 1,0 0),POINT(0 0))');
ST_Dimension
-----------
1
</pre></div><div class="refsection" title="See Also"><a name="idp70391248"></a><h2>See Also</h2><p><a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a></p></div></div><div class="refentry" title="ST_EndPoint"><div class="refentry.separator"><hr></div><a name="ST_EndPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_EndPoint — Returns the last point of a <code class="varname">LINESTRING</code> or <code class="varname">CIRCULARLINESTRING</code>
		geometry as a <code class="varname">POINT</code>.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_EndPoint</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70398288"></a><h2>Description</h2><p>Returns the last point of a <code class="varname">LINESTRING</code> geometry
		as a <code class="varname">POINT</code> or <code class="varname">NULL</code> if the input
		parameter is not a <code class="varname">LINESTRING</code>.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.4</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.
	  The older behavior was an undocumented feature, but people who assumed they had their data stored as LINESTRING
	  may experience these returning NULL in 2.0 now.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70405840"></a><h2>Examples</h2><pre class="programlisting">postgis=# SELECT ST_AsText(ST_EndPoint('LINESTRING(1 1, 2 2, 3 3)'::geometry));
 st_astext
------------
 POINT(3 3)
(1 row)

postgis=# SELECT ST_EndPoint('POINT(1 1)'::geometry) IS NULL AS is_null;
  is_null
----------
 t
(1 row)

--3d endpoint
SELECT ST_AsEWKT(ST_EndPoint('LINESTRING(1 1 2, 1 2 3, 0 0 5)'));
  st_asewkt
--------------
 POINT(0 0 5)
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp70407248"></a><h2>See Also</h2><p><a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a>, <a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a></p></div></div><div class="refentry" title="ST_Envelope"><div class="refentry.separator"><hr></div><a name="ST_Envelope"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Envelope — Returns a geometry representing the double precision (float8) bounding box of the
			supplied geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Envelope</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70413520"></a><h2>Description</h2><p>Returns the float8 minimum bounding box for the supplied geometry, as a geometry.
			The polygon is defined by the corner points of the bounding box
			((<code class="varname">MINX</code>, <code class="varname">MINY</code>),
			(<code class="varname">MINX</code>, <code class="varname">MAXY</code>),
			(<code class="varname">MAXX</code>, <code class="varname">MAXY</code>),
			(<code class="varname">MAXX</code>, <code class="varname">MINY</code>),
			(<code class="varname">MINX</code>, <code class="varname">MINY</code>)). (PostGIS will add a
			<code class="varname">ZMIN</code>/<code class="varname">ZMAX</code> coordinate as
			well).</p><p>Degenerate cases (vertical lines, points) will return a geometry of
			lower dimension than <code class="varname">POLYGON</code>, ie.
			<code class="varname">POINT</code> or <code class="varname">LINESTRING</code>.</p><p>Availability: 1.5.0 behavior changed to output double precision instead of float4</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.15</p></div><div class="refsection" title="Examples"><a name="idp70428624"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_Envelope('POINT(1 3)'::geometry));
 st_astext
------------
 POINT(1 3)
(1 row)


SELECT ST_AsText(ST_Envelope('LINESTRING(0 0, 1 3)'::geometry));
		   st_astext
--------------------------------
 POLYGON((0 0,0 3,1 3,1 0,0 0))
(1 row)


SELECT ST_AsText(ST_Envelope('POLYGON((0 0, 0 1, 1.0000001 1, 1.0000001 0, 0 0))'::geometry));
						  st_astext
--------------------------------------------------------------
 POLYGON((0 0,0 1,1.00000011920929 1,1.00000011920929 0,0 0))
(1 row)
SELECT ST_AsText(ST_Envelope('POLYGON((0 0, 0 1, 1.0000000001 1, 1.0000000001 0, 0 0))'::geometry));
						  st_astext
--------------------------------------------------------------
 POLYGON((0 0,0 1,1.00000011920929 1,1.00000011920929 0,0 0))
(1 row)

SELECT Box3D(geom), Box2D(geom), ST_AsText(ST_Envelope(geom)) As envelopewkt
	FROM (SELECT 'POLYGON((0 0, 0 1000012333334.34545678, 1.0000001 1, 1.0000001 0, 0 0))'::geometry As geom) As foo;


	</pre></div><div class="refsection" title="See Also"><a name="idp70430160"></a><h2>See Also</h2><p><a class="xref" href="#Box2D" title="Box2D">Box2D</a>, <a class="xref" href="#Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" title="ST_BoundingDiagonal"><div class="refentry.separator"><hr></div><a name="ST_BoundingDiagonal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BoundingDiagonal — Returns the diagonal of the supplied geometry's bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_BoundingDiagonal</b>(</code>geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">fits=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70437712"></a><h2>Description</h2><p>
Returns the diagonal of the supplied geometry's bounding box as linestring.
If the input geometry is empty, the diagonal line is also empty, otherwise
it is a 2-points linestring with minimum values of each dimension in its
start point and maximum values in its end point.
			</p><p>
The returned linestring geometry always retains SRID and dimensionality
(Z and M presence) of the input geometry.
			</p><p>
The <code class="varname">fits</code> parameter specifies if the best fit is needed.
If false, the diagonal of a somewhat larger bounding box can be accepted
(is faster to obtain for geometries with a lot of vertices). In any case
the bounding box of the returned diagonal line always covers the input
geometry.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
In degenerate cases (a single vertex in input) the returned linestring
will be topologically invalid (no interior). This does not make the
return semantically invalid.
			</p></td></tr></table></div><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p></div><div class="refsection" title="Examples"><a name="idp70461520"></a><h2>Examples</h2><pre class="programlisting">
-- Get the minimum X in a buffer around a point
SELECT ST_X(ST_StartPoint(ST_BoundingDiagonal(
  ST_Buffer(ST_MakePoint(0,0),10)
)));
 st_x
------
  -10
		</pre></div><div class="refsection" title="See Also"><a name="idp70462800"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>,
<a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>,
<a class="xref" href="#ST_X" title="ST_X">ST_X</a>,
<a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>,
<a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a>,
<a class="xref" href="#ST_M" title="ST_M">ST_M</a>,
<a class="xref" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a>
		</p></div></div><div class="refentry" title="ST_ExteriorRing"><div class="refentry.separator"><hr></div><a name="ST_ExteriorRing"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ExteriorRing — Returns a line string representing the exterior ring of the <code class="varname">POLYGON</code> geometry. Return
				NULL if the geometry is not a polygon.  Will not work with MULTIPOLYGON</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ExteriorRing</b>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70455376"></a><h2>Description</h2><p>Returns a line string representing the exterior ring of the <code class="varname">POLYGON</code> geometry. Return
				NULL if the geometry is not a polygon.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Only works with POLYGON geometry types</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> 2.1.5.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.2.3, 8.3.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70470224"></a><h2>Examples</h2><pre class="programlisting">
--If you have a table of polygons
SELECT gid, ST_ExteriorRing(the_geom) AS ering
FROM sometable;

--If you have a table of MULTIPOLYGONs
--and want to return a MULTILINESTRING composed of the exterior rings of each polygon
SELECT gid, ST_Collect(ST_ExteriorRing(the_geom)) AS erings
	FROM (SELECT gid, (ST_Dump(the_geom)).geom As the_geom
			FROM sometable) As foo
GROUP BY gid;

--3d Example
SELECT ST_AsEWKT(
	ST_ExteriorRing(
	ST_GeomFromEWKT('POLYGON((0 0 1, 1 1 1, 1 2 1, 1 1 1, 0 0 1))')
	)
);

st_asewkt
---------
LINESTRING(0 0 1,1 1 1,1 2 1,1 1 1,0 0 1)
</pre></div><div class="refsection" title="See Also"><a name="idp70471504"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a>,
<a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>,
<a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>
		</p></div></div><div class="refentry" title="ST_GeometryN"><div class="refentry.separator"><hr></div><a name="ST_GeometryN"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeometryN — Return the 1-based Nth geometry if the geometry is a
			GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE
			Otherwise, return NULL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeometryN</b>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70479568"></a><h2>Description</h2><p>Return the 1-based Nth geometry if the geometry is a
			GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE
			Otherwise, return NULL</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index is 1-based as for OGC specs since version 0.8.0.
		  Previous versions implemented this as 0-based instead.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you want to extract all geometries, of a geometry, ST_Dump is more efficient and will also work for singular geoms.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Changed: 2.0.0 Prior versions would return NULL for singular geometries.  This was changed to return the geometry for ST_GeometryN(..,1) case.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 9.1.5</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Standard Examples"><a name="idp70495824"></a><h2>Standard Examples</h2><pre class="programlisting">--Extracting a subset of points from a 3d multipoint
SELECT n, ST_AsEWKT(ST_GeometryN(the_geom, n)) As geomewkt
FROM (
VALUES (ST_GeomFromEWKT('MULTIPOINT(1 2 7, 3 4 7, 5 6 7, 8 9 10)') ),
( ST_GeomFromEWKT('MULTICURVE(CIRCULARSTRING(2.5 2.5,4.5 2.5, 3.5 3.5), (10 11, 12 11))') )
	)As foo(the_geom)
	CROSS JOIN generate_series(1,100) n
WHERE n &lt;= ST_NumGeometries(the_geom);

 n |               geomewkt
---+-----------------------------------------
 1 | POINT(1 2 7)
 2 | POINT(3 4 7)
 3 | POINT(5 6 7)
 4 | POINT(8 9 10)
 1 | CIRCULARSTRING(2.5 2.5,4.5 2.5,3.5 3.5)
 2 | LINESTRING(10 11,12 11)


--Extracting all geometries (useful when you want to assign an id)
SELECT gid, n, ST_GeometryN(the_geom, n)
FROM sometable CROSS JOIN generate_series(1,100) n
WHERE n &lt;= ST_NumGeometries(the_geom);</pre></div><div class="refsection" title="Polyhedral Surfaces, TIN and Triangle Examples"><a name="idp70501328"></a><h2>Polyhedral Surfaces, TIN and Triangle Examples</h2><pre class="programlisting">-- Polyhedral surface example
-- Break a Polyhedral surface into its faces
SELECT ST_AsEWKT(ST_GeometryN(p_geom,3)) As geom_ewkt
  FROM (SELECT ST_GeomFromEWKT('POLYHEDRALSURFACE(
((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)')  AS p_geom )  AS a;

                geom_ewkt
------------------------------------------
 POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0))</pre><pre class="programlisting">-- TIN --
SELECT ST_AsEWKT(ST_GeometryN(geom,2)) as wkt
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
-- result --
                 wkt
-------------------------------------
 TRIANGLE((0 0 0,0 1 0,1 1 0,0 0 0))</pre></div><div class="refsection" title="See Also"><a name="idp70503248"></a><h2>See Also</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" title="ST_GeometryType"><div class="refentry.separator"><hr></div><a name="ST_GeometryType"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeometryType — Return the geometry type of the ST_Geometry value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_GeometryType</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70509648"></a><h2>Description</h2><p>Returns the type of the geometry as a string. EG: 'ST_Linestring', 'ST_Polygon','ST_MultiPolygon' etc. This function differs from GeometryType(geometry) in the case of the string and ST in front that is returned, as well as the fact that it will not indicate whether the geometry is measured.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.	SQL-MM 3: 5.1.4</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp70515408"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
			--result
			ST_LineString</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
			--result
			ST_PolyhedralSurface</pre><pre class="programlisting">SELECT ST_GeometryType(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
			--result
			ST_PolyhedralSurface</pre><pre class="programlisting">SELECT ST_GeometryType(geom) as result
  FROM
    (SELECT
       ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')  AS geom
    ) AS g;
 result
--------
 ST_Tin    </pre></div><div class="refsection" title="See Also"><a name="idp70518352"></a><h2>See Also</h2><p><a class="xref" href="#GeometryType" title="GeometryType">GeometryType</a></p></div></div><div class="refentry" title="ST_InteriorRingN"><div class="refentry.separator"><hr></div><a name="ST_InteriorRingN"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_InteriorRingN — Return the Nth interior linestring ring of the polygon geometry.
			Return NULL if the geometry is not a polygon or the given N is out
			of range.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_InteriorRingN</b>(</code>geometry  <var class="pdparam">a_polygon</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70525264"></a><h2>Description</h2><p>Return the Nth interior linestring ring of the polygon geometry.
			Return NULL if the geometry is not a polygon or the given N is out
			of range.  index starts at 1.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This will not work for MULTIPOLYGONs.  Use in conjunction with ST_Dump for MULTIPOLYGONS</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.2.6, 8.3.5</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70531920"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_InteriorRingN(the_geom, 1)) As the_geom
FROM (SELECT ST_BuildArea(
		ST_Collect(ST_Buffer(ST_Point(1,2), 20,3),
			ST_Buffer(ST_Point(1, 2), 10,3))) As the_geom
		)  as foo
		</pre></div><div class="refsection" title="See Also"><a name="idp70533456"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>
<a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>,
<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>,
<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>,
<a class="xref" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a>,
<a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>
		</p></div></div><div class="refentry" title="ST_IsClosed"><div class="refentry.separator"><hr></div><a name="ST_IsClosed"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsClosed — Returns <code class="varname">TRUE</code> if the
		<code class="varname">LINESTRING</code>'s start and end points are coincident. For Polyhedral surface is closed (volumetric).
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsClosed</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70542544"></a><h2>Description</h2><p>Returns <code class="varname">TRUE</code> if the <code class="varname">LINESTRING</code>'s
		start and end points are coincident.  For Polyhedral Surfaces, it tells you if the surface is areal (open) or volumetric (closed).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.5, 9.3.3</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the result of
		  <code class="function">ST_IsClosed(<code class="varname">NULL</code>)</code> to be 0, while
		  PostGIS returns <code class="varname">NULL</code>.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Line String and Point Examples"><a name="idp70558032"></a><h2>Line String and Point Examples</h2><pre class="programlisting">postgis=# SELECT ST_IsClosed('LINESTRING(0 0, 1 1)'::geometry);
 st_isclosed
-------------
 f
(1 row)

postgis=# SELECT ST_IsClosed('LINESTRING(0 0, 0 1, 1 1, 0 0)'::geometry);
 st_isclosed
-------------
 t
(1 row)

postgis=# SELECT ST_IsClosed('MULTILINESTRING((0 0, 0 1, 1 1, 0 0),(0 0, 1 1))'::geometry);
 st_isclosed
-------------
 f
(1 row)

postgis=# SELECT ST_IsClosed('POINT(0 0)'::geometry);
 st_isclosed
-------------
 t
(1 row)

postgis=# SELECT ST_IsClosed('MULTIPOINT((0 0), (1 1))'::geometry);
 st_isclosed
-------------
 t
(1 row)</pre></div><div class="refsection" title="Polyhedral Surface Examples"><a name="idp70559312"></a><h2>Polyhedral Surface Examples</h2><pre class="programlisting">
		-- A cube --
		SELECT ST_IsClosed(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));

 st_isclosed
-------------
 t


 -- Same as cube but missing a side --
 SELECT ST_IsClosed(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)) )'));

 st_isclosed
-------------
 f

</pre></div><div class="refsection" title="See Also"><a name="idp70560592"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a></p></div></div><div class="refentry" title="ST_IsCollection"><div class="refentry.separator"><hr></div><a name="ST_IsCollection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsCollection — Returns <code class="varname">TRUE</code> if the argument is a
                  collection (<code class="varname">MULTI*</code>, <code class="varname">GEOMETRYCOLLECTION</code>, ...)
                </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsCollection</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70567760"></a><h2>Description</h2><p>Returns <code class="varname">TRUE</code> if the geometry type of
                  the argument is either:
                  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>GEOMETRYCOLLECTION</p></li><li class="listitem"><p>MULTI{POINT,POLYGON,LINESTRING,CURVE,SURFACE}</p></li><li class="listitem"><p>COMPOUNDCURVE</p></li></ul></div><p>
                </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
                    This function analyzes the type of the geometry. This means
                    that it will return <code class="varname">TRUE</code> on collections
                    that are empty or that contain a single element.
                  </p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp70575184"></a><h2>Examples</h2><pre class="programlisting">postgis=# SELECT ST_IsCollection('LINESTRING(0 0, 1 1)'::geometry);
 st_iscollection
-------------
 f
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT EMPTY'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT((0 0))'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('MULTIPOINT((0 0), (42 42))'::geometry);
 st_iscollection
-------------
 t
(1 row)

postgis=# SELECT ST_IsCollection('GEOMETRYCOLLECTION(POINT(0 0))'::geometry);
 st_iscollection
-------------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp70576464"></a><h2>See Also</h2><p><a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" title="ST_IsEmpty"><div class="refentry.separator"><hr></div><a name="ST_IsEmpty"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsEmpty — Returns true if this Geometry is an empty geometrycollection, polygon, point etc.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsEmpty</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70590672"></a><h2>Description</h2><p>Returns true if this Geometry is an empty geometry. If
				true, then this Geometry represents an empty geometry collection, polygon, point etc.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the result of ST_IsEmpty(NULL) to be 0, while
			PostGIS returns NULL.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.7</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 In prior versions of PostGIS ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') was allowed.  This is now illegal in PostGIS 2.0.0 to better conform with SQL/MM standards</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70597456"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_IsEmpty(ST_GeomFromText('GEOMETRYCOLLECTION EMPTY'));
 st_isempty
------------
 t
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('POLYGON EMPTY'));
 st_isempty
------------
 t
(1 row)

SELECT ST_IsEmpty(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))'));

 st_isempty
------------
 f
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))')) = false;
 ?column?
----------
 t
(1 row)

 SELECT ST_IsEmpty(ST_GeomFromText('CIRCULARSTRING EMPTY'));
  st_isempty
------------
 t
(1 row)


		</pre></div></div><div class="refentry" title="ST_IsRing"><div class="refentry.separator"><hr></div><a name="ST_IsRing"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsRing — Returns <code class="varname">TRUE</code> if this
	  <code class="varname">LINESTRING</code> is both closed and simple.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsRing</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70608336"></a><h2>Description</h2><p>Returns <code class="varname">TRUE</code> if this
	  <code class="varname">LINESTRING</code> is both <a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>
	  (<code class="function">ST_StartPoint(<em class="parameter"><code>g</code></em>)</code>
	  <code class="function">~=</code>
	  <code class="function">ST_Endpoint(<em class="parameter"><code>g</code></em>)</code>) and <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a> (does not self intersect).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> 2.1.5.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.6</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the result of
		<code class="function">ST_IsRing(<code class="varname">NULL</code>)</code> to be 0, while
		PostGIS returns <code class="varname">NULL</code>.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70618832"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_IsRing(the_geom), ST_IsClosed(the_geom), ST_IsSimple(the_geom)
FROM (SELECT 'LINESTRING(0 0, 0 1, 1 1, 1 0, 0 0)'::geometry AS the_geom) AS foo;
 st_isring | st_isclosed | st_issimple
-----------+-------------+-------------
 t         | t           | t
(1 row)

SELECT ST_IsRing(the_geom), ST_IsClosed(the_geom), ST_IsSimple(the_geom)
FROM (SELECT 'LINESTRING(0 0, 0 1, 1 0, 1 1, 0 0)'::geometry AS the_geom) AS foo;
 st_isring | st_isclosed | st_issimple
-----------+-------------+-------------
 f         | t           | f
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp70620112"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>,
	  <a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a></p></div></div><div class="refentry" title="ST_IsSimple"><div class="refentry.separator"><hr></div><a name="ST_IsSimple"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsSimple — Returns (TRUE) if this Geometry has no anomalous geometric
				points, such as self intersection or self tangency.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsSimple</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70627408"></a><h2>Description</h2><p>Returns true if this Geometry has no anomalous geometric
				points, such as self intersection or self tangency. For more
			information on the OGC's definition of geometry simplicity and validity, refer
			to <a class="link" href="#OGC_Validity" title="4.3.5. Ensuring OpenGIS compliancy of geometries">"Ensuring OpenGIS compliancy of geometries"</a></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the result of ST_IsSimple(NULL) to be 0,
			while PostGIS returns NULL.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.8</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70634320"></a><h2>Examples</h2><pre class="programlisting"> SELECT ST_IsSimple(ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))'));
 st_issimple
-------------
 t
(1 row)

 SELECT ST_IsSimple(ST_GeomFromText('LINESTRING(1 1,2 2,2 3.5,1 3,1 2,2 1)'));
 st_issimple
-------------
 f
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp70635600"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a></p></div></div><div class="refentry" title="ST_IsValid"><div class="refentry.separator"><hr></div><a name="ST_IsValid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsValid — Returns <code class="varname">true</code> if the
		<code class="varname">ST_Geometry</code> is well formed.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsValid</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_IsValid</b>(</code>geometry  <var class="pdparam">g</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70645584"></a><h2>Description</h2><p>Test if an ST_Geometry value is well formed.  For geometries that are invalid,
			the PostgreSQL NOTICE will provide details of why it is not valid.  For more
			information on the OGC's definition of geometry simplicity and validity, refer
			to <a class="link" href="#OGC_Validity" title="4.3.5. Ensuring OpenGIS compliancy of geometries">"Ensuring OpenGIS compliancy of geometries"</a>
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the result of ST_IsValid(NULL) to be 0, while
			PostGIS returns NULL.</p></td></tr></table></div><p>
The version accepting flags is available starting with 2.0.0
and requires GEOS &gt;= 3.3.0. Such version does not print a NOTICE
explaining the invalidity.
Allowed <code class="varname">flags</code> are documented in <a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.9</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Neither OGC-SFS nor SQL-MM specifications include a flag argument
for ST_IsValid. The flag is a PostGIS extension.
			</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70653136"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_IsValid(ST_GeomFromText('LINESTRING(0 0, 1 1)')) As good_line,
	ST_IsValid(ST_GeomFromText('POLYGON((0 0, 1 1, 1 2, 1 1, 0 0))')) As bad_poly
--results
NOTICE:  Self-intersection at or near point 0 0
 good_line | bad_poly
-----------+----------
 t         | f
</pre></div><div class="refsection" title="See Also"><a name="idp70654416"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>,
<a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>,
<a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>,
<a class="xref" href="#ST_Summary" title="ST_Summary">ST_Summary</a>
</p></div></div><div class="refentry" title="ST_IsValidReason"><div class="refentry.separator"><hr></div><a name="ST_IsValidReason"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsValidReason — Returns text stating if a geometry is valid or not and if not valid, a reason why.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_IsValidReason</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_IsValidReason</b>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70665168"></a><h2>Description</h2><p>Returns text stating if a geometry is valid or not an if not valid, a reason why.</p><p>Useful in combination with ST_IsValid to generate a detailed report of invalid geometries and reasons.</p><p>
Allowed <code class="varname">flags</code> are documented in <a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>.
		</p><p>Availability: 1.4 - requires GEOS &gt;= 3.1.0.</p><p>Availability: 2.0 - requires GEOS &gt;= 3.3.0 for the version taking flags.</p></div><div class="refsection" title="Examples"><a name="idp70668624"></a><h2>Examples</h2><pre class="programlisting">
--First 3 Rejects from a successful quintuplet experiment
SELECT gid, ST_IsValidReason(the_geom) as validity_info
FROM
(SELECT ST_MakePolygon(ST_ExteriorRing(e.buff), ST_Accum(f.line)) As the_geom, gid
FROM (SELECT ST_Buffer(ST_MakePoint(x1*10,y1), z1) As buff, x1*10 + y1*100 + z1*1000 As gid
	FROM generate_series(-4,6) x1
	CROSS JOIN generate_series(2,5) y1
	CROSS JOIN generate_series(1,8) z1
	WHERE x1 &gt; y1*0.5 AND z1 &lt; x1*y1) As e
	INNER JOIN (SELECT ST_Translate(ST_ExteriorRing(ST_Buffer(ST_MakePoint(x1*10,y1), z1)),y1*1, z1*2) As line
	FROM generate_series(-3,6) x1
	CROSS JOIN generate_series(2,5) y1
	CROSS JOIN generate_series(1,10) z1
	WHERE x1 &gt; y1*0.75 AND z1 &lt; x1*y1) As f
ON (ST_Area(e.buff) &gt; 78 AND ST_Contains(e.buff, f.line))
GROUP BY gid, e.buff) As quintuplet_experiment
WHERE ST_IsValid(the_geom) = false
ORDER BY gid
LIMIT 3;

 gid  |      validity_info
------+--------------------------
 5330 | Self-intersection [32 5]
 5340 | Self-intersection [42 5]
 5350 | Self-intersection [52 5]

 --simple example
SELECT ST_IsValidReason('LINESTRING(220227 150406,2220227 150407,222020 150410)');

 st_isvalidreason
------------------
 Valid Geometry

		</pre></div><div class="refsection" title="See Also"><a name="idp70670160"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_Summary" title="ST_Summary">ST_Summary</a></p></div></div><div class="refentry" title="ST_IsValidDetail"><div class="refentry.separator"><hr></div><a name="ST_IsValidDetail"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsValidDetail — Returns a valid_detail (valid,reason,location) row stating if a geometry is valid or not and if not valid, a reason why and a location where.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">valid_detail <b class="fsfunc">ST_IsValidDetail</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">valid_detail <b class="fsfunc">ST_IsValidDetail</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70679760"></a><h2>Description</h2><p>Returns a valid_detail row, formed by a boolean (valid) stating if a geometry is valid, a varchar (reason) stating a reason why it is invalid and a geometry (location) pointing out where it is invalid.</p><p>Useful to substitute and improve the combination of ST_IsValid and ST_IsValidReason to generate a detailed report of invalid geometries.</p><p>
The 'flags' argument is a bitfield. It can have the following values:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
1: Consider self-intersecting rings forming holes as valid.
   This is also know as "the ESRI flag".
   Note that this is against the OGC model.
</p></li></ul></div><p>
		</p><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" title="Examples"><a name="idp70683344"></a><h2>Examples</h2><pre class="programlisting">
--First 3 Rejects from a successful quintuplet experiment
SELECT gid, reason(ST_IsValidDetail(the_geom)), ST_AsText(location(ST_IsValidDetail(the_geom))) as location
FROM
(SELECT ST_MakePolygon(ST_ExteriorRing(e.buff), ST_Accum(f.line)) As the_geom, gid
FROM (SELECT ST_Buffer(ST_MakePoint(x1*10,y1), z1) As buff, x1*10 + y1*100 + z1*1000 As gid
	FROM generate_series(-4,6) x1
	CROSS JOIN generate_series(2,5) y1
	CROSS JOIN generate_series(1,8) z1
	WHERE x1 &gt; y1*0.5 AND z1 &lt; x1*y1) As e
	INNER JOIN (SELECT ST_Translate(ST_ExteriorRing(ST_Buffer(ST_MakePoint(x1*10,y1), z1)),y1*1, z1*2) As line
	FROM generate_series(-3,6) x1
	CROSS JOIN generate_series(2,5) y1
	CROSS JOIN generate_series(1,10) z1
	WHERE x1 &gt; y1*0.75 AND z1 &lt; x1*y1) As f
ON (ST_Area(e.buff) &gt; 78 AND ST_Contains(e.buff, f.line))
GROUP BY gid, e.buff) As quintuplet_experiment
WHERE ST_IsValid(the_geom) = false
ORDER BY gid
LIMIT 3;

 gid  |      reason       |  location
------+-------------------+-------------
 5330 | Self-intersection | POINT(32 5)
 5340 | Self-intersection | POINT(42 5)
 5350 | Self-intersection | POINT(52 5)

 --simple example
SELECT * FROM ST_IsValidDetail('LINESTRING(220227 150406,2220227 150407,222020 150410)');

 valid | reason | location
-------+--------+----------
 t     |        |

		</pre></div><div class="refsection" title="See Also"><a name="idp70684880"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>,
<a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>
</p></div></div><div class="refentry" title="ST_M"><div class="refentry.separator"><hr></div><a name="ST_M"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_M — Return the M coordinate of the point, or NULL if not
			available. Input must be a point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_M</b>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70691536"></a><h2>Description</h2><p>Return the M coordinate of the point, or NULL if not
			available. Input must be a point.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is not (yet) part of the OGC spec, but is listed here
			  to complete the point coordinate extractor function list.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70706256"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_M(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_m
------
	4
(1 row)

		</pre></div><div class="refsection" title="See Also"><a name="idp70707792"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" title="ST_NDims"><div class="refentry.separator"><hr></div><a name="ST_NDims"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NDims — Returns coordinate dimension of the geometry as a small int.
			Values are: 2,3 or 4.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NDims</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70714960"></a><h2>Description</h2><p>Returns the coordinate dimension of the geometry.  PostGIS supports 2 -  (x,y) ,
			3 -  (x,y,z) or 2D with measure - x,y,m, and 4 - 3D with measure space x,y,z,m</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70717520"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_NDims(ST_GeomFromText('POINT(1 1)')) As d2point,
	ST_NDims(ST_GeomFromEWKT('POINT(1 1 2)')) As d3point,
	ST_NDims(ST_GeomFromEWKT('POINTM(1 1 0.5)')) As d2pointm;

	 d2point | d3point | d2pointm
---------+---------+----------
	   2 |       3 |        3
			</pre></div><div class="refsection" title="See Also"><a name="idp70718800"></a><h2>See Also</h2><p><a class="xref" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_NPoints"><div class="refentry.separator"><hr></div><a name="ST_NPoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NPoints — Return the number of points (vertexes) in a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NPoints</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70725584"></a><h2>Description</h2><p>Return the number of points in a geometry.  Works for all geometries.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp70731728"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_NPoints(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
--result
4

--Polygon in 3D space
SELECT ST_NPoints(ST_GeomFromEWKT('LINESTRING(77.29 29.07 1,77.42 29.26 0,77.27 29.31 -1,77.29 29.07 3)'))
--result
4</pre></div><div class="refsection" title="See Also"><a name="idp70733008"></a><h2>See Also</h2><p><a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a></p></div></div><div class="refentry" title="ST_NRings"><div class="refentry.separator"><hr></div><a name="ST_NRings"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NRings — If the geometry is a polygon or multi-polygon returns the number of rings.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NRings</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70739024"></a><h2>Description</h2><p>If the geometry is a polygon or multi-polygon returns the number of rings.  Unlike NumInteriorRings, it counts
		the outer rings as well.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp70742736"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_NRings(the_geom) As Nrings, ST_NumInteriorRings(the_geom) As ninterrings
					FROM (SELECT ST_GeomFromText('POLYGON((1 2, 3 4, 5 6, 1 2))') As the_geom) As foo;
	 nrings | ninterrings
--------+-------------
	  1 |           0
(1 row)
</pre></div><div class="refsection" title="See Also"><a name="idp70744272"></a><h2>See Also</h2><p><a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a></p></div></div><div class="refentry" title="ST_NumGeometries"><div class="refentry.separator"><hr></div><a name="ST_NumGeometries"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumGeometries — If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the
			number of geometries, for single geometries will return 1, otherwise return NULL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumGeometries</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70750288"></a><h2>Description</h2><p>Returns the number of Geometries. If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the
			number of geometries, for single geometries will return 1, otherwise return NULL.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Changed: 2.0.0 In prior versions this would return NULL if the geometry was not a collection/MULTI type.
				2.0.0+ now returns 1 for single geometries e.g POLYGON, LINESTRING, POINT.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 9.1.4</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp70757968"></a><h2>Examples</h2><pre class="programlisting">
--Prior versions would have returned NULL for this -- in 2.0.0 this returns 1
SELECT ST_NumGeometries(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
--result
1

--Geometry Collection Example - multis count as one geom in a collection
SELECT ST_NumGeometries(ST_GeomFromEWKT('GEOMETRYCOLLECTION(MULTIPOINT(-2 3 , -2 2),
LINESTRING(5 5 ,10 10),
POLYGON((-7 4.2,-7.1 5,-7.1 4.3,-7 4.2)))'));
--result
3
</pre></div><div class="refsection" title="See Also"><a name="idp70759248"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a></p></div></div><div class="refentry" title="ST_NumInteriorRings"><div class="refentry.separator"><hr></div><a name="ST_NumInteriorRings"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumInteriorRings — Return the number of interior rings of a polygon geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumInteriorRings</b>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70290512"></a><h2>Description</h2><p>
      Return the number of interior rings of a polygon geometry.
			Return NULL if the geometry is not a polygon.
    </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.2.5</p><p>Changed: 2.0.0 - in prior versions it would allow passing a MULTIPOLYGON, returning the number of interior rings of first POLYGON.</p></div><div class="refsection" title="Examples"><a name="idp70293584"></a><h2>Examples</h2><pre class="programlisting">
--If you have a regular polygon
SELECT gid, field1, field2, ST_NumInteriorRings(the_geom) AS numholes
FROM sometable;

--If you have multipolygons
--And you want to know the total number of interior rings in the MULTIPOLYGON
SELECT gid, field1, field2, SUM(ST_NumInteriorRings(the_geom)) AS numholes
FROM (SELECT gid, field1, field2, (ST_Dump(the_geom)).geom As the_geom
	FROM sometable) As foo
GROUP BY gid, field1,field2;
			</pre></div><div class="refsection" title="See Also"><a name="idp70294864"></a><h2>See Also</h2><p><a class="xref" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a></p></div></div><div class="refentry" title="ST_NumInteriorRing"><div class="refentry.separator"><hr></div><a name="ST_NumInteriorRing"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumInteriorRing — Return the number of interior rings of a polygon in
			the geometry. Synonym for ST_NumInteriorRings. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumInteriorRing</b>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" title="See Also"><a name="idp70788304"></a><h2>See Also</h2><p><a class="xref" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a></p></div></div><div class="refentry" title="ST_NumPatches"><div class="refentry.separator"><hr></div><a name="ST_NumPatches"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumPatches — Return the number of faces on a Polyhedral Surface.  Will return null for non-polyhedral geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumPatches</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70794320"></a><h2>Description</h2><p>Return the number of faces on a Polyhedral Surface.  Will return null for non-polyhedral geometries. This is
		an alias for ST_NumGeometries to support MM naming. Faster to use ST_NumGeometries if you don't care about MM convention.</p><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: ?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp70801744"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_NumPatches(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
		--result
		6
		</pre></div><div class="refsection" title="See Also"><a name="idp70803024"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" title="ST_NumPoints"><div class="refentry.separator"><hr></div><a name="ST_NumPoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumPoints — Return the number of points in an ST_LineString or
		  ST_CircularString value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumPoints</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70809424"></a><h2>Description</h2><p>Return the number of points in an ST_LineString or
		  ST_CircularString value. Prior to 1.4 only works with Linestrings as the specs state.  From 1.4 forward this is an alias for ST_NPoints which returns number of vertexes for
		  not just line strings.
		  Consider using ST_NPoints instead which is multi-purpose
		  and works with many geometry types.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.2.4</p></div><div class="refsection" title="Examples"><a name="idp70813520"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_NumPoints(ST_GeomFromText('LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'));
		--result
		4
		</pre></div><div class="refsection" title="See Also"><a name="idp70814928"></a><h2>See Also</h2><p><a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a></p></div></div><div class="refentry" title="ST_PatchN"><div class="refentry.separator"><hr></div><a name="ST_PatchN"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PatchN — Return the 1-based Nth geometry (face) if the geometry is a
			POLYHEDRALSURFACE, POLYHEDRALSURFACEM.
			Otherwise, return NULL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PatchN</b>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70821968"></a><h2>Description</h2><p>&gt;Return the 1-based Nth geometry (face) if the geometry is a
			POLYHEDRALSURFACE, POLYHEDRALSURFACEM.
			Otherwise, return NULL.  This  returns the same answer as ST_GeometryN for Polyhedral Surfaces.
				Using ST_GemoetryN is faster.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index is 1-based.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you want to extract all geometries, of a geometry, ST_Dump is more efficient.</p></td></tr></table></div><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: ?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp70829392"></a><h2>Examples</h2><pre class="programlisting">
--Extract the 2nd face of the polyhedral surface
SELECT ST_AsEWKT(ST_PatchN(geom, 2)) As geomewkt
FROM (
VALUES (ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
	((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
	((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
	((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )')) ) As foo(geom);

              geomewkt
---+-----------------------------------------
 POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0))
</pre></div><div class="refsection" title="See Also"><a name="idp70830928"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a></p></div></div><div class="refentry" title="ST_PointN"><div class="refentry.separator"><hr></div><a name="ST_PointN"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointN — Return the Nth point in the first LineString or circular LineString in the
			geometry. Negative values are counted backwards from the end of the LineString. Returns NULL if there is no linestring in the
			geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PointN</b>(</code>geometry  <var class="pdparam">a_linestring</var>, integer  <var class="pdparam">n</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70847696"></a><h2>Description</h2><p>Return the Nth point in a single linestring or circular linestring in the
			geometry. Negative values are counted backwards from the end of the LineString, so that -1 is the last point. Returns NULL if there is no linestring in the
			geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index is 1-based as for OGC specs since version 0.8.0.
              Backward indexing (negative index) is not in OGC
			  Previous versions implemented this as 0-based instead.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you want to get the nth point of each line string in a multilinestring, use in conjunction
			  with ST_Dump</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.2.5, 7.3.5</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.</p><p> Changed: 2.3.0 : negative indexing available (-1 is last point)
    </p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70857040"></a><h2>Examples</h2><pre class="programlisting">-- Extract all POINTs from a LINESTRING
SELECT ST_AsText(
   ST_PointN(
	  column1,
	  generate_series(1, ST_NPoints(column1))
   ))
FROM ( VALUES ('LINESTRING(0 0, 1 1, 2 2)'::geometry) ) AS foo;

 st_astext
------------
 POINT(0 0)
 POINT(1 1)
 POINT(2 2)
(3 rows)

--Example circular string
SELECT ST_AsText(ST_PointN(ST_GeomFromText('CIRCULARSTRING(1 2, 3 2, 1 2)'),2));

st_astext
----------
POINT(3 2)

SELECT st_astext(f)
FROM ST_GeometryFromtext('LINESTRING(0 0 0, 1 1 1, 2 2 2)') as g
	,ST_PointN(g, -2) AS f -- 1 based index

st_astext
----------
"POINT Z (1 1 1)"

</pre></div><div class="refsection" title="See Also"><a name="idp70858448"></a><h2>See Also</h2><p><a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a></p></div></div><div class="refentry" title="ST_Points"><div class="refentry.separator"><hr></div><a name="ST_Points"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Points — Returns a MultiPoint containing all of the coordinates of a geometry.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Points</b>(</code>
						geometry
						<var class="pdparam">geom</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70864592"></a><h2>Description</h2><p>
				Returns a MultiPoint containing all of the coordinates of a
				geometry.  Does not remove points that are duplicated in
				the input geometry, including start and end points of ring geometries.
				(If this behavior is undesired, duplicates may be removed using
				<a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>).
			</p><p>
				M and Z ordinates will be preserved if present.
			</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Availability: 2.3.0</p></div><div class="refsection" title="Examples"><a name="idp70869584"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_Points('POLYGON Z ((30 10 4,10 30 5,40 40 6, 30 10))'));

--result
MULTIPOINT Z (30 10 4,10 30 5,40 40 6, 30 10 4)
			</pre></div><div class="refsection" title="See Also"><a name="idp70870864"></a><h2>See Also</h2><p><a class="xref" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a></p></div></div><div class="refentry" title="ST_SRID"><div class="refentry.separator"><hr></div><a name="ST_SRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SRID — Returns the spatial reference identifier for the ST_Geometry as defined in spatial_ref_sys table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_SRID</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70880976"></a><h2>Description</h2><p>Returns the spatial reference identifier for the ST_Geometry as defined in spatial_ref_sys table. <a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>spatial_ref_sys
		table is a table that catalogs all spatial reference systems known to PostGIS and is used for transformations from one spatial
			reference system to another.  So verifying you have the right spatial reference system identifier is important if you plan to ever transform your geometries.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.5</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp70887376"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_SRID(ST_GeomFromText('POINT(-71.1043 42.315)',4326));
		--result
		4326
		</pre></div><div class="refsection" title="See Also"><a name="idp70888656"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_StartPoint"><div class="refentry.separator"><hr></div><a name="ST_StartPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_StartPoint — Returns the first point of a <code class="varname">LINESTRING</code>
	  geometry as a <code class="varname">POINT</code>.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_StartPoint</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70896592"></a><h2>Description</h2><p>Returns the first point of a <code class="varname">LINESTRING</code> or <code class="varname">CIRCULARLINESTRING</code> geometry
	  as a <code class="varname">POINT</code> or <code class="varname">NULL</code> if the input
	  parameter is not a <code class="varname">LINESTRING</code> or <code class="varname">CIRCULARLINESTRING</code>.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.
	  The older behavior was an undocumented feature, but people who assumed they had their data stored as LINESTRING
	  may experience these returning NULL in 2.0 now.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp70904912"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_StartPoint('LINESTRING(0 1, 0 2)'::geometry));
 st_astext
------------
 POINT(0 1)
(1 row)

SELECT ST_StartPoint('POINT(0 1)'::geometry) IS NULL AS is_null;
  is_null
----------
 t
(1 row)

--3d line
SELECT ST_AsEWKT(ST_StartPoint('LINESTRING(0 1 1, 0 2 2)'::geometry));
 st_asewkt
------------
 POINT(0 1 1)
(1 row)

-- circular linestring --
SELECT ST_AsText(ST_StartPoint('CIRCULARSTRING(5 2,-3 1.999999, -2 1, -4 2, 5 2)'::geometry));
 st_astext
------------
 POINT(5 2)
</pre></div><div class="refsection" title="See Also"><a name="idp70906192"></a><h2>See Also</h2><p><a class="xref" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>, <a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a></p></div></div><div class="refentry" title="ST_Summary"><div class="refentry.separator"><hr></div><a name="ST_Summary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Summary — 
Returns a text summary of the contents of the geometry.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_Summary</b>(</code>geometry  <var class="pdparam">g</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_Summary</b>(</code>geography  <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70914768"></a><h2>Description</h2><p>Returns a text summary of the contents of the geometry.</p><p>
                  Flags shown square brackets after the geometry type
                  have the following meaning:
                  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>M: has M ordinate</p></li><li class="listitem"><p>Z: has Z ordinate</p></li><li class="listitem"><p>B: has a cached bounding box</p></li><li class="listitem"><p>G: is geodetic (geography)</p></li><li class="listitem"><p>S: has spatial reference system</p></li></ul></div><p>
                </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p>Availability: 1.2.2</p><p>Enhanced: 2.0.0 added support for geography</p><p>Enhanced: 2.1.0 S flag to denote if has a known spatial reference system</p><p>Enhanced: 2.2.0 Added support for TIN and Curves</p></div><div class="refsection" title="Examples"><a name="idp70925648"></a><h2>Examples</h2><pre class="programlisting">
=# SELECT ST_Summary(ST_GeomFromText('LINESTRING(0 0, 1 1)')) as geom,
        ST_Summary(ST_GeogFromText('POLYGON((0 0, 1 1, 1 2, 1 1, 0 0))')) geog;
            geom             |          geog
-----------------------------+--------------------------
 LineString[B] with 2 points | Polygon[BGS] with 1 rings
                             | ring 0 has 5 points
                             :
(1 row)


=# SELECT ST_Summary(ST_GeogFromText('LINESTRING(0 0 1, 1 1 1)')) As geog_line,
        ST_Summary(ST_GeomFromText('SRID=4326;POLYGON((0 0 1, 1 1 2, 1 2 3, 1 1 1, 0 0 1))')) As geom_poly;
;
           geog_line             |        geom_poly
-------------------------------- +--------------------------
 LineString[ZBGS] with 2 points | Polygon[ZBS] with 1 rings
                                :    ring 0 has 5 points
                                :
(1 row)

</pre></div><div class="refsection" title="See Also"><a name="idp70927056"></a><h2>See Also</h2><p>
<a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>,
<a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>,
<a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>,
<a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a>,
<a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>,
<a class="xref" href="#geography" title="geography">geography</a>
		</p><p>
<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>,
<a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>,
<a class="xref" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>,
<a class="xref" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>
		</p></div></div><div class="refentry" title="ST_X"><div class="refentry.separator"><hr></div><a name="ST_X"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_X — Return the X coordinate of the point, or NULL if not
			available. Input must be a point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_X</b>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70937168"></a><h2>Description</h2><p>Return the X coordinate of the point, or NULL if not
			available. Input must be a point.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you want to get the max min x values of any geometry look at ST_XMin, ST_XMax functions.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 6.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp70941648"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_X(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_x
------
	1
(1 row)

SELECT ST_Y(ST_Centroid(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)')));
 st_y
------
  1.5
(1 row)

		</pre></div><div class="refsection" title="See Also"><a name="idp70943312"></a><h2>See Also</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" title="ST_XMax"><div class="refentry.separator"><hr></div><a name="ST_XMax"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_XMax — Returns X maxima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_XMax</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70963920"></a><h2>Description</h2><p>Returns X maxima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp70968400"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_XMax('BOX3D(1 2 3, 4 5 6)');
st_xmax
-------
4

SELECT ST_XMax(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_xmax
-------
5

SELECT ST_XMax(CAST('BOX(-3 2, 3 4)' As box2d));
st_xmax
-------
3
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_XMax('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_XMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_xmax
--------
220288.248780547
		</pre></div><div class="refsection" title="See Also"><a name="idp70969936"></a><h2>See Also</h2><p><a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" title="ST_XMin"><div class="refentry.separator"><hr></div><a name="ST_XMin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_XMin — Returns X minima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_XMin</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70981584"></a><h2>Description</h2><p>Returns X minima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp70986192"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_XMin('BOX3D(1 2 3, 4 5 6)');
st_xmin
-------
1

SELECT ST_XMin(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_xmin
-------
1

SELECT ST_XMin(CAST('BOX(-3 2, 3 4)' As box2d));
st_xmin
-------
-3
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_XMin('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_XMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_xmin
--------
220186.995121892
		</pre></div><div class="refsection" title="See Also"><a name="idp70987728"></a><h2>See Also</h2><p><a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" title="ST_Y"><div class="refentry.separator"><hr></div><a name="ST_Y"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Y — Return the Y coordinate of the point, or NULL if not
			available. Input must be a point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Y</b>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp70995280"></a><h2>Description</h2><p>Return the Y coordinate of the point, or NULL if not
			available. Input must be a point.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 6.1.4</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp71000912"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Y(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_y
------
	2
(1 row)

SELECT ST_Y(ST_Centroid(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)')));
 st_y
------
  1.5
(1 row)


		</pre></div><div class="refsection" title="See Also"><a name="idp71002448"></a><h2>See Also</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_Z" title="ST_Z">ST_Z</a></p></div></div><div class="refentry" title="ST_YMax"><div class="refentry.separator"><hr></div><a name="ST_YMax"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_YMax — Returns Y maxima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_YMax</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71010768"></a><h2>Description</h2><p>Returns Y maxima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71015248"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_YMax('BOX3D(1 2 3, 4 5 6)');
st_ymax
-------
5

SELECT ST_YMax(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_ymax
-------
6

SELECT ST_YMax(CAST('BOX(-3 2, 3 4)' As box2d));
st_ymax
-------
4
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_YMax('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_YMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_ymax
--------
150506.126829327
		</pre></div><div class="refsection" title="See Also"><a name="idp71016784"></a><h2>See Also</h2><p><a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" title="ST_YMin"><div class="refentry.separator"><hr></div><a name="ST_YMin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_YMin — Returns Y minima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_YMin</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71024336"></a><h2>Description</h2><p>Returns Y minima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71033040"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_YMin('BOX3D(1 2 3, 4 5 6)');
st_ymin
-------
2

SELECT ST_YMin(ST_GeomFromText('LINESTRING(1 3 4, 5 6 7)'));
st_ymin
-------
3

SELECT ST_YMin(CAST('BOX(-3 2, 3 4)' As box2d));
st_ymin
-------
2
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_YMin('LINESTRING(1 3, 5 6)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_YMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_ymin
--------
150406
		</pre></div><div class="refsection" title="See Also"><a name="idp71034576"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a></p></div></div><div class="refentry" title="ST_Z"><div class="refentry.separator"><hr></div><a name="ST_Z"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Z — Return the Z coordinate of the point, or NULL if not
			available. Input must be a point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Z</b>(</code>geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71042512"></a><h2>Description</h2><p>Return the Z coordinate of the point, or NULL if not
			available. Input must be a point.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp71046608"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Z(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_z
------
	3
(1 row)

		</pre></div><div class="refsection" title="See Also"><a name="idp71048144"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_M" title="ST_M">ST_M</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>, <a class="xref" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> </p></div></div><div class="refentry" title="ST_ZMax"><div class="refentry.separator"><hr></div><a name="ST_ZMax"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ZMax — Returns Z minima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_ZMax</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71056208"></a><h2>Description</h2><p>Returns Z maxima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71060688"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_ZMax('BOX3D(1 2 3, 4 5 6)');
st_zmax
-------
6

SELECT ST_ZMax(ST_GeomFromEWKT('LINESTRING(1 3 4, 5 6 7)'));
st_zmax
-------
7

SELECT ST_ZMax('BOX3D(-3 2 1, 3 4 1)' );
st_zmax
-------
1
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_ZMax('LINESTRING(1 3 4, 5 6 7)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_ZMax(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_zmax
--------
3
		</pre></div><div class="refsection" title="See Also"><a name="idp71062352"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a></p></div></div><div class="refentry" title="ST_Zmflag"><div class="refentry.separator"><hr></div><a name="ST_Zmflag"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Zmflag — Returns ZM (dimension semantic) flag of the geometries as a
			small int. Values are: 0=2d, 1=3dm, 2=3dz, 3=4d.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">smallint <b class="fsfunc">ST_Zmflag</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71078480"></a><h2>Description</h2><p>Returns ZM (dimension semantic) flag of the geometries as a
			small int. Values are: 0=2d, 1=3dm, 2=3dz, 3=4d.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71082192"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Zmflag(ST_GeomFromEWKT('LINESTRING(1 2, 3 4)'));
 st_zmflag
-----------
		 0

SELECT ST_Zmflag(ST_GeomFromEWKT('LINESTRINGM(1 2 3, 3 4 3)'));
 st_zmflag
-----------
		 1

SELECT ST_Zmflag(ST_GeomFromEWKT('CIRCULARSTRING(1 2 3, 3 4 3, 5 6 3)'));
 st_zmflag
-----------
		 2
SELECT ST_Zmflag(ST_GeomFromEWKT('POINT(1 2 3 4)'));
 st_zmflag
-----------
		 3
</pre></div><div class="refsection" title="See Also"><a name="idp71083728"></a><h2>See Also</h2><p><a class="xref" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>, <a class="xref" href="#ST_NDims" title="ST_NDims">ST_NDims</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a></p></div></div><div class="refentry" title="ST_ZMin"><div class="refentry.separator"><hr></div><a name="ST_ZMin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ZMin — Returns Z minima of a bounding box 2d or 3d or a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_ZMin</b>(</code>box3d  <var class="pdparam">aGeomorBox2DorBox3D</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71090512"></a><h2>Description</h2><p>Returns Z minima of a bounding box 2d or 3d or a geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Although this function is only defined for box3d, it will work for box2d and geometry because of the auto-casting behavior
			defined for geometries and box2d.  However you can not feed it a geometry or box2d text representation, since that will not auto-cast.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71095120"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_ZMin('BOX3D(1 2 3, 4 5 6)');
st_zmin
-------
3

SELECT ST_ZMin(ST_GeomFromEWKT('LINESTRING(1 3 4, 5 6 7)'));
st_zmin
-------
4

SELECT ST_ZMin('BOX3D(-3 2 1, 3 4 1)' );
st_zmin
-------
1
--Observe THIS DOES NOT WORK because it will try to autocast the string representation to a BOX3D
SELECT ST_ZMin('LINESTRING(1 3 4, 5 6 7)');

--ERROR:  BOX3D parser - doesn't start with BOX3D(

SELECT ST_ZMin(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)'));
st_zmin
--------
1
		</pre></div><div class="refsection" title="See Also"><a name="idp71096656"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_XMin" title="ST_XMin">ST_XMin</a>, <a class="xref" href="#ST_XMax" title="ST_XMax">ST_XMax</a>, <a class="xref" href="#ST_YMax" title="ST_YMax">ST_YMax</a>, <a class="xref" href="#ST_YMin" title="ST_YMin">ST_YMin</a>, <a class="xref" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a></p></div></div></div><div class="sect1" title="8.6. Geometry Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Geometry_Editors"></a>8.6. Geometry Editors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_AddPoint">ST_AddPoint</a></span><span class="refpurpose"> — Add a point to a LineString.</span></dt><dt><span class="refentrytitle"><a href="#ST_Affine">ST_Affine</a></span><span class="refpurpose"> — Apply a 3d affine transformation to a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Force2D">ST_Force2D</a></span><span class="refpurpose"> — Force the geometries into a "2-dimensional mode".</span></dt><dt><span class="refentrytitle"><a href="#ST_Force_3D">ST_Force3D</a></span><span class="refpurpose"> — Force the geometries into XYZ mode.  This is an alias for ST_Force3DZ.</span></dt><dt><span class="refentrytitle"><a href="#ST_Force_3DZ">ST_Force3DZ</a></span><span class="refpurpose"> — Force the geometries into XYZ mode.</span></dt><dt><span class="refentrytitle"><a href="#ST_Force_3DM">ST_Force3DM</a></span><span class="refpurpose"> — Force the geometries into XYM mode.</span></dt><dt><span class="refentrytitle"><a href="#ST_Force_4D">ST_Force4D</a></span><span class="refpurpose"> — Force the geometries into XYZM mode.  </span></dt><dt><span class="refentrytitle"><a href="#ST_Force_Collection">ST_ForceCollection</a></span><span class="refpurpose"> — Convert the geometry into a GEOMETRYCOLLECTION.</span></dt><dt><span class="refentrytitle"><a href="#ST_ForceSFS">ST_ForceSFS</a></span><span class="refpurpose"> — Force the geometries to use SFS 1.1 geometry types only.</span></dt><dt><span class="refentrytitle"><a href="#ST_ForceRHR">ST_ForceRHR</a></span><span class="refpurpose"> — Force the orientation of the vertices in a polygon to follow the
				Right-Hand-Rule.</span></dt><dt><span class="refentrytitle"><a href="#ST_ForceCurve">ST_ForceCurve</a></span><span class="refpurpose"> — Upcast a geometry into its curved type, if applicable.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineMerge">ST_LineMerge</a></span><span class="refpurpose"> — Return a (set of) LineString(s) formed by sewing together
			a MULTILINESTRING.</span></dt><dt><span class="refentrytitle"><a href="#ST_CollectionExtract">ST_CollectionExtract</a></span><span class="refpurpose"> — 
Given a (multi)geometry, return a (multi)geometry consisting only of elements of the specified type.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_CollectionHomogenize">ST_CollectionHomogenize</a></span><span class="refpurpose"> — 
	Given a geometry collection, return the "simplest" representation of the contents.
				</span></dt><dt><span class="refentrytitle"><a href="#ST_Multi">ST_Multi</a></span><span class="refpurpose"> — Return the geometry as a MULTI* geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Normalize">ST_Normalize</a></span><span class="refpurpose"> — Return the geometry in its canonical form.</span></dt><dt><span class="refentrytitle"><a href="#ST_RemovePoint">ST_RemovePoint</a></span><span class="refpurpose"> — Remove point from a linestring.</span></dt><dt><span class="refentrytitle"><a href="#ST_Reverse">ST_Reverse</a></span><span class="refpurpose"> — Return the geometry with vertex order reversed.</span></dt><dt><span class="refentrytitle"><a href="#ST_Rotate">ST_Rotate</a></span><span class="refpurpose"> — Rotate a geometry rotRadians counter-clockwise about an origin.</span></dt><dt><span class="refentrytitle"><a href="#ST_RotateX">ST_RotateX</a></span><span class="refpurpose"> — Rotate a geometry rotRadians about the X axis.</span></dt><dt><span class="refentrytitle"><a href="#ST_RotateY">ST_RotateY</a></span><span class="refpurpose"> — Rotate a geometry rotRadians about the Y axis.</span></dt><dt><span class="refentrytitle"><a href="#ST_RotateZ">ST_RotateZ</a></span><span class="refpurpose"> — Rotate a geometry rotRadians about the Z axis.</span></dt><dt><span class="refentrytitle"><a href="#ST_Scale">ST_Scale</a></span><span class="refpurpose"> — Scale a geometry by given factors.</span></dt><dt><span class="refentrytitle"><a href="#ST_Segmentize">ST_Segmentize</a></span><span class="refpurpose"> — Return a modified geometry/geography having no segment longer than the
			given distance.</span></dt><dt><span class="refentrytitle"><a href="#ST_SetPoint">ST_SetPoint</a></span><span class="refpurpose"> — Replace point of a linestring with a given point.</span></dt><dt><span class="refentrytitle"><a href="#ST_SetSRID">ST_SetSRID</a></span><span class="refpurpose"> — Set the SRID on a geometry to a particular integer
		value.</span></dt><dt><span class="refentrytitle"><a href="#ST_SnapToGrid">ST_SnapToGrid</a></span><span class="refpurpose"> — 
		Snap all points of the input geometry to a regular grid.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_Snap">ST_Snap</a></span><span class="refpurpose"> — 
	Snap segments and vertices of input geometry
	to vertices of a reference geometry.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_Transform">ST_Transform</a></span><span class="refpurpose"> — Return a new geometry with its coordinates transformed to
			a different spatial reference.</span></dt><dt><span class="refentrytitle"><a href="#ST_Translate">ST_Translate</a></span><span class="refpurpose"> — Translate a geometry by given offsets.</span></dt><dt><span class="refentrytitle"><a href="#ST_TransScale">ST_TransScale</a></span><span class="refpurpose"> — Translate a geometry by given factors and offsets.</span></dt></dl></div><div class="refentry" title="ST_AddPoint"><a name="ST_AddPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddPoint — Add a point to a LineString.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_AddPoint</b>(</code>geometry <var class="pdparam">linestring</var>, geometry <var class="pdparam">point</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_AddPoint</b>(</code>geometry <var class="pdparam">linestring</var>, geometry <var class="pdparam">point</var>, integer <var class="pdparam">position</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71924176"></a><h2>Description</h2><p>Adds a point to a LineString before point &lt;position&gt;
				(0-based index). Third parameter can be omitted or set to -1 for
				appending.</p><p>Availability: 1.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp71927248"></a><h2>Examples</h2><pre class="programlisting">
		--guarantee all linestrings in a table are closed
		--by adding the start point of each linestring to the end of the line string
		--only for those that are not closed
		UPDATE sometable
		SET the_geom = ST_AddPoint(the_geom, ST_StartPoint(the_geom))
		FROM sometable
		WHERE ST_IsClosed(the_geom) = false;

		--Adding point to a 3-d line
		SELECT ST_AsEWKT(ST_AddPoint(ST_GeomFromEWKT('LINESTRING(0 0 1, 1 1 1)'), ST_MakePoint(1, 2, 3)));

		--result
		st_asewkt
		----------
		LINESTRING(0 0 1,1 1 1,1 2 3)
			</pre></div><div class="refsection" title="See Also"><a name="idp71928528"></a><h2>See Also</h2><p><a class="xref" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a>, <a class="xref" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a></p></div></div><div class="refentry" title="ST_Affine"><div class="refentry.separator"><hr></div><a name="ST_Affine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Affine — Apply a 3d affine transformation to a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Affine</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">a</var>, float  <var class="pdparam">b</var>, float  <var class="pdparam">c</var>, float  <var class="pdparam">d</var>, float  <var class="pdparam">e</var>, float  <var class="pdparam">f</var>, float  <var class="pdparam">g</var>, float  <var class="pdparam">h</var>, float  <var class="pdparam">i</var>, float  <var class="pdparam">xoff</var>, float  <var class="pdparam">yoff</var>, float  <var class="pdparam">zoff</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Affine</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">a</var>, float  <var class="pdparam">b</var>, float  <var class="pdparam">d</var>, float  <var class="pdparam">e</var>, float  <var class="pdparam">xoff</var>, float  <var class="pdparam">yoff</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71963984"></a><h2>Description</h2><p>Applies a 3d affine transformation to the geometry to do things like translate, rotate, scale in one step.</p><p>
		Version 1: The
			call </p><pre class="programlisting">ST_Affine(geom, a, b, c, d, e, f, g, h, i, xoff, yoff, zoff) </pre><p>
			represents the transformation matrix </p><pre class="programlisting">/ a  b  c  xoff \
| d  e  f  yoff |
| g  h  i  zoff |
\ 0  0  0     1 /</pre><p> and the vertices are transformed as
			follows: </p><pre class="programlisting">x' = a*x + b*y + c*z + xoff
y' = d*x + e*y + f*z + yoff
z' = g*x + h*y + i*z + zoff</pre><p> All of the translate / scale
			functions below are expressed via such an affine
			transformation.</p><p>Version 2: Applies a 2d affine transformation to the geometry. The
			call </p><pre class="programlisting">ST_Affine(geom, a, b, d, e, xoff, yoff)</pre><p>
			represents the transformation matrix </p><pre class="programlisting">/  a  b  0  xoff  \       /  a  b  xoff  \
|  d  e  0  yoff  | rsp.  |  d  e  yoff  |
|  0  0  1     0  |       \  0  0     1  /
\  0  0  0     1  /</pre><p> and the vertices are transformed as
			follows: </p><pre class="programlisting">x' = a*x + b*y + xoff
y' = d*x + e*y + yoff
z' = z </pre><p> This method is a subcase of the 3D method
			above.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Availability: 1.1.2. Name changed from Affine to ST_Affine in 1.2.2</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp71979984"></a><h2>Examples</h2><pre class="programlisting">
--Rotate a 3d line 180 degrees about the z axis.  Note this is long-hand for doing ST_Rotate();
 SELECT ST_AsEWKT(ST_Affine(the_geom,  cos(pi()), -sin(pi()), 0,  sin(pi()), cos(pi()), 0,  0, 0, 1,  0, 0, 0)) As using_affine,
	 ST_AsEWKT(ST_Rotate(the_geom, pi())) As using_rotate
	FROM (SELECT ST_GeomFromEWKT('LINESTRING(1 2 3, 1 4 3)') As the_geom) As foo;
        using_affine         |        using_rotate
-----------------------------+-----------------------------
 LINESTRING(-1 -2 3,-1 -4 3) | LINESTRING(-1 -2 3,-1 -4 3)
(1 row)

--Rotate a 3d line 180 degrees in both the x and z axis
SELECT ST_AsEWKT(ST_Affine(the_geom, cos(pi()), -sin(pi()), 0, sin(pi()), cos(pi()), -sin(pi()), 0, sin(pi()), cos(pi()), 0, 0, 0))
	FROM (SELECT ST_GeomFromEWKT('LINESTRING(1 2 3, 1 4 3)') As the_geom) As foo;
           st_asewkt
-------------------------------
 LINESTRING(-1 -2 -3,-1 -4 -3)
(1 row)
		</pre></div><div class="refsection" title="See Also"><a name="idp71981520"></a><h2>See Also</h2><p><a class="xref" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a>, <a class="xref" href="#ST_Scale" title="ST_Scale">ST_Scale</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a>, <a class="xref" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a></p></div></div><div class="refentry" title="ST_Force2D"><div class="refentry.separator"><hr></div><a name="ST_Force2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Force2D — Force the geometries into a "2-dimensional mode".</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Force2D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71988688"></a><h2>Description</h2><p>Forces the geometries into a "2-dimensional mode" so that
		all output representations will only have the X and Y coordinates.
		This is useful for force OGC-compliant output (since OGC only
		specifies 2-D geometries).</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_2D.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp71994576"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_Force2D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
		st_asewkt
-------------------------------------
CIRCULARSTRING(1 1,2 3,4 5,6 7,5 6)

SELECT  ST_AsEWKT(ST_Force2D('POLYGON((0 0 2,0 5 2,5 0 2,0 0 2),(1 1 2,3 1 2,1 3 2,1 1 2))'));

				  st_asewkt
----------------------------------------------
 POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))

		</pre></div><div class="refsection" title="See Also"><a name="idp71996240"></a><h2>See Also</h2><p><a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" title="ST_Force3D"><div class="refentry.separator"><hr></div><a name="ST_Force_3D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Force3D — Force the geometries into XYZ mode.  This is an alias for ST_Force3DZ.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Force3D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72002128"></a><h2>Description</h2><p>Forces the geometries into XYZ mode.  This is an alias for ST_Force_3DZ. If a geometry has no Z component, then a 0 Z coordinate is tacked on.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3D.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp72008144"></a><h2>Examples</h2><pre class="programlisting">
		--Nothing happens to an already 3D geometry
		SELECT ST_AsEWKT(ST_Force3D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
				   st_asewkt
-----------------------------------------------
 CIRCULARSTRING(1 1 2,2 3 2,4 5 2,6 7 2,5 6 2)


SELECT  ST_AsEWKT(ST_Force3D('POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))'));

						 st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))
		</pre></div><div class="refsection" title="See Also"><a name="idp72009680"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a></p></div></div><div class="refentry" title="ST_Force3DZ"><div class="refentry.separator"><hr></div><a name="ST_Force_3DZ"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Force3DZ — Force the geometries into XYZ mode.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Force3DZ</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72016848"></a><h2>Description</h2><p>Forces the geometries into XYZ mode.  This is a synonym for ST_Force3DZ. If a geometry has no Z component, then a 0 Z coordinate is tacked on.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3DZ.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72022864"></a><h2>Examples</h2><pre class="programlisting">
--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force3DZ(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
				   st_asewkt
-----------------------------------------------
 CIRCULARSTRING(1 1 2,2 3 2,4 5 2,6 7 2,5 6 2)


SELECT  ST_AsEWKT(ST_Force3DZ('POLYGON((0 0,0 5,5 0,0 0),(1 1,3 1,1 3,1 1))'));

						 st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))
		</pre></div><div class="refsection" title="See Also"><a name="idp72024400"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" title="ST_Force3DM"><div class="refentry.separator"><hr></div><a name="ST_Force_3DM"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Force3DM — Force the geometries into XYM mode.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Force3DM</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72035664"></a><h2>Description</h2><p>Forces the geometries into XYM mode.  If a geometry has no M component, then a 0 M coordinate is tacked on.  If it has a Z component, then Z is removed</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3DM.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72038352"></a><h2>Examples</h2><pre class="programlisting">
--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force3DM(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
				   st_asewkt
------------------------------------------------
 CIRCULARSTRINGM(1 1 0,2 3 0,4 5 0,6 7 0,5 6 0)


SELECT  ST_AsEWKT(ST_Force3DM('POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1))'));

						  st_asewkt
---------------------------------------------------------------
 POLYGONM((0 0 0,0 5 0,5 0 0,0 0 0),(1 1 0,3 1 0,1 3 0,1 1 0))

		</pre></div><div class="refsection" title="See Also"><a name="idp72039888"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>,  <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_Force4D"><div class="refentry.separator"><hr></div><a name="ST_Force_4D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Force4D — Force the geometries into XYZM mode.  </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Force4D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72047440"></a><h2>Description</h2><p>Forces the geometries into XYZM mode.  0 is tacked on for missing Z and M dimensions. </p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_4D.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72051664"></a><h2>Examples</h2><pre class="programlisting">
--Nothing happens to an already 3D geometry
SELECT ST_AsEWKT(ST_Force4D(ST_GeomFromEWKT('CIRCULARSTRING(1 1 2, 2 3 2, 4 5 2, 6 7 2, 5 6 2)')));
						st_asewkt
---------------------------------------------------------
 CIRCULARSTRING(1 1 2 0,2 3 2 0,4 5 2 0,6 7 2 0,5 6 2 0)



SELECT  ST_AsEWKT(ST_Force4D('MULTILINESTRINGM((0 0 1,0 5 2,5 0 3,0 0 4),(1 1 1,3 1 1,1 3 1,1 1 1))'));

									  st_asewkt
--------------------------------------------------------------------------------------
 MULTILINESTRING((0 0 0 1,0 5 0 2,5 0 0 3,0 0 0 4),(1 1 0 1,3 1 0 1,1 3 0 1,1 1 0 1))

		</pre></div><div class="refsection" title="See Also"><a name="idp72053200"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a></p></div></div><div class="refentry" title="ST_ForceCollection"><div class="refentry.separator"><hr></div><a name="ST_Force_Collection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ForceCollection — Convert the geometry into a GEOMETRYCOLLECTION.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ForceCollection</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72060368"></a><h2>Description</h2><p>Converts the geometry into a GEOMETRYCOLLECTION. This is
			useful for simplifying the WKB representation.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Availability: 1.2.2, prior to 1.3.4 this function will crash with Curves.  This is fixed in 1.3.4+</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Force_Collection.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72066768"></a><h2>Examples</h2><pre class="programlisting">

SELECT  ST_AsEWKT(ST_ForceCollection('POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1))'));

								   st_asewkt
----------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(POLYGON((0 0 1,0 5 1,5 0 1,0 0 1),(1 1 1,3 1 1,1 3 1,1 1 1)))


  SELECT ST_AsText(ST_ForceCollection('CIRCULARSTRING(220227 150406,2220227 150407,220227 150406)'));
								   st_astext
--------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(CIRCULARSTRING(220227 150406,2220227 150407,220227 150406))
(1 row)

		</pre><pre class="programlisting">
-- POLYHEDRAL example --
SELECT ST_AsEWKT(ST_ForceCollection('POLYHEDRALSURFACE(((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
 ((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
 ((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
 ((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
 ((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
 ((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1)))'))

								   st_asewkt
----------------------------------------------------------------------------------
GEOMETRYCOLLECTION(
  POLYGON((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),
  POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),
  POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),
  POLYGON((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),
  POLYGON((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),
  POLYGON((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1))
)
		</pre></div><div class="refsection" title="See Also"><a name="idp72068816"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>,  <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>, <a class="xref" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_ForceSFS"><div class="refentry.separator"><hr></div><a name="ST_ForceSFS"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ForceSFS — Force the geometries to use SFS 1.1 geometry types only.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ForceSFS</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_ForceSFS</b>(</code>geometry  <var class="pdparam">geomA</var>, text  <var class="pdparam">version</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72091856"></a><h2>Description</h2><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div></div><div class="refentry" title="ST_ForceRHR"><div class="refentry.separator"><hr></div><a name="ST_ForceRHR"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ForceRHR — Force the orientation of the vertices in a polygon to follow the
				Right-Hand-Rule.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry
						<b class="fsfunc">ST_ForceRHR</b>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72102864"></a><h2>Description</h2><p>Forces the orientation of the vertices in a polygon to follow the
				Right-Hand-Rule. In GIS terminology, this means that the area that is bounded by the
				polygon is to the right of the boundary. In particular, the exterior ring is
				orientated in a clockwise direction and the interior rings in a counter-clockwise
				direction.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp72107216"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKT(
  ST_ForceRHR(
	'POLYGON((0 0 2, 5 0 2, 0 5 2, 0 0 2),(1 1 2, 1 3 2, 3 1 2, 1 1 2))'
  )
);
						  st_asewkt
--------------------------------------------------------------
 POLYGON((0 0 2,0 5 2,5 0 2,0 0 2),(1 1 2,3 1 2,1 3 2,1 1 2))
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp72108496"></a><h2>See Also</h2><p><a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>,
				<a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>,
				<a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a></p></div></div><div class="refentry" title="ST_ForceCurve"><div class="refentry.separator"><hr></div><a name="ST_ForceCurve"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ForceCurve — Upcast a geometry into its curved type, if applicable.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry
						<b class="fsfunc">ST_ForceCurve</b>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp71902288"></a><h2>Description</h2><p>
                        Turns a geometry into its curved representation, if applicable:
                        lines become compoundcurves, multilines become multicurves
                        polygons become curvepolygons multipolygons become multisurfaces. If the geometry input is already a curved representation returns back same as input.
                        </p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72132048"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(
  ST_ForceCurve(
	'POLYGON((0 0 2, 5 0 2, 0 5 2, 0 0 2),(1 1 2, 1 3 2, 3 1 2, 1 1 2))'::geometry
  )
);
                              st_astext
----------------------------------------------------------------------
 CURVEPOLYGON Z ((0 0 2,5 0 2,0 5 2,0 0 2),(1 1 2,1 3 2,3 1 2,1 1 2))
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp72133328"></a><h2>See Also</h2><p><a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" title="ST_LineMerge"><div class="refentry.separator"><hr></div><a name="ST_LineMerge"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineMerge — Return a (set of) LineString(s) formed by sewing together
			a MULTILINESTRING.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineMerge</b>(</code>geometry  <var class="pdparam">amultilinestring</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72139344"></a><h2>Description</h2><p>Returns a (set of) LineString(s) formed by sewing together
			the constituent line work of a MULTILINESTRING. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Only use with MULTILINESTRING/LINESTRINGs. If you feed a polygon or geometry collection into this function, it
			will return an empty GEOMETRYCOLLECTION</p></td></tr></table></div><p>Availability: 1.1.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>requires GEOS &gt;= 2.1.0</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp72141904"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_LineMerge(
ST_GeomFromText('MULTILINESTRING((-29 -27,-30 -29.7,-36 -31,-45 -33),(-45 -33,-46 -32))')
		)
);
st_astext
--------------------------------------------------------------------------------------------------
LINESTRING(-29 -27,-30 -29.7,-36 -31,-45 -33,-46 -32)
(1 row)

--If can't be merged - original MULTILINESTRING is returned
SELECT ST_AsText(ST_LineMerge(
ST_GeomFromText('MULTILINESTRING((-29 -27,-30 -29.7,-36 -31,-45 -33),(-45.2 -33.2,-46 -32))')
)
);
st_astext
----------------
MULTILINESTRING((-45.2 -33.2,-46 -32),(-29 -27,-30 -29.7,-36 -31,-45 -33))
			</pre></div><div class="refsection" title="See Also"><a name="idp72143184"></a><h2>See Also</h2><p><a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>, <a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" title="ST_CollectionExtract"><div class="refentry.separator"><hr></div><a name="ST_CollectionExtract"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CollectionExtract — 
Given a (multi)geometry, return a (multi)geometry consisting only of elements of the specified type.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_CollectionExtract</b>(</code>geometry  <var class="pdparam">collection</var>, integer  <var class="pdparam">type</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72150608"></a><h2>Description</h2><p>
Given a (multi)geometry, returns a (multi)geometry consisting only of elements of the specified type.
Sub-geometries that are not the specified type are ignored. If there are no sub-geometries of the right type, an EMPTY geometry will be returned.
Only points, lines and polygons are supported. Type numbers are 1 == POINT, 2 == LINESTRING, 3 == POLYGON.
			</p><p>Availability: 1.5.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Prior to 1.5.3 this function returned non-collection inputs untouched, no matter type.
In 1.5.3 non-matching single geometries result in a NULL return.
In of 2.0.0 every case of missing match results in a typed EMPTY return.
			</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>When specifying 3 == POLYGON a multipolygon is returned even when the edges are shared.  This results in an invalid multipolygon for many cases
			such as applying this function on an <a class="xref" href="#ST_Split" title="ST_Split">ST_Split</a> result.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp72153552"></a><h2>Examples</h2><pre class="programlisting">-- Constants: 1 == POINT, 2 == LINESTRING, 3 == POLYGON
SELECT ST_AsText(ST_CollectionExtract(ST_GeomFromText('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(POINT(0 0)))'),1));
st_astext
---------------
MULTIPOINT(0 0)
(1 row)

SELECT ST_AsText(ST_CollectionExtract(ST_GeomFromText('GEOMETRYCOLLECTION(GEOMETRYCOLLECTION(LINESTRING(0 0, 1 1)),LINESTRING(2 2, 3 3))'),2));
st_astext
---------------
MULTILINESTRING((0 0, 1 1), (2 2, 3 3))
(1 row)
			</pre></div><div class="refsection" title="See Also"><a name="idp72154832"></a><h2>See Also</h2><p><a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a></p></div></div><div class="refentry" title="ST_CollectionHomogenize"><div class="refentry.separator"><hr></div><a name="ST_CollectionHomogenize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CollectionHomogenize — 
	Given a geometry collection, return the "simplest" representation of the contents.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_CollectionHomogenize</b>(</code>geometry  <var class="pdparam">collection</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72161616"></a><h2>Description</h2><p>
					Given a geometry collection, returns the "simplest" representation of the contents.  Singletons will be returned as singletons.  Collections that are homogeneous will be returned as the appropriate multi-type.
				</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>When specifying 3 == POLYGON a multipolygon is returned even when the edges are shared.  This results in an invalid multipolygon for many cases
			such as applying this function on an <a class="xref" href="#ST_Split" title="ST_Split">ST_Split</a> result.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp72164176"></a><h2>Examples</h2><pre class="programlisting">
  SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(POINT(0 0))'));

	st_astext
	------------
	 POINT(0 0)
	(1 row)

  SELECT ST_AsText(ST_CollectionHomogenize('GEOMETRYCOLLECTION(POINT(0 0),POINT(1 1))'));

	st_astext
	---------------------
	 MULTIPOINT(0 0,1 1)
	(1 row)

				</pre></div><div class="refsection" title="See Also"><a name="idp72165456"></a><h2>See Also</h2><p><a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a>, <a class="xref" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a></p></div></div><div class="refentry" title="ST_Multi"><div class="refentry.separator"><hr></div><a name="ST_Multi"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Multi — Return the geometry as a MULTI* geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Multi</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72171728"></a><h2>Description</h2><p>Returns the geometry as a MULTI* geometry. If the geometry
				is already a MULTI*, it is returned unchanged.</p></div><div class="refsection" title="Examples"><a name="idp72173008"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_Multi(ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,
			743265 2967450,743265.625 2967416,743238 2967416))')));
			st_astext
			--------------------------------------------------------------------------------------------------
			MULTIPOLYGON(((743238 2967416,743238 2967450,743265 2967450,743265.625 2967416,
			743238 2967416)))
			(1 row)
			</pre></div><div class="refsection" title="See Also"><a name="idp72174288"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" title="ST_Normalize"><div class="refentry.separator"><hr></div><a name="ST_Normalize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Normalize — Return the geometry in its canonical form.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Normalize</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72180304"></a><h2>Description</h2><p>
        Returns the geometry in its normalized/canonical form.
        May reorder vertices in polygon rings, rings in a polygon,
        elements in a multi-geometry complex.
      </p><p>
        Mostly only useful for testing purposes (comparing expected
        and obtained results).
      </p></div><div class="refsection" title="Examples"><a name="idp72181840"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_Normalize(ST_GeomFromText(
  'GEOMETRYCOLLECTION(
    POINT(2 3),
    MULTILINESTRING((0 0, 1 1),(2 2, 3 3)),
    POLYGON(
      (0 10,0 0,10 0,10 10,0 10),
      (4 2,2 2,2 4,4 4,4 2),
      (6 8,8 8,8 6,6 6,6 8)
    )
  )'
)));
                                                                     st_astext
----------------------------------------------------------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(POLYGON((0 0,0 10,10 10,10 0,0 0),(6 6,8 6,8 8,6 8,6 6),(2 2,4 2,4 4,2 4,2 2)),MULTILINESTRING((2 2,3 3),(0 0,1 1)),POINT(2 3))
(1 row)
			</pre></div><div class="refsection" title="See Also"><a name="idp72183120"></a><h2>See Also</h2><p>
        <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>,
      </p></div></div><div class="refentry" title="ST_RemovePoint"><div class="refentry.separator"><hr></div><a name="ST_RemovePoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RemovePoint — Remove point from a linestring.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_RemovePoint</b>(</code>geometry <var class="pdparam">linestring</var>, integer <var class="pdparam">offset</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72190416"></a><h2>Description</h2><p>Remove a point from a linestring, given its 0-based index. Useful for turning a closed ring into an open line string</p><p>Availability: 1.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp72193488"></a><h2>Examples</h2><pre class="programlisting">
--guarantee no LINESTRINGS are closed
--by removing the end point.  The below assumes the_geom is of type LINESTRING
UPDATE sometable
	SET the_geom = ST_RemovePoint(the_geom, ST_NPoints(the_geom) - 1)
	FROM sometable
	WHERE ST_IsClosed(the_geom) = true;
		</pre></div><div class="refsection" title="See Also"><a name="idp72194768"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>, <a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>, <a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a></p></div></div><div class="refentry" title="ST_Reverse"><div class="refentry.separator"><hr></div><a name="ST_Reverse"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Reverse — Return the geometry with vertex order reversed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Reverse</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72201552"></a><h2>Description</h2><p>Can be used on any geometry and reverses the order of the vertexes.</p></div><div class="refsection" title="Examples"><a name="idp72202704"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(the_geom) as line, ST_AsText(ST_Reverse(the_geom)) As reverseline
FROM
(SELECT ST_MakeLine(ST_MakePoint(1,2),
		ST_MakePoint(1,10)) As the_geom) as foo;
--result
		line         |     reverseline
---------------------+----------------------
LINESTRING(1 2,1 10) | LINESTRING(1 10,1 2)
</pre></div></div><div class="refentry" title="ST_Rotate"><div class="refentry.separator"><hr></div><a name="ST_Rotate"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Rotate — Rotate a geometry rotRadians counter-clockwise about an origin.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Rotate</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Rotate</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var>, float <var class="pdparam">x0</var>, float <var class="pdparam">y0</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Rotate</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var>, geometry <var class="pdparam">pointOrigin</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72227536"></a><h2>Description</h2><p>Rotates geometry rotRadians counter-clockwise about the origin. The rotation origin can be
			specified either as a POINT geometry, or as x and y coordinates. If the origin is not
			specified, the geometry is rotated about POINT(0 0).</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Enhanced: 2.0.0 additional parameters for specifying the origin of rotation were added.</p><p>Availability: 1.1.2. Name changed from Rotate to ST_Rotate in 1.2.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp72235344"></a><h2>Examples</h2><pre class="programlisting">
--Rotate 180 degrees
SELECT ST_AsEWKT(ST_Rotate('LINESTRING (50 160, 50 50, 100 50)', pi()));
               st_asewkt
---------------------------------------
 LINESTRING(-50 -160,-50 -50,-100 -50)
(1 row)

--Rotate 30 degrees counter-clockwise at x=50, y=160
SELECT ST_AsEWKT(ST_Rotate('LINESTRING (50 160, 50 50, 100 50)', pi()/6, 50, 160));
                                 st_asewkt
---------------------------------------------------------------------------
 LINESTRING(50 160,105 64.7372055837117,148.301270189222 89.7372055837117)
(1 row)

--Rotate 60 degrees clockwise from centroid
SELECT ST_AsEWKT(ST_Rotate(geom, -pi()/3, ST_Centroid(geom)))
FROM (SELECT 'LINESTRING (50 160, 50 50, 100 50)'::geometry AS geom) AS foo;
                           st_asewkt
--------------------------------------------------------------
 LINESTRING(116.4225 130.6721,21.1597 75.6721,46.1597 32.3708)
(1 row)
		</pre></div><div class="refsection" title="See Also"><a name="idp72236880"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" title="ST_RotateX"><div class="refentry.separator"><hr></div><a name="ST_RotateX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RotateX — Rotate a geometry rotRadians about the X axis.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_RotateX</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72245072"></a><h2>Description</h2><p>Rotate a geometry geomA - rotRadians about the X axis.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="code">ST_RotateX(geomA,  rotRadians)</code>
			is short-hand for <code class="code">ST_Affine(geomA, 1, 0, 0, 0, cos(rotRadians), -sin(rotRadians), 0, sin(rotRadians), cos(rotRadians), 0, 0, 0)</code>.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Availability: 1.1.2. Name changed from RotateX to ST_RotateX in 1.2.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp72252496"></a><h2>Examples</h2><pre class="programlisting">
--Rotate a line 90 degrees along x-axis
SELECT ST_AsEWKT(ST_RotateX(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
		 st_asewkt
---------------------------
 LINESTRING(1 -3 2,1 -1 1)
</pre></div><div class="refsection" title="See Also"><a name="idp72258256"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" title="ST_RotateY"><div class="refentry.separator"><hr></div><a name="ST_RotateY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RotateY — Rotate a geometry rotRadians about the Y axis.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_RotateY</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72265936"></a><h2>Description</h2><p>Rotate a geometry geomA - rotRadians about the y axis.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="code">ST_RotateY(geomA,  rotRadians)</code>
			is short-hand for <code class="code">ST_Affine(geomA,  cos(rotRadians), 0, sin(rotRadians),  0, 1, 0,  -sin(rotRadians), 0, cos(rotRadians), 0,  0, 0)</code>.</p></td></tr></table></div><p>Availability: 1.1.2. Name changed from RotateY to ST_RotateY in 1.2.2</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp72273488"></a><h2>Examples</h2><pre class="programlisting">
--Rotate a line 90 degrees along y-axis
 SELECT ST_AsEWKT(ST_RotateY(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
		 st_asewkt
---------------------------
 LINESTRING(3 2 -1,1 1 -1)
</pre></div><div class="refsection" title="See Also"><a name="idp72275152"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a></p></div></div><div class="refentry" title="ST_RotateZ"><div class="refentry.separator"><hr></div><a name="ST_RotateZ"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RotateZ — Rotate a geometry rotRadians about the Z axis.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_RotateZ</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">rotRadians</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72282960"></a><h2>Description</h2><p>Rotate a geometry geomA - rotRadians about the Z axis.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is a synonym for ST_Rotate</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="code">ST_RotateZ(geomA,  rotRadians)</code>
			is short-hand for <code class="code">SELECT ST_Affine(geomA,  cos(rotRadians), -sin(rotRadians), 0,  sin(rotRadians), cos(rotRadians), 0,  0, 0, 1,  0, 0, 0)</code>.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Availability: 1.1.2. Name changed from RotateZ to ST_RotateZ in 1.2.2</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp72292688"></a><h2>Examples</h2><pre class="programlisting">
--Rotate a line 90 degrees along z-axis
SELECT ST_AsEWKT(ST_RotateZ(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), pi()/2));
		 st_asewkt
---------------------------
 LINESTRING(-2 1 3,-1 1 1)

 --Rotate a curved circle around z-axis
SELECT ST_AsEWKT(ST_RotateZ(the_geom, pi()/2))
FROM (SELECT ST_LineToCurve(ST_Buffer(ST_GeomFromText('POINT(234 567)'), 3)) As the_geom) As foo;

													   st_asewkt
----------------------------------------------------------------------------------------------------------------------------
 CURVEPOLYGON(CIRCULARSTRING(-567 237,-564.87867965644 236.12132034356,-564 234,-569.12132034356 231.87867965644,-567 237))

</pre></div><div class="refsection" title="See Also"><a name="idp72294224"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>, <a class="xref" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a></p></div></div><div class="refentry" title="ST_Scale"><div class="refentry.separator"><hr></div><a name="ST_Scale"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Scale — Scale a geometry by given factors.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Scale</b>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var>, float <var class="pdparam">ZFactor</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Scale</b>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Scale</b>(</code>geometry  <var class="pdparam">geom</var>, geometry <var class="pdparam">factor</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72311632"></a><h2>Description</h2><p>Scales the geometry to a new size by multiplying the
			ordinates with the corresponding factor parameters.
		</p><p>
The version taking a geometry as the <code class="varname">factor</code> parameter
allows passing a 2d, 3dm, 3dz or 4d point to set scaling factor for all
supported dimensions. Missing dimensions in the <code class="varname">factor</code>
point are equivalent to no scaling the corresponding dimension.
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p>Availability: 1.1.0.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Enhanced: 2.2.0 support for scaling all dimension (geometry parameter) was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p></div><div class="refsection" title="Examples"><a name="idp72322512"></a><h2>Examples</h2><pre class="programlisting">--Version 1: scale X, Y, Z
SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 0.75, 0.8));
			  st_asewkt
--------------------------------------
 LINESTRING(0.5 1.5 2.4,0.5 0.75 0.8)

--Version 2: Scale X Y
 SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 0.75));
			st_asewkt
----------------------------------
 LINESTRING(0.5 1.5 3,0.5 0.75 1)

--Version 3: Scale X Y Z M
 SELECT ST_AsEWKT(ST_Scale(ST_GeomFromEWKT('LINESTRING(1 2 3 4, 1 1 1 1)'),
   ST_MakePoint(0.5, 0.75, 2, -1)));
			       st_asewkt
----------------------------------------
 LINESTRING(0.5 1.5 6 -4,0.5 0.75 2 -1)


</pre></div><div class="refsection" title="See Also"><a name="idp72324176"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a></p></div></div><div class="refentry" title="ST_Segmentize"><div class="refentry.separator"><hr></div><a name="ST_Segmentize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Segmentize — Return a modified geometry/geography having no segment longer than the
			given distance.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Segmentize</b>(</code>geometry  <var class="pdparam">geom</var>, float  <var class="pdparam">max_segment_length</var><code>)</code>;</p><p><code class="funcdef">geography <b class="fsfunc">ST_Segmentize</b>(</code>geography  <var class="pdparam">geog</var>, float  <var class="pdparam">max_segment_length</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72342992"></a><h2>Description</h2><p>Returns a modified geometry having no segment longer than the
			given <code class="varname">max_segment_length</code>.  Distance computation is performed in 2d
			only. For geometry, length units are in units of spatial reference.  For geography, units are in meters.</p><p>Availability: 1.2.2</p><p>Enhanced: 2.3.0 Segmentize geography now uses equal length segments</p><p>Enhanced: 2.1.0 support for geography was introduced.</p><p>Changed: 2.1.0 As a result of the introduction of geography support: The construct <code class="code">SELECT ST_Segmentize('LINESTRING(1 2, 3 4)',0.5);</code> will result in ambiguous function error.  You need to have properly typed object e.g. a geometry/geography column, use ST_GeomFromText, ST_GeogFromText or
				<code class="code">SELECT ST_Segmentize('LINESTRING(1 2, 3 4)'::geometry,0.5);</code></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This will only increase segments.  It will not lengthen segments shorter than
			max length</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp72347216"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_Segmentize(
ST_GeomFromText('MULTILINESTRING((-29 -27,-30 -29.7,-36 -31,-45 -33),(-45 -33,-46 -32))')
		,5)
);
st_astext
--------------------------------------------------------------------------------------------------
MULTILINESTRING((-29 -27,-30 -29.7,-34.886615700134 -30.758766735029,-36 -31,
-40.8809353009198 -32.0846522890933,-45 -33),
(-45 -33,-46 -32))
(1 row)

SELECT ST_AsText(ST_Segmentize(ST_GeomFromText('POLYGON((-29 28, -30 40, -29 28))'),10));
st_astext
-----------------------
POLYGON((-29 28,-29.8304547985374 37.9654575824488,-30 40,-29.1695452014626 30.0345424175512,-29 28))
(1 row)

			</pre></div><div class="refsection" title="See Also"><a name="idp72360912"></a><h2>See Also</h2><p><a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" title="ST_SetPoint"><div class="refentry.separator"><hr></div><a name="ST_SetPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetPoint — Replace point of a linestring with a given point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SetPoint</b>(</code>geometry <var class="pdparam">linestring</var>, integer <var class="pdparam">zerobasedposition</var>, geometry <var class="pdparam">point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72368976"></a><h2>Description</h2><p>Replace point N of linestring with given point. Index is
			0-based.Negative index are counted backwards, so that -1 is last point.
				This is especially useful in triggers when trying to maintain relationship of joints when one vertex moves.</p><p>Availability: 1.1.0</p><p>Updated 2.3.0 : negative indexing</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp72372304"></a><h2>Examples</h2><pre class="programlisting">
--Change first point in line string from -1 3 to -1 1
SELECT ST_AsText(ST_SetPoint('LINESTRING(-1 2,-1 3)', 0, 'POINT(-1 1)'));
	   st_astext
-----------------------
 LINESTRING(-1 1,-1 3)

---Change last point in a line string (lets play with 3d linestring this time)
SELECT ST_AsEWKT(ST_SetPoint(foo.the_geom, ST_NumPoints(foo.the_geom) - 1, ST_GeomFromEWKT('POINT(-1 1 3)')))
FROM (SELECT ST_GeomFromEWKT('LINESTRING(-1 2 3,-1 3 4, 5 6 7)') As the_geom) As foo;
	   st_asewkt
-----------------------
LINESTRING(-1 2 3,-1 3 4,-1 1 3)

SELECT ST_AsText(ST_SetPoint(g, -3, p))
FROM ST_GEomFromText('LINESTRING(0 0, 1 1, 2 2, 3 3, 4 4)') AS g
	, ST_PointN(g,1) as p;
	   st_astext
-----------------------
LINESTRING(0 0,1 1,0 0,3 3,4 4)

			</pre></div><div class="refsection" title="See Also"><a name="idp72373584"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>, <a class="xref" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>, <a class="xref" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a>, <a class="xref" href="#ST_PointN" title="ST_PointN">ST_PointN</a>, <a class="xref" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a></p></div></div><div class="refentry" title="ST_SetSRID"><div class="refentry.separator"><hr></div><a name="ST_SetSRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetSRID — Set the SRID on a geometry to a particular integer
		value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SetSRID</b>(</code>geometry 
			<var class="pdparam">geom</var>, integer 
			<var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72398544"></a><h2>Description</h2><p>Sets the SRID on a geometry to a particular integer value.
		Useful in constructing bounding boxes for queries.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function does not transform the geometry coordinates in any way -
		  it simply sets the meta data defining the spatial reference system the geometry is assumed to be in.
		  Use <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a> if you want to transform the
		  geometry into a new projection.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72403664"></a><h2>Examples</h2><p>-- Mark a point as WGS 84 long lat --</p><pre class="programlisting">SELECT ST_SetSRID(ST_Point(-123.365556, 48.428611),4326) As wgs84long_lat;
-- the ewkt representation (wrap with ST_AsEWKT) -
SRID=4326;POINT(-123.365556 48.428611)
			</pre><p>-- Mark a point as WGS 84 long lat and then transform to web mercator (Spherical Mercator) --</p><pre class="programlisting">SELECT ST_Transform(ST_SetSRID(ST_Point(-123.365556, 48.428611),4326),3785) As spere_merc;
-- the ewkt representation (wrap with ST_AsEWKT) -
SRID=3785;POINT(-13732990.8753491 6178458.96425423)
			</pre></div><div class="refsection" title="See Also"><a name="idp72406224"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>,  <a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a></p></div></div><div class="refentry" title="ST_SnapToGrid"><div class="refentry.separator"><hr></div><a name="ST_SnapToGrid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SnapToGrid — 
		Snap all points of the input geometry to a regular grid.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SnapToGrid</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">originX</var>, float  <var class="pdparam">originY</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_SnapToGrid</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_SnapToGrid</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">size</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_SnapToGrid</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">pointOrigin</var>, float  <var class="pdparam">sizeX</var>, float  <var class="pdparam">sizeY</var>, float  <var class="pdparam">sizeZ</var>, float  <var class="pdparam">sizeM</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72433232"></a><h2>Description</h2><p>Variant 1,2,3: Snap all points of the input geometry to the grid defined by
			its origin and cell size. Remove consecutive points falling on the
			same cell, eventually returning NULL if output points are not
			enough to define a geometry of the given type. Collapsed
			geometries in a collection are stripped from it.
			Useful for reducing precision.
		</p><p>Variant 4:  Introduced 1.1.0 - Snap all points of the input geometry to the grid defined by
			its origin (the second argument, must be a point) and cell sizes.
			Specify 0 as size for any dimension you don't want to snap to a
			grid.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The returned geometry might lose its simplicity (see
		  <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>).</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Before release 1.1.0 this function always returned a 2d
		  geometry. Starting at 1.1.0 the returned geometry will have same
		  dimensionality as the input one with higher dimension values
		  untouched. Use the version taking a second geometry argument to
		  define all grid dimensions.</p></td></tr></table></div><p>Availability: 1.0.0RC1</p><p>Availability: 1.1.0 - Z and M support</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp72438992"></a><h2>Examples</h2><pre class="programlisting">
--Snap your geometries to a precision grid of 10^-3
UPDATE mytable
   SET the_geom = ST_SnapToGrid(the_geom, 0.001);

SELECT ST_AsText(ST_SnapToGrid(
			ST_GeomFromText('LINESTRING(1.1115678 2.123, 4.111111 3.2374897, 4.11112 3.23748667)'),
			0.001)
		);
			  st_astext
-------------------------------------
 LINESTRING(1.112 2.123,4.111 3.237)
 --Snap a 4d geometry
SELECT ST_AsEWKT(ST_SnapToGrid(
	ST_GeomFromEWKT('LINESTRING(-1.1115678 2.123 2.3456 1.11111,
		4.111111 3.2374897 3.1234 1.1111, -1.11111112 2.123 2.3456 1.1111112)'),
 ST_GeomFromEWKT('POINT(1.12 2.22 3.2 4.4444)'),
 0.1, 0.1, 0.1, 0.01) );
								  st_asewkt
------------------------------------------------------------------------------
 LINESTRING(-1.08 2.12 2.3 1.1144,4.12 3.22 3.1 1.1144,-1.08 2.12 2.3 1.1144)


--With a 4d geometry - the ST_SnapToGrid(geom,size) only touches x and y coords but keeps m and z the same
SELECT ST_AsEWKT(ST_SnapToGrid(ST_GeomFromEWKT('LINESTRING(-1.1115678 2.123 3 2.3456,
		4.111111 3.2374897 3.1234 1.1111)'),
	   0.01)      );
						st_asewkt
---------------------------------------------------------
 LINESTRING(-1.11 2.12 3 2.3456,4.11 3.24 3.1234 1.1111)

		</pre></div><div class="refsection" title="See Also"><a name="idp72440528"></a><h2>See Also</h2><p>
		<a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a>,
		<a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>,
		<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
		<a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>,
		<a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>,
		<a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>
		</p></div></div><div class="refentry" title="ST_Snap"><div class="refentry.separator"><hr></div><a name="ST_Snap"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Snap — 
	Snap segments and vertices of input geometry
	to vertices of a reference geometry.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Snap</b>(</code>geometry  <var class="pdparam">input</var>, geometry  <var class="pdparam">reference</var>, float  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72450896"></a><h2>Description</h2><p>
 Snaps the vertices and segments of a geometry
 another Geometry's vertices.
 A snap distance tolerance is used to control where snapping is performed.
		</p><p>
 Snapping one geometry to another can improve
 robustness for overlay operations by eliminating
 nearly-coincident edges
 (which cause problems during noding and intersection calculation).
		</p><p>
 Too much snapping can result in invalid topology
 being created, so the number and location of snapped vertices
 is decided using heuristics to determine when it
 is safe to snap.
 This can result in some potential snaps being omitted, however.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  The returned geometry might lose its simplicity (see
		  <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>) and validity (see
		  <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>).
		  </p></td></tr></table></div><p>Availability: 2.0.0 requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" title="Examples"><a name="idp72454736"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col class="column1"><col class="column2"></colgroup><tbody><tr><td colspan="2" align="center"><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap01.png"><div class="caption"><p>A multipolygon shown with a linestring (before any snapping)</p></div></div></div>
					   </td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap02.png"><div class="caption"><p>A multipolygon snapped to linestring to tolerance: 1.01 of distance.
							  The new multipolygon is shown with reference linestring</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_Snap(poly,line, ST_Distance(poly,line)*1.01)) AS polysnapped
FROM (SELECT
   ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )),
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line

	) As foo;

                             polysnapped
---------------------------------------------------------------------
 MULTIPOLYGON(((26 125,26 200,126 200,126 125,101 100,26 125),
 (51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
				</pre>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap04.png"><div class="caption"><p>A multipolygon snapped to linestring to tolerance: 1.25 of distance.
							  The new multipolygon is shown with reference linestring</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
    ST_Snap(poly,line, ST_Distance(poly,line)*1.25)
  ) AS polysnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
    (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      ( 51 150, 101 150, 76 175, 51 150 )),
      (( 151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line

	) As foo;

                             polysnapped
---------------------------------------------------------------------
MULTIPOLYGON(((5 107,26 200,126 200,126 125,101 100,54 84,5 107),
(51 150,101 150,76 175,51 150)),((151 100,151 200,176 175,151 100)))
				</pre>
						</td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap03.png"><div class="caption"><p>The linestring snapped to the original multipolygon  at tolerance 1.01 of distance.
							  The new linestring is shown with reference multipolygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
   ST_Snap(line, poly, ST_Distance(poly,line)*1.01)
  ) AS linesnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
     ((26 125, 26 200, 126 200, 126 125, 26 125),
      (51 150, 101 150, 76 175, 51 150 )),
      ((151 100, 151 200, 176 175, 151 100)))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
	) As foo;

              linesnapped
----------------------------------------
 LINESTRING(5 107,26 125,54 84,101 100)
				</pre><p>
						  </p>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_snap05.png"><div class="caption"><p>The linestring snapped to the original multipolygon  at tolerance 1.25 of distance.
							  The new linestring is shown with reference multipolygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
 ST_Snap(line, poly, ST_Distance(poly,line)*1.25)
  ) AS linesnapped
FROM (SELECT
  ST_GeomFromText('MULTIPOLYGON(
     (( 26 125, 26 200, 126 200, 126 125, 26 125 ),
      (51 150, 101 150, 76 175, 51 150 )),
      ((151 100, 151 200, 176 175, 151 100 )))') As poly,
       ST_GeomFromText('LINESTRING (5 107, 54 84, 101 100)') As line
	) As foo;
              linesnapped
---------------------------------------
LINESTRING(26 125,54 84,101 100)
				</pre>
					</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp72483408"></a><h2>See Also</h2><p>
		<a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
		</p></div></div><div class="refentry" title="ST_Transform"><div class="refentry.separator"><hr></div><a name="ST_Transform"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Transform — Return a new geometry with its coordinates transformed to
			a different spatial reference.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Transform</b>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Transform</b>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">to_proj</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Transform</b>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">from_proj</var>, text  <var class="pdparam">to_proj</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Transform</b>(</code>geometry  <var class="pdparam">geom</var>, text  <var class="pdparam">from_proj</var>, integer  <var class="pdparam">to_srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72502480"></a><h2>Description</h2><p>Returns a new geometry with its coordinates transformed to
            a different spatial reference system. The destination spatial
			reference <code class="varname">to_srid</code> may be identified by a valid
			SRID integer parameter (i.e. it must exist in the
			<code class="varname">spatial_ref_sys</code> table).
			Alternatively, a spatial reference defined as a PROJ.4 string
			can be used for <code class="varname">to_proj</code> and/or
			<code class="varname">from_proj</code>, however these methods are not
			optimized. If the destination spatial reference system is
			expressed with a PROJ.4 string instead of an SRID, the SRID of the
			output geometry will be set to zero. With the exception of functions with
			<code class="varname">from_proj</code>, input geometries must have a defined SRID.
		</p><p>ST_Transform is often confused with ST_SetSRID().  ST_Transform actually changes the coordinates
		of a geometry from one spatial reference system to another, while ST_SetSRID() simply changes the SRID identifier of
		the geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires PostGIS be compiled with Proj support.  Use <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> to confirm you have proj support compiled in.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If using more than one transformation, it is useful to have a functional index on the commonly used
			transformations to take advantage of index usage.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Enhanced: 2.3.0 support for direct PROJ.4 text was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.6</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp72513232"></a><h2>Examples</h2><p>Change Massachusetts state plane US feet geometry to WGS 84 long lat</p><pre class="programlisting">
SELECT ST_AsText(ST_Transform(ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,
	743265 2967450,743265.625 2967416,743238 2967416))',2249),4326)) As wgs_geom;

 wgs_geom
---------------------------
 POLYGON((-71.1776848522251 42.3902896512902,-71.1776843766326 42.3903829478009,
-71.1775844305465 42.3903826677917,-71.1775825927231 42.3902893647987,-71.177684
8522251 42.3902896512902));
(1 row)

--3D Circular String example
SELECT ST_AsEWKT(ST_Transform(ST_GeomFromEWKT('SRID=2249;CIRCULARSTRING(743238 2967416 1,743238 2967450 2,743265 2967450 3,743265.625 2967416 3,743238 2967416 4)'),4326));

				 st_asewkt
--------------------------------------------------------------------------------------
 SRID=4326;CIRCULARSTRING(-71.1776848522251 42.3902896512902 1,-71.1776843766326 42.3903829478009 2,
 -71.1775844305465 42.3903826677917 3,
 -71.1775825927231 42.3902893647987 3,-71.1776848522251 42.3902896512902 4)

		</pre><p>Example of creating a partial functional index.  For tables where you are not sure all the geometries
			will be filled in, its best to use a partial index that leaves out null geometries which will both conserve space and make your index smaller and more efficient.</p><pre class="programlisting">
CREATE INDEX idx_the_geom_26986_parcels
  ON parcels
  USING gist
  (ST_Transform(the_geom, 26986))
  WHERE the_geom IS NOT NULL;
		</pre><p>Examples of using PROJ.4 text to transform with custom spatial references.</p><pre class="programlisting">
-- Find intersection of two polygons near the North pole, using a custom Gnomic projection
-- See http://boundlessgeo.com/2012/02/flattening-the-peel/
 WITH data AS (
   SELECT
     ST_GeomFromText('POLYGON((170 50,170 72,-130 72,-130 50,170 50))', 4326) AS p1,
     ST_GeomFromText('POLYGON((-170 68,-170 90,-141 90,-141 68,-170 68))', 4326) AS p2,
     '+proj=gnom +ellps=WGS84 +lat_0=70 +lon_0=-160 +no_defs'::text AS gnom
 )
 SELECT ST_AsText(
   ST_Transform(
     ST_Intersection(ST_Transform(p1, gnom), ST_Transform(p2, gnom)),
   gnom, 4326))
 FROM data;
                                          st_astext
 --------------------------------------------------------------------------------
  POLYGON((-170 74.053793645338,-141 73.4268621378904,-141 68,-170 68,-170 74.053793645338))
		</pre></div><div class="refsection" title="Configuring transformation behaviour"><a name="idp72516816"></a><h2>Configuring transformation behaviour</h2><p>Sometimes coordinate transformation involving a grid-shift
				can fail, for example if PROJ.4 has not been built with
				grid-shift files or the coordinate does not lie within the
				range for which the grid shift is defined. By default, PostGIS
				will throw an error if a grid shift file is not present, but
				this behaviour can be configured on a per-SRID basis either
				by testing different <code class="varname">to_proj</code> values of
				PROJ.4 text, or altering the <code class="varname">proj4text</code> value
				within the <code class="varname">spatial_ref_sys</code> table.
			</p><p>For example, the proj4text parameter +datum=NAD87 is a shorthand form for the following +nadgrids parameter:</p><pre class="programlisting">+nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat</pre><p>The @ prefix means no error is reported if the files are not present, but if the end of the list is reached with no file having been appropriate (ie. found and overlapping) then an error is issued.</p><p>If, conversely, you wanted to ensure that at least the standard files were present, but that if all files were scanned without a hit a null transformation is applied you could use:</p><pre class="programlisting">+nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat,null</pre><p>The null grid shift file is a valid grid shift file covering the whole world and applying no shift. So for a complete example, if you wanted to alter PostGIS so that transformations to SRID 4267 that didn't lie within the correct range did not throw an ERROR, you would use the following:</p><pre class="programlisting">UPDATE spatial_ref_sys SET proj4text = '+proj=longlat +ellps=clrk66 +nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat,null +no_defs' WHERE srid = 4267;</pre></div><div class="refsection" title="See Also"><a name="idp72522448"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a></p></div></div><div class="refentry" title="ST_Translate"><div class="refentry.separator"><hr></div><a name="ST_Translate"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Translate — Translate a geometry by given offsets.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Translate</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">deltax</var>, float  <var class="pdparam">deltay</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Translate</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">deltax</var>, float  <var class="pdparam">deltay</var>, float  <var class="pdparam">deltaz</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72541136"></a><h2>Description</h2><p>Returns a new geometry whose coordinates are translated delta x,delta y,delta z units. Units are
		based on the units defined in spatial reference (SRID) for this geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p>Availability: 1.2.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72545872"></a><h2>Examples</h2><p>Move a point 1 degree longitude</p><pre class="programlisting">
	SELECT ST_AsText(ST_Translate(ST_GeomFromText('POINT(-71.01 42.37)',4326),1,0)) As wgs_transgeomtxt;

	wgs_transgeomtxt
	---------------------
	POINT(-70.01 42.37)
		</pre><p>Move a linestring 1 degree longitude and 1/2 degree latitude</p><pre class="programlisting">SELECT ST_AsText(ST_Translate(ST_GeomFromText('LINESTRING(-71.01 42.37,-71.11 42.38)',4326),1,0.5)) As wgs_transgeomtxt;
		   wgs_transgeomtxt
	---------------------------------------
	LINESTRING(-70.01 42.87,-70.11 42.88)
		</pre><p>Move a 3d point</p><pre class="programlisting">SELECT ST_AsEWKT(ST_Translate(CAST('POINT(0 0 0)' As geometry), 5, 12,3));
	st_asewkt
	---------
	POINT(5 12 3)
		</pre><p>Move a curve and a point</p><pre class="programlisting">SELECT ST_AsText(ST_Translate(ST_Collect('CURVEPOLYGON(CIRCULARSTRING(4 3,3.12 0.878,1 0,-1.121 5.1213,6 7, 8 9,4 3))','POINT(1 3)'),1,2));
														 st_astext
------------------------------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(CURVEPOLYGON(CIRCULARSTRING(5 5,4.12 2.878,2 2,-0.121 7.1213,7 9,9 11,5 5)),POINT(2 5))
</pre></div><div class="refsection" title="See Also"><a name="idp72550608"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_TransScale"><div class="refentry.separator"><hr></div><a name="ST_TransScale"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_TransScale — Translate a geometry by given factors and offsets.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_TransScale</b>(</code>geometry  <var class="pdparam">geomA</var>, float <var class="pdparam">deltaX</var>, float <var class="pdparam">deltaY</var>, float <var class="pdparam">XFactor</var>, float <var class="pdparam">YFactor</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp72565712"></a><h2>Description</h2><p>Translates the geometry using the deltaX and deltaY args,
			then scales it using the XFactor, YFactor args, working in 2D only.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><code class="code">ST_TransScale(geomA, deltaX, deltaY, XFactor, YFactor)</code>
			is short-hand for <code class="code">ST_Affine(geomA, XFactor, 0, 0, 0, YFactor, 0,
			0, 0, 1, deltaX*XFactor, deltaY*YFactor, 0)</code>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p>Availability: 1.1.0.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp72571472"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_TransScale(ST_GeomFromEWKT('LINESTRING(1 2 3, 1 1 1)'), 0.5, 1, 1, 2));
		  st_asewkt
-----------------------------
 LINESTRING(1.5 6 3,1.5 4 1)


--Buffer a point to get an approximation of a circle, convert to curve and then translate 1,2 and scale it 3,4
  SELECT ST_AsText(ST_Transscale(ST_LineToCurve(ST_Buffer('POINT(234 567)', 3)),1,2,3,4));
														  st_astext
------------------------------------------------------------------------------------------------------------------------------
 CURVEPOLYGON(CIRCULARSTRING(714 2276,711.363961030679 2267.51471862576,705 2264,698.636038969321 2284.48528137424,714 2276))

</pre></div><div class="refsection" title="See Also"><a name="idp72573008"></a><h2>See Also</h2><p><a class="xref" href="#ST_Affine" title="ST_Affine">ST_Affine</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a></p></div></div></div><div class="sect1" title="8.7. Geometry Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Geometry_Outputs"></a>8.7. Geometry Outputs</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_AsBinary">ST_AsBinary</a></span><span class="refpurpose"> — Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsEncodedPolyline">ST_AsEncodedPolyline</a></span><span class="refpurpose"> — Returns an Encoded Polyline from a LineString geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsEWKB">ST_AsEWKB</a></span><span class="refpurpose"> — Return the Well-Known Binary (WKB) representation of the geometry with SRID meta data.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsEWKT">ST_AsEWKT</a></span><span class="refpurpose"> — Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsGeoJSON">ST_AsGeoJSON</a></span><span class="refpurpose"> — Return the geometry as a GeoJSON element.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsGML">ST_AsGML</a></span><span class="refpurpose"> — Return the geometry as a GML version 2 or 3 element.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsHEXEWKB">ST_AsHEXEWKB</a></span><span class="refpurpose"> — Returns a Geometry in HEXEWKB format (as text) using either
			little-endian (NDR) or big-endian (XDR) encoding.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsKML">ST_AsKML</a></span><span class="refpurpose"> — Return the geometry as a KML element. Several variants. Default version=2, default precision=15</span></dt><dt><span class="refentrytitle"><a href="#ST_AsLatLonText">ST_AsLatLonText</a></span><span class="refpurpose"> — Return the Degrees, Minutes, Seconds representation of the given point.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsSVG">ST_AsSVG</a></span><span class="refpurpose"> — Returns a Geometry in SVG path data given a geometry or geography object.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsText">ST_AsText</a></span><span class="refpurpose"> — Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.</span></dt><dt><span class="refentrytitle"><a href="#ST_AsTWKB">ST_AsTWKB</a></span><span class="refpurpose"> — Returns the geometry as TWKB, aka "Tiny Well-Known Binary"</span></dt><dt><span class="refentrytitle"><a href="#ST_AsX3D">ST_AsX3D</a></span><span class="refpurpose"> — Returns a Geometry in X3D xml node element format: ISO-IEC-19776-1.2-X3DEncodings-XML</span></dt><dt><span class="refentrytitle"><a href="#ST_GeoHash">ST_GeoHash</a></span><span class="refpurpose"> — Return a GeoHash representation of the geometry.</span></dt></dl></div><div class="refentry" title="ST_AsBinary"><a name="ST_AsBinary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsBinary — Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsBinary</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsBinary</b>(</code>geometry  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsBinary</b>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsBinary</b>(</code>geography  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73275344"></a><h2>Description</h2><p>Returns the Well-Known Binary representation of the geometry.  There are 2 variants of the function.  The first
			variant takes no endian encoding parameter and defaults to server machine endian.  The second variant takes a second argument
			denoting the encoding - using little-endian ('NDR') or big-endian ('XDR') encoding.</p><p>This is useful in binary cursors to pull data out of the
			database without converting it to a string representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The WKB spec does not include the SRID.  To get the WKB with SRID format use ST_AsEWKB</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_AsBinary is the reverse of <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> for geometry.  Use <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> to convert to a postgis geometry from ST_AsBinary representation.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The default behavior in PostgreSQL 9.0 has been changed to output bytea in hex encoding.  ST_AsBinary is the reverse of <a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> for geometry.  If your GUI tools
				require the old behavior, then SET bytea_output='escape' in your database.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Enhanced: 2.0.0 support for higher coordinate dimensions was introduced.</p><p>Enhanced: 2.0.0 support for specifying endian with geography was introduced.</p><p>Availability: 1.5.0 geography support was introduced.</p><p>Changed: 2.0.0 Inputs to this function can not be unknown -- must be geometry.  Constructs such as <code class="code">ST_AsBinary('POINT(1 2)')</code> are no longer valid and you will get an <code class="code">n st_asbinary(unknown)  is not unique error</code>.  Code like that
			needs to be changed to <code class="code">ST_AsBinary('POINT(1 2)'::geometry);</code>.  If that is not possible, then install <code class="filename">legacy.sql</code>.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.37</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp73293008"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsBinary(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

		   st_asbinary
--------------------------------
\001\003\000\000\000\001\000\000\000\005
\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000
\000\000\000\360?\000\000\000\000\000\000
\360?\000\000\000\000\000\000\360?\000\000
\000\000\000\000\360?\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000
(1 row)</pre><pre class="programlisting">SELECT ST_AsBinary(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326), 'XDR');
		   st_asbinary
--------------------------------
\000\000\000\000\003\000\000\000\001\000\000\000\005\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000
\000?\360\000\000\000\000\000\000?\360\000\000\000\000\000\000?\360\000\000
\000\000\000\000?\360\000\000\000\000\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp73295184"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>,
<a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>,
<a class="xref" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a>,
<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
			</p></div></div><div class="refentry" title="ST_AsEncodedPolyline"><div class="refentry.separator"><hr></div><a name="ST_AsEncodedPolyline"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsEncodedPolyline — Returns an Encoded Polyline from a LineString geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsEncodedPolyline</b>(</code>geometry <var class="pdparam">geom</var>, integer  <var class="pdparam">precision=5</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73303760"></a><h2>Description</h2><p>Returns the geometry as an Encoded Polyline.  This is a format very useful if you are using google maps</p><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp73305296"></a><h2>Examples</h2><p>Basic </p><pre class="programlisting">
	SELECT ST_AsEncodedPolyline(GeomFromEWKT('SRID=4326;LINESTRING(-120.2 38.5,-120.95 40.7,-126.453 43.252)'));
	--result--
	|_p~iF~ps|U_ulLnnqC_mqNvxq`@
	</pre><p>Use in conjunction with geography linestring and geography segmentize, and put on google maps</p><pre class="programlisting">-- the SQL for Boston to San Francisco, segments every 100 KM
	SELECT ST_AsEncodedPolyline(
		ST_Segmentize(
			ST_GeogFromText('LINESTRING(-71.0519 42.4935,-122.4483 37.64)'),
				100000)::geometry) As encodedFlightPath;</pre><p>javascript will look something like this where $ variable you replace with query result</p><pre class="programlisting">&lt;script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
	 flightPath = new google.maps.Polyline({
			path:  google.maps.geometry.encoding.decodePath("$encodedFlightPath"),
			map: map,
			strokeColor: '#0000CC',
			strokeOpacity: 1.0,
			strokeWeight: 4
		});
&lt;/script&gt;
	</pre></div><div class="refsection" title="See Also"><a name="idp73309008"></a><h2>See Also</h2><p><a class="xref" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a>, <a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a></p></div></div><div class="refentry" title="ST_AsEWKB"><div class="refentry.separator"><hr></div><a name="ST_AsEWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsEWKB — Return the Well-Known Binary (WKB) representation of the geometry with SRID meta data.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsEWKB</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsEWKB</b>(</code>geometry  <var class="pdparam">g1</var>, text <var class="pdparam">NDR_or_XDR</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73318480"></a><h2>Description</h2><p>Returns the Well-Known Binary representation of the geometry with SRID metadata.  There are 2 variants of the function.  The first
			variant takes no endian encoding parameter and defaults to little endian.  The second variant takes a second argument
			denoting the encoding - using little-endian ('NDR') or big-endian ('XDR') encoding.</p><p>This is useful in binary cursors to pull data out of the
			database without converting it to a string representation.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The WKB spec does not include the SRID.  To get the OGC WKB format use ST_AsBinary</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_AsEWKB is the reverse of ST_GeomFromEWKB.  Use ST_GeomFromEWKB to convert to a postgis geometry from ST_AsEWKB representation.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp73327696"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

		   st_asewkb
--------------------------------
\001\003\000\000 \346\020\000\000\001\000
\000\000\005\000\000\000\000
\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000
\000\000\360?\000\000\000\000\000\000\360?
\000\000\000\000\000\000\360?\000\000\000\000\000
\000\360?\000\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000\000\000\000
(1 row)</pre><pre class="programlisting">
			SELECT ST_AsEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326), 'XDR');
		   st_asewkb
--------------------------------
\000 \000\000\003\000\000\020\346\000\000\000\001\000\000\000\005\000\000\000\000\
000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000?
\360\000\000\000\000\000\000?\360\000\000\000\000\000\000?\360\000\000\000\000
\000\000?\360\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000
\000\000\000\000\000\000\000\000\000\000\000\000\000
		</pre></div><div class="refsection" title="See Also"><a name="idp73329744"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_AsEWKT"><div class="refentry.separator"><hr></div><a name="ST_AsEWKT"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsEWKT — Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsEWKT</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsEWKT</b>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73351760"></a><h2>Description</h2><p>Returns the Well-Known Text representation of the geometry prefixed with the SRID.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The WKT spec does not include the SRID.  To get the OGC WKT format use ST_AsText</p></td></tr></table></div><p><img src="images/warning.png">
				WKT format does not maintain precision so to prevent floating truncation, use ST_AsBinary or ST_AsEWKB format for transport.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_AsEWKT is the reverse of <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>.  Use <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> to convert to a postgis geometry from ST_AsEWKT representation.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Geography, Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp73361744"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKT('0103000020E61000000100000005000000000000
			000000000000000000000000000000000000000000000000000000
			F03F000000000000F03F000000000000F03F000000000000F03
			F000000000000000000000000000000000000000000000000'::geometry);

		   st_asewkt
--------------------------------
SRID=4326;POLYGON((0 0,0 1,1 1,1 0,0 0))
(1 row)

SELECT ST_AsEWKT('0108000080030000000000000060E30A4100000000785C0241000000000000F03F0000000018
E20A4100000000485F024100000000000000400000000018
E20A4100000000305C02410000000000000840')

--st_asewkt---
CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)
</pre></div><div class="refsection" title="See Also"><a name="idp73363280"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>,
<a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>,
<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
<a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_AsGeoJSON"><div class="refentry.separator"><hr></div><a name="ST_AsGeoJSON"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsGeoJSON — Return the geometry as a GeoJSON element.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsGeoJSON</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGeoJSON</b>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGeoJSON</b>(</code>integer  <var class="pdparam">gj_version</var>, geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGeoJSON</b>(</code>integer  <var class="pdparam">gj_version</var>, geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73388752"></a><h2>Description</h2><p>Return the geometry as a Geometry Javascript Object Notation (GeoJSON) element. (Cf <a class="ulink" href="http://geojson.org/geojson-spec.html" target="_top">GeoJSON
			specifications 1.0</a>). 2D and 3D Geometries are both
			supported. GeoJSON only support SFS 1.1 geometry type (no curve
			support for example).</p><p>The gj_version parameter is the major version of the GeoJSON spec. If specified, must be 1.  This represents the spec version of GeoJSON.</p><p>The third argument may be used to reduce the maximum number
			of decimal places used in output (defaults to 15).</p><p>The last 'options' argument could be used to add Bbox or Crs
			in GeoJSON output:
			  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>0: means no option (default value)</p></li><li class="listitem"><p>1: GeoJSON Bbox</p></li><li class="listitem"><p>2: GeoJSON Short CRS (e.g EPSG:4326)</p></li><li class="listitem"><p>4: GeoJSON Long CRS (e.g urn:ogc:def:crs:EPSG::4326)</p></li></ul></div><p>
			</p><p>Version 1: ST_AsGeoJSON(geom) / precision=15 version=1 options=0</p><p>Version 2: ST_AsGeoJSON(geom, precision) / version=1 options=0</p><p>Version 3: ST_AsGeoJSON(geom, precision, options) / version=1</p><p>Version 4: ST_AsGeoJSON(gj_version, geom) / precision=15 options=0</p><p>Version 5: ST_AsGeoJSON(gj_version, geom, precision) /options=0</p><p>Version 6: ST_AsGeoJSON(gj_version, geom, precision,options)</p><p>Availability: 1.3.4</p><p>Availability: 1.5.0 geography support was introduced.</p><p>Changed: 2.0.0 support default args and named args.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp73400272"></a><h2>Examples</h2><p>GeoJSON format is generally more efficient than other formats for use in ajax mapping.
			One popular javascript client that supports this is Open Layers.
			Example of its use is   <a class="ulink" href="http://openlayers.org/en/v3.10.1/examples/geojson.html" target="_top">OpenLayers GeoJSON Example</a>
		</p><pre class="programlisting">SELECT ST_AsGeoJSON(the_geom) from fe_edges limit 1;
					   st_asgeojson
-----------------------------------------------------------------------------------------------------------

{"type":"MultiLineString","coordinates":[[[-89.734634999999997,31.492072000000000],
[-89.734955999999997,31.492237999999997]]]}
(1 row)
--3d point
SELECT ST_AsGeoJSON('LINESTRING(1 2 3, 4 5 6)');

st_asgeojson
-----------------------------------------------------------------------------------------
 {"type":"LineString","coordinates":[[1,2,3],[4,5,6]]}

</pre></div></div><div class="refentry" title="ST_AsGML"><div class="refentry.separator"><hr></div><a name="ST_AsGML"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsGML — Return the geometry as a GML version 2 or 3 element.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsGML</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGML</b>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGML</b>(</code>integer  <var class="pdparam">version</var>, geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var>, text  <var class="pdparam">nprefix=null</var>, text  <var class="pdparam">id=null</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsGML</b>(</code>integer  <var class="pdparam">version</var>, geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var>, text  <var class="pdparam">nprefix=null</var>, text  <var class="pdparam">id=null</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73442256"></a><h2>Description</h2><p>Return the geometry as a Geography Markup Language (GML) element. The version parameter,
			if specified, may be either 2 or 3. If no version parameter is
			specified then the default is assumed to be 2. The precision argument
			may be used to reduce the maximum number of decimal places (<code class="varname">maxdecimaldigits</code>)
			used in output (defaults to 15).</p><p>GML 2 refer to 2.1.2 version, GML 3 to 3.1.1 version</p><p>The 'options' argument is a bitfield. It could be used to define CRS output type
					in GML output, and to declare data as lat/lon:
						  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>0: GML Short CRS (e.g EPSG:4326), default value</p></li><li class="listitem"><p>1: GML Long CRS (e.g urn:ogc:def:crs:EPSG::4326)</p></li><li class="listitem"><p>2: For GML 3 only, remove srsDimension attribute from output.</p></li><li class="listitem"><p>4: For GML 3 only, use &lt;LineString&gt; rather than &lt;Curve&gt; tag for lines.</p></li><li class="listitem"><p>16: Declare that datas are lat/lon (e.g srid=4326). Default is to assume that data are planars.
								  This option is useful for GML 3.1.1 output only, related to axis order. So if you set it, it will swap the coordinates
								  so order is lat lon instead of database lon lat.</p></li><li class="listitem"><p>32: Output the box of the geometry (envelope).</p></li></ul></div><p>
						</p><p>The 'namespace prefix' argument may be used to specify a custom
namespace prefix or no prefix (if empty). If null or omitted 'gml' prefix is used</p><p>Availability: 1.3.2</p><p>Availability: 1.5.0 geography support was introduced.</p><p>Enhanced: 2.0.0 prefix support was introduced. Option 4 for GML3 was introduced to allow using LineString instead of Curve tag for lines. GML3 Support for Polyhedral surfaces and TINS was introduced. Option 32 was introduced to output the box.</p><p>Changed: 2.0.0 use default named args</p><p>Enhanced: 2.1.0 id support was introduced, for GML 3.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Only version 3+ of ST_AsGML supports Polyhedral Surfaces and TINS.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples: Version 2"><a name="idp73456720"></a><h2>Examples: Version 2</h2><pre class="programlisting">SELECT ST_AsGML(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));
		st_asgml
		--------
		&lt;gml:Polygon srsName="EPSG:4326"&gt;&lt;gml:outerBoundaryIs&gt;&lt;gml:LinearRing&gt;&lt;gml:coordinates&gt;0,0 0,1 1,1 1,0 0,0&lt;/gml:coordinates&gt;&lt;/gml:LinearRing&gt;&lt;/gml:outerBoundaryIs&gt;&lt;/gml:Polygon&gt;
			</pre></div><div class="refsection" title="Examples: Version 3"><a name="idp73458000"></a><h2>Examples: Version 3</h2><pre class="programlisting">-- Flip coordinates and output extended EPSG (16 | 1)--
SELECT ST_AsGML(3, ST_GeomFromText('POINT(5.234234233242 6.34534534534)',4326), 5, 17);
			st_asgml
			--------
		&lt;gml:Point srsName="urn:ogc:def:crs:EPSG::4326"&gt;&lt;gml:pos&gt;6.34535 5.23423&lt;/gml:pos&gt;&lt;/gml:Point&gt;
			</pre><pre class="programlisting">-- Output the envelope (32) --
SELECT ST_AsGML(3, ST_GeomFromText('LINESTRING(1 2, 3 4, 10 20)',4326), 5, 32);
		st_asgml
		--------
	&lt;gml:Envelope srsName="EPSG:4326"&gt;
		&lt;gml:lowerCorner&gt;1 2&lt;/gml:lowerCorner&gt;
		&lt;gml:upperCorner&gt;10 20&lt;/gml:upperCorner&gt;
	&lt;/gml:Envelope&gt;
			</pre><pre class="programlisting">-- Output the envelope (32) , reverse (lat lon instead of lon lat) (16), long srs (1)= 32 | 16 | 1 = 49 --
SELECT ST_AsGML(3, ST_GeomFromText('LINESTRING(1 2, 3 4, 10 20)',4326), 5, 49);
	st_asgml
	--------
&lt;gml:Envelope srsName="urn:ogc:def:crs:EPSG::4326"&gt;
	&lt;gml:lowerCorner&gt;2 1&lt;/gml:lowerCorner&gt;
	&lt;gml:upperCorner&gt;20 10&lt;/gml:upperCorner&gt;
&lt;/gml:Envelope&gt;
			</pre><pre class="programlisting">-- Polyhedral Example --
SELECT ST_AsGML(3, ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));
	st_asgml
	--------
 &lt;gml:PolyhedralSurface&gt;
&lt;gml:polygonPatches&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;0 0 0 0 0 1 0 1 1 0 1 0 0 0 0&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;0 0 0 0 1 0 1 1 0 1 0 0 0 0 0&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;0 0 0 1 0 0 1 0 1 0 0 1 0 0 0&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;1 1 0 1 1 1 1 0 1 1 0 0 1 1 0&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;0 1 0 0 1 1 1 1 1 1 1 0 0 1 0&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
   &lt;gml:PolygonPatch&gt;
		&lt;gml:exterior&gt;
			  &lt;gml:LinearRing&gt;
				   &lt;gml:posList srsDimension="3"&gt;0 0 1 1 0 1 1 1 1 0 1 1 0 0 1&lt;/gml:posList&gt;
			  &lt;/gml:LinearRing&gt;
		&lt;/gml:exterior&gt;
   &lt;/gml:PolygonPatch&gt;
&lt;/gml:polygonPatches&gt;
&lt;/gml:PolyhedralSurface&gt;
			</pre></div><div class="refsection" title="See Also"><a name="idp73460944"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a></p></div></div><div class="refentry" title="ST_AsHEXEWKB"><div class="refentry.separator"><hr></div><a name="ST_AsHEXEWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsHEXEWKB — Returns a Geometry in HEXEWKB format (as text) using either
			little-endian (NDR) or big-endian (XDR) encoding.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsHEXEWKB</b>(</code>geometry  <var class="pdparam">g1</var>, text  <var class="pdparam">NDRorXDR</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsHEXEWKB</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73507152"></a><h2>Description</h2><p>Returns a Geometry in HEXEWKB format (as text) using either
			little-endian (NDR) or big-endian (XDR) encoding.  If no encoding is specified, then NDR is used.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Availability: 1.2.2</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp73511760"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsHEXEWKB(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));
		which gives same answer as

		SELECT ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326)::text;

		st_ashexewkb
		--------
		0103000020E6100000010000000500
		00000000000000000000000000000000
		00000000000000000000000000000000F03F
		000000000000F03F000000000000F03F000000000000F03
		F000000000000000000000000000000000000000000000000</pre></div></div><div class="refentry" title="ST_AsKML"><div class="refentry.separator"><hr></div><a name="ST_AsKML"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsKML — Return the geometry as a KML element. Several variants. Default version=2, default precision=15</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsKML</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsKML</b>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsKML</b>(</code>integer  <var class="pdparam">version</var>, geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, text  <var class="pdparam">nprefix=NULL</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsKML</b>(</code>integer  <var class="pdparam">version</var>, geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, text  <var class="pdparam">nprefix=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73533392"></a><h2>Description</h2><p>Return the geometry as a Keyhole Markup Language (KML) element. There are several variants of this function.
			maximum number of decimal places used in
			output (defaults to 15), version default to 2 and default namespace is no prefix.</p><p>Version 1: ST_AsKML(geom_or_geog, maxdecimaldigits) / version=2 / maxdecimaldigits=15 </p><p>Version 2: ST_AsKML(version, geom_or_geog, maxdecimaldigits, nprefix) maxdecimaldigits=15 / nprefix=NULL </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires PostGIS be compiled with Proj support.  Use <a class="xref" href="#PostGIS_Full_Version" title="PostGIS_Full_Version">PostGIS_Full_Version</a> to confirm you have proj support compiled in.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Availability: 1.2.2 - later variants that include version param came in 1.3.2</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Enhanced: 2.0.0 - Add prefix namespace. Default is no prefix</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 - uses default args and supports named args</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>AsKML output will not work with geometries that do not have an SRID</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp73541072"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsKML(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

		st_askml
		--------
		&lt;Polygon&gt;&lt;outerBoundaryIs&gt;&lt;LinearRing&gt;&lt;coordinates&gt;0,0 0,1 1,1 1,0 0,0&lt;/coordinates&gt;&lt;/LinearRing&gt;&lt;/outerBoundaryIs&gt;&lt;/Polygon&gt;

		--3d linestring
		SELECT ST_AsKML('SRID=4326;LINESTRING(1 2 3, 4 5 6)');
		&lt;LineString&gt;&lt;coordinates&gt;1,2,3 4,5,6&lt;/coordinates&gt;&lt;/LineString&gt;
		
		</pre></div><div class="refsection" title="See Also"><a name="idp73542352"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a>, <a class="xref" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a></p></div></div><div class="refentry" title="ST_AsLatLonText"><div class="refentry.separator"><hr></div><a name="ST_AsLatLonText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsLatLonText — Return the Degrees, Minutes, Seconds representation of the given point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsLatLonText</b>(</code>geometry  <var class="pdparam">pt</var>, text  <var class="pdparam">format=''</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73549776"></a><h2>Description</h2><p>Returns the Degrees, Minutes, Seconds representation of the point.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>It is assumed the point is in a lat/lon projection.  The X (lon) and Y (lat) coordinates are normalized in the output
				to the "normal" range (-180 to +180 for lon, -90 to +90 for lat).</p></td></tr></table></div><p>
					The text parameter is a format string containing the format for the resulting text, similar to a date format string.  Valid tokens
					are "D" for degrees, "M" for minutes, "S" for seconds, and "C" for cardinal direction (NSEW).  DMS tokens may be repeated to indicate
					desired width and precision ("SSS.SSSS" means "  1.0023").
				</p><p>
					"M", "S", and "C" are optional.  If "C" is omitted, degrees are
					shown with a "-" sign if south or west.  If "S" is omitted, minutes will be shown as decimal with as many digits of precision
					as you specify.  If "M" is also omitted, degrees are shown as decimal with as many digits precision as you specify.
				</p><p>
					If the format string is omitted (or zero-length) a default format will be used.
				</p><p>
			</p><p>Availability: 2.0</p></div><div class="refsection" title="Examples"><a name="idp73553744"></a><h2>Examples</h2><p>Default format.</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)'));
      st_aslatlontext
----------------------------
 2°19'29.928"S 3°14'3.243"W
</pre><p>Providing a format (same as the default).</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D°M''S.SSS"C'));
      st_aslatlontext
----------------------------
 2°19'29.928"S 3°14'3.243"W
</pre><p>Characters other than D, M, S, C and . are just passed through.</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D degrees, M minutes, S seconds to the C'));
                                   st_aslatlontext
--------------------------------------------------------------------------------------
 2 degrees, 19 minutes, 30 seconds to the S 3 degrees, 14 minutes, 3 seconds to the W
</pre><p>Signed degrees instead of cardinal directions.</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D°M''S.SSS"'));
      st_aslatlontext
----------------------------
 -2°19'29.928" -3°14'3.243"
</pre><p>Decimal degrees.</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-3.2342342 -2.32498)', 'D.DDDD degrees C'));
          st_aslatlontext
-----------------------------------
 2.3250 degrees S 3.2342 degrees W
</pre><p>Excessively large values are normalized.</p><pre class="programlisting">
SELECT (ST_AsLatLonText('POINT (-302.2342342 -792.32498)'));
        st_aslatlontext
-------------------------------
 72°19'29.928"S 57°45'56.757"E
</pre></div></div><div class="refentry" title="ST_AsSVG"><div class="refentry.separator"><hr></div><a name="ST_AsSVG"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsSVG — Returns a Geometry in SVG path data given a geometry or geography object.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsSVG</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">rel=0</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsSVG</b>(</code>geography  <var class="pdparam">geog</var>, integer  <var class="pdparam">rel=0</var>, integer  <var class="pdparam">maxdecimaldigits=15</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73571792"></a><h2>Description</h2><p>Return the geometry as Scalar Vector Graphics (SVG) path data. Use 1 as second
			argument to have the path data implemented in terms of relative
			moves, the default (or 0) uses absolute moves. Third argument may
			be used to reduce the maximum number of decimal digits used in
			output (defaults to 15). Point geometries will be rendered as
			cx/cy when 'rel' arg is 0, x/y when 'rel' is 1. Multipoint
			geometries are delimited by commas (","), GeometryCollection
			geometries are delimited by semicolons (";").</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Availability: 1.2.2. Availability: 1.4.0  Changed in PostGIS 1.4.0 to include L command in absolute path to conform to <a class="ulink" href="http://www.w3.org/TR/SVG/paths.html#PathDataBNF" target="_top">http://www.w3.org/TR/SVG/paths.html#PathDataBNF</a></p></td></tr></table></div><p>Changed: 2.0.0 to use default args and support named args</p></div><div class="refsection" title="Examples"><a name="idp73574608"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsSVG(ST_GeomFromText('POLYGON((0 0,0 1,1 1,1 0,0 0))',4326));

		st_assvg
		--------
		M 0 0 L 0 -1 1 -1 1 0 Z</pre></div></div><div class="refentry" title="ST_AsText"><div class="refentry.separator"><hr></div><a name="ST_AsText"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsText — Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsText</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_AsText</b>(</code>geography  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73247056"></a><h2>Description</h2><p>Returns the Well-Known Text representation of the geometry/geography.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The WKT spec does not include the SRID.  To get the SRID as part of the data, use the non-standard
				PostGIS <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a></p></td></tr></table></div><p><img src="images/warning.png">
				WKT format does not maintain precision so to prevent floating truncation, use ST_AsBinary or ST_AsEWKB format for transport.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_AsText is the reverse of <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>.  Use <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> to convert to a postgis geometry from ST_AsText representation.</p></td></tr></table></div><p>Availability: 1.5 - support for geography was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.25</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp73612496"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText('01030000000100000005000000000000000000
000000000000000000000000000000000000000000000000
F03F000000000000F03F000000000000F03F000000000000F03
F000000000000000000000000000000000000000000000000');

		   st_astext
--------------------------------
 POLYGON((0 0,0 1,1 1,1 0,0 0))
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp73614160"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_AsTWKB"><div class="refentry.separator"><hr></div><a name="ST_AsTWKB"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsTWKB — Returns the geometry as TWKB, aka "Tiny Well-Known Binary"</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTWKB</b>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">decimaldigits_xy=0</var>, integer  <var class="pdparam">decimaldigits_z=0</var>, integer  <var class="pdparam">decimaldigits_m=0</var>, boolean  <var class="pdparam">include_sizes=false</var>, boolean  <var class="pdparam">include_bounding boxes=false</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTWKB</b>(</code>geometry[]  <var class="pdparam">geometries</var>, bigint[]  <var class="pdparam">unique_ids</var>, integer  <var class="pdparam">decimaldigits_xy=0</var>, integer  <var class="pdparam">decimaldigits_z=0</var>, integer  <var class="pdparam">decimaldigits_m=0</var>, boolean  <var class="pdparam">include_sizes=false</var>, boolean  <var class="pdparam">include_bounding_boxes=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73634896"></a><h2>Description</h2><p>Returns the geometry in TWKB (Tiny Well-Known Binary) format. TWKB is a <a class="ulink" href="https://github.com/TWKB/Specification/blob/master/twkb.md" target="_top">compressed binary format</a> with a focus on minimizing the size of the output. </p><p>The decimal digits parameters control how much precision is stored in the output. By default, values are rounded to the nearest unit before encoding. If you want to transfer more precision, increase the number. For example, a value of 1 implies that the first digit to the right of the decimal point will be preserved.</p><p>The sizes and bounding boxes parameters control whether optional information about the encoded length of the object and the bounds of the object are included in the output. By default they are not. Do not turn them on unless your client software has a use for them, as they just use up space (and saving space is the point of TWKB).</p><p>The array-input form of the function is used to convert a collection of geometries and unique identifiers into a TWKB collection that preserves the identifiers. This is useful for clients that expect to unpack a collection and then access further information about the objects inside. You can create the arrays using the <a class="ulink" href="http://www.postgresql.org/docs/9.4/static/functions-aggregate.html" target="_top">array_agg</a> function. The other parameters operate the same as for the simple form of the function.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The format specification is available online at <a class="ulink" href="https://github.com/TWKB/Specification" target="_top">https://github.com/TWKB/Specification</a>, and code for building a JavaScript client can be found at <a class="ulink" href="https://github.com/TWKB/twkb.js" target="_top">https://github.com/TWKB/twkb.js</a>.</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp73640528"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsTWKB('LINESTRING(1 1,5 5)'::geometry);
                 st_astwkb
--------------------------------------------
\x02000202020808

</pre><p>To create an aggregate TWKB object including identifiers aggregate the desired geometries and objects first, using "array_agg()", then call the appropriate TWKB function.
</p><pre class="programlisting">
SELECT ST_AsTWKB(array_agg(geom), array_agg(gid)) FROM mytable;
                 st_astwkb
--------------------------------------------
\x040402020400000202
</pre></div><div class="refsection" title="See Also"><a name="idp73642704"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>, <a class="xref" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="ST_AsX3D"><div class="refentry.separator"><hr></div><a name="ST_AsX3D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsX3D — Returns a Geometry in X3D xml node element format: ISO-IEC-19776-1.2-X3DEncodings-XML</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_AsX3D</b>(</code>geometry  <var class="pdparam">g1</var>, integer  <var class="pdparam">maxdecimaldigits=15</var>, integer  <var class="pdparam">options=0</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73652176"></a><h2>Description</h2><p>Returns a geometry as an X3D xml formatted node element  <a class="ulink" href="http://www.web3d.org/standards/number/19776-1" target="_top">http://www.web3d.org/standards/number/19776-1</a>.  If <code class="varname">maxdecimaldigits</code> (precision) is not specified then defaults to 15. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>There are various options for translating PostGIS geometries to X3D since X3D geometry types don't map directly to PostGIS geometry types and some newer X3D types that might be better mappings we have avoided since most rendering tools don't currently support them.
		        These are the mappings we have settled on.  Feel free to post a bug ticket if you have thoughts on the idea or ways we can allow people to denote their preferred mappings.</p><p>Below is how we currently map PostGIS 2D/3D types to X3D types</p></td></tr></table></div><p>The 'options' argument is a bitfield. For PostGIS 2.2+, this is used to denote whether to represent coordinates with X3D GeoCoordinates Geospatial node and also whether to flip the x/y axis.  By default, <code class="code">ST_AsX3D</code> outputs in database form (long,lat or X,Y), but X3D default of lat/lon, y/x may be preferred.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>0: X/Y in database order (e.g. long/lat = X,Y is standard database order), default value, and non-spatial coordinates (just regular old Coordinate tag).</p></li><li class="listitem"><p>1: Flip X and Y.  If used in conjunction with the GeoCoordinate option switch, then output will be default "latitude_first" and coordinates will be flipped as well.</p></li><li class="listitem"><p>2: Output coordinates in GeoSpatial GeoCoordinates.  This option will throw an error if geometries are not in WGS 84 long lat (srid: 4326). This is currently the only GeoCoordinate type supported.  <a class="ulink" href="http://www.web3d.org/documents/specifications/19775-1/V3.2/Part01/components/geodata.html#Specifyingaspatialreference" target="_top">Refer to X3D specs specifying a spatial reference system.</a>. Default output will be <code class="code">GeoCoordinate geoSystem='"GD" "WE" "longitude_first"'</code>.  If
              you prefer the X3D default of  <code class="code">GeoCoordinate geoSystem='"GD" "WE" "latitude_first"'</code> use <code class="code">(2 + 1)</code> = <code class="code">3</code> </p></li></ul></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>PostGIS Type</th><th>2D X3D Type</th><th>3D X3D Type</th></tr></thead><tbody><tr><td>LINESTRING</td><td>not yet implemented - will be PolyLine2D</td><td>LineSet</td></tr><tr><td>MULTILINESTRING</td><td>not yet implemented - will be PolyLine2D</td><td>IndexedLineSet</td></tr><tr><td>MULTIPOINT</td><td>Polypoint2D</td><td>PointSet</td></tr><tr><td>POINT</td><td>outputs the space delimited coordinates</td><td>outputs the space delimited coordinates</td></tr><tr><td>(MULTI) POLYGON, POLYHEDRALSURFACE</td><td>Invalid X3D markup</td><td>IndexedFaceSet (inner rings currently output as another faceset)</td></tr><tr><td>TIN</td><td>TriangleSet2D (Not Yet Implemented)</td><td>IndexedTriangleSet</td></tr></tbody></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>2D geometry support not yet complete.  Inner rings currently just drawn as separate polygons.  We are working on these.</p></td></tr></table></div><p>Lots of advancements happening in 3D space particularly with <a class="ulink" href="http://www.web3d.org/x3d/wiki/index.php/X3D_and_HTML5#Goals:_X3D_and_HTML5" target="_top">X3D Integration with HTML5</a></p><p>There is also a nice open source X3D viewer you can use to view rendered geometries. Free Wrl <a class="ulink" href="http://freewrl.sourceforge.net/" target="_top">http://freewrl.sourceforge.net/</a> binaries available for Mac, Linux, and Windows. Use the FreeWRL_Launcher packaged to view the geometries.</p><p>Also check out <a class="ulink" href="https://github.com/robe2/postgis_x3d_viewer" target="_top">PostGIS minimalist X3D viewer</a>  that utilizes this function and <a class="ulink" href="http://www.x3dom.org/" target="_top">x3dDom html/js open source toolkit</a>.</p><p>Availability: 2.0.0: ISO-IEC-19776-1.2-X3DEncodings-XML</p><p>Enhanced: 2.2.0: Support for GeoCoordinates and axis (x/y, long/lat) flipping.  Look at options for details.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Example: Create a fully functional X3D document - This will generate a cube that is viewable in FreeWrl and other X3D viewers."><a name="idp73691600"></a><h2>Example: Create a fully functional X3D document - This will generate a cube that is viewable in FreeWrl and other X3D viewers.</h2><pre class="programlisting">SELECT '&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor=''0 0 1''/&gt;
       &lt;/Appearance&gt; ' ||
       ST_AsX3D( ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )')) ||
      '&lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D&gt;' As x3ddoc;

		x3ddoc
		--------
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE X3D PUBLIC "ISO//Web3D//DTD X3D 3.0//EN" "http://www.web3d.org/specifications/x3d-3.0.dtd"&gt;
&lt;X3D&gt;
  &lt;Scene&gt;
    &lt;Transform&gt;
      &lt;Shape&gt;
       &lt;Appearance&gt;
            &lt;Material emissiveColor='0 0 1'/&gt;
       &lt;/Appearance&gt;
       &lt;IndexedFaceSet  coordIndex='0 1 2 3 -1 4 5 6 7 -1 8 9 10 11 -1 12 13 14 15 -1 16 17 18 19 -1 20 21 22 23'&gt;
            &lt;Coordinate point='0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 0 1 0 1 0 0 1 1 1 0 1 1 1 1 0 1 1 0 0 0 1 0 0 1 1 1 1 1 1 1 0 0 0 1 1 0 1 1 1 1 0 1 1' /&gt;
      &lt;/IndexedFaceSet&gt;
      &lt;/Shape&gt;
    &lt;/Transform&gt;
  &lt;/Scene&gt;
&lt;/X3D&gt;</pre></div><div class="refsection" title="Example: An Octagon elevated 3 Units and decimal precision of 6"><a name="idp73693008"></a><h2>Example: An Octagon elevated 3 Units and decimal precision of 6</h2><pre class="programlisting">SELECT ST_AsX3D(
ST_Translate(
    ST_Force_3d(
        ST_Buffer(ST_Point(10,10),5, 'quad_segs=2')), 0,0,
    3)
  ,6) As x3dfrag;

x3dfrag
--------
&lt;IndexedFaceSet coordIndex="0 1 2 3 4 5 6 7"&gt;
    &lt;Coordinate point="15 10 3 13.535534 6.464466 3 10 5 3 6.464466 6.464466 3 5 10 3 6.464466 13.535534 3 10 15 3 13.535534 13.535534 3 " /&gt;
&lt;/IndexedFaceSet&gt;</pre></div><div class="refsection" title="Example: TIN"><a name="idp73694288"></a><h2>Example: TIN</h2><pre class="programlisting">SELECT ST_AsX3D(ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )')) As x3dfrag;

		x3dfrag
		--------
&lt;IndexedTriangleSet  index='0 1 2 3 4 5'&gt;&lt;Coordinate point='0 0 0 0 0 1 0 1 0 0 0 0 0 1 0 1 1 0'/&gt;&lt;/IndexedTriangleSet&gt;</pre></div><div class="refsection" title="Example: Closed multilinestring (the boundary of a polygon with holes)"><a name="idp73695568"></a><h2>Example: Closed multilinestring (the boundary of a polygon with holes)</h2><pre class="programlisting">SELECT ST_AsX3D(
		    ST_GeomFromEWKT('MULTILINESTRING((20 0 10,16 -12 10,0 -16 10,-12 -12 10,-20 0 10,-12 16 10,0 24 10,16 16 10,20 0 10),
  (12 0 10,8 8 10,0 12 10,-8 8 10,-8 0 10,-8 -4 10,0 -8 10,8 -4 10,12 0 10))')
) As x3dfrag;

		x3dfrag
		--------
&lt;IndexedLineSet  coordIndex='0 1 2 3 4 5 6 7 0 -1 8 9 10 11 12 13 14 15 8'&gt;
    &lt;Coordinate point='20 0 10 16 -12 10 0 -16 10 -12 -12 10 -20 0 10 -12 16 10 0 24 10 16 16 10 12 0 10 8 8 10 0 12 10 -8 8 10 -8 0 10 -8 -4 10 0 -8 10 8 -4 10 ' /&gt;
 &lt;/IndexedLineSet&gt;</pre></div></div><div class="refentry" title="ST_GeoHash"><div class="refentry.separator"><hr></div><a name="ST_GeoHash"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeoHash — Return a GeoHash representation of the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_GeoHash</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">maxchars=full_precision_of_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp73702736"></a><h2>Description</h2><p>Return a GeoHash representation (<a class="ulink" href="http://en.wikipedia.org/wiki/Geohash" target="_top">http://en.wikipedia.org/wiki/Geohash</a>) of the geometry. A GeoHash encodes a point into a text form that is sortable and searchable based on prefixing.  A shorter GeoHash is a less precise representation of a point.  It can also be thought of as a box, that contains the actual point.</p><p>If no <code class="varname">maxchars</code> is specified ST_GeoHash returns a GeoHash based on full precision of the input geometry type. Points return a GeoHash with 20 characters of precision (about enough to hold the full double precision of the input). Other types return a GeoHash with a variable amount of precision, based on the size of the feature. Larger features are represented with less precision, smaller features with more precision. The idea is that the box implied by the GeoHash will always contain the input feature.</p><p>If <code class="varname">maxchars</code> is specified ST_GeoHash returns a GeoHash with at most that many characters so a possibly lower precision representation of the input geometry. For non-points, the starting point of the calculation is the center of the bounding box of the geometry.</p><p>Availability: 1.4.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_GeoHash will not work with geometries that are not in geographic (lon/lat) coordinates.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp73708368"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeoHash(ST_SetSRID(ST_MakePoint(-126,48),4326));

	 st_geohash
----------------------
 c0w3hf1s70w3hf1s70w3

SELECT ST_GeoHash(ST_SetSRID(ST_MakePoint(-126,48),4326),5);

 st_geohash
------------
 c0w3h
		
		</pre></div><div class="refsection" title="See Also"><a name="idp73709648"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a></p></div></div></div><div class="sect1" title="8.8. Operators"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Operators"></a>8.8. Operators</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#geometry_overlaps">&amp;&amp;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's 2D bounding box intersects B's 2D bounding box.</span></dt><dt><span class="refentrytitle"><a href="#overlaps_geometry_box2df">&amp;&amp;(geometry,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</span></dt><dt><span class="refentrytitle"><a href="#overlaps_box2df_geometry">&amp;&amp;(box2df,geometry)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</span></dt><dt><span class="refentrytitle"><a href="#overlaps_box2df_box2df">&amp;&amp;(box2df,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if two 2D float precision bounding boxes (BOX2DF) intersect each other.</span></dt><dt><span class="refentrytitle"><a href="#geometry_overlaps_nd">&amp;&amp;&amp;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's n-D bounding box intersects B's n-D bounding box.</span></dt><dt><span class="refentrytitle"><a href="#overlaps_nd_geometry_gidx">&amp;&amp;&amp;(geometry,gidx)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</span></dt><dt><span class="refentrytitle"><a href="#overlaps_nd_gidx_geometry">&amp;&amp;&amp;(gidx,geometry)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</span></dt><dt><span class="refentrytitle"><a href="#overlaps_nd_gidx_gidx">&amp;&amp;&amp;(gidx,gidx)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if two n-D float precision bounding boxes (GIDX) intersect each other.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Overleft">&amp;&lt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is to the left of B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Overbelow">&amp;&lt;|</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is below B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Overright">&amp;&gt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A' bounding box overlaps or is to the right of B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Left">&lt;&lt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is strictly to the left of B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Below">&lt;&lt;|</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is strictly below B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_EQ">=</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's. Uses double precision bounding box.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Right">&gt;&gt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is strictly to the right of B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Contained">@</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is contained by B's.</span></dt><dt><span class="refentrytitle"><a href="#is_contained_geometry_box2df">@(geometry,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</span></dt><dt><span class="refentrytitle"><a href="#is_contained_box2df_geometry">@(box2df,geometry)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</span></dt><dt><span class="refentrytitle"><a href="#is_contained_box2df_box2df">@(box2df,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Overabove">|&amp;&gt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is above B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Above">|&gt;&gt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is strictly above B's.</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Contain">~</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box contains B's.</span></dt><dt><span class="refentrytitle"><a href="#contains_geometry_box2df">~(geometry,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</span></dt><dt><span class="refentrytitle"><a href="#contains_box2df_geometry">~(box2df,geometry)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</span></dt><dt><span class="refentrytitle"><a href="#contains_box2df_box2df">~(box2df,box2df)</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</span></dt><dt><span class="refentrytitle"><a href="#ST_Geometry_Same">~=</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's.</span></dt><dt><span class="refentrytitle"><a href="#geometry_distance_knn">&lt;-&gt;</a></span><span class="refpurpose"> — 
Returns the 2D distance between A and B.
			</span></dt><dt><span class="refentrytitle"><a href="#geometry_distance_cpa">|=|</a></span><span class="refpurpose"> — 
Returns the distance between A and B trajectories at their closest point of approach.
			</span></dt><dt><span class="refentrytitle"><a href="#geometry_distance_box">&lt;#&gt;</a></span><span class="refpurpose"> — 
Returns the 2D distance between A and B bounding boxes.
			</span></dt><dt><span class="refentrytitle"><a href="#geometry_distance_centroid_nd">&lt;&lt;-&gt;&gt;</a></span><span class="refpurpose"> — 
Returns the n-D distance between the centroids of A and B bounding
boxes.
			</span></dt><dt><span class="refentrytitle"><a href="#geometry_distance_box_nd">&lt;&lt;#&gt;&gt;</a></span><span class="refpurpose"> — 
Returns the n-D distance between A and B bounding boxes.
			</span></dt></dl></div><div class="refentry" title="&amp;&amp;"><a name="geometry_overlaps"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp; — Returns <code class="varname">TRUE</code> if A's 2D bounding box intersects B's 2D bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
				  geography 

				  <var class="pdparam">A</var>
				, 
				  geography 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74205136"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box of geometry A intersects the 2D bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</p><p>Availability: 1.5.0 support for geography was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74210896"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps
FROM ( VALUES
	(1, 'LINESTRING(0 0, 3 3)'::geometry),
	(2, 'LINESTRING(0 1, 0 5)'::geometry)) AS tbl1,
( VALUES
	(3, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overlaps
---------+---------+----------
	   1 |       3 | t
	   2 |       3 | f
(2 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74212560"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>,
				<a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a>,
				<a class="xref" href="#ST_Geometry_Contain" title="~">~</a>,
				<a class="xref" href="#ST_Geometry_Contained" title="@">@</a></p></div></div><div class="refentry" title="&amp;&amp;(geometry,box2df)"><div class="refentry.separator"><hr></div><a name="overlaps_geometry_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(geometry,box2df) — Returns <code class="varname">TRUE</code> if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  box2df

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74222544"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the cached 2D bounding box of geometry A intersects the 2D bounding box B, using float precision. This means that if B is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74227920"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakePoint(1,1) &amp;&amp; ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(2,2)) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74229328"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="&amp;&amp;(box2df,geometry)"><div class="refentry.separator"><hr></div><a name="overlaps_box2df_geometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(box2df,geometry) — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74248272"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box A intersects the cached 2D bounding box of geometry B, using float precision. This means that if A is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74253776"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(2,2)) &amp;&amp; ST_MakePoint(1,1) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74255056"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="&amp;&amp;(box2df,box2df)"><div class="refentry.separator"><hr></div><a name="overlaps_box2df_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;(box2df,box2df) — Returns <code class="varname">TRUE</code> if two 2D float precision bounding boxes (BOX2DF) intersect each other.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  box2df 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74265808"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if two 2D bounding boxes A and B intersect each other, using float precision. This means that if A (or B) is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operator is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74271312"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(2,2)) &amp;&amp; ST_MakeBox2D(ST_MakePoint(1,1), ST_MakePoint(3,3)) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74272592"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="&amp;&amp;&amp;"><div class="refentry.separator"><hr></div><a name="geometry_overlaps_nd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp; — Returns <code class="varname">TRUE</code> if A's n-D bounding box intersects B's n-D bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;&amp;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74287440"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the n-D bounding box of geometry A intersects the n-D bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples: 3D LineStrings"><a name="idp74295760"></a><h2>Examples: 3D LineStrings</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp;&amp; tbl2.column2 AS overlaps_3d,
			            tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps_2d
FROM ( VALUES
	(1, 'LINESTRING Z(0 0 1, 3 3 2)'::geometry),
	(2, 'LINESTRING Z(1 2 0, 0 5 -1)'::geometry)) AS tbl1,
( VALUES
	(3, 'LINESTRING Z(1 2 1, 4 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overlaps_3d | overlaps_2d
---------+---------+-------------+-------------
       1 |       3 | t           | t
       2 |       3 | f           | t
</pre></div><div class="refsection" title="Examples: 3M LineStrings"><a name="idp74297040"></a><h2>Examples: 3M LineStrings</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&amp;&amp; tbl2.column2 AS overlaps_3zm,
			            tbl1.column2 &amp;&amp; tbl2.column2 AS overlaps_2d
FROM ( VALUES
	(1, 'LINESTRING M(0 0 1, 3 3 2)'::geometry),
	(2, 'LINESTRING M(1 2 0, 0 5 -1)'::geometry)) AS tbl1,
( VALUES
	(3, 'LINESTRING M(1 2 1, 4 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overlaps_3zm | overlaps_2d
---------+---------+-------------+-------------
       1 |       3 | t           | t
       2 |       3 | f           | t
</pre></div><div class="refsection" title="See Also"><a name="idp74298448"></a><h2>See Also</h2><p><a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" title="&amp;&amp;&amp;(geometry,gidx)"><div class="refentry.separator"><hr></div><a name="overlaps_nd_geometry_gidx"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(geometry,gidx) — Returns <code class="varname">TRUE</code> if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;&amp;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  gidx 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74306384"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the cached n-D bounding box of geometry A intersects the n-D bounding box B, using float precision. This means that if B is a (double precision) box3d, it will be internally converted to a float precision 3D bounding box (GIDX)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operator is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp74314704"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakePoint(1,1,1) &amp;&amp;&amp; ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74315984"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a>,
				<a class="xref" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a></p></div></div><div class="refentry" title="&amp;&amp;&amp;(gidx,geometry)"><div class="refentry.separator"><hr></div><a name="overlaps_nd_gidx_geometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(gidx,geometry) — Returns <code class="varname">TRUE</code> if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;&amp;</b>(</code>
				  gidx 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74324432"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the n-D bounding box A intersects the cached n-D bounding box of geometry B, using float precision. This means that if A is a (double precision) box3d, it will be internally converted to a float precision 3D bounding box (GIDX)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operator is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp74332752"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) &amp;&amp;&amp; ST_MakePoint(1,1,1) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74334032"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>,
				<a class="xref" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a></p></div></div><div class="refentry" title="&amp;&amp;&amp;(gidx,gidx)"><div class="refentry.separator"><hr></div><a name="overlaps_nd_gidx_gidx"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp;&amp;(gidx,gidx) — Returns <code class="varname">TRUE</code> if two n-D float precision bounding boxes (GIDX) intersect each other.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;&amp;</b>(</code>
				  gidx 

				  <var class="pdparam">A</var>
				, 
				  gidx 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74342480"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if two n-D bounding boxes A and B intersect each other, using float precision. This means that if A (or B) is a (double precision) box3d, it will be internally converted to a float precision 3D bounding box (GIDX)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operator is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp74363088"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_3DMakeBox(ST_MakePoint(0,0,0), ST_MakePoint(2,2,2)) &amp;&amp;&amp; ST_3DMakeBox(ST_MakePoint(1,1,1), ST_MakePoint(3,3,3)) AS overlaps;

 overlaps
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74364368"></a><h2>See Also</h2><p>
                                <a class="xref" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>,
                                <a class="xref" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a></p></div></div><div class="refentry" title="&amp;&lt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Overleft"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&lt; — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is to the left of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&lt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74373072"></a><h2>Description</h2><p>The <code class="varname">&amp;&lt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			overlaps or is to the left of the bounding box of geometry B, or more accurately, overlaps or is NOT to the right
			of the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74375504"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&lt; tbl2.column2 AS overleft
FROM
  ( VALUES
	(1, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING(0 0, 3 3)'::geometry),
	(3, 'LINESTRING(0 1, 0 5)'::geometry),
	(4, 'LINESTRING(6 0, 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overleft
---------+---------+----------
	   1 |       2 | f
	   1 |       3 | f
	   1 |       4 | t
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74376912"></a><h2>See Also</h2><p>
				<a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>,
				<a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a></p></div></div><div class="refentry" title="&amp;&lt;|"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Overbelow"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&lt;| — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is below B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&lt;|</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74386384"></a><h2>Description</h2><p>The <code class="varname">&amp;&lt;|</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			overlaps or is below of the bounding box of geometry B, or more accurately, overlaps or is NOT above the bounding
			box of geometry B.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74391376"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&lt;| tbl2.column2 AS overbelow
FROM
  ( VALUES
	(1, 'LINESTRING(6 0, 6 4)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING(0 0, 3 3)'::geometry),
	(3, 'LINESTRING(0 1, 0 5)'::geometry),
	(4, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overbelow
---------+---------+-----------
	   1 |       2 | f
	   1 |       3 | t
	   1 |       4 | t
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74392784"></a><h2>See Also</h2><p>
				<a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>,
				<a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" title="&amp;&gt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Overright"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&gt; — Returns <code class="varname">TRUE</code> if A' bounding box overlaps or is to the right of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74402256"></a><h2>Description</h2><p>The <code class="varname">&amp;&gt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			overlaps or is to the right of the bounding box of geometry B, or more accurately, overlaps or is NOT to the left
			of the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74404688"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &amp;&gt; tbl2.column2 AS overright
FROM
  ( VALUES
	(1, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING(0 0, 3 3)'::geometry),
	(3, 'LINESTRING(0 1, 0 5)'::geometry),
	(4, 'LINESTRING(6 0, 6 1)'::geometry)) AS tbl2;

 column1 | column1 | overright
---------+---------+-----------
	   1 |       2 | t
	   1 |       3 | t
	   1 |       4 | f
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74405968"></a><h2>See Also</h2><p>
				<a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>,
				<a class="xref" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>,
				<a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" title="&lt;&lt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Left"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;&lt; — Returns <code class="varname">TRUE</code> if A's bounding box is strictly to the left of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&lt;&lt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74419536"></a><h2>Description</h2><p>The <code class="varname">&lt;&lt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			is strictly to the left of the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74422096"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &lt;&lt; tbl2.column2 AS left
FROM
  ( VALUES
	(1, 'LINESTRING (1 2, 1 5)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (0 0, 4 3)'::geometry),
	(3, 'LINESTRING (6 0, 6 5)'::geometry),
	(4, 'LINESTRING (2 2, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | left
---------+---------+------
	   1 |       2 | f
	   1 |       3 | t
	   1 |       4 | t
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74423376"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" title="&lt;&lt;|"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Below"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;&lt;| — Returns <code class="varname">TRUE</code> if A's bounding box is strictly below B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&lt;&lt;|</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74432336"></a><h2>Description</h2><p>The <code class="varname">&lt;&lt;|</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			is strictly below the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74434768"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &lt;&lt;| tbl2.column2 AS below
FROM
  ( VALUES
	(1, 'LINESTRING (0 0, 4 3)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (1 4, 1 7)'::geometry),
	(3, 'LINESTRING (6 1, 6 5)'::geometry),
	(4, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | below
---------+---------+-------
	   1 |       2 | t
	   1 |       3 | f
	   1 |       4 | f
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74436048"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a></p></div></div><div class="refentry" title="="><div class="refentry.separator"><hr></div><a name="ST_Geometry_EQ"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>= — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's. Uses double precision bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">=</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">=</b>(</code>
					  geography 

					  <var class="pdparam">A</var>
					, 
					  geography 

					  <var class="pdparam">B</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74448848"></a><h2>Description</h2><p>The <code class="varname">=</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry/geography A
			is the same as the bounding box of geometry/geography B.  PostgreSQL uses the =, &lt;, and &gt; operators defined for geometries to
			perform internal orderings and comparison of geometries (ie. in a GROUP BY or ORDER BY clause).</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is cause for a lot of confusion. When you compare geometryA =
			  geometryB it will return true even when the geometries are clearly
			  different IF their bounding boxes are the same. To check for true
			  equality use <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a> or <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a></p></td></tr></table></div><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will NOT make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p>Changed:  2.0.0 , the bounding box of geometries was changed to use double precision instead of float4 precision of
			prior. The side effect of this is that in particular points in prior versions that were a little different may have returned
				true in prior versions and false in 2.0+ since their float4 boxes would be the same but there float8 (double precision), would be
				different.</p></div><div class="refsection" title="Examples"><a name="idp74496720"></a><h2>Examples</h2><pre class="programlisting">SELECT 'LINESTRING(0 0, 0 1, 1 0)'::geometry = 'LINESTRING(1 1, 0 0)'::geometry;
 ?column?
----------
 t
(1 row)

SELECT ST_AsText(column1)
FROM ( VALUES
	('LINESTRING(0 0, 1 1)'::geometry),
	('LINESTRING(1 1, 0 0)'::geometry)) AS foo;
	  st_astext
---------------------
 LINESTRING(0 0,1 1)
 LINESTRING(1 1,0 0)
(2 rows)

-- Note: the GROUP BY uses the "=" to compare for geometry equivalency.
SELECT ST_AsText(column1)
FROM ( VALUES
	('LINESTRING(0 0, 1 1)'::geometry),
	('LINESTRING(1 1, 0 0)'::geometry)) AS foo
GROUP BY column1;
	  st_astext
---------------------
 LINESTRING(0 0,1 1)
(1 row)

-- In versions prior to 2.0, this used to return true --
 SELECT ST_GeomFromText('POINT(1707296.37 4820536.77)') =
	ST_GeomFromText('POINT(1707296.27 4820536.87)') As pt_intersect;

--pt_intersect --
f
</pre></div><div class="refsection" title="See Also"><a name="idp74498000"></a><h2>See Also</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>
			</p></div></div><div class="refentry" title="&gt;&gt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Right"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&gt;&gt; — Returns <code class="varname">TRUE</code> if A's bounding box is strictly to the right of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&gt;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74506832"></a><h2>Description</h2><p>The <code class="varname">&gt;&gt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			is strictly to the right of the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74509264"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 &gt;&gt; tbl2.column2 AS right
FROM
  ( VALUES
	(1, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (1 4, 1 7)'::geometry),
	(3, 'LINESTRING (6 1, 6 5)'::geometry),
	(4, 'LINESTRING (0 0, 4 3)'::geometry)) AS tbl2;

 column1 | column1 | right
---------+---------+-------
	   1 |       2 | t
	   1 |       3 | f
	   1 |       4 | f
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74510544"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" title="@"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Contained"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>@ — Returns <code class="varname">TRUE</code> if A's bounding box is contained by B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74540112"></a><h2>Description</h2><p>The <code class="varname">@</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A is completely
			contained by the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74542800"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 @ tbl2.column2 AS contained
FROM
  ( VALUES
	(1, 'LINESTRING (1 1, 3 3)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (0 0, 4 4)'::geometry),
	(3, 'LINESTRING (2 2, 4 4)'::geometry),
	(4, 'LINESTRING (1 1, 3 3)'::geometry)) AS tbl2;

 column1 | column1 | contained
---------+---------+-----------
	   1 |       2 | t
	   1 |       3 | f
	   1 |       4 | t
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74544080"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Contain" title="~">~</a>, <a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" title="@(geometry,box2df)"><div class="refentry.separator"><hr></div><a name="is_contained_geometry_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>@(geometry,box2df) — Returns <code class="varname">TRUE</code> if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  box2df 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74552400"></a><h2>Description</h2><p>The <code class="varname">@</code> operator returns <code class="varname">TRUE</code> if the A geometry's 2D bounding box is contained the 2D bounding box B, using float precision. This means that if B is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74557904"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(2 2)'), 1) @ ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(5,5)) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74559184"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="@(box2df,geometry)"><div class="refentry.separator"><hr></div><a name="is_contained_box2df_geometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>@(box2df,geometry) — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74569936"></a><h2>Description</h2><p>The <code class="varname">@</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box A is contained into the B geometry's 2D bounding box, using float precision. This means that if B is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74575440"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(2,2), ST_MakePoint(3,3)) @ ST_Buffer(ST_GeomFromText('POINT(1 1)'), 10) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74576720"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="@(box2df,box2df)"><div class="refentry.separator"><hr></div><a name="is_contained_box2df_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>@(box2df,box2df) — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  box2df 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74587472"></a><h2>Description</h2><p>The <code class="varname">@</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box A is contained into the 2D bounding box B, using float precision. This means that if A (or B) is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74592976"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(2,2), ST_MakePoint(3,3)) @ ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(5,5)) AS is_contained;

 is_contained
--------------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74594256"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a></p></div></div><div class="refentry" title="|&amp;&gt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Overabove"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>|&amp;&gt; — Returns <code class="varname">TRUE</code> if A's bounding box overlaps or is above B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">|&amp;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74613584"></a><h2>Description</h2><p>The <code class="varname">|&amp;&gt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			overlaps or is above the bounding box of geometry B, or more accurately, overlaps or is NOT below
			the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74616016"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 |&amp;&gt; tbl2.column2 AS overabove
FROM
  ( VALUES
	(1, 'LINESTRING(6 0, 6 4)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING(0 0, 3 3)'::geometry),
	(3, 'LINESTRING(0 1, 0 5)'::geometry),
	(4, 'LINESTRING(1 2, 4 6)'::geometry)) AS tbl2;

 column1 | column1 | overabove
---------+---------+-----------
	   1 |       2 | t
	   1 |       3 | f
	   1 |       4 | f
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74617296"></a><h2>See Also</h2><p>
				<a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>,
				<a class="xref" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>,
				<a class="xref" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>,
				<a class="xref" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a></p></div></div><div class="refentry" title="|&gt;&gt;"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Above"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>|&gt;&gt; — Returns <code class="varname">TRUE</code> if A's bounding box is strictly above B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">|&gt;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74626768"></a><h2>Description</h2><p>The <code class="varname">|&gt;&gt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A
			is strictly to the right of the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74629200"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 |&gt;&gt; tbl2.column2 AS above
FROM
  ( VALUES
	(1, 'LINESTRING (1 4, 1 7)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (0 0, 4 2)'::geometry),
	(3, 'LINESTRING (6 1, 6 5)'::geometry),
	(4, 'LINESTRING (2 3, 5 6)'::geometry)) AS tbl2;

 column1 | column1 | above
---------+---------+-------
	   1 |       2 | t
	   1 |       3 | f
	   1 |       4 | f
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74630608"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>, <a class="xref" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>, <a class="xref" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a></p></div></div><div class="refentry" title="~"><div class="refentry.separator"><hr></div><a name="ST_Geometry_Contain"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~ — Returns <code class="varname">TRUE</code> if A's bounding box contains B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74643664"></a><h2>Description</h2><p>The <code class="varname">~</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry A completely
			contains the bounding box of geometry B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74646096"></a><h2>Examples</h2><pre class="programlisting">SELECT tbl1.column1, tbl2.column1, tbl1.column2 ~ tbl2.column2 AS contains
FROM
  ( VALUES
	(1, 'LINESTRING (0 0, 3 3)'::geometry)) AS tbl1,
  ( VALUES
	(2, 'LINESTRING (0 0, 4 4)'::geometry),
	(3, 'LINESTRING (1 1, 2 2)'::geometry),
	(4, 'LINESTRING (0 0, 3 3)'::geometry)) AS tbl2;

 column1 | column1 | contains
---------+---------+----------
	   1 |       2 | f
	   1 |       3 | t
	   1 |       4 | t
(3 rows)</pre></div><div class="refsection" title="See Also"><a name="idp74647376"></a><h2>See Also</h2><p><a class="xref" href="#ST_Geometry_Contained" title="@">@</a>, <a class="xref" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a></p></div></div><div class="refentry" title="~(geometry,box2df)"><div class="refentry.separator"><hr></div><a name="contains_geometry_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~(geometry,box2df) — Returns <code class="varname">TRUE</code> if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  box2df 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74663888"></a><h2>Description</h2><p>The <code class="varname">~</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box of a geometry A contains the 2D bounding box B, using float precision. This means that if B is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74669392"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(1 1)'), 10) ~ ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(2,2)) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74670672"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="~(box2df,geometry)"><div class="refentry.separator"><hr></div><a name="contains_box2df_geometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~(box2df,geometry) — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74681424"></a><h2>Description</h2><p>The <code class="varname">~</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box A contains the B geometry's bounding box, using float precision. This means that if A is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74686928"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(5,5)) ~ ST_Buffer(ST_GeomFromText('POINT(2 2)'), 1) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74688208"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="~(box2df,box2df)"><div class="refentry.separator"><hr></div><a name="contains_box2df_box2df"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~(box2df,box2df) — Returns <code class="varname">TRUE</code> if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
				  box2df 

				  <var class="pdparam">A</var>
				, 
				  box2df 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74698960"></a><h2>Description</h2><p>The <code class="varname">~</code> operator returns <code class="varname">TRUE</code> if the 2D bounding box A contains the 2D bounding box B, using float precision. This means that if A is a (double precision) box2d, it will be internally converted to a float precision 2D bounding box (BOX2DF)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand is intended to be used internally by BRIN indexes, more
				than by users.</p></td></tr></table></div><p>Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp74708560"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_MakeBox2D(ST_MakePoint(0,0), ST_MakePoint(5,5)) ~ ST_MakeBox2D(ST_MakePoint(2,2), ST_MakePoint(3,3)) AS contains;

 contains
----------
 t
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp74709840"></a><h2>See Also</h2><p>
				<a class="xref" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>,
				<a class="xref" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>,
				<a class="xref" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>,
				<a class="xref" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>,
				<a class="xref" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>,
				<a class="xref" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>,
				<a class="xref" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a></p></div></div><div class="refentry" title="~="><div class="refentry.separator"><hr></div><a name="ST_Geometry_Same"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~= — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~=</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74720976"></a><h2>Description</h2><p>The <code class="varname">~=</code> operator returns <code class="varname">TRUE</code> if the bounding box of geometry/geography A
			is the same as the bounding box of geometry/geography B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.</p></td></tr></table></div><p>Availability: 1.5.0 changed behavior</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operator has changed behavior in PostGIS 1.5
			  from testing for actual geometric equality to only
			  checking for bounding box equality. To complicate things
			  it also depends on if you have done a hard or soft upgrade
			  which behavior your database has. To find out which behavior
			  your database has you can run the query below.
				To check for true equality use <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a> or <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a> and to check for bounding box equality <a class="xref" href="#ST_Geometry_EQ" title="=">=</a>;
			  operator is a safer option.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp74727120"></a><h2>Examples</h2><pre class="programlisting">

select 'LINESTRING(0 0, 1 1)'::geometry ~= 'LINESTRING(0 1, 1 0)'::geometry as equality;
 equality   |
-----------------+
          t    |
			</pre><p>The above can be used to test if you have the new or old behavior of ~= operator.</p></div><div class="refsection" title="See Also"><a name="idp74757584"></a><h2>See Also</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>, <a class="xref" href="#ST_Geometry_EQ" title="=">=</a></p></div></div><div class="refentry" title="&lt;-&gt;"><div class="refentry.separator"><hr></div><a name="geometry_distance_knn"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;-&gt; — 
Returns the 2D distance between A and B.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">&lt;-&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">&lt;-&gt;</b>(</code>
				  geography 

				  <var class="pdparam">A</var>
				, 
				  geography 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74769616"></a><h2>Description</h2><p>
The <code class="varname">&lt;-&gt;</code> operator returns the 2D distance between
two geometries.  Used in the "ORDER BY" clause provides index-assisted
nearest-neighbor result sets.  For PostgreSQL below 9.5 only gives
centroid distance of bounding boxes and for PostgreSQL 9.5+, does true
KNN distance search giving true distance between geometries, and distance
sphere for geographies.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of 2D GiST indexes that may be available on the geometries.  It is different from other operators that use spatial indexes in that the spatial index is only used when the operator is in the ORDER BY clause.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index only kicks in if one of the geometries is a constant (not in a subquery/cte).  e.g. 'SRID=3005;POINT(1011102 450541)'::geometry instead of a.geom</p></td></tr></table></div><p>Refer to <a class="ulink" href="http://workshops.opengeo.org/postgis-intro/knn.html" target="_top">OpenGeo workshop: Nearest-Neighbour Searching</a> for real live example.</p><p>Enhanced: 2.2.0 -- True KNN ("K nearest neighbor") behavior for geometry and geography for PostgreSQL 9.5+. Note for geography KNN is based on sphere rather than spheroid.  For PostgreSQL 9.4 and below, geography support is new but only supports centroid box.</p><p>Changed: 2.2.0 -- For PostgreSQL 9.5 users, old Hybrid syntax may be slower, so you'll want to get rid of that hack if you are running your code only on PostGIS 2.2+ 9.5+.  See examples below.</p><p>Availability: 2.0.0 -- Weak KNN provides nearest neighbors based on geometry centroid distances instead of true distances. Exact results for points, inexact for all other types. Available for PostgreSQL 9.1+</p></div><div class="refsection" title="Examples"><a name="idp74774352"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
FROM va2005
ORDER BY d limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)
</pre><p>
Then the KNN raw answer:
</p><pre class="programlisting">SELECT st_distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
FROM va2005
ORDER BY geom &lt;-&gt; 'SRID=3005;POINT(1011102 450541)'::geometry limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)
</pre><p>
If you run "EXPLAIN ANALYZE" on the two queries you would see a performance improvement for the second.
</p><p>
For users running with PostgreSQL &lt; 9.5, use a hybrid query to find the true nearest neighbors. First a CTE query using the index-assisted KNN, then an exact query to get correct ordering:
</p><pre class="programlisting">WITH index_query AS (
  SELECT ST_Distance(geom, 'SRID=3005;POINT(1011102 450541)'::geometry) as d,edabbr, vaabbr
	FROM va2005
  ORDER BY geom &lt;-&gt; 'SRID=3005;POINT(1011102 450541)'::geometry LIMIT 100)
  SELECT *
	FROM index_query
  ORDER BY d limit 10;

        d         | edabbr | vaabbr
------------------+--------+--------
                0 | ALQ    | 128
 5541.57712511724 | ALQ    | 129A
 5579.67450712005 | ALQ    | 001
  6083.4207708641 | ALQ    | 131
  7691.2205404848 | ALQ    | 003
 7900.75451037313 | ALQ    | 122
 8694.20710669982 | ALQ    | 129B
 9564.24289057111 | ALQ    | 130
  12089.665931705 | ALQ    | 127
 18472.5531479404 | ALQ    | 002
(10 rows)

			</pre></div><div class="refsection" title="See Also"><a name="idp74777808"></a><h2>See Also</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a></p></div></div><div class="refentry" title="|=|"><div class="refentry.separator"><hr></div><a name="geometry_distance_cpa"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>|=| — 
Returns the distance between A and B trajectories at their closest point of approach.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">|=|</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74786128"></a><h2>Description</h2><p>
The <code class="varname">|=|</code> operator returns the 3D distance between
two trajectories (See <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>).
This is the same as <a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> but as an operator
it can be used for doing nearest neightbor searches using an N-dimensional
index (requires PostgreSQL 9.5.0 or higher).
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of ND GiST indexes that may be available on the geometries.  It is different from other operators that use spatial indexes in that the spatial index is only used when the operator is in the ORDER BY clause.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index only kicks in if one of the geometries is a constant (not in a subquery/cte).  e.g. 'SRID=3005;LINESTRINGM(0 0 0,0 0 1)'::geometry instead of a.geom</p></td></tr></table></div><p>Availability: 2.2.0. Index-supported only available for PostgreSQL 9.5+</p></div><div class="refsection" title="Examples"><a name="idp74798160"></a><h2>Examples</h2><pre class="programlisting">
-- Save a literal query trajectory in a psql variable...
\set qt 'ST_AddMeasure(ST_MakeLine(ST_MakePointM(-350,300,0),ST_MakePointM(-410,490,0)),10,20)'
-- Run the query !
SELECT track_id, dist FROM (
  SELECT track_id, ST_DistanceCPA(tr,:qt) dist
  FROM trajectories
  ORDER BY tr |=| :qt
  LIMIT 5
) foo;
 track_id        dist
----------+-------------------
      395 | 0.576496831518066
      380 |  5.06797130410151
      390 |  7.72262293958322
      385 |   9.8004461358071
      405 |  10.9534397988433
(5 rows)
</pre></div><div class="refsection" title="See Also"><a name="idp74799440"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>,
<a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>,
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>
      </p></div></div><div class="refentry" title="&lt;#&gt;"><div class="refentry.separator"><hr></div><a name="geometry_distance_box"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;#&gt; — 
Returns the 2D distance between A and B bounding boxes.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">&lt;#&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74808016"></a><h2>Description</h2><p>The <code class="varname">&lt;#&gt;</code> operator returns distance between two floating point bounding boxes, possibly reading them from a spatial index (PostgreSQL 9.1+ required).   Useful for doing nearest neighbor <span class="strong"><strong>approximate</strong></span> distance ordering.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.  It is different from other operators that use spatial indexes in that the spatial index is only used when the operator
			  is in the ORDER BY clause.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Index only kicks in if one of the geometries is a constant e.g. ORDER BY (ST_GeomFromText('POINT(1 2)') &lt;#&gt; geom)  instead of g1.geom &lt;#&gt;.</p></td></tr></table></div><p>Availability: 2.0.0 -- KNN only available for PostgreSQL 9.1+</p></div><div class="refsection" title="Examples"><a name="idp74811472"></a><h2>Examples</h2><pre class="programlisting">SELECT *
FROM (
SELECT b.tlid, b.mtfcc,
	b.geom &lt;#&gt; ST_GeomFromText('LINESTRING(746149 2948672,745954 2948576,
		745787 2948499,745740 2948468,745712 2948438,
		745690 2948384,745677 2948319)',2249) As b_dist,
		ST_Distance(b.geom, ST_GeomFromText('LINESTRING(746149 2948672,745954 2948576,
		745787 2948499,745740 2948468,745712 2948438,
		745690 2948384,745677 2948319)',2249)) As act_dist
    FROM bos_roads As b
    ORDER BY b_dist, b.tlid
    LIMIT 100) As foo
    ORDER BY act_dist, tlid LIMIT 10;

   tlid    | mtfcc |      b_dist      |     act_dist
-----------+-------+------------------+------------------
  85732027 | S1400 |                0 |                0
  85732029 | S1400 |                0 |                0
  85732031 | S1400 |                0 |                0
  85734335 | S1400 |                0 |                0
  85736037 | S1400 |                0 |                0
 624683742 | S1400 |                0 | 128.528874268666
  85719343 | S1400 | 260.839270432962 | 260.839270432962
  85741826 | S1400 | 164.759294123275 | 260.839270432962
  85732032 | S1400 |           277.75 | 311.830282365264
  85735592 | S1400 |           222.25 | 311.830282365264
(10 rows)
</pre></div><div class="refsection" title="See Also"><a name="idp74812752"></a><h2>See Also</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a></p></div></div><div class="refentry" title="&lt;&lt;-&gt;&gt;"><div class="refentry.separator"><hr></div><a name="geometry_distance_centroid_nd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;&lt;-&gt;&gt; — 
Returns the n-D distance between the centroids of A and B bounding
boxes.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">&lt;&lt;-&gt;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74821072"></a><h2>Description</h2><p>
The <code class="varname">&lt;&lt;-&gt;&gt;</code> operator returns the n-D (euclidean)
distance between the centroids of the bounding boxes of two geometries.
Useful for doing nearest neighbor
<span class="strong"><strong>approximate</strong></span> distance ordering.
      </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This operand will make use of n-D GiST indexes that may be available on
the geometries.  It is different from other operators that use spatial
indexes in that the spatial index is only used when the operator is in
the ORDER BY clause.
      </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Index only kicks in if one of the geometries is a constant (not in a
subquery/cte).  e.g. 'SRID=3005;POINT(1011102 450541)'::geometry instead
of a.geom
      </p></td></tr></table></div><p>Availability: 2.2.0 -- KNN only available for PostgreSQL 9.1+</p></div><div class="refsection" title="See Also"><a name="idp74824656"></a><h2>See Also</h2><p>
<a class="xref" href="#geometry_distance_box_nd" title="&lt;&lt;#&gt;&gt;">&lt;&lt;#&gt;&gt;</a>,
<a class="xref" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a>
      </p></div></div><div class="refentry" title="&lt;&lt;#&gt;&gt;"><div class="refentry.separator"><hr></div><a name="geometry_distance_box_nd"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&lt;&lt;#&gt;&gt; — 
Returns the n-D distance between A and B bounding boxes.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">&lt;&lt;#&gt;&gt;</b>(</code>
				  geometry 

				  <var class="pdparam">A</var>
				, 
				  geometry 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp74832848"></a><h2>Description</h2><p>The <code class="varname">&lt;&lt;#&gt;&gt;</code> operator returns distance between two floating point bounding boxes, possibly reading them from a spatial index (PostgreSQL 9.1+ required).   Useful for doing nearest neighbor <span class="strong"><strong>approximate</strong></span> distance ordering.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
			  geometries.  It is different from other operators that use spatial indexes in that the spatial index is only used when the operator
			  is in the ORDER BY clause.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Index only kicks in if one of the geometries is a constant e.g. ORDER BY
(ST_GeomFromText('POINT(1 2)') &lt;&lt;#&gt;&gt; geom)  instead of g1.geom
&lt;&lt;#&gt;&gt;.
      </p></td></tr></table></div><p>Availability: 2.2.0 -- KNN only available for PostgreSQL 9.1+</p></div><div class="refsection" title="See Also"><a name="idp74836304"></a><h2>See Also</h2><p>
<a class="xref" href="#geometry_distance_centroid_nd" title="&lt;&lt;-&gt;&gt;">&lt;&lt;-&gt;&gt;</a>,
<a class="xref" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a>
      </p></div></div></div><div class="sect1" title="8.9. Spatial Relationships and Measurements"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Spatial_Relationships_Measurements"></a>8.9. Spatial Relationships and Measurements</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_3DClosestPoint">ST_3DClosestPoint</a></span><span class="refpurpose"> — Returns the 3-dimensional point on g1 that is closest to g2.  This is the first point of
				the 3D shortest line.  </span></dt><dt><span class="refentrytitle"><a href="#ST_3DDistance">ST_3DDistance</a></span><span class="refpurpose"> — For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in
		projected units. </span></dt><dt><span class="refentrytitle"><a href="#ST_3DDWithin">ST_3DDWithin</a></span><span class="refpurpose"> — For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units. </span></dt><dt><span class="refentrytitle"><a href="#ST_3DDFullyWithin">ST_3DDFullyWithin</a></span><span class="refpurpose"> — Returns true if all of the 3D geometries are within the specified
		distance of one another. </span></dt><dt><span class="refentrytitle"><a href="#ST_3DIntersects">ST_3DIntersects</a></span><span class="refpurpose"> — Returns TRUE if the Geometries "spatially
			intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area).  With SFCGAL backend enabled also supports TINS
			</span></dt><dt><span class="refentrytitle"><a href="#ST_3DLongestLine">ST_3DLongestLine</a></span><span class="refpurpose"> — Returns the 3-dimensional longest line between two geometries</span></dt><dt><span class="refentrytitle"><a href="#ST_3DMaxDistance">ST_3DMaxDistance</a></span><span class="refpurpose"> — For geometry type Returns the 3-dimensional cartesian maximum distance (based on spatial ref) between two geometries in
		projected units.  </span></dt><dt><span class="refentrytitle"><a href="#ST_3DShortestLine">ST_3DShortestLine</a></span><span class="refpurpose"> — Returns the 3-dimensional shortest line between two geometries</span></dt><dt><span class="refentrytitle"><a href="#ST_Area">ST_Area</a></span><span class="refpurpose"> — Returns the area of the surface if it is a Polygon or
				MultiPolygon. For geometry, a 2D Cartesian area is determined with units specified by the SRID.  For geography, area is determined on a curved surface with units in square meters.</span></dt><dt><span class="refentrytitle"><a href="#ST_Azimuth">ST_Azimuth</a></span><span class="refpurpose"> — Returns the north-based azimuth as the angle in radians measured clockwise from the vertical on pointA to pointB.</span></dt><dt><span class="refentrytitle"><a href="#ST_Centroid">ST_Centroid</a></span><span class="refpurpose"> — Returns the geometric center of a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_ClosestPoint">ST_ClosestPoint</a></span><span class="refpurpose"> — Returns the 2-dimensional point on g1 that is closest to g2.  This is the first point of
			the shortest line.</span></dt><dt><span class="refentrytitle"><a href="#ST_ClusterDBSCAN">ST_ClusterDBSCAN</a></span><span class="refpurpose"> — Windowing function that returns integer id for the cluster each input geometry is in based on 2D implementation of Density-based spatial clustering of applications with noise (DBSCAN) algorithm.</span></dt><dt><span class="refentrytitle"><a href="#ST_ClusterIntersecting">ST_ClusterIntersecting</a></span><span class="refpurpose"> — Aggregate.  Returns an array with the connected components of a set of geometries</span></dt><dt><span class="refentrytitle"><a href="#ST_ClusterKMeans">ST_ClusterKMeans</a></span><span class="refpurpose"> — Windowing function that returns integer id for the cluster each input geometry is in.</span></dt><dt><span class="refentrytitle"><a href="#ST_ClusterWithin">ST_ClusterWithin</a></span><span class="refpurpose"> — Aggregate.  Returns an array of GeometryCollections, where each GeometryCollection represents a set of geometries separated by no more than the specified distance.</span></dt><dt><span class="refentrytitle"><a href="#ST_Contains">ST_Contains</a></span><span class="refpurpose"> — Returns true if and only if no points of B lie in the exterior of A, and at least one point of the interior of B lies in the interior of A. </span></dt><dt><span class="refentrytitle"><a href="#ST_ContainsProperly">ST_ContainsProperly</a></span><span class="refpurpose"> — Returns true if B intersects the interior of A but not the boundary (or exterior). A does not contain properly itself, but does contain itself.</span></dt><dt><span class="refentrytitle"><a href="#ST_Covers">ST_Covers</a></span><span class="refpurpose"> — Returns 1 (TRUE) if no point in Geometry B is outside
			Geometry A</span></dt><dt><span class="refentrytitle"><a href="#ST_CoveredBy">ST_CoveredBy</a></span><span class="refpurpose"> — Returns 1 (TRUE) if no point in Geometry/Geography A is outside
			Geometry/Geography B</span></dt><dt><span class="refentrytitle"><a href="#ST_Crosses">ST_Crosses</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if the supplied geometries have some, but not all,
	  interior points in common.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineCrossingDirection">ST_LineCrossingDirection</a></span><span class="refpurpose"> — Given 2 linestrings, returns a number between -3 and 3 denoting what kind of crossing behavior. 0 is no crossing.</span></dt><dt><span class="refentrytitle"><a href="#ST_Disjoint">ST_Disjoint</a></span><span class="refpurpose"> — Returns TRUE if the Geometries do not "spatially
			intersect" - if they do not share any space together.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_Distance">ST_Distance</a></span><span class="refpurpose"> — For geometry type Returns the 2D Cartesian distance between two geometries in
		projected units (based on spatial ref).  For geography type defaults to return minimum geodesic distance between two geographies in meters.</span></dt><dt><span class="refentrytitle"><a href="#ST_MinimumClearance">ST_MinimumClearance</a></span><span class="refpurpose"> — Returns the minimum clearance of a geometry, a measure of a geometry's robustness.</span></dt><dt><span class="refentrytitle"><a href="#ST_MinimumClearanceLine">ST_MinimumClearanceLine</a></span><span class="refpurpose"> — Returns the two-point LineString spanning a geometry's minimum clearance.</span></dt><dt><span class="refentrytitle"><a href="#ST_HausdorffDistance">ST_HausdorffDistance</a></span><span class="refpurpose"> — Returns the Hausdorff distance between two geometries.  Basically a measure of how similar or dissimilar 2 geometries are. Units are in the units of the spatial
		reference system of the geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_MaxDistance">ST_MaxDistance</a></span><span class="refpurpose"> — Returns the 2-dimensional largest distance between two geometries in
		projected units.</span></dt><dt><span class="refentrytitle"><a href="#ST_DistanceSphere">ST_DistanceSphere</a></span><span class="refpurpose"> — Returns minimum distance in meters between two lon/lat
				geometries. Uses a spherical earth and radius derived from the spheroid
        defined by the SRID.
				Faster than ST_DistanceSpheroid <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>, but less
				accurate. PostGIS versions prior to 1.5 only implemented for points.</span></dt><dt><span class="refentrytitle"><a href="#ST_Distance_Spheroid">ST_DistanceSpheroid</a></span><span class="refpurpose"> — Returns the minimum distance between two lon/lat geometries given a
			particular spheroid.
			PostGIS  versions prior to 1.5 only support points.</span></dt><dt><span class="refentrytitle"><a href="#ST_DFullyWithin">ST_DFullyWithin</a></span><span class="refpurpose"> — Returns true if all of the geometries are within the specified
		distance of one another</span></dt><dt><span class="refentrytitle"><a href="#ST_DWithin">ST_DWithin</a></span><span class="refpurpose"> — Returns true if the geometries are within the specified
		distance of one another. For geometry units are in those of spatial reference and For geography units are in meters and measurement is
		defaulted to use_spheroid=true (measure around spheroid), for faster check, use_spheroid=false to measure along sphere.</span></dt><dt><span class="refentrytitle"><a href="#ST_Equals">ST_Equals</a></span><span class="refpurpose"> — Returns true if the given geometries represent the same geometry. Directionality
			is ignored.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeometricMedian">
			  ST_GeometricMedian
		  </a></span><span class="refpurpose"> — 
			Returns the geometric median of a MultiPoint.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_HasArc">ST_HasArc</a></span><span class="refpurpose"> — Returns true if a geometry or geometry collection contains a circular string</span></dt><dt><span class="refentrytitle"><a href="#ST_Intersects">ST_Intersects</a></span><span class="refpurpose"> — Returns TRUE if the Geometries/Geography "spatially
			intersect in 2D" - (share any portion of space) and FALSE if they don't (they are Disjoint).
			For geography -- tolerance is 0.00001 meters (so any points that close are considered to intersect)
			</span></dt><dt><span class="refentrytitle"><a href="#ST_Length">ST_Length</a></span><span class="refpurpose"> — Returns the 2D length of the geometry if it is a LineString or MultiLineString. geometry are in units of spatial reference and geography are in meters (default spheroid)</span></dt><dt><span class="refentrytitle"><a href="#ST_Length2D">ST_Length2D</a></span><span class="refpurpose"> — Returns the 2-dimensional length of the geometry if it is a
				linestring or multi-linestring. This is an alias for <code class="varname">ST_Length</code></span></dt><dt><span class="refentrytitle"><a href="#ST_3DLength">ST_3DLength</a></span><span class="refpurpose"> — Returns the 3-dimensional or 2-dimensional length of the geometry if it is a
			linestring or multi-linestring. </span></dt><dt><span class="refentrytitle"><a href="#ST_Length_Spheroid">ST_LengthSpheroid</a></span><span class="refpurpose"> — Calculates the 2D or 3D length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.</span></dt><dt><span class="refentrytitle"><a href="#ST_Length2D_Spheroid">ST_Length2D_Spheroid</a></span><span class="refpurpose"> — Calculates the 2D length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.  </span></dt><dt><span class="refentrytitle"><a href="#ST_LongestLine">ST_LongestLine</a></span><span class="refpurpose"> — Returns the 2-dimensional longest line points of two geometries.
		The function will only return the first longest line if more than one, that the function finds.
		The line returned will always start in g1 and end in g2.
		The length of the line this function returns will always be the same as st_maxdistance returns for g1 and g2.</span></dt><dt><span class="refentrytitle"><a href="#ST_OrderingEquals">ST_OrderingEquals</a></span><span class="refpurpose"> — Returns true if the given geometries represent the same geometry
		and points are in the same directional order.</span></dt><dt><span class="refentrytitle"><a href="#ST_Overlaps">ST_Overlaps</a></span><span class="refpurpose"> — Returns TRUE if the Geometries share space, are of the same dimension, but are not completely contained by each other.</span></dt><dt><span class="refentrytitle"><a href="#ST_Perimeter">ST_Perimeter</a></span><span class="refpurpose"> — Return the length measurement of the boundary of an ST_Surface
		  or ST_MultiSurface geometry or geography. (Polygon, MultiPolygon).  geometry measurement is in units of spatial reference and geography is in meters.</span></dt><dt><span class="refentrytitle"><a href="#ST_Perimeter2D">ST_Perimeter2D</a></span><span class="refpurpose"> — Returns the 2-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon.  This is currently an alias for ST_Perimeter.</span></dt><dt><span class="refentrytitle"><a href="#ST_3DPerimeter">ST_3DPerimeter</a></span><span class="refpurpose"> — Returns the 3-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon.</span></dt><dt><span class="refentrytitle"><a href="#ST_PointOnSurface">ST_PointOnSurface</a></span><span class="refpurpose"> — Returns a <code class="varname">POINT</code> guaranteed to lie on the surface.</span></dt><dt><span class="refentrytitle"><a href="#ST_Project">ST_Project</a></span><span class="refpurpose"> — Returns a <code class="varname">POINT</code> projected from a start point using a distance in meters and bearing (azimuth) in radians.</span></dt><dt><span class="refentrytitle"><a href="#ST_Relate">ST_Relate</a></span><span class="refpurpose"> — Returns true if this Geometry is spatially related to
					anotherGeometry, by testing for intersections between the
					Interior, Boundary and Exterior of the two geometries as specified
					by the values in the intersectionMatrixPattern.  If no intersectionMatrixPattern
					is passed in, then returns the maximum intersectionMatrixPattern that relates the 2 geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_RelateMatch">ST_RelateMatch</a></span><span class="refpurpose"> — Returns true if intersectionMattrixPattern1 implies intersectionMatrixPattern2</span></dt><dt><span class="refentrytitle"><a href="#ST_ShortestLine">ST_ShortestLine</a></span><span class="refpurpose"> — Returns the 2-dimensional shortest line between two geometries</span></dt><dt><span class="refentrytitle"><a href="#ST_Touches">ST_Touches</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if the geometries have at least one point in common,
		but their interiors do not intersect.</span></dt><dt><span class="refentrytitle"><a href="#ST_Within">ST_Within</a></span><span class="refpurpose"> — Returns true if the geometry A is completely inside geometry B</span></dt></dl></div><div class="refentry" title="ST_3DClosestPoint"><a name="ST_3DClosestPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DClosestPoint — Returns the 3-dimensional point on g1 that is closest to g2.  This is the first point of
				the 3D shortest line.  </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DClosestPoint</b>(</code>geometry 
				<var class="pdparam">g1</var>, geometry 
				<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75412432"></a><h2>Description</h2><p>Returns the 3-dimensional point on g1 that is closest to g2.  This is the first point of
				the 3D shortest line. The 3D length of the 3D shortest line is the 3D distance.
			</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</p></div><div class="refsection" title="Examples"><a name="idp75417424"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><p>linestring and point -- both 3d and 2d closest point
					</p><pre class="programlisting">
SELECT ST_AsEWKT(ST_3DClosestPoint(line,pt)) AS cp3d_line_pt,
		ST_AsEWKT(ST_ClosestPoint(line,pt)) As cp2d_line_pt
	FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
		) As foo;


 cp3d_line_pt						|               cp2d_line_pt
-----------------------------------------------------------+------------------------------------------
 POINT(54.6993798867619 128.935022917228 11.5475869506606) | POINT(73.0769230769231 115.384615384615)
					</pre><p>
							  </p></td></tr><tr><td><p>linestring and multipoint -- both 3d and 2d closest point
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DClosestPoint(line,pt)) AS cp3d_line_pt,
		ST_AsEWKT(ST_ClosestPoint(line,pt)) As cp2d_line_pt
	FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
		) As foo;


                       cp3d_line_pt                        | cp2d_line_pt
-----------------------------------------------------------+--------------
 POINT(54.6993798867619 128.935022917228 11.5475869506606) | POINT(50 75)
					</pre><p>
							  </p></td></tr><tr><td><p>Multilinestring and polygon both 3d and 2d closest point
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DClosestPoint(poly, mline)) As cp3d,
    ST_AsEWKT(ST_ClosestPoint(poly, mline)) As cp2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
                   cp3d                    |     cp2d
-------------------------------------------+--------------
 POINT(39.993580415989 54.1889925532825 5) | POINT(20 40)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp75432016"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a></p></div></div><div class="refentry" title="ST_3DDistance"><div class="refentry.separator"><hr></div><a name="ST_3DDistance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DDistance — For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in
		projected units. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_3DDistance</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75440208"></a><h2>Description</h2><p>For geometry type returns the 3-dimensional minimum cartesian distance between two geometries in
		projected units (spatial ref units).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM ?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 - In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</p></div><div class="refsection" title="Examples"><a name="idp75449296"></a><h2>Examples</h2><pre class="programlisting">
-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DDistance(
			ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 4)'),2163),
			ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163)
		) As dist_3d,
		ST_Distance(
			ST_Transform(ST_GeomFromText('POINT(-72.1235 42.3521)',4326),2163),
			ST_Transform(ST_GeomFromText('LINESTRING(-72.1260 42.45, -72.123 42.1546)', 4326),2163)
		) As dist_2d;

     dist_3d      |     dist_2d
------------------+-----------------
 127.295059324629 | 126.66425605671
</pre><pre class="programlisting">
-- Multilinestring and polygon both 3d and 2d distance
-- Same example as 3D closest point example
SELECT ST_3DDistance(poly, mline) As dist3d,
    ST_Distance(poly, mline) As dist2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
      dist3d       | dist2d
-------------------+--------
 0.716635696066337 |      0
</pre></div><div class="refsection" title="See Also"><a name="idp75451088"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_3DDWithin"><div class="refentry.separator"><hr></div><a name="ST_3DDWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DDWithin — For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_3DDWithin</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var>, double precision 
			<var class="pdparam">distance_of_srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75465296"></a><h2>Description</h2><p>For geometry type returns true if the 3d distance between two objects is within distance_of_srid specified
		projected units (spatial ref units). </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM ?</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp75471312"></a><h2>Examples</h2><pre class="programlisting">
-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DDWithin(
			ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 4)'),2163),
			ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163),
			126.8
		) As within_dist_3d,
ST_DWithin(
			ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 4)'),2163),
			ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163),
			126.8
		) As within_dist_2d;

 within_dist_3d | within_dist_2d
----------------+----------------
 f              | t
</pre></div><div class="refsection" title="See Also"><a name="idp75472592"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_3DDFullyWithin"><div class="refentry.separator"><hr></div><a name="ST_3DDFullyWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DDFullyWithin — Returns true if all of the 3D geometries are within the specified
		distance of one another. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_3DDFullyWithin</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var>, double precision 
			<var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75482320"></a><h2>Description</h2><p>Returns true if the 3D geometries are fully within the specified distance
		of one another. The distance is specified in units defined by the
		spatial reference system of the geometries.  For this function to make
		sense, the source geometries must both be of the same coordinate projection,
		having the same SRID.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
		  comparison that will make use of any indexes that are available on
		  the geometries.</p></td></tr></table></div><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp75487696"></a><h2>Examples</h2><pre class="programlisting">
		-- This compares the difference between fully within and distance within as well
		-- as the distance fully within for the 2D footprint of the line/point vs. the 3d fully within
		SELECT ST_3DDFullyWithin(geom_a, geom_b, 10) as D3DFullyWithin10, ST_3DDWithin(geom_a, geom_b, 10) as D3DWithin10,
	ST_DFullyWithin(geom_a, geom_b, 20) as D2DFullyWithin20,
	ST_3DDFullyWithin(geom_a, geom_b, 20) as D3DFullyWithin20 from
		(select ST_GeomFromEWKT('POINT(1 1 2)') as geom_a,
		ST_GeomFromEWKT('LINESTRING(1 5 2, 2 7 20, 1 9 100, 14 12 3)') as geom_b) t1;
 d3dfullywithin10 | d3dwithin10 | d2dfullywithin20 | d3dfullywithin20
------------------+-------------+------------------+------------------
 f                | t           | t                | f </pre></div><div class="refsection" title="See Also"><a name="idp75488976"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a></p></div></div><div class="refentry" title="ST_3DIntersects"><div class="refentry.separator"><hr></div><a name="ST_3DIntersects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DIntersects — Returns TRUE if the Geometries "spatially
			intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area).  With SFCGAL backend enabled also supports TINS
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_3DIntersects</b>(</code>
						geometry
						<var class="pdparam">geomA</var>
					, 
						geometry
						<var class="pdparam">geomB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75497680"></a><h2>Description</h2><p>Overlaps, Touches, Within all imply spatial intersection.  If any of the aforementioned
				returns true, then the geometries also spatially intersect.
				Disjoint implies false for spatial intersection.</p><p>Availability: 2.0.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
			  comparison that will make use of any indexes that are available on the
			  geometries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In order to take advantage of support for TINS, you need to enable the SFCGAL backend.  This can be done at session time with: <code class="code">set postgis.backend = sfcgal;</code> or at the database or system level.  Database level can be done with <code class="code">ALTER DATABASE gisdb SET postgis.backend = sfcgal;</code>.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: ?</p></div><div class="refsection" title="Geometry Examples"><a name="idp75508944"></a><h2>Geometry Examples</h2><pre class="programlisting">SELECT ST_3DIntersects(pt, line), ST_Intersects(pt,line)
	FROM (SELECT 'POINT(0 0 2)'::geometry As pt,
		'LINESTRING (0 0 1, 0 2 3 )'::geometry As line) As foo;
 st_3dintersects | st_intersects
-----------------+---------------
 f               | t
(1 row)
		</pre></div><div class="refsection" title="TIN Examples"><a name="idp75510224"></a><h2>TIN Examples</h2><pre class="programlisting">set postgis.backend = sfcgal;
SELECT ST_3DIntersects('TIN(((0 0,1 0,0 1,0 0)))'::geometry, 'POINT(.1 .1)'::geometry);
 st_3dintersects
-----------------
 t</pre></div><div class="refsection" title="See Also"><a name="idp75511248"></a><h2>See Also</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" title="ST_3DLongestLine"><div class="refentry.separator"><hr></div><a name="ST_3DLongestLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DLongestLine — Returns the 3-dimensional longest line between two geometries</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DLongestLine</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75518288"></a><h2>Description</h2><p>Returns the 3-dimensional longest line between two geometries. The function will
		only return the first longest line if more than one.
		The line returned will always start in g1 and end in g2.
		The 3D length of the line this function returns will always be the same as <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> returns for g1 and g2.
		</p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp75523792"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><p>linestring and point -- both 3d and 2d longest line
					</p><pre class="programlisting">
SELECT ST_AsEWKT(ST_3DLongestLine(line,pt)) AS lol3d_line_pt,
		ST_AsEWKT(ST_LongestLine(line,pt)) As lol2d_line_pt
	FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
		) As foo;


           lol3d_line_pt           |       lol2d_line_pt
-----------------------------------+----------------------------
 LINESTRING(50 75 1000,100 100 30) | LINESTRING(98 190,100 100)
					</pre><p>
							  </p></td></tr><tr><td><p>linestring and multipoint -- both 3d and 2d longest line
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DLongestLine(line,pt)) AS lol3d_line_pt,
		ST_AsEWKT(ST_LongestLine(line,pt)) As lol2d_line_pt
	FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
		) As foo;


          lol3d_line_pt          |      lol2d_line_pt
---------------------------------+--------------------------
 LINESTRING(98 190 1,50 74 1000) | LINESTRING(98 190,50 74)
					</pre><p>
							  </p></td></tr><tr><td><p>Multilinestring and polygon both 3d and 2d longest line
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DLongestLine(poly, mline)) As lol3d,
    ST_AsEWKT(ST_LongestLine(poly, mline)) As lol2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
            lol3d             |          lol2d
------------------------------+--------------------------
 LINESTRING(175 150 5,1 10 2) | LINESTRING(175 150,1 10)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp75530064"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a></p></div></div><div class="refentry" title="ST_3DMaxDistance"><div class="refentry.separator"><hr></div><a name="ST_3DMaxDistance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DMaxDistance — For geometry type Returns the 3-dimensional cartesian maximum distance (based on spatial ref) between two geometries in
		projected units.  </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_3DMaxDistance</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75395280"></a><h2>Description</h2><p>For geometry type returns the 3-dimensional maximum cartesian distance between two geometries in
		projected units (spatial ref units). </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 - In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</p></div><div class="refsection" title="Examples"><a name="idp75564240"></a><h2>Examples</h2><pre class="programlisting">
-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (3D point and line compared 2D point and line)
-- Note: currently no vertical datum support so Z is not transformed and assumed to be same units as final.
SELECT ST_3DMaxDistance(
			ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 10000)'),2163),
			ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163)
		) As dist_3d,
		ST_MaxDistance(
			ST_Transform(ST_GeomFromEWKT('SRID=4326;POINT(-72.1235 42.3521 10000)'),2163),
			ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45 15, -72.123 42.1546 20)'),2163)
		) As dist_2d;

     dist_3d      |     dist_2d
------------------+------------------
 24383.7467488441 | 22247.8472107251
</pre></div><div class="refsection" title="See Also"><a name="idp75565520"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_3DShortestLine"><div class="refentry.separator"><hr></div><a name="ST_3DShortestLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DShortestLine — Returns the 3-dimensional shortest line between two geometries</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DShortestLine</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75573712"></a><h2>Description</h2><p>Returns the 3-dimensional shortest line between two geometries. The function will
		only return the first shortest line if more than one, that the function finds.
		If g1 and g2 intersects in just one point the function will return a line with both start
		and end in that intersection-point.
		If g1 and g2 are intersecting with more than one point the function will return a line with start
		and end in the same point but it can be any of the intersecting points.
		The line returned will always start in g1 and end in g2.
		The 3D length of the line this function returns will always be the same as <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> returns for g1 and g2.
		</p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p></div><div class="refsection" title="Examples"><a name="idp75579216"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><p>linestring and point -- both 3d and 2d shortest line
					</p><pre class="programlisting">
SELECT ST_AsEWKT(ST_3DShortestLine(line,pt)) AS shl3d_line_pt,
		ST_AsEWKT(ST_ShortestLine(line,pt)) As shl2d_line_pt
	FROM (SELECT 'POINT(100 100 30)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 1000)'::geometry As line
		) As foo;


 shl3d_line_pt						                 |               shl2d_line_pt
----------------------------------------------------------------------------+------------------------------------------------------
 LINESTRING(54.6993798867619 128.935022917228 11.5475869506606,100 100 30)  | LINESTRING(73.0769230769231 115.384615384615,100 100)
					</pre><p>
							  </p></td></tr><tr><td><p>linestring and multipoint -- both 3d and 2d shortest line
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DShortestLine(line,pt)) AS shl3d_line_pt,
		ST_AsEWKT(ST_ShortestLine(line,pt)) As shl2d_line_pt
	FROM (SELECT 'MULTIPOINT(100 100 30, 50 74 1000)'::geometry As pt,
			'LINESTRING (20 80 20, 98 190 1, 110 180 3, 50 75 900)'::geometry As line
		) As foo;


                       shl3d_line_pt                                       | shl2d_line_pt
---------------------------------------------------------------------------+------------------------
 LINESTRING(54.6993798867619 128.935022917228 11.5475869506606,100 100 30) | LINESTRING(50 75,50 74)
					</pre><p>
							  </p></td></tr><tr><td><p>Multilinestring and polygon both 3d and 2d shortest line
					</p><pre class="programlisting">SELECT ST_AsEWKT(ST_3DShortestLine(poly, mline)) As shl3d,
    ST_AsEWKT(ST_ShortestLine(poly, mline)) As shl2d
        FROM (SELECT  ST_GeomFromEWKT('POLYGON((175 150 5, 20 40 5, 35 45 5, 50 60 5, 100 100 5, 175 150 5))') As poly,
                ST_GeomFromEWKT('MULTILINESTRING((175 155 2, 20 40 20, 50 60 -2, 125 100 1, 175 155 1),
                (1 10 2, 5 20 1))') As mline ) As foo;
                   shl3d                                                                           |     shl2d
---------------------------------------------------------------------------------------------------+------------------------
 LINESTRING(39.993580415989 54.1889925532825 5,40.4078575708294 53.6052383805529 5.03423778139177) | LINESTRING(20 40,20 40)
             </pre><p>
							  </p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp75585616"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>, <a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a></p></div></div><div class="refentry" title="ST_Area"><div class="refentry.separator"><hr></div><a name="ST_Area"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Area — Returns the area of the surface if it is a Polygon or
				MultiPolygon. For geometry, a 2D Cartesian area is determined with units specified by the SRID.  For geography, area is determined on a curved surface with units in square meters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Area</b>(</code>geometry <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Area</b>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75596112"></a><h2>Description</h2><p>Returns the area of the geometry if it is a Polygon or
				MultiPolygon. Return the area measurement of an ST_Surface or
		  ST_MultiSurface value. For geometry, a 2D Cartesian area is determined with units specified by the SRID.  For geography, by default area is determined on a spheroid with units in square meters.
		  To measure around the faster but less accurate sphere, use ST_Area(geog,false).
		  </p><p>Enhanced: 2.0.0 - support for 2D polyhedral surfaces was introduced.</p><p>Enhanced: 2.2.0 - measurement on spheroid performed with GeographicLib for improved accuracy and robustness.  Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.1.2, 9.5.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For polyhedral surfaces, only supports 2D polyhedral surfaces (not 2.5D).  For 2.5D, may give a non-zero answer, but only for the faces that
			sit completely in XY plane.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p></div><div class="refsection" title="Examples"><a name="idp75604432"></a><h2>Examples</h2><p>Return area in square feet for a plot of Massachusetts land and multiply by conversion to get square meters.
				Note this is in square feet because EPSG:2249 is
				Massachusetts State Plane Feet </p><pre class="programlisting">
SELECT ST_Area(the_geom) As sqft, ST_Area(the_geom)*POWER(0.3048,2) As sqm
		FROM (SELECT
		ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,
			743265 2967450,743265.625 2967416,743238 2967416))',2249) ) As foo(the_geom);
  sqft   |     sqm
---------+-------------
 928.625 | 86.27208552
</pre><p>Return area square feet and transform to Massachusetts state plane meters (EPSG:26986) to get square meters.
				Note this is in square feet because 2249 is
				Massachusetts State Plane Feet and transformed area is in square meters since EPSG:26986 is state plane Massachusetts meters </p><pre class="programlisting">

SELECT ST_Area(the_geom) As sqft, ST_Area(ST_Transform(the_geom,26986)) As sqm
		FROM (SELECT
		ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,
			743265 2967450,743265.625 2967416,743238 2967416))',2249) ) As foo(the_geom);
  sqft   |       sqm
---------+------------------
 928.625 | 86.2724304199219
			</pre><p>Return area square feet and square meters using geography data type.  Note that we transform to our geometry to geography
	(before you can do that make sure your geometry is in WGS 84 long lat 4326).  Geography always measures in meters.
	This is just for demonstration to compare.  Normally your table will be stored in geography data type already.</p><pre class="programlisting">

SELECT ST_Area(the_geog)/POWER(0.3048,2) As sqft_spheroid,  ST_Area(the_geog,false)/POWER(0.3048,2) As sqft_sphere, ST_Area(the_geog) As sqm_spheroid
		FROM (SELECT
		geography(
		ST_Transform(
			ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,743265 2967450,743265.625 2967416,743238 2967416))',
				2249
				) ,4326
			)
		)
	) As foo(the_geog);
  sqft_spheroid   |   sqft_sphere    |   sqm_spheroid
------------------+------------------+------------------
 928.684403538925 | 927.049336105925 | 86.2776042893529

 --if your data is in geography already
 SELECT ST_Area(the_geog)/POWER(0.3048,2) As  sqft, ST_Area(the_geog) As sqm
	FROM somegeogtable;</pre></div><div class="refsection" title="See Also"><a name="idp75607888"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_Azimuth"><div class="refentry.separator"><hr></div><a name="ST_Azimuth"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Azimuth — Returns the north-based azimuth as the angle in radians measured clockwise from the vertical on pointA to pointB.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Azimuth</b>(</code>geometry <var class="pdparam">pointA</var>, geometry <var class="pdparam">pointB</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Azimuth</b>(</code>geography <var class="pdparam">pointA</var>, geography <var class="pdparam">pointB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75631312"></a><h2>Description</h2><p>Returns the azimuth in radians of the segment defined by the given
			point geometries, or NULL if the two points are coincident. The azimuth is angle is referenced from north, and is positive clockwise: North = 0; East = π/2; South = π; West = 3π/2.</p><p>For the geography type, the forward azimuth is solved as part of the inverse geodesic problem.</p><p>The azimuth is mathematical concept defined as the angle between a reference plane and a point, with angular units in radians.
			Units can be converted to degrees using a built-in PostgreSQL function degrees(), as shown in the example.</p><p>Availability: 1.1.0</p><p>Enhanced: 2.0.0 support for geography was introduced.</p><p>Enhanced: 2.2.0 measurement on spheroid performed with GeographicLib for improved accuracy and robustness.  Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</p><p>Azimuth is especially useful in conjunction with ST_Translate for shifting an object along its perpendicular axis. See
				 upgis_lineshift <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiplpgsqlfunctions" target="_top">Plpgsqlfunctions PostGIS wiki section</a> for example of this.</p></div><div class="refsection" title="Examples"><a name="idp75635280"></a><h2>Examples</h2><p>Geometry Azimuth in degrees </p><pre class="programlisting">
SELECT degrees(ST_Azimuth(ST_Point(25, 45), ST_Point(75, 100))) AS degA_B,
	    degrees(ST_Azimuth(ST_Point(75, 100), ST_Point(25, 45))) AS degB_A;

      dega_b       |     degb_a
------------------+------------------
 42.2736890060937 | 222.273689006094
</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_azimuth01.png"><div class="caption"><p>Green: the start Point(25,45) with its vertical. Yellow: degA_B as the path to travel (azimuth).</p></div></div></div><p>
				</p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_azimuth02.png"><div class="caption"><p>Green: the start Point(75,100) with its vertical. Yellow: degB_A as the path to travel (azimuth).</p></div></div></div><p>
				</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp75643856"></a><h2>See Also</h2><p><a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>, <a class="xref" href="#ST_Translate" title="ST_Translate">ST_Translate</a>, <a class="xref" href="#ST_Project" title="ST_Project">ST_Project</a>, <a class="ulink" href="http://www.postgresql.org/docs/current/interactive/functions-math.html" target="_top">PostgreSQL Math Functions</a></p></div></div><div class="refentry" title="ST_Centroid"><div class="refentry.separator"><hr></div><a name="ST_Centroid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Centroid — Returns the geometric center of a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Centroid</b>(</code>geometry 
		  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75651152"></a><h2>Description</h2><p>Computes the geometric center of a geometry, or equivalently,
	  the center of mass of the geometry as a <code class="varname">POINT</code>. For
	  [<code class="varname">MULTI</code>]<code class="varname">POINT</code>s, this is computed
	  as the arithmetic mean of the input coordinates. For
	  [<code class="varname">MULTI</code>]<code class="varname">LINESTRING</code>s, this is
	  computed as the weighted length of each line segment. For
	  [<code class="varname">MULTI</code>]<code class="varname">POLYGON</code>s, "weight" is
	  thought in terms of area. If an empty geometry is supplied, an empty
	  <code class="varname">GEOMETRYCOLLECTION</code> is returned. If
	  <code class="varname">NULL</code> is supplied, <code class="varname">NULL</code> is
	  returned.
	  If <code class="varname">CIRCULARSTRING</code> or <code class="varname">COMPOUNDCURVE</code>
	  are supplied, they are converted to linestring wtih CurveToLine first,
	  then same than for  <code class="varname">LINESTRING</code>
	  </p><p>New in 2.3.0 : support <code class="varname">CIRCULARSTRING</code> and <code class="varname">COMPOUNDCURVE</code> (using CurveToLine)</p><p>The centroid is equal to the centroid of the set of component
	  Geometries of highest dimension (since the lower-dimension geometries
	  contribute zero "weight" to the centroid).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.1.4, 9.5.5</p></div><div class="refsection" title="Examples"><a name="idp75662032"></a><h2>Examples</h2><p>In each of the following illustrations, the blue dot represents
	  the centroid of the source geometry.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid01.png"><div class="caption"><p>Centroid of a
					<code class="varname">MULTIPOINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid02.png"><div class="caption"><p>Centroid of a
					<code class="varname">LINESTRING</code></p></div></div></div></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid03.png"><div class="caption"><p>Centroid of a
					<code class="varname">POLYGON</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_centroid04.png"><div class="caption"><p>Centroid of a
					<code class="varname">GEOMETRYCOLLECTION</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_AsText(ST_Centroid('MULTIPOINT ( -1 0, -1 2, -1 3, -1 4, -1 7, 0 1, 0 3, 1 1, 2 0, 6 0, 7 8, 9 8, 10 6 )'));
				st_astext
------------------------------------------
 POINT(2.30769230769231 3.30769230769231)
(1 row)

SELECT ST_AsText(ST_centroid(g))
FROM  ST_GeomFromText('CIRCULARSTRING(0 2, -1 1,0 0, 0.5 0, 1 0, 2 1, 1 2, 0.5 2, 0 2)')  AS g ;
------------------------------------------
POINT(0.5 1)


SELECT ST_AsText(ST_centroid(g))
FROM  ST_GeomFromText('COMPOUNDCURVE(CIRCULARSTRING(0 2, -1 1,0 0),(0 0, 0.5 0, 1 0),CIRCULARSTRING( 1 0, 2 1, 1 2),(1 2, 0.5 2, 0 2))' ) AS g;
------------------------------------------
POINT(0.5 1)

</pre></div><div class="refsection" title="See Also"><a name="idp75684816"></a><h2>See Also</h2><p><a class="xref" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a></p></div></div><div class="refentry" title="ST_ClosestPoint"><div class="refentry.separator"><hr></div><a name="ST_ClosestPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClosestPoint — Returns the 2-dimensional point on g1 that is closest to g2.  This is the first point of
			the shortest line.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ClosestPoint</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75691856"></a><h2>Description</h2><p>Returns the 2-dimensional point on g1 that is closest to g2.  This is the first point of
			the shortest line.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you have a 3D Geometry, you may prefer to use <a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>.</p></td></tr></table></div><p>Availability: 1.5.0</p></div><div class="refsection" title="Examples"><a name="idp75694416"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_closestpoint01.png"><div class="caption"><p>Closest between point and linestring is the point itself, but closest
											point between a linestring and point is the point on line string that is closest.</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_ClosestPoint(pt,line)) AS cp_pt_line,
	ST_AsText(ST_ClosestPoint(line,pt)) As cp_line_pt
FROM (SELECT 'POINT(100 100)'::geometry As pt,
		'LINESTRING (20 80, 98 190, 110 180, 50 75 )'::geometry As line
	) As foo;


   cp_pt_line   |                cp_line_pt
----------------+------------------------------------------
 POINT(100 100) | POINT(73.0769230769231 115.384615384615)
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_closestpoint02.png"><div class="caption"><p>closest point on polygon A to polygon B</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
		ST_ClosestPoint(
			ST_GeomFromText('POLYGON((175 150, 20 40, 50 60, 125 100, 175 150))'),
			ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
			)
		) As ptwkt;

                  ptwkt
------------------------------------------
 POINT(140.752120669087 125.695053378061)
				</pre><p>
						</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp75703248"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>,<a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a></p></div></div><div class="refentry" title="ST_ClusterDBSCAN"><div class="refentry.separator"><hr></div><a name="ST_ClusterDBSCAN"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClusterDBSCAN — Windowing function that returns integer id for the cluster each input geometry is in based on 2D implementation of Density-based spatial clustering of applications with noise (DBSCAN) algorithm.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_ClusterDBSCAN</b>(</code>geometry winset 
			<var class="pdparam">geom</var>, float8 
			<var class="pdparam">eps</var>, integer 
			<var class="pdparam">minpoints</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75712848"></a><h2>Description</h2><p>
		  Returns cluster number for each input geometry, based on a 2D implementation of the
          <a class="ulink" href="https://en.wikipedia.org/wiki/DBSCAN" target="_top">Density-based spatial clustering of applications with noise (DBSCAN)</a>
		  algorithm.  Unlike <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>, it does not require the number of clusters to be specified, but instead
		  uses the desired distance (<code class="varname">eps</code>) and density(<code class="varname">minpoints</code>) parameters to construct each cluster.
	  </p><p>
		  An input geometry will be added to a cluster if it is either:
		  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                      A "core" geometry, that is within <code class="varname">eps</code> distance of at least <code class="varname">minpoints</code> other input geometries, or
                  </p></li><li class="listitem"><p>
                      A "border" geometry, that is within <code class="varname">eps</code> distance of a core geometry.
                  </p></li></ul></div><p>
		</p><p>
		  Note that border geometries may be within <code class="varname">eps</code> distance of core geometries in more than one cluster; in this
		  case, either assignment would be correct, and the border geometry will be arbitrarily asssigned to one of the available clusters.
		  In these cases, it is possible for a correct cluster to be generated with fewer than <code class="varname">minpoints</code> geometries.
		  When assignment of a border geometry is ambiguous, repeated calls to ST_ClusterDBSCAN will produce identical results if an ORDER BY
		  clause is included in the window definition, but cluster assignments may differ from other implementations of the same algorithm.
	  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
		  Input geometries that do not meet the criteria to join any other cluster will be assigned a cluster number of NULL.
	  </p></td></tr></table></div><p>Availability: 2.3.0 - requires GEOS </p></div><div class="refsection" title="Examples"><a name="idp75721424"></a><h2>Examples</h2><p>
          Assigning a cluster number to each parcel point:
      </p><pre class="programlisting">
SELECT parcel_id, ST_ClusterDBSCAN(geom, eps := 0.5, minpoints := 5) over () AS cid
FROM parcels;
</pre><p>
            Combining parcels with the same cluster number into a single geometry. This uses named argument calling
        </p><pre class="programlisting">
SELECT cid, ST_Collect(geom) AS cluster_geom, array_agg(parcel_id) AS ids_in_cluster FROM (
    SELECT parcel_id, ST_ClusterDBSCAN(geom, eps := 0.5, minpoints := 5) over () AS cid, geom
    FROM parcels) sq
GROUP BY cid;
    </pre></div><div class="refsection" title="See Also"><a name="idp75724112"></a><h2>See Also</h2><p>
              <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>,
              <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>,
              <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>
          </p></div></div><div class="refentry" title="ST_ClusterIntersecting"><div class="refentry.separator"><hr></div><a name="ST_ClusterIntersecting"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClusterIntersecting — Aggregate.  Returns an array with the connected components of a set of geometries</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry[] <b class="fsfunc">ST_ClusterIntersecting</b>(</code>geometry set <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75735248"></a><h2>Description</h2><p>ST_ClusterIntersecting is an aggregate function that returns an array of GeometryCollections, where each GeometryCollection represents an interconnected set of geometries.</p><p>Availability: 2.2.0 - requires GEOS </p></div><div class="refsection" title="Examples"><a name="idp75736784"></a><h2>Examples</h2><pre class="programlisting">
WITH testdata AS
  (SELECT unnest(ARRAY['LINESTRING (0 0, 1 1)'::geometry,
		       'LINESTRING (5 5, 4 4)'::geometry,
		       'LINESTRING (6 6, 7 7)'::geometry,
		       'LINESTRING (0 0, -1 -1)'::geometry,
		       'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))'::geometry]) AS geom)

SELECT ST_AsText(unnest(ST_ClusterIntersecting(geom))) FROM testdata;

--result

st_astext
---------
GEOMETRYCOLLECTION(LINESTRING(0 0,1 1),LINESTRING(5 5,4 4),LINESTRING(0 0,-1 -1),POLYGON((0 0,4 0,4 4,0 4,0 0)))
GEOMETRYCOLLECTION(LINESTRING(6 6,7 7))
        </pre></div><div class="refsection" title="See Also"><a name="idp75738064"></a><h2>See Also</h2><p>
            <a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>,
            <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>,
            <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>
        </p></div></div><div class="refentry" title="ST_ClusterKMeans"><div class="refentry.separator"><hr></div><a name="ST_ClusterKMeans"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClusterKMeans — Windowing function that returns integer id for the cluster each input geometry is in.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_ClusterKMeans</b>(</code>geometry winset 
			<var class="pdparam">geom</var>, integer 
			<var class="pdparam">number_of_clusters</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75746128"></a><h2>Description</h2><p>Returns 2D distance based
        <a class="ulink" href="https://en.wikipedia.org/wiki/K-means_clustering" target="_top">k-means</a>
        cluster number for each input geometry. The distance used for clustering is the
        distance between the centroids of the geometries.
      </p><p>Availability: 2.3.0 - requires GEOS </p></div><div class="refsection" title="Examples"><a name="idp75748304"></a><h2>Examples</h2><p>Generate dummy set of parcels for examples</p><pre class="programlisting">CREATE TABLE parcels AS
SELECT lpad((row_number() over())::text,3,'0') As parcel_id, geom,
('{residential, commercial}'::text[])[1 + mod(row_number()OVER(),2)] As type
FROM
    ST_Subdivide(ST_Buffer('LINESTRING(40 100, 98 100, 100 150, 60 90)'::geometry,
    40, 'endcap=square'),12) As geom;
</pre><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td>
						<div class="informalfigure"><div class="mediaobject"><img src="images/st_clusterkmeans01.png"><div class="caption"><p>Original Parcels</p></div></div></div><p>
						</p>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_clusterkmeans02.png"><div class="caption"><p>Parcels color-coded by cluster number (cid)</p></div></div></div><p>
						</p><pre class="programlisting">SELECT ST_ClusterKMeans(geom, 5) OVER() AS cid, parcel_id, geom
FROM parcels;
-- result
 cid | parcel_id |   geom
-----+-----------+---------------
   0 | 001       | 0103000000...
   0 | 002       | 0103000000...
   1 | 003       | 0103000000...
   0 | 004       | 0103000000...
   1 | 005       | 0103000000...
   2 | 006       | 0103000000...
   2 | 007       | 0103000000...
(7 rows)</pre><p>
					</p></td></tr></tbody></table></div><pre class="programlisting"> -- Partitioning parcel clusters by type
SELECT ST_ClusterKMeans(geom,3) over (PARTITION BY type) AS cid, parcel_id, type
FROM parcels;
-- result
 cid | parcel_id |    type
-----+-----------+-------------
   1 | 005       | commercial
   1 | 003       | commercial
   2 | 007       | commercial
   0 | 001       | commercial
   1 | 004       | residential
   0 | 002       | residential
   2 | 006       | residential
(7 rows)</pre></div><div class="refsection" title="See Also"><a name="idp75758160"></a><h2>See Also</h2><p>
              <a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>,
              <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>,
              <a class="xref" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>, <a class="xref" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>
          </p></div></div><div class="refentry" title="ST_ClusterWithin"><div class="refentry.separator"><hr></div><a name="ST_ClusterWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClusterWithin — Aggregate.  Returns an array of GeometryCollections, where each GeometryCollection represents a set of geometries separated by no more than the specified distance.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry[] <b class="fsfunc">ST_ClusterWithin</b>(</code>geometry set  <var class="pdparam">g</var>, float8  <var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75766608"></a><h2>Description</h2><p>ST_ClusterWithin is an aggregate function that returns an array of GeometryCollections, where each GeometryCollection represents a set of geometries separated by no more than the specified distance.</p><p>Availability: 2.2.0 - requires GEOS</p></div><div class="refsection" title="Examples"><a name="idp75768144"></a><h2>Examples</h2><pre class="programlisting">
WITH testdata AS
  (SELECT unnest(ARRAY['LINESTRING (0 0, 1 1)'::geometry,
		       'LINESTRING (5 5, 4 4)'::geometry,
		       'LINESTRING (6 6, 7 7)'::geometry,
		       'LINESTRING (0 0, -1 -1)'::geometry,
		       'POLYGON ((0 0, 4 0, 4 4, 0 4, 0 0))'::geometry]) AS geom)

SELECT ST_AsText(unnest(ST_ClusterWithin(geom, 1.4))) FROM testdata;

--result

st_astext
---------
GEOMETRYCOLLECTION(LINESTRING(0 0,1 1),LINESTRING(5 5,4 4),LINESTRING(0 0,-1 -1),POLYGON((0 0,4 0,4 4,0 4,0 0)))
GEOMETRYCOLLECTION(LINESTRING(6 6,7 7))
        </pre></div><div class="refsection" title="See Also"><a name="idp75769424"></a><h2>See Also</h2><p>
          <a class="xref" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>,
          <a class="xref" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>,
          <a class="xref" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>
        </p></div></div><div class="refentry" title="ST_Contains"><div class="refentry.separator"><hr></div><a name="ST_Contains"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Contains — Returns true if and only if no points of B lie in the exterior of A, and at least one point of the interior of B lies in the interior of A. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Contains</b>(</code>geometry 
			<var class="pdparam">geomA</var>, geometry 
			<var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75777488"></a><h2>Description</h2><p>Geometry A contains Geometry B if and only if no points of B lie in the exterior of A, and at least one point of the interior of B lies in the interior of A.
		An important subtlety of this definition is that A does not contain its boundary, but A does contain itself. Contrast that to <a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> where geometry
		A does not Contain Properly itself.</p><p>Returns TRUE if geometry B is completely inside geometry A. For this function to make
		sense, the source geometries must both be of the same coordinate projection,
		having the same SRID.  ST_Contains is the inverse of ST_Within.  So ST_Contains(A,B) implies ST_Within(B,A) except in the case of
		invalid geometries where the result is always false regardless or not defined.</p><p>Performed by the GEOS module</p><p>Enhanced: 2.3.0 Enhancement to PIP short-circuit extended to support MultiPoints with few points. Prior versions only supported point in polygon.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not use this function with invalid geometries. You will get unexpected results.</p></td></tr></table></div><p>This function call will automatically include a bounding box
			comparison that will make use of any indexes that are available on
			the geometries. To avoid index use, use the function
			_ST_Contains.</p><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 // s2.1.13.3
		- same as within(geometry B, geometry A)</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification.	SQL-MM 3: 5.1.31</p><p>There are certain subtleties to ST_Contains and ST_Within that are not intuitively obvious.
			For details check out <a class="ulink" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">Subtleties of OGC Covers, Contains, Within</a></p></div><div class="refsection" title="Examples"><a name="idp75786960"></a><h2>Examples</h2><p>The <code class="function">ST_Contains</code> predicate returns <code class="varname">TRUE</code> in all the following illustrations.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains01.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains02.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POINT</code></p></div></div></div></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains03.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains04.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr></tbody></table></div><p>The <code class="function">ST_Contains</code> predicate returns <code class="varname">FALSE</code> in all the following illustrations.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains05.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_contains06.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">
-- A circle within a circle
SELECT ST_Contains(smallc, bigc) As smallcontainsbig,
	   ST_Contains(bigc,smallc) As bigcontainssmall,
	   ST_Contains(bigc, ST_Union(smallc, bigc)) as bigcontainsunion,
	   ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion,
	   ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
	   ST_Contains(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
			 ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;

-- Result
  smallcontainsbig | bigcontainssmall | bigcontainsunion | bigisunion | bigcoversexterior | bigcontainsexterior
------------------+------------------+------------------+------------+-------------------+---------------------
 f                | t                | t                | t          | t        | f

-- Example demonstrating difference between contains and contains properly
SELECT ST_GeometryType(geomA) As geomtype, ST_Contains(geomA,geomA) AS acontainsa, ST_ContainsProperly(geomA, geomA) AS acontainspropa,
   ST_Contains(geomA, ST_Boundary(geomA)) As acontainsba, ST_ContainsProperly(geomA, ST_Boundary(geomA)) As acontainspropba
FROM (VALUES ( ST_Buffer(ST_Point(1,1), 5,1) ),
			 ( ST_MakeLine(ST_Point(1,1), ST_Point(-1,-1) ) ),
			 ( ST_Point(1,1) )
	  ) As foo(geomA);

  geomtype    | acontainsa | acontainspropa | acontainsba | acontainspropba
--------------+------------+----------------+-------------+-----------------
ST_Polygon    | t          | f              | f           | f
ST_LineString | t          | f              | f           | f
ST_Point      | t          | t              | f           | f

 </pre></div><div class="refsection" title="See Also"><a name="idp75820752"></a><h2>See Also</h2><p><a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>, <a class="xref" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_ContainsProperly"><div class="refentry.separator"><hr></div><a name="ST_ContainsProperly"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ContainsProperly — Returns true if B intersects the interior of A but not the boundary (or exterior). A does not contain properly itself, but does contain itself.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_ContainsProperly</b>(</code>geometry 
			<var class="pdparam">geomA</var>, geometry 
			<var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75829840"></a><h2>Description</h2><p>Returns true if B intersects the interior of A but not the boundary (or exterior).</p><p>A does not contain properly itself, but does contain itself.</p><p>Every point of the other geometry is a point of this geometry's interior. The DE-9IM Intersection Matrix for the two geometries matches
   [T**FF*FF*] used in <a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a></p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>From JTS docs slightly reworded: The advantage to using this predicate over <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a> and <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> is that it can be computed
	  efficiently, with no need to compute topology at individual points.</p><p>
			 An example use case for this predicate is computing the intersections
	 of a set of geometries with a large polygonal geometry.
	Since intersection is a fairly slow operation, it can be more efficient
	 to use containsProperly to filter out test geometries which lie
	wholly inside the area.  In these cases the intersection is
	known a priori to be exactly the original test geometry.
	 </p></td></tr></table></div><p>Availability: 1.4.0 - requires GEOS &gt;= 3.1.0.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not use this function with invalid geometries. You will get unexpected results.</p></td></tr></table></div><p>This function call will automatically include a bounding box
			comparison that will make use of any indexes that are available on
			the geometries. To avoid index use, use the function
			_ST_ContainsProperly.</p></div><div class="refsection" title="Examples"><a name="idp75836624"></a><h2>Examples</h2><pre class="programlisting">
	--a circle within a circle
	SELECT ST_ContainsProperly(smallc, bigc) As smallcontainspropbig,
	ST_ContainsProperly(bigc,smallc) As bigcontainspropsmall,
	ST_ContainsProperly(bigc, ST_Union(smallc, bigc)) as bigcontainspropunion,
	ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion,
	ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
	ST_ContainsProperly(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
	FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
	ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
	--Result
  smallcontainspropbig | bigcontainspropsmall | bigcontainspropunion | bigisunion | bigcoversexterior | bigcontainsexterior
------------------+------------------+------------------+------------+-------------------+---------------------
 f                     | t                    | f                    | t          | t                 | f

 --example demonstrating difference between contains and contains properly
 SELECT ST_GeometryType(geomA) As geomtype, ST_Contains(geomA,geomA) AS acontainsa, ST_ContainsProperly(geomA, geomA) AS acontainspropa,
 ST_Contains(geomA, ST_Boundary(geomA)) As acontainsba, ST_ContainsProperly(geomA, ST_Boundary(geomA)) As acontainspropba
 FROM (VALUES ( ST_Buffer(ST_Point(1,1), 5,1) ),
		  ( ST_MakeLine(ST_Point(1,1), ST_Point(-1,-1) ) ),
		  ( ST_Point(1,1) )
	) As foo(geomA);

  geomtype    | acontainsa | acontainspropa | acontainsba | acontainspropba
--------------+------------+----------------+-------------+-----------------
ST_Polygon    | t          | f              | f           | f
ST_LineString | t          | f              | f           | f
ST_Point      | t          | t              | f           | f
 </pre></div><div class="refsection" title="See Also"><a name="idp75838032"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>, <a class="xref" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>, <a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_Covers"><div class="refentry.separator"><hr></div><a name="ST_Covers"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Covers — Returns 1 (TRUE) if no point in Geometry B is outside
			Geometry A</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Covers</b>(</code>geometry 
			<var class="pdparam">geomA</var>, geometry 
			<var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Covers</b>(</code>geography 
			<var class="pdparam">geogpolyA</var>, geography 
			<var class="pdparam">geogpointB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75850960"></a><h2>Description</h2><p>Returns 1 (TRUE) if no point in Geometry/Geography B is outside
			Geometry/Geography A</p><p>Performed by the GEOS module</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For geography only Polygon covers point is supported.</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not use this function with invalid geometries. You will get unexpected results.</p></td></tr></table></div><p>This function call will automatically include a bounding box
			comparison that will make use of any indexes that are available on
			the geometries. To avoid index use, use the function
			_ST_Covers.</p><p>Enhanced: 2.3.0 Enhancement to PIP short-circuit for geometry extended to support MultiPoints with few points. Prior versions only supported point in polygon.</p><p>Availability: 1.5 - support for geography was introduced. </p><p>Availability: 1.2.2 - requires GEOS &gt;= 3.0</p><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p><p>Not an OGC standard, but Oracle has it too.</p><p>There are certain subtleties to ST_Contains and ST_Within that are not intuitively obvious.
			For details check out <a class="ulink" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">Subtleties of OGC Covers, Contains, Within</a></p></div><div class="refsection" title="Examples"><a name="idp75858512"></a><h2>Examples</h2><p> Geometry example </p><pre class="programlisting">
	--a circle covering a circle
SELECT ST_Covers(smallc,smallc) As smallinsmall,
	ST_Covers(smallc, bigc) As smallcoversbig,
	ST_Covers(bigc, ST_ExteriorRing(bigc)) As bigcoversexterior,
	ST_Contains(bigc, ST_ExteriorRing(bigc)) As bigcontainsexterior
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
	ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
	--Result
 smallinsmall | smallcoversbig | bigcoversexterior | bigcontainsexterior
--------------+----------------+-------------------+---------------------
 t            | f              | t                 | f
(1 row)	</pre><p>Geeography Example</p><pre class="programlisting">
-- a point with a 300 meter buffer compared to a point, a point and its 10 meter buffer
SELECT ST_Covers(geog_poly, geog_pt) As poly_covers_pt,
	ST_Covers(ST_Buffer(geog_pt,10), geog_pt) As buff_10m_covers_cent
	FROM (SELECT ST_Buffer(ST_GeogFromText('SRID=4326;POINT(-99.327 31.4821)'), 300) As geog_poly,
				ST_GeogFromText('SRID=4326;POINT(-99.33 31.483)') As geog_pt ) As foo;

 poly_covers_pt | buff_10m_covers_cent
----------------+------------------
 f              | t
		</pre></div><div class="refsection" title="See Also"><a name="idp75861072"></a><h2>See Also</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_CoveredBy"><div class="refentry.separator"><hr></div><a name="ST_CoveredBy"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CoveredBy — Returns 1 (TRUE) if no point in Geometry/Geography A is outside
			Geometry/Geography B</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_CoveredBy</b>(</code>geometry 
			<var class="pdparam">geomA</var>, geometry 
			<var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_CoveredBy</b>(</code>geography 
			<var class="pdparam">geogA</var>, geography 
			<var class="pdparam">geogB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75872208"></a><h2>Description</h2><p>Returns 1 (TRUE) if no point in Geometry/Geography A is outside
			Geometry/Geography B</p><p>Performed by the GEOS module</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not use this function with invalid geometries. You will get unexpected results.</p></td></tr></table></div><p>Availability: 1.2.2 - requires GEOS &gt;= 3.0</p><p>This function call will automatically include a bounding box
			comparison that will make use of any indexes that are available on
			the geometries. To avoid index use, use the function
			_ST_CoveredBy.</p><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p><p>Not an OGC standard, but Oracle has it too.</p><p>There are certain subtleties to ST_Contains and ST_Within that are not intuitively obvious.
			For details check out <a class="ulink" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">Subtleties of OGC Covers, Contains, Within</a></p></div><div class="refsection" title="Examples"><a name="idp75878096"></a><h2>Examples</h2><pre class="programlisting">
	--a circle coveredby a circle
SELECT ST_CoveredBy(smallc,smallc) As smallinsmall,
	ST_CoveredBy(smallc, bigc) As smallcoveredbybig,
	ST_CoveredBy(ST_ExteriorRing(bigc), bigc) As exteriorcoveredbybig,
	ST_Within(ST_ExteriorRing(bigc),bigc) As exeriorwithinbig
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 2)'), 10) As smallc,
	ST_Buffer(ST_GeomFromText('POINT(1 2)'), 20) As bigc) As foo;
	--Result
 smallinsmall | smallcoveredbybig | exteriorcoveredbybig | exeriorwithinbig
--------------+-------------------+----------------------+------------------
 t            | t                 | t                    | f
(1 row)	</pre></div><div class="refsection" title="See Also"><a name="idp75879504"></a><h2>See Also</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Covers" title="ST_Covers">ST_Covers</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_Crosses"><div class="refentry.separator"><hr></div><a name="ST_Crosses"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Crosses — Returns <code class="varname">TRUE</code> if the supplied geometries have some, but not all,
	  interior points in common.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Crosses</b>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75891920"></a><h2>Description</h2><p><code class="function">ST_Crosses</code> takes two geometry objects and
	  returns <code class="varname">TRUE</code> if their intersection "spatially cross", that is, the
	  geometries have some, but not all interior points in common. The
	  intersection of the interiors of the geometries must not be the empty
	  set and must have a dimensionality less than the maximum dimension
	  of the two input geometries. Additionally, the intersection of the two
	  geometries must not equal either of the source geometries. Otherwise, it
	  returns <code class="varname">FALSE</code>.</p><p>In mathematical terms, this is expressed as:</p><p class="remark"><em><span class="remark">TODO: Insert appropriate MathML markup here or use a gif.
	  Simple HTML markup does not work well in both IE and Firefox.</span></em></p><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses-math.gif"></div></div><p>The DE-9IM Intersection Matrix for the two geometries is:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="markup">T*T******</span> (for Point/Line, Point/Area, and
		  Line/Area situations)</p></li><li class="listitem"><p><span class="markup">T*****T**</span> (for Line/Point, Area/Point, and
		  Area/Line situations)</p></li><li class="listitem"><p><span class="markup">0********</span> (for Line/Line situations)</p></li></ul></div><p>For any other combination of dimensions this predicate returns
	  false.</p><p>The OpenGIS Simple Features Specification defines this predicate
		only for Point/Line, Point/Area, Line/Line, and Line/Area situations.
		JTS / GEOS extends the definition to apply to Line/Point, Area/Point and
		Area/Line situations as well. This makes the relation
		symmetric.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
	  comparison that will make use of any indexes that are available on the
	  geometries.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.13.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.29</p></div><div class="refsection" title="Examples"><a name="idp75914704"></a><h2>Examples</h2><p>The following illustrations all return <code class="varname">TRUE</code>.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses01.png"><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses02.png"><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses03.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_crosses04.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr></tbody></table></div><p>Consider a situation where a user has two tables: a table of roads
	  and a table of highways.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p> </p><div class="informalexample"><pre class="programlisting">CREATE TABLE roads (
  id serial NOT NULL,
  the_geom geometry,
  CONSTRAINT roads_pkey PRIMARY KEY (road_id)
);</pre></div><p> </p></td><td><p> </p><div class="informalexample"><pre class="programlisting">CREATE TABLE highways (
  id serial NOT NULL,
  the_gem geometry,
  CONSTRAINT roads_pkey PRIMARY KEY (road_id)
);</pre></div><p> </p></td></tr></tbody></table></div><p>To determine a list of roads that cross a highway, use a query
	  similiar to:</p><div class="informalexample"><pre class="programlisting">SELECT roads.id
FROM roads, highways
WHERE ST_Crosses(roads.the_geom, highways.the_geom);</pre></div></div></div><div class="refentry" title="ST_LineCrossingDirection"><div class="refentry.separator"><hr></div><a name="ST_LineCrossingDirection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineCrossingDirection — Given 2 linestrings, returns a number between -3 and 3 denoting what kind of crossing behavior. 0 is no crossing.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_LineCrossingDirection</b>(</code>geometry  <var class="pdparam">linestringA</var>, geometry  <var class="pdparam">linestringB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75946960"></a><h2>Description</h2><p>Given 2 linestrings, returns a number between -3 and 3 denoting what kind of crossing behavior. 0 is no crossing.  This is only supported for <code class="varname">LINESTRING</code></p><p>Definition of integer constants is as follows:
		   </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> 0: LINE NO CROSS</p></li><li class="listitem"><p>-1: LINE CROSS LEFT</p></li><li class="listitem"><p> 1: LINE CROSS RIGHT</p></li><li class="listitem"><p>-2: LINE MULTICROSS END LEFT</p></li><li class="listitem"><p> 2: LINE MULTICROSS END RIGHT</p></li><li class="listitem"><p>-3: LINE MULTICROSS END SAME FIRST LEFT</p></li><li class="listitem"><p> 3: LINE MULTICROSS END SAME FIRST RIGHT</p></li></ul></div><p>
	  </p><p>Availability: 1.4</p></div><div class="refsection" title="Examples"><a name="idp75955280"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection01.png"><div class="caption"><p>Line 1 (green), Line 2 ball is start point,
					triangle are end points. Query below. </p></div></div></div><p>
				  </p><pre class="programlisting">
SELECT ST_LineCrossingDirection(foo.line1, foo.line2) As l1_cross_l2 ,
	  ST_LineCrossingDirection(foo.line2, foo.line1) As l2_cross_l1
FROM (
SELECT
 ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As line1,
 ST_GeomFromText('LINESTRING(171 154,20 140,71 74,161 53)') As line2
	) As foo;

 l1_cross_l2 | l2_cross_l1
-------------+-------------
           3 |          -3
				</pre><p>
			</p>
		</td><td>
			<div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection02.png"><div class="caption"><p>Line 1 (green), Line 2 (blue) ball is start point,
						triangle are end points. Query below.</p></div></div></div><p>
			  </p><pre class="programlisting">
SELECT ST_LineCrossingDirection(foo.line1, foo.line2) As l1_cross_l2 ,
	  ST_LineCrossingDirection(foo.line2, foo.line1) As l2_cross_l1
FROM (
 SELECT
  ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As line1,
  ST_GeomFromText('LINESTRING (171 154, 20 140, 71 74, 2.99 90.16)') As line2
) As foo;

 l1_cross_l2 | l2_cross_l1
-------------+-------------
           2 |          -2
				</pre><p>
			</p>
		</td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection03.png"><div class="caption"><p>Line 1 (green), Line 2 (blue) ball is start point,
					triangle are end points. Query below. </p></div></div></div><p>
				  </p><pre class="programlisting">
SELECT
	ST_LineCrossingDirection(foo.line1, foo.line2) As l1_cross_l2 ,
	ST_LineCrossingDirection(foo.line2, foo.line1) As l2_cross_l1
FROM (
 SELECT
  ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As line1,
  ST_GeomFromText('LINESTRING (20 140, 71 74, 161 53)') As line2
  ) As foo;

 l1_cross_l2 | l2_cross_l1
-------------+-------------
          -1 |          1
				</pre><p>
			</p>
		</td><td>
			<div class="informalfigure"><div class="mediaobject"><img src="images/st_linecrossingdirection04.png"><div class="caption"><p>Line 1 (green), Line 2 (blue) ball is start point,
						triangle are end points. Query below.</p></div></div></div><p>
			  </p><pre class="programlisting">
SELECT ST_LineCrossingDirection(foo.line1, foo.line2) As l1_cross_l2 ,
	  ST_LineCrossingDirection(foo.line2, foo.line1) As l2_cross_l1
FROM (SELECT
	ST_GeomFromText('LINESTRING(25 169,89 114,40 70,86 43)') As line1,
	ST_GeomFromText('LINESTRING(2.99 90.16,71 74,20 140,171 154)') As line2
	) As foo;

 l1_cross_l2 | l2_cross_l1
-------------+-------------
          -2 |          2
				</pre><p>
			</p>
		</td></tr></tbody></table></div><pre class="programlisting">
SELECT s1.gid, s2.gid, ST_LineCrossingDirection(s1.the_geom, s2.the_geom)
	FROM streets s1 CROSS JOIN streets s2 ON (s1.gid != s2.gid AND s1.the_geom &amp;&amp; s2.the_geom )
WHERE ST_CrossingDirection(s1.the_geom, s2.the_geom) &gt; 0;
</pre></div><div class="refsection" title="See Also"><a name="idp75972432"></a><h2>See Also</h2><p><a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a></p></div></div><div class="refentry" title="ST_Disjoint"><div class="refentry.separator"><hr></div><a name="ST_Disjoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Disjoint — Returns TRUE if the Geometries do not "spatially
			intersect" - if they do not share any space together.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Disjoint</b>(</code>
						geometry
						<var class="pdparam">A</var>
					, 
						geometry
						<var class="pdparam">B</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp75979984"></a><h2>Description</h2><p>Overlaps, Touches, Within all imply geometries are not spatially disjoint.  If any of the aforementioned
				returns true, then the geometries are not spatially disjoint.
				Disjoint implies false for spatial intersection.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call does not use indexes</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 //s2.1.13.3
			- a.Relate(b, 'FF*FF****')</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.26</p></div><div class="refsection" title="Examples"><a name="idp75987408"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Disjoint('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
 st_disjoint
---------------
 t
(1 row)
SELECT ST_Disjoint('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry);
 st_disjoint
---------------
 f
(1 row)
		</pre></div><div class="refsection" title="See Also"><a name="idp75988688"></a><h2>See Also</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>ST_Intersects</p></div></div><div class="refentry" title="ST_Distance"><div class="refentry.separator"><hr></div><a name="ST_Distance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Distance — For geometry type Returns the 2D Cartesian distance between two geometries in
		projected units (based on spatial ref).  For geography type defaults to return minimum geodesic distance between two geographies in meters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Distance</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Distance</b>(</code>geography 
			<var class="pdparam">gg1</var>, geography 
			<var class="pdparam">gg2</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Distance</b>(</code>geography 
			<var class="pdparam">gg1</var>, geography 
			<var class="pdparam">gg2</var>, boolean 
			<var class="pdparam">use_spheroid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76003408"></a><h2>Description</h2><p>For geometry type returns the minimum 2D Cartesian distance between two geometries in
		projected units (spatial ref units). For geography type defaults to return the minimum geodesic distance between two geographies in meters.  If use_spheroid is
		false, a faster sphere calculation is used instead of a spheroid.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.23</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p><p>Availability: 1.5.0 geography support was introduced in 1.5.  Speed improvements for planar to better handle large or many vertex geometries</p><p>Enhanced: 2.1.0 improved speed for geography. See <a class="ulink" href="http://boundlessgeo.com/2012/07/making-geography-faster/" target="_top">Making Geography faster</a> for details.</p><p>Enhanced: 2.1.0 - support for curved geometries was introduced.</p><p>Enhanced: 2.2.0 - measurement on spheroid performed with GeographicLib for improved accuracy and robustness. Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</p></div><div class="refsection" title="Basic Geometry Examples"><a name="idp76012240"></a><h2>Basic Geometry Examples</h2><pre class="programlisting">
--Geometry example - units in planar degrees 4326 is WGS 84 long lat unit=degrees
SELECT ST_Distance(
		ST_GeomFromText('POINT(-72.1235 42.3521)',4326),
		ST_GeomFromText('LINESTRING(-72.1260 42.45, -72.123 42.1546)', 4326)
	);
st_distance
-----------------
0.00150567726382282

-- Geometry example - units in meters (SRID: 26986 Massachusetts state plane meters) (most accurate for Massachusetts)
SELECT ST_Distance(
			ST_Transform(ST_GeomFromText('POINT(-72.1235 42.3521)',4326),26986),
			ST_Transform(ST_GeomFromText('LINESTRING(-72.1260 42.45, -72.123 42.1546)', 4326),26986)
		);
st_distance
-----------------
123.797937878454

-- Geometry example - units in meters (SRID: 2163 US National Atlas Equal area) (least accurate)
SELECT ST_Distance(
			ST_Transform(ST_GeomFromText('POINT(-72.1235 42.3521)',4326),2163),
			ST_Transform(ST_GeomFromText('LINESTRING(-72.1260 42.45, -72.123 42.1546)', 4326),2163)
		);

st_distance
------------------
126.664256056812
</pre></div><div class="refsection" title="Geography Examples"><a name="idp76013520"></a><h2>Geography Examples</h2><pre class="programlisting">-- same as geometry example but note units in meters - use sphere for slightly faster less accurate
SELECT ST_Distance(gg1, gg2) As spheroid_dist, ST_Distance(gg1, gg2, false) As sphere_dist
FROM (SELECT
	ST_GeogFromText('SRID=4326;POINT(-72.1235 42.3521)') As gg1,
	ST_GeogFromText('SRID=4326;LINESTRING(-72.1260 42.45, -72.123 42.1546)') As gg2
	) As foo  ;

  spheroid_dist   |   sphere_dist
------------------+------------------
 123.802076746848 | 123.475736916397
</pre></div><div class="refsection" title="See Also"><a name="idp76014800"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a>, <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_MinimumClearance"><div class="refentry.separator"><hr></div><a name="ST_MinimumClearance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinimumClearance — Returns the minimum clearance of a geometry, a measure of a geometry's robustness.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_MinimumClearance</b>(</code>geometry <var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76026704"></a><h2>Description</h2><p>
			It is not uncommon to have a geometry that, while meeting the criteria for validity according to ST_IsValid (polygons)
			or ST_IsSimple (lines), would become invalid if one of the vertices moved by a slight distance, as can happen during
			conversion to text-based formats (such as WKT, KML, GML GeoJSON), or binary formats that do not use double-precision
			floating point coordinates (MapInfo TAB).
		</p><p>
			A geometry's "minimum clearance" is the smallest distance by which a vertex of the geometry could be moved to produce
			an invalid geometry.  It can be thought of as a quantitative measure of a geometry's robustness, where increasing values
			of minimum clearance indicate increasing robustness.
		</p><p>
			If a geometry has a minimum clearance of <code class="varname">e</code>, it can be said that:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
						No two distinct vertices in the geometry are separated by less than <code class="varname">e</code>.
					</p></li><li class="listitem"><p>
						No vertex is closer than <code class="varname">e</code> to a line segement of which it is not an endpoint.
					</p></li></ul></div><p>
		</p><p>
			If no minimum clearance exists for a geometry (for example, a single point, or a multipoint whose points are identical), then
			ST_MinimumClearance will return Infinity.
		</p><p>Availability: 2.3.0 - requires GEOS &gt;= 3.6.0</p></div><div class="refsection" title="Examples"><a name="idp76032592"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_MinimumClearance('POLYGON ((0 0, 1 0, 1 1, 0.5 3.2e-4, 0 0))');
 st_minimumclearance
---------------------
             0.00032
     </pre></div><div class="refsection" title="See Also"><a name="idp76033872"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a>
		</p></div></div><div class="refentry" title="ST_MinimumClearanceLine"><div class="refentry.separator"><hr></div><a name="ST_MinimumClearanceLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinimumClearanceLine — Returns the two-point LineString spanning a geometry's minimum clearance.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">Geometry <b class="fsfunc">ST_MinimumClearanceLine</b>(</code>geometry 
			<var class="pdparam">g</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76048336"></a><h2>Description</h2><p>
			Returns the two-point LineString spanning a geometry's minimum clearance.  If the geometry does not have a minimum
			clearance, <code class="varname">LINESTRING EMPTY</code> will be returned.
		</p><p>Availability: 2.3.0 - requires GEOS &gt;= 3.6.0</p></div><div class="refsection" title="Examples"><a name="idp76050256"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_MinimumClearanceLine('POLYGON ((0 0, 1 0, 1 1, 0.5 3.2e-4, 0 0))'));
st_astext
-------------------------------
LINESTRING(0.5 0.00032,0.5 0)
		  </pre></div><div class="refsection" title="See Also"><a name="idp76051536"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a>
		</p></div></div><div class="refentry" title="ST_HausdorffDistance"><div class="refentry.separator"><hr></div><a name="ST_HausdorffDistance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_HausdorffDistance — Returns the Hausdorff distance between two geometries.  Basically a measure of how similar or dissimilar 2 geometries are. Units are in the units of the spatial
		reference system of the geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_HausdorffDistance</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_HausdorffDistance</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var>, float
			<var class="pdparam">densifyFrac</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76063056"></a><h2>Description</h2><p>Implements algorithm for computing a distance metric which can be thought of as the "Discrete Hausdorff Distance".
This is the Hausdorff distance restricted to discrete points for one of the geometries. <a class="ulink" href="http://en.wikipedia.org/wiki/Hausdorff_distance" target="_top">Wikipedia article on Hausdorff distance</a>
	<a class="ulink" href="http://lin-ear-th-inking.blogspot.com/2009/01/computing-geometric-similarity.html" target="_top">Martin Davis note on how Hausdorff Distance calculation was used to prove correctness of the CascadePolygonUnion approach.</a></p><p>
When densifyFrac is specified, this function performs a segment densification before computing the discrete hausdorff distance. The densifyFrac parameter sets the fraction by which to densify each segment. Each segment will be split into a number of equal-length subsegments, whose fraction of the total length is closest to the given fraction.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
The current implementation supports only vertices as the discrete locations. This could be extended to allow an arbitrary density of points to be used.
			</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
				This algorithm is NOT equivalent to the standard Hausdorff distance. However, it computes an approximation that is correct for a large subset of useful cases.
			One important part of this subset is Linestrings that are roughly parallel to each other, and roughly equal in length.  This is a useful metric for line matching.
			</p></td></tr></table></div><p>Availability: 1.5.0 - requires GEOS &gt;= 3.2.0</p></div><div class="refsection" title="Examples"><a name="idp76067664"></a><h2>Examples</h2><p>For each building, find the parcel that best represents it. First we require the parcel intersect with the geometry.
	DISTINCT ON guarantees we get each building listed only once, the ORDER BY .. ST_HausdorffDistance gives us a preference of parcel that is most similar to the building.</p><pre class="programlisting">SELECT DISTINCT ON(buildings.gid) buildings.gid, parcels.parcel_id
   FROM buildings INNER JOIN parcels ON ST_Intersects(buildings.geom,parcels.geom)
     ORDER BY buildings.gid, ST_HausdorffDistance(buildings.geom, parcels.geom);</pre><pre class="programlisting">postgis=# SELECT ST_HausdorffDistance(
				'LINESTRING (0 0, 2 0)'::geometry,
				'MULTIPOINT (0 1, 1 0, 2 1)'::geometry);
 st_hausdorffdistance
 ----------------------
					 1
(1 row)
			</pre><pre class="programlisting">postgis=# SELECT st_hausdorffdistance('LINESTRING (130 0, 0 0, 0 150)'::geometry, 'LINESTRING (10 10, 10 150, 130 10)'::geometry, 0.5);
 st_hausdorffdistance
 ----------------------
					70
(1 row)
			</pre></div></div><div class="refentry" title="ST_MaxDistance"><div class="refentry.separator"><hr></div><a name="ST_MaxDistance"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MaxDistance — Returns the 2-dimensional largest distance between two geometries in
		projected units.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_MaxDistance</b>(</code>geometry  <var class="pdparam">g1</var>, geometry  <var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76076112"></a><h2>Description</h2><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Returns the 2-dimensional maximum distance between two geometries in
		projected units. If g1 and g2 is the same geometry the function will return the distance between
		the two vertices most far from each other in that geometry.</p></td></tr></table></div><p>Availability: 1.5.0</p></div><div class="refsection" title="Examples"><a name="idp76078288"></a><h2>Examples</h2><p>Basic furthest distance the point is to any part of the line</p><pre class="programlisting">postgis=# SELECT ST_MaxDistance('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
   st_maxdistance
-----------------
 2
(1 row)

postgis=# SELECT ST_MaxDistance('POINT(0 0)'::geometry, 'LINESTRING ( 2 2, 2 2 )'::geometry);
  st_maxdistance
------------------
 2.82842712474619
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp76080336"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a></p></div></div><div class="refentry" title="ST_DistanceSphere"><div class="refentry.separator"><hr></div><a name="ST_DistanceSphere"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DistanceSphere — Returns minimum distance in meters between two lon/lat
				geometries. Uses a spherical earth and radius derived from the spheroid
        defined by the SRID.
				Faster than ST_DistanceSpheroid <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>, but less
				accurate. PostGIS versions prior to 1.5 only implemented for points.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_DistanceSphere</b>(</code>geometry  <var class="pdparam">geomlonlatA</var>, geometry  <var class="pdparam">geomlonlatB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76088528"></a><h2>Description</h2><p>Returns minimum distance in meters between two lon/lat
				points. Uses a spherical earth and radius derived from the spheroid
        defined by the SRID.
				Faster than <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>, but less
				accurate. PostGIS Versions prior to 1.5 only implemented for points.</p><p>Availability: 1.5 - support for other geometry types besides points was introduced. Prior versions only work with points.</p><p>Changed: 2.2.0 In prior versions this used to be called ST_Distance_Sphere</p></div><div class="refsection" title="Examples"><a name="idp76090960"></a><h2>Examples</h2><pre class="programlisting">SELECT round(CAST(ST_DistanceSphere(ST_Centroid(the_geom), ST_GeomFromText('POINT(-118 38)',4326)) As numeric),2) As dist_meters,
round(CAST(ST_Distance(ST_Transform(ST_Centroid(the_geom),32611),
		ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As dist_utm11_meters,
round(CAST(ST_Distance(ST_Centroid(the_geom), ST_GeomFromText('POINT(-118 38)', 4326)) As numeric),5) As dist_degrees,
round(CAST(ST_Distance(ST_Transform(the_geom,32611),
		ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As min_dist_line_point_meters
FROM
	(SELECT ST_GeomFromText('LINESTRING(-118.584 38.374,-118.583 38.5)', 4326) As the_geom) as foo;
	 dist_meters | dist_utm11_meters | dist_degrees | min_dist_line_point_meters
	-------------+-------------------+--------------+----------------------------
		70424.47 |          70438.00 |      0.72900 |                   65871.18

	</pre></div><div class="refsection" title="See Also"><a name="idp76092496"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a></p></div></div><div class="refentry" title="ST_DistanceSpheroid"><div class="refentry.separator"><hr></div><a name="ST_Distance_Spheroid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DistanceSpheroid — Returns the minimum distance between two lon/lat geometries given a
			particular spheroid.
			PostGIS  versions prior to 1.5 only support points.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_DistanceSpheroid</b>(</code>geometry  <var class="pdparam">geomlonlatA</var>, geometry  <var class="pdparam">geomlonlatB</var>, spheroid  <var class="pdparam">measurement_spheroid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76100944"></a><h2>Description</h2><p>Returns minimum distance in meters between two lon/lat
				geometries given a particular spheroid. See the explanation of spheroids given for
			<a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>. PostGIS version prior to 1.5 only support points.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function currently does not look at the SRID of a geometry and will always assume its represented in the coordinates of the passed in spheroid. Prior versions of this function only support points.</p></td></tr></table></div><p>Availability: 1.5 - support for other geometry types besides points was introduced. Prior versions only work with points.</p><p>Changed: 2.2.0 In prior versions this used to be called ST_Distance_Spheroid</p></div><div class="refsection" title="Examples"><a name="idp76104272"></a><h2>Examples</h2><pre class="programlisting">SELECT round(CAST(
		ST_DistanceSpheroid(ST_Centroid(the_geom), ST_GeomFromText('POINT(-118 38)',4326), 'SPHEROID["WGS 84",6378137,298.257223563]')
			As numeric),2) As dist_meters_spheroid,
		round(CAST(ST_DistanceSphere(ST_Centroid(the_geom), ST_GeomFromText('POINT(-118 38)',4326)) As numeric),2) As dist_meters_sphere,
round(CAST(ST_Distance(ST_Transform(ST_Centroid(the_geom),32611),
		ST_Transform(ST_GeomFromText('POINT(-118 38)', 4326),32611)) As numeric),2) As dist_utm11_meters
FROM
	(SELECT ST_GeomFromText('LINESTRING(-118.584 38.374,-118.583 38.5)', 4326) As the_geom) as foo;
 dist_meters_spheroid | dist_meters_sphere | dist_utm11_meters
----------------------+--------------------+-------------------
			 70454.92 |           70424.47 |          70438.00

	</pre></div><div class="refsection" title="See Also"><a name="idp76105808"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a></p></div></div><div class="refentry" title="ST_DFullyWithin"><div class="refentry.separator"><hr></div><a name="ST_DFullyWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DFullyWithin — Returns true if all of the geometries are within the specified
		distance of one another</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_DFullyWithin</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var>, double precision 
			<var class="pdparam">distance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76114256"></a><h2>Description</h2><p>Returns true if the geometries is fully within the specified distance
		of one another. The distance is specified in units defined by the
		spatial reference system of the geometries.  For this function to make
		sense, the source geometries must both be of the same coordinate projection,
		having the same SRID.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
		  comparison that will make use of any indexes that are available on
		  the geometries.</p></td></tr></table></div><p>Availability: 1.5.0</p></div><div class="refsection" title="Examples"><a name="idp76116560"></a><h2>Examples</h2><pre class="programlisting">postgis=# SELECT ST_DFullyWithin(geom_a, geom_b, 10) as DFullyWithin10, ST_DWithin(geom_a, geom_b, 10) as DWithin10, ST_DFullyWithin(geom_a, geom_b, 20) as DFullyWithin20 from
		(select ST_GeomFromText('POINT(1 1)') as geom_a,ST_GeomFromText('LINESTRING(1 5, 2 7, 1 9, 14 12)') as geom_b) t1;

-----------------
 DFullyWithin10 | DWithin10 | DFullyWithin20 |
---------------+----------+---------------+
 f             | t        | t             |  </pre></div><div class="refsection" title="See Also"><a name="idp76117840"></a><h2>See Also</h2><p><a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a></p></div></div><div class="refentry" title="ST_DWithin"><div class="refentry.separator"><hr></div><a name="ST_DWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DWithin — Returns true if the geometries are within the specified
		distance of one another. For geometry units are in those of spatial reference and For geography units are in meters and measurement is
		defaulted to use_spheroid=true (measure around spheroid), for faster check, use_spheroid=false to measure along sphere.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_DWithin</b>(</code>geometry 
				<var class="pdparam">g1</var>, geometry 
				<var class="pdparam">g2</var>, double precision 
				<var class="pdparam">distance_of_srid</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_DWithin</b>(</code>geography 
				<var class="pdparam">gg1</var>, geography 
				<var class="pdparam">gg2</var>, double precision 
				<var class="pdparam">distance_meters</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_DWithin</b>(</code>geography 
				<var class="pdparam">gg1</var>, geography 
				<var class="pdparam">gg2</var>, double precision 
				<var class="pdparam">distance_meters</var>, boolean 
				<var class="pdparam">use_spheroid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76135888"></a><h2>Description</h2><p>Returns true if the geometries are within the specified distance
		of one another.</p><p>For Geometries: The distance is specified in units defined by the
		spatial reference system of the geometries.  For this function to make
		sense, the source geometries must both be of the same coordinate projection,
		having the same SRID.</p><p>For geography units are in meters and measurement is
		defaulted to use_spheroid=true, for faster check, use_spheroid=false to measure along sphere.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
		  comparison that will make use of any indexes that are available on
		  the geometries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3, ST_Expand was commonly used in conjunction with &amp;&amp; and ST_Distance to
		  achieve the same effect and in pre-1.3.4 this function was basically short-hand for that construct.
		  From 1.3.4, ST_DWithin uses a more short-circuit distance function which should make it more efficient
		  than prior versions for larger buffer regions.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Use ST_3DDWithin if you have 3D geometries.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p>Availability: 1.5.0 support for geography was introduced</p><p>Enhanced: 2.1.0 improved speed for geography. See <a class="ulink" href="http://blog.opengeo.org/2012/07/12/making-geography-faster/" target="_top">Making Geography faster</a> for details.</p><p>Enhanced: 2.1.0 support for curved geometries was introduced.</p></div><div class="refsection" title="Examples"><a name="idp76143184"></a><h2>Examples</h2><pre class="programlisting">
--Find the nearest hospital to each school
--that is within 3000 units of the school.
-- We do an ST_DWithin search to utilize indexes to limit our search list
-- that the non-indexable ST_Distance needs to process
--If the units of the spatial reference is meters then units would be meters
SELECT DISTINCT ON (s.gid) s.gid, s.school_name, s.the_geom, h.hospital_name
	FROM schools s
		LEFT JOIN hospitals h ON ST_DWithin(s.the_geom, h.the_geom, 3000)
	ORDER BY s.gid, ST_Distance(s.the_geom, h.the_geom);

--The schools with no close hospitals
--Find all schools with no hospital within 3000 units
--away from the school.  Units is in units of spatial ref (e.g. meters, feet, degrees)
SELECT s.gid, s.school_name
	FROM schools s
		LEFT JOIN hospitals h ON ST_DWithin(s.the_geom, h.the_geom, 3000)
	WHERE h.gid IS NULL;
			  </pre></div><div class="refsection" title="See Also"><a name="idp76144464"></a><h2>See Also</h2><p><a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_Expand" title="ST_Expand">ST_Expand</a></p></div></div><div class="refentry" title="ST_Equals"><div class="refentry.separator"><hr></div><a name="ST_Equals"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Equals — Returns true if the given geometries represent the same geometry. Directionality
			is ignored.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Equals</b>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76151888"></a><h2>Description</h2><p>Returns TRUE if the given Geometries are "spatially
			equal". Use this for a 'better' answer than '='.
			Note by spatially equal we mean ST_Within(A,B) = true and ST_Within(B,A) = true and
			also mean ordering of points can be different but
			represent the same geometry structure.  To verify the order of points is consistent, use
			ST_OrderingEquals (it must be noted ST_OrderingEquals is a little more stringent than simply verifying order of
			points are the same).</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function will return false if either geometry is invalid even if they are binary equal.</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a GEOMETRYCOLLECTION as an argument.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.24</p></div><div class="refsection" title="Examples"><a name="idp76157776"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Equals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
		ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_equals
-----------
 t
(1 row)

SELECT ST_Equals(ST_Reverse(ST_GeomFromText('LINESTRING(0 0, 10 10)')),
		ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_equals
-----------
 t
(1 row)
</pre></div><div class="refsection" title="See Also"><a name="idp76159056"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>, <a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_GeometricMedian"><div class="refentry.separator"><hr></div><a name="ST_GeometricMedian"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>
			  ST_GeometricMedian
		   — 
			Returns the geometric median of a MultiPoint.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry
				<b class="fsfunc">
					ST_GeometricMedian
				</b>
			(</code>
				
					geometry
				
				<var class="pdparam">
					g
				</var>
			, 
				
					float8
				
				<var class="pdparam">
					tolerance
				</var>
			, 
				
					int
				
				<var class="pdparam">
					max_iter
				</var>
			, 
				
					boolean
				
				<var class="pdparam">
					fail_if_not_converged
				</var>
			<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76203344"></a><h2>Description</h2><p>
		  Computes the approximate geometric median of a MultiPoint geometry
		  using the Weiszfeld algorithm.  The geometric median provides a
		  centrality measure that is less sensitive to outlier points than
		  the centroid.

		  The algorithm will iterate until the distance change between
		  successive iterations is less than the supplied <code class="varname">tolerance</code>
		  parameter.  If this condition has not been met after <code class="varname">max_iterations</code>
		  iterations, the function will produce an error and exit, unless <code class="varname">fail_if_not_converged</code>
		  is set to false.

		  If a tolerance value is not provided, a default tolerance value
		  will be calculated based on the extent of the input geometry.
	  </p><p>Availability: 2.3.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp76207440"></a><h2>Examples</h2><p>
		  </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_geometricmedian01.png"><div class="caption"><p>
						Comparison of the centroid (turquoise point) and geometric
						median (red point) of a four-point MultiPoint (yellow points).
						</p></div></div></div><p>
	  </p><pre class="programlisting">
WITH test AS (
SELECT 'MULTIPOINT((0 0), (1 1), (2 2), (200 200))'::geometry geom)
SELECT
  ST_AsText(ST_Centroid(geom)) centroid,
  ST_AsText(ST_GeometricMedian(geom)) median
FROM test;
      centroid      |                 median
--------------------+----------------------------------------
 POINT(50.75 50.75) | POINT(1.9761550281255 1.9761550281255)
(1 row)
	  </pre></div><div class="refsection" title="See Also"><a name="idp76211664"></a><h2>See Also</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a></p></div></div><div class="refentry" title="ST_HasArc"><div class="refentry.separator"><hr></div><a name="ST_HasArc"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_HasArc — Returns true if a geometry or geometry collection contains a circular string</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_HasArc</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76217552"></a><h2>Description</h2><p>Returns true if a geometry or geometry collection contains a circular string</p><p>Availability: 1.2.3?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp76221776"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_HasArc(ST_Collect('LINESTRING(1 2, 3 4, 5 6)', 'CIRCULARSTRING(1 1, 2 3, 4 5, 6 7, 5 6)'));
		st_hasarc
		--------
		t
		</pre></div><div class="refsection" title="See Also"><a name="idp76223312"></a><h2>See Also</h2><p><a class="xref" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a>, <a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" title="ST_Intersects"><div class="refentry.separator"><hr></div><a name="ST_Intersects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Intersects — Returns TRUE if the Geometries/Geography "spatially
			intersect in 2D" - (share any portion of space) and FALSE if they don't (they are Disjoint).
			For geography -- tolerance is 0.00001 meters (so any points that close are considered to intersect)
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						geometry
						<var class="pdparam">geomA</var>
					, 
						geometry
						<var class="pdparam">geomB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						geography
						<var class="pdparam">geogA</var>
					, 
						geography
						<var class="pdparam">geogB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76234960"></a><h2>Description</h2><p>If a geometry or geography shares any portion of space then they intersect.
			For geography -- tolerance is 0.00001 meters (so any points that are close are considered to intersect)</p><p>Overlaps, Touches, Within all imply spatial intersection.  If any of the aforementioned
				returns true, then the geometries also spatially intersect.
				Disjoint implies false for spatial intersection.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument for geometry version.  The geography
			version supports GEOMETRYCOLLECTION since its a thin wrapper around distance implementation.</p></td></tr></table></div><p>Enhanced: 2.3.0 Enhancement to PIP short-circuit extended to support MultiPoints with few points. Prior versions only supported point in polygon.</p><p>Performed by the GEOS module (for geometry), geography is native</p><p>Availability: 1.5 support for geography was introduced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
			  comparison that will make use of any indexes that are available on the
			  geometries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For geography, this function has a distance tolerance of about 0.00001 meters and uses the sphere rather
				than spheroid calculation.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 //s2.1.13.3
			  - ST_Intersects(g1, g2 ) --&gt; Not (ST_Disjoint(g1, g2 ))
			</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.27</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p></div><div class="refsection" title="Geometry Examples"><a name="idp76245840"></a><h2>Geometry Examples</h2><pre class="programlisting">SELECT ST_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry);
 st_intersects
---------------
 f
(1 row)
SELECT ST_Intersects('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry);
 st_intersects
---------------
 t
(1 row)
		</pre></div><div class="refsection" title="Geography Examples"><a name="idp76247120"></a><h2>Geography Examples</h2><pre class="programlisting">SELECT ST_Intersects(
		ST_GeographyFromText('SRID=4326;LINESTRING(-43.23456 72.4567,-43.23456 72.4568)'),
		ST_GeographyFromText('SRID=4326;POINT(-43.23456 72.4567772)')
		);

 st_intersects
---------------
t
</pre></div><div class="refsection" title="See Also"><a name="idp76248400"></a><h2>See Also</h2><p> <a class="xref" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a></p></div></div><div class="refentry" title="ST_Length"><div class="refentry.separator"><hr></div><a name="ST_Length"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Length — Returns the 2D length of the geometry if it is a LineString or MultiLineString. geometry are in units of spatial reference and geography are in meters (default spheroid)</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Length</b>(</code>geometry <var class="pdparam">a_2dlinestring</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Length</b>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76257872"></a><h2>Description</h2><p>For geometry: Returns the 2D Cartesian length of the geometry if it is a LineString, MultiLineString, ST_Curve, ST_MultiCurve.  0 is returned for
				areal geometries.  For areal geometries use <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>. For geometry types, units for length measures are specified by the
				spatial reference system of the geometry.</p><p>For geography types, the calculations are performed using the inverse geodesic problem, where length units are in meters.
				If PostGIS is compiled with PROJ version 4.8.0 or later, the spheroid is specified by the SRID, otherwise it is exclusive to WGS84.
				If <code class="varname">use_spheroid=false</code>, then calculations will approximate a sphere instead of a spheroid.</p><p>Currently for geometry this is an alias for ST_Length2D, but this may change to support higher dimensions.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Changed: 2.0.0 Breaking change -- in prior versions applying this to a MULTI/POLYGON of type geography would give you the perimeter of the POLYGON/MULTIPOLYGON.  In 2.0.0
			this was changed to return 0 to be in line with geometry behavior.  Please use ST_Perimeter if you want the perimeter of a polygon</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For geography measurement defaults spheroid measurement.  To use the faster less accurate sphere use ST_Length(gg,false);</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.5.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.2, 9.3.4</p><p>Availability: 1.5.0 geography support was introduced in 1.5.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p></div><div class="refsection" title="Geometry Examples"><a name="idp76270928"></a><h2>Geometry Examples</h2><p>Return length in feet for line string. Note this is in feet because EPSG:2249 is
				Massachusetts State Plane Feet</p><pre class="programlisting">
SELECT ST_Length(ST_GeomFromText('LINESTRING(743238 2967416,743238 2967450,743265 2967450,
743265.625 2967416,743238 2967416)',2249));
st_length
---------
 122.630744000095


--Transforming WGS 84 LineString to Massachusetts state plane meters
SELECT ST_Length(
	ST_Transform(
		ST_GeomFromEWKT('SRID=4326;LINESTRING(-72.1260 42.45, -72.1240 42.45666, -72.123 42.1546)'),
		26986
	)
);
st_length
---------
34309.4563576191
			</pre></div><div class="refsection" title="Geography Examples"><a name="idp76272848"></a><h2>Geography Examples</h2><p>Return length of WGS 84 geography line</p><pre class="programlisting">
			-- default calculation is using a sphere rather than spheroid
SELECT ST_Length(the_geog) As length_spheroid,  ST_Length(the_geog,false) As length_sphere
FROM (SELECT ST_GeographyFromText(
'SRID=4326;LINESTRING(-72.1260 42.45, -72.1240 42.45666, -72.123 42.1546)') As the_geog)
 As foo;
 length_spheroid  |  length_sphere
------------------+------------------
 34310.5703627288 | 34346.2060960742
			</pre></div><div class="refsection" title="See Also"><a name="idp76274512"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>, <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_Length2D"><div class="refentry.separator"><hr></div><a name="ST_Length2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Length2D — Returns the 2-dimensional length of the geometry if it is a
				linestring or multi-linestring. This is an alias for <code class="varname">ST_Length</code></p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Length2D</b>(</code>geometry  <var class="pdparam">a_2dlinestring</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76282448"></a><h2>Description</h2><p>Returns the 2-dimensional length of the geometry if it is a
				linestring or multi-linestring. This is an alias for <code class="varname">ST_Length</code></p></div><div class="refsection" title="See Also"><a name="idp76284240"></a><h2>See Also</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a></p></div></div><div class="refentry" title="ST_3DLength"><div class="refentry.separator"><hr></div><a name="ST_3DLength"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DLength — Returns the 3-dimensional or 2-dimensional length of the geometry if it is a
			linestring or multi-linestring. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_3DLength</b>(</code>geometry  <var class="pdparam">a_3dlinestring</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76290768"></a><h2>Description</h2><p>Returns the 3-dimensional or 2-dimensional length of the geometry if it is a
			linestring or multi-linestring. For 2-d lines it will just return the 2-d length (same as ST_Length and ST_Length2D)</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Changed: 2.0.0 In prior versions this used to be called ST_Length3D</p></div><div class="refsection" title="Examples"><a name="idp76293712"></a><h2>Examples</h2><p>Return length in feet for a 3D cable. Note this is in feet because EPSG:2249 is
				Massachusetts State Plane Feet</p><pre class="programlisting">
SELECT ST_3DLength(ST_GeomFromText('LINESTRING(743238 2967416 1,743238 2967450 1,743265 2967450 3,
743265.625 2967416 3,743238 2967416 3)',2249));
ST_3DLength
-----------
122.704716741457
		</pre></div><div class="refsection" title="See Also"><a name="idp76295760"></a><h2>See Also</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a></p></div></div><div class="refentry" title="ST_LengthSpheroid"><div class="refentry.separator"><hr></div><a name="ST_Length_Spheroid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LengthSpheroid — Calculates the 2D or 3D length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_LengthSpheroid</b>(</code>geometry  <var class="pdparam">a_geometry</var>, spheroid  <var class="pdparam">a_spheroid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76307280"></a><h2>Description</h2><p>Calculates the length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.
			The ellipsoid is a separate database type and can be constructed
			as follows:</p><div class="literallayout"><p>SPHEROID[&lt;NAME&gt;,&lt;SEMI-MAJOR AXIS&gt;,&lt;INVERSE FLATTENING&gt;]</p></div><div class="literallayout"><p>SPHEROID["GRS_1980",6378137,298.257222101]</p></div><p>Availability: 1.2.2</p><p>Changed: 2.2.0 In prior versions this used to be called ST_Length_Spheroid and used to have a ST_3DLength_Spheroid alias</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp76312144"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_LengthSpheroid( geometry_column,
			  'SPHEROID["GRS_1980",6378137,298.257222101]' )
			  FROM geometry_table;

SELECT ST_LengthSpheroid( the_geom, sph_m ) As tot_len,
ST_LengthSpheroid(ST_GeometryN(the_geom,1), sph_m) As len_line1,
ST_LengthSpheroid(ST_GeometryN(the_geom,2), sph_m) As len_line2
			  FROM (SELECT ST_GeomFromText('MULTILINESTRING((-118.584 38.374,-118.583 38.5),
	(-71.05957 42.3589 , -71.061 43))') As the_geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;
	tot_len      |    len_line1     |    len_line2
------------------+------------------+------------------
 85204.5207562955 | 13986.8725229309 | 71217.6482333646

 --3D
SELECT ST_LengthSpheroid( the_geom, sph_m ) As tot_len,
ST_LengthSpheroid(ST_GeometryN(the_geom,1), sph_m) As len_line1,
ST_LengthSpheroid(ST_GeometryN(the_geom,2), sph_m) As len_line2
			  FROM (SELECT ST_GeomFromEWKT('MULTILINESTRING((-118.584 38.374 20,-118.583 38.5 30),
	(-71.05957 42.3589 75, -71.061 43 90))') As the_geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;

	 tot_len      |    len_line1    |    len_line2
------------------+-----------------+------------------
 85204.5259107402 | 13986.876097711 | 71217.6498130292

</pre></div><div class="refsection" title="See Also"><a name="idp76313680"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a></p></div></div><div class="refentry" title="ST_Length2D_Spheroid"><div class="refentry.separator"><hr></div><a name="ST_Length2D_Spheroid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Length2D_Spheroid — Calculates the 2D length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.  </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Length2D_Spheroid</b>(</code>geometry  <var class="pdparam">a_geometry</var>, spheroid  <var class="pdparam">a_spheroid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76329296"></a><h2>Description</h2><p>Calculates the 2D length/perimeter of a geometry on an ellipsoid. This
			is useful if the coordinates of the geometry are in
			longitude/latitude and a length is desired without reprojection.
			The ellipsoid is a separate database type and can be constructed
			as follows:</p><div class="literallayout"><p>SPHEROID[&lt;NAME&gt;,&lt;SEMI-MAJOR AXIS&gt;,&lt;INVERSE FLATTENING&gt;]</p></div><div class="literallayout"><p>SPHEROID["GRS_1980",6378137,298.257222101]</p></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is much like <a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a> except it will ignore the Z ordinate in calculations.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp76332624"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Length2D_Spheroid( geometry_column,
			  'SPHEROID["GRS_1980",6378137,298.257222101]' )
			  FROM geometry_table;

SELECT ST_Length2D_Spheroid( the_geom, sph_m ) As tot_len,
ST_Length2D_Spheroid(ST_GeometryN(the_geom,1), sph_m) As len_line1,
ST_Length2D_Spheroid(ST_GeometryN(the_geom,2), sph_m) As len_line2
			  FROM (SELECT ST_GeomFromText('MULTILINESTRING((-118.584 38.374,-118.583 38.5),
	(-71.05957 42.3589 , -71.061 43))') As the_geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;
	tot_len      |    len_line1     |    len_line2
------------------+------------------+------------------
 85204.5207562955 | 13986.8725229309 | 71217.6482333646

 --3D Observe same answer
SELECT ST_Length2D_Spheroid( the_geom, sph_m ) As tot_len,
ST_Length2D_Spheroid(ST_GeometryN(the_geom,1), sph_m) As len_line1,
ST_Length2D_Spheroid(ST_GeometryN(the_geom,2), sph_m) As len_line2
			  FROM (SELECT ST_GeomFromEWKT('MULTILINESTRING((-118.584 38.374 20,-118.583 38.5 30),
	(-71.05957 42.3589 75, -71.061 43 90))') As the_geom,
CAST('SPHEROID["GRS_1980",6378137,298.257222101]' As spheroid) As sph_m)  as foo;

	tot_len      |    len_line1     |    len_line2
------------------+------------------+------------------
 85204.5207562955 | 13986.8725229309 | 71217.6482333646

</pre></div><div class="refsection" title="See Also"><a name="idp76334288"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>, <a class="xref" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a></p></div></div><div class="refentry" title="ST_LongestLine"><div class="refentry.separator"><hr></div><a name="ST_LongestLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LongestLine — Returns the 2-dimensional longest line points of two geometries.
		The function will only return the first longest line if more than one, that the function finds.
		The line returned will always start in g1 and end in g2.
		The length of the line this function returns will always be the same as st_maxdistance returns for g1 and g2.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LongestLine</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76341584"></a><h2>Description</h2><p>Returns the 2-dimensional longest line between the points of two geometries.
		</p><p>Availability: 1.5.0</p></div><div class="refsection" title="Examples"><a name="idp76343248"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline01.png"><div class="caption"><p>Longest line between point and line</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
	ST_LongestLine('POINT(100 100)'::geometry,
		'LINESTRING (20 80, 98 190, 110 180, 50 75 )'::geometry)
	) As lline;


   lline
-----------------
LINESTRING(100 100,98 190)
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline02.png"><div class="caption"><p>longest line between polygon and polygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
	ST_LongestLine(
		ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		)
	) As llinewkt;

   lline
-----------------
LINESTRING(20 40,121.111404660392 186.629392246051)
				</pre><p>
						</p></td></tr></tbody></table></div><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_longestline03.png"><div class="caption"><p>longest straight distance to travel from one part of an elegant city to the other
								Note the max distance = to the length of the line.</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_LongestLine(c.the_geom, c.the_geom)) As llinewkt,
	ST_MaxDistance(c.the_geom,c.the_geom) As max_dist,
	ST_Length(ST_LongestLine(c.the_geom, c.the_geom)) As lenll
FROM (SELECT ST_BuildArea(ST_Collect(the_geom)) As the_geom
	FROM (SELECT ST_Translate(ST_SnapToGrid(ST_Buffer(ST_Point(50 ,generate_series(50,190, 50)
			),40, 'quad_segs=2'),1), x, 0)  As the_geom
			FROM generate_series(1,100,50) As x)  AS foo
) As c;

          llinewkt          |     max_dist     |      lenll
---------------------------+------------------+------------------
 LINESTRING(23 22,129 178) | 188.605408193933 | 188.605408193933
				</pre><p>
						</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp76373072"></a><h2>See Also</h2><p><a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>, <a class="xref" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a></p></div></div><div class="refentry" title="ST_OrderingEquals"><div class="refentry.separator"><hr></div><a name="ST_OrderingEquals"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_OrderingEquals — Returns true if the given geometries represent the same geometry
		and points are in the same directional order.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_OrderingEquals</b>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76381008"></a><h2>Description</h2><p>ST_OrderingEquals compares two geometries and returns t (TRUE) if the
		  geometries are equal and the coordinates are in the same order;
		  otherwise it returns f (FALSE).</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function is implemented as per the ArcSDE SQL
		specification rather than SQL-MM.
		http://edndoc.esri.com/arcsde/9.1/sql_api/sqlapi3.htm#ST_OrderingEquals</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.43</p></div><div class="refsection" title="Examples"><a name="idp76384464"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_OrderingEquals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
		ST_GeomFromText('LINESTRING(0 0, 5 5, 10 10)'));
 st_orderingequals
-----------
 f
(1 row)

SELECT ST_OrderingEquals(ST_GeomFromText('LINESTRING(0 0, 10 10)'),
		ST_GeomFromText('LINESTRING(0 0, 0 0, 10 10)'));
 st_orderingequals
-----------
 t
(1 row)

SELECT ST_OrderingEquals(ST_Reverse(ST_GeomFromText('LINESTRING(0 0, 10 10)')),
		ST_GeomFromText('LINESTRING(0 0, 0 0, 10 10)'));
 st_orderingequals
-----------
 f
(1 row)
</pre></div><div class="refsection" title="See Also"><a name="idp76385744"></a><h2>See Also</h2><p><a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a></p></div></div><div class="refentry" title="ST_Overlaps"><div class="refentry.separator"><hr></div><a name="ST_Overlaps"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Overlaps — Returns TRUE if the Geometries share space, are of the same dimension, but are not completely contained by each other.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Overlaps</b>(</code>geometry  <var class="pdparam">A</var>, geometry  <var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76393296"></a><h2>Description</h2><p>Returns TRUE if the Geometries "spatially
			overlap".  By that we mean they intersect, but one does not completely contain another. </p><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a GeometryCollection as an argument</p></td></tr></table></div><p>This function call will automatically include a bounding box
		comparison that will make use of any indexes that are available on
		the geometries. To avoid index use, use the function
		_ST_Overlaps.</p><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 // s2.1.13.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.32</p></div><div class="refsection" title="Examples"><a name="idp76399312"></a><h2>Examples</h2><p>The following illustrations all return <code class="varname">TRUE</code>.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps01.png"><div class="caption"><p><code class="varname">MULTIPOINT</code> / <code class="varname">MULTIPOINT</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps02.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_overlaps03.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">--a point on a line is contained by the line and is of a lower dimension, and therefore does not overlap the line
			nor crosses

SELECT ST_Overlaps(a,b) As a_overlap_b,
	ST_Crosses(a,b) As a_crosses_b,
		ST_Intersects(a, b) As a_intersects_b, ST_Contains(b,a) As b_contains_a
FROM (SELECT ST_GeomFromText('POINT(1 0.5)') As a, ST_GeomFromText('LINESTRING(1 0, 1 1, 3 5)')  As b)
	As foo

a_overlap_b | a_crosses_b | a_intersects_b | b_contains_a
------------+-------------+----------------+--------------
f           | f           | t              | t

--a line that is partly contained by circle, but not fully is defined as intersecting and crossing,
-- but since of different dimension it does not overlap
SELECT ST_Overlaps(a,b) As a_overlap_b, ST_Crosses(a,b) As a_crosses_b,
	ST_Intersects(a, b) As a_intersects_b,
	ST_Contains(a,b) As a_contains_b
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 0.5)'), 3)  As a, ST_GeomFromText('LINESTRING(1 0, 1 1, 3 5)')  As b)
	As foo;

 a_overlap_b | a_crosses_b | a_intersects_b | a_contains_b
-------------+-------------+----------------+--------------
 f           | t           | t              | f

 -- a 2-dimensional bent hot dog (aka buffered line string) that intersects a circle,
 --	but is not fully contained by the circle is defined as overlapping since they are of the same dimension,
--	but it does not cross, because the intersection of the 2 is of the same dimension
--	as the maximum dimension of the 2

SELECT ST_Overlaps(a,b) As a_overlap_b, ST_Crosses(a,b) As a_crosses_b, ST_Intersects(a, b) As a_intersects_b,
ST_Contains(b,a) As b_contains_a,
ST_Dimension(a) As dim_a, ST_Dimension(b) as dim_b, ST_Dimension(ST_Intersection(a,b)) As dima_intersection_b
FROM (SELECT ST_Buffer(ST_GeomFromText('POINT(1 0.5)'), 3)  As a,
	ST_Buffer(ST_GeomFromText('LINESTRING(1 0, 1 1, 3 5)'),0.5)  As b)
	As foo;

 a_overlap_b | a_crosses_b | a_intersects_b | b_contains_a | dim_a | dim_b | dima_intersection_b
-------------+-------------+----------------+--------------+-------+-------+---------------------
 t           | f           | t              | f            |     2 |     2 |              2
</pre></div><div class="refsection" title="See Also"><a name="idp76411984"></a><h2>See Also</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" title="ST_Perimeter"><div class="refentry.separator"><hr></div><a name="ST_Perimeter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Perimeter — Return the length measurement of the boundary of an ST_Surface
		  or ST_MultiSurface geometry or geography. (Polygon, MultiPolygon).  geometry measurement is in units of spatial reference and geography is in meters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Perimeter</b>(</code>geometry <var class="pdparam">g1</var><code>)</code>;</p><p><code class="funcdef">float <b class="fsfunc">ST_Perimeter</b>(</code>geography <var class="pdparam">geog</var>, boolean <var class="pdparam">use_spheroid=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76422096"></a><h2>Description</h2><p>Returns the 2D perimeter of the geometry/geography if it is a ST_Surface, ST_MultiSurface (Polygon, MultiPolygon).  0 is returned for
				non-areal geometries.  For linear geometries use <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>.  For geometry types, units for perimeter measures are specified by the
				spatial reference system of the geometry.</p><p>For geography types, the calculations are performed using the inverse geodesic problem, where perimeter units are in meters.
				If PostGIS is compiled with PROJ version 4.8.0 or later, the spheroid is specified by the SRID, otherwise it is exclusive to WGS84.
				If <code class="varname">use_spheroid=false</code>, then calculations will approximate a sphere instead of a spheroid.</p><p>Currently this is an alias for ST_Perimeter2D, but this may change to support higher dimensions.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.5.1</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.1.3, 9.5.4</p><p>Availability 2.0.0: Support for geography was introduced</p></div><div class="refsection" title="Examples: Geometry"><a name="idp76432592"></a><h2>Examples: Geometry</h2><p>Return perimeter in feet for Polygon and MultiPolygon. Note this is in feet because EPSG:2249 is
				Massachusetts State Plane Feet</p><pre class="programlisting">
SELECT ST_Perimeter(ST_GeomFromText('POLYGON((743238 2967416,743238 2967450,743265 2967450,
743265.625 2967416,743238 2967416))', 2249));
st_perimeter
---------
 122.630744000095
(1 row)

SELECT ST_Perimeter(ST_GeomFromText('MULTIPOLYGON(((763104.471273676 2949418.44119003,
763104.477769673 2949418.42538203,
763104.189609677 2949418.22343004,763104.471273676 2949418.44119003)),
((763104.471273676 2949418.44119003,763095.804579742 2949436.33850239,
763086.132105649 2949451.46730207,763078.452329651 2949462.11549407,
763075.354136904 2949466.17407812,763064.362142565 2949477.64291974,
763059.953961626 2949481.28983009,762994.637609571 2949532.04103014,
762990.568508415 2949535.06640477,762986.710889563 2949539.61421415,
763117.237897679 2949709.50493431,763235.236617789 2949617.95619822,
763287.718121842 2949562.20592617,763111.553321674 2949423.91664605,
763104.471273676 2949418.44119003)))', 2249));
st_perimeter
---------
 845.227713366825
(1 row)
			</pre></div><div class="refsection" title="Examples: Geography"><a name="idp76434256"></a><h2>Examples: Geography</h2><p>Return perimeter in meters and feet for Polygon and MultiPolygon. Note this is geography (WGS 84 long lat)</p><pre class="programlisting">
SELECT  ST_Perimeter(geog) As per_meters, ST_Perimeter(geog)/0.3048 As per_ft
FROM ST_GeogFromText('POLYGON((-71.1776848522251 42.3902896512902,-71.1776843766326 42.3903829478009,
-71.1775844305465 42.3903826677917,-71.1775825927231 42.3902893647987,-71.1776848522251 42.3902896512902))') As geog;

   per_meters    |      per_ft
-----------------+------------------
37.3790462565251 | 122.634666195949


-- MultiPolygon example --
SELECT  ST_Perimeter(geog) As per_meters, ST_Perimeter(geog,false) As per_sphere_meters,  ST_Perimeter(geog)/0.3048 As per_ft
FROM ST_GeogFromText('MULTIPOLYGON(((-71.1044543107478 42.340674480411,-71.1044542869917 42.3406744369506,
-71.1044553562977 42.340673886454,-71.1044543107478 42.340674480411)),
((-71.1044543107478 42.340674480411,-71.1044860600303 42.3407237015564,-71.1045215770124 42.3407653385914,
-71.1045498002983 42.3407946553165,-71.1045611902745 42.3408058316308,-71.1046016507427 42.340837442371,
-71.104617893173 42.3408475056957,-71.1048586153981 42.3409875993595,-71.1048736143677 42.3409959528211,
-71.1048878050242 42.3410084812078,-71.1044020965803 42.3414730072048,
-71.1039672113619 42.3412202916693,-71.1037740497748 42.3410666421308,
-71.1044280218456 42.3406894151355,-71.1044543107478 42.340674480411)))') As geog;

    per_meters    | per_sphere_meters |      per_ft
------------------+-------------------+------------------
 257.634283683311 |  257.412311446337 | 845.256836231335
			</pre></div><div class="refsection" title="See Also"><a name="idp76440144"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a></p></div></div><div class="refentry" title="ST_Perimeter2D"><div class="refentry.separator"><hr></div><a name="ST_Perimeter2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Perimeter2D — Returns the 2-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon.  This is currently an alias for ST_Perimeter.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Perimeter2D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76446800"></a><h2>Description</h2><p>Returns the 2-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p> This is currently an alias for ST_Perimeter. In future versions ST_Perimeter may return the highest dimension perimeter for a geometry.  This is still under consideration</p></td></tr></table></div></div><div class="refsection" title="See Also"><a name="idp76449360"></a><h2>See Also</h2><p><a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a></p></div></div><div class="refentry" title="ST_3DPerimeter"><div class="refentry.separator"><hr></div><a name="ST_3DPerimeter"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DPerimeter — Returns the 3-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_3DPerimeter</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76455248"></a><h2>Description</h2><p>Returns the 3-dimensional perimeter of the geometry, if it
			is a polygon or multi-polygon. If the geometry is 2-dimensional, then the 2-dimensional perimeter is returned.  </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Changed: 2.0.0 In prior versions this used to be called ST_Perimeter3D</p></div><div class="refsection" title="Examples"><a name="idp76458320"></a><h2>Examples</h2><p>Perimeter of a slightly elevated polygon in the air in Massachusetts state plane feet</p><pre class="programlisting">SELECT ST_3DPerimeter(the_geom), ST_Perimeter2d(the_geom), ST_Perimeter(the_geom) FROM
			(SELECT ST_GeomFromEWKT('SRID=2249;POLYGON((743238 2967416 2,743238 2967450 1,
743265.625 2967416 1,743238 2967416 2))') As the_geom) As foo;

  ST_3DPerimeter  |  st_perimeter2d  |   st_perimeter
------------------+------------------+------------------
 105.465793597674 | 105.432997272188 | 105.432997272188

</pre></div><div class="refsection" title="See Also"><a name="idp76460240"></a><h2>See Also</h2><p><a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>, <a class="xref" href="#ST_Perimeter2D" title="ST_Perimeter2D">ST_Perimeter2D</a></p></div></div><div class="refentry" title="ST_PointOnSurface"><div class="refentry.separator"><hr></div><a name="ST_PointOnSurface"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointOnSurface — Returns a <code class="varname">POINT</code> guaranteed to lie on the surface.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PointOnSurface</b>(</code>geometry 
			<var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76475600"></a><h2>Description</h2><p>Returns a <code class="varname">POINT</code> guaranteed to intersect a surface.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s3.2.14.2 // s3.2.18.2</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 8.1.5, 9.5.6.
		 According to the specs, ST_PointOnSurface works for surface geometries (POLYGONs, MULTIPOLYGONS, CURVED POLYGONS).  So PostGIS seems to be extending what
		 the spec allows here.  Most databases Oracle,DB II, ESRI SDE seem to only support this function for surfaces.  SQL Server 2008 like PostGIS supports for all common geometries.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp76481744"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_PointOnSurface('POINT(0 5)'::geometry));
 st_astext
------------
 POINT(0 5)
(1 row)

SELECT ST_AsText(ST_PointOnSurface('LINESTRING(0 5, 0 10)'::geometry));
 st_astext
------------
 POINT(0 5)
(1 row)

SELECT ST_AsText(ST_PointOnSurface('POLYGON((0 0, 0 5, 5 5, 5 0, 0 0))'::geometry));
   st_astext
----------------
 POINT(2.5 2.5)
(1 row)

SELECT ST_AsEWKT(ST_PointOnSurface(ST_GeomFromEWKT('LINESTRING(0 5 1, 0 0 1, 0 10 2)')));
   st_asewkt
----------------
 POINT(0 0 1)
(1 row)
</pre></div><div class="refsection" title="See Also"><a name="idp76483024"></a><h2>See Also</h2><p><a class="xref" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>, <a class="xref" href="#ST_Point_Inside_Circle" title="ST_PointInsideCircle">ST_PointInsideCircle</a></p></div></div><div class="refentry" title="ST_Project"><div class="refentry.separator"><hr></div><a name="ST_Project"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Project — Returns a <code class="varname">POINT</code> projected from a start point using a distance in meters and bearing (azimuth) in radians.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geography <b class="fsfunc">ST_Project</b>(</code>geography 
				<var class="pdparam">g1</var>, float 
				<var class="pdparam">distance</var>, float 
				<var class="pdparam">azimuth</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76491856"></a><h2>Description</h2><p>Returns a <code class="varname">POINT</code> projected along a geodesic from a start point using an azimuth (bearing) measured in radians and distance measured in meters. This is also called a direct geodesic problem.</p><p>The azimuth is sometimes called the heading or the bearing in navigation. It is measured relative to true north (azimuth zero). East is azimuth 90 (π/2), south is azimuth 180 (π), west is azimuth 270 (3π/2).</p><p>The distance is given in meters.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Example: Using degrees - projected point 100,000 meters and bearing 45 degrees"><a name="idp76494544"></a><h2>Example: Using degrees - projected point 100,000 meters and bearing 45 degrees </h2><pre class="programlisting">SELECT ST_AsText(ST_Project('POINT(0 0)'::geography, 100000, radians(45.0)));

                 st_astext
--------------------------------------------
 POINT(0.635231029125537 0.639472334729198)
(1 row)
      </pre></div><div class="refsection" title="See Also"><a name="idp76495824"></a><h2>See Also</h2><p><a class="xref" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="ulink" href="http://www.postgresql.org/docs/current/interactive/functions-math.html" target="_top">PostgreSQL Math Functions</a></p></div></div><div class="refentry" title="ST_Relate"><div class="refentry.separator"><hr></div><a name="ST_Relate"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Relate — Returns true if this Geometry is spatially related to
					anotherGeometry, by testing for intersections between the
					Interior, Boundary and Exterior of the two geometries as specified
					by the values in the intersectionMatrixPattern.  If no intersectionMatrixPattern
					is passed in, then returns the maximum intersectionMatrixPattern that relates the 2 geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Relate</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, text  <var class="pdparam">intersectionMatrixPattern</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_Relate</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">ST_Relate</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var>, integer  <var class="pdparam">BoundaryNodeRule</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76512336"></a><h2>Description</h2><p>Version 1: Takes geomA, geomB, intersectionMatrix and Returns 1 (TRUE) if this Geometry is spatially related to
					anotherGeometry, by testing for intersections between the
					Interior, Boundary and Exterior of the two geometries as specified
					by the values in the <a class="ulink" href="http://en.wikipedia.org/wiki/DE-9IM" target="_top">DE-9IM matrix pattern</a>.</p><p>This is especially useful for testing compound checks of intersection, crosses, etc in one step.</p><p>Do not call with a GeometryCollection as an argument</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is the "allowable" version that returns a
			boolean, not an integer.  This is defined in OGC spec</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This DOES NOT automagically include an index call.  The reason for that
				is some relationships are anti e.g. Disjoint.  If you are
				using a relationship pattern that requires intersection, then include the &amp;&amp;
				index call.</p></td></tr></table></div><p>Version 2: Takes geomA and geomB and returns the <a class="xref" href="#DE-9IM" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)">Section 4.3.6, “Dimensionally Extended 9 Intersection Model (DE-9IM)”</a></p><p>Version 3: same as version 2, but allows to specify a boundary node rule (1:OGC/MOD2, 2:Endpoint, 3:MultivalentEndpoint, 4:MonovalentEndpoint)</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a GeometryCollection as an argument</p></td></tr></table></div><p>not in OGC spec, but implied. see s2.1.13.2</p><p>Performed by the GEOS module</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 // s2.1.13.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.25</p><p>Enhanced: 2.0.0 - added support for specifying boundary node rule (requires GEOS &gt;= 3.0).</p></div><div class="refsection" title="Examples"><a name="idp76521680"></a><h2>Examples</h2><pre class="programlisting">
--Find all compounds that intersect and not touch a poly (interior intersects)
SELECT l.* , b.name As poly_name
	FROM polys As b
INNER JOIN compounds As l
ON (p.the_geom &amp;&amp; b.the_geom
AND ST_Relate(l.the_geom, b.the_geom,'T********'));

SELECT ST_Relate(ST_GeometryFromText('POINT(1 2)'), ST_Buffer(ST_GeometryFromText('POINT(1 2)'),2));
st_relate
-----------
0FFFFF212

SELECT ST_Relate(ST_GeometryFromText('LINESTRING(1 2, 3 4)'), ST_GeometryFromText('LINESTRING(5 6, 7 8)'));
st_relate
-----------
FF1FF0102


SELECT ST_Relate(ST_GeometryFromText('POINT(1 2)'), ST_Buffer(ST_GeometryFromText('POINT(1 2)'),2), '0FFFFF212');
st_relate
-----------
t

SELECT ST_Relate(ST_GeometryFromText('POINT(1 2)'), ST_Buffer(ST_GeometryFromText('POINT(1 2)'),2), '*FF*FF212');
st_relate
-----------
t
		</pre></div><div class="refsection" title="See Also"><a name="idp76523344"></a><h2>See Also</h2><p><a class="xref" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>, <a class="xref" href="#DE-9IM" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)">Section 4.3.6, “Dimensionally Extended 9 Intersection Model (DE-9IM)”</a>, <a class="xref" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Touches" title="ST_Touches">ST_Touches</a></p></div></div><div class="refentry" title="ST_RelateMatch"><div class="refentry.separator"><hr></div><a name="ST_RelateMatch"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RelateMatch — Returns true if intersectionMattrixPattern1 implies intersectionMatrixPattern2</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_RelateMatch</b>(</code>text  <var class="pdparam">intersectionMatrix</var>, text  <var class="pdparam">intersectionMatrixPattern</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76531920"></a><h2>Description</h2><p> Takes intersectionMatrix and intersectionMatrixPattern and Returns true if the intersectionMatrix satisfies
		the intersectionMatrixPattern. For more information refer to <a class="xref" href="#DE-9IM" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)">Section 4.3.6, “Dimensionally Extended 9 Intersection Model (DE-9IM)”</a>.	</p><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. </p></div><div class="refsection" title="Examples"><a name="idp76533840"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_RelateMatch('101202FFF', 'TTTTTTFFF') ;
-- result --
t
--example of common intersection matrix patterns and example matrices
-- comparing relationships of involving one invalid geometry and ( a line and polygon that intersect at interior and boundary)
SELECT mat.name, pat.name, ST_RelateMatch(mat.val, pat.val) As satisfied
    FROM
        ( VALUES ('Equality', 'T1FF1FFF1'),
                ('Overlaps', 'T*T***T**'),
                ('Within', 'T*F**F***'),
                ('Disjoint', 'FF*FF****') As pat(name,val)
        CROSS JOIN
            (	VALUES ('Self intersections (invalid)', '111111111'),
                    ('IE2_BI1_BB0_BE1_EI1_EE2', 'FF2101102'),
                    ('IB1_IE1_BB0_BE0_EI2_EI1_EE2', 'F11F00212')
            ) As mat(name,val);

		</pre></div><div class="refsection" title="See Also"><a name="idp76535376"></a><h2>See Also</h2><p><a class="xref" href="#DE-9IM" title="4.3.6. Dimensionally Extended 9 Intersection Model (DE-9IM)">Section 4.3.6, “Dimensionally Extended 9 Intersection Model (DE-9IM)”</a>, <a class="xref" href="#ST_Relate" title="ST_Relate">ST_Relate</a></p></div></div><div class="refentry" title="ST_ShortestLine"><div class="refentry.separator"><hr></div><a name="ST_ShortestLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ShortestLine — Returns the 2-dimensional shortest line between two geometries</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ShortestLine</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76542800"></a><h2>Description</h2><p>Returns the 2-dimensional shortest line between two geometries. The function will
		only return the first shortest line if more than one, that the function finds.
		If g1 and g2 intersects in just one point the function will return a line with both start
		and end in that intersection-point.
		If g1 and g2 are intersecting with more than one point the function will return a line with start
		and end in the same point but it can be any of the intersecting points.
		The line returned will always start in g1 and end in g2.
		The length of the line this function returns will always be the same as ST_Distance returns for g1 and g2.
		</p><p>Availability: 1.5.0</p></div><div class="refsection" title="Examples"><a name="idp76544336"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_shortestline01.png"><div class="caption"><p>Shortest line between point and linestring</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
	ST_ShortestLine('POINT(100 100)'::geometry,
		'LINESTRING (20 80, 98 190, 110 180, 50 75 )'::geometry)
	) As sline;


   sline
-----------------
LINESTRING(100 100,73.0769230769231 115.384615384615)
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_shortestline02.png"><div class="caption"><p>shortest line between polygon and polygon</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(
		ST_ShortestLine(
			ST_GeomFromText('POLYGON((175 150, 20 40, 50 60, 125 100, 175 150))'),
			ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
			)
		) As slinewkt;

 LINESTRING(140.752120669087 125.695053378061,121.111404660392 153.370607753949)
				</pre><p>
						</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp76553040"></a><h2>See Also</h2><p><a class="xref" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>, <a class="xref" href="#ST_Distance" title="ST_Distance">ST_Distance</a>, <a class="xref" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>, <a class="xref" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a></p></div></div><div class="refentry" title="ST_Touches"><div class="refentry.separator"><hr></div><a name="ST_Touches"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Touches — Returns <code class="varname">TRUE</code> if the geometries have at least one point in common,
		but their interiors do not intersect.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Touches</b>(</code>geometry 
			<var class="pdparam">g1</var>, geometry 
			<var class="pdparam">g2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76561616"></a><h2>Description</h2><p>Returns <code class="varname">TRUE</code> if the only points in common between
		<em class="parameter"><code>g1</code></em> and <em class="parameter"><code>g2</code></em> lie in the union of the
		boundaries of <em class="parameter"><code>g1</code></em> and <em class="parameter"><code>g2</code></em>.
		The <code class="function">ST_Touches</code> relation applies
		to all Area/Area, Line/Line, Line/Area, Point/Area and Point/Line pairs of relationships,
		but <span class="emphasis"><em>not</em></span> to the Point/Point pair.</p><p>In mathematical terms, this predicate is expressed as:</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches-math.gif"></div></div><p>The allowable DE-9IM Intersection Matrices for the two geometries are:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="markup">FT*******</span></p></li><li class="listitem"><p><span class="markup">F**T*****</span></p></li><li class="listitem"><p><span class="markup">F***T****</span></p></li></ul></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function call will automatically include a bounding box
		  comparison that will make use of any indexes that are available on
		  the geometries.  To avoid using an index, use <code class="function">_ST_Touches</code> instead.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 // s2.1.13.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.28</p></div><div class="refsection" title="Examples"><a name="idp76581584"></a><h2>Examples</h2><p>The <code class="function">ST_Touches</code> predicate returns <code class="varname">TRUE</code> in all the following illustrations.</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches01.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches02.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POLYGON</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches03.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">LINESTRING</code></p></div></div></div></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches04.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches05.png"><div class="caption"><p><code class="varname">LINESTRING</code> / <code class="varname">LINESTRING</code></p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_touches06.png"><div class="caption"><p><code class="varname">POLYGON</code> / <code class="varname">POINT</code></p></div></div></div></td></tr></tbody></table></div><pre class="programlisting">SELECT ST_Touches('LINESTRING(0 0, 1 1, 0 2)'::geometry, 'POINT(1 1)'::geometry);
 st_touches
------------
 f
(1 row)

SELECT ST_Touches('LINESTRING(0 0, 1 1, 0 2)'::geometry, 'POINT(0 2)'::geometry);
 st_touches
------------
 t
(1 row)</pre></div></div><div class="refentry" title="ST_Within"><div class="refentry.separator"><hr></div><a name="ST_Within"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Within — Returns true if the geometry A is completely inside geometry B</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Within</b>(</code>geometry 
			<var class="pdparam">A</var>, geometry 
			<var class="pdparam">B</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp76618192"></a><h2>Description</h2><p>Returns TRUE if geometry A is completely inside geometry B. For this function to make
		sense, the source geometries must both be of the same coordinate projection,
		having the same SRID.  It is a given that if ST_Within(A,B) is true and ST_Within(B,A) is true, then
		the two geometries are considered spatially equal.</p><p>Performed by the GEOS module</p><p>Enhanced: 2.3.0 Enhancement to PIP short-circuit for geometry extended to support MultiPoints with few points. Prior versions only supported point in polygon.</p><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not use this function with invalid geometries. You will get unexpected results.</p></td></tr></table></div><p>This function call will automatically include a bounding box
			comparison that will make use of any indexes that are available on
			the geometries. To avoid index use, use the function
			_ST_Within.</p><p>NOTE: this is the "allowable" version that returns a
			boolean, not an integer.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.2 // s2.1.13.3
		  - a.Relate(b, 'T*F**F***')
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.30</p></div><div class="refsection" title="Examples"><a name="idp76626000"></a><h2>Examples</h2><pre class="programlisting">
--a circle within a circle
SELECT ST_Within(smallc,smallc) As smallinsmall,
	ST_Within(smallc, bigc) As smallinbig,
	ST_Within(bigc,smallc) As biginsmall,
	ST_Within(ST_Union(smallc, bigc), bigc) as unioninbig,
	ST_Within(bigc, ST_Union(smallc, bigc)) as biginunion,
	ST_Equals(bigc, ST_Union(smallc, bigc)) as bigisunion
FROM
(
SELECT ST_Buffer(ST_GeomFromText('POINT(50 50)'), 20) As smallc,
	ST_Buffer(ST_GeomFromText('POINT(50 50)'), 40) As bigc) As foo;
--Result
 smallinsmall | smallinbig | biginsmall | unioninbig | biginunion | bigisunion
--------------+------------+------------+------------+------------+------------
 t            | t          | f          | t          | t          | t
(1 row)
		</pre><p><span class="inlinemediaobject"><img src="images/st_within01.png"></span> </p></div><div class="refsection" title="See Also"><a name="idp76628688"></a><h2>See Also</h2><p><a class="xref" href="#ST_Contains" title="ST_Contains">ST_Contains</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a></p></div></div></div><div class="sect1" title="8.10. SFCGAL Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="reference_sfcgal"></a>8.10. SFCGAL Functions</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>
            SFCGAL is a C++ wrapper  library around CGAL that provides advanced 2D and 3D functions.
            For robustness, geometry coordinates have an exact rational number representation.
        </p><p>
            Installation instructions of the library can be found on SFCGAL home page <a class="ulink" href="http://www.sfcgal.org" target="_top">http://www.sfcgal.org</a>.
            To load the functions create extension postgis_sfcgal.
        </p><p>
          Some SFCGAL functions replace standard ones (ST_Intersects, ST_Intersection, ST_Difference, ST_Union, ST_Area and ST_Distance), to switch between standard functions and SFCGAL function use:
	</p><pre class="programlisting">SET postgis.backend = sfcgal;</pre><p>
	and
	</p><pre class="programlisting">SET postgis.backend = geos;</pre><p>

        </p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#postgis_sfcgal_version">postgis_sfcgal_version</a></span><span class="refpurpose"> — Returns the version of SFCGAL in use</span></dt><dt><span class="refentrytitle"><a href="#ST_Extrude">ST_Extrude</a></span><span class="refpurpose"> — Extrude a surface to a related volume</span></dt><dt><span class="refentrytitle"><a href="#ST_StraightSkeleton">ST_StraightSkeleton</a></span><span class="refpurpose"> — Compute a straight skeleton from a geometry</span></dt><dt><span class="refentrytitle"><a href="#ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a></span><span class="refpurpose"> — Compute the approximate medial axis of an areal geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsPlanar">ST_IsPlanar</a></span><span class="refpurpose"> — Check if a surface is or not planar</span></dt><dt><span class="refentrytitle"><a href="#ST_Orientation">ST_Orientation</a></span><span class="refpurpose"> — Determine surface orientation</span></dt><dt><span class="refentrytitle"><a href="#ST_ForceLHR">ST_ForceLHR</a></span><span class="refpurpose"> — Force LHR orientation</span></dt><dt><span class="refentrytitle"><a href="#ST_MinkowskiSum">ST_MinkowskiSum</a></span><span class="refpurpose"> — Performs Minkowski sum</span></dt><dt><span class="refentrytitle"><a href="#ST_3DIntersection">ST_3DIntersection</a></span><span class="refpurpose"> — Perform 3D intersection</span></dt><dt><span class="refentrytitle"><a href="#ST_3DDifference">ST_3DDifference</a></span><span class="refpurpose"> — Perform 3D difference</span></dt><dt><span class="refentrytitle"><a href="#ST_3DUnion">ST_3DUnion</a></span><span class="refpurpose"> — Perform 3D union</span></dt><dt><span class="refentrytitle"><a href="#ST_3DArea">ST_3DArea</a></span><span class="refpurpose"> — Computes area of 3D surface geometries.  Will return 0 for solids.</span></dt><dt><span class="refentrytitle"><a href="#ST_Tesselate">ST_Tesselate</a></span><span class="refpurpose"> — Perform surface Tesselation of a polygon or polyhedralsurface and returns as a TIN or collection of TINS</span></dt><dt><span class="refentrytitle"><a href="#ST_Volume">ST_Volume</a></span><span class="refpurpose"> — Computes the volume of a 3D solid. If applied to surface (even closed) geometries will return 0.</span></dt><dt><span class="refentrytitle"><a href="#ST_MakeSolid">ST_MakeSolid</a></span><span class="refpurpose"> — Cast the geometry into a solid. No check is performed. To obtain a valid solid, the input geometry must be a closed Polyhedral Surface or a closed TIN.</span></dt><dt><span class="refentrytitle"><a href="#ST_IsSolid">ST_IsSolid</a></span><span class="refpurpose"> — Test if the geometry is a solid. No validity check is performed.</span></dt></dl></div><div class="refentry" title="postgis_sfcgal_version"><a name="postgis_sfcgal_version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>postgis_sfcgal_version — Returns the version of SFCGAL in use</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">postgis_sfcgal_version</b>(</code><code>void)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77879632"></a><h2>Description</h2><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div></div><div class="refentry" title="ST_Extrude"><div class="refentry.separator"><hr></div><a name="ST_Extrude"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Extrude — Extrude a surface to a related volume</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Extrude</b>(</code>geometry <var class="pdparam">geom</var>, float <var class="pdparam">x</var>, float <var class="pdparam">y</var>, float <var class="pdparam">z</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77891408"></a><h2>Description</h2><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp77906512"></a><h2>Examples</h2><p>3D images were generated using PostGIS <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> and rendering in HTML using <a class="ulink" href="http://www.x3dom.org" target="_top">X3Dom HTML Javascript rendering library</a>.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p>
						</p><pre class="programlisting">SELECT ST_Buffer(ST_GeomFromText('POINT(100 90)'),
  50, 'quad_segs=2'),0,0,30);</pre><p>
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude01.png"><div class="caption"><p>Original octagon formed from buffering point</p></div></div></div>
					  </td><td><p>
					  </p><pre class="programlisting">ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30);</pre><p>
					  </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude02.png"><div class="caption"><p>Hexagon extruded 30 units along Z produces a PolyhedralSurfaceZ</p></div></div></div>
					  </td></tr><tr><td><p>
						</p><pre class="programlisting">SELECT ST_GeomFromText('LINESTRING(50 50, 100 90, 95 150)')</pre><p>
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude03.png"><div class="caption"><p>Original linestring</p></div></div></div>
					  </td><td><p>
					  </p><pre class="programlisting">SELECT ST_Extrude(
 ST_GeomFromText('LINESTRING(50 50, 100 90, 95 150)'),0,0,10));</pre><p>
					  </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_extrude04.png"><div class="caption"><p>LineString Extruded along Z produces a PolyhedralSurfaceZ</p></div></div></div>
					  </td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp77935824"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a></p></div></div><div class="refentry" title="ST_StraightSkeleton"><div class="refentry.separator"><hr></div><a name="ST_StraightSkeleton"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_StraightSkeleton — Compute a straight skeleton from a geometry</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_StraightSkeleton</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77941712"></a><h2>Description</h2><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp77948624"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_StraightSkeleton(ST_GeomFromText('POLYGON (( 190 190, 10 190, 10 10, 190 10, 190 20, 160 30, 60 30, 60 130, 190 140, 190 190 ))'));</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton01.png"><div class="caption"><p>Original polygon</p></div></div></div>
					  </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_straightskeleton02.png"><div class="caption"><p>Straight Skeleton of polygon</p></div></div></div>
					  </td></tr></tbody></table></div></div></div><div class="refentry" title="ST_ApproximateMedialAxis"><div class="refentry.separator"><hr></div><a name="ST_ApproximateMedialAxis"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ApproximateMedialAxis — Compute the approximate medial axis of an areal geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ApproximateMedialAxis</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77961424"></a><h2>Description</h2><p>
Return an approximate medial axis for the areal input based on
its straight skeleton. Uses an SFCGAL specific API when built against
a capable version (1.2.0+). Otherwise the function is just a wrapper
around ST_StraightSkeleton (slower case).
    </p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp77968720"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_ApproximateMedialAxis(ST_GeomFromText('POLYGON (( 190 190, 10 190, 10 10, 190 10, 190 20, 160 30, 60 30, 60 130, 190 140, 190 190 ))'));</pre><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_approximatemedialaxis01.png"><div class="caption"><p>A polygon and its approximate medial axis</p></div></div></div>
					  </td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp77974096"></a><h2>See Also</h2><p><a class="xref" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a></p></div></div><div class="refentry" title="ST_IsPlanar"><div class="refentry.separator"><hr></div><a name="ST_IsPlanar"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsPlanar — Check if a surface is or not planar</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsPlanar</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77980112"></a><h2>Description</h2><p>Availability: 2.2.0: This was documented in 2.1.0 but got accidentally left out in 2.1 release.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div></div><div class="refentry" title="ST_Orientation"><div class="refentry.separator"><hr></div><a name="ST_Orientation"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Orientation — Determine surface orientation</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_Orientation</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp77991632"></a><h2>Description</h2><p>The function only applies to polygons. It returns -1 if the polygon is counterclockwise oriented and 1 if the polygon is clockwise oriented.</p><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div></div><div class="refentry" title="ST_ForceLHR"><div class="refentry.separator"><hr></div><a name="ST_ForceLHR"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ForceLHR — Force LHR orientation</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ForceLHR</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78000848"></a><h2>Description</h2><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div></div><div class="refentry" title="ST_MinkowskiSum"><div class="refentry.separator"><hr></div><a name="ST_MinkowskiSum"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinkowskiSum — Performs Minkowski sum</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MinkowskiSum</b>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78013392"></a><h2>Description</h2><p>This function performs a 2D minkowski sum of a point, line or polygon with a polygon.</p><p>A minkowski sum of two geometries A and B is the set of all points that are the sum of any point in A and B. Minkowski sums are often used in motion planning and computer-aided design. More details on <a class="ulink" href="https://en.wikipedia.org/wiki/Minkowski_addition" target="_top">Wikipedia Minkowski addition</a>.</p><p>The first parameter can be any 2D geometry (point, linestring, polygon). If a 3D geometry is passed, it will be converted to 2D by forcing Z to 0, leading to possible cases of invalidity. The second parameter must be a 2D polygon.</p><p>Implementation utilizes <a class="ulink" href="http://doc.cgal.org/latest/Minkowski_sum_2/" target="_top">CGAL 2D Minkowskisum</a>.</p><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p></div><div class="refsection" title="Examples"><a name="idp78018640"></a><h2>Examples</h2><p>Minkowski Sum of Linestring and circle polygon where Linestring cuts thru the circle</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
                         <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum01.png"><div class="caption"><p>Before Summing</p></div></div></div><p>
                                               </p>
                        </td><td>
                           <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum02.png"><div class="caption"><p>After summing</p></div></div></div><p>
                                              </p>
                        </td></tr></tbody></table></div><pre class="programlisting">
SELECT ST_MinkowskiSum(line, circle))
FROM (SELECT
    ST_MakeLine(ST_MakePoint(10, 10),ST_MakePoint(100, 100)) As line,
    ST_Buffer(ST_GeomFromText('POINT(50 50)'), 30) As circle) As foo;

-- wkt --
MULTIPOLYGON(((30 59.9999999999999,30.5764415879031 54.1472903395161,32.2836140246614 48.5194970290472,35.0559116309237 43.3328930094119,38.7867965644036 38.7867965644035,43.332893009412 35.0559116309236,48.5194970290474 32.2836140246614,54.1472903395162 30.5764415879031,60.0000000000001 30,65.8527096604839 30.5764415879031,71.4805029709527 32.2836140246614,76.6671069905881 35.0559116309237,81.2132034355964 38.7867965644036,171.213203435596 128.786796564404,174.944088369076 133.332893009412,177.716385975339 138.519497029047,179.423558412097 144.147290339516,180 150,179.423558412097 155.852709660484,177.716385975339 161.480502970953,174.944088369076 166.667106990588,171.213203435596 171.213203435596,166.667106990588 174.944088369076,
161.480502970953 177.716385975339,155.852709660484 179.423558412097,150 180,144.147290339516 179.423558412097,138.519497029047 177.716385975339,133.332893009412 174.944088369076,128.786796564403 171.213203435596,38.7867965644035 81.2132034355963,35.0559116309236 76.667106990588,32.2836140246614 71.4805029709526,30.5764415879031 65.8527096604838,30 59.9999999999999)))
            </pre><p>Minkowski Sum of a polygon and multipoint</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
                         <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum03.png"><div class="caption"><p>Before Summing</p></div></div></div><p>
                          </p>
                        </td><td>
                           <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_minkowskisum04.png"><div class="caption"><p>After summing: polygon is duplicated and translated to position of points</p></div></div></div><p>
                           </p>
                        </td></tr></tbody></table></div><pre class="programlisting">SELECT ST_MinkowskiSum(mp, poly)
FROM (SELECT 'MULTIPOINT(25 50,70 25)'::geometry As mp,
   'POLYGON((130 150, 20 40, 50 60, 125 100, 130 150))'::geometry As poly
    ) As foo


-- wkt --
MULTIPOLYGON(
    ((70 115,100 135,175 175,225 225,70 115)),
    ((120 65,150 85,225 125,275 175,120 65))
    )
            </pre></div></div><div class="refentry" title="ST_3DIntersection"><div class="refentry.separator"><hr></div><a name="ST_3DIntersection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DIntersection — Perform 3D intersection</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DIntersection</b>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78050384"></a><h2>Description</h2><p>Return a geometry that is the shared portion between geom1 and geom2.</p><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp78057552"></a><h2>Examples</h2><p>3D images were generated using PostGIS <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> and rendering in HTML using <a class="ulink" href="http://www.x3dom.org" target="_top">X3Dom HTML Javascript rendering library</a>.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p>
                </p><pre class="programlisting">SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2;
                </pre><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"><div class="caption"><p>Original 3D geometries overlaid. geom2 is shown semi-transparent</p></div></div></div>
              </td><td><p>
              </p><pre class="programlisting">SELECT ST_3DIntersection(geom1,geom2)
FROM ( SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
              </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3dintersection01.png"><div class="caption"><p>Intersection of geom1 and geom2</p></div></div></div>
              </td></tr></tbody></table></div><p>3D linestrings and polygons</p><pre class="programlisting">	SELECT ST_AsText(ST_3DIntersection(linestring, polygon)) As wkt
FROM  ST_GeomFromText('LINESTRING Z (2 2 6,1.5 1.5 7,1 1 8,0.5 0.5 8,0 0 10)') AS linestring
 CROSS JOIN ST_GeomFromText('POLYGON((0 0 8, 0 1 8, 1 1 8, 1 0 8, 0 0 8))') AS polygon;

              wkt
--------------------------------
 LINESTRING Z (1 1 8,0.5 0.5 8)
		</pre><p>Cube (closed Polyhedral Surface) and Polygon Z</p><pre class="programlisting">SELECT ST_AsText(ST_3DIntersection(
		ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
	((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
	((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
	((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'),
	'POLYGON Z ((0 0 0, 0 0 0.5, 0 0.5 0.5, 0 0.5 0, 0 0 0))'::geometry))</pre><pre class="screen">TIN Z (((0 0 0,0 0 0.5,0 0.5 0.5,0 0 0)),((0 0.5 0,0 0 0,0 0.5 0.5,0 0.5 0)))</pre><p>Intersection of 2 solids that result in volumetric intersection is also a solid (ST_Dimension returns 3)</p><pre class="programlisting">SELECT ST_AsText(ST_3DIntersection( ST_Extrude(ST_Buffer('POINT(10 20)'::geometry,10,1),0,0,30),
 ST_Extrude(ST_Buffer('POINT(10 20)'::geometry,10,1),2,0,10) ));</pre><pre class="screen">POLYHEDRALSURFACE Z (((13.3333333333333 13.3333333333333 10,20 20 0,20 20 10,13.3333333333333 13.3333333333333 10)),
	((20 20 10,16.6666666666667 23.3333333333333 10,13.3333333333333 13.3333333333333 10,20 20 10)),
	((20 20 0,16.6666666666667 23.3333333333333 10,20 20 10,20 20 0)),
	((13.3333333333333 13.3333333333333 10,10 10 0,20 20 0,13.3333333333333 13.3333333333333 10)),
	((16.6666666666667 23.3333333333333 10,12 28 10,13.3333333333333 13.3333333333333 10,16.6666666666667 23.3333333333333 10)),
	((20 20 0,9.99999999999995 30 0,16.6666666666667 23.3333333333333 10,20 20 0)),
	((10 10 0,9.99999999999995 30 0,20 20 0,10 10 0)),((13.3333333333333 13.3333333333333 10,12 12 10,10 10 0,13.3333333333333 13.3333333333333 10)),
	((12 28 10,12 12 10,13.3333333333333 13.3333333333333 10,12 28 10)),
	((16.6666666666667 23.3333333333333 10,9.99999999999995 30 0,12 28 10,16.6666666666667 23.3333333333333 10)),
	((10 10 0,0 20 0,9.99999999999995 30 0,10 10 0)),
	((12 12 10,11 11 10,10 10 0,12 12 10)),((12 28 10,11 11 10,12 12 10,12 28 10)),
	((9.99999999999995 30 0,11 29 10,12 28 10,9.99999999999995 30 0)),((0 20 0,2 20 10,9.99999999999995 30 0,0 20 0)),
	((10 10 0,2 20 10,0 20 0,10 10 0)),((11 11 10,2 20 10,10 10 0,11 11 10)),((12 28 10,11 29 10,11 11 10,12 28 10)),
	((9.99999999999995 30 0,2 20 10,11 29 10,9.99999999999995 30 0)),((11 11 10,11 29 10,2 20 10,11 11 10)))</pre></div></div><div class="refentry" title="ST_3DDifference"><div class="refentry.separator"><hr></div><a name="ST_3DDifference"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DDifference — Perform 3D difference</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DDifference</b>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78077392"></a><h2>Description</h2><p>Returns that part of geom1 that is not part of geom2.</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp78084688"></a><h2>Examples</h2><p>3D images were generated using PostGIS <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> and rendering in HTML using <a class="ulink" href="http://www.x3dom.org" target="_top">X3Dom HTML Javascript rendering library</a>.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p>
                </p><pre class="programlisting">SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2;
                </pre><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"><div class="caption"><p>Original 3D geometries overlaid. geom2 is the part that will be removed.</p></div></div></div>
              </td><td><p>
              </p><pre class="programlisting">SELECT ST_3DDifference(geom1,geom2)
FROM ( SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
              </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference02.png"><div class="caption"><p>What's left after removing geom2</p></div></div></div>
              </td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp78094928"></a><h2>See Also</h2><p>
            <a class="xref" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a>,
            <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>,  <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>
            <a class="xref" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a>
        </p></div></div><div class="refentry" title="ST_3DUnion"><div class="refentry.separator"><hr></div><a name="ST_3DUnion"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DUnion — Perform 3D union</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_3DUnion</b>(</code>geometry <var class="pdparam">geom1</var>, geometry <var class="pdparam">geom2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78103376"></a><h2>Description</h2><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp78110288"></a><h2>Examples</h2><p>3D images were generated using PostGIS <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> and rendering in HTML using <a class="ulink" href="http://www.x3dom.org" target="_top">X3Dom HTML Javascript rendering library</a>.</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p>
                </p><pre class="programlisting">SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2;
                </pre><p>
                </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3ddifference01.png"><div class="caption"><p>Original 3D geometries overlaid. geom2 is the one with transparency.</p></div></div></div>
              </td><td><p>
              </p><pre class="programlisting">SELECT ST_3DUnion(geom1,geom2)
FROM ( SELECT ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2'),0,0,30) AS geom1,
        ST_Extrude(ST_Buffer(ST_GeomFromText('POINT(80 80)'),
 50, 'quad_segs=1'),0,0,30) AS geom2 ) As t;</pre><p>
              </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_3dunion01.png"><div class="caption"><p>Union of geom1 and geom2</p></div></div></div>
              </td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp78120528"></a><h2>See Also</h2><p>
            <a class="xref" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a>,
            <a class="xref" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>,  <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>
            <a class="xref" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a>
        </p></div></div><div class="refentry" title="ST_3DArea"><div class="refentry.separator"><hr></div><a name="ST_3DArea"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DArea — Computes area of 3D surface geometries.  Will return 0 for solids.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float<b class="fsfunc">ST_3DArea</b>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78127952"></a><h2>Description</h2><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp78134864"></a><h2>Examples</h2><p>Note: By default a PolyhedralSurface built from WKT is a surface geometry, not solid.  It therefore has surface area.  Once converted to a solid, no area.</p><pre class="programlisting">SELECT ST_3DArea(geom) As cube_surface_area,
	ST_3DArea(ST_MakeSolid(geom)) As solid_surface_area
  FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
    ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
    ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
    ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
    ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
    ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

 cube_surface_area | solid_surface_area
-------------------+--------------------
                 6 |                  0    </pre></div><div class="refsection" title="See Also"><a name="idp78136400"></a><h2>See Also</h2><p><a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a>, <a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>, <a class="xref" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a>, <a class="xref" href="#ST_Area" title="ST_Area">ST_Area</a></p></div></div><div class="refentry" title="ST_Tesselate"><div class="refentry.separator"><hr></div><a name="ST_Tesselate"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Tesselate — Perform surface Tesselation of a polygon or polyhedralsurface and returns as a TIN or collection of TINS</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Tesselate</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78155856"></a><h2>Description</h2><p>Takes as input a surface such a  MULTI(POLYGON) or POLYHEDRALSURFACE and returns a TIN representation via the process of tesselation using triangles.</p><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp78163152"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><p>
						</p><pre class="programlisting">SELECT ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
		((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
		((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
		((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )');</pre><p>
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate01.png"><div class="caption"><p>Original Cube</p></div></div></div>
					  </td><td><p>
					  </p><pre class="programlisting">SELECT ST_Tesselate(ST_GeomFromText('POLYHEDRALSURFACE Z( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
	((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
	((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
	((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'));</pre>
		<p>ST_AsText output:</p>
		<pre class="screen">TIN Z (((0 0 0,0 0 1,0 1 1,0 0 0)),((0 1 0,0 0 0,0 1 1,0 1 0)),
	((0 0 0,0 1 0,1 1 0,0 0 0)),
	((1 0 0,0 0 0,1 1 0,1 0 0)),((0 0 1,1 0 0,1 0 1,0 0 1)),
	((0 0 1,0 0 0,1 0 0,0 0 1)),
	((1 1 0,1 1 1,1 0 1,1 1 0)),((1 0 0,1 1 0,1 0 1,1 0 0)),
	((0 1 0,0 1 1,1 1 1,0 1 0)),((1 1 0,0 1 0,1 1 1,1 1 0)),
	((0 1 1,1 0 1,1 1 1,0 1 1)),((0 1 1,0 0 1,1 0 1,0 1 1)))</pre>
		       <p> </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate02.png"><div class="caption"><p>Tesselated Cube with triangles colored</p></div></div></div>
					  </td></tr><tr><td><p>
						</p><pre class="programlisting">SELECT 'POLYGON (( 10 190, 10 70, 80 70, 80 130, 50 160, 120 160, 120 190, 10 190 ))'::geometry;</pre><p>
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate03.png"><div class="caption"><p>Original polygon</p></div></div></div>
					  </td><td><p>
					  </p><pre class="programlisting">SELECT
	ST_Tesselate('POLYGON (( 10 190, 10 70, 80 70, 80 130, 50 160, 120 160, 120 190, 10 190 ))'::geometry);</pre><p>
	</p>
	<p>ST_AsText output</p>
	<pre class="screen">TIN(((80 130,50 160,80 70,80 130)),((50 160,10 190,10 70,50 160)),
	 ((80 70,50 160,10 70,80 70)),((120 160,120 190,50 160,120 160)),
 ((120 190,10 190,50 160,120 190)))</pre>
					  <div class="informalfigure"><div class="mediaobject"><img src="images/st_tesselate04.png"><div class="caption"><p>Tesselated Polygon</p></div></div></div>
					  </td></tr></tbody></table></div></div></div><div class="refentry" title="ST_Volume"><div class="refentry.separator"><hr></div><a name="ST_Volume"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Volume — Computes the volume of a 3D solid. If applied to surface (even closed) geometries will return 0.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float <b class="fsfunc">ST_Volume</b>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78198224"></a><h2>Description</h2><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Example"><a name="idp78205008"></a><h2>Example</h2><p>When closed surfaces are created with WKT, they are treated as areal rather than solid.  To make them solid, you need to use <a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>.
	      Areal geometries have no volume.  Here is an example to demonstrate.</p><pre class="programlisting">SELECT ST_Volume(geom) As cube_surface_vol,
	ST_Volume(ST_MakeSolid(geom)) As solid_surface_vol
  FROM (SELECT 'POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
    ((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)),
    ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
    ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
    ((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),
    ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )'::geometry) As f(geom);

 cube_surface_vol | solid_surface_vol
------------------+-------------------
                0 |                 1
	      </pre></div><div class="refsection" title="See Also"><a name="idp78207312"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>, <a class="xref" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>, <a class="xref" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a></p></div></div><div class="refentry" title="ST_MakeSolid"><div class="refentry.separator"><hr></div><a name="ST_MakeSolid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeSolid — Cast the geometry into a solid. No check is performed. To obtain a valid solid, the input geometry must be a closed Polyhedral Surface or a closed TIN.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry<b class="fsfunc">ST_MakeSolid</b>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78214096"></a><h2>Description</h2><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div></div><div class="refentry" title="ST_IsSolid"><div class="refentry.separator"><hr></div><a name="ST_IsSolid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsSolid — Test if the geometry is a solid. No validity check is performed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean<b class="fsfunc">ST_IsSolid</b>(</code>geometry <var class="pdparam">geom1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78225616"></a><h2>Description</h2><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs SFCGAL backend.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div></div></div><div class="sect1" title="8.11. Geometry Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Geometry_Processing"></a>8.11. Geometry Processing</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_Buffer">ST_Buffer</a></span><span class="refpurpose"> — 
(T)
Returns a geometry covering all points within a given distance
from the input geometry.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_BuildArea">ST_BuildArea</a></span><span class="refpurpose"> — Creates an areal geometry formed by the constituent linework
			of given geometry</span></dt><dt><span class="refentrytitle"><a href="#ST_ClipByBox2D">ST_ClipByBox2D</a></span><span class="refpurpose"> — Returns the portion of a geometry falling within a rectangle.</span></dt><dt><span class="refentrytitle"><a href="#ST_Collect">ST_Collect</a></span><span class="refpurpose"> — Return a specified ST_Geometry value from a collection of other geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_ConcaveHull">ST_ConcaveHull</a></span><span class="refpurpose"> — The concave hull of a geometry represents a possibly concave
		geometry that encloses all geometries within the set.  You can think of it as shrink wrapping.</span></dt><dt><span class="refentrytitle"><a href="#ST_ConvexHull">ST_ConvexHull</a></span><span class="refpurpose"> — The convex hull of a geometry represents the minimum convex
		geometry that encloses all geometries within the set.</span></dt><dt><span class="refentrytitle"><a href="#ST_CurveToLine">ST_CurveToLine</a></span><span class="refpurpose"> — Converts a CIRCULARSTRING/CURVEPOLYGON to a LINESTRING/POLYGON</span></dt><dt><span class="refentrytitle"><a href="#ST_DelaunayTriangles">ST_DelaunayTriangles</a></span><span class="refpurpose"> — 
Return a Delaunay triangulation around the given input points.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_Difference">ST_Difference</a></span><span class="refpurpose"> — Returns a geometry that represents that part of geometry A
			that does not intersect with geometry B.</span></dt><dt><span class="refentrytitle"><a href="#ST_Dump">ST_Dump</a></span><span class="refpurpose"> — Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</span></dt><dt><span class="refentrytitle"><a href="#ST_DumpPoints">ST_DumpPoints</a></span><span class="refpurpose"> — Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_DumpRings">ST_DumpRings</a></span><span class="refpurpose"> — Returns a set of <code class="varname">geometry_dump</code> rows, representing
			the exterior and interior rings of a polygon.</span></dt><dt><span class="refentrytitle"><a href="#ST_FlipCoordinates">ST_FlipCoordinates</a></span><span class="refpurpose"> — Returns a version of the given geometry with
				X and Y axis flipped. Useful for people
				who have built latitude/longitude features
				and need to fix them.</span></dt><dt><span class="refentrytitle"><a href="#ST_GeneratePoints">ST_GeneratePoints</a></span><span class="refpurpose"> — Converts a polygon or multi-polygon into a multi-point composed of randomly location points within the original areas.</span></dt><dt><span class="refentrytitle"><a href="#ST_Intersection">ST_Intersection</a></span><span class="refpurpose"> — 
(T)
Returns a geometry that represents the shared portion of geomA and geomB.
			</span></dt><dt><span class="refentrytitle"><a href="#ST_LineToCurve">ST_LineToCurve</a></span><span class="refpurpose"> — Converts a LINESTRING/POLYGON to a CIRCULARSTRING, CURVEPOLYGON</span></dt><dt><span class="refentrytitle"><a href="#ST_MakeValid">ST_MakeValid</a></span><span class="refpurpose"> — Attempts to make an invalid geometry valid without losing vertices.</span></dt><dt><span class="refentrytitle"><a href="#ST_MemUnion">ST_MemUnion</a></span><span class="refpurpose"> — Same as ST_Union, only memory-friendly (uses less memory
			and more processor time).</span></dt><dt><span class="refentrytitle"><a href="#ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></span><span class="refpurpose"> — Returns the smallest circle polygon that can fully contain a geometry. Default
		uses 48 segments per quarter circle.</span></dt><dt><span class="refentrytitle"><a href="#ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a></span><span class="refpurpose"> — Returns the center point and radius of the smallest circle that can fully contain a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_Polygonize">ST_Polygonize</a></span><span class="refpurpose"> — Aggregate. Creates a GeometryCollection containing possible
			polygons formed from the constituent linework of a set of
			geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_Node">ST_Node</a></span><span class="refpurpose"> — 
Node a set of linestrings.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_OffsetCurve">ST_OffsetCurve</a></span><span class="refpurpose"> — 
Return an offset line at a given distance and side from an input line. Useful for computing parallel lines about a center line
			</span></dt><dt><span class="refentrytitle"><a href="#ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a></span><span class="refpurpose"> — Returns a version of the given geometry with
				duplicated points removed.</span></dt><dt><span class="refentrytitle"><a href="#ST_SharedPaths">ST_SharedPaths</a></span><span class="refpurpose"> — Returns a collection containing paths shared by the two input linestrings/multilinestrings.</span></dt><dt><span class="refentrytitle"><a href="#ST_Shift_Longitude">ST_ShiftLongitude</a></span><span class="refpurpose"> — Toggle geometry coordinates between -180..180 and 0..360 ranges.</span></dt><dt><span class="refentrytitle"><a href="#ST_WrapX">ST_WrapX</a></span><span class="refpurpose"> — Wrap a geometry around an X value.</span></dt><dt><span class="refentrytitle"><a href="#ST_Simplify">ST_Simplify</a></span><span class="refpurpose"> — Returns a "simplified" version of the given geometry using
				the Douglas-Peucker algorithm.</span></dt><dt><span class="refentrytitle"><a href="#ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a></span><span class="refpurpose"> — Returns a "simplified" version of the given geometry using
			the Douglas-Peucker algorithm. Will avoid creating derived
			geometries (polygons in particular) that are invalid.</span></dt><dt><span class="refentrytitle"><a href="#ST_SimplifyVW">ST_SimplifyVW</a></span><span class="refpurpose"> — Returns a "simplified" version of the given geometry using the Visvalingam-Whyatt algorithm</span></dt><dt><span class="refentrytitle"><a href="#ST_SetEffectiveArea">ST_SetEffectiveArea</a></span><span class="refpurpose"> — 
			Sets the effective area for each vertex, storing the value in the M ordinate.  A simplified geometry can then be generated by filtering on the M ordinate.
		</span></dt><dt><span class="refentrytitle"><a href="#ST_Split">ST_Split</a></span><span class="refpurpose"> — Returns a collection of geometries resulting by splitting a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_SymDifference">ST_SymDifference</a></span><span class="refpurpose"> — Returns a geometry that represents the portions of A and B
			that do not intersect. It is called a symmetric difference because
			ST_SymDifference(A,B) = ST_SymDifference(B,A).</span></dt><dt><span class="refentrytitle"><a href="#ST_Subdivide">ST_Subdivide</a></span><span class="refpurpose"> — Returns a set of geometry where no geometry in the set has more than the specified number of vertices.</span></dt><dt><span class="refentrytitle"><a href="#ST_SwapOrdinates">ST_SwapOrdinates</a></span><span class="refpurpose"> — Returns a version of the given geometry with
				given ordinate values swapped.
    </span></dt><dt><span class="refentrytitle"><a href="#ST_Union">ST_Union</a></span><span class="refpurpose"> — Returns a geometry that represents the point set union of
		the Geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_UnaryUnion">ST_UnaryUnion</a></span><span class="refpurpose"> — Like ST_Union, but working at the geometry component level.</span></dt><dt><span class="refentrytitle"><a href="#ST_VoronoiLines">ST_VoronoiLines</a></span><span class="refpurpose"> — Returns the boundaries between the cells of the Voronoi diagram constructed from the vertices of a geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_VoronoiPolygons">ST_VoronoiPolygons</a></span><span class="refpurpose"> — Returns the cells of the Voronoi diagram constructed from the vertices of a geometry.</span></dt></dl></div><div class="refentry" title="ST_Buffer"><a name="ST_Buffer"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Buffer — 
(T)
Returns a geometry covering all points within a given distance
from the input geometry.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Buffer</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Buffer</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, integer  <var class="pdparam">num_seg_quarter_circle</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Buffer</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, text  <var class="pdparam">buffer_style_parameters</var><code>)</code>;</p><p><code class="funcdef">geography <b class="fsfunc">ST_Buffer</b>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer_in_meters</var><code>)</code>;</p><p><code class="funcdef">geography <b class="fsfunc">ST_Buffer</b>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, integer  <var class="pdparam">num_seg_quarter_circle</var><code>)</code>;</p><p><code class="funcdef">geography <b class="fsfunc">ST_Buffer</b>(</code>geography  <var class="pdparam">g1</var>, float  <var class="pdparam">radius_of_buffer</var>, text  <var class="pdparam">buffer_style_parameters</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78619728"></a><h2>Description</h2><p>Returns a geometry/geography that represents all points whose distance
			from this Geometry/geography is less than or equal to distance. </p><p>Geometry: Calculations
			are in the Spatial Reference System of the geometry. Introduced in 1.5 support for
			different end cap and mitre settings to control shape.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Negative radii: For polygons, a negative radius can be used, which will shrink the polygon rather than expanding it.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Geography: For geography this is really a thin wrapper around the geometry implementation. It first determines the best SRID that
					fits the bounding box of the geography object (favoring UTM, Lambert Azimuthal Equal Area (LAEA) north/south pole, and falling back on mercator in worst case scenario) and then buffers in that planar spatial ref and retransforms back to WGS84 geography.</p></td></tr></table></div><p><img src="images/warning.png">
			For geography this may not behave as expected if object is sufficiently large that it falls between two UTM zones or crosses the dateline</p><p>Availability: 1.5 - ST_Buffer was enhanced to support different endcaps and join types. These are useful for example to convert road linestrings
					into polygon roads with flat or square edges instead of rounded edges. Thin wrapper for geography was added. - requires GEOS &gt;= 3.2 to take advantage of advanced geometry functionality.
				</p><p>
The optional third parameter (currently only applies to geometry) can either specify number of segments used to approximate a quarter circle (integer case, defaults to 8) or a list of blank-separated key=value pairs (string case) to tweak operations as follows:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'quad_segs=#' : number of segments used to approximate a quarter circle (defaults to 8).</p></li><li class="listitem"><p>'endcap=round|flat|square' : endcap style (defaults to "round", needs GEOS-3.2 or higher for a different value). 'butt' is also accepted as a synonym for 'flat'.</p></li><li class="listitem"><p>'join=round|mitre|bevel' : join style (defaults to "round", needs GEOS-3.2 or higher for a different value). 'miter' is also accepted as a synonym for 'mitre'.</p></li><li class="listitem"><p>'mitre_limit=#.#' : mitre ratio limit (only affects mitered join style). 'miter_limit' is also accepted as a synonym for 'mitre_limit'.</p></li></ul></div><p>
				</p><p>Units of radius are measured in units of the spatial reference system.</p><p>The inputs can be POINTS, MULTIPOINTS, LINESTRINGS, MULTILINESTRINGS, POLYGONS, MULTIPOLYGONS, and GeometryCollections.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function ignores the third dimension (z) and will always give a 2-d buffer even when presented with a 3d-geometry.</p></td></tr></table></div><p>Performed by the GEOS module.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.17</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>People often make the mistake of using this function to try to do radius searches.  Creating a
					buffer to to a radius search is slow and pointless.  Use <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> instead.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp78633424"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer01.png"><div class="caption"><p>quad_segs=8 (default)</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=8');
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer02.png"><div class="caption"><p>quad_segs=2 (lame)</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText('POINT(100 90)'),
 50, 'quad_segs=2');
				</pre><p>
						</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer03.png"><div class="caption"><p>endcap=round join=round (default)</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=round join=round');
				</pre><p>
						 </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer04.png"><div class="caption"><p>endcap=square</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=square join=round');
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer05.png"><div class="caption"><p>endcap=flat</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'endcap=flat join=round');
				</pre><p>
						  </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer07.png"><div class="caption"><p>join=bevel</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=bevel');
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer06.png"><div class="caption"><p>join=mitre mitre_limit=5.0 (default mitre limit)</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=mitre mitre_limit=5.0');
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buffer08.png"><div class="caption"><p>join=mitre mitre_limit=1</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_Buffer(
 ST_GeomFromText(
  'LINESTRING(50 50,150 150,150 50)'
 ), 10, 'join=mitre mitre_limit=1.0');
				</pre><p>
						  </p></td></tr></tbody></table></div><pre class="programlisting">--A buffered point approximates a circle
-- A buffered point forcing approximation of (see diagram)
-- 2 points per circle is poly with 8 sides (see diagram)
SELECT ST_NPoints(ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50)) As promisingcircle_pcount,
ST_NPoints(ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50, 2)) As lamecircle_pcount;

promisingcircle_pcount | lamecircle_pcount
------------------------+-------------------
			 33 |                9

--A lighter but lamer circle
-- only 2 points per quarter circle is an octagon
--Below is a 100 meter octagon
-- Note coordinates are in NAD 83 long lat which we transform
to Mass state plane meter and then buffer to get measurements in meters;
SELECT ST_AsText(ST_Buffer(
ST_Transform(
ST_SetSRID(ST_MakePoint(-71.063526, 42.35785),4269), 26986)
,100,2)) As octagon;
----------------------
POLYGON((236057.59057465 900908.759918696,236028.301252769 900838.049240578,235
957.59057465 900808.759918696,235886.879896532 900838.049240578,235857.59057465
900908.759918696,235886.879896532 900979.470596815,235957.59057465 901008.759918
696,236028.301252769 900979.470596815,236057.59057465 900908.759918696))
		</pre></div><div class="refsection" title="See Also"><a name="idp78670928"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" title="ST_BuildArea"><div class="refentry.separator"><hr></div><a name="ST_BuildArea"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BuildArea — Creates an areal geometry formed by the constituent linework
			of given geometry</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_BuildArea</b>(</code>geometry  <var class="pdparam">A</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78678480"></a><h2>Description</h2><p>Creates an areal geometry formed by the constituent linework
			of given geometry. The return type can be a Polygon or
			MultiPolygon, depending on input. If the input lineworks do not
			form polygons NULL is returned.  The inputs can be LINESTRINGS, MULTILINESTRINGS, POLYGONS, MULTIPOLYGONS, and GeometryCollections.
			</p><p>This function will assume all inner geometries represent holes</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Input linework must be correctly noded for this function to work properly</p></td></tr></table></div><p>Availability: 1.1.0 - requires GEOS &gt;= 2.1.0.</p></div><div class="refsection" title="Examples"><a name="idp78578896"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buildarea01.png"><div class="caption"><p>This will create a donut</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_BuildArea(ST_Collect(smallc,bigc))
FROM (SELECT
	ST_Buffer(
	  ST_GeomFromText('POINT(100 90)'), 25) As smallc,
	ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50) As bigc) As foo;
				</pre><p>
						  </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_buildarea02.png"><div class="caption"><p>This will create a gaping hole inside the circle with prongs sticking out</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_BuildArea(ST_Collect(line,circle))
FROM (SELECT
	ST_Buffer(
		ST_MakeLine(ST_MakePoint(10, 10),ST_MakePoint(190, 190)),
				5)  As line,
	ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50) As circle) As foo;

--this creates the same gaping hole
--but using linestrings instead of polygons
SELECT ST_BuildArea(
	ST_Collect(ST_ExteriorRing(line),ST_ExteriorRing(circle))
	)
FROM (SELECT ST_Buffer(
	ST_MakeLine(ST_MakePoint(10, 10),ST_MakePoint(190, 190))
		,5)  As line,
	ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50) As circle) As foo;

				</pre><p>
						</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp78702672"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>,
			<a class="xref" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a>,
			<a class="xref" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a>,
			<a class="xref" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a>wrappers to
			this function with standard OGC interface</p></div></div><div class="refentry" title="ST_ClipByBox2D"><div class="refentry.separator"><hr></div><a name="ST_ClipByBox2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClipByBox2D — Returns the portion of a geometry falling within a rectangle.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ClipByBox2D</b>(</code>geometry <var class="pdparam">geom</var>, box2d <var class="pdparam">box</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78711120"></a><h2>Description</h2><p>
Clips a geometry by a 2D box in a fast but possibly dirty way. The output
geometry is not guaranteed to be valid (self-intersections for a polygon
may be introduced). Topologically invalid input geometries do not result
in exceptions being thrown.
    </p><p>Performed by the GEOS module.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires GEOS 3.5.0+</p></td></tr></table></div><p>Availability: 2.2.0 - requires GEOS &gt;= 3.5.0.</p></div><div class="refsection" title="Examples"><a name="idp78713552"></a><h2>Examples</h2><pre class="programlisting">
-- Rely on implicit cast from geometry to box2d for the second parameter
SELECT ST_ClipByBox2D(the_geom, ST_MakeEnvelope(0,0,10,10)) FROM mytab;
      </pre></div><div class="refsection" title="See Also"><a name="idp78714832"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>,
<a class="xref" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a>,
<a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>
    </p></div></div><div class="refentry" title="ST_Collect"><div class="refentry.separator"><hr></div><a name="ST_Collect"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Collect — Return a specified ST_Geometry value from a collection of other geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Collect</b>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Collect</b>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Collect</b>(</code>geometry[] <var class="pdparam">g1_array</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78727376"></a><h2>Description</h2><p> Output type can be a MULTI* or a
			GEOMETRYCOLLECTION. Comes in 2 variants.  Variant 1 collects 2 geometries. Variant 2 is an aggregate function that takes a set of geometries and collects
			them into a single ST_Geometry.</p><p>Aggregate version: This function returns a GEOMETRYCOLLECTION or a MULTI object
			from a set of geometries. The ST_Collect() function is an "aggregate"
			function in the terminology of PostgreSQL. That means that it
			operates on rows of data, in the same way the SUM() and AVG()
			functions do. For example, "SELECT ST_Collect(GEOM) FROM GEOMTABLE
			GROUP BY ATTRCOLUMN" will return a separate GEOMETRYCOLLECTION for
			each distinct value of ATTRCOLUMN.</p><p>Non-Aggregate version: This function returns a geometry being a collection of two
			input geometries. Output type can be a MULTI* or a
			GEOMETRYCOLLECTION.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Collect and ST_Union are often interchangeable.
			ST_Collect is in general orders of magnitude faster than ST_Union
			because it does not try to dissolve boundaries or validate that a constructed MultiPolgon doesn't
			have overlapping regions. It merely rolls up
			single geometries into MULTI and MULTI or mixed geometry types
			into Geometry Collections. Unfortunately geometry collections are
			not well-supported by GIS tools. To prevent ST_Collect from
			returning a Geometry Collection when collecting MULTI geometries,
			one can use the below trick that utilizes <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> to expand the
			MULTIs out to singles and then regroup them.</p></td></tr></table></div><p>Availability: 1.4.0 -  ST_Collect(geomarray) was introduced. ST_Collect was enhanced to handle more geometries faster.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves This method supports Circular Strings
		    and Curves, but will never return a MULTICURVE or MULTI as one
		    would expect and PostGIS does not currently support those.</p></div><div class="refsection" title="Examples"><a name="idp78733264"></a><h2>Examples</h2><p>Aggregate example (<a class="ulink" href="http://postgis.refractions.net/pipermail/postgis-users/2008-June/020331.html" target="_top">http://postgis.refractions.net/pipermail/postgis-users/2008-June/020331.html</a>)</p><pre class="programlisting">SELECT stusps,
	   ST_Multi(ST_Collect(f.the_geom)) as singlegeom
	 FROM (SELECT stusps, (ST_Dump(the_geom)).geom As the_geom
				FROM
				somestatetable ) As f
GROUP BY stusps</pre><p>Non-Aggregate example</p><pre class="programlisting">SELECT ST_AsText(ST_Collect(ST_GeomFromText('POINT(1 2)'),
	ST_GeomFromText('POINT(-2 3)') ));

st_astext
----------
MULTIPOINT(1 2,-2 3)

--Collect 2 d points
SELECT ST_AsText(ST_Collect(ST_GeomFromText('POINT(1 2)'),
		ST_GeomFromText('POINT(1 2)') ) );

st_astext
----------
MULTIPOINT(1 2,1 2)

--Collect 3d points
SELECT ST_AsEWKT(ST_Collect(ST_GeomFromEWKT('POINT(1 2 3)'),
		ST_GeomFromEWKT('POINT(1 2 4)') ) );

		st_asewkt
-------------------------
 MULTIPOINT(1 2 3,1 2 4)

 --Example with curves
SELECT ST_AsText(ST_Collect(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'),
ST_GeomFromText('CIRCULARSTRING(220227 150406,2220227 150407,220227 150406)')));
																st_astext
------------------------------------------------------------------------------------
 GEOMETRYCOLLECTION(CIRCULARSTRING(220268 150415,220227 150505,220227 150406),
 CIRCULARSTRING(220227 150406,2220227 150407,220227 150406))

--New ST_Collect array construct
SELECT ST_Collect(ARRAY(SELECT the_geom FROM sometable));

SELECT ST_AsText(ST_Collect(ARRAY[ST_GeomFromText('LINESTRING(1 2, 3 4)'),
			ST_GeomFromText('LINESTRING(3 4, 4 5)')])) As wktcollect;

--wkt collect --
MULTILINESTRING((1 2,3 4),(3 4,4 5))

</pre></div><div class="refsection" title="See Also"><a name="idp78736464"></a><h2>See Also</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" title="ST_ConcaveHull"><div class="refentry.separator"><hr></div><a name="ST_ConcaveHull"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ConcaveHull — The concave hull of a geometry represents a possibly concave
		geometry that encloses all geometries within the set.  You can think of it as shrink wrapping.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ConcaveHull</b>(</code>geometry  <var class="pdparam">geomA</var>, float  <var class="pdparam">target_percent</var>, boolean  <var class="pdparam">allow_holes=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78745040"></a><h2>Description</h2><p>The concave hull of a geometry represents a possibly concave
		geometry that encloses all geometries within the set. Defaults to false for allowing polygons with holes.
		The result is never higher than a single polygon.</p><p>The target_percent is the target percent of area of convex hull the PostGIS solution will try to approach before giving up or exiting.
		One can think of the concave hull as the geometry you get by vacuum sealing a set of geometries. The
			target_percent of 1 will give you the same answer as the convex hull.  A target_percent
				between 0 and 0.99 will give you something that should have a smaller area than the convex hull.  This is different from a convex hull which is more like wrapping a rubber band around the set of geometries.</p><p>It is usually used with MULTI and Geometry Collections.
		Although it is not an aggregate - you can use it in conjunction
		with ST_Collect or ST_Union to get the concave hull of a set of points/linestring/polygons
		ST_ConcaveHull(ST_Collect(somepointfield), 0.80).</p><p>It is much slower to compute than convex hull but encloses the geometry better and is also useful for
			image recognition.</p><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note - If you are using with points, linestrings, or geometry collections use ST_Collect. If you are using with polygons, use ST_Union since
			it may fail with invalid geometries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note - The smaller you make the target percent, the longer it takes to process the concave hull and more likely to run into topological exceptions. Also the more
			floating points and number of points you accrue.  First try a 0.99 which does a first hop, is usually very fast, sometimes as fast as computing the convex hull, and usually gives much better than 99% of shrink since it almost always overshoots. Second hope of 0.98 it slower, others get slower usually quadratically.
			To reduce precision and float points, use <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a> or <a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> after ST_ConcaveHull. ST_SnapToGrid is a bit faster, but
				could result in invalid geometries where as ST_SimplifyPreserveTopology almost always preserves the validity of the geometry.</p></td></tr></table></div><p>More real world examples and brief explanation of the technique are shown <a class="ulink" href="http://www.bostongis.com/postgis_concavehull.snippet" target="_top">http://www.bostongis.com/postgis_concavehull.snippet</a></p><p>Also check out Simon Greener's article on demonstrating ConcaveHull introduced in Oracle 11G R2. <a class="ulink" href="http://www.spatialdbadvisor.com/oracle_spatial_tips_tricks/172/concave-hull-geometries-in-oracle-11gr2" target="_top">http://www.spatialdbadvisor.com/oracle_spatial_tips_tricks/172/concave-hull-geometries-in-oracle-11gr2</a>.
		The solution we get at 0.75 target percent of convex hull is similar to the shape Simon gets with  Oracle SDO_CONCAVEHULL_BOUNDARY.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp78751824"></a><h2>Examples</h2><pre class="programlisting">
--Get estimate of infected area based on point observations
SELECT d.disease_type,
	ST_ConcaveHull(ST_Collect(d.pnt_geom), 0.99) As geom
	FROM disease_obs As d
	GROUP BY d.disease_type;
</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull03.png"><div class="caption"><p>ST_ConcaveHull of 2 polygons encased in target 100% shrink concave hull</p></div></div></div><p>
				</p><pre class="programlisting">
-- geometries overlaid with concavehull
-- at target 100% shrink (this is the same as convex hull - since no shrink)
SELECT
	ST_ConcaveHull(
		ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		), 1)
	 As convexhull;
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull02.png"><div class="caption"><p>-- geometries overlaid with concavehull
								at target 90% of convex hull area</p></div></div></div><p>
				</p><pre class="programlisting">
-- geometries overlaid with concavehull at target 90% shrink
SELECT
	ST_ConcaveHull(
		ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		), 0.9)
	 As target_90;
				</pre><p>
						</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull04.png"><div class="caption"><p>L Shape points overlaid with convex hull</p></div></div></div><p>
				</p><pre class="programlisting">
-- this produces a table of 42 points that form an L shape
SELECT (ST_DumpPoints(ST_GeomFromText(
'MULTIPOINT(14 14,34 14,54 14,74 14,94 14,114 14,134 14,
150 14,154 14,154 6,134 6,114 6,94 6,74 6,54 6,34 6,
14 6,10 6,8 6,7 7,6 8,6 10,6 30,6 50,6 70,6 90,6 110,6 130,
6 150,6 170,6 190,6 194,14 194,14 174,14 154,14 134,14 114,
14 94,14 74,14 54,14 34,14 14)'))).geom
	INTO TABLE l_shape;

SELECT ST_ConvexHull(ST_Collect(geom))
FROM l_shape;
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull05.png"><div class="caption"><p>ST_ConcaveHull of L points at target 99% of convex hull</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_ConcaveHull(ST_Collect(geom), 0.99)
	FROM l_shape;
				</pre><p>
						  </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull06.png"><div class="caption"><p>Concave Hull of L points at target 80% convex hull area</p></div></div></div><p>
	</p><pre class="programlisting">
	-- Concave Hull L shape points
	-- at target 80% of convexhull
	SELECT ST_ConcaveHull(ST_Collect(geom), 0.80)
	FROM l_shape;
	</pre><p>
			</p>
			</td><td><p>
				</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull07.png"><div class="caption"><p>multilinestring overlaid with Convex hull</p></div></div></div><p>
				</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_concavehull08.png"><div class="caption"><p>multilinestring with overlaid with Concave hull
				  of linestrings at 99% target -- first hop</p></div></div></div><p>
	</p><pre class="programlisting">
SELECT ST_ConcaveHull(ST_GeomFromText('MULTILINESTRING((106 164,30 112,74 70,82 112,130 94,
	130 62,122 40,156 32,162 76,172 88),
(132 178,134 148,128 136,96 128,132 108,150 130,
170 142,174 110,156 96,158 90,158 88),
(22 64,66 28,94 38,94 68,114 76,112 30,
132 10,168 18,178 34,186 52,184 74,190 100,
190 122,182 148,178 170,176 184,156 164,146 178,
132 186,92 182,56 158,36 150,62 150,76 128,88 118))'),0.99)
	</pre><p>
			</p>
			</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp78785104"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, <a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a></p></div></div><div class="refentry" title="ST_ConvexHull"><div class="refentry.separator"><hr></div><a name="ST_ConvexHull"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ConvexHull — The convex hull of a geometry represents the minimum convex
		geometry that encloses all geometries within the set.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ConvexHull</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78792400"></a><h2>Description</h2><p>The convex hull of a geometry represents the minimum convex
		geometry that encloses all geometries within the set.</p><p>One can think of the convex hull as the geometry you get by wrapping an elastic
			band around a set of geometries.  This is different from a concave hull
				which is analogous to shrink-wrapping your geometries.</p><p>It is usually used with MULTI and Geometry Collections.
		Although it is not an aggregate - you can use it in conjunction
		with ST_Collect to get the convex hull of a set of points.
		ST_ConvexHull(ST_Collect(somepointfield)).</p><p>It is often used to
		determine an affected area based on a set of point
		observations.</p><p>Performed by the GEOS module</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.16</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp78799824"></a><h2>Examples</h2><pre class="programlisting">
--Get estimate of infected area based on point observations
SELECT d.disease_type,
	ST_ConvexHull(ST_Collect(d.the_geom)) As the_geom
	FROM disease_obs As d
	GROUP BY d.disease_type;
</pre><p>
	</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_convexhull01.png"><div class="caption"><p>Convex Hull of a MultiLinestring and a MultiPoint seen together with the MultiLinestring and MultiPoint</p></div></div></div><p>
	</p><pre class="programlisting">
SELECT ST_AsText(ST_ConvexHull(
	ST_Collect(
		ST_GeomFromText('MULTILINESTRING((100 190,10 8),(150 10, 20 30))'),
			ST_GeomFromText('MULTIPOINT(50 5, 150 30, 50 10, 10 10)')
			)) );
---st_astext--
POLYGON((50 5,10 8,10 10,100 190,150 30,150 10,50 5))
	</pre><p>
</p></div><div class="refsection" title="See Also"><a name="idp78804176"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></p></div></div><div class="refentry" title="ST_CurveToLine"><div class="refentry.separator"><hr></div><a name="ST_CurveToLine"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CurveToLine — Converts a CIRCULARSTRING/CURVEPOLYGON to a LINESTRING/POLYGON</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_CurveToLine</b>(</code>geometry <var class="pdparam">curveGeom</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_CurveToLine</b>(</code>geometry <var class="pdparam">curveGeom</var>, integer <var class="pdparam">segments_per_qtr_circle</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78814160"></a><h2>Description</h2><p>Converst a CIRCULAR STRING to regular LINESTRING or CURVEPOLYGON to POLYGON. Useful for outputting to devices that can't support CIRCULARSTRING geometry types</p><p>Converts a given geometry to a linear geometry.
		Each curved geometry or segment is converted into a linear approximation using the default value of 32 segments per quarter circle</p><p>Availability: 1.2.2?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 7.1.7</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp78821712"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_CurveToLine(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)')));

--Result --
 LINESTRING(220268 150415,220269.95064912 150416.539364228,220271.823415575 150418.17258804,220273.613787707 150419.895736857,
 220275.317452352 150421.704659462,220276.930305234 150423.594998003,220278.448460847 150425.562198489,
 220279.868261823 150427.60152176,220281.186287736 150429.708054909,220282.399363347 150431.876723113,
 220283.50456625 150434.10230186,220284.499233914 150436.379429536,220285.380970099 150438.702620341,220286.147650624 150441.066277505,
 220286.797428488 150443.464706771,220287.328738321 150445.892130112,220287.740300149 150448.342699654,
 220288.031122486 150450.810511759,220288.200504713 150453.289621251,220288.248038775 150455.77405574,
 220288.173610157 150458.257830005,220287.977398166 150460.734960415,220287.659875492 150463.199479347,
 220287.221807076 150465.64544956,220286.664248262 150468.066978495,220285.988542259 150470.458232479,220285.196316903 150472.81345077,
 220284.289480732 150475.126959442,220283.270218395 150477.39318505,220282.140985384 150479.606668057,
 220280.90450212 150481.762075989,220279.5637474 150483.85421628,220278.12195122 150485.87804878,
 220276.582586992 150487.828697901,220274.949363179 150489.701464356,220273.226214362 150491.491836488,
 220271.417291757 150493.195501133,220269.526953216 150494.808354014,220267.559752731 150496.326509628,
 220265.520429459 150497.746310603,220263.41389631 150499.064336517,220261.245228106 150500.277412127,
 220259.019649359 150501.38261503,220256.742521683 150502.377282695,220254.419330878 150503.259018879,
 220252.055673714 150504.025699404,220249.657244448 150504.675477269,220247.229821107 150505.206787101,
 220244.779251566 150505.61834893,220242.311439461 150505.909171266,220239.832329968 150506.078553494,
 220237.347895479 150506.126087555,220234.864121215 150506.051658938,220232.386990804 150505.855446946,
 220229.922471872 150505.537924272,220227.47650166 150505.099855856,220225.054972724 150504.542297043,
 220222.663718741 150503.86659104,220220.308500449 150503.074365683,
 220217.994991777 150502.167529512,220215.72876617 150501.148267175,
 220213.515283163 150500.019034164,220211.35987523 150498.7825509,
 220209.267734939 150497.441796181,220207.243902439 150496,
 220205.293253319 150494.460635772,220203.420486864 150492.82741196,220201.630114732 150491.104263143,
 220199.926450087 150489.295340538,220198.313597205 150487.405001997,220196.795441592 150485.437801511,
 220195.375640616 150483.39847824,220194.057614703 150481.291945091,220192.844539092 150479.123276887,220191.739336189 150476.89769814,
 220190.744668525 150474.620570464,220189.86293234 150472.297379659,220189.096251815 150469.933722495,
 220188.446473951 150467.535293229,220187.915164118 150465.107869888,220187.50360229 150462.657300346,
 220187.212779953 150460.189488241,220187.043397726 150457.710378749,220186.995863664 150455.22594426,
 220187.070292282 150452.742169995,220187.266504273 150450.265039585,220187.584026947 150447.800520653,
 220188.022095363 150445.35455044,220188.579654177 150442.933021505,220189.25536018 150440.541767521,
 220190.047585536 150438.18654923,220190.954421707 150435.873040558,220191.973684044 150433.60681495,
 220193.102917055 150431.393331943,220194.339400319 150429.237924011,220195.680155039 150427.14578372,220197.12195122 150425.12195122,
 220198.661315447 150423.171302099,220200.29453926 150421.298535644,220202.017688077 150419.508163512,220203.826610682 150417.804498867,
 220205.716949223 150416.191645986,220207.684149708 150414.673490372,220209.72347298 150413.253689397,220211.830006129 150411.935663483,
 220213.998674333 150410.722587873,220216.22425308 150409.61738497,220218.501380756 150408.622717305,220220.824571561 150407.740981121,
 220223.188228725 150406.974300596,220225.586657991 150406.324522731,220227 150406)

--3d example
SELECT ST_AsEWKT(ST_CurveToLine(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 2,220227 150406 3)')));
Output
------
 LINESTRING(220268 150415 1,220269.95064912 150416.539364228 1.0181172856673,
 220271.823415575 150418.17258804 1.03623457133459,220273.613787707 150419.895736857 1.05435185700189,....AD INFINITUM ....
	220225.586657991 150406.324522731 1.32611114201132,220227 150406 3)

--use only 2 segments to approximate quarter circle
SELECT ST_AsText(ST_CurveToLine(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'),2));
st_astext
------------------------------
 LINESTRING(220268 150415,220287.740300149 150448.342699654,220278.12195122 150485.87804878,
 220244.779251566 150505.61834893,220207.243902439 150496,220187.50360229 150462.657300346,
 220197.12195122 150425.12195122,220227 150406)


		</pre></div><div class="refsection" title="See Also"><a name="idp78823248"></a><h2>See Also</h2><p><a class="xref" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a></p></div></div><div class="refentry" title="ST_DelaunayTriangles"><div class="refentry.separator"><hr></div><a name="ST_DelaunayTriangles"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DelaunayTriangles — 
Return a Delaunay triangulation around the given input points.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_DelaunayTriangles</b>(</code>geometry  <var class="pdparam">g1</var>, float  <var class="pdparam">tolerance</var>, int4  <var class="pdparam">flags</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78843600"></a><h2>Description</h2><p>
Return a <a class="ulink" href="http://en.wikipedia.org/wiki/Delaunay_triangulation" target="_top">Delaunay
triangulation</a> around the vertices of the input geometry.
Output is a COLLECTION of polygons (for flags=0) or a MULTILINESTRING
(for flags=1) or TIN (for flags=2).  The tolerance, if any, is used to snap input vertices
togheter.
			</p><p>Availability: 2.1.0 - requires GEOS &gt;= 3.4.0.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="2D Examples"><a name="idp78848592"></a><h2>2D Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles01.png"><div class="caption"><p>Original polygons</p></div></div></div>
<pre class="programlisting">-- our original geometry --
	ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		)</pre></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles03.png"><div class="caption"><p>ST_DelaunayTriangles of 2 polygons: delaunay triangle polygons each triangle themed in different color</p></div></div></div><p>
				</p><pre class="programlisting">
-- geometries overlaid multilinestring triangles
SELECT
	ST_DelaunayTriangles(
		ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		))
	 As  dtriag;
				</pre><p>
						  </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles02.png"><div class="caption"><p>-- delaunay triangles as multilinestring</p></div></div></div><p>
				</p><pre class="programlisting">SELECT
	ST_DelaunayTriangles(
		ST_Union(ST_GeomFromText('POLYGON((175 150, 20 40,
			50 60, 125 100, 175 150))'),
		ST_Buffer(ST_GeomFromText('POINT(110 170)'), 20)
		),0.001,1)
	 As  dtriag;</pre><p>
						</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_delaunaytriangles04.png"><div class="caption"><p>-- delaunay triangles of 45 points as 55 triangle polygons</p></div></div></div><p>
				</p><pre class="programlisting">-- this produces a table of 42 points that form an L shape
SELECT (ST_DumpPoints(ST_GeomFromText(
'MULTIPOINT(14 14,34 14,54 14,74 14,94 14,114 14,134 14,
150 14,154 14,154 6,134 6,114 6,94 6,74 6,54 6,34 6,
14 6,10 6,8 6,7 7,6 8,6 10,6 30,6 50,6 70,6 90,6 110,6 130,
6 150,6 170,6 190,6 194,14 194,14 174,14 154,14 134,14 114,
14 94,14 74,14 54,14 34,14 14)'))).geom
	INTO TABLE l_shape;
-- output as individual polygon triangles
SELECT ST_AsText((ST_Dump(geom)).geom) As wkt
FROM ( SELECT ST_DelaunayTriangles(ST_Collect(geom)) As geom
FROM l_shape) As foo;

---wkt ---
POLYGON((6 194,6 190,14 194,6 194))
POLYGON((14 194,6 190,14 174,14 194))
POLYGON((14 194,14 174,154 14,14 194))
POLYGON((154 14,14 174,14 154,154 14))
POLYGON((154 14,14 154,150 14,154 14))
POLYGON((154 14,150 14,154 6,154 14))
:
:
</pre><p>
						</p></td></tr></tbody></table></div></div><div class="refsection" title="3D Examples"><a name="idp78876368"></a><h2>3D Examples</h2><pre class="programlisting">-- 3D multipoint --
SELECT ST_AsText(ST_DelaunayTriangles(ST_GeomFromText(
'MULTIPOINT Z(14 14 10,
150 14 100,34 6 25, 20 10 150)'))) As wkt;

-----wkt----
GEOMETRYCOLLECTION Z (POLYGON Z ((14 14 10,20 10 150,34 6 25,14 14 10))
 ,POLYGON Z ((14 14 10,34 6 25,150 14 100,14 14 10)))</pre></div><div class="refsection" title="See Also"><a name="idp78877648"></a><h2>See Also</h2><p><a class="xref" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>
			</p></div></div><div class="refentry" title="ST_Difference"><div class="refentry.separator"><hr></div><a name="ST_Difference"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Difference — Returns a geometry that represents that part of geometry A
			that does not intersect with geometry B.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Difference</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78885200"></a><h2>Description</h2><p>Returns a geometry that represents that part of geometry A
			that does not intersect with geometry B.  One can think of this as GeometryA - ST_Intersection(A,B).  If A is completely contained in B
			then an empty geometry collection is returned.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note - order matters. B - A will always return a portion of B</p></td></tr></table></div><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a GeometryCollection as an argument</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.20</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index. However it seems to only consider x y when
		  doing the difference and tacks back on the Z-Index</p></div><div class="refsection" title="Examples"><a name="idp78892368"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
						<p>
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference01.png"><div class="caption"><p>The original linestrings shown together. </p></div></div></div><p>
						</p>
					</td><td>
						<div class="informalfigure"><div class="mediaobject"><img src="images/st_difference01.png"><div class="caption"><p>The difference of the two linestrings</p></div></div></div><p>
					</p>
				</td></tr></tbody></table></div><pre class="programlisting">
--Safe for 2d. This is same geometries as what is shown for st_symdifference
SELECT ST_AsText(
	ST_Difference(
			ST_GeomFromText('LINESTRING(50 100, 50 200)'),
			ST_GeomFromText('LINESTRING(50 50, 50 150)')
		)
	);

st_astext
---------
LINESTRING(50 150,50 200)
</pre><pre class="programlisting">

--When used in 3d doesn't quite do the right thing
SELECT ST_AsEWKT(ST_Difference(ST_GeomFromEWKT('MULTIPOINT(-118.58 38.38 5,-118.60 38.329 6,-118.614 38.281 7)'), ST_GeomFromEWKT('POINT(-118.614 38.281 5)')));
st_asewkt
---------
MULTIPOINT(-118.6 38.329 6,-118.58 38.38 5)
		</pre></div><div class="refsection" title="See Also"><a name="idp78901968"></a><h2>See Also</h2><p><a class="xref" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a></p></div></div><div class="refentry" title="ST_Dump"><div class="refentry.separator"><hr></div><a name="ST_Dump"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Dump — Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <b class="fsfunc">ST_Dump</b>(</code>geometry  <var class="pdparam">g1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78916176"></a><h2>Description</h2><p>This is a set-returning function (SRF). It returns a set of
			geometry_dump rows, formed by a geometry (geom) and an array of
			integers (path). When the input geometry is a simple type
			(POINT,LINESTRING,POLYGON) a single record will be returned with
			an empty path array and the input geometry as geom. When the input
			geometry is a collection or multi it will return a record for each
			of the collection components, and the path will express the
			position of the component inside the collection.</p><p>ST_Dump is useful for expanding geometries. It is the
			reverse of a GROUP BY in that it creates new rows. For example it
			can be use to expand MULTIPOLYGONS into POLYGONS.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Availability: PostGIS 1.0.0RC1. Requires PostgreSQL 7.3 or higher.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Prior to 1.3.4, this function crashes if used with geometries that contain CURVES.  This is fixed in 1.3.4+</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Standard Examples"><a name="idp78924496"></a><h2>Standard Examples</h2><pre class="programlisting">SELECT sometable.field1, sometable.field1,
      (ST_Dump(sometable.the_geom)).geom AS the_geom
FROM sometable;

-- Break a compound curve into its constituent linestrings and circularstrings
SELECT ST_AsEWKT(a.geom), ST_HasArc(a.geom)
  FROM ( SELECT (ST_Dump(p_geom)).geom AS geom
         FROM (SELECT ST_GeomFromEWKT('COMPOUNDCURVE(CIRCULARSTRING(0 0, 1 1, 1 0),(1 0, 0 1))') AS p_geom) AS b
        ) AS a;
          st_asewkt          | st_hasarc
-----------------------------+----------
 CIRCULARSTRING(0 0,1 1,1 0) | t
 LINESTRING(1 0,0 1)         | f
(2 rows)</pre></div><div class="refsection" title="Polyhedral Surfaces, TIN and Triangle Examples"><a name="idp78925776"></a><h2>Polyhedral Surfaces, TIN and Triangle Examples</h2><pre class="programlisting">-- Polyhedral surface example
-- Break a Polyhedral surface into its faces
SELECT (a.p_geom).path[1] As path, ST_AsEWKT((a.p_geom).geom) As geom_ewkt
  FROM (SELECT ST_Dump(ST_GeomFromEWKT('POLYHEDRALSURFACE(
((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),  ((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)),  ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1))
)') ) AS p_geom )  AS a;

 path |                geom_ewkt
------+------------------------------------------
    1 | POLYGON((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0))
    2 | POLYGON((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0))
    3 | POLYGON((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0))
    4 | POLYGON((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0))
    5 | POLYGON((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0))
    6 | POLYGON((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1))</pre><pre class="programlisting">-- TIN --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_Dump( ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )') ) AS gdump
    ) AS g;
-- result --
 path |                 wkt
------+-------------------------------------
 {1}  | TRIANGLE((0 0 0,0 0 1,0 1 0,0 0 0))
 {2}  | TRIANGLE((0 0 0,0 1 0,1 1 0,0 0 0))
</pre></div><div class="refsection" title="See Also"><a name="idp78927440"></a><h2>See Also</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions">Section 14.6, “PostGIS Geometry / Geography / Raster Dump Functions”</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a></p></div></div><div class="refentry" title="ST_DumpPoints"><div class="refentry.separator"><hr></div><a name="ST_DumpPoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DumpPoints — Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[]<b class="fsfunc">ST_DumpPoints</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp78934992"></a><h2>Description</h2><p>This set-returning function (SRF) returns a set of <code class="varname">geometry_dump</code> rows formed
				    by a geometry (<code class="varname">geom</code>) and an array of integers (<code class="varname">path</code>).</p><p>The <em class="parameter"><code>geom</code></em> component of <code class="varname">geometry_dump</code> are
				    all the <code class="varname">POINT</code>s that make up the supplied geometry</p><p>The <em class="parameter"><code>path</code></em> component of <code class="varname">geometry_dump</code> (an <code class="varname">integer[]</code>)
				    is an index reference enumerating the <code class="varname">POINT</code>s of the supplied geometry.
					For example, if a <code class="varname">LINESTRING</code> is supplied, a path of <code class="varname">{i}</code> is
					returned where <code class="varname">i</code> is the <code class="varname">nth</code> coordinate in the <code class="varname">LINESTRING</code>.
					If a <code class="varname">POLYGON</code> is supplied, a path of <code class="varname">{i,j}</code> is returned where
					<code class="varname">i</code> is the ring number (1 is outer; inner rings follow) and <code class="varname">j</code>
					enumerates the <code class="varname">POINT</code>s (again 1-based index).
				</p><p>Enhanced: 2.1.0 Faster speed. Reimplemented as native-C.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Availability: 1.5.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Classic Explode a Table of LineStrings into nodes"><a name="idp78955728"></a><h2>Classic Explode a Table of LineStrings into nodes</h2><pre class="programlisting">SELECT edge_id, (dp).path[1] As index, ST_AsText((dp).geom) As wktnode
FROM (SELECT 1 As edge_id
	, ST_DumpPoints(ST_GeomFromText('LINESTRING(1 2, 3 4, 10 10)')) AS dp
     UNION ALL
     SELECT 2 As edge_id
	, ST_DumpPoints(ST_GeomFromText('LINESTRING(3 5, 5 6, 9 10)')) AS dp
   ) As foo;
 edge_id | index |    wktnode
---------+-------+--------------
       1 |     1 | POINT(1 2)
       1 |     2 | POINT(3 4)
       1 |     3 | POINT(10 10)
       2 |     1 | POINT(3 5)
       2 |     2 | POINT(5 6)
       2 |     3 | POINT(9 10)</pre></div><div class="refsection" title="Standard Geometry Examples"><a name="idp78956880"></a><h2>Standard Geometry Examples</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_dumppoints01.png"></div></div><pre class="programlisting">SELECT path, ST_AsText(geom)
FROM (
  SELECT (ST_DumpPoints(g.geom)).*
  FROM
    (SELECT
       'GEOMETRYCOLLECTION(
          POINT ( 0 1 ),
          LINESTRING ( 0 3, 3 4 ),
          POLYGON (( 2 0, 2 3, 0 2, 2 0 )),
          POLYGON (( 3 0, 3 3, 6 3, 6 0, 3 0 ),
                   ( 5 1, 4 2, 5 2, 5 1 )),
          MULTIPOLYGON (
                  (( 0 5, 0 8, 4 8, 4 5, 0 5 ),
                   ( 1 6, 3 6, 2 7, 1 6 )),
                  (( 5 4, 5 8, 6 7, 5 4 ))
          )
        )'::geometry AS geom
    ) AS g
  ) j;

   path    | st_astext
-----------+------------
 {1,1}     | POINT(0 1)
 {2,1}     | POINT(0 3)
 {2,2}     | POINT(3 4)
 {3,1,1}   | POINT(2 0)
 {3,1,2}   | POINT(2 3)
 {3,1,3}   | POINT(0 2)
 {3,1,4}   | POINT(2 0)
 {4,1,1}   | POINT(3 0)
 {4,1,2}   | POINT(3 3)
 {4,1,3}   | POINT(6 3)
 {4,1,4}   | POINT(6 0)
 {4,1,5}   | POINT(3 0)
 {4,2,1}   | POINT(5 1)
 {4,2,2}   | POINT(4 2)
 {4,2,3}   | POINT(5 2)
 {4,2,4}   | POINT(5 1)
 {5,1,1,1} | POINT(0 5)
 {5,1,1,2} | POINT(0 8)
 {5,1,1,3} | POINT(4 8)
 {5,1,1,4} | POINT(4 5)
 {5,1,1,5} | POINT(0 5)
 {5,1,2,1} | POINT(1 6)
 {5,1,2,2} | POINT(3 6)
 {5,1,2,3} | POINT(2 7)
 {5,1,2,4} | POINT(1 6)
 {5,2,1,1} | POINT(5 4)
 {5,2,1,2} | POINT(5 8)
 {5,2,1,3} | POINT(6 7)
 {5,2,1,4} | POINT(5 4)
(29 rows)</pre></div><div class="refsection" title="Polyhedral Surfaces, TIN and Triangle Examples"><a name="idp78959952"></a><h2>Polyhedral Surfaces, TIN and Triangle Examples</h2><pre class="programlisting">-- Polyhedral surface cube --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints(ST_GeomFromEWKT('POLYHEDRALSURFACE( ((0 0 0, 0 0 1, 0 1 1, 0 1 0, 0 0 0)),
((0 0 0, 0 1 0, 1 1 0, 1 0 0, 0 0 0)), ((0 0 0, 1 0 0, 1 0 1, 0 0 1, 0 0 0)),
((1 1 0, 1 1 1, 1 0 1, 1 0 0, 1 1 0)),
((0 1 0, 0 1 1, 1 1 1, 1 1 0, 0 1 0)), ((0 0 1, 1 0 1, 1 1 1, 0 1 1, 0 0 1)) )') ) AS gdump
    ) AS g;
-- result --
  path   |     wkt
---------+--------------
 {1,1,1} | POINT(0 0 0)
 {1,1,2} | POINT(0 0 1)
 {1,1,3} | POINT(0 1 1)
 {1,1,4} | POINT(0 1 0)
 {1,1,5} | POINT(0 0 0)
 {2,1,1} | POINT(0 0 0)
 {2,1,2} | POINT(0 1 0)
 {2,1,3} | POINT(1 1 0)
 {2,1,4} | POINT(1 0 0)
 {2,1,5} | POINT(0 0 0)
 {3,1,1} | POINT(0 0 0)
 {3,1,2} | POINT(1 0 0)
 {3,1,3} | POINT(1 0 1)
 {3,1,4} | POINT(0 0 1)
 {3,1,5} | POINT(0 0 0)
 {4,1,1} | POINT(1 1 0)
 {4,1,2} | POINT(1 1 1)
 {4,1,3} | POINT(1 0 1)
 {4,1,4} | POINT(1 0 0)
 {4,1,5} | POINT(1 1 0)
 {5,1,1} | POINT(0 1 0)
 {5,1,2} | POINT(0 1 1)
 {5,1,3} | POINT(1 1 1)
 {5,1,4} | POINT(1 1 0)
 {5,1,5} | POINT(0 1 0)
 {6,1,1} | POINT(0 0 1)
 {6,1,2} | POINT(1 0 1)
 {6,1,3} | POINT(1 1 1)
 {6,1,4} | POINT(0 1 1)
 {6,1,5} | POINT(0 0 1)
(30 rows)</pre><pre class="programlisting">-- Triangle --
SELECT (g.gdump).path, ST_AsText((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints( ST_GeomFromEWKT('TRIANGLE ((
                0 0,
                0 9,
                9 0,
                0 0
            ))') ) AS gdump
    ) AS g;
-- result --
 path |    wkt
------+------------
 {1}  | POINT(0 0)
 {2}  | POINT(0 9)
 {3}  | POINT(9 0)
 {4}  | POINT(0 0)
</pre><pre class="programlisting">-- TIN --
SELECT (g.gdump).path, ST_AsEWKT((g.gdump).geom) as wkt
  FROM
    (SELECT
       ST_DumpPoints( ST_GeomFromEWKT('TIN (((
                0 0 0,
                0 0 1,
                0 1 0,
                0 0 0
            )), ((
                0 0 0,
                0 1 0,
                1 1 0,
                0 0 0
            ))
            )') ) AS gdump
    ) AS g;
-- result --
  path   |     wkt
---------+--------------
 {1,1,1} | POINT(0 0 0)
 {1,1,2} | POINT(0 0 1)
 {1,1,3} | POINT(0 1 0)
 {1,1,4} | POINT(0 0 0)
 {2,1,1} | POINT(0 0 0)
 {2,1,2} | POINT(0 1 0)
 {2,1,3} | POINT(1 1 0)
 {2,1,4} | POINT(0 0 0)
(8 rows)
</pre></div><div class="refsection" title="See Also"><a name="idp78962256"></a><h2>See Also</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions">Section 14.6, “PostGIS Geometry / Geography / Raster Dump Functions”</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a></p></div></div><div class="refentry" title="ST_DumpRings"><div class="refentry.separator"><hr></div><a name="ST_DumpRings"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DumpRings — Returns a set of <code class="varname">geometry_dump</code> rows, representing
			the exterior and interior rings of a polygon.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry_dump[] <b class="fsfunc">ST_DumpRings</b>(</code>geometry  <var class="pdparam">a_polygon</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79006672"></a><h2>Description</h2><p>This is a set-returning function (SRF). It returns a set of
			<code class="varname">geometry_dump</code> rows, defined as an <code class="varname">integer[]</code>
			and a <code class="varname">geometry</code>, aliased "path" and "geom" respectively.
			The "path" field holds the polygon ring index containing a single integer: 0 for the shell, &gt;0 for holes.
			The "geom" field contains the corresponding ring as a polygon.</p><p>Availability: PostGIS 1.1.3. Requires PostgreSQL 7.3 or higher.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This only works for POLYGON geometries. It will not work for MULTIPOLYGONS</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp79011280"></a><h2>Examples</h2><pre class="programlisting">SELECT sometable.field1, sometable.field1,
	  (ST_DumpRings(sometable.the_geom)).geom As the_geom
FROM sometableOfpolys;

SELECT ST_AsEWKT(geom) As the_geom, path
	FROM ST_DumpRings(
		ST_GeomFromEWKT('POLYGON((-8149064 5133092 1,-8149064 5132986 1,-8148996 5132839 1,-8148972 5132767 1,-8148958 5132508 1,-8148941 5132466 1,-8148924 5132394 1,
		-8148903 5132210 1,-8148930 5131967 1,-8148992 5131978 1,-8149237 5132093 1,-8149404 5132211 1,-8149647 5132310 1,-8149757 5132394 1,
		-8150305 5132788 1,-8149064 5133092 1),
		(-8149362 5132394 1,-8149446 5132501 1,-8149548 5132597 1,-8149695 5132675 1,-8149362 5132394 1))')
		)  as foo;
 path |                                            the_geom
----------------------------------------------------------------------------------------------------------------
  {0} | POLYGON((-8149064 5133092 1,-8149064 5132986 1,-8148996 5132839 1,-8148972 5132767 1,-8148958 5132508 1,
	  |          -8148941 5132466 1,-8148924 5132394 1,
	  |          -8148903 5132210 1,-8148930 5131967 1,
	  |          -8148992 5131978 1,-8149237 5132093 1,
	  |          -8149404 5132211 1,-8149647 5132310 1,-8149757 5132394 1,-8150305 5132788 1,-8149064 5133092 1))
  {1} | POLYGON((-8149362 5132394 1,-8149446 5132501 1,
	  |          -8149548 5132597 1,-8149695 5132675 1,-8149362 5132394 1))</pre></div><div class="refsection" title="See Also"><a name="idp79017040"></a><h2>See Also</h2><p><a class="xref" href="#geometry_dump" title="geometry_dump">geometry_dump</a>, <a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions">Section 14.6, “PostGIS Geometry / Geography / Raster Dump Functions”</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>, <a class="xref" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a></p></div></div><div class="refentry" title="ST_FlipCoordinates"><div class="refentry.separator"><hr></div><a name="ST_FlipCoordinates"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_FlipCoordinates — Returns a version of the given geometry with
				X and Y axis flipped. Useful for people
				who have built latitude/longitude features
				and need to fix them.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_FlipCoordinates</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79024464"></a><h2>Description</h2><p>Returns a version of the given geometry with X and Y axis flipped.</p><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Example"><a name="idp79033040"></a><h2>Example</h2><pre class="programlisting">
SELECT ST_AsEWKT(ST_FlipCoordinates(GeomFromEWKT('POINT(1 2)')));
 st_asewkt
------------
POINT(2 1)
		 </pre></div><div class="refsection" title="See Also"><a name="idp79034576"></a><h2>See Also</h2><p> <a class="xref" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> </p></div></div><div class="refentry" title="ST_GeneratePoints"><div class="refentry.separator"><hr></div><a name="ST_GeneratePoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeneratePoints — Converts a polygon or multi-polygon into a multi-point composed of randomly location points within the original areas.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GeneratePoints</b>(</code>
				<var class="pdparam">g</var>
				geometry
			, 
				<var class="pdparam">npoints</var>
				numeric
			<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79046608"></a><h2>Description</h2><p>
			ST_GeneratePoints generates pseudo-random points until the requested number are
			found within the input area.
		</p><p>Availability: 2.3.0</p></div><div class="refsection" title="Examples"><a name="idp79048272"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
						<div class="informalfigure"><div class="mediaobject"><img src="images/st_generatepoints01.png"><div class="caption"><p>Original Polygon</p></div></div></div><p>
						</p>
					</td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_generatepoints02.png"><div class="caption"><p>Generated 12 Points overlaid on top of original polygon</p></div></div></div><p>
						</p><pre class="programlisting">SELECT ST_GeneratePoints(
	ST_Buffer(
		ST_GeomFromText(
		'LINESTRING(50 50,150 150,150 50)'
		), 10, 'endcap=round join=round'), 12);</pre><p>
					</p></td></tr></tbody></table></div></div></div><div class="refentry" title="ST_Intersection"><div class="refentry.separator"><hr></div><a name="ST_Intersection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Intersection — 
(T)
Returns a geometry that represents the shared portion of geomA and geomB.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Intersection</b>(</code>
						geometry
						<var class="pdparam">geomA</var>
					, 
						geometry
						<var class="pdparam">geomB</var>
					<code>)</code>;</p><p><code class="funcdef">geography <b class="fsfunc">ST_Intersection</b>(</code>
						geography
						<var class="pdparam">geogA</var>
					, 
						geography
						<var class="pdparam">geogB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79074896"></a><h2>Description</h2><p>Returns a geometry that represents the point set
				intersection of the Geometries.</p><p>In other words - that portion of geometry A and geometry B
			that is shared between the two geometries.</p><p>If the geometries do not share any space (are disjoint), then an empty geometry collection
			is returned.</p><p>ST_Intersection in conjunction with ST_Intersects is very useful for clipping geometries such as in bounding box, buffer, region
				queries where you only want to return that portion of a geometry that sits in a country or region of interest.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Geography: For geography this is really a thin wrapper around the geometry implementation. It first determines the best SRID that
					fits the bounding box of the 2 geography objects (if geography objects are within one half zone UTM but not same UTM will pick one of those) (favoring UTM or Lambert Azimuthal Equal Area (LAEA) north/south pole, and falling back on mercator in worst case scenario)  and then intersection in that best fit planar spatial ref and retransforms back to WGS84 geography.</p></td></tr></table></div><div class="important" title="Important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a <code class="varname">GEOMETRYCOLLECTION</code> as an argument</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If working with 3D geometries, you may want to use SFGCAL based <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> which does a proper 3D intersection for 3D geometries.  Although this function works with Z-coordinate, it does an averaging of Z-Coordinate values when <code class="code">postgis.backend=geos</code>. <code class="code">postgis.backend=sfcgal</code>, it will return a 2D geometry regardless ignoring the Z-Coordinate. Refer to <a class="xref" href="#postgis_backend" title="postgis.backend">postgis.backend</a> for details.</p></td></tr></table></div><p>Performed by the GEOS module</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method is also provided by SFCGAL backend.</p><p>Availability: 1.5 support for geography data type was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.18</p></div><div class="refsection" title="Examples"><a name="idp79094608"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_Intersection('POINT(0 0)'::geometry, 'LINESTRING ( 2 0, 0 2 )'::geometry));
 st_astext
---------------
GEOMETRYCOLLECTION EMPTY
(1 row)
SELECT ST_AsText(ST_Intersection('POINT(0 0)'::geometry, 'LINESTRING ( 0 0, 0 2 )'::geometry));
 st_astext
---------------
POINT(0 0)
(1 row)

---Clip all lines (trails) by country (here we assume country geom are POLYGON or MULTIPOLYGONS)
-- NOTE: we are only keeping intersections that result in a LINESTRING or MULTILINESTRING because we don't
-- care about trails that just share a point
-- the dump is needed to expand a geometry collection into individual single MULT* parts
-- the below is fairly generic and will work for polys, etc. by just changing the where clause
SELECT clipped.gid, clipped.f_name, clipped_geom
FROM (SELECT trails.gid, trails.f_name, (ST_Dump(ST_Intersection(country.the_geom, trails.the_geom))).geom As clipped_geom
FROM country
	INNER JOIN trails
	ON ST_Intersects(country.the_geom, trails.the_geom))  As clipped
	WHERE ST_Dimension(clipped.clipped_geom) = 1 ;

--For polys e.g. polygon landmarks, you can also use the sometimes faster hack that buffering anything by 0.0
-- except a polygon results in an empty geometry collection
--(so a geometry collection containing polys, lines and points)
-- buffered by 0.0 would only leave the polygons and dissolve the collection shell
SELECT poly.gid,  ST_Multi(ST_Buffer(
				ST_Intersection(country.the_geom, poly.the_geom),
				0.0)
				) As clipped_geom
FROM country
	INNER JOIN poly
	ON ST_Intersects(country.the_geom, poly.the_geom)
	WHERE Not ST_IsEmpty(ST_Buffer(ST_Intersection(country.the_geom, poly.the_geom),0.0));
		</pre></div><div class="refsection" title="Examples: 2.5Dish"><a name="idp79095888"></a><h2>Examples: 2.5Dish</h2><p>Geos is the default backend if not set. Note this is not a true intersection, compare to the same example using <a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>.</p><pre class="programlisting">
set postgis.backend=geos;
select ST_AsText(ST_Intersection(linestring, polygon)) As wkt
from  ST_GeomFromText('LINESTRING Z (2 2 6,1.5 1.5 7,1 1 8,0.5 0.5 8,0 0 10)') AS linestring
 CROSS JOIN ST_GeomFromText('POLYGON((0 0 8, 0 1 8, 1 1 8, 1 0 8, 0 0 8))') AS polygon;

               st_astext
---------------------------------------
 LINESTRING Z (1 1 8,0.5 0.5 8,0 0 10)
		</pre><p>If your PostGIS is compiled with sfcgal support, have option of using sfcgal, but note if basically cases down both geometries to 2D before doing intersection
		and returns the ST_Force2D equivalent result which is a 2D geometry</p><pre class="programlisting">
set postgis.backend=sfcgal;
select ST_AsText(ST_Intersection(linestring, polygon)) As wkt
from  ST_GeomFromText('LINESTRING Z (2 2 6,1.5 1.5 7,1 1 8,0.5 0.5 8,0 0 10)') AS linestring
 CROSS JOIN ST_GeomFromText('POLYGON((0 0 8, 0 1 8, 1 1 8, 1 0 8, 0 0 8))') AS polygon;

                     wkt
----------------------------------------------
 MULTILINESTRING((0.5 0.5,0 0),(1 1,0.5 0.5))
		</pre></div><div class="refsection" title="See Also"><a name="idp79098960"></a><h2>See Also</h2><p><a class="xref" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>, <a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a>, <a class="xref" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>, <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>, <a class="xref" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>, <a class="xref" href="#ST_Multi" title="ST_Multi">ST_Multi</a></p></div></div><div class="refentry" title="ST_LineToCurve"><div class="refentry.separator"><hr></div><a name="ST_LineToCurve"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineToCurve — Converts a LINESTRING/POLYGON to a CIRCULARSTRING, CURVEPOLYGON</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineToCurve</b>(</code>geometry  <var class="pdparam">geomANoncircular</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79107664"></a><h2>Description</h2><p>Converts plain LINESTRING/POLYGONS to CIRCULAR STRINGs and Curved Polygons.  Note much fewer points are needed to describe the curved equivalent.</p><p>Availability: 1.2.2?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples: 2D"><a name="idp79111888"></a><h2>Examples: 2D</h2><pre class="programlisting">
SELECT ST_AsText(ST_LineToCurve(foo.the_geom)) As curvedastext,ST_AsText(foo.the_geom) As non_curvedastext
	FROM (SELECT ST_Buffer('POINT(1 3)'::geometry, 3) As the_geom) As foo;

curvedatext                                                            non_curvedastext
--------------------------------------------------------------------|-----------------------------------------------------------------
CURVEPOLYGON(CIRCULARSTRING(4 3,3.12132034355964 0.878679656440359, | POLYGON((4 3,3.94235584120969 2.41472903395162,3.77163859753386 1.85194970290473,
1 0,-1.12132034355965 5.12132034355963,4 3))                        |  3.49440883690764 1.33328930094119,3.12132034355964 0.878679656440359,
                                                                    |  2.66671069905881 0.505591163092366,2.14805029709527 0.228361402466141,
                                                                    |  1.58527096604839 0.0576441587903094,1 0,
                                                                    |  0.414729033951621 0.0576441587903077,-0.148050297095264 0.228361402466137,
                                                                    |  -0.666710699058802 0.505591163092361,-1.12132034355964 0.878679656440353,
                                                                    |  -1.49440883690763 1.33328930094119,-1.77163859753386 1.85194970290472
                                                                    |  --ETC-- ,3.94235584120969 3.58527096604839,4 3))
--3D example
SELECT ST_AsEWKT(ST_LineToCurve(ST_GeomFromEWKT('LINESTRING(1 2 3, 3 4 8, 5 6 4, 7 8 4, 9 10 4)')));

			 st_asewkt
------------------------------------
 CIRCULARSTRING(1 2 3,5 6 4,9 10 4)

		</pre></div><div class="refsection" title="See Also"><a name="idp79113424"></a><h2>See Also</h2><p><a class="xref" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a></p></div></div><div class="refentry" title="ST_MakeValid"><div class="refentry.separator"><hr></div><a name="ST_MakeValid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeValid — Attempts to make an invalid geometry valid without losing vertices.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MakeValid</b>(</code>geometry <var class="pdparam">input</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79119440"></a><h2>Description</h2><p>
    The function attempts to create a valid representation of a given invalid
    geometry without losing any of the input vertices.
    Already-valid geometries are returned without further intervention.
    </p><p>
    Supported inputs are: POINTS, MULTIPOINTS, LINESTRINGS,
    MULTILINESTRINGS, POLYGONS, MULTIPOLYGONS and GEOMETRYCOLLECTIONS
    containing any mix of them.
    </p><p>
    In case of full or partial dimensional collapses, the output geometry
    may be a collection of lower-to-equal dimension geometries or a
    geometry of lower dimension.
    </p><p>
    Single polygons may become multi-geometries in case of self-intersections.
    </p><p>Availability: 2.0.0, requires GEOS-3.3.0</p><p>Enhanced: 2.0.1, speed improvements requires GEOS-3.3.4</p><p>Enhanced: 2.1.0 added support for GEOMETRYCOLLECTION and MULTIPOINT.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="See Also"><a name="idp79124304"></a><h2>See Also</h2><p>
                <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>
                <a class="xref" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a>
            </p></div></div><div class="refentry" title="ST_MemUnion"><div class="refentry.separator"><hr></div><a name="ST_MemUnion"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MemUnion — Same as ST_Union, only memory-friendly (uses less memory
			and more processor time).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MemUnion</b>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79130960"></a><h2>Description</h2><p>Some useful description here.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Same as ST_Union, only memory-friendly (uses less memory
			and more processor time).  This aggregate function works by unioning the geometries one at a time to previous result as opposed to
			ST_Union aggregate which first creates an array and then unions</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp79134544"></a><h2>Examples</h2><pre class="programlisting">See ST_Union</pre></div><div class="refsection" title="See Also"><a name="idp79136208"></a><h2>See Also</h2><p><a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" title="ST_MinimumBoundingCircle"><div class="refentry.separator"><hr></div><a name="ST_MinimumBoundingCircle"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinimumBoundingCircle — Returns the smallest circle polygon that can fully contain a geometry. Default
		uses 48 segments per quarter circle.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MinimumBoundingCircle</b>(</code>geometry  <var class="pdparam">geomA</var>, integer  <var class="pdparam">num_segs_per_qt_circ=48</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79143504"></a><h2>Description</h2><p>Returns the smallest circle polygon that can fully contain a geometry. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The circle is approximated by a polygon with a default of 48 segments per quarter circle.  Because the polygon is an approximation of the minimum bounding circle, some points in the input geometry may not be contained within the polygon.  The approximation can be improved by increasing the number of segments, with little performance penalty.  For applications where a polygonal approximation is not suitable, ST_MinimumBoundingRadius may be used.</p></td></tr></table></div><p>It is often used with MULTI and Geometry Collections.
		Although it is not an aggregate - you can use it in conjunction
		with ST_Collect to get the minimum bounding circle of a set of geometries.
		ST_MinimumBoundingCircle(ST_Collect(somepointfield)).</p><p>The ratio of the area of a polygon divided by the area of its Minimum Bounding Circle is often referred to as the Roeck test.</p><p>Availability: 1.4.0 - requires GEOS</p></div><div class="refsection" title="See Also"><a name="idp79146448"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a></p></div><div class="refsection" title="Examples"><a name="idp79148112"></a><h2>Examples</h2><pre class="programlisting">SELECT d.disease_type,
	ST_MinimumBoundingCircle(ST_Collect(d.the_geom)) As the_geom
	FROM disease_obs As d
	GROUP BY d.disease_type;
</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_minimumboundingcircle01.png"><div class="caption"><p>Minimum bounding circle of a point and linestring.  Using 8 segs to approximate a quarter circle</p></div></div></div><pre class="programlisting">
SELECT ST_AsText(ST_MinimumBoundingCircle(
		ST_Collect(
			ST_GeomFromEWKT('LINESTRING(55 75,125 150)'),
				ST_Point(20, 80)), 8
				)) As wktmbc;
wktmbc
-----------
POLYGON((135.59714732062 115,134.384753327498 102.690357210921,130.79416296937 90.8537670908995,124.963360620072 79.9451031602111,117.116420743937 70.3835792560632,107.554896839789 62.5366393799277,96.6462329091006 56.70583703063,84.8096427890789 53.115246672502,72.5000000000001 51.9028526793802,60.1903572109213 53.1152466725019,48.3537670908996 56.7058370306299,37.4451031602112 62.5366393799276,27.8835792560632 70.383579256063,20.0366393799278 79.9451031602109,14.20583703063 90.8537670908993,10.615246672502 102.690357210921,9.40285267938019 115,10.6152466725019 127.309642789079,14.2058370306299 139.1462329091,20.0366393799275 150.054896839789,27.883579256063 159.616420743937,
37.4451031602108 167.463360620072,48.3537670908992 173.29416296937,60.190357210921 176.884753327498,
72.4999999999998 178.09714732062,84.8096427890786 176.884753327498,96.6462329091003 173.29416296937,107.554896839789 167.463360620072,
117.116420743937 159.616420743937,124.963360620072 150.054896839789,130.79416296937 139.146232909101,134.384753327498 127.309642789079,135.59714732062 115))
				</pre></div><div class="refsection" title="See Also"><a name="idp79152208"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a></p></div></div><div class="refentry" title="ST_MinimumBoundingRadius"><div class="refentry.separator"><hr></div><a name="ST_MinimumBoundingRadius"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinimumBoundingRadius — Returns the center point and radius of the smallest circle that can fully contain a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(geometry, double precision) <b class="fsfunc">ST_MinimumBoundingRadius</b>(</code>geometry <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79158480"></a><h2>Description</h2><p>Returns a record containing the center point and radius of the smallest circle that can fully contain a geometry.</p><p>Can be used in conjunction with <a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a> to get the minimum bounding circle of a set of geometries.</p><p>Availability - 2.3.0</p></div><div class="refsection" title="See Also"><a name="idp79161040"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>, <a class="xref" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a></p></div><div class="refsection" title="Examples"><a name="idp79162704"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(center), radius FROM ST_MinimumBoundingRadius('POLYGON((26426 65078,26531 65242,26075 65136,26096 65427,26426 65078))');

                st_astext                 |      radius
------------------------------------------+------------------
 POINT(26284.8418027133 65267.1145090825) | 247.436045591407
</pre></div></div><div class="refentry" title="ST_Polygonize"><div class="refentry.separator"><hr></div><a name="ST_Polygonize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Polygonize — Aggregate. Creates a GeometryCollection containing possible
			polygons formed from the constituent linework of a set of
			geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Polygonize</b>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Polygonize</b>(</code>geometry[] <var class="pdparam">geom_array</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79170896"></a><h2>Description</h2><p>Creates a GeometryCollection containing possible
			polygons formed from the constituent linework of a set of
			geometries.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Geometry Collections are often difficult to deal with with third party tools, so use ST_Polygonize in conjunction with  <a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a> to dump the polygons
				out into individual polygons.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Input linework must be correctly noded for this function to work properly</p></td></tr></table></div><p>Availability: 1.0.0RC1 - requires GEOS &gt;= 2.1.0.</p></div><div class="refsection" title="Examples: Polygonizing single linestrings"><a name="idp79174608"></a><h2>Examples: Polygonizing single linestrings</h2><pre class="programlisting">
SELECT ST_AsEWKT(ST_Polygonize(the_geom_4269)) As geomtextrep
FROM (SELECT the_geom_4269 FROM ma.suffolk_edges ORDER BY tlid LIMIT 45) As foo;

geomtextrep
-------------------------------------
 SRID=4269;GEOMETRYCOLLECTION(POLYGON((-71.040878 42.285678,-71.040943 42.2856,-71.04096 42.285752,-71.040878 42.285678)),
 POLYGON((-71.17166 42.353675,-71.172026 42.354044,-71.17239 42.354358,-71.171794 42.354971,-71.170511 42.354855,
 -71.17112 42.354238,-71.17166 42.353675)))
(1 row)

--Use ST_Dump to dump out the polygonize geoms into individual polygons
SELECT ST_AsEWKT((ST_Dump(foofoo.polycoll)).geom) As geomtextrep
FROM (SELECT ST_Polygonize(the_geom_4269) As polycoll
	FROM (SELECT the_geom_4269 FROM ma.suffolk_edges
		ORDER BY tlid LIMIT 45) As foo) As foofoo;

geomtextrep
------------------------
 SRID=4269;POLYGON((-71.040878 42.285678,-71.040943 42.2856,-71.04096 42.285752,
-71.040878 42.285678))
 SRID=4269;POLYGON((-71.17166 42.353675,-71.172026 42.354044,-71.17239 42.354358
,-71.171794 42.354971,-71.170511 42.354855,-71.17112 42.354238,-71.17166 42.353675))
(2 rows)

			  </pre></div><div class="refsection" title="See Also"><a name="idp79175888"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>,
			<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>
			</p></div></div><div class="refentry" title="ST_Node"><div class="refentry.separator"><hr></div><a name="ST_Node"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Node — 
Node a set of linestrings.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Node</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79182544"></a><h2>Description</h2><p>
Fully node a set of linestrings using the least possible number of nodes
while preserving all of the input ones.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Due to a bug in GEOS up to 3.3.1 this function fails to node self-intersecting
lines. This is fixed with GEOS 3.3.2 or higher.
		</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp79186256"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsEWKT(
		ST_Node('LINESTRINGZ(0 0 0, 10 10 10, 0 10 5, 10 0 3)'::geometry)
	) As  output;
output
-----------
MULTILINESTRING((0 0 0,5 5 4.5),(5 5 4.5,10 10 10,0 10 5,5 5 4.5),(5 5 4.5,10 0 3))
		</pre></div><div class="refsection" title="See Also"><a name="idp79187792"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>
		</p></div></div><div class="refentry" title="ST_OffsetCurve"><div class="refentry.separator"><hr></div><a name="ST_OffsetCurve"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_OffsetCurve — 
Return an offset line at a given distance and side from an input line. Useful for computing parallel lines about a center line
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_OffsetCurve</b>(</code>geometry  <var class="pdparam">line</var>, float  <var class="pdparam">signed_distance</var>, text  <var class="pdparam">style_parameters=''</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79196240"></a><h2>Description</h2><p>
Return an offset line at a given distance and side from an input line.
All points of the returned geometries are not further than the given
distance from the input geometry.
				</p><p>
For positive distance the offset will be at the left side of the input line
and retain the same direction. For a negative distance it'll be at the right
side and in the opposite direction.
				</p><p>
Availability: 2.0 - requires GEOS &gt;= 3.2, improved with GEOS &gt;= 3.3
				</p><p>
The optional third parameter allows specifying a list of blank-separated
key=value pairs to tweak operations as follows:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'quad_segs=#' : number of segments used to approximate a quarter circle (defaults to 8).</p></li><li class="listitem"><p>'join=round|mitre|bevel' : join style (defaults to "round"). 'miter' is also accepted as a synonym for 'mitre'.</p></li><li class="listitem"><p>'mitre_limit=#.#' : mitre ratio limit (only affects mitred join style). 'miter_limit' is also accepted as a synonym for 'mitre_limit'.</p></li></ul></div><p>
				</p><p>
Units of distance are measured in units of the spatial reference system.
				</p><p>The inputs can only be LINESTRINGS.</p><p>Performed by the GEOS module.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This function ignores the third dimension (z) and will always give a
2-d result even when presented with a 3d-geometry.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp79203280"></a><h2>Examples</h2><p>Compute an open buffer around roads</p><pre class="programlisting">
SELECT ST_Union(
 ST_OffsetCurve(f.the_geom,  f.width/2, 'quad_segs=4 join=round'),
 ST_OffsetCurve(f.the_geom, -f.width/2, 'quad_segs=4 join=round')
) as track
FROM someroadstable;

				</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve01.png"><div class="caption"><p>15, 'quad_segs=4 join=round' original line
and its offset 15 units.</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_OffsetCurve(ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)'),
	15, 'quad_segs=4 join=round'));
--output --
LINESTRING(164 1,18 1,12.2597485145237 2.1418070123307,
	7.39339828220179 5.39339828220179,
	5.39339828220179 7.39339828220179,
	2.14180701233067 12.2597485145237,1 18,1 195)
				</pre><p>
						  </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve02.png"><div class="caption"><p>-15, 'quad_segs=4 join=round' original line
								and its offset -15 units </p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_OffsetCurve(geom,
	-15, 'quad_segs=4 join=round')) As notsocurvy
	FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)') As geom;
-- notsocurvy --
LINESTRING(31 195,31 31,164 31)
				</pre><p>
						</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve05.png"><div class="caption"><p>double-offset to get more curvy, note the first reverses direction, so -30 + 15 = -15</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_OffsetCurve(ST_OffsetCurve(geom,
	-30, 'quad_segs=4 join=round'), -15, 'quad_segs=4 join=round')) As morecurvy
	FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)') As geom;
-- morecurvy --
LINESTRING(164 31,46 31,40.2597485145236 32.1418070123307,
35.3933982822018 35.3933982822018,
32.1418070123307 40.2597485145237,31 46,31 195)
				</pre><p>
						</p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve06.png"><div class="caption"><p>double-offset to get more curvy,combined with regular offset 15 to get parallel lines.  Overlaid with original.</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(ST_Collect(
	ST_OffsetCurve(geom, 15, 'quad_segs=4 join=round'),
	ST_OffsetCurve(ST_OffsetCurve(geom,
	-30, 'quad_segs=4 join=round'), -15, 'quad_segs=4 join=round')
	)
) As parallel_curves
	FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)') As geom;
-- parallel curves  --
MULTILINESTRING((164 1,18 1,12.2597485145237 2.1418070123307,
7.39339828220179 5.39339828220179,5.39339828220179 7.39339828220179,
2.14180701233067 12.2597485145237,1 18,1 195),
(164 31,46 31,40.2597485145236 32.1418070123307,35.3933982822018 35.3933982822018,
32.1418070123307 40.2597485145237,31 46,31 195))
				</pre><p>
						</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve03.png"><div class="caption"><p>15, 'quad_segs=4 join=bevel' shown with original line</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_OffsetCurve(ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)'),
		15, 'quad_segs=4 join=bevel'));
-- output --
LINESTRING(164 1,18 1,7.39339828220179 5.39339828220179,
	5.39339828220179 7.39339828220179,1 18,1 195)
				</pre><p>
						 </p></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_offsetcurve04.png"><div class="caption"><p>15,-15 collected, join=mitre mitre_limit=2.1</p></div></div></div><p>
				</p><pre class="programlisting">
SELECT ST_AsText(ST_Collect(
	ST_OffsetCurve(geom, 15, 'quad_segs=4 join=mitre mitre_limit=2.2'),
	ST_OffsetCurve(geom, -15, 'quad_segs=4 join=mitre mitre_limit=2.2')
	) )
	FROM ST_GeomFromText(
'LINESTRING(164 16,144 16,124 16,104 16,84 16,64 16,
	44 16,24 16,20 16,18 16,17 17,
	16 18,16 20,16 40,16 60,16 80,16 100,
	16 120,16 140,16 160,16 180,16 195)') As geom;
-- output --
MULTILINESTRING((164 1,11.7867965644036 1,1 11.7867965644036,1 195),
	(31 195,31 31,164 31))
				</pre><p>
						  </p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp79234384"></a><h2>See Also</h2><p><a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a></p></div></div><div class="refentry" title="ST_RemoveRepeatedPoints"><div class="refentry.separator"><hr></div><a name="ST_RemoveRepeatedPoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RemoveRepeatedPoints — Returns a version of the given geometry with
				duplicated points removed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_RemoveRepeatedPoints</b>(</code>geometry <var class="pdparam">geom</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79241424"></a><h2>Description</h2><p>Returns a version of the given geometry with
				duplicated points removed. Will actually do something only with
				(multi)lines, (multi)polygons and multipoints but you can safely call it with
				any kind of geometry. Since simplification occurs on a
				object-by-object basis you can also feed a GeometryCollection to
				this function.</p><p>If the tolerance parameter is provided, vertices within the tolerance
        of one another will be considered the "same" for the purposes of removal.</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="See Also"><a name="idp79246288"></a><h2>See Also</h2><p><a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" title="ST_SharedPaths"><div class="refentry.separator"><hr></div><a name="ST_SharedPaths"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SharedPaths — Returns a collection containing paths shared by the two input linestrings/multilinestrings.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SharedPaths</b>(</code>geometry <var class="pdparam">lineal1</var>, geometry <var class="pdparam">lineal2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79253328"></a><h2>Description</h2><p>Returns a collection containing paths shared by the two input geometries.
		    Those going in the same direction are in the first element of the collection, those going in the opposite direction are in the second element.
		    The paths themselves are given in the direction of the first geometry.
		</p><p>Availability: 2.0.0 requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" title="Examples: Finding shared paths"><a name="idp79254864"></a><h2>Examples: Finding shared paths</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_sharedpaths01.png"><div class="caption"><p>A multilinestring and a linestring</p></div></div></div>
			   </td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_sharedpaths02.png"><div class="caption"><p>The shared path of multilinestring and linestring overlaid with original geometries.</p></div></div></div><p>
				  </p><pre class="programlisting">
 SELECT ST_AsText(
  ST_SharedPaths(
    ST_GeomFromText('MULTILINESTRING((26 125,26 200,126 200,126 125,26 125),
	   (51 150,101 150,76 175,51 150))'),
	ST_GeomFromText('LINESTRING(151 100,126 156.25,126 125,90 161, 76 175)')
	)
  ) As wkt

                                wkt
-------------------------------------------------------------
GEOMETRYCOLLECTION(MULTILINESTRING((126 156.25,126 125),
 (101 150,90 161),(90 161,76 175)),MULTILINESTRING EMPTY)
			  </pre><p>
			</p>
			</td></tr><tr><td><p>
				  </p><pre class="programlisting">
-- same example but linestring orientation flipped
SELECT ST_AsText(
  ST_SharedPaths(
   ST_GeomFromText('LINESTRING(76 175,90 161,126 125,126 156.25,151 100)'),
   ST_GeomFromText('MULTILINESTRING((26 125,26 200,126 200,126 125,26 125),
	   (51 150,101 150,76 175,51 150))')
	)
  ) As wkt

                                wkt
-------------------------------------------------------------
GEOMETRYCOLLECTION(MULTILINESTRING EMPTY,
MULTILINESTRING((76 175,90 161),(90 161,101 150),(126 125,126 156.25)))
			  </pre><p>
			</p>
			</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp79269200"></a><h2>See Also</h2><p>
		<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>,
		<a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>,
		<a class="xref" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a>
	</p></div></div><div class="refentry" title="ST_ShiftLongitude"><div class="refentry.separator"><hr></div><a name="ST_Shift_Longitude"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ShiftLongitude — Toggle geometry coordinates between -180..180 and 0..360 ranges.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ShiftLongitude</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79276240"></a><h2>Description</h2><p>Reads every point/vertex in every component of every feature
			in a geometry, and if the longitude coordinate is &lt;0, adds 360
			to it. The result would be a 0-360 version of the data to be
			plotted in a 180 centric map</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This is only useful for data in long lat e.g. 4326 (WGS 84 long lat)</p></td></tr></table></div><p><img src="images/warning.png">
			Pre-1.3.4 bug prevented this from working for MULTIPOINT. 1.3.4+ works with MULTIPOINT as well.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</p><p>NOTE: this function was renamed from "ST_Shift_Longitude" in 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp79287760"></a><h2>Examples</h2><pre class="programlisting">--3d points
SELECT ST_AsEWKT(ST_ShiftLongitude(ST_GeomFromEWKT('SRID=4326;POINT(-118.58 38.38 10)'))) As geomA,
	ST_AsEWKT(ST_ShiftLongitude(ST_GeomFromEWKT('SRID=4326;POINT(241.42 38.38 10)'))) As geomb
geomA							  geomB
----------						  -----------
SRID=4326;POINT(241.42 38.38 10) SRID=4326;POINT(-118.58 38.38 10)

--regular line string
SELECT ST_AsText(ST_ShiftLongitude(ST_GeomFromText('LINESTRING(-118.58 38.38, -118.20 38.45)')))

st_astext
----------
LINESTRING(241.42 38.38,241.8 38.45)
		</pre></div><div class="refsection" title="See Also"><a name="idp79289296"></a><h2>See Also</h2><p>
      <a class="xref" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a>
    </p></div></div><div class="refentry" title="ST_WrapX"><div class="refentry.separator"><hr></div><a name="ST_WrapX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WrapX — Wrap a geometry around an X value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_WrapX</b>(</code>geometry  <var class="pdparam">geom</var>, float8  <var class="pdparam">wrap</var>, float8  <var class="pdparam">move</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79297616"></a><h2>Description</h2><p>
This function splits the input geometries and then moves every resulting
component falling on the right (for negative 'move') or on the left (for
positive 'move') of given 'wrap' line in the direction specified by the
'move' parameter, finally re-unioning the pieces togheter.
    </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This is useful to "recenter" long-lat input to have features
of interest not spawned from one side to the other.
    </p></td></tr></table></div><p>Availability: 2.3.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp79301584"></a><h2>Examples</h2><pre class="programlisting">
-- Move all components of the given geometries whose bounding box
-- falls completely on the left of x=0 to +360
select ST_WrapX(the_geom, 0, 360);

-- Move all components of the given geometries whose bounding box
-- falls completely on the left of x=-30 to +360
select ST_WrapX(the_geom, -30, 360);
		</pre></div><div class="refsection" title="See Also"><a name="idp79303120"></a><h2>See Also</h2><p><a class="xref" href="#ST_Shift_Longitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a></p></div></div><div class="refentry" title="ST_Simplify"><div class="refentry.separator"><hr></div><a name="ST_Simplify"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Simplify — Returns a "simplified" version of the given geometry using
				the Douglas-Peucker algorithm.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Simplify</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">tolerance</var>, boolean <var class="pdparam">preserveCollapsed</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79311184"></a><h2>Description</h2><p>Returns a "simplified" version of the given geometry using
				the Douglas-Peucker algorithm. Will actually do something only with
				(multi)lines and (multi)polygons but you can safely call it with
				any kind of geometry. Since simplification occurs on a
				object-by-object basis you can also feed a GeometryCollection to
				this function.</p><p>The "preserve collapsed" flag will retain objects that would otherwise
      be too small given the tolerance. For example, a 1m long line simplified with a 10m
      tolerance. If the preserve flag is given, the line will not disappear. This flag
      is useful for rendering engines, to avoid having large numbers of very
      small objects disappear from a map leaving surprising gaps.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note that returned geometry might lose its
				simplicity (see <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>)</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note topology may not be preserved and may result in invalid geometries.  Use  (see <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>) to preserve topology.</p></td></tr></table></div><p>Availability: 1.2.2</p></div><div class="refsection" title="Examples"><a name="idp79314896"></a><h2>Examples</h2><p>A circle simplified too much becomes a triangle, medium an octagon, </p><pre class="programlisting">
SELECT ST_Npoints(the_geom) As np_before, ST_NPoints(ST_Simplify(the_geom,0.1)) As np01_notbadcircle, ST_NPoints(ST_Simplify(the_geom,0.5)) As np05_notquitecircle,
ST_NPoints(ST_Simplify(the_geom,1)) As np1_octagon, ST_NPoints(ST_Simplify(the_geom,10)) As np10_triangle,
(ST_Simplify(the_geom,100) is null) As  np100_geometrygoesaway
FROM (SELECT ST_Buffer('POINT(1 3)', 10,12) As the_geom) As foo;
-result
 np_before | np01_notbadcircle | np05_notquitecircle | np1_octagon | np10_triangle | np100_geometrygoesaway
-----------+-------------------+---------------------+-------------+---------------+------------------------
		49 |                33 |                  17 |           9 |             4 | t

				</pre></div><div class="refsection" title="See Also"><a name="idp79316688"></a><h2>See Also</h2><p><a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, Topology <a class="xref" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" title="ST_SimplifyPreserveTopology"><div class="refentry.separator"><hr></div><a name="ST_SimplifyPreserveTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyPreserveTopology — Returns a "simplified" version of the given geometry using
			the Douglas-Peucker algorithm. Will avoid creating derived
			geometries (polygons in particular) that are invalid.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SimplifyPreserveTopology</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79324496"></a><h2>Description</h2><p>Returns a "simplified" version of the given geometry using
			the Douglas-Peucker algorithm. Will avoid creating derived
			geometries (polygons in particular) that are invalid. Will actually do something only with
				(multi)lines and (multi)polygons but you can safely call it with
				any kind of geometry. Since simplification occurs on a
				object-by-object basis you can also feed a GeometryCollection to
				this function.</p><p>Performed by the GEOS module.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires GEOS 3.0.0+</p></td></tr></table></div><p>Availability: 1.3.3</p></div><div class="refsection" title="Examples"><a name="idp79326928"></a><h2>Examples</h2><p>Same example as Simplify, but we see Preserve Topology prevents oversimplification.  The circle can at most become a square.</p><pre class="programlisting">
SELECT ST_Npoints(the_geom) As np_before, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,0.1)) As np01_notbadcircle, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,0.5)) As np05_notquitecircle,
ST_NPoints(ST_SimplifyPreserveTopology(the_geom,1)) As np1_octagon, ST_NPoints(ST_SimplifyPreserveTopology(the_geom,10)) As np10_square,
ST_NPoints(ST_SimplifyPreserveTopology(the_geom,100)) As  np100_stillsquare
FROM (SELECT ST_Buffer('POINT(1 3)', 10,12) As the_geom) As foo;

--result--
 np_before | np01_notbadcircle | np05_notquitecircle | np1_octagon | np10_square | np100_stillsquare
-----------+-------------------+---------------------+-------------+---------------+-------------------
		49 |                33 |                  17 |           9 |             5 |                 5
				</pre></div><div class="refsection" title="See Also"><a name="idp79328720"></a><h2>See Also</h2><p><a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" title="ST_SimplifyVW"><div class="refentry.separator"><hr></div><a name="ST_SimplifyVW"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SimplifyVW — Returns a "simplified" version of the given geometry using the Visvalingam-Whyatt algorithm</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SimplifyVW</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79335760"></a><h2>Description</h2><p> Returns a "simplified" version of the given geometry using the Visvalingam-Whyatt algorithm.
		Will actually do something only with (multi)lines and (multi)polygons but you can safely call it with any kind of geometry.
		Since simplification occurs on a object-by-object basis you can also feed a GeometryCollection to this function.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note that returned geometry might lose its
				simplicity (see <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>)</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note topology may not be preserved and may result in invalid geometries.  Use  (see <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>) to preserve topology.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function handles 3D and the third dimension will affect the result.</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp79339600"></a><h2>Examples</h2><p>A LineString is simplified with a minimum area threshold of 30.</p><pre class="programlisting">

select ST_AsText(ST_SimplifyVW(geom,30)) simplified
FROM (SELECT  'LINESTRING(5 2, 3 8, 6 20, 7 25, 10 10)'::geometry geom) As foo;
-result
 simplified
-----------+-------------------+
LINESTRING(5 2,7 25,10 10)

				</pre></div><div class="refsection" title="See Also"><a name="idp79353680"></a><h2>See Also</h2><p><a class="xref" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a>, <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>, Topology <a class="xref" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a></p></div></div><div class="refentry" title="ST_SetEffectiveArea"><div class="refentry.separator"><hr></div><a name="ST_SetEffectiveArea"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetEffectiveArea — 
			Sets the effective area for each vertex, storing the value in the M ordinate.  A simplified geometry can then be generated by filtering on the M ordinate.
		</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SetEffectiveArea</b>(</code>geometry <var class="pdparam">geomA</var>, float <var class="pdparam">threshold = 0</var>, integer <var class="pdparam">set_area = 1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79362896"></a><h2>Description</h2><p>
			Sets the effective area for each vertex, using the Visvalingam-Whyatt algorithm.
			The effective area is stored as the M-value of the vertex.
			If the optional "theshold" parameter is used, a simplified geometry will be returned, containing only vertices with an effective area
            greater than or equal to the threshold value.
			</p><p>
			This function can be used for server-side simplification when a threshold is specified.  Another option is to use a threshold value of zero.
			In this case, the full geometry will be returned with effective areas as M-values, which can be used by the client to simplify very quickly.
			</p><p>
			Will actually do something only with
			(multi)lines and (multi)polygons but you can safely call it with
			any kind of geometry. Since simplification occurs on a
			object-by-object basis you can also feed a GeometryCollection to
			this function.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note that returned geometry might lose its
				simplicity (see <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>)</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Note topology may not be preserved and may result in invalid geometries.  Use  (see <a class="xref" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>) to preserve topology.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The output geometry will lose all previous information in the M-values</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function handles 3D and the third dimension will affect the effective area</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp79367760"></a><h2>Examples</h2><p>
				Calculating the effective area of a LineString.  Because we use a threshold value of zero, all vertices in the input geometry are returned.
			</p><pre class="programlisting">

select ST_AsText(ST_SetEffectiveArea(geom)) all_pts, ST_AsText(ST_SetEffectiveArea(geom,30) ) thrshld_30
FROM (SELECT  'LINESTRING(5 2, 3 8, 6 20, 7 25, 10 10)'::geometry geom) As foo;
-result
 all_pts | thrshld_30
-----------+-------------------+
LINESTRING M (5 2 3.40282346638529e+38,3 8 29,6 20 1.5,7 25 49.5,10 10 3.40282346638529e+38) | LINESTRING M (5 2 3.40282346638529e+38,7 25 49.5,10 10 3.40282346638529e+38)

				</pre></div><div class="refsection" title="See Also"><a name="idp79369552"></a><h2>See Also</h2><p><a class="xref" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a></p></div></div><div class="refentry" title="ST_Split"><div class="refentry.separator"><hr></div><a name="ST_Split"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Split — Returns a collection of geometries resulting by splitting a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Split</b>(</code>geometry <var class="pdparam">input</var>, geometry <var class="pdparam">blade</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79376464"></a><h2>Description</h2><p>
            The function supports splitting a line by (multi)point, (multi)line or (multi)polygon boundary, a (multi)polygon by line. The returned geometry is always a collection.
            </p><p>
            Think of this function as the opposite of ST_Union.
            Theoretically applying ST_Union to the elements of the returned collection
            should always yield the original geometry.
            </p><p>Availability: 2.0.0</p><p>Changed: 2.2.0 support for splitting a line by a multiline, a multipoint or (multi)polygon boundary was introduced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>To improve the robustness of ST_Split it may be convenient to <a class="xref" href="#ST_Snap" title="ST_Snap">ST_Snap</a> the input to the blade in advance using a very low tolerance. Otherwise the internally used coordinate grid may cause tolerance problems, where coordinates of input and blade do not fall onto each other and the input is not being split correctly (see <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2192" target="_top">#2192</a>).</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
When a (multi)polygon is passed as as the blade, its linear component
(the boundary) is used for cutting the input.
            </p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp79385040"></a><h2>Examples</h2><p>Polygon Cut by Line</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split01.png"><div class="caption"><p>Before Split</p></div></div></div><p>
                                               </p>
                        </td><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split02.png"><div class="caption"><p>After split</p></div></div></div><p>
                                              </p>
                        </td></tr></tbody></table></div><pre class="programlisting">
-- this creates a geometry collection consisting of the 2 halves of the polygon
-- this is similar to the example we demonstrated in ST_BuildArea
SELECT ST_Split(circle, line)
FROM (SELECT
    ST_MakeLine(ST_MakePoint(10, 10),ST_MakePoint(190, 190)) As line,
    ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50) As circle) As foo;

-- result --
 GEOMETRYCOLLECTION(POLYGON((150 90,149.039264020162 80.2454838991936,146.193976625564 70.8658283817455,..), POLYGON(..)))

-- To convert to individual polygons, you can use ST_Dump or ST_GeometryN
SELECT ST_AsText((ST_Dump(ST_Split(circle, line))).geom) As wkt
FROM (SELECT
    ST_MakeLine(ST_MakePoint(10, 10),ST_MakePoint(190, 190)) As line,
    ST_Buffer(ST_GeomFromText('POINT(100 90)'), 50) As circle) As foo;

-- result --
wkt
---------------
POLYGON((150 90,149.039264020162 80.2454838991936,..))
POLYGON((60.1371179574584 60.1371179574584,58.4265193848728 62.2214883490198,53.8060233744357 ..))
            </pre><p>Multilinestring Cut by point</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split03.png"><div class="caption"><p>Before Split</p></div></div></div><p>
                                               </p>
                        </td><td>
                                               <p>
                            </p><div class="informalfigure"><div class="mediaobject"><img src="images/st_split04.png"><div class="caption"><p>After split</p></div></div></div><p>
                                               </p>
                        </td></tr></tbody></table></div><pre class="programlisting">
SELECT ST_AsText(ST_Split(mline, pt)) As wktcut
        FROM (SELECT
    ST_GeomFromText('MULTILINESTRING((10 10, 190 190), (15 15, 30 30, 100 90))') As mline,
    ST_Point(30,30) As pt) As foo;

wktcut
------
GEOMETRYCOLLECTION(
    LINESTRING(10 10,30 30),
    LINESTRING(30 30,190 190),
    LINESTRING(15 15,30 30),
    LINESTRING(30 30,100 90)
)
            </pre></div><div class="refsection" title="See Also"><a name="idp79402960"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
<a class="xref" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>,
<a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>,
<a class="xref" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>,
<a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>,
<a class="xref" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>
        </p></div></div><div class="refentry" title="ST_SymDifference"><div class="refentry.separator"><hr></div><a name="ST_SymDifference"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SymDifference — Returns a geometry that represents the portions of A and B
			that do not intersect. It is called a symmetric difference because
			ST_SymDifference(A,B) = ST_SymDifference(B,A).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SymDifference</b>(</code>geometry  <var class="pdparam">geomA</var>, geometry  <var class="pdparam">geomB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79412176"></a><h2>Description</h2><p>Returns a geometry that represents the portions of A and B
			that do not intersect. It is called a symmetric difference because
			ST_SymDifference(A,B) = ST_SymDifference(B,A). One can think of this as ST_Union(geomA,geomB) - ST_Intersection(A,B).
			</p><p>Performed by the GEOS module</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Do not call with a GeometryCollection as an argument</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.21</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index. However it seems to only consider x y when
		  doing the difference and tacks back on the Z-Index</p></div><div class="refsection" title="Examples"><a name="idp79418832"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
						<p>
							</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference01.png"><div class="caption"><p>The original linestrings shown together</p></div></div></div><p>
						</p>
					</td><td>
						<div class="informalfigure"><div class="mediaobject"><img src="images/st_symdifference02.png"><div class="caption"><p>The symmetric difference of the two linestrings</p></div></div></div><p>
					</p>
				</td></tr></tbody></table></div><pre class="programlisting">
--Safe for 2d - symmetric difference of 2 linestrings
SELECT ST_AsText(
	ST_SymDifference(
		ST_GeomFromText('LINESTRING(50 100, 50 200)'),
		ST_GeomFromText('LINESTRING(50 50, 50 150)')
	)
);

st_astext
---------
MULTILINESTRING((50 150,50 200),(50 50,50 100))
</pre><pre class="programlisting">

--When used in 3d doesn't quite do the right thing
SELECT ST_AsEWKT(ST_SymDifference(ST_GeomFromEWKT('LINESTRING(1 2 1, 1 4 2)'),
	ST_GeomFromEWKT('LINESTRING(1 1 3, 1 3 4)')))

st_astext
------------
MULTILINESTRING((1 3 2.75,1 4 2),(1 1 3,1 2 2.25))
		</pre></div><div class="refsection" title="See Also"><a name="idp79428432"></a><h2>See Also</h2><p><a class="xref" href="#ST_Difference" title="ST_Difference">ST_Difference</a>, <a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>, <a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a></p></div></div><div class="refentry" title="ST_Subdivide"><div class="refentry.separator"><hr></div><a name="ST_Subdivide"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Subdivide — Returns a set of geometry where no geometry in the set has more than the specified number of vertices.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geometry <b class="fsfunc">ST_Subdivide</b>(</code>geometry <var class="pdparam">geom</var>, integer <var class="pdparam">max_vertices=256</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79436240"></a><h2>Description</h2><p>
Turns a single geometry into a set in which each element has fewer than
the maximum allowed number of vertices. Useful for converting excessively
large polygons and other objects into small portions that fit within the
database page size. Uses the same envelope clipping as ST_ClipByBox2D does,
recursively subdividing the input geometry until all portions have less than the
maximum vertex count. Minimum vertice count allowed is 8 and if you try to specify lower than 8, it will throw an error.
    </p><p>Clipping performed by the GEOS module.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires GEOS 3.5.0+</p></td></tr></table></div><p>Availability: 2.2.0 requires GEOS &gt;= 3.5.0.</p></div><div class="refsection" title="Examples"><a name="idp79438800"></a><h2>Examples</h2><pre class="programlisting">-- Create a new subdivided table suitable for joining to the original
CREATE TABLE subdivided_geoms AS
SELECT pkey, ST_Subdivide(geom) AS geom
FROM original_geoms;
 </pre><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_subdivide01.png"><div class="caption"><p>Subdivide max 10 vertices</p></div></div></div><p>
				</p><pre class="programlisting">SELECT row_number() OVER() As rn, ST_AsText(geom) As wkt
FROM ( SELECT ST_SubDivide('POLYGON((132 10,119 23,85 35,68 29,66 28,49 42,32 56,22 64,32 110,40 119,36 150,
57 158,75 171,92 182,114 184,132 186,146 178,176 184,179 162,184 141,190 122,
190 100,185 79,186 56,186 52,178 34,168 18,147 13,132 10))'::geometry,10))  As f(geom);</pre><p>
</p><pre class="screen">rn |                          wkt
---+---------------------------------------------------------------------------
 1 | POLYGON((22 64,29.3913043478263 98.000000000001,106.000000000001 98.00000000001,
        106.000000000001 27.5882352941173,85 35,68 29,66 28,49 42,32 56,22 64))
 2 | POLYGON((29.3913043478263 98.000000000001,32 110,40 119,36 150,57 158,
        75 11,92 182,106.000000000001 183.272727272727,106.000000000001 98.000000000001,
        29.913043478263 98.000000000001))
 3 | POLYGON((106.000000000001 27.5882352941173,106.000000000001 98.00000000000,
 189.52380952381 98.000000000001,185 79,186 56,186 52,178 34,168 18,147 13,
 132 0,119 23,106.000000000001 27.5882352941173))
 4 | POLYGON((106.000000000001 98.000000000001,106.000000000001 183.27272727272,
    114 184,132 186,146 178,176 184,179 162,184 141,190 122,190 100,189.5238095238
 98.000000000001,106.000000000001 98.000000000001))</pre><p>
						  </p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_subdivide02.png"><div class="caption"><p>Useful in conjunction with ST_Segmentize to create additional vertices that can then be used for splitting</p></div></div></div><p>
				</p><pre class="programlisting">SELECT ST_AsText(ST_SubDivide(ST_Segmentize('LINESTRING(0 0, 100 100, 150 150)'::geometry,10),8));</pre><p>
</p><pre class="screen">LINESTRING(0 0,7.07106781186547 7.07106781186547,14.1421356237309 14.1421356237309,21.2132034355964 21.2132034355964,28.2842712474619 28.2842712474619,35.3553390593274 35.3553390593274,37.499999999998 37.499999999998)
LINESTRING(37.499999999998 37.499999999998,42.4264068711929 42.4264068711929,49.4974746830583 49.4974746830583,56.5685424949238 56.5685424949238,63.6396103067893 63.6396103067893,70.7106781186548 70.7106781186548,74.999999999998 74.999999999998)
LINESTRING(74.999999999998 74.999999999998,77.7817459305202 77.7817459305202,84.8528137423857 84.8528137423857,91.9238815542512 91.9238815542512,98.9949493661167 98.9949493661167,100 100,107.071067811865 107.071067811865,112.499999999998 112.499999999998)
LINESTRING(112.499999999998 112.499999999998,114.142135623731 114.142135623731,121.213203435596 121.213203435596,128.284271247462 128.284271247462,135.355339059327 135.355339059327,142.426406871193 142.426406871193,149.497474683058 149.497474683058,149.999999999998 149.999999999998)</pre><p>
						  </p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp79449168"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
<a class="xref" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a>,
<a class="xref" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>,
<a class="xref" href="#ST_Split" title="ST_Split">ST_Split</a>
    </p></div></div><div class="refentry" title="ST_SwapOrdinates"><div class="refentry.separator"><hr></div><a name="ST_SwapOrdinates"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SwapOrdinates — Returns a version of the given geometry with
				given ordinate values swapped.
    </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_SwapOrdinates</b>(</code>geometry <var class="pdparam">geom</var>, cstring <var class="pdparam">ords</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79457616"></a><h2>Description</h2><p>
Returns a version of the given geometry with given ordinates swapped.
    </p><p>
The <code class="varname">ords</code> parameter is a 2-characters string naming
the ordinates to swap. Valid names are: x,y,z and m.
    </p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Example"><a name="idp79475024"></a><h2>Example</h2><pre class="programlisting">
-- Scale M value by 2
SELECT ST_AsText(
  ST_SwapOrdinates(
    ST_Scale(
      ST_SwapOrdinates(g,'xm'),
      2, 1
    ),
  'xm')
) FROM ( SELECT 'POINT ZM (0 0 0 2)'::geometry g ) foo;
     st_astext
--------------------
 POINT ZM (0 0 0 4)
		 </pre></div><div class="refsection" title="See Also"><a name="idp79476560"></a><h2>See Also</h2><p> <a class="xref" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> </p></div></div><div class="refentry" title="ST_Union"><div class="refentry.separator"><hr></div><a name="ST_Union"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Union — Returns a geometry that represents the point set union of
		the Geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Union</b>(</code>geometry set <var class="pdparam">g1field</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Union</b>(</code>geometry <var class="pdparam">g1</var>, geometry <var class="pdparam">g2</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Union</b>(</code>geometry[] <var class="pdparam">g1_array</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79488336"></a><h2>Description</h2><p> Output type can be a MULTI*, single geometry, or Geometry Collection. Comes in 2 variants.  Variant 1 unions 2 geometries resulting in a new geometry with no intersecting regions.
		Variant 2 is an aggregate function that takes a set of geometries and unions
		them into a single ST_Geometry resulting in no intersecting regions.</p><p>Aggregate version: This function returns a MULTI geometry or NON-MULTI geometry
		from a set of geometries. The ST_Union() function is an "aggregate"
		function in the terminology of PostgreSQL. That means that it
		operates on rows of data, in the same way the SUM() and AVG()
		functions do and like most aggregates, it also ignores NULL geometries.</p><p>Non-Aggregate version: This function returns a geometry being a union of two
		input geometries. Output type can be a MULTI*, NON-MULTI or
		GEOMETRYCOLLECTION. If any are NULL, then NULL is returned.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Collect and ST_Union are often interchangeable.
		ST_Union is in general orders of magnitude slower than ST_Collect
		because it tries to dissolve boundaries and reorder geometries to ensure that a constructed Multi* doesn't
		have intersecting regions.</p></td></tr></table></div><p>Performed by the GEOS module.</p><p>NOTE: this function was formerly called GeomUnion(), which
		was renamed from "Union" because UNION is an SQL reserved
		word.</p><p>Availability: 1.4.0 - ST_Union was enhanced. ST_Union(geomarray) was introduced and also faster aggregate collection in PostgreSQL.  If you are using GEOS 3.1.0+
		ST_Union will use the faster Cascaded Union algorithm described in
		<a class="ulink" href="http://blog.cleverelephant.ca/2009/01/must-faster-unions-in-postgis-14.html" target="_top">http://blog.cleverelephant.ca/2009/01/must-faster-unions-in-postgis-14.html</a></p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method implements the <a class="ulink" href="http://www.opengeospatial.org/standards/sfs" target="_top">OpenGIS Simple Features
 Implementation Specification for SQL 1.1.</a> s2.1.1.3</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Aggregate version is not explicitly defined in OGC SPEC.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3: 5.1.19
		the z-index (elevation) when polygons are involved.</p></div><div class="refsection" title="Examples"><a name="idp79496272"></a><h2>Examples</h2><p>Aggregate example</p><pre class="programlisting">
SELECT stusps,
	   ST_Multi(ST_Union(f.the_geom)) as singlegeom
	 FROM sometable As f
GROUP BY stusps
			  </pre><p>Non-Aggregate example</p><pre class="programlisting">
SELECT ST_AsText(ST_Union(ST_GeomFromText('POINT(1 2)'),
	ST_GeomFromText('POINT(-2 3)') ) )

st_astext
----------
MULTIPOINT(-2 3,1 2)


SELECT ST_AsText(ST_Union(ST_GeomFromText('POINT(1 2)'),
		ST_GeomFromText('POINT(1 2)') ) );
st_astext
----------
POINT(1 2)

--3d example - sort of supports 3d (and with mixed dimensions!)
SELECT ST_AsEWKT(st_union(the_geom))
FROM
(SELECT ST_GeomFromEWKT('POLYGON((-7 4.2,-7.1 4.2,-7.1 4.3,
-7 4.2))') as the_geom
UNION ALL
SELECT ST_GeomFromEWKT('POINT(5 5 5)') as the_geom
UNION ALL
	SELECT ST_GeomFromEWKT('POINT(-2 3 1)') as the_geom
UNION ALL
SELECT ST_GeomFromEWKT('LINESTRING(5 5 5, 10 10 10)') as the_geom ) as foo;

st_asewkt
---------
GEOMETRYCOLLECTION(POINT(-2 3 1),LINESTRING(5 5 5,10 10 10),POLYGON((-7 4.2 5,-7.1 4.2 5,-7.1 4.3 5,-7 4.2 5)));

--3d example not mixing dimensions
SELECT ST_AsEWKT(st_union(the_geom))
FROM
(SELECT ST_GeomFromEWKT('POLYGON((-7 4.2 2,-7.1 4.2 3,-7.1 4.3 2,
-7 4.2 2))') as the_geom
UNION ALL
SELECT ST_GeomFromEWKT('POINT(5 5 5)') as the_geom
UNION ALL
	SELECT ST_GeomFromEWKT('POINT(-2 3 1)') as the_geom
UNION ALL
SELECT ST_GeomFromEWKT('LINESTRING(5 5 5, 10 10 10)') as the_geom ) as foo;

st_asewkt
---------
GEOMETRYCOLLECTION(POINT(-2 3 1),LINESTRING(5 5 5,10 10 10),POLYGON((-7 4.2 2,-7.1 4.2 3,-7.1 4.3 2,-7 4.2 2)))

--Examples using new Array construct
SELECT ST_Union(ARRAY(SELECT the_geom FROM sometable));

SELECT ST_AsText(ST_Union(ARRAY[ST_GeomFromText('LINESTRING(1 2, 3 4)'),
			ST_GeomFromText('LINESTRING(3 4, 4 5)')])) As wktunion;

--wktunion---
MULTILINESTRING((3 4,4 5),(1 2,3 4))

			  </pre></div><div class="refsection" title="See Also"><a name="idp79498832"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>
			<a class="xref" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>
		</p></div></div><div class="refentry" title="ST_UnaryUnion"><div class="refentry.separator"><hr></div><a name="ST_UnaryUnion"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_UnaryUnion — Like ST_Union, but working at the geometry component level.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_UnaryUnion</b>(</code>geometry  <var class="pdparam">geom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79509584"></a><h2>Description</h2><p>
		Unlike ST_Union, ST_UnaryUnion does dissolve boundaries
		between components of a multipolygon (invalid)
		and does perform union between the components of a
		geometrycollection.
		Each components of the input geometry is assumed to be
		valid, so you won't get a valid multipolygon out of a
		bow-tie polygon (invalid).
		</p><p>
		You may use this function to node a set of linestrings.
		You may mix ST_UnaryUnion with ST_Collect to fine-tune
		how many geometries at once you want to dissolve to
		be nice on both memory size and CPU time, finding the
		balance between ST_Union and ST_MemUnion.
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" title="See Also"><a name="idp79513168"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>,
			<a class="xref" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a>,
			<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>,
			<a class="xref" href="#ST_Node" title="ST_Node">ST_Node</a>
		</p></div></div><div class="refentry" title="ST_VoronoiLines"><div class="refentry.separator"><hr></div><a name="ST_VoronoiLines"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_VoronoiLines — Returns the boundaries between the cells of the Voronoi diagram constructed from the vertices of a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_VoronoiLines</b>(</code>
				<var class="pdparam">g1</var>
				geometry
			, 
				<var class="pdparam">tolerance</var>
				float8
			, 
				<var class="pdparam">extend_to</var>
				geometry
			<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79523664"></a><h2>Description</h2><p>
			ST_VoronoiLines computes a two-dimensional <a class="ulink" href="https://en.wikipedia.org/wiki/Voronoi_diagram" target="_top">Voronoi diagram</a> from the vertices of
            the supplied geometry and returns the boundaries between cells in that diagram as a MultiLineString.
        </p><p>
			Optional parameters:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> 'tolerance' : The distance within which vertices will be considered equivalent.  Robustness of the algorithm can be improved by supplying a nonzero tolerance distance.  (default = 0.0)</p></li><li class="listitem"><p>'extend_to' : If a geometry is supplied as the "extend_to" parameter, the diagram will be extended to cover the
					envelope of the "extend_to" geometry, unless that envelope is smaller than the default envelope.
					(default = NULL)</p></li></ul></div><p>
		</p><p>Availability: 2.3.0 - requires GEOS &gt;= 3.5.0.</p></div><div class="refsection" title="Examples"><a name="idp79528400"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi03.png"><div class="caption"><p>Voronoi lines with tolerance of 30 units</p></div></div></div><p>
					</p><pre class="programlisting">SELECT ST_VoronoiLines(geom, 30) As geom
FROM (SELECT 'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry As geom ) As g</pre><p>
</p><pre class="screen"> -- ST_AsText output
MULTILINESTRING((135.555555555556 270,36.8181818181818 92.2727272727273),(36.8181818181818 92.2727272727273,-110 43.3333333333333),(230 -45.7142857142858,36.8181818181818 92.2727272727273))
</pre><p>
				</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp79534800"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>,
			<a class="xref" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a>,
			<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>
		</p></div></div><div class="refentry" title="ST_VoronoiPolygons"><div class="refentry.separator"><hr></div><a name="ST_VoronoiPolygons"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_VoronoiPolygons — Returns the cells of the Voronoi diagram constructed from the vertices of a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_VoronoiPolygons</b>(</code>
				<var class="pdparam">g1</var>
				geometry
			, 
				<var class="pdparam">tolerance</var>
				float8
			, 
				<var class="pdparam">extend_to</var>
				geometry
			<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp79544912"></a><h2>Description</h2><p>
			ST_VoronoiPolygons computes a two-dimensional <a class="ulink" href="https://en.wikipedia.org/wiki/Voronoi_diagram" target="_top">Voronoi diagram</a> from the vertices of
			the supplied geometry.  The result is a GeometryCollection of Polygons that covers an envelope larger than the extent of the input vertices.
		</p><p>
			Optional parameters:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>'tolerance' : The distance within which vertices will be considered equivalent.  Robustness of the algorithm can be improved by supplying a nonzero tolerance distance.  (default = 0.0)</p></li><li class="listitem"><p>'extend_to' : If a geometry is supplied as the "extend_to" parameter, the diagram will be extended to cover the
					envelope of the "extend_to" geometry, unless that envelope is smaller than the default envelope.
					(default = NULL)</p></li></ul></div><p>
		</p><p>Availability: 2.3.0 - requires GEOS &gt;= 3.5.0.</p></div><div class="refsection" title="Examples"><a name="idp79549648"></a><h2>Examples</h2><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td>
					<div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi01.png"><div class="caption"><p>Points overlaid on top of Voronoi diagram</p></div></div></div><p>
					</p><pre class="programlisting">SELECT
	ST_VoronoiPolygons(geom) As geom
FROM (SELECT 'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry As geom ) As g;</pre><p>
</p><pre class="screen"> -- ST_AsText output
GEOMETRYCOLLECTION(POLYGON((-110 43.3333333333333,-110 270,100.5 270,59.3478260869565 132.826086956522,36.8181818181818 92.2727272727273,-110 43.3333333333333)),
POLYGON((55 -90,-110 -90,-110 43.3333333333333,36.8181818181818 92.2727272727273,55 79.2857142857143,55 -90)),
POLYGON((230 47.5,230 -20.7142857142857,55 79.2857142857143,36.8181818181818 92.2727272727273,59.3478260869565 132.826086956522,230 47.5)),POLYGON((230 -20.7142857142857,230 -90,55 -90,55 79.2857142857143,230 -20.7142857142857)),
POLYGON((100.5 270,230 270,230 47.5,59.3478260869565 132.826086956522,100.5 270)))
</pre><p>
					</p>
				</td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi02.png"><div class="caption"><p>Voronoi with tolerance of 30 units</p></div></div></div><p>
					</p><pre class="programlisting">SELECT ST_VoronoiPolygons(geom, 30) As geom
FROM (SELECT 'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry As geom ) As g;</pre><p>
</p><pre class="screen"> -- ST_AsText output
GEOMETRYCOLLECTION(POLYGON((-110 43.3333333333333,-110 270,100.5 270,59.3478260869565 132.826086956522,36.8181818181818 92.2727272727273,-110 43.3333333333333)),
POLYGON((230 47.5,230 -45.7142857142858,36.8181818181818 92.2727272727273,59.3478260869565 132.826086956522,230 47.5)),POLYGON((230 -45.7142857142858,230 -90,-110 -90,-110 43.3333333333333,36.8181818181818 92.2727272727273,230 -45.7142857142858)),
POLYGON((100.5 270,230 270,230 47.5,59.3478260869565 132.826086956522,100.5 270)))
</pre><p>
				</p></td></tr><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_voronoi03.png"><div class="caption"><p>Voronoi with tolerance of 30 units as MultiLineString</p></div></div></div><p>
					</p><pre class="programlisting">SELECT ST_VoronoiLines(geom, 30) As geom
FROM (SELECT 'MULTIPOINT (50 30, 60 30, 100 100,10 150, 110 120)'::geometry As geom ) As g</pre><p>
</p><pre class="screen"> -- ST_AsText output
MULTILINESTRING((135.555555555556 270,36.8181818181818 92.2727272727273),(36.8181818181818 92.2727272727273,-110 43.3333333333333),(230 -45.7142857142858,36.8181818181818 92.2727272727273))
</pre><p>
				</p></td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp79564240"></a><h2>See Also</h2><p>
			<a class="xref" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>,
			<a class="xref" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a>,
			<a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a>
		</p></div></div></div><div class="sect1" title="8.12. Linear Referencing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Linear_Referencing"></a>8.12. Linear Referencing</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_LineInterpolatePoint">ST_LineInterpolatePoint</a></span><span class="refpurpose"> — Returns a point interpolated along a line. Second argument is a float8 between 0 and 1
			representing fraction of total length of linestring the point has to be located.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineLocatePoint">ST_LineLocatePoint</a></span><span class="refpurpose"> — Returns a float between 0 and 1 representing the location of
			the closest point on LineString to the given Point, as a fraction
			of total 2d line length.</span></dt><dt><span class="refentrytitle"><a href="#ST_LineSubstring">ST_LineSubstring</a></span><span class="refpurpose"> — Return a linestring being a substring of the input one
			starting and ending at the given fractions of total 2d length.
			Second and third arguments are float8 values between 0 and
			1.</span></dt><dt><span class="refentrytitle"><a href="#ST_LocateAlong">ST_LocateAlong</a></span><span class="refpurpose"> — Return a derived geometry collection value with elements
			that match the specified measure. Polygonal elements are not
			supported.</span></dt><dt><span class="refentrytitle"><a href="#ST_LocateBetween">ST_LocateBetween</a></span><span class="refpurpose"> — Return a derived geometry collection value with elements
			that match the specified range of measures inclusively. Polygonal
			elements are not supported.</span></dt><dt><span class="refentrytitle"><a href="#ST_LocateBetweenElevations">ST_LocateBetweenElevations</a></span><span class="refpurpose"> — Return a derived geometry (collection) value with elements
			that intersect the specified range of elevations inclusively. Only 3D, 4D LINESTRINGS and MULTILINESTRINGS
			are supported.</span></dt><dt><span class="refentrytitle"><a href="#ST_InterpolatePoint">ST_InterpolatePoint</a></span><span class="refpurpose"> — Return the value of the measure dimension of a geometry at the point closed to the provided point.</span></dt><dt><span class="refentrytitle"><a href="#ST_AddMeasure">ST_AddMeasure</a></span><span class="refpurpose"> — Return a derived geometry with measure elements linearly interpolated between the start and end points.</span></dt></dl></div><div class="refentry" title="ST_LineInterpolatePoint"><a name="ST_LineInterpolatePoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineInterpolatePoint — Returns a point interpolated along a line. Second argument is a float8 between 0 and 1
			representing fraction of total length of linestring the point has to be located.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineInterpolatePoint</b>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">a_fraction</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80543184"></a><h2>Description</h2><p>Returns a point interpolated along a line. First argument
			must be a LINESTRING. Second argument is a float8 between 0 and 1
			representing fraction of total linestring length the point has to be located.</p><p>See <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> for
			computing the line location nearest to a Point.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Since release 1.1.1 this function also interpolates M and
			  Z values (when present), while prior releases set them to
			  0.0.</p></td></tr></table></div><p>Availability: 0.8.2, Z and M supported added in 1.1.1</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Interpolate_Point.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80572752"></a><h2>Examples</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_line_interpolate_point01.png"><div class="caption"><p>A linestring with the interpolated point at 20% position (0.20) </p></div></div></div><pre class="programlisting">--Return point 20% along 2d line
SELECT ST_AsEWKT(ST_LineInterpolatePoint(the_line, 0.20))
	FROM (SELECT ST_GeomFromEWKT('LINESTRING(25 50, 100 125, 150 190)') as the_line) As foo;
   st_asewkt
----------------
 POINT(51.5974135047432 76.5974135047432)

</pre><pre class="programlisting">
--Return point mid-way of 3d line
SELECT ST_AsEWKT(ST_LineInterpolatePoint(the_line, 0.5))
	FROM (SELECT ST_GeomFromEWKT('LINESTRING(1 2 3, 4 5 6, 6 7 8)') as the_line) As foo;

	st_asewkt
--------------------
 POINT(3.5 4.5 5.5)


--find closest point on a line to a point or other geometry
 SELECT ST_AsText(ST_LineInterpolatePoint(foo.the_line, ST_LineLocatePoint(foo.the_line, ST_GeomFromText('POINT(4 3)'))))
FROM (SELECT ST_GeomFromText('LINESTRING(1 2, 4 5, 6 7)') As the_line) As foo;
   st_astext
----------------
 POINT(3 4)

</pre></div><div class="refsection" title="See Also"><a name="idp80577104"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a></p></div></div><div class="refentry" title="ST_LineLocatePoint"><div class="refentry.separator"><hr></div><a name="ST_LineLocatePoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineLocatePoint — Returns a float between 0 and 1 representing the location of
			the closest point on LineString to the given Point, as a fraction
			of total 2d line length.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_LineLocatePoint</b>(</code>geometry  <var class="pdparam">a_linestring</var>, geometry  <var class="pdparam">a_point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80589392"></a><h2>Description</h2><p>Returns a float between 0 and 1 representing the location of
			the closest point on LineString to the given Point, as a fraction
			of total <a class="link" href="#ST_Length2D" title="ST_Length2D">2d line</a> length.</p><p>You can use the returned location to extract a Point (<a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>) or
			a substring (<a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a>).</p><p>This is useful for approximating numbers of addresses</p><p>Availability: 1.1.0</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Locate_Point.</p></div><div class="refsection" title="Examples"><a name="idp80593360"></a><h2>Examples</h2><pre class="programlisting">
--Rough approximation of finding the street number of a point along the street
--Note the whole foo thing is just to generate dummy data that looks
--like house centroids and street
--We use ST_DWithin to exclude
--houses too far away from the street to be considered on the street
SELECT ST_AsText(house_loc) As as_text_house_loc,
	startstreet_num +
		CAST( (endstreet_num - startstreet_num)
			* ST_LineLocatePoint(street_line, house_loc) As integer) As street_num
FROM
(SELECT ST_GeomFromText('LINESTRING(1 2, 3 4)') As street_line,
	ST_MakePoint(x*1.01,y*1.03) As house_loc, 10 As startstreet_num,
		20 As endstreet_num
FROM generate_series(1,3) x CROSS JOIN generate_series(2,4) As y)
As foo
WHERE ST_DWithin(street_line, house_loc, 0.2);

 as_text_house_loc | street_num
-------------------+------------
 POINT(1.01 2.06)  |         10
 POINT(2.02 3.09)  |         15
 POINT(3.03 4.12)  |         20

 --find closest point on a line to a point or other geometry
 SELECT ST_AsText(ST_LineInterpolatePoint(foo.the_line, ST_LineLocatePoint(foo.the_line, ST_GeomFromText('POINT(4 3)'))))
FROM (SELECT ST_GeomFromText('LINESTRING(1 2, 4 5, 6 7)') As the_line) As foo;
   st_astext
----------------
 POINT(3 4)

</pre></div><div class="refsection" title="See Also"><a name="idp80594896"></a><h2>See Also</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a>, <a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a></p></div></div><div class="refentry" title="ST_LineSubstring"><div class="refentry.separator"><hr></div><a name="ST_LineSubstring"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LineSubstring — Return a linestring being a substring of the input one
			starting and ending at the given fractions of total 2d length.
			Second and third arguments are float8 values between 0 and
			1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LineSubstring</b>(</code>geometry  <var class="pdparam">a_linestring</var>, float8  <var class="pdparam">startfraction</var>, float8  <var class="pdparam">endfraction</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80604112"></a><h2>Description</h2><p>Return a linestring being a substring of the input one
			starting and ending at the given fractions of total 2d length.
			Second and third arguments are float8 values between 0 and
			1. This only works with LINESTRINGs.
			To use with contiguous MULTILINESTRINGs use in conjunction with <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>.</p><p>If 'start' and 'end' have the same value this is equivalent
			to <a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>.</p><p>See <a class="xref" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> for
			computing the line location nearest to a Point.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Since release 1.1.1 this function also interpolates M and
			  Z values (when present), while prior releases set them to
			  unspecified values.</p></td></tr></table></div><p>Availability: 1.1.0, Z and M supported added in 1.1.1</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Substring.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80610256"></a><h2>Examples</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_line_substring01.png"><div class="caption"><p>A linestring seen with 1/3 midrange overlaid (0.333, 0.666) </p></div></div></div><pre class="programlisting">
--Return the approximate 1/3 mid-range part of a linestring
SELECT ST_AsText(ST_Line_SubString(ST_GeomFromText('LINESTRING(25 50, 100 125, 150 190)'), 0.333, 0.666));

										   st_astext
------------------------------------------------------------------------------------------------
LINESTRING(69.2846934853974 94.2846934853974,100 125,111.700356260683 140.210463138888)

--The below example simulates a while loop in
--SQL using PostgreSQL generate_series() to cut all
--linestrings in a table to 100 unit segments
-- of which no segment is longer than 100 units
-- units are measured in the SRID units of measurement
-- It also assumes all geometries are LINESTRING or contiguous MULTILINESTRING
--and no geometry is longer than 100 units*10000
--for better performance you can reduce the 10000
--to match max number of segments you expect

SELECT field1, field2, ST_LineSubstring(the_geom, 100.00*n/length,
  CASE
	WHEN 100.00*(n+1) &lt; length THEN 100.00*(n+1)/length
	ELSE 1
  END) As the_geom
FROM
  (SELECT sometable.field1, sometable.field2,
  ST_LineMerge(sometable.the_geom) AS the_geom,
  ST_Length(sometable.the_geom) As length
  FROM sometable
  ) AS t
CROSS JOIN generate_series(0,10000) AS n
WHERE n*100.00/length &lt; 1;
			</pre></div><div class="refsection" title="See Also"><a name="idp80614096"></a><h2>See Also</h2><p><a class="xref" href="#ST_Length" title="ST_Length">ST_Length</a>, <a class="xref" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>, <a class="xref" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a></p></div></div><div class="refentry" title="ST_LocateAlong"><div class="refentry.separator"><hr></div><a name="ST_LocateAlong"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LocateAlong — Return a derived geometry collection value with elements
			that match the specified measure. Polygonal elements are not
			supported.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LocateAlong</b>(</code>geometry  <var class="pdparam">ageom_with_measure</var>, float8  <var class="pdparam">a_measure</var>, float8  <var class="pdparam">offset</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80623056"></a><h2>Description</h2><p>Return a derived geometry collection value with elements
		that match the specified measure. Polygonal elements are not
		supported.</p><p>If an offset is provided, the resultant will be offset to the
		left or right of the input line by the specified number of units.
		A positive offset will be to the left, and a negative one to the
		right.</p><p>Semantic is specified by: ISO/IEC CD 13249-3:200x(E) - Text
		for Continuation CD Editing Meeting</p><p>Availability: 1.1.0 by old name ST_Locate_Along_Measure. </p><p>Changed: 2.0.0 in prior versions this used to be called ST_Locate_Along_Measure.  The old name has been deprecated and will be removed in the future but is still available.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Use this function only for geometries with an M component</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p></div><div class="refsection" title="Examples"><a name="idp80627664"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(the_geom)
		FROM
		(SELECT ST_LocateAlong(
			ST_GeomFromText('MULTILINESTRINGM((1 2 3, 3 4 2, 9 4 3),
		(1 2 3, 5 4 5))'),3) As the_geom) As foo;

						 st_asewkt
-----------------------------------------------------------
 MULTIPOINT M (1 2 3)

--Geometry collections are difficult animals so dump them
--to make them more digestable
SELECT ST_AsText((ST_Dump(the_geom)).geom)
	FROM
	(SELECT ST_LocateAlong(
			ST_GeomFromText('MULTILINESTRINGM((1 2 3, 3 4 2, 9 4 3),
	(1 2 3, 5 4 5))'),3) As the_geom) As foo;

   st_asewkt
---------------
 POINTM(1 2 3)
 POINTM(9 4 3)
 POINTM(1 2 3)
	</pre></div><div class="refsection" title="See Also"><a name="idp80629200"></a><h2>See Also</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a></p></div></div><div class="refentry" title="ST_LocateBetween"><div class="refentry.separator"><hr></div><a name="ST_LocateBetween"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LocateBetween — Return a derived geometry collection value with elements
			that match the specified range of measures inclusively. Polygonal
			elements are not supported.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LocateBetween</b>(</code>geometry  <var class="pdparam">geomA</var>, float8  <var class="pdparam">measure_start</var>, float8  <var class="pdparam">measure_end</var>, float8  <var class="pdparam">offset</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80651216"></a><h2>Description</h2><p>Return a derived geometry collection value with elements
			that match the specified range of measures inclusively. Polygonal
			elements are not supported.</p><p>Semantic is specified by: ISO/IEC CD 13249-3:200x(E) - Text
			for Continuation CD Editing Meeting</p><p>Availability: 1.1.0 by old name ST_Locate_Between_Measures. </p><p>Changed: 2.0.0 - in prior versions this used to be called ST_Locate_Between_Measures.  The old name has been deprecated and will be removed in the future but is still available for backward compatibility.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports M coordinates.</p></div><div class="refsection" title="Examples"><a name="idp80654928"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(the_geom)
		FROM
		(SELECT ST_LocateBetween(
			ST_GeomFromText('MULTILINESTRING M ((1 2 3, 3 4 2, 9 4 3),
		(1 2 3, 5 4 5))'),1.5, 3) As the_geom) As foo;

							 st_asewkt
------------------------------------------------------------------------
 GEOMETRYCOLLECTION M (LINESTRING M (1 2 3,3 4 2,9 4 3),POINT M (1 2 3))

--Geometry collections are difficult animals so dump them
--to make them more digestable
SELECT ST_AsText((ST_Dump(the_geom)).geom)
		FROM
		(SELECT ST_LocateBetween(
			ST_GeomFromText('MULTILINESTRING M ((1 2 3, 3 4 2, 9 4 3),
		(1 2 3, 5 4 5))'),1.5, 3) As the_geom) As foo;

		   st_asewkt
--------------------------------
 LINESTRING M (1 2 3,3 4 2,9 4 3)
 POINT M (1 2 3)</pre></div><div class="refsection" title="See Also"><a name="idp80656464"></a><h2>See Also</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a>, <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a></p></div></div><div class="refentry" title="ST_LocateBetweenElevations"><div class="refentry.separator"><hr></div><a name="ST_LocateBetweenElevations"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_LocateBetweenElevations — Return a derived geometry (collection) value with elements
			that intersect the specified range of elevations inclusively. Only 3D, 4D LINESTRINGS and MULTILINESTRINGS
			are supported.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_LocateBetweenElevations</b>(</code>geometry  <var class="pdparam">geom_mline</var>, float8  <var class="pdparam">elevation_start</var>, float8  <var class="pdparam">elevation_end</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80673104"></a><h2>Description</h2><p>Return a derived geometry (collection) value with elements
			that intersect the specified range of elevations inclusively. Only 3D, 3DM LINESTRINGS and MULTILINESTRINGS
			are supported.</p><p>Availability: 1.4.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80684368"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsEWKT(ST_LocateBetweenElevations(
			ST_GeomFromEWKT('LINESTRING(1 2 3, 4 5 6)'),2,4)) As ewelev;
								   ewelev
----------------------------------------------------------------
	MULTILINESTRING((1 2 3,2 3 4))

SELECT ST_AsEWKT(ST_LocateBetweenElevations(
			ST_GeomFromEWKT('LINESTRING(1 2 6, 4 5 -1, 7 8 9)'),6,9)) As ewelev;

				ewelev
----------------------------------------------------------------
GEOMETRYCOLLECTION(POINT(1 2 6),LINESTRING(6.1 7.1 6,7 8 9))

--Geometry collections are difficult animals so dump them
--to make them more digestable
SELECT ST_AsEWKT((ST_Dump(the_geom)).geom)
		FROM
		(SELECT ST_LocateBetweenElevations(
			ST_GeomFromEWKT('LINESTRING(1 2 6, 4 5 -1, 7 8 9)'),6,9) As the_geom) As foo;

		   st_asewkt
--------------------------------
POINT(1 2 6)
LINESTRING(6.1 7.1 6,7 8 9)
</pre></div><div class="refsection" title="See Also"><a name="idp80685904"></a><h2>See Also</h2><p><a class="xref" href="#ST_Dump" title="ST_Dump">ST_Dump</a></p></div></div><div class="refentry" title="ST_InterpolatePoint"><div class="refentry.separator"><hr></div><a name="ST_InterpolatePoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_InterpolatePoint — Return the value of the measure dimension of a geometry at the point closed to the provided point.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_InterpolatePoint</b>(</code>geometry  <var class="pdparam">line</var>, geometry  <var class="pdparam">point</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80692944"></a><h2>Description</h2><p>Return the value of the measure dimension of a geometry at the point closed to the provided point.</p><p>Availability: 2.0.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80695888"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_InterpolatePoint('LINESTRING M (0 0 0, 10 0 20)', 'POINT(5 5)');
 st_interpolatepoint
 ---------------------
			            10
	</pre></div><div class="refsection" title="See Also"><a name="idp80697168"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>, <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>, <a class="xref" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a></p></div></div><div class="refentry" title="ST_AddMeasure"><div class="refentry.separator"><hr></div><a name="ST_AddMeasure"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddMeasure — Return a derived geometry with measure elements linearly interpolated between the start and end points.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_AddMeasure</b>(</code>geometry  <var class="pdparam">geom_mline</var>, float8  <var class="pdparam">measure_start</var>, float8  <var class="pdparam">measure_end</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80706000"></a><h2>Description</h2><p>Return a derived geometry with measure elements linearly interpolated between the start and end points. If the geometry has no measure dimension, one is added. If the geometry has a measure dimension, it is over-written with new values. Only LINESTRINGS and MULTILINESTRINGS are supported.</p><p>Availability: 1.5.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80709072"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRING(1 0, 2 0, 4 0)'),1,4)) As ewelev;
           ewelev
--------------------------------
 LINESTRINGM(1 0 1,2 0 2,4 0 4)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRING(1 0 4, 2 0 4, 4 0 4)'),10,40)) As ewelev;
                 ewelev
----------------------------------------
 LINESTRING(1 0 4 10,2 0 4 20,4 0 4 40)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('LINESTRINGM(1 0 4, 2 0 4, 4 0 4)'),10,40)) As ewelev;
                 ewelev
----------------------------------------
 LINESTRINGM(1 0 10,2 0 20,4 0 40)

SELECT ST_AsText(ST_AddMeasure(
ST_GeomFromEWKT('MULTILINESTRINGM((1 0 4, 2 0 4, 4 0 4),(1 0 4, 2 0 4, 4 0 4))'),10,70)) As ewelev;
                             ewelev
-----------------------------------------------------------------
 MULTILINESTRINGM((1 0 10,2 0 20,4 0 40),(1 0 40,2 0 50,4 0 70))
</pre></div></div></div><div class="sect1" title="8.13. Temporal Support"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Temporal"></a>8.13. Temporal Support</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_IsValidTrajectory">ST_IsValidTrajectory</a></span><span class="refpurpose"> — 
Returns <code class="varname">true</code> if the geometry is a valid trajectory.
      </span></dt><dt><span class="refentrytitle"><a href="#ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a></span><span class="refpurpose"> — 
Returns the measure at which points interpolated along two lines are closest.
      </span></dt><dt><span class="refentrytitle"><a href="#ST_DistanceCPA">ST_DistanceCPA</a></span><span class="refpurpose"> — 
Returns the distance between closest points of approach in two trajectories.
      </span></dt><dt><span class="refentrytitle"><a href="#ST_CPAWithin">ST_CPAWithin</a></span><span class="refpurpose"> — 
Returns true if the trajectories' closest points of approach
are within the specified distance.
      </span></dt></dl></div><div class="refentry" title="ST_IsValidTrajectory"><a name="ST_IsValidTrajectory"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsValidTrajectory — 
Returns <code class="varname">true</code> if the geometry is a valid trajectory.
      </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsValidTrajectory</b>(</code>geometry  <var class="pdparam">line</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80845136"></a><h2>Description</h2><p>
Tell if a geometry encodes a valid trajectory.
Valid trajectories are encoded as LINESTRING with M value growing
from each vertex to the next.
			</p><p>
Valid trajectories are expected as input to some spatio-temporal queries
like <a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>
			</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80848848"></a><h2>Examples</h2><pre class="programlisting">
-- A valid trajectory
SELECT ST_IsValidTrajectory(ST_MakeLine(
  ST_MakePointM(0,0,1),
  ST_MakePointM(0,1,2))
);
 t

-- An invalid trajectory
SELECT ST_IsValidTrajectory(ST_MakeLine(ST_MakePointM(0,0,1), ST_MakePointM(0,1,0)));
NOTICE:  Measure of vertex 1 (0) not bigger than measure of vertex 0 (1)
 st_isvalidtrajectory
----------------------
 f
</pre></div><div class="refsection" title="See Also"><a name="idp80850384"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>
			</p></div></div><div class="refentry" title="ST_ClosestPointOfApproach"><div class="refentry.separator"><hr></div><a name="ST_ClosestPointOfApproach"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ClosestPointOfApproach — 
Returns the measure at which points interpolated along two lines are closest.
      </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_ClosestPointOfApproach</b>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80857680"></a><h2>Description</h2><p>
Returns the smallest measure at which point interpolated along the given
lines are at the smallest distance. Inputs must be valid trajectories as
checked by <a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>. Null is returned if
the trajectories do not overlap on the M range.
			</p><p>
See <a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a> for getting the actual points at
the given measure.
			</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80861904"></a><h2>Examples</h2><pre class="programlisting">
-- Return the time in which two objects moving between 10:00 and 11:00
-- are closest to each other and their distance at that point
WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
), cpa AS (
  SELECT ST_ClosestPointOfApproach(a,b) m FROM inp
), points AS (
  SELECT ST_Force3DZ(ST_GeometryN(ST_LocateAlong(a,m),1)) pa,
         ST_Force3DZ(ST_GeometryN(ST_LocateAlong(b,m),1)) pb
  FROM inp, cpa
)
SELECT to_timestamp(m) t,
       ST_Distance(pa,pb) distance
FROM points, cpa;

               t               |     distance
-------------------------------+------------------
 2015-05-26 10:45:31.034483+02 | 1.96036833151395
</pre></div><div class="refsection" title="See Also"><a name="idp80863440"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>,
<a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>,
<a class="xref" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>,
<a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>
			</p></div></div><div class="refentry" title="ST_DistanceCPA"><div class="refentry.separator"><hr></div><a name="ST_DistanceCPA"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DistanceCPA — 
Returns the distance between closest points of approach in two trajectories.
      </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_DistanceCPA</b>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80871888"></a><h2>Description</h2><p>
Returns the minimum distance two moving objects have ever been each-other.
Inputs must be valid trajectories as checked by
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>.
Null is returned if the trajectories do not overlap on the M range.
			</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80875344"></a><h2>Examples</h2><pre class="programlisting">
-- Return the minimum distance of two objects moving between 10:00 and 11:00
WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
)
SELECT ST_DistanceCPA(a,b) distance FROM inp;

     distance
------------------
 1.96036833151395
</pre></div><div class="refsection" title="See Also"><a name="idp80877008"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>,
<a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>,
<a class="xref" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>,
<a class="xref" href="#geometry_distance_cpa" title="|=|">|=|</a>
			</p></div></div><div class="refentry" title="ST_CPAWithin"><div class="refentry.separator"><hr></div><a name="ST_CPAWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CPAWithin — 
Returns true if the trajectories' closest points of approach
are within the specified distance.
      </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_CPAWithin</b>(</code>geometry  <var class="pdparam">track1</var>, geometry  <var class="pdparam">track2</var>, float8  <var class="pdparam">maxdist</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80886480"></a><h2>Description</h2><p>
Checks whether two moving objects have ever been within the
specified max distance.
      </p><p>
Inputs must be valid trajectories as checked by
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>.
False is returned if the trajectories do not overlap on the M range.
			</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp80890192"></a><h2>Examples</h2><pre class="programlisting">
WITH inp AS ( SELECT
  ST_AddMeasure('LINESTRING Z (0 0 0, 10 0 5)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) a,
  ST_AddMeasure('LINESTRING Z (0 2 10, 12 1 2)'::geometry,
    extract(epoch from '2015-05-26 10:00'::timestamptz),
    extract(epoch from '2015-05-26 11:00'::timestamptz)
  ) b
)
SELECT ST_CPAWithin(a,b,2), ST_DistanceCPA(a,b) distance FROM inp;

 st_cpawithin |     distance
--------------+------------------
 t            | 1.96521473776207
</pre></div><div class="refsection" title="See Also"><a name="idp80891728"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>,
<a class="xref" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>,
<a class="xref" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>,
<a class="xref" href="#geometry_distance_cpa" title="|=|">|=|</a>
			</p></div></div></div><div class="sect1" title="8.14. Long Transactions Support"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Long_Transactions_Support"></a>8.14. Long Transactions Support</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#AddAuth">AddAuth</a></span><span class="refpurpose"> — Add an authorization token to be used in current transaction.</span></dt><dt><span class="refentrytitle"><a href="#CheckAuth">CheckAuth</a></span><span class="refpurpose"> — Creates trigger on a table to prevent/allow updates and deletes of rows based on authorization token.</span></dt><dt><span class="refentrytitle"><a href="#DisableLongTransactions">DisableLongTransactions</a></span><span class="refpurpose"> — Disable long transaction support. This function removes the
			long transaction support metadata tables, and drops all triggers
			attached to lock-checked tables.</span></dt><dt><span class="refentrytitle"><a href="#EnableLongTransactions">EnableLongTransactions</a></span><span class="refpurpose"> — Enable long transaction support. This function creates the
			required metadata tables, needs to be called once before using the
			other functions in this section. Calling it twice is
			harmless.</span></dt><dt><span class="refentrytitle"><a href="#LockRow">LockRow</a></span><span class="refpurpose"> — Set lock/authorization for specific row in table</span></dt><dt><span class="refentrytitle"><a href="#UnlockRows">UnlockRows</a></span><span class="refpurpose"> — Remove all locks held by specified authorization id. Returns
			the number of locks released.</span></dt></dl></div><p>This module and associated pl/pgsql functions have been
	  implemented to provide long locking support required by <a class="ulink" href="http://www.opengeospatial.org/standards/wfs" target="_top">Web Feature Service</a> specification.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Users must use <a class="ulink" href="http://www.postgresql.org/docs/current/static/transaction-iso.html" target="_top">serializable
		transaction level</a> otherwise locking mechanism would
		break.</p></td></tr></table></div><div class="refentry" title="AddAuth"><a name="AddAuth"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddAuth — Add an authorization token to be used in current transaction.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">AddAuth</b>(</code>text  <var class="pdparam">auth_token</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80974416"></a><h2>Description</h2><p>Add an authorization token to be used in current transaction.</p><p>Creates/adds to a temp table called temp_lock_have_table the current transaction identifier
			and authorization token key.</p><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp80976464"></a><h2>Examples</h2><pre class="programlisting">
		SELECT LockRow('towns', '353', 'priscilla');
		BEGIN TRANSACTION;
			SELECT AddAuth('joey');
			UPDATE towns SET the_geom = ST_Translate(the_geom,2,2) WHERE gid = 353;
		COMMIT;


		---Error--
		ERROR:  UPDATE where "gid" = '353' requires authorization 'priscilla'
		</pre></div><div class="refsection" title="See Also"><a name="idp80978000"></a><h2>See Also</h2><p><a class="xref" href="#LockRow" title="LockRow">LockRow</a></p></div></div><div class="refentry" title="CheckAuth"><div class="refentry.separator"><hr></div><a name="CheckAuth"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CheckAuth — Creates trigger on a table to prevent/allow updates and deletes of rows based on authorization token.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">CheckAuth</b>(</code>text  <var class="pdparam">a_schema_name</var>, text  <var class="pdparam">a_table_name</var>, text  <var class="pdparam">a_key_column_name</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">CheckAuth</b>(</code>text  <var class="pdparam">a_table_name</var>, text  <var class="pdparam">a_key_column_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80989264"></a><h2>Description</h2><p>Creates trigger on a table to prevent/allow updates and deletes of rows based on authorization token. Identify rows using &lt;rowid_col&gt; column.</p><p>If a_schema_name is not passed in, then searches for table in current schema.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If an authorization trigger already exists on this table function errors.</p><p>If Transaction support is not enabled, function throws an exception.</p></td></tr></table></div><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp80992336"></a><h2>Examples</h2><pre class="programlisting">
			SELECT CheckAuth('public', 'towns', 'gid');
			result
			------
			0
			</pre></div><div class="refsection" title="See Also"><a name="idp80993872"></a><h2>See Also</h2><p><a class="xref" href="#EnableLongTransactions" title="EnableLongTransactions">EnableLongTransactions</a></p></div></div><div class="refentry" title="DisableLongTransactions"><div class="refentry.separator"><hr></div><a name="DisableLongTransactions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DisableLongTransactions — Disable long transaction support. This function removes the
			long transaction support metadata tables, and drops all triggers
			attached to lock-checked tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">DisableLongTransactions</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp80999120"></a><h2>Description</h2><p>Disable long transaction support. This function removes the
			long transaction support metadata tables, and drops all triggers
			attached to lock-checked tables.</p><p>Drops meta table called <code class="varname">authorization_table</code> and a view called <code class="varname">authorized_tables</code>
				and all triggers called <code class="varname">checkauthtrigger</code></p><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp81002064"></a><h2>Examples</h2><pre class="programlisting">SELECT DisableLongTransactions();
--result--
Long transactions support disabled
		  </pre></div><div class="refsection" title="See Also"><a name="idp81003600"></a><h2>See Also</h2><p><a class="xref" href="#EnableLongTransactions" title="EnableLongTransactions">EnableLongTransactions</a></p></div></div><div class="refentry" title="EnableLongTransactions"><div class="refentry.separator"><hr></div><a name="EnableLongTransactions"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>EnableLongTransactions — Enable long transaction support. This function creates the
			required metadata tables, needs to be called once before using the
			other functions in this section. Calling it twice is
			harmless.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">EnableLongTransactions</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81008848"></a><h2>Description</h2><p>Enable long transaction support. This function creates the
			required metadata tables, needs to be called once before using the
			other functions in this section. Calling it twice is
			harmless.</p><p>Creates a meta table called <code class="varname">authorization_table</code> and a view called <code class="varname">authorized_tables</code></p><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp81011408"></a><h2>Examples</h2><pre class="programlisting">SELECT EnableLongTransactions();
--result--
Long transactions support enabled
		  </pre></div><div class="refsection" title="See Also"><a name="idp81012944"></a><h2>See Also</h2><p><a class="xref" href="#DisableLongTransactions" title="DisableLongTransactions">DisableLongTransactions</a></p></div></div><div class="refentry" title="LockRow"><div class="refentry.separator"><hr></div><a name="LockRow"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>LockRow — Set lock/authorization for specific row in table</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">LockRow</b>(</code>text  <var class="pdparam">a_schema_name</var>, text  <var class="pdparam">a_table_name</var>, text  <var class="pdparam">a_row_key</var>, text <var class="pdparam">an_auth_token</var>, timestamp <var class="pdparam">expire_dt</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">LockRow</b>(</code>text  <var class="pdparam">a_table_name</var>, text  <var class="pdparam">a_row_key</var>, text <var class="pdparam">an_auth_token</var>, timestamp <var class="pdparam">expire_dt</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">LockRow</b>(</code>text  <var class="pdparam">a_table_name</var>, text  <var class="pdparam">a_row_key</var>, text <var class="pdparam">an_auth_token</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81032784"></a><h2>Description</h2><p>Set lock/authorization for specific row in table
		&lt;authid&gt; is a text value, &lt;expires&gt; is a timestamp
		defaulting to now()+1hour. Returns 1 if lock has been assigned, 0
		otherwise (already locked by other auth)</p><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp81034320"></a><h2>Examples</h2><pre class="programlisting">SELECT LockRow('public', 'towns', '2', 'joey');
LockRow
-------
1

--Joey has already locked the record and Priscilla is out of luck
SELECT LockRow('public', 'towns', '2', 'priscilla');
LockRow
-------
0

		</pre></div><div class="refsection" title="See Also"><a name="idp81035856"></a><h2>See Also</h2><p><a class="xref" href="#UnlockRows" title="UnlockRows">UnlockRows</a></p></div></div><div class="refentry" title="UnlockRows"><div class="refentry.separator"><hr></div><a name="UnlockRows"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>UnlockRows — Remove all locks held by specified authorization id. Returns
			the number of locks released.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">UnlockRows</b>(</code>text  <var class="pdparam">auth_token</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81041872"></a><h2>Description</h2><p>Remove all locks held by specified authorization id. Returns
			the number of locks released.</p><p>Availability: 1.1.3</p></div><div class="refsection" title="Examples"><a name="idp81043408"></a><h2>Examples</h2><pre class="programlisting">
		SELECT LockRow('towns', '353', 'priscilla');
		SELECT LockRow('towns', '2', 'priscilla');
		SELECT UnLockRows('priscilla');
		UnLockRows
		------------
		2
		</pre></div><div class="refsection" title="See Also"><a name="idp81044944"></a><h2>See Also</h2><p><a class="xref" href="#LockRow" title="LockRow">LockRow</a></p></div></div></div><div class="sect1" title="8.15. Miscellaneous Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Miscellaneous_Functions"></a>8.15. Miscellaneous Functions</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_Accum">ST_Accum</a></span><span class="refpurpose"> — Aggregate. Constructs an array of geometries.</span></dt><dt><span class="refentrytitle"><a href="#Box2D">Box2D</a></span><span class="refpurpose"> — Returns a BOX2D representing the maximum extents of the geometry.</span></dt><dt><span class="refentrytitle"><a href="#Box3D">Box3D</a></span><span class="refpurpose"> — Returns a BOX3D representing the maximum extents of the geometry.</span></dt><dt><span class="refentrytitle"><a href="#ST_EstimatedExtent">ST_EstimatedExtent</a></span><span class="refpurpose"> — Return the 'estimated' extent of the given spatial table.
			The estimated is taken from the geometry column's statistics. The
			current schema will be used if not specified.</span></dt><dt><span class="refentrytitle"><a href="#ST_Expand">ST_Expand</a></span><span class="refpurpose"> — Returns bounding box expanded in all directions from the bounding box of the input geometry. Uses double-precision</span></dt><dt><span class="refentrytitle"><a href="#ST_Extent">ST_Extent</a></span><span class="refpurpose"> — an aggregate function that returns the bounding box that bounds rows of geometries.</span></dt><dt><span class="refentrytitle"><a href="#ST_3DExtent">ST_3DExtent</a></span><span class="refpurpose"> — an aggregate function that returns the box3D bounding box that bounds rows of geometries.</span></dt><dt><span class="refentrytitle"><a href="#Find_SRID">Find_SRID</a></span><span class="refpurpose"> — The syntax is find_srid(a_db_schema, a_table,
			a_column) and the function returns the integer SRID of the
			specified column by searching through the GEOMETRY_COLUMNS table.</span></dt><dt><span class="refentrytitle"><a href="#ST_MemSize">ST_MemSize</a></span><span class="refpurpose"> — Returns the amount of space (in bytes) the geometry takes.</span></dt><dt><span class="refentrytitle"><a href="#ST_Point_Inside_Circle">ST_PointInsideCircle</a></span><span class="refpurpose"> — Is the point geometry insert circle defined by center_x, center_y, radius</span></dt></dl></div><div class="refentry" title="ST_Accum"><a name="ST_Accum"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Accum — Aggregate. Constructs an array of geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry[] <b class="fsfunc">ST_Accum</b>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81148240"></a><h2>Description</h2><p>Aggregate. Constructs an array of geometries.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp81155280"></a><h2>Examples</h2><pre class="programlisting">SELECT (ST_Accum(the_geom)) As all_em, ST_AsText((ST_Accum(the_geom))[1]) As grabone,
(ST_Accum(the_geom))[2:4] as grab_rest
			FROM (SELECT ST_MakePoint(a*CAST(random()*10 As integer), a*CAST(random()*10 As integer), a*CAST(random()*10 As integer)) As the_geom
				FROM generate_series(1,4) a) As foo;

all_em|grabone   | grab_rest

-------------------------------------------------------------------------------+

 {0101000080000000000000144000000000000024400000000000001040:
 0101000080000000000
00018400000000000002C400000000000003040:
0101000080000000000000354000000000000038400000000000001840:
010100008000000000000040400000000000003C400000000000003040} |
 POINT(5 10) | {010100008000000000000018400000000000002C400000000000003040:
 0101000080000000000000354000000000000038400000000000001840:
 010100008000000000000040400000000000003C400000000000003040}
(1 row)
		</pre></div><div class="refsection" title="See Also"><a name="idp81156816"></a><h2>See Also</h2><p><a class="xref" href="#ST_Collect" title="ST_Collect">ST_Collect</a></p></div></div><div class="refentry" title="Box2D"><div class="refentry.separator"><hr></div><a name="Box2D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Box2D — Returns a BOX2D representing the maximum extents of the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <b class="fsfunc">Box2D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81162832"></a><h2>Description</h2><p>Returns a BOX2D representing the maximum extents of the geometry.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp81168336"></a><h2>Examples</h2><pre class="programlisting">SELECT Box2D(ST_GeomFromText('LINESTRING(1 2, 3 4, 5 6)'));
	box2d
	---------
	BOX(1 2,5 6)

	SELECT Box2D(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'));
	box2d
	--------
	BOX(220186.984375 150406,220288.25 150506.140625)
	</pre></div><div class="refsection" title="See Also"><a name="idp81169872"></a><h2>See Also</h2><p><a class="xref" href="#Box3D" title="Box3D">Box3D</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a></p></div></div><div class="refentry" title="Box3D"><div class="refentry.separator"><hr></div><a name="Box3D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Box3D — Returns a BOX3D representing the maximum extents of the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <b class="fsfunc">Box3D</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81176272"></a><h2>Description</h2><p>Returns a BOX3D representing the maximum extents of the geometry.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp81183312"></a><h2>Examples</h2><pre class="programlisting">SELECT Box3D(ST_GeomFromEWKT('LINESTRING(1 2 3, 3 4 5, 5 6 5)'));
	Box3d
	---------
	BOX3D(1 2 3,5 6 5)

	SELECT Box3D(ST_GeomFromEWKT('CIRCULARSTRING(220268 150415 1,220227 150505 1,220227 150406 1)'));
	Box3d
	--------
	BOX3D(220227 150406 1,220268 150415 1)
	</pre></div><div class="refsection" title="See Also"><a name="idp81184848"></a><h2>See Also</h2><p><a class="xref" href="#Box2D" title="Box2D">Box2D</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a></p></div></div><div class="refentry" title="ST_EstimatedExtent"><div class="refentry.separator"><hr></div><a name="ST_EstimatedExtent"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_EstimatedExtent — Return the 'estimated' extent of the given spatial table.
			The estimated is taken from the geometry column's statistics. The
			current schema will be used if not specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <b class="fsfunc">ST_EstimatedExtent</b>(</code>text  <var class="pdparam">schema_name</var>, text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var>, boolean  <var class="pdparam">parent_ony</var><code>)</code>;</p><p><code class="funcdef">box2d <b class="fsfunc">ST_EstimatedExtent</b>(</code>text  <var class="pdparam">schema_name</var>, text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var><code>)</code>;</p><p><code class="funcdef">box2d <b class="fsfunc">ST_EstimatedExtent</b>(</code>text  <var class="pdparam">table_name</var>, text  <var class="pdparam">geocolumn_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81210064"></a><h2>Description</h2><p>Return the 'estimated' extent of the given spatial table.
			The estimated is taken from the geometry column's statistics. The
			current schema will be used if not specified. The default behavior
			is to also use statistics collected from children tables (tables
			with INHERITS) if available. If 'parent_ony' is set to TRUE, only
			statistics for the given table are used and children tables are
			ignored.
		</p><p>For PostgreSQL&gt;=8.0.0 statistics are gathered by VACUUM
		ANALYZE and resulting extent will be about 95% of the real
		one.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
In absence of statistics (empty table or no ANALYZE called) this function
returns NULL.  Prior to version 1.5.4 an exception was thrown
instead.
		</p></td></tr></table></div><p>For PostgreSQL&lt;8.0.0 statistics are gathered by
		update_geometry_stats() and resulting extent will be exact.</p><p>Availability: 1.0.0</p><p>Changed: 2.1.0. Up to 2.0.x this was called ST_Estimated_Extent.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp81214800"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_EstimatedExtent('ny', 'edges', 'the_geom');
--result--
BOX(-8877653 4912316,-8010225.5 5589284)

SELECT ST_EstimatedExtent('feature_poly', 'the_geom');
--result--
BOX(-124.659652709961 24.6830825805664,-67.7798080444336 49.0012092590332)
		</pre></div><div class="refsection" title="See Also"><a name="idp81216336"></a><h2>See Also</h2><p><a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a></p></div></div><div class="refentry" title="ST_Expand"><div class="refentry.separator"><hr></div><a name="ST_Expand"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Expand — Returns bounding box expanded in all directions from the bounding box of the input geometry. Uses double-precision</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Expand</b>(</code>geometry  <var class="pdparam">geom</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">geometry <b class="fsfunc">ST_Expand</b>(</code>geometry  <var class="pdparam">geom</var>, float <var class="pdparam">dx</var>, float <var class="pdparam">dy</var>, float <var class="pdparam">dz=0</var>, float <var class="pdparam">dm=0</var><code>)</code>;</p><p><code class="funcdef">box2d <b class="fsfunc">ST_Expand</b>(</code>box2d  <var class="pdparam">box</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">box2d <b class="fsfunc">ST_Expand</b>(</code>box2d  <var class="pdparam">box</var>, float <var class="pdparam">dx</var>, float <var class="pdparam">dy</var><code>)</code>;</p><p><code class="funcdef">box3d <b class="fsfunc">ST_Expand</b>(</code>box3d  <var class="pdparam">box</var>, float <var class="pdparam">units_to_expand</var><code>)</code>;</p><p><code class="funcdef">box3d <b class="fsfunc">ST_Expand</b>(</code>box3d  <var class="pdparam">box</var>, float  <var class="pdparam">dx</var>, float  <var class="pdparam">dy</var>, float  <var class="pdparam">dz=0</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81250512"></a><h2>Description</h2><p>This function returns a bounding box expanded from the bounding box of the input,
			either by specifying a single distance with which the box should be expanded in all
			directions, or by specifying an expansion distance for each direction.

			Uses double-precision. Can be very useful for distance queries, or to add a bounding box
			filter to a query to take advantage of a spatial index.</p><p>In addition to the geometry version of ST_Expand, which is the most commonly used, variants
			are provided that accept and produce internal BOX2D and BOX3D data types.
		</p><p>ST_Expand is similar in concept to ST_Buffer, except while buffer expands the geometry in all directions,
			ST_Expand expands the bounding box an x,y,z unit amount.</p><p>Units are in the units of the spatial reference system in use denoted by the SRID.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Pre 1.3, ST_Expand was used in conjunction with distance to do indexable queries.  Something of the form
			<code class="code">the_geom &amp;&amp; ST_Expand('POINT(10 20)', 10) AND ST_Distance(the_geom, 'POINT(10 20)') &lt; 10</code>
			Post 1.2, this was replaced with the easier ST_DWithin construct.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Availability: 1.5.0 behavior changed to output double precision instead of float4 coordinates.</p><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Enhanced: 2.3.0 support was added to expand a box by different amounts in different dimensions.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp81258448"></a><h2>Examples</h2><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Examples below use US National Atlas Equal Area (SRID=2163) which is a meter projection</p></td></tr></table></div><pre class="programlisting">
		
--10 meter expanded box around bbox of a linestring
SELECT CAST(ST_Expand(ST_GeomFromText('LINESTRING(2312980 110676,2312923 110701,2312892 110714)', 2163),10) As box2d);
					 st_expand
------------------------------------
 BOX(2312882 110666,2312990 110724)

--10 meter expanded 3d box of a 3d box
SELECT ST_Expand(CAST('BOX3D(778783 2951741 1,794875 2970042.61545891 10)' As box3d),10)
							  st_expand
-----------------------------------------------------
 BOX3D(778773 2951731 -9,794885 2970052.61545891 20)

 --10 meter geometry astext rep of a expand box around a point geometry
 SELECT ST_AsEWKT(ST_Expand(ST_GeomFromEWKT('SRID=2163;POINT(2312980 110676)'),10));
											st_asewkt
-------------------------------------------------------------------------------------------------
 SRID=2163;POLYGON((2312970 110666,2312970 110686,2312990 110686,2312990 110666,2312970 110666))

		</pre></div><div class="refsection" title="See Also"><a name="idp81260496"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>, <a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>, <a class="xref" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>, <a class="xref" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_Extent"><div class="refentry.separator"><hr></div><a name="ST_Extent"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Extent — an aggregate function that returns the bounding box that bounds rows of geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box2d <b class="fsfunc">ST_Extent</b>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81268432"></a><h2>Description</h2><p>ST_Extent returns a bounding box that encloses a set of geometries. The ST_Extent function is an "aggregate" function in the
			terminology of SQL. That means that it operates on lists
			of data, in the same way the SUM() and AVG() functions do.</p><p>Since it returns a bounding box, the spatial Units are in the units of the spatial reference system in use denoted by the SRID</p><p>ST_Extent is similar in concept to Oracle Spatial/Locator's SDO_AGGR_MBR</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Since ST_Extent returns a bounding box, the SRID meta-data is lost.  Use ST_SetSRID to force it back into
			a geometry with SRID meta data.  The coordinates are in the units of the spatial ref of the orginal geometries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Extent will return boxes with only an x and y component even with (x,y,z) coordinate geometries.  To maintain x,y,z use ST_3DExtent instead.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Availability: 1.4.0</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp81276112"></a><h2>Examples</h2><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Examples below use Massachusetts State Plane ft (SRID=2249)</p></td></tr></table></div><pre class="programlisting">

SELECT ST_Extent(the_geom) as bextent FROM sometable;
					 st_bextent
------------------------------------
BOX(739651.875 2908247.25,794875.8125 2970042.75)


--Return extent of each category of geometries
SELECT ST_Extent(the_geom) as bextent
FROM sometable
GROUP BY category ORDER BY category;

					  bextent                       |         name
----------------------------------------------------+----------------
 BOX(778783.5625 2951741.25,794875.8125 2970042.75) | A
 BOX(751315.8125 2919164.75,765202.6875 2935417.25) | B
 BOX(739651.875 2917394.75,756688.375 2935866)      | C

 --Force back into a geometry
 -- and render the extended text representation of that geometry
SELECT ST_SetSRID(ST_Extent(the_geom),2249) as bextent FROM sometable;

				bextent
--------------------------------------------------------------------------------
 SRID=2249;POLYGON((739651.875 2908247.25,739651.875 2970042.75,794875.8125 2970042.75,
 794875.8125 2908247.25,739651.875 2908247.25))
		</pre></div><div class="refsection" title="See Also"><a name="idp81277904"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>, <a class="xref" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a>, <a class="xref" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_3DExtent"><div class="refentry.separator"><hr></div><a name="ST_3DExtent"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_3DExtent — an aggregate function that returns the box3D bounding box that bounds rows of geometries.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <b class="fsfunc">ST_3DExtent</b>(</code>geometry set <var class="pdparam">geomfield</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81129424"></a><h2>Description</h2><p>ST_3DExtent returns a box3d (includes Z coordinate) bounding box that encloses a set of geometries. The ST_3DExtent function is an "aggregate" function in the
			terminology of SQL. That means that it operates on lists
			of data, in the same way the SUM() and AVG() functions do.</p><p>Since it returns a bounding box, the spatial Units are in the units of the spatial reference system in use denoted by the SRID</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Since ST_3DExtent returns a bounding box, the SRID meta-data is lost.  Use ST_SetSRID to force it back into
			a geometry with SRID meta data.  The coordinates are in the units of the spatial ref of the orginal geometries.</p></td></tr></table></div><p>Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</p><p>Changed: 2.0.0 In prior versions this used to be called ST_Extent3D</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p></div><div class="refsection" title="Examples"><a name="idp81306064"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_3DExtent(foo.the_geom) As b3extent
FROM (SELECT ST_MakePoint(x,y,z) As the_geom
	FROM generate_series(1,3) As x
		CROSS JOIN generate_series(1,2) As y
		CROSS JOIN generate_series(0,2) As Z) As foo;
	  b3extent
--------------------
 BOX3D(1 1 0,3 2 2)

--Get the extent of various elevated circular strings
SELECT ST_3DExtent(foo.the_geom) As b3extent
FROM (SELECT ST_Translate(ST_Force_3DZ(ST_LineToCurve(ST_Buffer(ST_MakePoint(x,y),1))),0,0,z) As the_geom
	FROM generate_series(1,3) As x
		CROSS JOIN generate_series(1,2) As y
		CROSS JOIN generate_series(0,2) As Z) As foo;

	b3extent
--------------------
 BOX3D(1 0 0,4 2 2)
		</pre></div><div class="refsection" title="See Also"><a name="idp81307344"></a><h2>See Also</h2><p><a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>, <a class="xref" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a></p></div></div><div class="refentry" title="Find_SRID"><div class="refentry.separator"><hr></div><a name="Find_SRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Find_SRID — The syntax is find_srid(a_db_schema, a_table,
			a_column) and the function returns the integer SRID of the
			specified column by searching through the GEOMETRY_COLUMNS table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">Find_SRID</b>(</code>varchar  <var class="pdparam">a_schema_name</var>, varchar  <var class="pdparam">a_table_name</var>, varchar  <var class="pdparam">a_geomfield_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81323984"></a><h2>Description</h2><p>The syntax is find_srid(&lt;db/schema&gt;, &lt;table&gt;,
			&lt;column&gt;) and the function returns the integer SRID of the
			specified column by searching through the GEOMETRY_COLUMNS table.
			If the geometry column has not been properly added with the
			AddGeometryColumns() function, this function will not work
			either.</p></div><div class="refsection" title="Examples"><a name="idp81325136"></a><h2>Examples</h2><pre class="programlisting"> SELECT Find_SRID('public', 'tiger_us_state_2007', 'the_geom_4269');
find_srid
----------
4269
</pre></div><div class="refsection" title="See Also"><a name="idp81326800"></a><h2>See Also</h2><p><a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_MemSize"><div class="refentry.separator"><hr></div><a name="ST_MemSize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MemSize — Returns the amount of space (in bytes) the geometry takes.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_MemSize</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81332688"></a><h2>Description</h2><p>Returns the amount of space (in bytes) the geometry takes. </p><p>This is a nice compliment to PostgreSQL built in functions pg_column_size, pg_size_pretty, pg_relation_size, pg_total_relation_size.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>pg_relation_size which gives the byte size of a table may return byte size lower than ST_MemSize. This is because
		pg_relation_size does not add toasted table contribution and large geometries are stored in TOAST tables.</p><p>pg_total_relation_size - includes, the table, the toasted tables, and the indexes.</p><p>pg_column_size returns how much space a geometry would take in a column considering compression, so may be lower than ST_MemSize</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Polyhedral surfaces.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports Triangles and Triangulated Irregular Network Surfaces (TIN).</p><p>Changed: 2.2.0 name changed to ST_MemSize to follow naming convention.  In prior versions this function was called ST_Mem_Size, old name deprecated though still available.</p></div><div class="refsection" title="Examples"><a name="idp81341520"></a><h2>Examples</h2><pre class="programlisting">
--Return how much byte space Boston takes up  in our Mass data set
SELECT pg_size_pretty(SUM(ST_MemSize(the_geom))) as totgeomsum,
pg_size_pretty(SUM(CASE WHEN town = 'BOSTON' THEN ST_MemSize(the_geom) ELSE 0 END)) As bossum,
CAST(SUM(CASE WHEN town = 'BOSTON' THEN ST_MemSize(the_geom) ELSE 0 END)*1.00 /
		SUM(ST_MemSize(the_geom))*100 As numeric(10,2)) As perbos
FROM towns;

totgeomsum	bossum	perbos
----------	------	------
1522 kB		30 kB	1.99


SELECT ST_MemSize(ST_GeomFromText('CIRCULARSTRING(220268 150415,220227 150505,220227 150406)'));

---
73

--What percentage of our table is taken up by just the geometry
SELECT pg_total_relation_size('public.neighborhoods') As fulltable_size, sum(ST_MemSize(the_geom)) As geomsize,
sum(ST_MemSize(the_geom))*1.00/pg_total_relation_size('public.neighborhoods')*100 As pergeom
FROM neighborhoods;
fulltable_size geomsize  pergeom
------------------------------------------------
262144         96238	 36.71188354492187500000
	</pre></div><div class="refsection" title="See Also"><a name="idp81343184"></a><h2>See Also</h2><p></p></div></div><div class="refentry" title="ST_PointInsideCircle"><div class="refentry.separator"><hr></div><a name="ST_Point_Inside_Circle"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PointInsideCircle — Is the point geometry insert circle defined by center_x, center_y, radius</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_PointInsideCircle</b>(</code>geometry  <var class="pdparam">a_point</var>, float  <var class="pdparam">center_x</var>, float  <var class="pdparam">center_y</var>, float  <var class="pdparam">radius</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81356112"></a><h2>Description</h2><p>The syntax for this functions is
			ST_PointInsideCircle(&lt;geometry&gt;,&lt;circle_center_x&gt;,&lt;circle_center_y&gt;,&lt;radius&gt;).
			Returns the true if the geometry is a point and is inside the
			circle. Returns false otherwise.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This only works for points as the name suggests</p></td></tr></table></div><p>Availability: 1.2</p><p>Changed: 2.2.0 In prior versions this used to be called ST_Point_Inside_Circle</p></div><div class="refsection" title="Examples"><a name="idp81358544"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_PointInsideCircle(ST_Point(1,2), 0.5, 2, 3);
 st_pointinsidecircle
------------------------
 t
</pre></div><div class="refsection" title="See Also"><a name="idp81360080"></a><h2>See Also</h2><p><a class="xref" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a></p></div></div></div><div class="sect1" title="8.16. Exceptional Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Exceptional_Functions"></a>8.16. Exceptional Functions</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#PostGIS_AddBBox">PostGIS_AddBBox</a></span><span class="refpurpose"> — Add bounding box to the geometry.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_DropBBox">PostGIS_DropBBox</a></span><span class="refpurpose"> — Drop the bounding box cache from the geometry.</span></dt><dt><span class="refentrytitle"><a href="#PostGIS_HasBBox">PostGIS_HasBBox</a></span><span class="refpurpose"> — Returns TRUE if the bbox of this geometry is cached, FALSE otherwise.</span></dt></dl></div><p>These functions are rarely used functions that should only be used if your data is corrupted in someway.  They are used for troubleshooting corruption
		and also fixing things that should under normal circumstances, never happen.</p><div class="refentry" title="PostGIS_AddBBox"><a name="PostGIS_AddBBox"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_AddBBox — Add bounding box to the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">PostGIS_AddBBox</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81610960"></a><h2>Description</h2><p>Add bounding box to the geometry. This would make bounding
			box based queries faster, but will increase the size of the
			geometry.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Bounding boxes are automatically added to geometries so in general this is not needed
				unless the generated bounding box somehow becomes corrupted or you have an old install that is lacking bounding boxes.  Then you need to drop the old and readd.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp81642832"></a><h2>Examples</h2><pre class="programlisting">UPDATE sometable
 SET the_geom =  PostGIS_AddBBox(the_geom)
 WHERE PostGIS_HasBBox(the_geom) = false;</pre></div><div class="refsection" title="See Also"><a name="idp81644368"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a>, <a class="xref" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a></p></div></div><div class="refentry" title="PostGIS_DropBBox"><div class="refentry.separator"><hr></div><a name="PostGIS_DropBBox"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_DropBBox — Drop the bounding box cache from the geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">PostGIS_DropBBox</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81650768"></a><h2>Description</h2><p>Drop the bounding box cache from the geometry. This reduces
			geometry size, but makes bounding-box based queries slower.  It is also used to drop a corrupt bounding box.  A tale-tell sign of a corrupt cached bounding box
				is when your ST_Intersects and other relation queries leave out geometries that rightfully should return true.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Bounding boxes are automatically added to geometries and improve speed of queries so in general this is not needed
				unless the generated bounding box somehow becomes corrupted or you have an old install that is lacking bounding boxes.
				Then you need to drop the old and readd.  This kind of corruption has been observed in 8.3-8.3.6 series whereby cached bboxes were not always recalculated when a geometry changed and upgrading to a newer version without a dump reload will not
				correct already corrupted boxes.  So one can manually correct using below and readd the bbox or do a dump reload.</p></td></tr></table></div><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp81653840"></a><h2>Examples</h2><pre class="programlisting">--This example drops bounding boxes where the cached box is not correct
			--The force to ST_AsBinary before applying Box2D forces a recalculation of the box, and Box2D applied to the table geometry always
			-- returns the cached bounding box.
			UPDATE sometable
 SET the_geom =  PostGIS_DropBBox(the_geom)
 WHERE Not (Box2D(ST_AsBinary(the_geom)) = Box2D(the_geom));

	UPDATE sometable
 SET the_geom =  PostGIS_AddBBox(the_geom)
 WHERE Not PostGIS_HasBBOX(the_geom);


 </pre></div><div class="refsection" title="See Also"><a name="idp81655376"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>, <a class="xref" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a>, <a class="xref" href="#Box2D" title="Box2D">Box2D</a></p></div></div><div class="refentry" title="PostGIS_HasBBox"><div class="refentry.separator"><hr></div><a name="PostGIS_HasBBox"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_HasBBox — Returns TRUE if the bbox of this geometry is cached, FALSE otherwise.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">PostGIS_HasBBox</b>(</code>geometry  <var class="pdparam">geomA</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp81662160"></a><h2>Description</h2><p>Returns TRUE if the bbox of this geometry is cached, FALSE
				otherwise. Use <a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a> and <a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a> to control caching.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This method supports Circular Strings and Curves</p></div><div class="refsection" title="Examples"><a name="idp81665232"></a><h2>Examples</h2><pre class="programlisting">SELECT the_geom
FROM sometable WHERE PostGIS_HasBBox(the_geom) = false;</pre></div><div class="refsection" title="See Also"><a name="idp81666896"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a>, <a class="xref" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a></p></div></div></div></div><div class="chapter" title="Chapter 9. Raster Reference"><div class="titlepage"><div><div><h2 class="title"><a name="RT_reference"></a>Chapter 9. Raster Reference</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Raster_Types">9.1. Raster Support Data types</a></span></dt><dt><span class="sect1"><a href="#Raster_Management_Functions">9.2. Raster Management</a></span></dt><dt><span class="sect1"><a href="#Raster_Constructors">9.3. Raster Constructors</a></span></dt><dt><span class="sect1"><a href="#Raster_Accessors">9.4. Raster Accessors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Accessors">9.5. Raster Band Accessors</a></span></dt><dt><span class="sect1"><a href="#Raster_Pixel_Accessors">9.6. Raster Pixel Accessors and Setters</a></span></dt><dt><span class="sect1"><a href="#Raster_Editors">9.7. Raster Editors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Editors">9.8. Raster Band Editors</a></span></dt><dt><span class="sect1"><a href="#RasterBand_Stats">9.9. Raster Band Statistics and Analytics</a></span></dt><dt><span class="sect1"><a href="#Raster_Outputs">9.10. Raster Outputs</a></span></dt><dt><span class="sect1"><a href="#Raster_Processing">9.11. Raster Processing</a></span></dt><dd><dl><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra">9.11.1. Map Algebra</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra_Callbacks">9.11.2. Built-in Map Algebra Callback Functions</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_DEM">9.11.3. DEM (Elevation)</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_Geometry">9.11.4. Raster to Geometry</a></span></dt></dl></dd><dt><span class="sect1"><a href="#RT_Operators">9.12. Raster Operators</a></span></dt><dt><span class="sect1"><a href="#Raster_Relationships">9.13. Raster and Raster Band Spatial Relationships</a></span></dt></dl></div><p>The functions given below are the ones which a user of PostGIS Raster is
  likely to need and which are currently available in PostGIS Raster. There are other functions which are required support
  functions to the raster objects which are not of use to a general
  user.</p><p><code class="varname">raster</code> is a new PostGIS type for storing and analyzing raster data. </p><p>For loading rasters from raster files please refer to <a class="xref" href="#RT_Loading_Rasters" title="5.1. Loading and Creating Rasters">Section 5.1, “Loading and Creating Rasters”</a></p><p>For the examples in this reference we will be using a raster table of dummy rasters - Formed with the following code </p><pre class="programlisting">CREATE TABLE dummy_rast(rid integer, rast raster);
INSERT INTO dummy_rast(rid, rast)
VALUES (1,
('01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0000' -- nBands (uint16 0)
||
'0000000000000040' -- scaleX (float64 2)
||
'0000000000000840' -- scaleY (float64 3)
||
'000000000000E03F' -- ipX (float64 0.5)
||
'000000000000E03F' -- ipY (float64 0.5)
||
'0000000000000000' -- skewX (float64 0)
||
'0000000000000000' -- skewY (float64 0)
||
'00000000' -- SRID (int32 0)
||
'0A00' -- width (uint16 10)
||
'1400' -- height (uint16 20)
)::raster
),
-- Raster: 5 x 5 pixels, 3 bands, PT_8BUI pixel type, NODATA = 0
(2,  ('01000003009A9999999999A93F9A9999999999A9BF000000E02B274A' ||
'41000000007719564100000000000000000000000000000000FFFFFFFF050005000400FDFEFDFEFEFDFEFEFDF9FAFEF' ||
'EFCF9FBFDFEFEFDFCFAFEFEFE04004E627AADD16076B4F9FE6370A9F5FE59637AB0E54F58617087040046566487A1506CA2E3FA5A6CAFFBFE4D566DA4CB3E454C5665')::raster);</pre><div class="sect1" title="9.1. Raster Support Data types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Types"></a>9.1. Raster Support Data types</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL data types specifically created to support raster functionality.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#geomval">geomval</a></span><span class="refpurpose"> — A spatial datatype with two fields - geom (holding a geometry object)
                    and val (holding a double precision pixel value from a raster band).</span></dt><dt><span class="refentrytitle"><a href="#addbandarg">addbandarg</a></span><span class="refpurpose"> — A composite type used as input into the ST_AddBand function defining the attributes and initial value of the new band.</span></dt><dt><span class="refentrytitle"><a href="#rastbandarg">rastbandarg</a></span><span class="refpurpose"> — A composite type for use when needing to express a raster and a band index of that raster.</span></dt><dt><span class="refentrytitle"><a href="#raster">raster</a></span><span class="refpurpose"> — raster spatial data type.</span></dt><dt><span class="refentrytitle"><a href="#reclassarg">reclassarg</a></span><span class="refpurpose"> — A composite type used as input into the ST_Reclass function defining the behavior of reclassification.</span></dt><dt><span class="refentrytitle"><a href="#summarystats">summarystats</a></span><span class="refpurpose"> — A composite type returned by the ST_SummaryStats and ST_SummaryStatsAgg functions.</span></dt><dt><span class="refentrytitle"><a href="#unionarg">unionarg</a></span><span class="refpurpose"> — A composite type used as input into the ST_Union function defining the bands to be processed and behavior of the UNION operation.</span></dt></dl></div><div class="refentry" title="geomval"><a name="geomval"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>geomval — A spatial datatype with two fields - geom (holding a geometry object)
                    and val (holding a double precision pixel value from a raster band).</p></div><div class="refsection" title="Description"><a name="idp88795984"></a><h2>Description</h2><p>geomval is a compound data type consisting of a geometry object referenced by the .geom field
                and val, a double precision value that represents the pixel value at a particular geometric location in a raster band.
                It is used by the ST_DumpAsPolygon and Raster intersection family of functions as an output type to explode a raster band into
                geometry polygons.</p></div><div class="refsection" title="See Also"><a name="idp88797136"></a><h2>See Also</h2><p><a class="xref" href="#PostGIS_Geometry_DumpFunctions" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions">Section 14.6, “PostGIS Geometry / Geography / Raster Dump Functions”</a> </p></div></div><div class="refentry" title="addbandarg"><div class="refentry.separator"><hr></div><a name="addbandarg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>addbandarg — A composite type used as input into the ST_AddBand function defining the attributes and initial value of the new band.</p></div><div class="refsection" title="Description"><a name="idp88800464"></a><h2>Description</h2><p>
					A composite type used as input into the ST_AddBand function defining the attributes and initial value of the new band.

					</p><div class="variablelist"><dl><dt><span class="term">
								<em class="parameter"><code>index </code></em>
								<span class="type">integer</span>
							</span></dt><dd><p>
									1-based value indicating the position where the new band will be added amongst the raster's bands. If NULL, the new band will be added at the end of the raster's bands.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>pixeltype </code></em>
								<span class="type">text</span>
							</span></dt><dd><p>
					Pixel type of the new band. One of defined pixel types as described in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>initialvalue </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
					Initial value that all pixels of new band will be set to.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>nodataval </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
					NODATA value of the new band. If NULL, the new band will not have a NODATA value assigned.
								</p></dd></dl></div><p>

				</p></div><div class="refsection" title="See Also"><a name="idp88812240"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>
				</p></div></div><div class="refentry" title="rastbandarg"><div class="refentry.separator"><hr></div><a name="rastbandarg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>rastbandarg — A composite type for use when needing to express a raster and a band index of that raster.</p></div><div class="refsection" title="Description"><a name="idp88815568"></a><h2>Description</h2><p>
					A composite type for use when needing to express a raster and a band index of that raster.

					</p><div class="variablelist"><dl><dt><span class="term">
								<em class="parameter"><code>rast </code></em>
								<span class="type">raster</span>
							</span></dt><dd><p>
					The raster in question/
								</p></dd><dt><span class="term">
								<em class="parameter"><code>nband </code></em>
								<span class="type">integer</span>
							</span></dt><dd><p>
									1-based value indicating the band of raster
								</p></dd></dl></div><p>

				</p></div><div class="refsection" title="See Also"><a name="idp88821968"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>
				</p></div></div><div class="refentry" title="raster"><div class="refentry.separator"><hr></div><a name="raster"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>raster — raster spatial data type.</p></div><div class="refsection" title="Description"><a name="idp88829392"></a><h2>Description</h2><p>raster is a spatial data type used to represent raster data such as those imported from jpegs, tiffs, pngs, digital elevation models.
                Each raster has 1 or more bands each having a set of pixel values. Rasters can be georeferenced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Requires PostGIS be compiled with GDAL support. Currently rasters can be implicitly converted to geometry type, but the conversion returns the
                <a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> of the raster.  This auto casting may be removed in the near future so don't rely on it.</p></td></tr></table></div></div><div class="refsection" title="Casting Behavior"><a name="idp88831696"></a><h2>Casting Behavior</h2><p>This section lists the automatic as well as explicit casts allowed for this data type</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Cast To</td><td>Behavior</td></tr><tr><td>geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp88836816"></a><h2>See Also</h2><p><a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a></p></div></div><div class="refentry" title="reclassarg"><div class="refentry.separator"><hr></div><a name="reclassarg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>reclassarg — A composite type used as input into the ST_Reclass function defining the behavior of reclassification.</p></div><div class="refsection" title="Description"><a name="idp88839760"></a><h2>Description</h2><p>A composite type used as input into the ST_Reclass function defining the behavior of reclassification.</p><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>nband </code></em><span class="type">integer</span></span></dt><dd><p>The band number of band to reclassify.</p></dd><dt><span class="term"><em class="parameter"><code>reclassexpr </code></em><span class="type">text</span></span></dt><dd><p>range expression consisting of comma delimited range:map_range mappings. : to define mapping that defines how to map old band values to new band values. ( means &gt;, ) means less than, ] &lt; or equal, [ means &gt; or equal</p><pre class="programlisting">1. [a-b] = a &lt;= x &lt;= b

2. (a-b] = a &lt; x &lt;= b

3. [a-b) = a &lt;= x &lt; b

4. (a-b) = a &lt; x &lt; b</pre><p>( notation is optional so a-b means the same as (a-b)</p></dd><dt><span class="term"><em class="parameter"><code>pixeltype </code></em><span class="type">text</span></span></dt><dd><p>One of defined pixel types as described in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a></p></dd><dt><span class="term"><em class="parameter"><code>nodataval </code></em><span class="type">double precision</span></span></dt><dd><p>Value to treat as no data.  For image outputs that support transparency, these will be blank.</p></dd></dl></div></div><div class="refsection" title="Example: Reclassify band 2 as an 8BUI where 255 is nodata value"><a name="idp88850000"></a><h2>Example: Reclassify band 2 as an 8BUI where 255 is nodata value</h2><pre class="programlisting">SELECT ROW(2, '0-100:1-10, 101-500:11-150,501 - 10000: 151-254', '8BUI', 255)::reclassarg;</pre></div><div class="refsection" title="Example: Reclassify band 1 as an 1BB and no nodata value defined"><a name="idp88851408"></a><h2>Example: Reclassify band 1 as an 1BB and no nodata value defined</h2><pre class="programlisting">SELECT ROW(1, '0-100]:0, (100-255:1', '1BB', NULL)::reclassarg;</pre></div><div class="refsection" title="See Also"><a name="idp88852688"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a></p></div></div><div class="refentry" title="summarystats"><div class="refentry.separator"><hr></div><a name="summarystats"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>summarystats — A composite type returned by the ST_SummaryStats and ST_SummaryStatsAgg functions.</p></div><div class="refsection" title="Description"><a name="idp88855632"></a><h2>Description</h2><p>
					A composite type returned by the <a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> and <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> functions.

					</p><div class="variablelist"><dl><dt><span class="term">
								<em class="parameter"><code>count </code></em>
								<span class="type">integer</span>
							</span></dt><dd><p>
									Number of pixels counted for the summary statistics.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>sum </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
									Sum of all counted pixel values.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>mean </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
									Arithmetic mean of all counted pixel values.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>stddev </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
									Standard deviation of all counted pixel values.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>min </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
									Minimum value of counted pixel values.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>max </code></em>
								<span class="type">double precision</span>
							</span></dt><dd><p>
									Maximum value of counted pixel values.
								</p></dd></dl></div><p>

				</p></div><div class="refsection" title="See Also"><a name="idp88872784"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>
				</p></div></div><div class="refentry" title="unionarg"><div class="refentry.separator"><hr></div><a name="unionarg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>unionarg — A composite type used as input into the ST_Union function defining the bands to be processed and behavior of the UNION operation.</p></div><div class="refsection" title="Description"><a name="idp88876496"></a><h2>Description</h2><p>
					A composite type used as input into the ST_Union function defining the bands to be processed and behavior of the UNION operation.

					</p><div class="variablelist"><dl><dt><span class="term">
								<em class="parameter"><code>nband </code></em>
								<span class="type">integer</span>
							</span></dt><dd><p>
									1-based value indicating the band of each input raster to be processed.
								</p></dd><dt><span class="term">
								<em class="parameter"><code>uniontype </code></em>
								<span class="type">text</span>
							</span></dt><dd><p>
					Type of UNION operation. One of defined types as described in <a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>.
								</p></dd></dl></div><p>

				</p></div><div class="refsection" title="See Also"><a name="idp88883280"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>
				</p></div></div></div><div class="sect1" title="9.2. Raster Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Management_Functions"></a>9.2. Raster Management</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_AddRasterConstraints">AddRasterConstraints</a></span><span class="refpurpose"> — Adds raster constraints to a loaded raster table for a specific column that constrains spatial ref, scaling, blocksize, alignment, bands, band type and a flag to denote if raster column is regularly blocked. The table must be loaded with data for the constraints to be inferred. Returns true of the constraint setting was accomplished and if issues a notice.</span></dt><dt><span class="refentrytitle"><a href="#RT_DropRasterConstraints">DropRasterConstraints</a></span><span class="refpurpose"> — Drops PostGIS raster constraints that refer to a raster table column. Useful if you need to reload data or update your raster column data.</span></dt><dt><span class="refentrytitle"><a href="#RT_AddOverviewConstraints">AddOverviewConstraints</a></span><span class="refpurpose"> — Tag a raster column as being an overview of another.</span></dt><dt><span class="refentrytitle"><a href="#RT_DropOverviewConstraints">DropOverviewConstraints</a></span><span class="refpurpose"> — Untag a raster column from being an overview of another.</span></dt><dt><span class="refentrytitle"><a href="#RT_PostGIS_GDAL_Version">PostGIS_GDAL_Version</a></span><span class="refpurpose"> — Reports the version of the GDAL library in use by PostGIS.</span></dt><dt><span class="refentrytitle"><a href="#RT_PostGIS_Raster_Lib_Build_Date">PostGIS_Raster_Lib_Build_Date</a></span><span class="refpurpose"> — Reports full raster library build date.</span></dt><dt><span class="refentrytitle"><a href="#RT_PostGIS_Raster_Lib_Version">PostGIS_Raster_Lib_Version</a></span><span class="refpurpose"> — Reports full raster version and build configuration
		infos.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_GDALDrivers">ST_GDALDrivers</a></span><span class="refpurpose"> — Returns a list of raster formats supported by your lib gdal.  These are the formats you can output your raster using ST_AsGDALRaster.</span></dt><dt><span class="refentrytitle"><a href="#RT_UpdateRasterSRID">UpdateRasterSRID</a></span><span class="refpurpose"> — 
					Change the SRID of all rasters in the user-specified column and table.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_CreateOverview">ST_CreateOverview</a></span><span class="refpurpose"> — 
Create an reduced resolution version of a given raster coverage.
				</span></dt></dl></div><div class="refentry" title="AddRasterConstraints"><a name="RT_AddRasterConstraints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddRasterConstraints — Adds raster constraints to a loaded raster table for a specific column that constrains spatial ref, scaling, blocksize, alignment, bands, band type and a flag to denote if raster column is regularly blocked. The table must be loaded with data for the constraints to be inferred. Returns true of the constraint setting was accomplished and if issues a notice.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">AddRasterConstraints</b>(</code>name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, boolean 
			<var class="pdparam">srid</var>, boolean 
			<var class="pdparam">scale_x</var>, boolean 
			<var class="pdparam">scale_y</var>, boolean 
			<var class="pdparam">blocksize_x</var>, boolean 
			<var class="pdparam">blocksize_y</var>, boolean 
			<var class="pdparam">same_alignment</var>, boolean 
			<var class="pdparam">regular_blocking</var>, boolean 
				<var class="pdparam">num_bands=true</var>
			, boolean 
				<var class="pdparam">pixel_types=true</var>
			, boolean 
				<var class="pdparam">nodata_values=true</var>
			, boolean 
				<var class="pdparam">out_db=true</var>
			, boolean 
				<var class="pdparam">extent=true</var>
			<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">AddRasterConstraints</b>(</code>name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, text[] 
			<var class="pdparam">VARIADIC constraints</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">AddRasterConstraints</b>(</code>name 
			<var class="pdparam">rastschema</var>, name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, text[] 
			<var class="pdparam">VARIADIC constraints</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">AddRasterConstraints</b>(</code>name 
			<var class="pdparam">rastschema</var>, name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, boolean 
			<var class="pdparam">srid=true</var>, boolean 
			<var class="pdparam">scale_x=true</var>, boolean 
			<var class="pdparam">scale_y=true</var>, boolean 
			<var class="pdparam">blocksize_x=true</var>, boolean 
			<var class="pdparam">blocksize_y=true</var>, boolean 
			<var class="pdparam">same_alignment=true</var>, boolean 
			<var class="pdparam">regular_blocking=false</var>, boolean 
			<var class="pdparam">num_bands=true</var>, boolean 
			<var class="pdparam">pixel_types=true</var>, boolean 
				<var class="pdparam">nodata_values=true</var>
			, boolean 
				<var class="pdparam">out_db=true</var>
			, boolean 
				<var class="pdparam">extent=true</var>
			<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp88941904"></a><h2>Description</h2><p>Generates constraints on a raster column that are used to display information in the <code class="varname">raster_columns</code> raster catalog.
		The <code class="varname">rastschema</code> is the name of the table schema the table resides in. The <code class="varname">srid</code>
		must be an integer value reference to an entry in the SPATIAL_REF_SYS
		table.</p><p><code class="varname">raster2pgsql</code> loader uses this function to register raster tables</p><p>Valid constraint names to pass in: refer to <a class="xref" href="#RT_Raster_Columns" title="5.2.1. Raster Columns Catalog">Section 5.2.1, “Raster Columns Catalog”</a> for more details.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="varname">blocksize</code> sets both X and Y blocksize</p></li><li class="listitem"><p><code class="varname">blocksize_x</code> sets X tile (width in pixels of each tile)</p></li><li class="listitem"><p><code class="varname">blocksize_y</code> sets Y tile (height in pixels of each tile)</p></li><li class="listitem"><p><code class="varname">extent</code> computes extent of whole table and applys constraint all rasters must be within that extent</p></li><li class="listitem"><p><code class="varname">num_bands</code> number of bands</p></li><li class="listitem"><p><code class="varname">pixel_types</code> reads array of pixel types for each band ensure all band n have same pixel type</p></li><li class="listitem"><p><code class="varname">regular_blocking</code> sets spatially unique (no two rasters can be spatially the same) and coverage tile (raster is aligned to a coverage) constraints</p></li><li class="listitem"><p><code class="varname">same_alignment</code> ensures they all have same alignment meaning any two tiles you compare will return true for. Refer to <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a></p></li><li class="listitem"><p><code class="varname">srid</code> ensures all have same srid</p></li><li class="listitem"><p>More -- any listed as inputs into the above functions</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function infers the constraints from the data already present in the table.  As such for it to work, you must create the raster column first
			and then load it with data.
			</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you need to load more data in your tables after you have already applied constraints, you may want to run the DropRasterConstraints
				if the extent of your data has changed.
			</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples: Apply all possible constraints on column based on data"><a name="idp88955728"></a><h2>Examples: Apply all possible constraints on column based on data</h2><pre class="programlisting">CREATE TABLE myrasters(rid SERIAL primary key, rast raster);
INSERT INTO myrasters(rast)
SELECT ST_AddBand(ST_MakeEmptyRaster(1000, 1000, 0.3, -0.3, 2, 2, 0, 0,4326), 1, '8BSI'::text, -129, NULL);

SELECT AddRasterConstraints('myrasters'::name, 'rast'::name);


-- verify if registered correctly in the raster_columns view --
SELECT srid, scale_x, scale_y, blocksize_x, blocksize_y, num_bands, pixel_types, nodata_values
	FROM raster_columns
	WHERE r_table_name = 'myrasters';

 srid | scale_x | scale_y | blocksize_x | blocksize_y | num_bands | pixel_types| nodata_values
------+---------+---------+-------------+-------------+-----------+-------------+---------------
 4326 |       2 |       2 |        1000 |        1000 |         1 | {8BSI}      | {0}
		</pre></div><div class="refsection" title="Examples: Apply single constraint"><a name="idp88957008"></a><h2>Examples: Apply single constraint</h2><pre class="programlisting">CREATE TABLE public.myrasters2(rid SERIAL primary key, rast raster);
INSERT INTO myrasters2(rast)
SELECT ST_AddBand(ST_MakeEmptyRaster(1000, 1000, 0.3, -0.3, 2, 2, 0, 0,4326), 1, '8BSI'::text, -129, NULL);

SELECT AddRasterConstraints('public'::name, 'myrasters2'::name, 'rast'::name,'regular_blocking', 'blocksize');
-- get notice--
NOTICE:  Adding regular blocking constraint
NOTICE:  Adding blocksize-X constraint
NOTICE:  Adding blocksize-Y constraint</pre></div><div class="refsection" title="See Also"><a name="idp88962512"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Columns" title="5.2.1. Raster Columns Catalog">Section 5.2.1, “Raster Columns Catalog”</a>, <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>, <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="DropRasterConstraints"><div class="refentry.separator"><hr></div><a name="RT_DropRasterConstraints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropRasterConstraints — Drops PostGIS raster constraints that refer to a raster table column. Useful if you need to reload data or update your raster column data.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">DropRasterConstraints</b>(</code>name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, boolean 
			<var class="pdparam">srid</var>, boolean 
			<var class="pdparam">scale_x</var>, boolean 
			<var class="pdparam">scale_y</var>, boolean 
			<var class="pdparam">blocksize_x</var>, boolean 
			<var class="pdparam">blocksize_y</var>, boolean 
			<var class="pdparam">same_alignment</var>, boolean 
			<var class="pdparam">regular_blocking</var>, boolean 
			<var class="pdparam">num_bands=true</var>, boolean 
			<var class="pdparam">pixel_types=true</var>, boolean 
			<var class="pdparam">nodata_values=true</var>, boolean 
				<var class="pdparam">out_db=true</var>
			, boolean 
			<var class="pdparam">extent=true</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">DropRasterConstraints</b>(</code>name 
			<var class="pdparam">rastschema</var>, name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, boolean 
			<var class="pdparam">srid=true</var>, boolean 
			<var class="pdparam">scale_x=true</var>, boolean 
			<var class="pdparam">scale_y=true</var>, boolean 
			<var class="pdparam">blocksize_x=true</var>, boolean 
			<var class="pdparam">blocksize_y=true</var>, boolean 
			<var class="pdparam">same_alignment=true</var>, boolean 
			<var class="pdparam">regular_blocking=false</var>, boolean 
			<var class="pdparam">num_bands=true</var>, boolean 
			<var class="pdparam">pixel_types=true</var>, boolean 
			<var class="pdparam">nodata_values=true</var>, boolean 
				<var class="pdparam">out_db=true</var>
			, boolean 
			<var class="pdparam">extent=true</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">DropRasterConstraints</b>(</code>name 
			<var class="pdparam">rastschema</var>, name 
			<var class="pdparam">rasttable</var>, name 
			<var class="pdparam">rastcolumn</var>, text[] 
			<var class="pdparam">constraints</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89016528"></a><h2>Description</h2><p>Drops PostGIS raster constraints that refer to a raster table column that were added by <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>. Useful if you need to load more data or update your raster column data.
		You do not need to do this if you want to get rid of a raster table or a raster column. </p><p>To drop a raster table use the standard </p><pre class="programlisting">DROP TABLE mytable</pre><p>To drop just a  raster column and leave the rest of the table, use standard SQL </p><pre class="programlisting">ALTER TABLE mytable DROP COLUMN rast</pre><p>the table will disappear from the <code class="varname">raster_columns</code> catalog if the column or table is dropped.  However if only the constraints are dropped, the
		raster column will still be listed in the <code class="varname">raster_columns</code> catalog, but there will be no other information about it aside from the column name and table.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp89025360"></a><h2>Examples</h2><pre class="programlisting">
SELECT DropRasterConstraints ('myrasters','rast');
----RESULT output ---
t

-- verify change in raster_columns --
SELECT srid, scale_x, scale_y, blocksize_x, blocksize_y, num_bands, pixel_types, nodata_values
	FROM raster_columns
	WHERE r_table_name = 'myrasters';

 srid | scale_x | scale_y | blocksize_x | blocksize_y | num_bands | pixel_types| nodata_values
------+---------+---------+-------------+-------------+-----------+-------------+---------------
    0 |         |         |             |             |           |             |
		</pre></div><div class="refsection" title="See Also"><a name="idp89026640"></a><h2>See Also</h2><p><a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a></p></div></div><div class="refentry" title="AddOverviewConstraints"><div class="refentry.separator"><hr></div><a name="RT_AddOverviewConstraints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddOverviewConstraints — Tag a raster column as being an overview of another.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">AddOverviewConstraints</b>(</code>name 
        <var class="pdparam">ovschema</var>, name 
        <var class="pdparam">ovtable</var>, name 
        <var class="pdparam">ovcolumn</var>, name 
        <var class="pdparam">refschema</var>, name 
        <var class="pdparam">reftable</var>, name 
        <var class="pdparam">refcolumn</var>, int 
        <var class="pdparam">ovfactor</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">AddOverviewConstraints</b>(</code>name 
        <var class="pdparam">ovtable</var>, name 
        <var class="pdparam">ovcolumn</var>, name 
        <var class="pdparam">reftable</var>, name 
        <var class="pdparam">refcolumn</var>, int 
        <var class="pdparam">ovfactor</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89057488"></a><h2>Description</h2><p>
Adds constraints on a raster column that are used to display information
in the <code class="varname">raster_overviews</code> raster catalog.
		</p><p>
The <code class="varname">ovfactor</code> parameter represents the scale multiplier
in the overview column: higher overview factors have lower resolution.
		</p><p>
When the <code class="varname">ovschema</code> and <code class="varname">refschema</code>
parameters are omitted, the first table found scanning the
<code class="varname">search_path</code> will be used.
		</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp89061968"></a><h2>Examples</h2><pre class="programlisting">
CREATE TABLE res1 AS SELECT
ST_AddBand(
  ST_MakeEmptyRaster(1000, 1000, 0, 0, 2),
  1, '8BSI'::text, -129, NULL
) r1;

CREATE TABLE res2 AS SELECT
ST_AddBand(
  ST_MakeEmptyRaster(500, 500, 0, 0, 4),
  1, '8BSI'::text, -129, NULL
) r2;

SELECT AddOverviewConstraints('res2', 'r2', 'res1', 'r1', 2);

-- verify if registered correctly in the raster_overviews view --
SELECT o_table_name ot, o_raster_column oc,
       r_table_name rt, r_raster_column rc,
       overview_factor f
FROM raster_overviews WHERE o_table_name = 'res2';
  ot  | oc |  rt  | rc | f
------+----+------+----+---
 res2 | r2 | res1 | r1 | 2
(1 row)
		</pre></div><div class="refsection" title="See Also"><a name="idp89063248"></a><h2>See Also</h2><p>
 <a class="xref" href="#RT_Raster_Overviews" title="5.2.2. Raster Overviews">Section 5.2.2, “Raster Overviews”</a>,
 <a class="xref" href="#RT_DropOverviewConstraints" title="DropOverviewConstraints">DropOverviewConstraints</a>,
 <a class="xref" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a>,
 <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>
      </p></div></div><div class="refentry" title="DropOverviewConstraints"><div class="refentry.separator"><hr></div><a name="RT_DropOverviewConstraints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropOverviewConstraints — Untag a raster column from being an overview of another.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">DropOverviewConstraints</b>(</code>name 
        <var class="pdparam">ovschema</var>, name 
        <var class="pdparam">ovtable</var>, name 
        <var class="pdparam">ovcolumn</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">DropOverviewConstraints</b>(</code>name 
        <var class="pdparam">ovtable</var>, name 
        <var class="pdparam">ovcolumn</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89075920"></a><h2>Description</h2><p>
Remove from a raster column the constraints used to show it as
being an overview of another in the <code class="varname">raster_overviews</code>
raster catalog.
		</p><p>
When the <code class="varname">ovschema</code> parameter is omitted,
the first table found scanning the <code class="varname">search_path</code>
will be used.
		</p><p>Availability: 2.0.0</p></div><div class="refsection" title="See Also"><a name="idp89079120"></a><h2>See Also</h2><p>
 <a class="xref" href="#RT_Raster_Overviews" title="5.2.2. Raster Overviews">Section 5.2.2, “Raster Overviews”</a>,
 <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>,
 <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a>
      </p></div></div><div class="refentry" title="PostGIS_GDAL_Version"><div class="refentry.separator"><hr></div><a name="RT_PostGIS_GDAL_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_GDAL_Version — Reports the version of the GDAL library in use by PostGIS.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_GDAL_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89085392"></a><h2>Description</h2><p>Reports the version of the GDAL library in use by PostGIS. Will also check and report if GDAL can find its data files.</p></div><div class="refsection" title="Examples"><a name="idp89086672"></a><h2>Examples</h2><pre class="programlisting">
SELECT PostGIS_GDAL_Version();
       postgis_gdal_version
-----------------------------------
 GDAL 1.11dev, released 2013/04/13
				</pre></div><div class="refsection" title="See Also"><a name="idp89087952"></a><h2>See Also</h2><p>
					<a class="xref" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a>
				</p></div></div><div class="refentry" title="PostGIS_Raster_Lib_Build_Date"><div class="refentry.separator"><hr></div><a name="RT_PostGIS_Raster_Lib_Build_Date"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Raster_Lib_Build_Date — Reports full raster library build date.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Raster_Lib_Build_Date</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89101648"></a><h2>Description</h2><p>Reports raster build date</p></div><div class="refsection" title="Examples"><a name="idp89102800"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Raster_Lib_Build_Date();
postgis_raster_lib_build_date
-----------------------------
2010-04-28 21:15:10
</pre></div><div class="refsection" title="See Also"><a name="idp89104208"></a><h2>See Also</h2><p> <a class="xref" href="#RT_PostGIS_Raster_Lib_Version" title="PostGIS_Raster_Lib_Version">PostGIS_Raster_Lib_Version</a></p></div></div><div class="refentry" title="PostGIS_Raster_Lib_Version"><div class="refentry.separator"><hr></div><a name="RT_PostGIS_Raster_Lib_Version"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>PostGIS_Raster_Lib_Version — Reports full raster version and build configuration
		infos.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">PostGIS_Raster_Lib_Version</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89109584"></a><h2>Description</h2><p>Reports full raster version and build configuration
		infos.</p></div><div class="refsection" title="Examples"><a name="idp89110736"></a><h2>Examples</h2><pre class="programlisting">SELECT PostGIS_Raster_Lib_Version();
postgis_raster_lib_version
-----------------------------
 2.0.0
</pre></div><div class="refsection" title="See Also"><a name="idp89112016"></a><h2>See Also</h2><p> <a class="xref" href="#PostGIS_Lib_Version" title="PostGIS_Lib_Version">PostGIS_Lib_Version</a></p></div></div><div class="refentry" title="ST_GDALDrivers"><div class="refentry.separator"><hr></div><a name="RT_ST_GDALDrivers"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GDALDrivers — Returns a list of raster formats supported by your lib gdal.  These are the formats you can output your raster using ST_AsGDALRaster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">ST_GDALDrivers</b>(</code>integer  <var class="pdparam">OUT idx</var>, text  <var class="pdparam">OUT short_name</var>, text  <var class="pdparam">OUT long_name</var>, text  <var class="pdparam">OUT create_options</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89121232"></a><h2>Description</h2><p>Returns a list of raster formats short_name,long_name and creator options of each format supported by your lib gdal.  Use the short_name as input in the <code class="varname">format</code> parameter of <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>.
		Options vary depending on what drivers your libgdal was compiled with. <code class="varname">create_options</code> returns an xml formatted set of CreationOptionList/Option consisting of name and optional <code class="varname">type</code>, <code class="varname">description</code> and set of <code class="varname">VALUE</code> for each creator option for the specific driver.</p><p>Changed: 2.0.6, 2.1.3 - by default no drivers are enabled, unless GUC or Environment variable gdal_enabled_drivers is set.</p><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p></div><div class="refsection" title="Examples: List of Drivers"><a name="idp89125712"></a><h2>Examples: List of Drivers</h2><pre class="programlisting">SET postgis.gdal_enabled_drivers = 'ENABLE_ALL';
SELECT short_name, long_name
FROM st_gdaldrivers()
ORDER BY short_name;
   short_name    |              long_name
-----------------+--------------------------------------
 AAIGrid         | Arc/Info ASCII Grid
 ARG             | Azavea Raster Grid format
 DTED            | DTED Elevation Raster
 EHdr            | ESRI .hdr Labelled
 FIT             | FIT Image
 GIF             | Graphics Interchange Format (.gif)
 GPKG            | GeoPackage
 GS7BG           | Golden Software 7 Binary Grid (.grd)
 GSAG            | Golden Software ASCII Grid (.grd)
 GSBG            | Golden Software Binary Grid (.grd)
 GTiff           | GeoTIFF
 HF2             | HF2/HFZ heightfield raster
 HFA             | Erdas Imagine Images (.img)
 ILWIS           | ILWIS Raster Map
 INGR            | Intergraph Raster
 JPEG            | JPEG JFIF
 KMLSUPEROVERLAY | Kml Super Overlay
 LCP             | FARSITE v.4 Landscape File (.lcp)
 MFF             | Vexcel MFF Raster
 NITF            | National Imagery Transmission Format
 PNG             | Portable Network Graphics
 R               | R Object Data Store
 RST             | Idrisi Raster A.1
 SAGA            | SAGA GIS Binary Grid (.sdat)
 SRTMHGT         | SRTMHGT File Format
 USGSDEM         | USGS Optional ASCII DEM (and CDED)
 VRT             | Virtual Raster
 WMS             | OGC Web Map Service
 XPM             | X11 PixMap Format
 XYZ             | ASCII Gridded XYZ
 ZMap            | ZMap Plus Grid
(31 rows)</pre></div><div class="refsection" title="Example: List of options for each driver"><a name="idp89126992"></a><h2>Example: List of options for each driver</h2><pre class="programlisting">-- Output the create options XML column of JPEG as a table  --
-- Note you can use these creator options in ST_AsGDALRaster options argument
SELECT (xpath('@name', g.opt))[1]::text As oname,
       (xpath('@type', g.opt))[1]::text As otype,
       (xpath('@description', g.opt))[1]::text As descrip
FROM (SELECT unnest(xpath('/CreationOptionList/Option', create_options::xml)) As opt
FROM  st_gdaldrivers()
WHERE short_name = 'JPEG') As g;

       oname        |  otype  |      descrip
--------------------+---------+-------------------------------------------------
 PROGRESSIVE        | boolean | whether to generate a progressive JPEG
 QUALITY            | int     | good=100, bad=0, default=75
 WORLDFILE          | boolean | whether to geneate a worldfile
 INTERNAL_MASK      | boolean | whether to generate a validity mask
 COMMENT            | string  | Comment
 SOURCE_ICC_PROFILE | string  | ICC profile encoded in Base64
 EXIF_THUMBNAIL     | boolean | whether to generate an EXIF thumbnail(overview).
                                By default its max dimension will be 128
 THUMBNAIL_WIDTH    | int     | Forced thumbnail width
 THUMBNAIL_HEIGHT   | int     | Forced thumbnail height
(9 rows)
</pre><pre class="programlisting">
-- raw xml output for creator options for GeoTiff --
SELECT create_options
FROM st_gdaldrivers()
WHERE short_name = 'GTiff';

&lt;CreationOptionList&gt;
    &lt;Option name="COMPRESS" type="string-select"&gt;
        &lt;Value&gt;NONE&lt;/Value&gt;
        &lt;Value&gt;LZW&lt;/Value&gt;
        &lt;Value&gt;PACKBITS&lt;/Value&gt;
        &lt;Value&gt;JPEG&lt;/Value&gt;
        &lt;Value&gt;CCITTRLE&lt;/Value&gt;
        &lt;Value&gt;CCITTFAX3&lt;/Value&gt;
        &lt;Value&gt;CCITTFAX4&lt;/Value&gt;
        &lt;Value&gt;DEFLATE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="PREDICTOR" type="int" description="Predictor Type"/&gt;
    &lt;Option name="JPEG_QUALITY" type="int" description="JPEG quality 1-100" default="75"/&gt;
    &lt;Option name="ZLEVEL" type="int" description="DEFLATE compression level 1-9" default="6"/&gt;
    &lt;Option name="NBITS" type="int" description="BITS for sub-byte files (1-7), sub-uint16 (9-15), sub-uint32 (17-31)"/&gt;
    &lt;Option name="INTERLEAVE" type="string-select" default="PIXEL"&gt;
        &lt;Value&gt;BAND&lt;/Value&gt;
        &lt;Value&gt;PIXEL&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="TILED" type="boolean" description="Switch to tiled format"/&gt;
    &lt;Option name="TFW" type="boolean" description="Write out world file"/&gt;
    &lt;Option name="RPB" type="boolean" description="Write out .RPB (RPC) file"/&gt;
    &lt;Option name="BLOCKXSIZE" type="int" description="Tile Width"/&gt;
    &lt;Option name="BLOCKYSIZE" type="int" description="Tile/Strip Height"/&gt;
    &lt;Option name="PHOTOMETRIC" type="string-select"&gt;
        &lt;Value&gt;MINISBLACK&lt;/Value&gt;
        &lt;Value&gt;MINISWHITE&lt;/Value&gt;
        &lt;Value&gt;PALETTE&lt;/Value&gt;
        &lt;Value&gt;RGB&lt;/Value&gt;
        &lt;Value&gt;CMYK&lt;/Value&gt;
        &lt;Value&gt;YCBCR&lt;/Value&gt;
        &lt;Value&gt;CIELAB&lt;/Value&gt;
        &lt;Value&gt;ICCLAB&lt;/Value&gt;
        &lt;Value&gt;ITULAB&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="SPARSE_OK" type="boolean" description="Can newly created files have missing blocks?" default="FALSE"/&gt;
    &lt;Option name="ALPHA" type="boolean" description="Mark first extrasample as being alpha"/&gt;
    &lt;Option name="PROFILE" type="string-select" default="GDALGeoTIFF"&gt;
        &lt;Value&gt;GDALGeoTIFF&lt;/Value&gt;
        &lt;Value&gt;GeoTIFF&lt;/Value&gt;
        &lt;Value&gt;BASELINE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="PIXELTYPE" type="string-select"&gt;
        &lt;Value&gt;DEFAULT&lt;/Value&gt;
        &lt;Value&gt;SIGNEDBYTE&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="BIGTIFF" type="string-select" description="Force creation of BigTIFF file"&gt;
        &lt;Value&gt;YES&lt;/Value&gt;
        &lt;Value&gt;NO&lt;/Value&gt;
        &lt;Value&gt;IF_NEEDED&lt;/Value&gt;
        &lt;Value&gt;IF_SAFER&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="ENDIANNESS" type="string-select" default="NATIVE" description="Force endianness of created file. For DEBUG purpose mostly"&gt;
        &lt;Value&gt;NATIVE&lt;/Value&gt;
        &lt;Value&gt;INVERTED&lt;/Value&gt;
        &lt;Value&gt;LITTLE&lt;/Value&gt;
        &lt;Value&gt;BIG&lt;/Value&gt;
    &lt;/Option&gt;
    &lt;Option name="COPY_SRC_OVERVIEWS" type="boolean" default="NO" description="Force copy of overviews of source dataset (CreateCopy())"/&gt;
&lt;/CreationOptionList&gt;

-- Output the create options XML column for GTiff as a table  --
SELECT (xpath('@name', g.opt))[1]::text As oname,
       (xpath('@type', g.opt))[1]::text As otype,
       (xpath('@description', g.opt))[1]::text As descrip,
       array_to_string(xpath('Value/text()', g.opt),', ') As vals
FROM (SELECT unnest(xpath('/CreationOptionList/Option', create_options::xml)) As opt
FROM  st_gdaldrivers()
WHERE short_name = 'GTiff') As g;

       oname        |     otype     |                               descrip                                |                                   vals
--------------------+---------------+----------------------------------------------------------------------+---------------------------------------------------------------------------
 COMPRESS           | string-select |                                                                      | NONE, LZW, PACKBITS, JPEG, CCITTRLE, CCITTFAX3, CCITTFAX4, DEFLATE
 PREDICTOR          | int           | Predictor Type                                                       |
 JPEG_QUALITY       | int           | JPEG quality 1-100                                                   |
 ZLEVEL             | int           | DEFLATE compression level 1-9                                        |
 NBITS              | int           | BITS for sub-byte files (1-7), sub-uint16 (9-15), sub-uint32 (17-31) |
 INTERLEAVE         | string-select |                                                                      | BAND, PIXEL
 TILED              | boolean       | Switch to tiled format                                               |
 TFW                | boolean       | Write out world file                                                 |
 RPB                | boolean       | Write out .RPB (RPC) file                                            |
 BLOCKXSIZE         | int           | Tile Width                                                           |
 BLOCKYSIZE         | int           | Tile/Strip Height                                                    |
 PHOTOMETRIC        | string-select |                                                                      | MINISBLACK, MINISWHITE, PALETTE, RGB, CMYK, YCBCR, CIELAB, ICCLAB, ITULAB
 SPARSE_OK          | boolean       | Can newly created files have missing blocks?                         |
 ALPHA              | boolean       | Mark first extrasample as being alpha                                |
 PROFILE            | string-select |                                                                      | GDALGeoTIFF, GeoTIFF, BASELINE
 PIXELTYPE          | string-select |                                                                      | DEFAULT, SIGNEDBYTE
 BIGTIFF            | string-select | Force creation of BigTIFF file                                       | YES, NO, IF_NEEDED, IF_SAFER
 ENDIANNESS         | string-select | Force endianness of created file. For DEBUG purpose mostly           | NATIVE, INVERTED, LITTLE, BIG
 COPY_SRC_OVERVIEWS | boolean       | Force copy of overviews of source dataset (CreateCopy())             |
(19 rows)
</pre></div><div class="refsection" title="See Also"><a name="idp89128656"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a>, <a class="xref" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a> </p></div></div><div class="refentry" title="UpdateRasterSRID"><div class="refentry.separator"><hr></div><a name="RT_UpdateRasterSRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>UpdateRasterSRID — 
					Change the SRID of all rasters in the user-specified column and table.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">UpdateRasterSRID</b>(</code>name  <var class="pdparam">schema_name</var>, name  <var class="pdparam">table_name</var>, name  <var class="pdparam">column_name</var>, integer  <var class="pdparam">new_srid</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">UpdateRasterSRID</b>(</code>name  <var class="pdparam">table_name</var>, name  <var class="pdparam">column_name</var>, integer  <var class="pdparam">new_srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89159376"></a><h2>Description</h2><p>
					Change the SRID of all rasters in the user-specified column and table. The function will drop all appropriate column constraints (extent, alignment and SRID) before changing the SRID of the specified column's rasters.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The data (band pixel values) of the rasters are not touched by this function.  Only the raster's metadata is changed.
					</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="See Also"><a name="idp89161680"></a><h2>See Also</h2><p>
          <a class="xref" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a>
        </p></div></div><div class="refentry" title="ST_CreateOverview"><div class="refentry.separator"><hr></div><a name="RT_CreateOverview"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CreateOverview — 
Create an reduced resolution version of a given raster coverage.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">regclass <b class="fsfunc">ST_CreateOverview</b>(</code>regclass  <var class="pdparam">tab</var>, name  <var class="pdparam">col</var>, int  <var class="pdparam">factor</var>, text  <var class="pdparam">algo='NearestNeighbor'</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89175248"></a><h2>Description</h2><p>
Create an overview table with resampled tiles from the source table.
Output tiles will have the same size of input tiles and cover the same
spatial extent with a lower resolution (pixel size will be
1/<code class="varname">factor</code> of the original in both directions).
				</p><p>
The overview table will be made available in the
<code class="varname">raster_overviews</code> catalog and will have raster
constraints enforced.
				</p><p>Algorithm options are: 'NearestNeighbor', 'Bilinear', 'Cubic', 'CubicSpline', and 'Lanczos'.  Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details.</p><p>Availability: 2.2.0</p></div><div class="refsection" title="See Also"><a name="idp89178960"></a><h2>See Also</h2><p>
  <a class="xref" href="#RT_Retile" title="ST_Retile">ST_Retile</a>,
  <a class="xref" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a>,
  <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>,
  <a class="xref" href="#RT_Raster_Overviews" title="5.2.2. Raster Overviews">Section 5.2.2, “Raster Overviews”</a>
        </p></div></div></div><div class="sect1" title="9.3. Raster Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Constructors"></a>9.3. Raster Constructors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_AddBand">ST_AddBand</a></span><span class="refpurpose"> — 
					Returns a raster with the new band(s) of given type added with given initial value in the given index location. If no index is specified, the band is added to the end.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_AsRaster">ST_AsRaster</a></span><span class="refpurpose"> — Converts a PostGIS geometry to a PostGIS raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Band">ST_Band</a></span><span class="refpurpose"> — Returns one or more bands of an existing raster as a new raster.  Useful for building new rasters from existing rasters.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MakeEmptyRaster">ST_MakeEmptyRaster</a></span><span class="refpurpose"> — Returns an empty raster (having no bands) of given dimensions (width &amp; height), upperleft X and Y, pixel size and rotation (scalex, scaley, skewx &amp; skewy) and reference system (srid).
				If a raster is passed in, returns a new raster with the same size, alignment and SRID.  If srid is left out, the spatial ref is set to unknown (0).</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Tile">ST_Tile</a></span><span class="refpurpose"> — Returns a set of rasters resulting from the split of the input raster based upon the desired dimensions of the output rasters.</span></dt><dt><span class="refentrytitle"><a href="#RT_Retile">ST_Retile</a></span><span class="refpurpose"> — 
					Return a set of configured tiles from an arbitrarily tiled raster coverage.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_FromGDALRaster">ST_FromGDALRaster</a></span><span class="refpurpose"> — Returns a raster from a supported GDAL raster file.</span></dt></dl></div><div class="refentry" title="ST_AddBand"><a name="RT_ST_AddBand"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddBand — 
					Returns a raster with the new band(s) of given type added with given initial value in the given index location. If no index is specified, the band is added to the end.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">(1) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">rast</var>, addbandarg[]  <var class="pdparam">addbandargset</var><code>)</code>;</p><p><code class="funcdef">(2) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">index</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">initialvalue=0</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(3) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">initialvalue=0</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(4) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">torast</var>, raster  <var class="pdparam">fromrast</var>, integer  <var class="pdparam">fromband=1</var>, integer  <var class="pdparam">torastindex=at_end</var><code>)</code>;</p><p><code class="funcdef">(5) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">torast</var>, raster[]  <var class="pdparam">fromrasts</var>, integer  <var class="pdparam">fromband=1</var>, integer  <var class="pdparam">torastindex=at_end</var><code>)</code>;</p><p><code class="funcdef">(6) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">index</var>, text  <var class="pdparam">outdbfile</var>, integer[]  <var class="pdparam">outdbindex</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">(7) raster <b class="fsfunc">ST_AddBand</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">outdbfile</var>, integer[]  <var class="pdparam">outdbindex</var>, integer  <var class="pdparam">index=at_end</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89232976"></a><h2>Description</h2><p>
					Returns a raster with a new band added in given position (index), of given type, of given initial value, and of given nodata value.  If no index is specified, the band is added to the end. If no <code class="varname">fromband</code> is specified, band 1 is assumed. Pixel type is a string representation of one of the pixel types specified in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>.  If an existing index is specified all subsequent bands &gt;= that index are incremented by 1. If an initial value greater than the max of the pixel type is specified, then the initial value is set to the highest value allowed by the pixel type.
				</p><p>
					For the variant that takes an array of <a class="xref" href="#addbandarg" title="addbandarg">addbandarg</a> (Variant 1), a specific addbandarg's index value is relative to the raster at the time when the band described by that addbandarg is being added to the raster.  See the Multiple New Bands example below.
				</p><p>
					For the variant that takes an array of rasters (Variant 5),  if <code class="varname">torast</code> is NULL then the <code class="varname">fromband</code> band of each raster in the array is accumulated into a new raster.
				</p><p>
					For the variants that take <code class="varname">outdbfile</code> (Variants 6 and 7), the value must include the full path to the raster file. The file must also be accessible to the postgres server process.
				</p><p>Enhanced: 2.1.0 support for addbandarg added.</p><p>Enhanced: 2.1.0 support for new out-db bands added.</p></div><div class="refsection" title="Examples: Single New Band"><a name="idp89238480"></a><h2>Examples: Single New Band</h2><pre class="programlisting">
-- Add another band of type 8 bit unsigned integer with pixels initialized to 200
UPDATE dummy_rast
    SET rast = ST_AddBand(rast,'8BUI'::text,200)
WHERE rid = 1;
				</pre><pre class="programlisting">
-- Create an empty raster 100x100 units, with upper left  right at 0, add 2 bands (band 1 is 0/1 boolean bit switch, band2 allows values 0-15)
-- uses addbandargs
INSERT INTO dummy_rast(rid,rast)
    VALUES(10, ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 1, -1, 0, 0, 0),
	ARRAY[
		ROW(1, '1BB'::text, 0, NULL),
		ROW(2, '4BUI'::text, 0, NULL)
			]::addbandarg[]
     )
    );

-- output meta data of raster bands to verify all is right --
SELECT  (bmd).*
FROM (SELECT ST_BandMetaData(rast,generate_series(1,2)) As bmd
    FROM dummy_rast WHERE rid = 10) AS foo;
 --result --
 pixeltype | nodatavalue | isoutdb | path
-----------+----------------+-------------+---------+------
 1BB       |             | f       |
 4BUI      |             | f       |


-- output meta data of raster -
SELECT  (rmd).width, (rmd).height, (rmd).numbands
FROM (SELECT ST_MetaData(rast) As rmd
    FROM dummy_rast WHERE rid = 10) AS foo;
-- result --
 upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
------------+------------+-------+--------+------------+------------+-------+-------+------+----------
          0 |          0 |   100 |    100 |      1 |     -1 |     0 |     0 |   0 |        2
				</pre></div><div class="refsection" title="Examples: Multiple New Bands"><a name="idp89240272"></a><h2>Examples: Multiple New Bands</h2><pre class="programlisting">
SELECT
	*
FROM ST_BandMetadata(
	ST_AddBand(
		ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0),
		ARRAY[
			ROW(NULL, '8BUI', 255, 0),
			ROW(NULL, '16BUI', 1, 2),
			ROW(2, '32BUI', 100, 12),
			ROW(2, '32BF', 3.14, -1)
		]::addbandarg[]
	),
	ARRAY[]::integer[]
);

 bandnum | pixeltype | nodatavalue | isoutdb | path
---------+-----------+-------------+---------+------
       1 | 8BUI      |           0 | f       |
       2 | 32BF      |          -1 | f       |
       3 | 32BUI     |          12 | f       |
       4 | 16BUI     |           2 | f       |
				</pre><pre class="programlisting">
-- Aggregate the 1st band of a table of like rasters into a single raster
-- with as many bands as there are test_types and as many rows (new rasters) as there are mice
-- NOTE: The ORDER BY test_type is only supported in PostgreSQL 9.0+
-- for 8.4 and below it usually works to order your data in a subselect (but not guaranteed)
-- The resulting raster will have a band for each test_type alphabetical by test_type
-- For mouse lovers: No mice were harmed in this exercise
SELECT
	mouse,
	ST_AddBand(NULL, array_agg(rast ORDER BY test_type), 1) As rast
FROM mice_studies
GROUP BY mouse;
				</pre></div><div class="refsection" title="Examples: New Out-db band"><a name="idp89242064"></a><h2>Examples: New Out-db band</h2><pre class="programlisting">
SELECT
	*
FROM ST_BandMetadata(
	ST_AddBand(
		ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0),
		'/home/raster/mytestraster.tif'::text, NULL::int[]
	),
	ARRAY[]::integer[]
);

 bandnum | pixeltype | nodatavalue | isoutdb | path
---------+-----------+-------------+---------+------
       1 | 8BUI      |             | t       | /home/raster/mytestraster.tif
       2 | 8BUI      |             | t       | /home/raster/mytestraster.tif
       3 | 8BUI      |             | t       | /home/raster/mytestraster.tif
				</pre></div><div class="refsection" title="See Also"><a name="idp89243344"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>,
					<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
					<a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>,
					<a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>,
					<a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>,
					<a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>
				</p></div></div><div class="refentry" title="ST_AsRaster"><div class="refentry.separator"><hr></div><a name="RT_ST_AsRaster"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsRaster — Converts a PostGIS geometry to a PostGIS raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">ref</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">ref</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text[]  <var class="pdparam">pixeltype</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, text[]  <var class="pdparam">pixeltype=ARRAY['8BUI']</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">value=1</var>, double precision  <var class="pdparam">nodataval=0</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_AsRaster</b>(</code>geometry  <var class="pdparam">geom</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text[]  <var class="pdparam">pixeltype</var>, double precision[]  <var class="pdparam">value=ARRAY[1]</var>, double precision[]  <var class="pdparam">nodataval=ARRAY[0]</var>, double precision  <var class="pdparam">upperleftx=NULL</var>, double precision  <var class="pdparam">upperlefty=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, boolean  <var class="pdparam">touched=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89397200"></a><h2>Description</h2><p>Converts a PostGIS geometry to a PostGIS raster. The many variants offers three groups of  possibilities for setting the alignment and pixelsize of the resulting raster.</p><p>The first group, composed of the two first variants, produce a raster having the same alignment (<code class="varname">scalex</code>, <code class="varname">scaley</code>, <code class="varname">gridx</code> and <code class="varname">gridy</code>), pixel type and nodata value as the provided reference raster. You generally pass this reference raster by joining the table containing the geometry with the table containing the reference raster.</p><p>The second group, composed of four variants, let you set the dimensions of the raster by providing the parameters of a pixel size (<code class="varname">scalex</code> &amp; <code class="varname">scaley</code> and <code class="varname">skewx</code> &amp; <code class="varname">skewy</code>). The <code class="varname">width</code> &amp; <code class="varname">height</code> of the resulting raster will be adjusted to fit the extent of the geometry. In most cases, you must cast integer <code class="varname">scalex</code> &amp; <code class="varname">scaley</code> arguments to double precision so that PostgreSQL choose the right variant.</p><p>The third group, composed of four variants, let you fix the dimensions of the raster by providing the dimensions of the raster (<code class="varname">width</code> &amp; <code class="varname">height</code>). The parameters of the pixel size (<code class="varname">scalex</code> &amp; <code class="varname">scaley</code> and <code class="varname">skewx</code> &amp; <code class="varname">skewy</code>) of the resulting raster will be adjusted to fit the extent of the geometry.</p><p>The two first variants of each of those two last groups let you specify the alignment with an arbitrary corner of the alignment grid (<code class="varname">gridx</code> &amp; <code class="varname">gridy</code>) and the two last variants takes the upper left corner (<code class="varname">upperleftx</code> &amp; <code class="varname">upperlefty</code>).</p><p>Each group of variant allows producing a one band raster or a multiple bands raster. To produce a multiple bands raster, you must provide an array of pixel types (<code class="varname">pixeltype[]</code>), an array of initial values (<code class="varname">value</code>) and an array of nodata values (<code class="varname">nodataval</code>). If not provided pixeltyped defaults to 8BUI, values to 1 and nodataval to 0.</p><p>The output raster will be in the same spatial reference as the source geometry. The only exception is for variants with a reference raster. In this case the resulting raster will get the same SRID as the reference raster.</p><p>The optional <code class="varname">touched</code> parameter defaults to false and maps to the GDAL ALL_TOUCHED rasterization option, which determines if pixels touched by lines or polygons will be burned. Not just those on the line render path, or whose center point is within the polygon.</p><p>This is particularly useful for rendering jpegs and pngs of geometries directly from the database when using in combination
                    with <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a> and other <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> family of functions.</p><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Not yet capable of rendering complex geometry types such as curves, TINS, and PolyhedralSurfaces, but should be
                 able too once GDAL can.</p></td></tr></table></div></div><div class="refsection" title="Examples: Output geometries as PNG files"><a name="idp89413456"></a><h2>Examples: Output geometries as PNG files</h2><div class="informalfigure"><div class="mediaobject"><img src="images/st_asraster01.png"><div class="caption"><p>black circle</p></div></div></div><pre class="programlisting">
-- this will output a black circle taking up 150 x 150 pixels --
SELECT ST_AsPNG(ST_AsRaster(ST_Buffer(ST_Point(1,5),10),150, 150, '2BUI'));</pre><div class="informalfigure"><div class="mediaobject"><img src="images/st_asraster02.png"><div class="caption"><p>example from buffer rendered with just PostGIS</p></div></div></div><pre class="programlisting">-- the bands map to RGB bands - the value (118,154,118) - teal  --
SELECT ST_AsPNG(
	ST_AsRaster(
		ST_Buffer(
			ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 10,'join=bevel'),
			200,200,ARRAY['8BUI', '8BUI', '8BUI'], ARRAY[118,154,118], ARRAY[0,0,0]));</pre></div><div class="refsection" title="See Also"><a name="idp89420240"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, <a class="xref" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_Band"><div class="refentry.separator"><hr></div><a name="RT_ST_Band"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Band — Returns one or more bands of an existing raster as a new raster.  Useful for building new rasters from existing rasters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Band</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands = ARRAY[1]</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Band</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Band</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">nbands</var>, character  <var class="pdparam">delimiter=,</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89437520"></a><h2>Description</h2><p>Returns one or more bands of an existing raster as a new raster.  Useful for building new rasters from existing rasters or export of only selected
				bands of a raster or rearranging the order of bands in a raster. If no band is specified, band 1 is assumed. Used as a helper function in various functions such as for deleting a band. </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For the <code class="code">nbands</code> as text variant of function, the default delimiter is <code class="code">,</code> which means you can ask for <code class="code">'1,2,3'</code> and if you wanted to use a different delimeter you would do <code class="code">ST_Band(rast, '1@2@3', '@')</code>.  For asking for multiple bands, we strongly suggest you use the array form of this function e.g. <code class="code">ST_Band(rast, '{1,2,3}'::int[]);</code> since the <code class="code">text</code> list of bands form may be removed in future versions of PostGIS.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp89446096"></a><h2>Examples</h2><pre class="programlisting">-- Make 2 new rasters: 1 containing band 1 of dummy, second containing band 2 of dummy and then reclassified as a 2BUI
SELECT ST_NumBands(rast1) As numb1, ST_BandPixelType(rast1) As pix1,
 ST_NumBands(rast2) As numb2,  ST_BandPixelType(rast2) As pix2
FROM (
    SELECT ST_Band(rast) As rast1, ST_Reclass(ST_Band(rast,3), '100-200):1, [200-254:2', '2BUI') As rast2
        FROM dummy_rast
        WHERE rid = 2) As foo;

 numb1 | pix1 | numb2 | pix2
-------+------+-------+------
     1 | 8BUI |     1 | 2BUI
					</pre><pre class="programlisting">-- Return bands 2 and 3. Using array cast syntax
SELECT ST_NumBands(ST_Band(rast, '{2,3}'::int[])) As num_bands
    FROM dummy_rast WHERE rid=2;

num_bands
----------
2

-- Return bands 2 and 3. Use array to define bands
SELECT ST_NumBands(ST_Band(rast, ARRAY[2,3])) As num_bands
    FROM dummy_rast
WHERE rid=2;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_band01.png"><div class="caption"><p>original (column rast)</p></div></div></div>
		 </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_band02.png"><div class="caption"><p>dupe_band</p></div></div></div>
		 </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_band03.png"><div class="caption"><p>sing_band</p></div></div></div>
		 </td></tr></tbody></table></div><pre class="programlisting">--Make a new raster with 2nd band of original and 1st band repeated twice,
and another with just the third band
SELECT rast, ST_Band(rast, ARRAY[2,1,1]) As dupe_band,
	ST_Band(rast, 3) As sing_band
FROM samples.than_chunked
WHERE rid=35;
					</pre></div><div class="refsection" title="See Also"><a name="idp89457872"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>, <a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a></p></div></div><div class="refentry" title="ST_MakeEmptyRaster"><div class="refentry.separator"><hr></div><a name="RT_ST_MakeEmptyRaster"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MakeEmptyRaster — Returns an empty raster (having no bands) of given dimensions (width &amp; height), upperleft X and Y, pixel size and rotation (scalex, scaley, skewx &amp; skewy) and reference system (srid).
				If a raster is passed in, returns a new raster with the same size, alignment and SRID.  If srid is left out, the spatial ref is set to unknown (0).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MakeEmptyRaster</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MakeEmptyRaster</b>(</code>integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, float8  <var class="pdparam">upperleftx</var>, float8  <var class="pdparam">upperlefty</var>, float8  <var class="pdparam">scalex</var>, float8  <var class="pdparam">scaley</var>, float8  <var class="pdparam">skewx</var>, float8  <var class="pdparam">skewy</var>, integer  <var class="pdparam">srid=unknown</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MakeEmptyRaster</b>(</code>integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, float8   <var class="pdparam">upperleftx</var>, float8   <var class="pdparam">upperlefty</var>, float8   <var class="pdparam">pixelsize</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89482064"></a><h2>Description</h2><p>Returns an empty raster (having no band) of given dimensions (width &amp; height) and georeferenced in spatial (or world) coordinates with upper left X (upperleftx), upper left Y (upperlefty),
				pixel size and rotation (scalex, scaley, skewx &amp; skewy) and reference system (srid).</p><p>The last version use a single parameter to specify the pixel size (pixelsize). scalex is set to this argument and scaley is set to the negative value of this argument. skewx and skewy are set to 0. </p><p>If an existing raster is passed in, it returns a new raster with the same meta data settings (without the bands). </p><p>If no srid is specified it defaults to 0. After you create an empty raster you probably want to add bands to it and maybe edit it. Refer to <a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> to define bands and <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> to set initial pixel values.</p></div><div class="refsection" title="Examples"><a name="idp89485264"></a><h2>Examples</h2><pre class="programlisting">
INSERT INTO dummy_rast(rid,rast)
VALUES(3, ST_MakeEmptyRaster( 100, 100, 0.0005, 0.0005, 1, 1, 0, 0, 4326) );

--use an existing raster as template for new raster
INSERT INTO dummy_rast(rid,rast)
SELECT 4, ST_MakeEmptyRaster(rast)
FROM dummy_rast WHERE rid = 3;

-- output meta data of rasters we just added
SELECT rid, (md).*
FROM (SELECT rid, ST_MetaData(rast) As md
	FROM dummy_rast
	WHERE rid IN(3,4)) As foo;

-- output --
 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+------------+------------+-------+--------+------------+------------+-------+-------+------+----------
   3 |     0.0005 |     0.0005 |   100 |    100 |          1 |          1 |    0  |     0 | 4326 |        0
   4 |     0.0005 |     0.0005 |   100 |    100 |          1 |          1 |    0  |     0 | 4326 |        0
				</pre></div><div class="refsection" title="See Also"><a name="idp89494864"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, , <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" title="ST_Tile"><div class="refentry.separator"><hr></div><a name="RT_ST_Tile"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Tile — Returns a set of rasters resulting from the split of the input raster based upon the desired dimensions of the output rasters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof raster <b class="fsfunc">ST_Tile</b>(</code>raster  <var class="pdparam">rast</var>, int[]  <var class="pdparam">nband</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">setof raster <b class="fsfunc">ST_Tile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">setof raster <b class="fsfunc">ST_Tile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, boolean  <var class="pdparam">padwithnodata=FALSE</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89523024"></a><h2>Description</h2><p>
					Returns a set of rasters resulting from the split of the input raster based upon the desired dimensions of the output rasters.
				</p><p>
					If <code class="varname">padwithnodata</code> = FALSE, edge tiles on the right and bottom sides of the raster may have different dimensions than the rest of the tiles. If <code class="varname">padwithnodata</code> = TRUE, all tiles will have the same dimensions with the possibility that edge tiles being padded with NODATA values.  If raster band(s) do not have NODATA value(s) specified, one can be specified by setting <code class="varname">nodataval</code>.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						If a specified band of the input raster is out-of-db, the corresponding band in the output rasters will also be out-of-db.
					</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp89527120"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '8BUI', 10, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, 0, 1, -1, 0, 0, 0), 1, '8BUI', 2, 0), 2, '8BUI', 20, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, 0, 1, -1, 0, 0, 0), 1, '8BUI', 3, 0), 2, '8BUI', 30, 0) AS rast UNION ALL

	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -3, 1, -1, 0, 0, 0), 1, '8BUI', 4, 0), 2, '8BUI', 40, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -3, 1, -1, 0, 0, 0), 1, '8BUI', 5, 0), 2, '8BUI', 50, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -3, 1, -1, 0, 0, 0), 1, '8BUI', 6, 0), 2, '8BUI', 60, 0) AS rast UNION ALL

	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -6, 1, -1, 0, 0, 0), 1, '8BUI', 7, 0), 2, '8BUI', 70, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -6, 1, -1, 0, 0, 0), 1, '8BUI', 8, 0), 2, '8BUI', 80, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -6, 1, -1, 0, 0, 0), 1, '8BUI', 9, 0), 2, '8BUI', 90, 0) AS rast
), bar AS (
	SELECT ST_Union(rast) AS rast FROM foo
), baz AS (
	SELECT ST_Tile(rast, 3, 3, TRUE) AS rast FROM bar
)
SELECT
	ST_DumpValues(rast)
FROM baz;

              st_dumpvalues
------------------------------------------
 (1,"{{1,1,1},{1,1,1},{1,1,1}}")
 (2,"{{10,10,10},{10,10,10},{10,10,10}}")
 (1,"{{2,2,2},{2,2,2},{2,2,2}}")
 (2,"{{20,20,20},{20,20,20},{20,20,20}}")
 (1,"{{3,3,3},{3,3,3},{3,3,3}}")
 (2,"{{30,30,30},{30,30,30},{30,30,30}}")
 (1,"{{4,4,4},{4,4,4},{4,4,4}}")
 (2,"{{40,40,40},{40,40,40},{40,40,40}}")
 (1,"{{5,5,5},{5,5,5},{5,5,5}}")
 (2,"{{50,50,50},{50,50,50},{50,50,50}}")
 (1,"{{6,6,6},{6,6,6},{6,6,6}}")
 (2,"{{60,60,60},{60,60,60},{60,60,60}}")
 (1,"{{7,7,7},{7,7,7},{7,7,7}}")
 (2,"{{70,70,70},{70,70,70},{70,70,70}}")
 (1,"{{8,8,8},{8,8,8},{8,8,8}}")
 (2,"{{80,80,80},{80,80,80},{80,80,80}}")
 (1,"{{9,9,9},{9,9,9},{9,9,9}}")
 (2,"{{90,90,90},{90,90,90},{90,90,90}}")
(18 rows)
				</pre><pre class="programlisting">
WITH foo AS (
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '8BUI', 10, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, 0, 1, -1, 0, 0, 0), 1, '8BUI', 2, 0), 2, '8BUI', 20, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, 0, 1, -1, 0, 0, 0), 1, '8BUI', 3, 0), 2, '8BUI', 30, 0) AS rast UNION ALL

	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -3, 1, -1, 0, 0, 0), 1, '8BUI', 4, 0), 2, '8BUI', 40, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -3, 1, -1, 0, 0, 0), 1, '8BUI', 5, 0), 2, '8BUI', 50, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -3, 1, -1, 0, 0, 0), 1, '8BUI', 6, 0), 2, '8BUI', 60, 0) AS rast UNION ALL

	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, -6, 1, -1, 0, 0, 0), 1, '8BUI', 7, 0), 2, '8BUI', 70, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 3, -6, 1, -1, 0, 0, 0), 1, '8BUI', 8, 0), 2, '8BUI', 80, 0) AS rast UNION ALL
	SELECT ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 6, -6, 1, -1, 0, 0, 0), 1, '8BUI', 9, 0), 2, '8BUI', 90, 0) AS rast
), bar AS (
	SELECT ST_Union(rast) AS rast FROM foo
), baz AS (
	SELECT ST_Tile(rast, 3, 3, 2) AS rast FROM bar
)
SELECT
	ST_DumpValues(rast)
FROM baz;

              st_dumpvalues
------------------------------------------
 (1,"{{10,10,10},{10,10,10},{10,10,10}}")
 (1,"{{20,20,20},{20,20,20},{20,20,20}}")
 (1,"{{30,30,30},{30,30,30},{30,30,30}}")
 (1,"{{40,40,40},{40,40,40},{40,40,40}}")
 (1,"{{50,50,50},{50,50,50},{50,50,50}}")
 (1,"{{60,60,60},{60,60,60},{60,60,60}}")
 (1,"{{70,70,70},{70,70,70},{70,70,70}}")
 (1,"{{80,80,80},{80,80,80},{80,80,80}}")
 (1,"{{90,90,90},{90,90,90},{90,90,90}}")
(9 rows)
				</pre></div><div class="refsection" title="See Also"><a name="idp89528912"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>,
					<a class="xref" href="#RT_Retile" title="ST_Retile">ST_Retile</a>
				</p></div></div><div class="refentry" title="ST_Retile"><div class="refentry.separator"><hr></div><a name="RT_Retile"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Retile — 
					Return a set of configured tiles from an arbitrarily tiled raster coverage.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF raster <b class="fsfunc">ST_Retile</b>(</code>regclass  <var class="pdparam">tab</var>, name  <var class="pdparam">col</var>, geometry  <var class="pdparam">ext</var>, float8  <var class="pdparam">sfx</var>, float8  <var class="pdparam">sfy</var>, int  <var class="pdparam">tw</var>, int  <var class="pdparam">th</var>, text  <var class="pdparam">algo='NearestNeighbor'</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89551056"></a><h2>Description</h2><p>
Return a set of tiles having the specified scale (<code class="varname">sfx</code>,
<code class="varname">sfy</code>) and max size (<code class="varname">tw</code>,
<code class="varname">th</code>) and covering the specified extent
(<code class="varname">ext</code>) with data coming from the specified
raster coverage (<code class="varname">tab</code>, <code class="varname">col</code>).
				</p><p>Algorithm options are: 'NearestNeighbor', 'Bilinear', 'Cubic', 'CubicSpline', and 'Lanczos'.  Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details.</p><p>Availability: 2.2.0</p></div><div class="refsection" title="See Also"><a name="idp89556304"></a><h2>See Also</h2><p>
          <a class="xref" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a>
        </p></div></div><div class="refentry" title="ST_FromGDALRaster"><div class="refentry.separator"><hr></div><a name="RT_ST_FromGDALRaster"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_FromGDALRaster — Returns a raster from a supported GDAL raster file.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_FromGDALRaster</b>(</code>bytea  <var class="pdparam">gdaldata</var>, integer  <var class="pdparam">srid=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89563728"></a><h2>Description</h2><p>
					Returns a raster from a supported GDAL raster file. <code class="varname">gdaldata</code> is of type bytea and should be the contents of the GDAL raster file.
				</p><p>
					If <code class="varname">srid</code> is NULL, the function will try to automatically assign the SRID from the GDAL raster. If <code class="varname">srid</code> is provided, the value provided will override any automatically assigned SRID.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp89566800"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_AsPNG(ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 0.1, -0.1, 0, 0, 4326), 1, '8BUI', 1, 0), 2, '8BUI', 2, 0), 3, '8BUI', 3, 0)) AS png
),
bar AS (
	SELECT 1 AS rid, ST_FromGDALRaster(png) AS rast FROM foo
	UNION ALL
	SELECT 2 AS rid, ST_FromGDALRaster(png, 3310) AS rast FROM foo
)
SELECT
	rid,
	ST_Metadata(rast) AS metadata,
	ST_SummaryStats(rast, 1) AS stats1,
	ST_SummaryStats(rast, 2) AS stats2,
	ST_SummaryStats(rast, 3) AS stats3
FROM bar
ORDER BY rid;

 rid |         metadata          |    stats1     |    stats2     |     stats3
-----+---------------------------+---------------+---------------+----------------
   1 | (0,0,2,2,1,-1,0,0,0,3)    | (4,4,1,0,1,1) | (4,8,2,0,2,2) | (4,12,3,0,3,3)
   2 | (0,0,2,2,1,-1,0,0,3310,3) | (4,4,1,0,1,1) | (4,8,2,0,2,2) | (4,12,3,0,3,3)
(2 rows)
				</pre></div><div class="refsection" title="See Also"><a name="idp89568208"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>
				</p></div></div></div><div class="sect1" title="9.4. Raster Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Accessors"></a>9.4. Raster Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_GeoReference">ST_GeoReference</a></span><span class="refpurpose"> — Returns the georeference meta data in GDAL or ESRI format as commonly seen in a world file. Default is GDAL.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Height">ST_Height</a></span><span class="refpurpose"> — Returns the height of the raster in pixels.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_IsEmpty">ST_IsEmpty</a></span><span class="refpurpose"> — Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MemSize">ST_MemSize</a></span><span class="refpurpose"> — Returns the amount of space (in bytes) the raster takes.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MetaData">ST_MetaData</a></span><span class="refpurpose"> — Returns basic meta data about a raster object such as pixel size, rotation (skew), upper, lower left, etc.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_NumBands">ST_NumBands</a></span><span class="refpurpose"> — Returns the number of bands in the raster object.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelHeight">ST_PixelHeight</a></span><span class="refpurpose"> — Returns the pixel height in geometric units of the spatial reference system.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelWidth">ST_PixelWidth</a></span><span class="refpurpose"> — Returns the pixel width in geometric units of the spatial reference system.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ScaleX">ST_ScaleX</a></span><span class="refpurpose"> — Returns the X component of the pixel width in units of coordinate reference system.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ScaleY">ST_ScaleY</a></span><span class="refpurpose"> — Returns the Y component of the pixel height in units of coordinate reference system.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoord">ST_RasterToWorldCoord</a></span><span class="refpurpose"> — Returns the raster's upper left corner as geometric X and Y (longitude and latitude) given a column and row. Column and row starts at 1.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a></span><span class="refpurpose"> — Returns the geometric X coordinate upper left of a raster, column and row. Numbering of columns
					and rows starts at 1.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a></span><span class="refpurpose"> — Returns the geometric Y coordinate upper left corner of a raster, column and row. Numbering of columns
					and rows starts at 1. </span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Rotation">ST_Rotation</a></span><span class="refpurpose"> — Returns the rotation of the raster in radian.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SkewX">ST_SkewX</a></span><span class="refpurpose"> — Returns the georeference X skew (or rotation parameter).</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SkewY">ST_SkewY</a></span><span class="refpurpose"> — Returns the georeference Y skew (or rotation parameter).</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SRID">ST_SRID</a></span><span class="refpurpose"> — Returns the spatial reference identifier of the raster as defined in spatial_ref_sys table.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Summary">ST_Summary</a></span><span class="refpurpose"> — Returns a text summary of the contents of the raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_UpperLeftX">ST_UpperLeftX</a></span><span class="refpurpose"> — Returns the upper left X coordinate of raster in projected spatial ref.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_UpperLeftY">ST_UpperLeftY</a></span><span class="refpurpose"> — Returns the upper left Y coordinate of raster in projected spatial ref.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Width">ST_Width</a></span><span class="refpurpose"> — Returns the width of the raster in pixels.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoord">ST_WorldToRasterCoord</a></span><span class="refpurpose"> — 	Returns the upper left corner as column and row given geometric X and Y (longitude and latitude) or a point geometry expressed in the spatial reference coordinate system of the raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a></span><span class="refpurpose"> — Returns the column in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a></span><span class="refpurpose"> — Returns the row in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</span></dt></dl></div><div class="refentry" title="ST_GeoReference"><a name="RT_ST_GeoReference"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GeoReference — Returns the georeference meta data in GDAL or ESRI format as commonly seen in a world file. Default is GDAL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_GeoReference</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">format=GDAL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89576528"></a><h2>Description</h2><p>Returns the georeference meta data including carriage return in GDAL or ESRI format as commonly seen in a <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">world file</a>. Default is GDAL if no type specified.  type is string 'GDAL' or 'ESRI'.
					 </p><p>Difference between format representations is as follows:</p><p><code class="varname">GDAL</code>:
</p><pre class="programlisting">scalex
skewy
skewx
scaley
upperleftx
upperlefty</pre><p><code class="varname">ESRI</code>:
</p><pre class="programlisting">scalex
skewy
skewx
scaley
upperleftx + scalex*0.5
upperlefty + scaley*0.5</pre></div><div class="refsection" title="Examples"><a name="idp89580624"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_GeoReference(rast, 'ESRI') As esri_ref, ST_GeoReference(rast, 'GDAL') As gdal_ref
 FROM dummy_rast WHERE rid=1;

   esri_ref   |   gdal_ref
--------------+--------------
 2.0000000000 | 2.0000000000
 0.0000000000 : 0.0000000000
 0.0000000000 : 0.0000000000
 3.0000000000 : 3.0000000000
 1.5000000000 : 0.5000000000
 2.0000000000 : 0.5000000000
				</pre></div><div class="refsection" title="See Also"><a name="idp89581904"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a></p></div></div><div class="refentry" title="ST_Height"><div class="refentry.separator"><hr></div><a name="RT_ST_Height"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Height — Returns the height of the raster in pixels.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_Height</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89592784"></a><h2>Description</h2><p>Returns the height of the raster.</p></div><div class="refsection" title="Examples"><a name="idp89593936"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_Height(rast) As rastheight
FROM dummy_rast;

 rid | rastheight
-----+------------
   1 |         20
   2 |          5
				</pre></div><div class="refsection" title="See Also"><a name="idp89595216"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a></p></div></div><div class="refentry" title="ST_IsEmpty"><div class="refentry.separator"><hr></div><a name="RT_ST_IsEmpty"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_IsEmpty — Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_IsEmpty</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89609424"></a><h2>Description</h2><p>Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp89610960"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_IsEmpty(ST_MakeEmptyRaster(100, 100, 0, 0, 0, 0, 0, 0))
st_isempty |
-----------+
f          |


SELECT ST_IsEmpty(ST_MakeEmptyRaster(0, 0, 0, 0, 0, 0, 0, 0))
st_isempty |
-----------+
t          |

                </pre></div><div class="refsection" title="See Also"><a name="idp89612496"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a></p></div></div><div class="refentry" title="ST_MemSize"><div class="refentry.separator"><hr></div><a name="RT_ST_MemSize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MemSize — Returns the amount of space (in bytes) the raster takes.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_MemSize</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89618512"></a><h2>Description</h2><p>Returns the amount of space (in bytes) the raster takes. </p><p>This is a nice compliment to PostgreSQL built in functions pg_column_size, pg_size_pretty, pg_relation_size, pg_total_relation_size.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>pg_relation_size which gives the byte size of a table may return byte size lower than ST_MemSize. This is because
		pg_relation_size does not add toasted table contribution and large geometries are stored in TOAST tables. pg_column_size might return lower because it returns the compressed size.</p><p>pg_total_relation_size - includes, the table, the toasted tables, and the indexes.</p></td></tr></table></div><p>Availability: 2.2.0</p></div><div class="refsection" title="Examples"><a name="idp89621584"></a><h2>Examples</h2><pre class="programlisting">
		SELECT ST_MemSize(ST_AsRaster(ST_Buffer(ST_Point(1,5),10,1000),150, 150, '8BUI')) As rast_mem;

		rast_mem
		--------
		22568
	</pre></div><div class="refsection" title="See Also"><a name="idp89623120"></a><h2>See Also</h2><p></p></div></div><div class="refentry" title="ST_MetaData"><div class="refentry.separator"><hr></div><a name="RT_ST_MetaData"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MetaData — Returns basic meta data about a raster object such as pixel size, rotation (skew), upper, lower left, etc.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">ST_MetaData</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89628752"></a><h2>Description</h2><p>Returns basic meta data about a raster object such as pixel size, rotation (skew), upper, lower left, etc. Columns returned:
					upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands</p></div><div class="refsection" title="Examples"><a name="idp89630032"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, (foo.md).*
 FROM (SELECT rid, ST_MetaData(rast) As md
FROM dummy_rast) As foo;

 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
 ----+------------+------------+-------+--------+--------+-----------+-------+-------+------+-------
   1 |        0.5 |        0.5 |    10 |     20 |      2 |      3 |		0 |     0 |    0 |        0
   2 | 3427927.75 |    5793244 |     5 |      5 |   0.05 |  -0.05 |		0 |     0 |    0 |        3
				</pre></div><div class="refsection" title="See Also"><a name="idp89631568"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" title="ST_NumBands"><div class="refentry.separator"><hr></div><a name="RT_ST_NumBands"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NumBands — Returns the number of bands in the raster object.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NumBands</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89642064"></a><h2>Description</h2><p>Returns the number of bands in the raster object.</p></div><div class="refsection" title="Examples"><a name="idp89643216"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_NumBands(rast) As numbands
FROM dummy_rast;

rid | numbands
----+----------
  1 |        0
  2 |        3
				</pre></div><div class="refsection" title="See Also"><a name="idp89644880"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a></p></div></div><div class="refentry" title="ST_PixelHeight"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelHeight"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelHeight — Returns the pixel height in geometric units of the spatial reference system.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_PixelHeight</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89650896"></a><h2>Description</h2><p>Returns the height of a pixel in geometric units of the spatial reference system. In the common case where
				there is no skew, the pixel height is just the scale ratio between geometric coordinates and raster pixels.</p><p>Refer to <a class="xref" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a> for a diagrammatic visualization of the relationship. </p></div><div class="refsection" title="Examples: Rasters with no skew"><a name="idp89652816"></a><h2>Examples: Rasters with no skew</h2><pre class="programlisting">SELECT ST_Height(rast) As rastheight, ST_PixelHeight(rast) As pixheight,
 ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
        ST_SkewY(rast) As skewy
FROM dummy_rast;

 rastheight | pixheight | scalex | scaley | skewx | skewy
------------+-----------+--------+--------+-------+----------
         20 |         3 |      2 |      3 |     0 |        0
          5 |      0.05 |   0.05 |  -0.05 |     0 |        0
			</pre></div><div class="refsection" title="Examples: Rasters with skew different than 0"><a name="idp89654096"></a><h2>Examples: Rasters with skew different than 0</h2><pre class="programlisting">SELECT ST_Height(rast) As rastheight, ST_PixelHeight(rast) As pixheight,
 ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
        ST_SkewY(rast) As skewy
FROM (SELECT ST_SetSKew(rast,0.5,0.5) As rast
        FROM dummy_rast) As skewed;

rastheight |     pixheight     | scalex | scaley | skewx | skewy
-----------+-------------------+--------+--------+-------+----------
        20 |  3.04138126514911 |      2 |      3 |   0.5 |      0.5
         5 | 0.502493781056044 |   0.05 |  -0.05 |   0.5 |      0.5
			</pre></div><div class="refsection" title="See Also"><a name="idp89655632"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a>,
				<a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>,
				<a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>,
				<a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>,
				<a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>
			</p></div></div><div class="refentry" title="ST_PixelWidth"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelWidth"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelWidth — Returns the pixel width in geometric units of the spatial reference system.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_PixelWidth</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89663440"></a><h2>Description</h2><p>Returns the width of a pixel in geometric units of the spatial reference system. In the common case where
			there is no skew, the pixel width is just the scale ratio between geometric coordinates and raster pixels.</p><p>The following diagram demonstrates the relationship:</p><p>
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/raster_xscale_yscale_xskew_yskew.png"><div class="caption"><p>Pixel Width: Pixel size in the i direction</p><p>Pixel Height: Pixel size in the j direction</p></div></div></div><p>
			</p></div><div class="refsection" title="Examples: Rasters with no skew"><a name="idp89667920"></a><h2>Examples: Rasters with no skew</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth, ST_PixelWidth(rast) As pixwidth,
	ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
	ST_SkewY(rast) As skewy
	FROM dummy_rast;

	rastwidth | pixwidth | scalex | scaley | skewx | skewy
	-----------+----------+--------+--------+-------+----------
	10 |        2 |      2 |      3 |     0 |        0
	 5 |     0.05 |   0.05 |  -0.05 |     0 |        0
		</pre></div><div class="refsection" title="Examples: Rasters with skew different than 0"><a name="idp89669200"></a><h2>Examples: Rasters with skew different than 0</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth, ST_PixelWidth(rast) As pixwidth,
	ST_ScaleX(rast) As scalex, ST_ScaleY(rast) As scaley, ST_SkewX(rast) As skewx,
	ST_SkewY(rast) As skewy
	FROM (SELECT ST_SetSkew(rast,0.5,0.5) As rast
	FROM dummy_rast) As skewed;

	rastwidth |     pixwidth      | scalex | scaley | skewx | skewy
	-----------+-------------------+--------+--------+-------+----------
	10 |  2.06155281280883 |      2 |      3 |   0.5 |      0.5
	 5 | 0.502493781056044 |   0.05 |  -0.05 |   0.5 |      0.5
		</pre></div><div class="refsection" title="See Also"><a name="idp89670736"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_PixelHeight" title="ST_PixelHeight">ST_PixelHeight</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" title="ST_ScaleX"><div class="refentry.separator"><hr></div><a name="RT_ST_ScaleX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ScaleX — Returns the X component of the pixel width in units of coordinate reference system.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_ScaleX</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89678288"></a><h2>Description</h2><p>Returns the X component of the pixel width in units of coordinate reference system. Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a>
				for more details.</p><p>Changed: 2.0.0. In WKTRaster versions this was called ST_PixelSizeX.</p></div><div class="refsection" title="Examples"><a name="idp89680336"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_ScaleX(rast) As rastpixwidth
FROM dummy_rast;

 rid | rastpixwidth
-----+--------------
   1 |            2
   2 |         0.05
				</pre></div><div class="refsection" title="See Also"><a name="idp89681872"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Width" title="ST_Width">ST_Width</a></p></div></div><div class="refentry" title="ST_ScaleY"><div class="refentry.separator"><hr></div><a name="RT_ST_ScaleY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ScaleY — Returns the Y component of the pixel height in units of coordinate reference system.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_ScaleY</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89687888"></a><h2>Description</h2><p>Returns the Y component of the pixel height in units of coordinate reference system.  May be negative.  Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a>
				for more details.</p><p>Changed: 2.0.0. In WKTRaster versions this was called ST_PixelSizeY.</p></div><div class="refsection" title="Examples"><a name="idp89690064"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_ScaleY(rast) As rastpixheight
FROM dummy_rast;

 rid | rastpixheight
-----+---------------
   1 |             3
   2 |         -0.05
				</pre></div><div class="refsection" title="See Also"><a name="idp89691728"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a></p></div></div><div class="refentry" title="ST_RasterToWorldCoord"><div class="refentry.separator"><hr></div><a name="RT_ST_RasterToWorldCoord"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoord — Returns the raster's upper left corner as geometric X and Y (longitude and latitude) given a column and row. Column and row starts at 1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">ST_RasterToWorldCoord</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89699792"></a><h2>Description</h2><p>
					Returns the upper left corner as geometric X and Y (longitude and latitude) given a column and row.  Returned X and Y are in geometric units of the georeferenced raster.
					Numbering of column and row starts at 1 but if either parameter is passed a zero, a negative number or a number greater than the respective dimension of the raster, it will return coordinates outside of the raster assuming the raster's grid is applicable outside the raster's bounds.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp89701328"></a><h2>Examples</h2><pre class="programlisting">
-- non-skewed raster
SELECT
	rid,
	(ST_RasterToWorldCoord(rast,1, 1)).*,
	(ST_RasterToWorldCoord(rast,2, 2)).*
FROM dummy_rast

 rid | longitude  | latitude | longitude |  latitude
-----+------------+----------+-----------+------------
   1 |        0.5 |      0.5 |       2.5 |        3.5
   2 | 3427927.75 |  5793244 | 3427927.8 | 5793243.95
				</pre><pre class="programlisting">
-- skewed raster
SELECT
	rid,
	(ST_RasterToWorldCoord(rast, 1, 1)).*,
	(ST_RasterToWorldCoord(rast, 2, 3)).*
FROM (
	SELECT
		rid,
		ST_SetSkew(rast, 100.5, 0) As rast
	FROM dummy_rast
) As foo

 rid | longitude  | latitude | longitude | latitude
-----+------------+----------+-----------+-----------
   1 |        0.5 |      0.5 |     203.5 |       6.5
   2 | 3427927.75 |  5793244 | 3428128.8 | 5793243.9
				</pre></div><div class="refsection" title="See Also"><a name="idp89703376"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>,
					<a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>,
					<a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>
				</p></div></div><div class="refentry" title="ST_RasterToWorldCoordX"><div class="refentry.separator"><hr></div><a name="RT_ST_RasterToWorldCoordX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoordX — Returns the geometric X coordinate upper left of a raster, column and row. Numbering of columns
					and rows starts at 1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_RasterToWorldCoordX</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var><code>)</code>;</p><p><code class="funcdef">float8 <b class="fsfunc">ST_RasterToWorldCoordX</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89715920"></a><h2>Description</h2><p>Returns the upper left X coordinate of a raster column row in geometric units of the georeferenced raster.
					Numbering of columns and rows starts at 1 but if you pass in a negative number or number higher than number of
						columns in raster, it will give you
					coordinates outside of the raster file to left or right with the assumption that the
					skew and pixel sizes are same as selected raster. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For non-skewed rasters, providing the X column is sufficient.  For skewed rasters,
						the georeferenced coordinate is a function of the ST_ScaleX and ST_SkewX and row and column.
						An error will be raised if you give just the X column for a skewed raster.</p></td></tr></table></div><p>Changed: 2.1.0 In prior versions, this was called ST_Raster2WorldCoordX</p></div><div class="refsection" title="Examples"><a name="idp89717968"></a><h2>Examples</h2><pre class="programlisting">
-- non-skewed raster providing column is sufficient
SELECT rid, ST_RasterToWorldCoordX(rast,1) As x1coord,
	ST_RasterToWorldCoordX(rast,2) As x2coord,
	ST_ScaleX(rast) As pixelx
FROM dummy_rast;

 rid |  x1coord   |  x2coord  | pixelx
-----+------------+-----------+--------
   1 |        0.5 |       2.5 |      2
   2 | 3427927.75 | 3427927.8 |   0.05
				</pre><pre class="programlisting">
-- for fun lets skew it
SELECT rid, ST_RasterToWorldCoordX(rast, 1, 1) As x1coord,
	ST_RasterToWorldCoordX(rast, 2, 3) As x2coord,
	ST_ScaleX(rast) As pixelx
FROM (SELECT rid, ST_SetSkew(rast, 100.5, 0) As rast FROM dummy_rast) As foo;

 rid |  x1coord   |  x2coord  | pixelx
-----+------------+-----------+--------
   1 |        0.5 |     203.5 |      2
   2 | 3427927.75 | 3428128.8 |   0.05
				</pre></div><div class="refsection" title="See Also"><a name="idp89720016"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a></p></div></div><div class="refentry" title="ST_RasterToWorldCoordY"><div class="refentry.separator"><hr></div><a name="RT_ST_RasterToWorldCoordY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RasterToWorldCoordY — Returns the geometric Y coordinate upper left corner of a raster, column and row. Numbering of columns
					and rows starts at 1. </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_RasterToWorldCoordY</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p><p><code class="funcdef">float8 <b class="fsfunc">ST_RasterToWorldCoordY</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">xcolumn</var>, integer  <var class="pdparam">yrow</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89740752"></a><h2>Description</h2><p>Returns the upper left Y coordinate of a raster column row in geometric units of the georeferenced raster.
					Numbering of columns and rows starts at 1 but if you pass in a negative number or number higher than number of
						columns/rows in raster, it will give you
					coordinates outside of the raster file to left or right with the assumption that the
					skew and pixel sizes are same as selected raster tile. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For non-skewed rasters, providing the Y column is sufficient. For skewed rasters,
						the georeferenced coordinate is a function of the ST_ScaleY and ST_SkewY and row and column.
						An error will be raised if you give just the Y row for a skewed raster.</p></td></tr></table></div><p>Changed: 2.1.0 In prior versions, this was called ST_Raster2WorldCoordY</p></div><div class="refsection" title="Examples"><a name="idp89742800"></a><h2>Examples</h2><pre class="programlisting">
-- non-skewed raster providing row is sufficient
SELECT rid, ST_RasterToWorldCoordY(rast,1) As y1coord,
	ST_RasterToWorldCoordY(rast,3) As y2coord,
	ST_ScaleY(rast) As pixely
FROM dummy_rast;

 rid | y1coord |  y2coord  | pixely
-----+---------+-----------+--------
   1 |     0.5 |       6.5 |      3
   2 | 5793244 | 5793243.9 |  -0.05
				</pre><pre class="programlisting">
-- for fun lets skew it
SELECT rid, ST_RasterToWorldCoordY(rast,1,1) As y1coord,
	ST_RasterToWorldCoordY(rast,2,3) As y2coord,
	ST_ScaleY(rast) As pixely
FROM (SELECT rid, ST_SetSkew(rast,0,100.5) As rast FROM dummy_rast) As foo;

 rid | y1coord |  y2coord  | pixely
-----+---------+-----------+--------
   1 |     0.5 |       107 |      3
   2 | 5793244 | 5793344.4 |  -0.05
				</pre></div><div class="refsection" title="See Also"><a name="idp89744848"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" title="ST_Rotation"><div class="refentry.separator"><hr></div><a name="RT_ST_Rotation"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Rotation — Returns the rotation of the raster in radian.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Rotation</b>(</code>raster <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89756112"></a><h2>Description</h2><p>Returns the uniform rotation of the raster in radian. If a raster does not have uniform rotation, NaN is returned.
                Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a> for more details.</p></div><div class="refsection" title="Examples"><a name="idp89757776"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_Rotation(ST_SetScale(ST_SetSkew(rast, sqrt(2)), sqrt(2))) as rot FROM dummy_rast;

 rid |        rot
-----+-------------------
   1 | 0.785398163397448
   2 | 0.785398163397448
                </pre></div><div class="refsection" title="See Also"><a name="idp89759312"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a>, <a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" title="ST_SkewX"><div class="refentry.separator"><hr></div><a name="RT_ST_SkewX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SkewX — Returns the georeference X skew (or rotation parameter).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_SkewX</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89766096"></a><h2>Description</h2><p>Returns the georeference X skew (or rotation parameter).  Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a>
				for more details.</p></div><div class="refsection" title="Examples"><a name="idp89767760"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast;

 rid | skewx | skewy |       georef
-----+-------+-------+--------------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
                     :
   2 |     0 |     0 | 0.0500000000
                     : 0.0000000000
                     : 0.0000000000
                     : -0.0500000000
                     : 3427927.7500000000
                     : 5793244.0000000000
				</pre></div><div class="refsection" title="See Also"><a name="idp89773520"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" title="ST_SkewY"><div class="refentry.separator"><hr></div><a name="RT_ST_SkewY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SkewY — Returns the georeference Y skew (or rotation parameter).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_SkewY</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89780176"></a><h2>Description</h2><p>Returns the georeference Y skew (or rotation parameter).  Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a>
				for more details.</p></div><div class="refsection" title="Examples"><a name="idp89781968"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast;

 rid | skewx | skewy |       georef
-----+-------+-------+--------------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
                     :
   2 |     0 |     0 | 0.0500000000
                     : 0.0000000000
                     : 0.0000000000
                     : -0.0500000000
                     : 3427927.7500000000
                     : 5793244.0000000000
				</pre></div><div class="refsection" title="See Also"><a name="idp89783504"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a></p></div></div><div class="refentry" title="ST_SRID"><div class="refentry.separator"><hr></div><a name="RT_ST_SRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SRID — Returns the spatial reference identifier of the raster as defined in spatial_ref_sys table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_SRID</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89790288"></a><h2>Description</h2><p>Returns the spatial reference identifier of the raster object as defined in the spatial_ref_sys table.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>From PostGIS 2.0+ the srid of a non-georeferenced raster/geometry is 0 instead of the prior -1.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp89791952"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_SRID(rast) As srid
FROM dummy_rast WHERE rid=1;

srid
----------------
0
				</pre></div><div class="refsection" title="See Also"><a name="idp89793488"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_Summary"><div class="refentry.separator"><hr></div><a name="RT_ST_Summary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Summary — Returns a text summary of the contents of the raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_Summary</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89828560"></a><h2>Description</h2><p>Returns a text summary of the contents of the raster.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp89830096"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_Summary(
	ST_AddBand(
		ST_AddBand(
			ST_AddBand(
				ST_MakeEmptyRaster(10, 10, 0, 0, 1, -1, 0, 0, 0)
				, 1, '8BUI', 1, 0
			)
			, 2, '32BF', 0, -9999
		)
		, 3, '16BSI', 0, NULL
	)
);

                            st_summary
------------------------------------------------------------------
 Raster of 10x10 pixels has 3 bands and extent of BOX(0 -10,10 0)+
     band 1 of pixtype 8BUI is in-db with NODATA value of 0      +
     band 2 of pixtype 32BF is in-db with NODATA value of -9999  +
     band 3 of pixtype 16BSI is in-db with no NODATA value
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp89831376"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>,
					<a class="xref" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a>,
					<a class="xref" href="#ST_Summary" title="ST_Summary">ST_Summary</a>
					<a class="xref" href="#ST_Extent" title="ST_Extent">ST_Extent</a>
				</p></div></div><div class="refentry" title="ST_UpperLeftX"><div class="refentry.separator"><hr></div><a name="RT_ST_UpperLeftX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_UpperLeftX — Returns the upper left X coordinate of raster in projected spatial ref.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_UpperLeftX</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89838800"></a><h2>Description</h2><p>Returns the upper left X coordinate of raster in projected spatial ref.</p></div><div class="refsection" title="Examples"><a name="idp89839952"></a><h2>Examples</h2><pre class="programlisting">
SELECt rid, ST_UpperLeftX(rast) As ulx
FROM dummy_rast;

 rid |    ulx
-----+------------
   1 |        0.5
   2 | 3427927.75
				</pre></div><div class="refsection" title="See Also"><a name="idp89841232"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" title="ST_UpperLeftY"><div class="refentry.separator"><hr></div><a name="RT_ST_UpperLeftY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_UpperLeftY — Returns the upper left Y coordinate of raster in projected spatial ref.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_UpperLeftY</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89848016"></a><h2>Description</h2><p>Returns the upper left Y coordinate of raster in projected spatial ref.</p></div><div class="refsection" title="Examples"><a name="idp89849168"></a><h2>Examples</h2><pre class="programlisting">
SELECT rid, ST_UpperLeftY(rast) As uly
FROM dummy_rast;

 rid |   uly
-----+---------
   1 |     0.5
   2 | 5793244
				</pre></div><div class="refsection" title="See Also"><a name="idp89850704"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" title="ST_Width"><div class="refentry.separator"><hr></div><a name="RT_ST_Width"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Width — Returns the width of the raster in pixels.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_Width</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89857360"></a><h2>Description</h2><p>Returns the width of the raster in pixels.</p></div><div class="refsection" title="Examples"><a name="idp89858640"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Width(rast) As rastwidth
FROM dummy_rast WHERE rid=1;

rastwidth
----------------
10
				</pre></div><div class="refsection" title="See Also"><a name="idp89860176"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Height" title="ST_Height">ST_Height</a></p></div></div><div class="refentry" title="ST_WorldToRasterCoord"><div class="refentry.separator"><hr></div><a name="RT_ST_WorldToRasterCoord"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoord — 	Returns the upper left corner as column and row given geometric X and Y (longitude and latitude) or a point geometry expressed in the spatial reference coordinate system of the raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">ST_WorldToRasterCoord</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">record <b class="fsfunc">ST_WorldToRasterCoord</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">longitude</var>, double precision  <var class="pdparam">latitude</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89871440"></a><h2>Description</h2><p>
					Returns the upper left corner as column and row given geometric X and Y (longitude and latitude) or a point geometry.
					This function works regardless of whether or not the geometric X and Y or point geometry is outside the extent of the raster.
					Geometric X and Y must be expressed in the spatial reference coordinate system of the raster.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp89872976"></a><h2>Examples</h2><pre class="programlisting">
SELECT
	rid,
	(ST_WorldToRasterCoord(rast,3427927.8,20.5)).*,
	(ST_WorldToRasterCoord(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast)))).*
FROM dummy_rast;

 rid | columnx |   rowy    | columnx |   rowy
-----+---------+-----------+---------+-----------
   1 | 1713964 |         7 | 1713964 |         7
   2 |       2 | 115864471 |       2 | 115864471
				</pre></div><div class="refsection" title="See Also"><a name="idp89874512"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a>,
					<a class="xref" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a>,
					<a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>,
					<a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>,
					<a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>
				</p></div></div><div class="refentry" title="ST_WorldToRasterCoordX"><div class="refentry.separator"><hr></div><a name="RT_ST_WorldToRasterCoordX"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoordX — Returns the column in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordX</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordX</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordX</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var>, double precision  <var class="pdparam">yw</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89907280"></a><h2>Description</h2><p>Returns the column in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw).  A point, or (both xw and yw world coordinates are required if a raster is skewed).  If a raster
					is not skewed then xw is sufficient. World coordinates are in the spatial reference coordinate system of the raster.</p><p>Changed: 2.1.0 In prior versions, this was called ST_World2RasterCoordX</p></div><div class="refsection" title="Examples"><a name="idp89908944"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_WorldToRasterCoordX(rast,3427927.8) As xcoord,
		ST_WorldToRasterCoordX(rast,3427927.8,20.5) As xcoord_xwyw,
		ST_WorldToRasterCoordX(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast))) As ptxcoord
FROM dummy_rast;

 rid | xcoord  |  xcoord_xwyw   | ptxcoord
-----+---------+---------+----------
   1 | 1713964 | 1713964 |  1713964
   2 |       1 |       1 |        1
				</pre></div><div class="refsection" title="See Also"><a name="idp89910480"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>,
					<a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>,
					<a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>
				</p></div></div><div class="refentry" title="ST_WorldToRasterCoordY"><div class="refentry.separator"><hr></div><a name="RT_ST_WorldToRasterCoordY"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_WorldToRasterCoordY — Returns the row in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented
				in world spatial reference system of raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordY</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordY</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">ST_WorldToRasterCoordY</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">xw</var>, double precision  <var class="pdparam">yw</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89926096"></a><h2>Description</h2><p>Returns the row in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw).  A point, or (both xw and yw world coordinates are required if a raster is skewed).  If a raster
					is not skewed then xw is sufficient. World coordinates are in the spatial reference coordinate system of the raster.</p><p>Changed: 2.1.0 In prior versions, this was called ST_World2RasterCoordY</p></div><div class="refsection" title="Examples"><a name="idp89927632"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_WorldToRasterCoordY(rast,20.5) As ycoord,
		ST_WorldToRasterCoordY(rast,3427927.8,20.5) As ycoord_xwyw,
		ST_WorldToRasterCoordY(rast,ST_GeomFromText('POINT(3427927.8 20.5)',ST_SRID(rast))) As ptycoord
FROM dummy_rast;

 rid |  ycoord   | ycoord_xwyw | ptycoord
-----+-----------+-------------+-----------
   1 |         7 |           7 |         7
   2 | 115864471 |   115864471 | 115864471
				</pre></div><div class="refsection" title="See Also"><a name="idp89929168"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a>, <a class="xref" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div></div><div class="sect1" title="9.5. Raster Band Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Accessors"></a>9.5. Raster Band Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_BandMetaData">ST_BandMetaData</a></span><span class="refpurpose"> — Returns basic meta data for a specific raster band. band num 1 is assumed if none-specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_BandNoDataValue">ST_BandNoDataValue</a></span><span class="refpurpose"> — Returns the value in a given band that represents no data. If no band num 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_BandIsNoData">ST_BandIsNoData</a></span><span class="refpurpose"> — Returns true if the band is filled with only nodata values.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_BandPath">ST_BandPath</a></span><span class="refpurpose"> — Returns system file path to a band stored in file system. If no bandnum specified, 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_BandPixelType">ST_BandPixelType</a></span><span class="refpurpose"> — Returns the type of pixel for given band. If no bandnum specified, 1 is assumed.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_HasNoBand">ST_HasNoBand</a></span><span class="refpurpose"> — Returns true if there is no band with given band number.  If no band number is specified, then band number 1 is assumed.</span></dt></dl></div><div class="refentry" title="ST_BandMetaData"><a name="RT_ST_BandMetaData"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BandMetaData — Returns basic meta data for a specific raster band. band num 1 is assumed if none-specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">ST_BandMetaData</b>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89937744"></a><h2>Description</h2><p>Returns basic meta data about a raster band. Columns returned
					 pixeltype | nodatavalue | isoutdb | path.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					If raster contains no bands then an error is thrown.
                                  </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					If band has no NODATA value, nodatavalue will be NULL.
                                  </p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp89940688"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, (foo.md).*
 FROM (SELECT rid, ST_BandMetaData(rast,1) As md
FROM dummy_rast WHERE rid=2) As foo;

 rid | pixeltype | nodatavalue | isoutdb | path
-----+-----------+----------------+-------------+---------+------
   2 | 8BUI      |           0 | f       |
				</pre></div><div class="refsection" title="See Also"><a name="idp89942224"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a>, <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a></p></div></div><div class="refentry" title="ST_BandNoDataValue"><div class="refentry.separator"><hr></div><a name="RT_ST_BandNoDataValue"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BandNoDataValue — Returns the value in a given band that represents no data. If no band num 1 is assumed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_BandNoDataValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89949776"></a><h2>Description</h2><p>Returns the value that represents no data for the band</p></div><div class="refsection" title="Examples"><a name="idp89950928"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_BandNoDataValue(rast,1) As bnval1,
    ST_BandNoDataValue(rast,2) As bnval2, ST_BandNoDataValue(rast,3) As bnval3
FROM dummy_rast
WHERE rid = 2;

 bnval1 | bnval2 | bnval3
--------+--------+--------
      0 |      0 |      0
				</pre></div><div class="refsection" title="See Also"><a name="idp89952208"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" title="ST_BandIsNoData"><div class="refentry.separator"><hr></div><a name="RT_ST_BandIsNoData"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BandIsNoData — Returns true if the band is filled with only nodata values.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_BandIsNoData</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, boolean  <var class="pdparam">forceChecking=true</var><code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_BandIsNoData</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">forceChecking=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89963728"></a><h2>Description</h2><p>Returns true if the band is filled with only nodata
                values. Band 1 is assumed if not specified. If the last argument
                is TRUE, the entire band is checked pixel by pixel. Otherwise,
                the function simply returns the value of the isnodata flag for
                the band. The default value for this parameter is FALSE, if not
                specified.</p><p>Availability: 2.0.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If the flag is dirty (this is, the result is different
                    using TRUE as last parameter and not using it) you should
                    update the raster to set this flag to true, by using ST_SetBandIsNodata(),
                    or ST_SetBandNodataValue() with TRUE as last argument. See <a class="xref" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a>.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp89966544"></a><h2>Examples</h2><pre class="programlisting">
-- Create dummy table with one raster column
create table dummy_rast (rid integer, rast raster);

-- Add raster with two bands, one pixel/band. In the first band, nodatavalue = pixel value = 3.
-- In the second band, nodatavalue = 13, pixel value = 4
insert into dummy_rast values(1,
(
'01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0200' -- nBands (uint16 0)
||
'17263529ED684A3F' -- scaleX (float64 0.000805965234044584)
||
'F9253529ED684ABF' -- scaleY (float64 -0.00080596523404458)
||
'1C9F33CE69E352C0' -- ipX (float64 -75.5533328537098)
||
'718F0E9A27A44840' -- ipY (float64 49.2824585505576)
||
'ED50EB853EC32B3F' -- skewX (float64 0.000211812383858707)
||
'7550EB853EC32B3F' -- skewY (float64 0.000211812383858704)
||
'E6100000' -- SRID (int32 4326)
||
'0100' -- width (uint16 1)
||
'0100' -- height (uint16 1)
||
'6' -- hasnodatavalue and isnodata value set to true.
||
'2' -- first band type (4BUI)
||
'03' -- novalue==3
||
'03' -- pixel(0,0)==3 (same that nodata)
||
'0' -- hasnodatavalue set to false
||
'5' -- second band type (16BSI)
||
'0D00' -- novalue==13
||
'0400' -- pixel(0,0)==4
)::raster
);

select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected true
select st_bandisnodata(rast, 2) from dummy_rast where rid = 1; -- Expected false
			</pre></div><div class="refsection" title="See Also"><a name="idp89967824"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>, <a class="xref" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a></p></div></div><div class="refentry" title="ST_BandPath"><div class="refentry.separator"><hr></div><a name="RT_ST_BandPath"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BandPath — Returns system file path to a band stored in file system. If no bandnum specified, 1 is assumed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_BandPath</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89976144"></a><h2>Description</h2><p>Returns system file path to a band.  Throws an error if called with an in db band.</p></div><div class="refsection" title="Examples"><a name="idp89977296"></a><h2>Examples</h2><pre class="programlisting">
					</pre></div><div class="refsection" title="See Also"><a name="idp89978704"></a><h2>See Also</h2><p></p></div></div><div class="refentry" title="ST_BandPixelType"><div class="refentry.separator"><hr></div><a name="RT_ST_BandPixelType"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_BandPixelType — Returns the type of pixel for given band. If no bandnum specified, 1 is assumed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_BandPixelType</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp89985616"></a><h2>Description</h2><p>Returns the value that represents no data for the band</p><p>There are 11 pixel types.  Pixel Types supported are as follows:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1BB -  1-bit boolean</p></li><li class="listitem"><p>2BUI - 2-bit unsigned integer</p></li><li class="listitem"><p>4BUI - 4-bit unsigned integer </p></li><li class="listitem"><p>8BSI - 8-bit signed integer </p></li><li class="listitem"><p>8BUI - 8-bit unsigned integer</p></li><li class="listitem"><p>16BSI - 16-bit signed integer</p></li><li class="listitem"><p>16BUI - 16-bit unsigned integer</p></li><li class="listitem"><p>32BSI - 32-bit signed integer</p></li><li class="listitem"><p>32BUI - 32-bit unsigned integer</p></li><li class="listitem"><p>32BF - 32-bit float</p></li><li class="listitem"><p>64BF - 64-bit float</p></li></ul></div><p>
				</p></div><div class="refsection" title="Examples"><a name="idp90008400"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_BandPixelType(rast,1) As btype1,
    ST_BandPixelType(rast,2) As btype2, ST_BandPixelType(rast,3) As btype3
FROM dummy_rast
WHERE rid = 2;

 btype1 | btype2 | btype3
--------+--------+--------
 8BUI   | 8BUI   | 8BUI
				</pre></div><div class="refsection" title="See Also"><a name="idp90009680"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" title="ST_HasNoBand"><div class="refentry.separator"><hr></div><a name="RT_ST_HasNoBand"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_HasNoBand — Returns true if there is no band with given band number.  If no band number is specified, then band number 1 is assumed.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_HasNoBand</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90016848"></a><h2>Description</h2><p>Returns true if there is no band with given band number.  If no band number is specified, then band number 1 is assumed.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp90018640"></a><h2>Examples</h2><pre class="programlisting">SELECT rid, ST_HasNoBand(rast) As hb1, ST_HasNoBand(rast,2) as hb2,
ST_HasNoBand(rast,4) as hb4, ST_NumBands(rast) As numbands
FROM dummy_rast;

rid | hb1 | hb2 | hb4 | numbands
-----+-----+-----+-----+----------
1 | t   | t   | t   |        0
2 | f   | f   | t   |        3
			</pre></div><div class="refsection" title="See Also"><a name="idp90019920"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div></div><div class="sect1" title="9.6. Raster Pixel Accessors and Setters"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Pixel_Accessors"></a>9.6. Raster Pixel Accessors and Setters</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsPolygon">ST_PixelAsPolygon</a></span><span class="refpurpose"> — Returns the polygon geometry that bounds the pixel for a particular row and column.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsPolygons">ST_PixelAsPolygons</a></span><span class="refpurpose"> — Returns the polygon geometry that bounds every pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsPoint">ST_PixelAsPoint</a></span><span class="refpurpose"> — 
					Returns a point geometry of the pixel's upper-left corner.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsPoints">ST_PixelAsPoints</a></span><span class="refpurpose"> — 
					Returns a point geometry for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The coordinates of the point geometry are of the pixel's upper-left corner.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsCentroid">ST_PixelAsCentroid</a></span><span class="refpurpose"> — 
					Returns the centroid (point geometry) of the area represented by a pixel.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelAsCentroids">ST_PixelAsCentroids</a></span><span class="refpurpose"> — 
					Returns the centroid (point geometry) for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The point geometry is the centroid of the area represented by a pixel.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Value">ST_Value</a></span><span class="refpurpose"> — Returns the value of a given band in a given columnx, rowy pixel or at a particular geometric point. Band numbers start at 1 and assumed to be 1 if not specified. If <code class="varname">exclude_nodata_value</code> is set to false, then all pixels include <code class="varname">nodata</code> pixels are considered to intersect and return value. If <code class="varname">exclude_nodata_value</code> is not passed in then reads it from metadata of raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_NearestValue">ST_NearestValue</a></span><span class="refpurpose"> — 
					Returns the nearest non-<code class="varname">NODATA</code> value of a given band's pixel specified by a columnx and rowy or a geometric point expressed in the same spatial reference coordinate system as the raster.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Neighborhood">ST_Neighborhood</a></span><span class="refpurpose"> — 
					Returns a 2-D double precision array of the non-<code class="varname">NODATA</code> values around a given band's pixel specified by either a columnX and rowY or a geometric point expressed in the same spatial reference coordinate system as the raster.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetValue">ST_SetValue</a></span><span class="refpurpose"> — Returns modified raster resulting from setting the value of a given band in a given columnx, rowy pixel or the pixels that intersect a particular geometry. Band numbers start at 1 and assumed to be 1 if not specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetValues">ST_SetValues</a></span><span class="refpurpose"> — Returns modified raster resulting from setting the values of a given band.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_DumpValues">ST_DumpValues</a></span><span class="refpurpose"> — 
					Get the values of the specified band as a 2-dimension array.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_PixelOfValue">ST_PixelOfValue</a></span><span class="refpurpose"> — 
					Get the columnx, rowy coordinates of the pixel whose value equals the search value.
				</span></dt></dl></div><div class="refentry" title="ST_PixelAsPolygon"><a name="RT_ST_PixelAsPolygon"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPolygon — Returns the polygon geometry that bounds the pixel for a particular row and column.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PixelAsPolygon</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90032976"></a><h2>Description</h2><p>Returns the polygon geometry that bounds the pixel for a particular row and column.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp90034512"></a><h2>Examples</h2><pre class="programlisting">
-- get raster pixel polygon
SELECT i,j, ST_AsText(ST_PixelAsPolygon(foo.rast, i,j)) As b1pgeom
FROM dummy_rast As foo
	CROSS JOIN generate_series(1,2) As i
	CROSS JOIN generate_series(1,1) As j
WHERE rid=2;

 i | j |                                                    b1pgeom
---+---+-----------------------------------------------------------------------------
 1 | 1 | POLYGON((3427927.75 5793244,3427927.8 5793244,3427927.8 5793243.95,...
 2 | 1 | POLYGON((3427927.8 5793244,3427927.85 5793244,3427927.85 5793243.95, ..
  </pre></div><div class="refsection" title="See Also"><a name="idp90035792"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>,
					<a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>,
					<a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>,
					<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
				</p></div></div><div class="refentry" title="ST_PixelAsPolygons"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelAsPolygons"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPolygons — Returns the polygon geometry that bounds every pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">ST_PixelAsPolygons</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90047184"></a><h2>Description</h2><p>Returns the polygon geometry that bounds every pixel of a raster band along with the value (double precision), the X and the Y raster coordinates (integers) of each pixel.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						ST_PixelAsPolygons returns one polygon geometry for every pixel.  This is different than ST_DumpAsPolygons where each geometry represents one or more pixels with the same pixel value.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						When exclude_nodata_value = TRUE, only those pixels whose values are not NODATA are returned as polygons.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 exclude_nodata_value optional argument was added.</p><p>Changed: 2.1.1 Changed behavior of exclude_nodata_value.</p></div><div class="refsection" title="Examples"><a name="idp90051152"></a><h2>Examples</h2><pre class="programlisting">
-- get raster pixel polygon
SELECT (gv).x, (gv).y, (gv).val, ST_AsText((gv).geom) geom
FROM (SELECT ST_PixelAsPolygons(
                 ST_SetValue(ST_SetValue(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 0.001, -0.001, 0.001, 0.001, 4269),
                                                    '8BUI'::text, 1, 0),
                                         2, 2, 10),
                             1, 1, NULL)
) gv
) foo;

 x | y | val |                geom
---+---+-----------------------------------------------------------------------------
 1 | 1 |     | POLYGON((0 0,0.001 0.001,0.002 0,0.001 -0.001,0 0))
 1 | 2 |   1 | POLYGON((0.001 -0.001,0.002 0,0.003 -0.001,0.002 -0.002,0.001 -0.001))
 2 | 1 |   1 | POLYGON((0.001 0.001,0.002 0.002,0.003 0.001,0.002 0,0.001 0.001))
 2 | 2 |  10 | POLYGON((0.002 0,0.003 0.001,0.004 0,0.003 -0.001,0.002 0))
  </pre></div><div class="refsection" title="See Also"><a name="idp90052432"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>,
					<a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>,
					<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
				</p></div></div><div class="refentry" title="ST_PixelAsPoint"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelAsPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPoint — 
					Returns a point geometry of the pixel's upper-left corner.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PixelAsPoint</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90079440"></a><h2>Description</h2><p>Returns a point geometry of the pixel's upper-left corner.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp90081104"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_PixelAsPoint(rast, 1, 1)) FROM dummy_rast WHERE rid = 1;

   st_astext
----------------
 POINT(0.5 0.5)
				</pre></div><div class="refsection" title="See Also"><a name="idp90082384"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>
				</p></div></div><div class="refentry" title="ST_PixelAsPoints"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelAsPoints"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsPoints — 
					Returns a point geometry for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The coordinates of the point geometry are of the pixel's upper-left corner.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PixelAsPoints</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90096976"></a><h2>Description</h2><p>
					Returns a point geometry for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The coordinates of the point geometry are of the pixel's upper-left corner.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						When exclude_nodata_value = TRUE, only those pixels whose values are not NODATA are returned as points.
					</p></td></tr></table></div><p>Availability: 2.1.0</p><p>Changed: 2.1.1 Changed behavior of exclude_nodata_value.</p></div><div class="refsection" title="Examples"><a name="idp90099792"></a><h2>Examples</h2><pre class="programlisting">
SELECT x, y, val, ST_AsText(geom) FROM (SELECT (ST_PixelAsPoints(rast, 1)).* FROM dummy_rast WHERE rid = 2) foo;

 x | y | val |          st_astext
---+---+-----+------------------------------
 1 | 1 | 253 | POINT(3427927.75 5793244)
 2 | 1 | 254 | POINT(3427927.8 5793244)
 3 | 1 | 253 | POINT(3427927.85 5793244)
 4 | 1 | 254 | POINT(3427927.9 5793244)
 5 | 1 | 254 | POINT(3427927.95 5793244)
 1 | 2 | 253 | POINT(3427927.75 5793243.95)
 2 | 2 | 254 | POINT(3427927.8 5793243.95)
 3 | 2 | 254 | POINT(3427927.85 5793243.95)
 4 | 2 | 253 | POINT(3427927.9 5793243.95)
 5 | 2 | 249 | POINT(3427927.95 5793243.95)
 1 | 3 | 250 | POINT(3427927.75 5793243.9)
 2 | 3 | 254 | POINT(3427927.8 5793243.9)
 3 | 3 | 254 | POINT(3427927.85 5793243.9)
 4 | 3 | 252 | POINT(3427927.9 5793243.9)
 5 | 3 | 249 | POINT(3427927.95 5793243.9)
 1 | 4 | 251 | POINT(3427927.75 5793243.85)
 2 | 4 | 253 | POINT(3427927.8 5793243.85)
 3 | 4 | 254 | POINT(3427927.85 5793243.85)
 4 | 4 | 254 | POINT(3427927.9 5793243.85)
 5 | 4 | 253 | POINT(3427927.95 5793243.85)
 1 | 5 | 252 | POINT(3427927.75 5793243.8)
 2 | 5 | 250 | POINT(3427927.8 5793243.8)
 3 | 5 | 254 | POINT(3427927.85 5793243.8)
 4 | 5 | 254 | POINT(3427927.9 5793243.8)
 5 | 5 | 254 | POINT(3427927.95 5793243.8)
				</pre></div><div class="refsection" title="See Also"><a name="idp90101200"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>
				</p></div></div><div class="refentry" title="ST_PixelAsCentroid"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelAsCentroid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsCentroid — 
					Returns the centroid (point geometry) of the area represented by a pixel.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PixelAsCentroid</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90115536"></a><h2>Description</h2><p>Returns the centroid (point geometry) of the area represented by a pixel.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp90117072"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsText(ST_PixelAsCentroid(rast, 1, 1)) FROM dummy_rast WHERE rid = 1;

  st_astext
--------------
 POINT(1.5 2)
				</pre></div><div class="refsection" title="See Also"><a name="idp90118480"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>,
					<a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a>
				</p></div></div><div class="refentry" title="ST_PixelAsCentroids"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelAsCentroids"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelAsCentroids — 
					Returns the centroid (point geometry) for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The point geometry is the centroid of the area represented by a pixel.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_PixelAsCentroids</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90137296"></a><h2>Description</h2><p>
					Returns the centroid (point geometry) for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.  The point geometry is the centroid of the area represented by a pixel.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						When exclude_nodata_value = TRUE, only those pixels whose values are not NODATA are returned as points.
					</p></td></tr></table></div><p>Availability: 2.1.0</p><p>Changed: 2.1.1 Changed behavior of exclude_nodata_value.</p></div><div class="refsection" title="Examples"><a name="idp90140112"></a><h2>Examples</h2><pre class="programlisting">
SELECT x, y, val, ST_AsText(geom) FROM (SELECT (ST_PixelAsCentroids(rast, 1)).* FROM dummy_rast WHERE rid = 2) foo;
 x | y | val |           st_astext
---+---+-----+--------------------------------
 1 | 1 | 253 | POINT(3427927.775 5793243.975)
 2 | 1 | 254 | POINT(3427927.825 5793243.975)
 3 | 1 | 253 | POINT(3427927.875 5793243.975)
 4 | 1 | 254 | POINT(3427927.925 5793243.975)
 5 | 1 | 254 | POINT(3427927.975 5793243.975)
 1 | 2 | 253 | POINT(3427927.775 5793243.925)
 2 | 2 | 254 | POINT(3427927.825 5793243.925)
 3 | 2 | 254 | POINT(3427927.875 5793243.925)
 4 | 2 | 253 | POINT(3427927.925 5793243.925)
 5 | 2 | 249 | POINT(3427927.975 5793243.925)
 1 | 3 | 250 | POINT(3427927.775 5793243.875)
 2 | 3 | 254 | POINT(3427927.825 5793243.875)
 3 | 3 | 254 | POINT(3427927.875 5793243.875)
 4 | 3 | 252 | POINT(3427927.925 5793243.875)
 5 | 3 | 249 | POINT(3427927.975 5793243.875)
 1 | 4 | 251 | POINT(3427927.775 5793243.825)
 2 | 4 | 253 | POINT(3427927.825 5793243.825)
 3 | 4 | 254 | POINT(3427927.875 5793243.825)
 4 | 4 | 254 | POINT(3427927.925 5793243.825)
 5 | 4 | 253 | POINT(3427927.975 5793243.825)
 1 | 5 | 252 | POINT(3427927.775 5793243.775)
 2 | 5 | 250 | POINT(3427927.825 5793243.775)
 3 | 5 | 254 | POINT(3427927.875 5793243.775)
 4 | 5 | 254 | POINT(3427927.925 5793243.775)
 5 | 5 | 254 | POINT(3427927.975 5793243.775)
				</pre></div><div class="refsection" title="See Also"><a name="idp90141392"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>,
					<a class="xref" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a>,
					<a class="xref" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a>,
					<a class="xref" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a>
				</p></div></div><div class="refentry" title="ST_Value"><div class="refentry.separator"><hr></div><a name="RT_ST_Value"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Value — Returns the value of a given band in a given columnx, rowy pixel or at a particular geometric point. Band numbers start at 1 and assumed to be 1 if not specified. If <code class="varname">exclude_nodata_value</code> is set to false, then all pixels include <code class="varname">nodata</code> pixels are considered to intersect and return value. If <code class="varname">exclude_nodata_value</code> is not passed in then reads it from metadata of raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_Value</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Value</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Value</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Value</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, integer  <var class="pdparam">x</var>, integer  <var class="pdparam">y</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90174544"></a><h2>Description</h2><p>Returns the value of a given band in a given columnx, rowy pixel or at a given geometry point. Band numbers start at 1 and band is assumed to be 1 if not specified.
				If <code class="varname">exclude_nodata_value</code> is set to true, then only non <code class="varname">nodata</code> pixels are considered.  If <code class="varname">exclude_nodata_value</code> is set to false, then all pixels are considered.</p><p>Enhanced: 2.0.0 exclude_nodata_value optional argument was added.</p></div><div class="refsection" title="Examples"><a name="idp90177232"></a><h2>Examples</h2><pre class="programlisting">
-- get raster values at particular postgis geometry points
-- the srid of your geometry should be same as for your raster
SELECT rid, ST_Value(rast, foo.pt_geom) As b1pval, ST_Value(rast, 2, foo.pt_geom) As b2pval
FROM dummy_rast CROSS JOIN (SELECT ST_SetSRID(ST_Point(3427927.77, 5793243.76), 0) As pt_geom) As foo
WHERE rid=2;

 rid | b1pval | b2pval
-----+--------+--------
   2 |    252 |     79


-- general fictitious example using a real table
SELECT rid, ST_Value(rast, 3, sometable.geom) As b3pval
FROM sometable
WHERE ST_Intersects(rast,sometable.geom);
				</pre><pre class="programlisting">
SELECT rid, ST_Value(rast, 1, 1, 1) As b1pval,
    ST_Value(rast, 2, 1, 1) As b2pval, ST_Value(rast, 3, 1, 1) As b3pval
FROM dummy_rast
WHERE rid=2;

 rid | b1pval | b2pval | b3pval
-----+--------+--------+--------
   2 |    253 |     78 |     70
				</pre><pre class="programlisting">
--- Get all values in bands 1,2,3 of each pixel --
SELECT x, y, ST_Value(rast, 1, x, y) As b1val,
	ST_Value(rast, 2, x, y) As b2val, ST_Value(rast, 3, x, y) As b3val
FROM dummy_rast CROSS JOIN
generate_series(1, 1000) As x CROSS JOIN generate_series(1, 1000) As y
WHERE rid =  2 AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast);

 x | y | b1val | b2val | b3val
---+---+-------+-------+-------
 1 | 1 |   253 |    78 |    70
 1 | 2 |   253 |    96 |    80
 1 | 3 |   250 |    99 |    90
 1 | 4 |   251 |    89 |    77
 1 | 5 |   252 |    79 |    62
 2 | 1 |   254 |    98 |    86
 2 | 2 |   254 |   118 |   108
 :
 :
				</pre><pre class="programlisting">
--- Get all values in bands 1,2,3 of each pixel same as above but returning the upper left point point of each pixel --
SELECT ST_AsText(ST_SetSRID(
	ST_Point(ST_UpperLeftX(rast) + ST_ScaleX(rast)*x,
		ST_UpperLeftY(rast) + ST_ScaleY(rast)*y),
		ST_SRID(rast))) As uplpt
    , ST_Value(rast, 1, x, y) As b1val,
	ST_Value(rast, 2, x, y) As b2val, ST_Value(rast, 3, x, y) As b3val
FROM dummy_rast CROSS JOIN
generate_series(1,1000) As x CROSS JOIN generate_series(1,1000) As y
WHERE rid =  2 AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast);

            uplpt            | b1val | b2val | b3val
-----------------------------+-------+-------+-------
 POINT(3427929.25 5793245.5) |   253 |    78 |    70
 POINT(3427929.25 5793247)   |   253 |    96 |    80
 POINT(3427929.25 5793248.5) |   250 |    99 |    90
:
				</pre><pre class="programlisting">
--- Get a polygon formed by union of all pixels
	that fall in a particular value range and intersect particular polygon --
SELECT ST_AsText(ST_Union(pixpolyg)) As shadow
FROM (SELECT ST_Translate(ST_MakeEnvelope(
		ST_UpperLeftX(rast), ST_UpperLeftY(rast),
			ST_UpperLeftX(rast) + ST_ScaleX(rast),
			ST_UpperLeftY(rast) + ST_ScaleY(rast), 0
			), ST_ScaleX(rast)*x, ST_ScaleY(rast)*y
		) As pixpolyg, ST_Value(rast, 2, x, y) As b2val
	FROM dummy_rast CROSS JOIN
generate_series(1,1000) As x CROSS JOIN generate_series(1,1000) As y
WHERE rid =  2
	AND x &lt;= ST_Width(rast) AND y &lt;= ST_Height(rast)) As foo
WHERE
	ST_Intersects(
		pixpolyg,
		ST_GeomFromText('POLYGON((3427928 5793244,3427927.75 5793243.75,3427928 5793243.75,3427928 5793244))',0)
		) AND b2val != 254;


		shadow
------------------------------------------------------------------------------------
 MULTIPOLYGON(((3427928 5793243.9,3427928 5793243.85,3427927.95 5793243.85,3427927.95 5793243.9,
 3427927.95 5793243.95,3427928 5793243.95,3427928.05 5793243.95,3427928.05 5793243.9,3427928 5793243.9)),((3427927.95 5793243.9,3427927.95 579324
3.85,3427927.9 5793243.85,3427927.85 5793243.85,3427927.85 5793243.9,3427927.9 5793243.9,3427927.9 5793243.95,
3427927.95 5793243.95,3427927.95 5793243.9)),((3427927.85 5793243.75,3427927.85 5793243.7,3427927.8 5793243.7,3427927.8 5793243.75
,3427927.8 5793243.8,3427927.8 5793243.85,3427927.85 5793243.85,3427927.85 5793243.8,3427927.85 5793243.75)),
((3427928.05 5793243.75,3427928.05 5793243.7,3427928 5793243.7,3427927.95 5793243.7,3427927.95 5793243.75,3427927.95 5793243.8,3427
927.95 5793243.85,3427928 5793243.85,3427928 5793243.8,3427928.05 5793243.8,
3427928.05 5793243.75)),((3427927.95 5793243.75,3427927.95 5793243.7,3427927.9 5793243.7,3427927.85 5793243.7,
3427927.85 5793243.75,3427927.85 5793243.8,3427927.85 5793243.85,3427927.9 5793243.85,
3427927.95 5793243.85,3427927.95 5793243.8,3427927.95 5793243.75)))
				</pre><pre class="programlisting">
--- Checking all the pixels of a large raster tile can take a long time.
--- You can dramatically improve speed at some lose of precision by orders of magnitude
--  by sampling pixels using the step optional parameter of generate_series.
--  This next example does the same as previous but by checking 1 for every 4 (2x2) pixels and putting in the last checked
--  putting in the checked pixel as the value for subsequent 4

SELECT ST_AsText(ST_Union(pixpolyg)) As shadow
FROM (SELECT ST_Translate(ST_MakeEnvelope(
		ST_UpperLeftX(rast), ST_UpperLeftY(rast),
			ST_UpperLeftX(rast) + ST_ScaleX(rast)*2,
			ST_UpperLeftY(rast) + ST_ScaleY(rast)*2, 0
			), ST_ScaleX(rast)*x, ST_ScaleY(rast)*y
		) As pixpolyg, ST_Value(rast, 2, x, y) As b2val
	FROM dummy_rast CROSS JOIN
generate_series(1,1000,2) As x CROSS JOIN generate_series(1,1000,2) As y
WHERE rid =  2
	AND x &lt;= ST_Width(rast)  AND y &lt;= ST_Height(rast)  ) As foo
WHERE
	ST_Intersects(
		pixpolyg,
		ST_GeomFromText('POLYGON((3427928 5793244,3427927.75 5793243.75,3427928 5793243.75,3427928 5793244))',0)
		) AND b2val != 254;

		shadow
------------------------------------------------------------------------------------
 MULTIPOLYGON(((3427927.9 5793243.85,3427927.8 5793243.85,3427927.8 5793243.95,
 3427927.9 5793243.95,3427928 5793243.95,3427928.1 5793243.95,3427928.1 5793243.85,3427928 5793243.85,3427927.9 5793243.85)),
 ((3427927.9 5793243.65,3427927.8 5793243.65,3427927.8 5793243.75,3427927.8 5793243.85,3427927.9 5793243.85,
 3427928 5793243.85,3427928 5793243.75,3427928.1 5793243.75,3427928.1 5793243.65,3427928 5793243.65,3427927.9 5793243.65)))
				</pre></div><div class="refsection" title="See Also"><a name="idp90181072"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>,
					<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>,
					<a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a>,
					<a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>,
					<a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>,
					<a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>,
					<a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a>,
					<a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>,
					<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
					<a class="xref" href="#ST_Point" title="ST_Point">ST_Point</a>,
					<a class="xref" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>,
					<a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
					<a class="xref" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>
				</p></div></div><div class="refentry" title="ST_NearestValue"><div class="refentry.separator"><hr></div><a name="RT_ST_NearestValue"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NearestValue — 
					Returns the nearest non-<code class="varname">NODATA</code> value of a given band's pixel specified by a columnx and rowy or a geometric point expressed in the same spatial reference coordinate system as the raster.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_NearestValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_NearestValue</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_NearestValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_NearestValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90220624"></a><h2>Description</h2><p>
					Returns the nearest non-<code class="varname">NODATA</code> value of a given band in a given columnx, rowy pixel or at a specific geometric point.  If the columnx, rowy pixel or the pixel at the specified geometric point is <code class="varname">NODATA</code>, the function will find the nearest pixel to the columnx, rowy pixel or geometric point whose value is not <code class="varname">NODATA</code>.
				</p><p>
					Band numbers start at 1 and <code class="varname">bandnum</code> is assumed to be 1 if not specified. If <code class="varname">exclude_nodata_value</code> is set to false, then all pixels include <code class="varname">nodata</code> pixels are considered to intersect and return value. If <code class="varname">exclude_nodata_value</code> is not passed in then reads it from metadata of raster.
				</p><p>Availability: 2.1.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						ST_NearestValue is a drop-in replacement for ST_Value.
					</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp90226128"></a><h2>Examples</h2><pre class="programlisting">
-- pixel 2x2 has value
SELECT
	ST_Value(rast, 2, 2) AS value,
	ST_NearestValue(rast, 2, 2) AS nearestvalue
FROM (
	SELECT
		ST_SetValue(
			ST_SetValue(
				ST_SetValue(
					ST_SetValue(
						ST_SetValue(
							ST_AddBand(
								ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
								'8BUI'::text, 1, 0
							),
							1, 1, 0.
						),
						2, 3, 0.
					),
					3, 5, 0.
				),
				4, 2, 0.
			),
			5, 4, 0.
		) AS rast
) AS foo

 value | nearestvalue
-------+--------------
     1 |            1
				</pre><pre class="programlisting">
-- pixel 2x3 is NODATA
SELECT
	ST_Value(rast, 2, 3) AS value,
	ST_NearestValue(rast, 2, 3) AS nearestvalue
FROM (
	SELECT
		ST_SetValue(
			ST_SetValue(
				ST_SetValue(
					ST_SetValue(
						ST_SetValue(
							ST_AddBand(
								ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
								'8BUI'::text, 1, 0
							),
							1, 1, 0.
						),
						2, 3, 0.
					),
					3, 5, 0.
				),
				4, 2, 0.
			),
			5, 4, 0.
		) AS rast
) AS foo

 value | nearestvalue
-------+--------------
       |            1
				</pre></div><div class="refsection" title="See Also"><a name="idp90227920"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a>,
					<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>
				</p></div></div><div class="refentry" title="ST_Neighborhood"><div class="refentry.separator"><hr></div><a name="RT_ST_Neighborhood"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Neighborhood — 
					Returns a 2-D double precision array of the non-<code class="varname">NODATA</code> values around a given band's pixel specified by either a columnX and rowY or a geometric point expressed in the same spatial reference coordinate system as the raster.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision[][] <b class="fsfunc">ST_Neighborhood</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnX</var>, integer  <var class="pdparam">rowY</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <b class="fsfunc">ST_Neighborhood</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnX</var>, integer  <var class="pdparam">rowY</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <b class="fsfunc">ST_Neighborhood</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">pt</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">double precision[][] <b class="fsfunc">ST_Neighborhood</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">pt</var>, integer  <var class="pdparam">distanceX</var>, integer  <var class="pdparam">distanceY</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90275152"></a><h2>Description</h2><p>
					Returns a 2-D double precision array of the non-<code class="varname">NODATA</code> values around a given band's pixel specified by either a columnX and rowY or a geometric point expressed in the same spatial reference coordinate system as the raster.  The <code class="varname">distanceX</code> and <code class="varname">distanceY</code> parameters define the number of pixels around the specified pixel in the X and Y axes, e.g. I want all values within 3 pixel distance along the X axis and 2 pixel distance along the Y axis around my pixel of interest.  The center value of the 2-D array will be the value at the pixel specified by the columnX and rowY or the geometric point.
				</p><p>
					Band numbers start at 1 and <code class="varname">bandnum</code> is assumed to be 1 if not specified. If <code class="varname">exclude_nodata_value</code> is set to false, then all pixels include <code class="varname">nodata</code> pixels are considered to intersect and return value. If <code class="varname">exclude_nodata_value</code> is not passed in then reads it from metadata of raster.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The number of elements along each axis of the returning 2-D array is 2 * (<code class="varname">distanceX</code>|<code class="varname">distanceY</code>) + 1.  So for a <code class="varname">distanceX</code> and <code class="varname">distanceY</code> of 1, the returning array will be 3x3.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The 2-D array output can be passed to any of the raster processing builtin functions, e.g. ST_Min4ma, ST_Sum4ma, ST_Mean4ma.
					</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp90287056"></a><h2>Examples</h2><pre class="programlisting">
-- pixel 2x2 has value
SELECT
	ST_Neighborhood(rast, 2, 2, 1, 1)
FROM (
	SELECT
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
				'8BUI'::text, 1, 0
			),
			1, 1, 1, ARRAY[
				[0, 1, 1, 1, 1],
				[1, 1, 1, 0, 1],
				[1, 0, 1, 1, 1],
				[1, 1, 1, 1, 0],
				[1, 1, 0, 1, 1]
			]::double precision[],
			1
		) AS rast
) AS foo

         st_neighborhood
---------------------------------
 {{NULL,1,1},{1,1,NULL},{1,1,1}}
				</pre><pre class="programlisting">
-- pixel 2x3 is NODATA
SELECT
	ST_Neighborhood(rast, 2, 3, 1, 1)
FROM (
	SELECT
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
				'8BUI'::text, 1, 0
			),
			1, 1, 1, ARRAY[
				[0, 1, 1, 1, 1],
				[1, 1, 1, 0, 1],
				[1, 0, 1, 1, 1],
				[1, 1, 1, 1, 0],
				[1, 1, 0, 1, 1]
			]::double precision[],
			1
		) AS rast
) AS foo

       st_neighborhood
------------------------------
 {{1,1,1},{1,NULL,1},{1,1,1}}
				</pre><pre class="programlisting">
-- pixel 3x3 has value
-- exclude_nodata_value = FALSE
SELECT
	ST_Neighborhood(rast, 3, 3, 1, 1, false)
FROM (
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
				'8BUI'::text, 1, 0
			),
			1, 1, 1, ARRAY[
				[0, 1, 1, 1, 1],
				[1, 1, 1, 0, 1],
				[1, 0, 1, 1, 1],
				[1, 1, 1, 1, 0],
				[1, 1, 0, 1, 1]
			]::double precision[],
			1
		) AS rast
) AS foo

      st_neighborhood
---------------------------
 {{1,0,1},{1,1,1},{0,1,1}}
				</pre></div><div class="refsection" title="See Also"><a name="idp90293584"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_SetValue"><div class="refentry.separator"><hr></div><a name="RT_ST_SetValue"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetValue — Returns modified raster resulting from setting the value of a given band in a given columnx, rowy pixel or the pixels that intersect a particular geometry. Band numbers start at 1 and assumed to be 1 if not specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValue</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">bandnum</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision  <var class="pdparam">newvalue</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90321616"></a><h2>Description</h2><p>Returns modified raster resulting from setting the specified pixels' values to new value for the designed band given the raster's row and column or a geometry. If no band is specified, then band 1 is assumed.
				</p><p>Enhanced: 2.1.0 Geometry variant of ST_SetValue() now supports any geometry type, not just point. The geometry variant is a wrapper around the geomval[] variant of ST_SetValues()</p></div><div class="refsection" title="Examples"><a name="idp90323152"></a><h2>Examples</h2><pre class="programlisting">
				-- Geometry example
SELECT (foo.geomval).val, ST_AsText(ST_Union((foo.geomval).geom))
FROM (SELECT ST_DumpAsPolygons(
		ST_SetValue(rast,1,
				ST_Point(3427927.75, 5793243.95),
				50)
			) As geomval
FROM dummy_rast
where rid = 2) As foo
WHERE (foo.geomval).val &lt; 250
GROUP BY (foo.geomval).val;

 val |                                                     st_astext
-----+-------------------------------------------------------------------
  50 | POLYGON((3427927.75 5793244,3427927.75 5793243.95,3427927.8 579324 ...
 249 | POLYGON((3427927.95 5793243.95,3427927.95 5793243.85,3427928 57932 ...

				</pre><pre class="programlisting">
-- Store the changed raster --
	UPDATE dummy_rast SET rast = ST_SetValue(rast,1, ST_Point(3427927.75, 5793243.95),100)
		WHERE rid = 2   ;

				</pre></div><div class="refsection" title="See Also"><a name="idp90324944"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>, <a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a></p></div></div><div class="refentry" title="ST_SetValues"><div class="refentry.separator"><hr></div><a name="RT_ST_SetValues"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetValues — Returns modified raster resulting from setting the values of a given band.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetValues</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision[][]  <var class="pdparam">newvalueset</var>, boolean[][]  <var class="pdparam">noset=NULL</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValues</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, double precision[][]  <var class="pdparam">newvalueset</var>, double precision  <var class="pdparam">nosetvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValues</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">newvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValues</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">columnx</var>, integer  <var class="pdparam">rowy</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">newvalue</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetValues</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geomval[]  <var class="pdparam">geomvalset</var>, boolean  <var class="pdparam">keepnodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90377552"></a><h2>Description</h2><p>
					Returns modified raster resulting from setting specified pixels to new value(s) for the designated band.
				</p><p>
					If <code class="varname">keepnodata</code> is TRUE, those pixels whose values are NODATA will not be set with the corresponding value in <code class="varname">newvalueset</code>.
				</p><p>
					For Variant 1, the specific pixels to be set are determined by the <code class="varname">columnx</code>, <code class="varname">rowy</code> pixel coordinates and the dimensions of the <code class="varname">newvalueset</code> array. <code class="varname">noset</code> can be used to prevent pixels with values present in <code class="varname">newvalueset</code> from being set (due to PostgreSQL not permitting ragged/jagged arrays). See example Variant 1.
				</p><p>
					Variant 2 is like Variant 1 but with a simple double precision <code class="varname">nosetvalue</code> instead of a boolean <code class="varname">noset</code> array. Elements in <code class="varname">newvalueset</code> with the <code class="varname">nosetvalue</code> value with be skipped.  See example Variant 2.
				</p><p>
					For Variant 3, the specific pixels to be set are determined by the <code class="varname">columnx</code>, <code class="varname">rowy</code> pixel coordinates, <code class="varname">width</code> and <code class="varname">height</code>. See example Variant 3.
				</p><p>
					Variant 4 is the same as Variant 3 with the exception that it assumes that the first band's pixels of <code class="varname">rast</code> will be set.
				</p><p>
					For Variant 5, an array of <a class="xref" href="#geomval" title="geomval">geomval</a> is used to determine the specific pixels to be set.  If all the geometries in the array are of type POINT or MULTIPOINT, the function uses a shortcut where the longitude and latitude of each point is used to set a pixel directly.  Otherwise, the geometries are converted to rasters and then iterated through in one pass. See example Variant 5.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp90388176"></a><h2>Examples: Variant 1</h2><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 2, 2, ARRAY[[9, 9], [9, 9]]::double precision[][]
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
				</pre><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 9 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 1, 1, ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][]
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   9
 1 | 2 |   9
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9
				</pre><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 1, 1,
				ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][],
				ARRAY[[false], [true]]::boolean[][]
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   9
 1 | 2 |   1
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9
				</pre><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
|   | 1 | 1 |          |   | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 9 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_SetValue(
				ST_AddBand(
					ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
					1, '8BUI', 1, 0
				),
				1, 1, 1, NULL
			),
			1, 1, 1,
				ARRAY[[9, 9, 9], [9, NULL, 9], [9, 9, 9]]::double precision[][],
				ARRAY[[false], [true]]::boolean[][],
				TRUE
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |
 1 | 2 |   1
 1 | 3 |   9
 2 | 1 |   9
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   9
 3 | 2 |   9
 3 | 3 |   9
				</pre></div><div class="refsection" title="Examples: Variant 2"><a name="idp90415696"></a><h2>Examples: Variant 2</h2><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 1, 1, ARRAY[[-1, -1, -1], [-1, 9, 9], [-1, 9, 9]]::double precision[][], -1
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
				</pre><pre class="programlisting">
/*
This example is like the previous one.  Instead of nosetvalue = -1, nosetvalue = NULL

The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 1, 1, ARRAY[[NULL, NULL, NULL], [NULL, 9, 9], [NULL, 9, 9]]::double precision[][], NULL::double precision
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
				</pre></div><div class="refsection" title="Examples: Variant 3"><a name="idp90417488"></a><h2>Examples: Variant 3</h2><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |    =&gt;    | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
				1, '8BUI', 1, 0
			),
			1, 2, 2, 2, 2, 9
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |   9
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
				</pre><pre class="programlisting">
/*
The ST_SetValues() does the following...

+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 1 | 1 |
+ - + - + - +          + - + - + - +
| 1 |   | 1 |    =&gt;    | 1 |   | 9 |
+ - + - + - +          + - + - + - +
| 1 | 1 | 1 |          | 1 | 9 | 9 |
+ - + - + - +          + - + - + - +
*/
SELECT
	(poly).x,
	(poly).y,
	(poly).val
FROM (
SELECT
	ST_PixelAsPolygons(
		ST_SetValues(
			ST_SetValue(
				ST_AddBand(
					ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0),
					1, '8BUI', 1, 0
				),
				1, 2, 2, NULL
			),
			1, 2, 2, 2, 2, 9, TRUE
		)
	) AS poly
) foo
ORDER BY 1, 2;

 x | y | val
---+---+-----
 1 | 1 |   1
 1 | 2 |   1
 1 | 3 |   1
 2 | 1 |   1
 2 | 2 |
 2 | 3 |   9
 3 | 1 |   1
 3 | 2 |   9
 3 | 3 |   9
				</pre></div><div class="refsection" title="Examples: Variant 5"><a name="idp90419280"></a><h2>Examples: Variant 5</h2><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
	SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
	SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
	SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
	SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
	rid, gid, ST_DumpValues(ST_SetValue(rast, 1, geom, gid))
FROM foo t1
CROSS JOIN bar t2
ORDER BY rid, gid;

 rid | gid |                                                                st_dumpvalues
-----+-----+---------------------------------------------------------------------------------------------------------------------------------------------
   1 |   1 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,1,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   2 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   3 | (1,"{{3,3,3,3,3},{3,NULL,NULL,NULL,NULL},{3,NULL,NULL,NULL,NULL},{3,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL}}")
   1 |   4 | (1,"{{4,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,NULL},{NULL,NULL,NULL,NULL,4}}")
(4 rows)
				</pre><p>The following shows that geomvals later in the array can overwrite prior geomvals</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
	SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
	SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
	SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
	SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
	t1.rid, t2.gid, t3.gid, ST_DumpValues(ST_SetValues(rast, 1, ARRAY[ROW(t2.geom, t2.gid), ROW(t3.geom, t3.gid)]::geomval[]))
FROM foo t1
CROSS JOIN bar t2
CROSS JOIN bar t3
WHERE t2.gid = 1
	AND t3.gid = 2
ORDER BY t1.rid, t2.gid, t3.gid;

 rid | gid | gid |                                                    st_dumpvalues
-----+-----+-----+---------------------------------------------------------------------------------------------------------------------
   1 |   1 |   2 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
				</pre><p>This example is the opposite of the prior example</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0) AS rast
), bar AS (
	SELECT 1 AS gid, 'SRID=0;POINT(2.5 -2.5)'::geometry geom UNION ALL
	SELECT 2 AS gid, 'SRID=0;POLYGON((1 -1, 4 -1, 4 -4, 1 -4, 1 -1))'::geometry geom UNION ALL
	SELECT 3 AS gid, 'SRID=0;POLYGON((0 0, 5 0, 5 -1, 1 -1, 1 -4, 0 -4, 0 0))'::geometry geom UNION ALL
	SELECT 4 AS gid, 'SRID=0;MULTIPOINT(0 0, 4 4, 4 -4)'::geometry
)
SELECT
	t1.rid, t2.gid, t3.gid, ST_DumpValues(ST_SetValues(rast, 1, ARRAY[ROW(t2.geom, t2.gid), ROW(t3.geom, t3.gid)]::geomval[]))
FROM foo t1
CROSS JOIN bar t2
CROSS JOIN bar t3
WHERE t2.gid = 2
	AND t3.gid = 1
ORDER BY t1.rid, t2.gid, t3.gid;

 rid | gid | gid |                                                    st_dumpvalues
-----+-----+-----+---------------------------------------------------------------------------------------------------------------------
   1 |   2 |   1 | (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,2,2,2,NULL},{NULL,2,1,2,NULL},{NULL,2,2,2,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp90422352"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>,
					<a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>,
					<a class="xref" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a>
				</p></div></div><div class="refentry" title="ST_DumpValues"><div class="refentry.separator"><hr></div><a name="RT_ST_DumpValues"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DumpValues — 
					Get the values of the specified band as a 2-dimension array.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">ST_DumpValues</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							integer[]  <var class="pdparam">nband=NULL</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p><p><code class="funcdef">double precision[][] <b class="fsfunc">ST_DumpValues</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							integer  <var class="pdparam">nband</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90437328"></a><h2>Description</h2><p>
					Get the values of the specified band as a 2-dimension array (first index is row, second is column). If <code class="varname">nband</code> is NULL or not provided, all raster bands are processed.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp90439248"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '32BF', 3, -9999), 3, '16BSI', 0, 0) AS rast
)
SELECT
	(ST_DumpValues(rast)).*
FROM foo;

 nband |                       valarray
-------+------------------------------------------------------
     1 | {{1,1,1},{1,1,1},{1,1,1}}
     2 | {{3,3,3},{3,3,3},{3,3,3}}
     3 | {{NULL,NULL,NULL},{NULL,NULL,NULL},{NULL,NULL,NULL}}
(3 rows)
				</pre><pre class="programlisting">
WITH foo AS (
	SELECT ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 2, '32BF', 3, -9999), 3, '16BSI', 0, 0) AS rast
)
SELECT
	(ST_DumpValues(rast, ARRAY[3, 1])).*
FROM foo;

 nband |                       valarray
-------+------------------------------------------------------
     3 | {{NULL,NULL,NULL},{NULL,NULL,NULL},{NULL,NULL,NULL}}
     1 | {{1,1,1},{1,1,1},{1,1,1}}
(2 rows)
				</pre><pre class="programlisting">
WITH foo AS (
	SELECT ST_SetValue(ST_AddBand(ST_MakeEmptyRaster(3, 3, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 1, 0), 1, 2, 5) AS rast
)
SELECT
	(ST_DumpValues(rast, 1))[2][1]
FROM foo;

 st_dumpvalues
---------------
             5
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp90441680"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>,
					<a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>,
					<a class="xref" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a>
				</p></div></div><div class="refentry" title="ST_PixelOfValue"><div class="refentry.separator"><hr></div><a name="RT_ST_PixelOfValue"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_PixelOfValue — 
					Get the columnx, rowy coordinates of the pixel whose value equals the search value.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">ST_PixelOfValue</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							integer  <var class="pdparam">nband</var>
						, 
							double precision[]  <var class="pdparam">search</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p><p><code class="funcdef">setof record <b class="fsfunc">ST_PixelOfValue</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							double precision[]  <var class="pdparam">search</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p><p><code class="funcdef">setof record <b class="fsfunc">ST_PixelOfValue</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							integer  <var class="pdparam">nband</var>
						, 
							double precision  <var class="pdparam">search</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p><p><code class="funcdef">setof record <b class="fsfunc">ST_PixelOfValue</b>(</code>
							raster  <var class="pdparam">rast</var>
						, 
							double precision  <var class="pdparam">search</var>
						, 
							boolean  <var class="pdparam">exclude_nodata_value=true</var>
						<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90498000"></a><h2>Description</h2><p>
					Get the columnx, rowy coordinates of the pixel whose value equals the search value. If no band is specified, then band 1 is assumed.
				</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp90499536"></a><h2>Examples</h2><pre class="programlisting">
SELECT
	(pixels).*
FROM (
	SELECT
		ST_PixelOfValue(
			ST_SetValue(
				ST_SetValue(
					ST_SetValue(
						ST_SetValue(
							ST_SetValue(
								ST_AddBand(
									ST_MakeEmptyRaster(5, 5, -2, 2, 1, -1, 0, 0, 0),
									'8BUI'::text, 1, 0
								),
								1, 1, 0
							),
							2, 3, 0
						),
						3, 5, 0
					),
					4, 2, 0
				),
				5, 4, 255
			)
		, 1, ARRAY[1, 255]) AS pixels
) AS foo

 val | x | y
-----+---+---
   1 | 1 | 2
   1 | 1 | 3
   1 | 1 | 4
   1 | 1 | 5
   1 | 2 | 1
   1 | 2 | 2
   1 | 2 | 4
   1 | 2 | 5
   1 | 3 | 1
   1 | 3 | 2
   1 | 3 | 3
   1 | 3 | 4
   1 | 4 | 1
   1 | 4 | 3
   1 | 4 | 4
   1 | 4 | 5
   1 | 5 | 1
   1 | 5 | 2
   1 | 5 | 3
 255 | 5 | 4
   1 | 5 | 5
				</pre></div></div></div><div class="sect1" title="9.7. Raster Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Editors"></a>9.7. Raster Editors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_SetGeoReference">ST_SetGeoReference</a></span><span class="refpurpose"> — Set Georeference 6 georeference parameters  in a single call. Numbers should be separated by white space.  Accepts inputs in GDAL or ESRI format.  Default is GDAL.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetRotation">ST_SetRotation</a></span><span class="refpurpose"> — Set the rotation of the raster in radian.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetScale">ST_SetScale</a></span><span class="refpurpose"> — Sets the X and Y size of pixels in units of coordinate reference system. Number units/pixel width/height.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetSkew">ST_SetSkew</a></span><span class="refpurpose"> — Sets the georeference X and Y skew (or rotation parameter).  If only one is passed in, sets X and Y to the same value.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetSRID">ST_SetSRID</a></span><span class="refpurpose"> — Sets the SRID of a raster to a particular integer srid defined in the spatial_ref_sys table.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetUpperLeft">ST_SetUpperLeft</a></span><span class="refpurpose"> — Sets the value of the upper left corner of the pixel to projected X and Y coordinates.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Resample">ST_Resample</a></span><span class="refpurpose"> — 
					Resample a raster using a specified resampling algorithm, new dimensions, an arbitrary grid corner and a set of raster georeferencing attributes defined or borrowed from another raster.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Rescale">ST_Rescale</a></span><span class="refpurpose"> — Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Reskew">ST_Reskew</a></span><span class="refpurpose"> — Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SnapToGrid">ST_SnapToGrid</a></span><span class="refpurpose"> — Resample a raster by snapping it to a grid. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Resize">ST_Resize</a></span><span class="refpurpose"> — Resize a raster to a new width/height</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Transform">ST_Transform</a></span><span class="refpurpose"> — Reprojects a raster in a known spatial reference system to another known spatial reference system using specified resampling algorithm. Options are NearestNeighbor, Bilinear, Cubic, CubicSpline, Lanczos defaulting to NearestNeighbor.</span></dt></dl></div><div class="refentry" title="ST_SetGeoReference"><a name="RT_ST_SetGeoReference"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetGeoReference — Set Georeference 6 georeference parameters  in a single call. Numbers should be separated by white space.  Accepts inputs in GDAL or ESRI format.  Default is GDAL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetGeoReference</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">georefcoords</var>, text  <var class="pdparam">format=GDAL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetGeoReference</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">upperleftx</var>, double precision  <var class="pdparam">upperlefty</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, double precision  <var class="pdparam">skewx</var>, double precision  <var class="pdparam">skewy</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90525264"></a><h2>Description</h2><p>Set Georeference 6 georeference parameters in a single call.  Accepts inputs in 'GDAL' or 'ESRI' format.  Default is GDAL. If 6 coordinates are not provided will return null.</p><p>Difference between format representations is as follows:</p><p><code class="varname">GDAL</code>:
</p><pre class="programlisting">scalex skewy skewx scaley upperleftx upperlefty</pre><p><code class="varname">ESRI</code>:
</p><pre class="programlisting">scalex skewy skewx scaley upperleftx + scalex*0.5 upperlefty + scaley*0.5</pre><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						If the raster has out-db bands, changing the georeference may result in incorrect access of the band's externally stored data.
					</p></td></tr></table></div><p>Enhanced: 2.1.0 Addition of ST_SetGeoReference(raster, double precision, ...) variant</p></div><div class="refsection" title="Examples"><a name="idp90530128"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0) AS rast
)
SELECT
	0 AS rid, (ST_Metadata(rast)).*
FROM foo
UNION ALL
SELECT
	1, (ST_Metadata(ST_SetGeoReference(rast, '10 0 0 -10 0.1 0.1', 'GDAL'))).*
FROM foo
UNION ALL
SELECT
	2, (ST_Metadata(ST_SetGeoReference(rast, '10 0 0 -10 5.1 -4.9', 'ESRI'))).*
FROM foo
UNION ALL
SELECT
	3, (ST_Metadata(ST_SetGeoReference(rast, 1, 1, 10, -10, 0.001, 0.001))).*
FROM foo

 rid |     upperleftx     |     upperlefty     | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+--------------------+--------------------+-------+--------+--------+--------+-------+-------+------+----------
   0 |                  0 |                  0 |     5 |      5 |      1 |     -1 |     0 |     0 |    0 |        0
   1 |                0.1 |                0.1 |     5 |      5 |     10 |    -10 |     0 |     0 |    0 |        0
   2 | 0.0999999999999996 | 0.0999999999999996 |     5 |      5 |     10 |    -10 |     0 |     0 |    0 |        0
   3 |                  1 |                  1 |     5 |      5 |     10 |    -10 | 0.001 | 0.001 |    0 |        0
				</pre></div><div class="refsection" title="See Also"><a name="idp90531408"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" title="ST_SetRotation"><div class="refentry.separator"><hr></div><a name="RT_ST_SetRotation"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetRotation — Set the rotation of the raster in radian.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_SetRotation</b>(</code>raster <var class="pdparam">rast</var>, float8 <var class="pdparam">rotation</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90544080"></a><h2>Description</h2><p>Uniformly rotate the raster. Rotation is in radian. Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a> for more details.</p></div><div class="refsection" title="Examples"><a name="idp90545744"></a><h2>Examples</h2><pre class="programlisting">SELECT
  ST_ScaleX(rast1), ST_ScaleY(rast1), ST_SkewX(rast1), ST_SkewY(rast1),
  ST_ScaleX(rast2), ST_ScaleY(rast2), ST_SkewX(rast2), ST_SkewY(rast2)
FROM (
  SELECT ST_SetRotation(rast, 15) AS rast1, rast as rast2 FROM dummy_rast
) AS foo;
      st_scalex      |      st_scaley      |      st_skewx      |      st_skewy      | st_scalex | st_scaley | st_skewx | st_skewy
---------------------+---------------------+--------------------+--------------------+-----------+-----------+----------+----------
   -1.51937582571764 |   -2.27906373857646 |   1.95086352047135 |   1.30057568031423 |         2 |         3 |        0 |        0
 -0.0379843956429411 | -0.0379843956429411 | 0.0325143920078558 | 0.0325143920078558 |      0.05 |     -0.05 |        0 |        0
                </pre></div><div class="refsection" title="See Also"><a name="idp90551504"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Rotation" title="ST_Rotation">ST_Rotation</a>, <a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" title="ST_SetScale"><div class="refentry.separator"><hr></div><a name="RT_ST_SetScale"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetScale — Sets the X and Y size of pixels in units of coordinate reference system. Number units/pixel width/height.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetScale</b>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">xy</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetScale</b>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">x</var>, float8  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90568400"></a><h2>Description</h2><p>Sets the X and Y size of pixels in units of coordinate reference system. Number units/pixel width/height.  If
				only one unit passed in, assumed X and Y are the same number.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_SetScale is different from <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> in that ST_SetScale do not resample the raster to match the raster extent. It only changes the metadata (or georeference) of the raster to correct an originally mis-specified scaling. ST_Rescale results in a raster having different width and height computed to fit the geographic extent of the input raster. ST_SetScale do not modify the width, nor the height of the raster.</p></td></tr></table></div><p>Changed: 2.0.0 In WKTRaster versions this was called ST_SetPixelSize.  This was changed in 2.0.0.</p></div><div class="refsection" title="Examples"><a name="idp90570832"></a><h2>Examples</h2><pre class="programlisting">UPDATE dummy_rast
	SET rast = ST_SetScale(rast, 1.5)
WHERE rid = 2;

SELECT ST_ScaleX(rast) As pixx, ST_ScaleY(rast) As pixy, Box3D(rast) As newbox
FROM dummy_rast
WHERE rid = 2;

 pixx | pixy |                    newbox
------+------+----------------------------------------------
  1.5 |  1.5 | BOX(3427927.75 5793244 0, 3427935.25 5793251.5 0)
				</pre><pre class="programlisting">UPDATE dummy_rast
	SET rast = ST_SetScale(rast, 1.5, 0.55)
WHERE rid = 2;

SELECT ST_ScaleX(rast) As pixx, ST_ScaleY(rast) As pixy, Box3D(rast) As newbox
FROM dummy_rast
WHERE rid = 2;

 pixx | pixy |                   newbox
------+------+--------------------------------------------
  1.5 | 0.55 | BOX(3427927.75 5793244 0,3427935.25 5793247 0)
				</pre></div><div class="refsection" title="See Also"><a name="idp90572752"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>, <a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>, <a class="xref" href="#RT_Box3D" title="Box3D">Box3D</a></p></div></div><div class="refentry" title="ST_SetSkew"><div class="refentry.separator"><hr></div><a name="RT_ST_SetSkew"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetSkew — Sets the georeference X and Y skew (or rotation parameter).  If only one is passed in, sets X and Y to the same value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetSkew</b>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">skewxy</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetSkew</b>(</code>raster  <var class="pdparam">rast</var>, float8  <var class="pdparam">skewx</var>, float8  <var class="pdparam">skewy</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90584912"></a><h2>Description</h2><p>Sets the georeference X and Y skew (or rotation parameter).  If only one is passed in, sets X and Y to the same value.  Refer to <a class="ulink" href="http://en.wikipedia.org/wiki/World_file" target="_top">World File</a>
				for more details.</p></div><div class="refsection" title="Examples"><a name="idp90586576"></a><h2>Examples</h2><pre class="programlisting">
-- Example 1
UPDATE dummy_rast SET rast = ST_SetSkew(rast,1,2) WHERE rid = 1;
SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast WHERE rid = 1;

rid | skewx | skewy |    georef
----+-------+-------+--------------
  1 |     1 |     2 | 2.0000000000
                    : 2.0000000000
                    : 1.0000000000
                    : 3.0000000000
                    : 0.5000000000
                    : 0.5000000000

				</pre><pre class="programlisting">
-- Example 2 set both to same number:
UPDATE dummy_rast SET rast = ST_SetSkew(rast,0) WHERE rid = 1;
SELECT rid, ST_SkewX(rast) As skewx, ST_SkewY(rast) As skewy,
    ST_GeoReference(rast) as georef
FROM dummy_rast WHERE rid = 1;

 rid | skewx | skewy |    georef
-----+-------+-------+--------------
   1 |     0 |     0 | 2.0000000000
                     : 0.0000000000
                     : 0.0000000000
                     : 3.0000000000
                     : 0.5000000000
                     : 0.5000000000
				</pre></div><div class="refsection" title="See Also"><a name="idp90588752"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>, <a class="xref" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a></p></div></div><div class="refentry" title="ST_SetSRID"><div class="refentry.separator"><hr></div><a name="RT_ST_SetSRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetSRID — Sets the SRID of a raster to a particular integer srid defined in the spatial_ref_sys table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetSRID</b>(</code>raster 
				<var class="pdparam">rast</var>, integer 
				<var class="pdparam">srid</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90596944"></a><h2>Description</h2><p>Sets the SRID on a raster to a particular integer value.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function does not transform the raster in any way -
			  it simply sets meta data defining the spatial ref of the coordinate reference system that it's currently in.
			  Useful for transformations later.
			  </p></td></tr></table></div></div><div class="refsection" title="See Also"><a name="idp90598864"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_SetUpperLeft"><div class="refentry.separator"><hr></div><a name="RT_ST_SetUpperLeft"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetUpperLeft — Sets the value of the upper left corner of the pixel to projected X and Y coordinates.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetUpperLeft</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">x</var>, double precision  <var class="pdparam">y</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90607312"></a><h2>Description</h2><p>Set the value of the upper left corner of raster to the projected X coordinates</p></div><div class="refsection" title="Examples"><a name="idp90608464"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_SetUpperLeft(rast,-71.01,42.37)
FROM dummy_rast
WHERE rid = 2;
					</pre></div><div class="refsection" title="See Also"><a name="idp90609744"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" title="ST_Resample"><div class="refentry.separator"><hr></div><a name="RT_ST_Resample"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Resample — 
					Resample a raster using a specified resampling algorithm, new dimensions, an arbitrary grid corner and a set of raster georeferencing attributes defined or borrowed from another raster.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Resample</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Resample</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalex=0</var>, double precision  <var class="pdparam">scaley=0</var>, double precision  <var class="pdparam">gridx=NULL</var>, double precision  <var class="pdparam">gridy=NULL</var>, double precision  <var class="pdparam">skewx=0</var>, double precision  <var class="pdparam">skewy=0</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Resample</b>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">ref</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var>, boolean  <var class="pdparam">usescale=true</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Resample</b>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">ref</var>, boolean  <var class="pdparam">usescale</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90662480"></a><h2>Description</h2><p>
					Resample a raster using a specified resampling algorithm, new dimensions (width &amp; height), a grid corner (gridx &amp; gridy) and a set of raster georeferencing attributes (scalex, scaley, skewx &amp; skewy) defined or borrowed from another raster. If using a reference raster, the two rasters must have the same SRID.
				</p><p>
					New pixel values are computed using the NearestNeighbor (English or American spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor which is the fastest but produce the worst interpolation.
				</p><p>
					A maxerror percent of 0.125 is used if no <code class="varname">maxerr</code> is specified.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details.
					</p></td></tr></table></div><p>Availability: 2.0.0 Requires GDAL 1.6.1+</p><p>Changed: 2.1.0 Parameter srid removed. Variants with a reference raster no longer applies the reference raster's SRID. Use ST_Transform() to reproject raster. Works on rasters with no SRID.</p></div><div class="refsection" title="Examples"><a name="idp90666960"></a><h2>Examples</h2><pre class="programlisting">
SELECT
	ST_Width(orig) AS orig_width,
	ST_Width(reduce_100) AS new_width
FROM (
	SELECT
		rast AS orig,
		ST_Resample(rast,100,100) AS reduce_100
	FROM aerials.boston
	WHERE ST_Intersects(rast,
		ST_Transform(
			ST_MakeEnvelope(-71.128, 42.2392,-71.1277, 42.2397, 4326),26986)
	)
	LIMIT 1
) AS foo;

 orig_width | new_width
------------+-------------
        200 |         100
				</pre></div><div class="refsection" title="See Also"><a name="idp90668240"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>,
					<a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a>,
					<a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>
				</p></div></div><div class="refentry" title="ST_Rescale"><div class="refentry.separator"><hr></div><a name="RT_ST_Rescale"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Rescale — Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Rescale</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalexy</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Rescale</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90689360"></a><h2>Description</h2><p>Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. The default is NearestNeighbor which is the fastest but results in the worst interpolation.</p><p><code class="varname">scalex</code> and <code class="varname">scaley</code> define the new pixel size. scaley must often be negative to get well oriented raster.</p><p>When the new scalex or scaley is not a divisor of the raster width or height, the extent of the resulting raster is expanded to encompass the extent of the provided raster. If you want to be sure to retain exact input extent see <a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a></p><p>A maxerror percent of 0.125 is used if no <code class="varname">maxerr</code> is specified.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details. </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Rescale is different from <a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a> in that ST_SetScale do not resample the raster to match the raster extent. ST_SetScale only changes the metadata (or georeference) of the raster to correct an originally mis-specified scaling. ST_Rescale results in a raster having different width and height computed to fit the geographic extent of the input raster. ST_SetScale do not modify the width, nor the height of the raster.</p></td></tr></table></div><p>Availability: 2.0.0  Requires GDAL 1.6.1+</p><p>Changed: 2.1.0 Works on rasters with no SRID</p></div><div class="refsection" title="Examples"><a name="idp90695760"></a><h2>Examples</h2><p>A simple example rescaling a raster from a pixel size of 0.001 degree to a pixel size of 0.0015 degree.</p><pre class="programlisting">-- the original raster pixel size
SELECT ST_PixelWidth(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0)) width

   width
----------
0.001

-- the rescaled raster raster pixel size
SELECT ST_PixelWidth(ST_Rescale(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0015)) width

   width
----------
0.0015
</pre></div><div class="refsection" title="See Also"><a name="idp90697424"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a>,
					<a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>,
					<a class="xref" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a>,
					<a class="xref" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a>,
					<a class="xref" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a>,
					<a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a>
				</p></div></div><div class="refentry" title="ST_Reskew"><div class="refentry.separator"><hr></div><a name="RT_ST_Reskew"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Reskew — Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Reskew</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">skewxy</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Reskew</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">skewx</var>, double precision  <var class="pdparam">skewy</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90723792"></a><h2>Description</h2><p>Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. The default is NearestNeighbor which is the fastest but results in the worst interpolation.</p><p><code class="varname">skewx</code> and <code class="varname">skewy</code> define the new skew.</p><p>The extent of the new raster will encompass the extent of the provided raster.</p><p>A maxerror percent of 0.125 if no <code class="varname">maxerr</code> is specified.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details. </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Reskew is different from <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a> in that ST_SetSkew do not resample the raster to match the raster extent. ST_SetSkew only changes the metadata (or georeference) of the raster to correct an originally mis-specified skew. ST_Reskew results in a raster having different width and height computed to fit the geographic extent of the input raster. ST_SetSkew do not modify the width, nor the height of the raster.</p></td></tr></table></div><p>Availability: 2.0.0  Requires GDAL 1.6.1+</p><p>Changed: 2.1.0 Works on rasters with no SRID</p></div><div class="refsection" title="Examples"><a name="idp90729936"></a><h2>Examples</h2><p>A simple example reskewing a raster from a skew of 0.0 to a skew of 0.0015.</p><pre class="programlisting">-- the original raster non-rotated
SELECT ST_Rotation(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0));

-- result
0
					
-- the reskewed raster raster rotation
SELECT ST_Rotation(ST_Reskew(ST_AddBand(ST_MakeEmptyRaster(100, 100, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0015));

-- result
-0.982793723247329</pre></div><div class="refsection" title="See Also"><a name="idp90731600"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a>, <a class="xref" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a>, <a class="xref" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a>, <a class="xref" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a>, <a class="xref" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a></p></div></div><div class="refentry" title="ST_SnapToGrid"><div class="refentry.separator"><hr></div><a name="RT_ST_SnapToGrid"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SnapToGrid — Resample a raster by snapping it to a grid. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.
				    </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SnapToGrid</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var>, double precision  <var class="pdparam">scalex=DEFAULT 0</var>, double precision  <var class="pdparam">scaley=DEFAULT 0</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SnapToGrid</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SnapToGrid</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">gridx</var>, double precision  <var class="pdparam">gridy</var>, double precision  <var class="pdparam">scalexy</var>, text  <var class="pdparam">algorithm=NearestNeighbour</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90763088"></a><h2>Description</h2><p>Resample a raster by snapping it to a grid defined by an arbitrary pixel corner (gridx &amp; gridy) and optionally a pixel size (scalex &amp; scaley). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. The default is NearestNeighbor which is the fastest but results in the worst interpolation.</p><p><code class="varname">gridx</code> and <code class="varname">gridy</code> define any arbitrary pixel corner of the new grid. This is not necessarily the upper left corner of the new raster and it does not have to be inside or on the edge of the new raster extent.</p><p>You can optionnal define the pixel size of the new grid with <code class="varname">scalex</code> and <code class="varname">scaley</code>.</p><p>The extent of the new raster will encompass the extent of the provided raster.</p><p>A maxerror percent of 0.125 if no <code class="varname">maxerr</code> is specified.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details. </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Use <a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> if you need more control over the grid parameters.</p></td></tr></table></div><p>Availability: 2.0.0  Requires GDAL 1.6.1+</p><p>Changed: 2.1.0 Works on rasters with no SRID</p></div><div class="refsection" title="Examples"><a name="idp90770384"></a><h2>Examples</h2><p>A simple example snapping a raster to a slightly different grid.</p><pre class="programlisting">-- the original raster upper left X
SELECT ST_UpperLeftX(ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0));
-- result
0
					
-- the upper left of raster after snapping
SELECT ST_UpperLeftX(ST_SnapToGrid(ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 0.001, -0.001, 0, 0, 4269), '8BUI'::text, 1, 0), 0.0002, 0.0002));

--result
-0.0008</pre></div><div class="refsection" title="See Also"><a name="idp90772048"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>, <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>, <a class="xref" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a>, <a class="xref" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a></p></div></div><div class="refentry" title="ST_Resize"><div class="refentry.separator"><hr></div><a name="RT_ST_Resize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Resize — Resize a raster to a new width/height</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Resize</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">width</var>, integer  <var class="pdparam">height</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Resize</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">percentwidth</var>, double precision  <var class="pdparam">percentheight</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Resize</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">width</var>, text  <var class="pdparam">height</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90800976"></a><h2>Description</h2><p>
					Resize a raster to a new width/height. The new width/height can be specified in exact number of pixels or a percentage of the raster's width/height. The extent of the the new raster will be the same as the extent of the provided raster.
				</p><p>
					New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. The default is NearestNeighbor which is the fastest but results in the worst interpolation.
				</p><p>
					Variant 1 expects the actual width/height of the output raster.
				</p><p>
					Variant 2 expects decimal values between zero (0) and one (1) indicating the percentage of the input raster's width/height.
				</p><p>
					Variant 3 takes either the actual width/height of the output raster or a textual percentage ("20%") indicating the percentage of the input raster's width/height.
				</p><p>Availability: 2.1.0  Requires GDAL 1.6.1+</p></div><div class="refsection" title="Examples"><a name="idp90804048"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS(
SELECT
	1 AS rid,
	ST_Resize(
		ST_AddBand(
			ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
			, 1, '8BUI', 255, 0
		)
	, '50%', '500') AS rast
UNION ALL
SELECT
	2 AS rid,
	ST_Resize(
		ST_AddBand(
			ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
			, 1, '8BUI', 255, 0
		)
	, 500, 100) AS rast
UNION ALL
SELECT
	3 AS rid,
	ST_Resize(
		ST_AddBand(
			ST_MakeEmptyRaster(1000, 1000, 0, 0, 1, -1, 0, 0, 0)
			, 1, '8BUI', 255, 0
		)
	, 0.25, 0.9) AS rast
), bar AS (
	SELECT rid, ST_Metadata(rast) AS meta, rast FROM foo
)
SELECT rid, (meta).* FROM bar

 rid | upperleftx | upperlefty | width | height | scalex | scaley | skewx | skewy | srid | numbands
-----+------------+------------+-------+--------+--------+--------+-------+-------+------+----------
   1 |          0 |          0 |   500 |    500 |      1 |     -1 |     0 |     0 |    0 |        1
   2 |          0 |          0 |   500 |    100 |      1 |     -1 |     0 |     0 |    0 |        1
   3 |          0 |          0 |   250 |    900 |      1 |     -1 |     0 |     0 |    0 |        1
(3 rows)
				</pre></div><div class="refsection" title="See Also"><a name="idp90805456"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a>,
					<a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>,
					<a class="xref" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a>,
					<a class="xref" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
				</p></div></div><div class="refentry" title="ST_Transform"><div class="refentry.separator"><hr></div><a name="RT_ST_Transform"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Transform — Reprojects a raster in a known spatial reference system to another known spatial reference system using specified resampling algorithm. Options are NearestNeighbor, Bilinear, Cubic, CubicSpline, Lanczos defaulting to NearestNeighbor.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Transform</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">srid</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Transform</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">scalex</var>, double precision  <var class="pdparam">scaley</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Transform</b>(</code>raster  <var class="pdparam">rast</var>, raster  <var class="pdparam">alignto</var>, text  <var class="pdparam">algorithm=NearestNeighbor</var>, double precision  <var class="pdparam">maxerr=0.125</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90840016"></a><h2>Description</h2><p>Reprojects a raster in a known spatial reference system to another known spatial reference system using specified pixel warping algorithm.
				    Uses 'NearestNeighbor' if no algorithm is specified and maxerror percent of 0.125 if no maxerr is specified.</p><p>Algorithm options are: 'NearestNeighbor', 'Bilinear', 'Cubic', 'CubicSpline', and 'Lanczos'.  Refer to: <a class="ulink" href="http://www.gdal.org/gdalwarp.html" target="_top">GDAL Warp resampling methods</a> for more details.</p><p>
					ST_Transform is often confused with ST_SetSRID(). ST_Transform actually changes the coordinates of a raster (and resamples the pixel values) from one spatial reference system to another, while ST_SetSRID() simply changes the SRID identifier of the raster.
				</p><p>
					Unlike the other variants, Variant 3 requires a reference raster as <code class="varname">alignto</code>. The transformed raster will be transformed to the spatial reference system (SRID) of the reference raster and be aligned (ST_SameAlignment = TRUE) to the reference raster.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						If you find your transformation support is not working right, you may need to set the environment variable PROJSO to the .so or .dll projection library your PostGIS is using.  This just needs to have the name of the file. So for example on windows, you would in Control Panel -&gt; System -&gt; Environment Variables add a system variable called <code class="varname">PROJSO</code> and set it to <code class="varname">libproj.dll</code> (if you are using proj 4.6.1).  You'll have to restart your PostgreSQL service/daemon after this change.
					</p></td></tr></table></div><p>Availability: 2.0.0  Requires GDAL 1.6.1+</p><p>Enhanced: 2.1.0 Addition of ST_Transform(rast, alignto) variant</p></div><div class="refsection" title="Examples"><a name="idp90845520"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_Width(mass_stm) As w_before, ST_Width(wgs_84) As w_after,
  ST_Height(mass_stm) As h_before, ST_Height(wgs_84) As h_after
	FROM
	( SELECT rast As mass_stm, ST_Transform(rast,4326) As wgs_84
  ,  ST_Transform(rast,4326, 'Bilinear') AS wgs_84_bilin
		FROM aerials.o_2_boston
			WHERE ST_Intersects(rast,
				ST_Transform(ST_MakeEnvelope(-71.128, 42.2392,-71.1277, 42.2397, 4326),26986) )
		LIMIT 1) As foo;

 w_before | w_after | h_before | h_after
----------+---------+----------+---------
      200 |     228 |      200 |     170
					</pre><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform01.png"><div class="caption"><p>original mass state plane meters (mass_stm)</p></div></div></div>
		 </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform02.png"><div class="caption"><p>After transform to wgs 84 long lat (wgs_84)</p></div></div></div>
		 </td><td><div class="informalfigure"><div class="mediaobject"><img src="images/rt_st_transform03.png"><div class="caption"><p>After transform to wgs 84 long lat with bilinear algorithm instead of NN default (wgs_84_bilin)</p></div></div></div>
		 </td></tr></tbody></table></div></div><div class="refsection" title="Examples: Variant 3"><a name="idp90856400"></a><h2>Examples: Variant 3</h2><p>The following shows the difference between using ST_Transform(raster, srid) and ST_Transform(raster, alignto)</p><pre class="programlisting">
WITH foo AS (
	SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 1, 0) AS rast UNION ALL
	SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 2, 0) AS rast UNION ALL
	SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 600000, 100, -100, 0, 0, 2163), 1, '16BUI', 3, 0) AS rast UNION ALL

	SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 10, 0) AS rast UNION ALL
	SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 20, 0) AS rast UNION ALL
	SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 599800, 100, -100, 0, 0, 2163), 1, '16BUI', 30, 0) AS rast UNION ALL

	SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, -500000, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 100, 0) AS rast UNION ALL
	SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499800, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 200, 0) AS rast UNION ALL
	SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, -499600, 599600, 100, -100, 0, 0, 2163), 1, '16BUI', 300, 0) AS rast
), bar AS (
	SELECT
		ST_Transform(rast, 4269) AS alignto
	FROM foo
	LIMIT 1
), baz AS (
	SELECT
		rid,
		rast,
		ST_Transform(rast, 4269) AS not_aligned,
		ST_Transform(rast, alignto) AS aligned
	FROM foo
	CROSS JOIN bar
)
SELECT
	ST_SameAlignment(rast) AS rast,
	ST_SameAlignment(not_aligned) AS not_aligned,
	ST_SameAlignment(aligned) AS aligned
FROM baz

 rast | not_aligned | aligned
------+-------------+---------
 t    | f           | t
				</pre></div><div class="refsection" title="See Also"><a name="idp90858064"></a><h2>See Also</h2><p><a class="xref" href="#ST_Transform" title="ST_Transform">ST_Transform</a>, <a class="xref" href="#RT_ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a></p></div></div></div><div class="sect1" title="9.8. Raster Band Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Editors"></a>9.8. Raster Band Editors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_SetBandNoDataValue">ST_SetBandNoDataValue</a></span><span class="refpurpose"> — Sets the value for the given band that represents no data. Band 1 is assumed if no band is specified.  To mark a band as having no nodata value, set the nodata value = NULL.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SetBandIsNoData">ST_SetBandIsNoData</a></span><span class="refpurpose"> — Sets the isnodata flag of the band to TRUE.</span></dt></dl></div><div class="refentry" title="ST_SetBandNoDataValue"><a name="RT_ST_SetBandNoDataValue"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetBandNoDataValue — Sets the value for the given band that represents no data. Band 1 is assumed if no band is specified.  To mark a band as having no nodata value, set the nodata value = NULL.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetBandNoDataValue</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">nodatavalue</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_SetBandNoDataValue</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, double precision  <var class="pdparam">nodatavalue</var>, boolean  <var class="pdparam">forcechecking=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90871888"></a><h2>Description</h2><p>Sets the value that represents no data for the band.  Band 1 is assumed if not specified. This will affect results from <a class="xref" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a>, <a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>, and the ST_PixelAs...() functions.</p></div><div class="refsection" title="Examples"><a name="idp90873936"></a><h2>Examples</h2><pre class="programlisting">-- change just first band no data value
UPDATE dummy_rast
	SET rast = ST_SetBandNoDataValue(rast,1, 254)
WHERE rid = 2;

-- change no data band value of bands 1,2,3
UPDATE dummy_rast
	SET rast =
		ST_SetBandNoDataValue(
			ST_SetBandNoDataValue(
				ST_SetBandNoDataValue(
					rast,1, 254)
				,2,99),
				3,108)
		WHERE rid = 2;

-- wipe out the nodata value this will ensure all pixels are considered for all processing functions
UPDATE dummy_rast
	SET rast = ST_SetBandNoDataValue(rast,1, NULL)
WHERE rid = 2;
					</pre></div><div class="refsection" title="See Also"><a name="idp90875216"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a></p></div></div><div class="refentry" title="ST_SetBandIsNoData"><div class="refentry.separator"><hr></div><a name="RT_ST_SetBandIsNoData"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SetBandIsNoData — Sets the isnodata flag of the band to TRUE.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_SetBandIsNoData</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90882768"></a><h2>Description</h2><p>Sets the isnodata flag for the band to true. Band 1 is
                assumed if not specified. This function should be called only
                when the flag is considered dirty. That is, when the result
                calling <a class="xref" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> is different using
                TRUE as last argument and without using it</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp90884688"></a><h2>Examples</h2><pre class="programlisting">
-- Create dummy table with one raster column
create table dummy_rast (rid integer, rast raster);

-- Add raster with two bands, one pixel/band. In the first band, nodatavalue = pixel value = 3.
-- In the second band, nodatavalue = 13, pixel value = 4
insert into dummy_rast values(1,
(
'01' -- little endian (uint8 ndr)
||
'0000' -- version (uint16 0)
||
'0200' -- nBands (uint16 0)
||
'17263529ED684A3F' -- scaleX (float64 0.000805965234044584)
||
'F9253529ED684ABF' -- scaleY (float64 -0.00080596523404458)
||
'1C9F33CE69E352C0' -- ipX (float64 -75.5533328537098)
||
'718F0E9A27A44840' -- ipY (float64 49.2824585505576)
||
'ED50EB853EC32B3F' -- skewX (float64 0.000211812383858707)
||
'7550EB853EC32B3F' -- skewY (float64 0.000211812383858704)
||
'E6100000' -- SRID (int32 4326)
||
'0100' -- width (uint16 1)
||
'0100' -- height (uint16 1)
||
'4' -- hasnodatavalue set to true, isnodata value set to false (when it should be true)
||
'2' -- first band type (4BUI)
||
'03' -- novalue==3
||
'03' -- pixel(0,0)==3 (same that nodata)
||
'0' -- hasnodatavalue set to false
||
'5' -- second band type (16BSI)
||
'0D00' -- novalue==13
||
'0400' -- pixel(0,0)==4
)::raster
);

select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected false
select st_bandisnodata(rast, 1, TRUE) from dummy_rast where rid = 1; -- Expected true

-- The isnodata flag is dirty. We are going to set it to true
update dummy_rast set rast = st_setbandisnodata(rast, 1) where rid = 1;


select st_bandisnodata(rast, 1) from dummy_rast where rid = 1; -- Expected true

                    </pre></div><div class="refsection" title="See Also"><a name="idp90885968"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a>, <a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>, <a class="xref" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a></p></div></div></div><div class="sect1" title="9.9. Raster Band Statistics and Analytics"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RasterBand_Stats"></a>9.9. Raster Band Statistics and Analytics</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_Count">ST_Count</a></span><span class="refpurpose"> — Returns the number of pixels in a given band of a raster or raster coverage.  If no band is specified defaults to band 1.  If exclude_nodata_value is set to true, will only count pixels that are not equal to the nodata value.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_CountAgg">ST_CountAgg</a></span><span class="refpurpose"> — 
					Aggregate. Returns the number of pixels in a given band of a set of rasters. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the NODATA value.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Histogram">ST_Histogram</a></span><span class="refpurpose"> — Returns a set of record summarizing a raster or raster coverage data distribution separate bin ranges. Number of bins are autocomputed if not specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Quantile">ST_Quantile</a></span><span class="refpurpose"> — Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SummaryStats">ST_SummaryStats</a></span><span class="refpurpose"> — Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage. Band 1 is assumed is no band is specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SummaryStatsAgg">ST_SummaryStatsAgg</a></span><span class="refpurpose"> — Aggregate. Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a set of raster. Band 1 is assumed is no band is specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ValueCount">ST_ValueCount</a></span><span class="refpurpose"> — Returns a set of records containing a pixel band value  and count of the number of pixels in a given band of a raster (or a raster coverage) that have a given set of values.  If no band is specified defaults to band 1.  By default nodata value pixels are not counted.
				    and all other values in the pixel are output and pixel band values are rounded to the nearest integer.</span></dt></dl></div><div class="refentry" title="ST_Count"><a name="RT_ST_Count"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Count — Returns the number of pixels in a given band of a raster or raster coverage.  If no band is specified defaults to band 1.  If exclude_nodata_value is set to true, will only count pixels that are not equal to the nodata value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <b class="fsfunc">ST_Count</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_Count</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_Count</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_Count</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90925904"></a><h2>Description</h2><p>Returns the number of pixels in a given band of a raster or raster coverage.  If no band is specified <code class="varname">nband</code> defaults to 1. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If <code class="varname">exclude_nodata_value</code> is set to true, will only count pixels with value not equal to the <code class="varname">nodata</code> value of the raster. Set <code class="varname">exclude_nodata_value</code> to false to get count all pixels</p></td></tr></table></div><p>Availability: 2.0.0 </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The ST_Count(rastertable, rastercolumn, ...) variants are deprecated as of 2.2.0. Use <a class="xref" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a> instead.
					</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp90930768"></a><h2>Examples</h2><pre class="programlisting">
--example will count all pixels not 249 and one will count all pixels.  --
SELECT rid, ST_Count(ST_SetBandNoDataValue(rast,249)) As exclude_nodata,
        ST_Count(ST_SetBandNoDataValue(rast,249),false) As include_nodata
    FROM dummy_rast WHERE rid=2;

rid | exclude_nodata | include_nodata
-----+----------------+----------------
   2 |             23 |             25
				</pre></div><div class="refsection" title="See Also"><a name="idp90932304"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a>,
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>
				</p></div></div><div class="refentry" title="ST_CountAgg"><div class="refentry.separator"><hr></div><a name="RT_ST_CountAgg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CountAgg — 
					Aggregate. Returns the number of pixels in a given band of a set of rasters. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the NODATA value.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bigint <b class="fsfunc">ST_CountAgg</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_CountAgg</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_CountAgg</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp90949968"></a><h2>Description</h2><p>Returns the number of pixels in a given band of a set of rasters.  If no band is specified <code class="varname">nband</code> defaults to 1.</p><p>
					If <code class="varname">exclude_nodata_value</code> is set to true, will only count pixels with value not equal to the <code class="varname">NODATA</code> value of the raster. Set <code class="varname">exclude_nodata_value</code> to false to get count all pixels
				</p><p>By default will sample all pixels. To get faster response, set <code class="varname">sample_percent</code> to value between zero (0) and one (1)</p><p>Availability: 2.2.0 </p></div><div class="refsection" title="Examples"><a name="idp90954320"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT
		rast.rast
	FROM (
		SELECT ST_SetValue(
			ST_SetValue(
				ST_SetValue(
					ST_AddBand(
						ST_MakeEmptyRaster(10, 10, 10, 10, 2, 2, 0, 0,0)
						, 1, '64BF', 0, 0
					)
					, 1, 1, 1, -10
				)
				, 1, 5, 4, 0
			)
			, 1, 5, 5, 3.14159
		) AS rast
	) AS rast
	FULL JOIN (
		SELECT generate_series(1, 10) AS id
	) AS id
		ON 1 = 1
)
SELECT
	ST_CountAgg(rast, 1, TRUE)
FROM foo;

 st_countagg
-------------
          20
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp90955600"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>,
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>
				</p></div></div><div class="refentry" title="ST_Histogram"><div class="refentry.separator"><hr></div><a name="RT_ST_Histogram"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Histogram — Returns a set of record summarizing a raster or raster coverage data distribution separate bin ranges. Number of bins are autocomputed if not specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, integer  <var class="pdparam">bins=autocomputed</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">bins</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, integer  <var class="pdparam">bins</var>, boolean  <var class="pdparam">right</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, integer  <var class="pdparam">bins=autocomputed</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Histogram</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, integer  <var class="pdparam">bins</var>, double precision[]  <var class="pdparam">width=NULL</var>, boolean  <var class="pdparam">right=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91029712"></a><h2>Description</h2><p>Returns set of records consisting of min, max, count, percent for a given raster band for each bin. If no band is specified <code class="varname">nband</code> defaults to 1. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>By default only considers pixel values not equal to the <code class="varname">nodata</code> value . Set <code class="varname">exclude_nodata_value</code> to false to get count all pixels.</p></td></tr></table></div><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>width </code></em><span class="type">double precision[]</span></span></dt><dd><p>width: an array indicating the width of each category/bin. If the number of bins is greater than the number of widths, the widths are repeated. </p><p>Example: 9 bins, widths are [a, b, c] will have the output be [a, b, c, a, b, c, a, b, c]</p></dd><dt><span class="term"><em class="parameter"><code>bins </code></em><span class="type">integer</span></span></dt><dd><p>Number of breakouts -- this is the number of records you'll get back from the function if specified. If not specified
                            then the number of breakouts is autocomputed.</p></dd><dt><span class="term"><em class="parameter"><code>right </code></em><span class="type">boolean</span></span></dt><dd><p>compute the histogram from the right rather than from the left (default). This changes the criteria for evaluating a value x from [a, b) to (a, b]</p></dd></dl></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Example: Single raster tile - compute histograms for bands 1, 2, 3 and autocompute bins"><a name="idp91039440"></a><h2>Example: Single raster tile - compute histograms for bands 1, 2, 3 and autocompute bins</h2><pre class="programlisting">SELECT band, (stats).*
FROM (SELECT rid, band, ST_Histogram(rast, band) As stats
    FROM dummy_rast CROSS JOIN generate_series(1,3) As band
     WHERE rid=2) As foo;

 band |  min  |  max  | count | percent
------+-------+-------+-------+---------
    1 |   249 |   250 |     2 |    0.08
    1 |   250 |   251 |     2 |    0.08
    1 |   251 |   252 |     1 |    0.04
    1 |   252 |   253 |     2 |    0.08
    1 |   253 |   254 |    18 |    0.72
    2 |    78 | 113.2 |    11 |    0.44
    2 | 113.2 | 148.4 |     4 |    0.16
    2 | 148.4 | 183.6 |     4 |    0.16
    2 | 183.6 | 218.8 |     1 |    0.04
    2 | 218.8 |   254 |     5 |     0.2
    3 |    62 | 100.4 |    11 |    0.44
    3 | 100.4 | 138.8 |     5 |     0.2
    3 | 138.8 | 177.2 |     4 |    0.16
    3 | 177.2 | 215.6 |     1 |    0.04
    3 | 215.6 |   254 |     4 |    0.16</pre></div><div class="refsection" title="Example: Just band 2 but for 6 bins"><a name="idp91040720"></a><h2>Example: Just band 2 but for 6 bins</h2><pre class="programlisting">SELECT (stats).*
FROM (SELECT rid, ST_Histogram(rast, 2,6) As stats
    FROM dummy_rast
     WHERE rid=2) As foo;

    min     |    max     | count | percent
------------+------------+-------+---------
         78 | 107.333333 |     9 |    0.36
 107.333333 | 136.666667 |     6 |    0.24
 136.666667 |        166 |     0 |       0
        166 | 195.333333 |     4 |    0.16
 195.333333 | 224.666667 |     1 |    0.04
 224.666667 |        254 |     5 |     0.2
(6 rows)

-- Same as previous but we explicitly control the pixel value range of each bin.
SELECT (stats).*
FROM (SELECT rid, ST_Histogram(rast, 2,6,ARRAY[0.5,1,4,100,5]) As stats
    FROM dummy_rast
     WHERE rid=2) As foo;

  min  |  max  | count | percent
-------+-------+-------+----------
    78 |  78.5 |     1 |     0.08
  78.5 |  79.5 |     1 |     0.04
  79.5 |  83.5 |     0 |        0
  83.5 | 183.5 |    17 |   0.0068
 183.5 | 188.5 |     0 |        0
 188.5 |   254 |     6 | 0.003664
(6 rows)</pre></div><div class="refsection" title="See Also"><a name="idp91042000"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>,
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>
				</p></div></div><div class="refentry" title="ST_Quantile"><div class="refentry.separator"><hr></div><a name="RT_ST_Quantile"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Quantile — Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">quantiles=NULL</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, double precision[]  <var class="pdparam">quantiles</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">quantiles</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">quantile=NULL</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Quantile</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">quantile</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Quantile</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">quantiles=NULL</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_Quantile</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">quantiles</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91094224"></a><h2>Description</h2><p>Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If <code class="varname">exclude_nodata_value</code> is set to false, will also count pixels with no data.</p></td></tr></table></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp91096784"></a><h2>Examples</h2><pre class="programlisting">
UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,249) WHERE rid=2;
--Example will consider only pixels of band 1 that are not 249 and in named quantiles --

SELECT (pvq).*
FROM (SELECT ST_Quantile(rast, ARRAY[0.25,0.75]) As pvq
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvq).quantile;

 quantile | value
----------+-------
     0.25 |   253
     0.75 |   254

SELECT ST_Quantile(rast, 0.75) As value
    FROM dummy_rast WHERE rid=2;

value
------
  254
</pre><pre class="programlisting">
--real live example.  Quantile of all pixels in band 2 intersecting a geometry
SELECT rid, (ST_Quantile(rast,2)).* As pvc
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
            )
ORDER BY value, quantile,rid
;


 rid | quantile | value
-----+----------+-------
   1 |        0 |     0
   2 |        0 |     0
  14 |        0 |     1
  15 |        0 |     2
  14 |     0.25 |    37
   1 |     0.25 |    42
  15 |     0.25 |    47
   2 |     0.25 |    50
  14 |      0.5 |    56
   1 |      0.5 |    64
  15 |      0.5 |    66
   2 |      0.5 |    77
  14 |     0.75 |    81
  15 |     0.75 |    87
   1 |     0.75 |    94
   2 |     0.75 |   106
  14 |        1 |   199
   1 |        1 |   244
   2 |        1 |   255
  15 |        1 |   255
</pre></div><div class="refsection" title="See Also"><a name="idp91098576"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>,
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>,
					<a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>
				</p></div></div><div class="refentry" title="ST_SummaryStats"><div class="refentry.separator"><hr></div><a name="RT_ST_SummaryStats"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SummaryStats — Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage. Band 1 is assumed is no band is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStats</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStats</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStats</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStats</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91129424"></a><h2>Description</h2><p>Returns <a class="xref" href="#summarystats" title="summarystats">summarystats</a> consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage.  If no band is specified <code class="varname">nband</code> defaults to 1.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>By default only considers pixel values not equal to the <code class="varname">nodata</code> value. Set <code class="varname">exclude_nodata_value</code> to false to get count of all pixels.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>By default will sample all pixels. To get faster response, set <code class="varname">sample_percent</code> to lower than 1</p></td></tr></table></div><p>Availability: 2.0.0 </p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The ST_SummaryStats(rastertable, rastercolumn, ...) variants are deprecated as of 2.2.0. Use <a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> instead.
					</p></td></tr></table></div></div><div class="refsection" title="Example: Single raster tile"><a name="idp91135056"></a><h2>Example: Single raster tile</h2><pre class="programlisting">
SELECT rid, band, (stats).*
FROM (SELECT rid, band, ST_SummaryStats(rast, band) As stats
    FROM dummy_rast CROSS JOIN generate_series(1,3) As band
     WHERE rid=2) As foo;

 rid | band | count | sum  |    mean    |  stddev   | min | max
-----+------+-------+------+------------+-----------+-----+-----
   2 |    1 |    23 | 5821 | 253.086957 |  1.248061 | 250 | 254
   2 |    2 |    25 | 3682 |     147.28 | 59.862188 |  78 | 254
   2 |    3 |    25 | 3290 |      131.6 | 61.647384 |  62 | 254
				</pre></div><div class="refsection" title="Example: Summarize pixels that intersect buildings of interest"><a name="idp91136336"></a><h2>Example: Summarize pixels that intersect buildings of interest</h2><p>This example took 574ms on PostGIS windows 64-bit with all of Boston Buildings
and aerial Tiles (tiles each 150x150 pixels ~ 134,000 tiles), ~102,000 building records</p><pre class="programlisting">WITH
-- our features of interest
   feat AS (SELECT gid As building_id, geom_26986 As geom FROM buildings AS b
    WHERE gid IN(100, 103,150)
   ),
-- clip band 2 of raster tiles to boundaries of builds
-- then get stats for these clipped regions
   b_stats AS
	(SELECT  building_id, (stats).*
FROM (SELECT building_id, ST_SummaryStats(ST_Clip(rast,2,geom)) As stats
    FROM aerials.boston
		INNER JOIN feat
	ON ST_Intersects(feat.geom,rast)
 ) As foo
 )
-- finally summarize stats
SELECT building_id, SUM(count) As num_pixels
  , MIN(min) As min_pval
  ,  MAX(max) As max_pval
  , SUM(mean*count)/SUM(count) As avg_pval
	FROM b_stats
 WHERE count &gt; 0
	GROUP BY building_id
	ORDER BY building_id;
 building_id | num_pixels | min_pval | max_pval |     avg_pval
-------------+------------+----------+----------+------------------
         100 |       1090 |        1 |      255 | 61.0697247706422
         103 |        655 |        7 |      182 | 70.5038167938931
         150 |        895 |        2 |      252 | 185.642458100559</pre></div><div class="refsection" title="Example: Raster coverage"><a name="idp91138128"></a><h2>Example: Raster coverage</h2><pre class="programlisting">
-- stats for each band --
SELECT band, (stats).*
FROM (SELECT band, ST_SummaryStats('o_4_boston','rast', band) As stats
    FROM generate_series(1,3) As band) As foo;

 band |  count  |  sum   |       mean       |      stddev      | min | max
------+---------+--------+------------------+------------------+-----+-----
    1 | 8450000 | 725799 | 82.7064349112426 | 45.6800222638537 |   0 | 255
    2 | 8450000 | 700487 | 81.4197705325444 | 44.2161184161765 |   0 | 255
    3 | 8450000 | 575943 |  74.682739408284 | 44.2143885481407 |   0 | 255

-- For a table -- will get better speed if set sampling to less than 100%
-- Here we set to 25% and get a much faster answer
SELECT band, (stats).*
FROM (SELECT band, ST_SummaryStats('o_4_boston','rast', band,true,0.25) As stats
    FROM generate_series(1,3) As band) As foo;

 band |  count  |  sum   |       mean       |      stddev      | min | max
------+---------+--------+------------------+------------------+-----+-----
    1 | 2112500 | 180686 | 82.6890480473373 | 45.6961043857248 |   0 | 255
    2 | 2112500 | 174571 |  81.448503668639 | 44.2252623171821 |   0 | 255
    3 | 2112500 | 144364 | 74.6765884023669 | 44.2014869384578 |   0 | 255
				</pre></div><div class="refsection" title="See Also"><a name="idp91139408"></a><h2>See Also</h2><p>
					<a class="xref" href="#summarystats" title="summarystats">summarystats</a>,
					<a class="xref" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a>,
					<a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>,
					<a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>
				</p></div></div><div class="refentry" title="ST_SummaryStatsAgg"><div class="refentry.separator"><hr></div><a name="RT_ST_SummaryStatsAgg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SummaryStatsAgg — Aggregate. Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a set of raster. Band 1 is assumed is no band is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStatsAgg</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStatsAgg</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">sample_percent</var><code>)</code>;</p><p><code class="funcdef">summarystats <b class="fsfunc">ST_SummaryStatsAgg</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91158480"></a><h2>Description</h2><p>Returns <a class="xref" href="#summarystats" title="summarystats">summarystats</a> consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage.  If no band is specified <code class="varname">nband</code> defaults to 1.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>By default only considers pixel values not equal to the <code class="varname">NODATA</code> value. Set <code class="varname">exclude_nodata_value</code> to False to get count of all pixels.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>By default will sample all pixels. To get faster response, set <code class="varname">sample_percent</code> to value between 0 and 1</p></td></tr></table></div><p>Availability: 2.2.0 </p></div><div class="refsection" title="Examples"><a name="idp91163088"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT
		rast.rast
	FROM (
		SELECT ST_SetValue(
			ST_SetValue(
				ST_SetValue(
					ST_AddBand(
						ST_MakeEmptyRaster(10, 10, 10, 10, 2, 2, 0, 0,0)
						, 1, '64BF', 0, 0
					)
					, 1, 1, 1, -10
				)
				, 1, 5, 4, 0
			)
			, 1, 5, 5, 3.14159
		) AS rast
	) AS rast
	FULL JOIN (
		SELECT generate_series(1, 10) AS id
	) AS id
		ON 1 = 1
)
SELECT
	(stats).count,
	round((stats).sum::numeric, 3),
	round((stats).mean::numeric, 3),
	round((stats).stddev::numeric, 3),
	round((stats).min::numeric, 3),
	round((stats).max::numeric, 3)
FROM (
	SELECT
		ST_SummaryStatsAgg(rast, 1, TRUE, 1) AS stats
	FROM foo
) bar;

 count |  round  | round  | round |  round  | round
-------+---------+--------+-------+---------+-------
    20 | -68.584 | -3.429 | 6.571 | -10.000 | 3.142
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp91164368"></a><h2>See Also</h2><p>
					<a class="xref" href="#summarystats" title="summarystats">summarystats</a>,
					<a class="xref" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a>,
					<a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>,
					<a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>
				</p></div></div><div class="refentry" title="ST_ValueCount"><div class="refentry.separator"><hr></div><a name="RT_ST_ValueCount"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ValueCount — Returns a set of records containing a pixel band value  and count of the number of pixels in a given band of a raster (or a raster coverage) that have a given set of values.  If no band is specified defaults to band 1.  By default nodata value pixels are not counted.
				    and all other values in the pixel are output and pixel band values are rounded to the nearest integer.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">searchvalues=NULL</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_ValueCount</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband=1</var>, boolean  <var class="pdparam">exclude_nodata_value=true</var>, double precision[]  <var class="pdparam">searchvalues=NULL</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">SETOF record <b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, double precision[]  <var class="pdparam">searchvalues</var>, double precision  <var class="pdparam">roundto=0</var>, double precision  <var class="pdparam">OUT value</var>, integer  <var class="pdparam">OUT count</var><code>)</code>;</p><p><code class="funcdef">bigint<b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, boolean  <var class="pdparam">exclude_nodata_value</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p><p><code class="funcdef">bigint <b class="fsfunc">ST_ValueCount</b>(</code>text  <var class="pdparam">rastertable</var>, text  <var class="pdparam">rastercolumn</var>, integer  <var class="pdparam">nband</var>, double precision  <var class="pdparam">searchvalue</var>, double precision  <var class="pdparam">roundto=0</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91275088"></a><h2>Description</h2><p>Returns a set of records with columns <code class="varname">value</code>  <code class="varname">count</code> which contain the pixel band value and count of pixels in the raster tile or raster coverage of selected band. </p><p>If no band is specified <code class="varname">nband</code> defaults to 1. If no <code class="varname">searchvalues</code> are specified, will return all pixel values found in the raster or raster coverage.  If one searchvalue is given, will return an integer instead of records denoting the count of pixels having that pixel band value</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If <code class="varname">exclude_nodata_value</code> is set to false, will also count pixels with no data.</p></td></tr></table></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp91279568"></a><h2>Examples</h2><pre class="programlisting">
UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,249) WHERE rid=2;
--Example will count only pixels of band 1 that are not 249. --

SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;

 value | count
-------+-------
   250 |     2
   251 |     1
   252 |     2
   253 |     6
   254 |    12

-- Example will coount all pixels of band 1 including 249 --
SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast,1,false) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;

 value | count
-------+-------
   249 |     2
   250 |     2
   251 |     1
   252 |     2
   253 |     6
   254 |    12

-- Example will count only non-nodata value pixels of band 2
SELECT (pvc).*
FROM (SELECT ST_ValueCount(rast,2) As pvc
    FROM dummy_rast WHERE rid=2) As foo
    ORDER BY (pvc).value;
 value | count
-------+-------
    78 |     1
    79 |     1
    88 |     1
    89 |     1
    96 |     1
    97 |     1
    98 |     1
    99 |     2
   112 |     2
:

				</pre><pre class="programlisting">
--real live example.  Count all the pixels in an aerial raster tile band 2 intersecting a geometry
-- and return only the pixel band values that have a count &gt; 500
SELECT (pvc).value, SUM((pvc).count) As total
FROM (SELECT ST_ValueCount(rast,2) As pvc
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
             )
        ) As foo
    GROUP BY (pvc).value
    HAVING SUM((pvc).count) &gt; 500
    ORDER BY (pvc).value;

 value | total
-------+-----
    51 | 502
    54 | 521
</pre><pre class="programlisting">
-- Just return count of pixels in each raster tile that have value of 100 of tiles that intersect  a specific geometry --
SELECT rid, ST_ValueCount(rast,2,100) As count
    FROM o_4_boston
        WHERE ST_Intersects(rast,
            ST_GeomFromText('POLYGON((224486 892151,224486 892200,224706 892200,224706 892151,224486 892151))',26986)
             ) ;

 rid | count
-----+-------
   1 |    56
   2 |    95
  14 |    37
  15 |    64
</pre></div><div class="refsection" title="See Also"><a name="idp91282000"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_Count" title="ST_Count">ST_Count</a>, <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a></p></div></div></div><div class="sect1" title="9.10. Raster Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Outputs"></a>9.10. Raster Outputs</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_AsBinary">ST_AsBinary</a></span><span class="refpurpose"> — Return the Well-Known Binary (WKB) representation of the raster without SRID meta data.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_AsGDALRaster">ST_AsGDALRaster</a></span><span class="refpurpose"> — Return the raster tile in the designated GDAL Raster format.  Raster formats are one of those supported by your compiled library. Use ST_GDALRasters() to get a list of formats supported by your library.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_AsJPEG">ST_AsJPEG</a></span><span class="refpurpose"> — Return the raster tile selected bands as a single Joint Photographic Exports Group (JPEG) image (byte array).  If no band is specified and 1 or more than 3 bands, then only the first band is used.  If only 3 bands then all 3 bands are used and mapped to RGB.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_AsPNG">ST_AsPNG</a></span><span class="refpurpose"> — Return the raster tile selected bands as a single portable network graphics (PNG) image (byte array).  If 1, 3, or 4 bands in raster and no bands are specified, then all bands are used.  If more 2 or more than 4 bands and no bands specified, then only band 1 is used.  Bands are mapped to RGB or RGBA space.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_AsTIFF">ST_AsTIFF</a></span><span class="refpurpose"> — Return the raster selected bands as a single TIFF image (byte array).  If no band is specified, then will try to use all bands.</span></dt></dl></div><div class="refentry" title="ST_AsBinary"><a name="RT_ST_AsBinary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsBinary — Return the Well-Known Binary (WKB) representation of the raster without SRID meta data.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsBinary</b>(</code>raster  <var class="pdparam">rast</var>, boolean  <var class="pdparam">outasin=FALSE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91290448"></a><h2>Description</h2><p>
					Returns the Binary representation of the raster. If <code class="varname">outasin</code> is TRUE, out-db bands are treated as in-db.
				</p><p>
					This is useful in binary cursors to pull data out of the database without converting it to a string representation.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						By default, WKB output contains the external file path for out-db bands. If the client does not have access to the raster file underlying an out-db band, set <code class="varname">outasin</code> to TRUE.</p></td></tr></table></div><p>Enhanced: 2.1.0 Addition of <code class="varname">outasin</code></p></div><div class="refsection" title="Examples"><a name="idp91294288"></a><h2>Examples</h2><pre class="programlisting">
SELECT ST_AsBinary(rast) As rastbin FROM dummy_rast WHERE rid=1;

					 rastbin
---------------------------------------------------------------------------------
\001\000\000\000\000\000\000\000\000\000\000\000@\000\000\000\000\000\000\010@\
000\000\000\000\000\000\340?\000\000\000\000\000\000\340?\000\000\000\000\000\00
0\000\000\000\000\000\000\000\000\000\000\012\000\000\000\012\000\024\000
				</pre></div></div><div class="refentry" title="ST_AsGDALRaster"><div class="refentry.separator"><hr></div><a name="RT_ST_AsGDALRaster"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsGDALRaster — Return the raster tile in the designated GDAL Raster format.  Raster formats are one of those supported by your compiled library. Use ST_GDALRasters() to get a list of formats supported by your library.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsGDALRaster</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">format</var>, text[]  <var class="pdparam">options=NULL</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91303632"></a><h2>Description</h2><p>Returns the raster tile in the designated format. Arguments are itemized below:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                       <code class="varname">format</code> format to output.  This is dependent on the drivers compiled in your libgdal library.  Generally available are 'JPEG', 'GTIff', 'PNG'. Use <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> to get a list of formats supported by your library.
			</p></li><li class="listitem"><p>
			<code class="varname">options</code> text array of GDAL options. Valid options are dependent on the format. Refer to <a class="ulink" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL Raster format options</a> for more details.
			</p></li><li class="listitem"><p>
			<code class="varname">srs</code> The proj4text or srtext (from spatial_ref_sys) to embed in the image
			</p></li></ul></div><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p></div><div class="refsection" title="JPEG Output Examples"><a name="idp91310032"></a><h2>JPEG Output Examples</h2><pre class="programlisting">SELECT ST_AsGDALRaster(rast, 'JPEG') As rastjpg
FROM dummy_rast WHERE rid=1;

SELECT ST_AsGDALRaster(rast, 'JPEG', ARRAY['QUALITY=50']) As rastjpg
FROM dummy_rast WHERE rid=2;
				</pre></div><div class="refsection" title="GTIFF Output Examples"><a name="idp91311312"></a><h2>GTIFF Output Examples</h2><pre class="programlisting">SELECT ST_AsGDALRaster(rast, 'GTiff') As rastjpg
FROM dummy_rast WHERE rid=2;

-- Out GeoTiff with jpeg compression, 90% quality
SELECT ST_AsGDALRaster(rast, 'GTiff',
  ARRAY['COMPRESS=JPEG', 'JPEG_QUALITY=90'],
  4269) As rasttiff
FROM dummy_rast WHERE rid=2;
				</pre></div><div class="refsection" title="See Also"><a name="idp91321168"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Applications" title="5.3. Building Custom Applications with PostGIS Raster">Section 5.3, “Building Custom Applications with PostGIS Raster”</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div><div class="refentry" title="ST_AsJPEG"><div class="refentry.separator"><hr></div><a name="RT_ST_AsJPEG"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsJPEG — Return the raster tile selected bands as a single Joint Photographic Exports Group (JPEG) image (byte array).  If no band is specified and 1 or more than 3 bands, then only the first band is used.  If only 3 bands then all 3 bands are used and mapped to RGB.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsJPEG</b>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsJPEG</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">quality</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsJPEG</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsJPEG</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsJPEG</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, integer  <var class="pdparam">quality</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91346512"></a><h2>Description</h2><p>Returns the selected bands of the raster as a single  Joint Photographic Exports Group Image (JPEG).  Use <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> if you need to export as less common raster types. If no band is specified and 1 or more than 3 bands, then only the first band is used.  If 3 bands then all 3 bands are used.  There are many variants of the function with many options. These are itemized below:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                       <code class="varname">nband</code> is for single band exports.
                      </p></li><li class="listitem"><p>
                        <code class="varname">nbands</code> is an array of bands to export (note that max is 3 for JPEG) and the order of the bands is RGB. e.g ARRAY[3,2,1] means map band 3 to Red, band 2 to green and band 1 to blue
                      </p></li><li class="listitem"><p>
                        <code class="varname">quality</code> number from 0 to 100.  The higher the number the crisper the image.
                      </p></li><li class="listitem"><p>
                        <code class="varname">options</code> text Array
                        of GDAL options as defined for JPEG
                        (look at create_options for JPEG <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>). For JPEG
                        valid ones are <code class="varname">PROGRESSIVE</code>
                        ON or OFF and <code class="varname">QUALITY</code> a range
                        from 0 to 100 and default to 75. Refer to <a class="ulink" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL
                        Raster format options</a> for more details.
                      </p></li></ul></div><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p></div><div class="refsection" title="Examples: Output"><a name="idp91355216"></a><h2>Examples: Output</h2><pre class="programlisting">-- output first 3 bands 75% quality
SELECT ST_AsJPEG(rast) As rastjpg
    FROM dummy_rast WHERE rid=2;

-- output only first band as 90% quality
SELECT ST_AsJPEG(rast,1,90) As rastjpg
    FROM dummy_rast WHERE rid=2;

-- output first 3 bands (but make band 2 Red, band 1 green, and band 3 blue, progressive and 90% quality
SELECT ST_AsJPEG(rast,ARRAY[2,1,3],ARRAY['QUALITY=90','PROGRESSIVE=ON']) As rastjpg
    FROM dummy_rast WHERE rid=2;</pre></div><div class="refsection" title="See Also"><a name="idp91356752"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Applications" title="5.3. Building Custom Applications with PostGIS Raster">Section 5.3, “Building Custom Applications with PostGIS Raster”</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>, <a class="xref" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> </p></div></div><div class="refentry" title="ST_AsPNG"><div class="refentry.separator"><hr></div><a name="RT_ST_AsPNG"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsPNG — Return the raster tile selected bands as a single portable network graphics (PNG) image (byte array).  If 1, 3, or 4 bands in raster and no bands are specified, then all bands are used.  If more 2 or more than 4 bands and no bands specified, then only band 1 is used.  Bands are mapped to RGB or RGBA space.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsPNG</b>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsPNG</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, integer  <var class="pdparam">compression</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsPNG</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsPNG</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, integer  <var class="pdparam">compression</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsPNG</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91382992"></a><h2>Description</h2><p>Returns the selected bands of the raster as a single Portable Network Graphics Image (PNG).  Use <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> if you need to export as less common raster types. If no band is specified, then the first 3 bands are exported.  There are many variants of the function with many options. If no <code class="varname">srid</code> is specified then then srid of the raster is used.  These are itemized below:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                       <code class="varname">nband</code> is for single band exports.
                      </p></li><li class="listitem"><p>
                        <code class="varname">nbands</code> is an array of bands to export (note that max is 4 for PNG) and the order of the bands is RGBA. e.g ARRAY[3,2,1] means map band 3 to Red, band 2 to green and band 1 to blue
                      </p></li><li class="listitem"><p>
                        <code class="varname">compression</code> number from 1 to 9.  The higher the number the greater the compression.
                      </p></li><li class="listitem"><p>
                        <code class="varname">options</code> text Array of GDAL
                        options as defined for PNG (look at create_options
                        for PNG of <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>). For PNG valid one is only ZLEVEL (amount
                        of time to spend on compression -- default 6)
                        e.g. ARRAY['ZLEVEL=9'].
                        WORLDFILE is not allowed since the function
                        would have to output two outputs. Refer to <a class="ulink" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL
                        Raster format options</a> for more details.
                      </p></li></ul></div><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p></div><div class="refsection" title="Examples"><a name="idp91391312"></a><h2>Examples</h2><pre class="programlisting">SELECT ST_AsPNG(rast) As rastpng
FROM dummy_rast WHERE rid=2;

-- export the first 3 bands and map band 3 to Red, band 1 to Green, band 2 to blue
SELECT ST_AsPNG(rast, ARRAY[3,1,2]) As rastpng
FROM dummy_rast WHERE rid=2;
				</pre></div><div class="refsection" title="See Also"><a name="idp91392848"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a>, <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>,  <a class="xref" href="#RT_Raster_Applications" title="5.3. Building Custom Applications with PostGIS Raster">Section 5.3, “Building Custom Applications with PostGIS Raster”</a></p></div></div><div class="refentry" title="ST_AsTIFF"><div class="refentry.separator"><hr></div><a name="RT_ST_AsTIFF"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AsTIFF — Return the raster selected bands as a single TIFF image (byte array).  If no band is specified, then will try to use all bands.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTIFF</b>(</code>raster  <var class="pdparam">rast</var>, text[]  <var class="pdparam">options=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTIFF</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">compression=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTIFF</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text  <var class="pdparam">compression=''</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p><p><code class="funcdef">bytea <b class="fsfunc">ST_AsTIFF</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nbands</var>, text[]  <var class="pdparam">options</var>, integer  <var class="pdparam">srid=sameassource</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91430096"></a><h2>Description</h2><p>Returns the selected bands of the raster as a single Tagged Image File Format (TIFF). If no band is specified, will try to use all bands. This is a wrapper around <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>. Use <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> if you need to export as less common raster types. There are many variants of the function with many options.  If no spatial reference SRS text is present, the spatial reference of the raster is used. These are itemized below:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
                        <code class="varname">nbands</code> is an array of bands to export (note that max is 3 for PNG) and the order of the bands is RGB. e.g ARRAY[3,2,1] means map band 3 to Red, band 2 to green and band 1 to blue
                      </p></li><li class="listitem"><p>
<code class="varname">compression</code> Compression expression -- JPEG90 (or some other percent), LZW, JPEG, DEFLATE9.
                      </p></li><li class="listitem"><p>
<code class="varname">options</code> text Array of GDAL create options as defined for GTiff (look at create_options for GTiff of <a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>). or refer to <a class="ulink" href="http://www.gdal.org/frmt_various.html" target="_top">GDAL Raster format options</a> for more details.
                      </p></li><li class="listitem"><p>
<code class="varname">srid</code> srid of spatial_ref_sys of the raster. This is used to populate the georeference information
                      </p></li></ul></div><p>Availability: 2.0.0 - requires GDAL &gt;= 1.6.0. </p></div><div class="refsection" title="Examples: Use jpeg compression 90%"><a name="idp91438544"></a><h2>Examples: Use jpeg compression 90%</h2><pre class="programlisting">SELECT ST_AsTIFF(rast, 'JPEG90') As rasttiff
FROM dummy_rast WHERE rid=2;
				</pre></div><div class="refsection" title="See Also"><a name="idp91440208"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a>, <a class="xref" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a>, <a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a></p></div></div></div><div class="sect1" title="9.11. Raster Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Processing"></a>9.11. Raster Processing</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra">9.11.1. Map Algebra</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_MapAlgebra_Callbacks">9.11.2. Built-in Map Algebra Callback Functions</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_DEM">9.11.3. DEM (Elevation)</a></span></dt><dt><span class="sect2"><a href="#Raster_Processing_Geometry">9.11.4. Raster to Geometry</a></span></dt></dl></div><div class="sect2" title="9.11.1. Map Algebra"><div class="titlepage"><div><div><h3 class="title"><a name="Raster_Processing_MapAlgebra"></a>9.11.1. Map Algebra</h3></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_Clip">ST_Clip</a></span><span class="refpurpose"> — Returns the raster clipped by the input geometry.  If band number not is specified, all bands are processed. If <code class="varname">crop</code> is not specified or TRUE, the output raster is cropped.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ColorMap">ST_ColorMap</a></span><span class="refpurpose"> — Creates a new raster of up to four 8BUI bands (grayscale, RGB, RGBA) from the source raster and a specified band. Band 1 is assumed if not specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Intersection">ST_Intersection</a></span><span class="refpurpose"> — Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebra">ST_MapAlgebra</a></span><span class="refpurpose"> — 
						Callback function version - Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.
					</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebra_expr">ST_MapAlgebra</a></span><span class="refpurpose"> — 
						Expression version - Returns a one-band raster given one or two input rasters, band indexes and one or more user-specified SQL expressions.
					</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebraExpr">ST_MapAlgebraExpr</a></span><span class="refpurpose"> — 1 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the input raster band and of pixeltype provided.  Band 1 is assumed if no band is specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebraExpr2">ST_MapAlgebraExpr</a></span><span class="refpurpose"> — 
						2 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the two input raster bands and of pixeltype provided.  band 1 of each raster is assumed if no band numbers are specified. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster and have its extent defined by the "extenttype" parameter. Values for "extenttype" can be: INTERSECTION, UNION, FIRST, SECOND.
					</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFct">ST_MapAlgebraFct</a></span><span class="refpurpose"> — 1 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the input raster band and of pixeltype prodived. Band 1 is assumed if no band is specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFct2">ST_MapAlgebraFct</a></span><span class="refpurpose"> — 2 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the 2 input raster bands and of pixeltype prodived. Band 1 is assumed if no band is specified. Extent type defaults to INTERSECTION if not specified.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a></span><span class="refpurpose"> — 1-band version: Map Algebra Nearest Neighbor using user-defined PostgreSQL function. Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Reclass">ST_Reclass</a></span><span class="refpurpose"> — Creates a new raster composed of band types reclassified from original.  The nband is the band to be changed.  If nband is not specified assumed to be 1.  All other bands are returned unchanged. Use case: convert a 16BUI band to a 8BUI and so forth for simpler rendering as viewable formats.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Union">ST_Union</a></span><span class="refpurpose"> — Returns the union of a set of raster tiles into a single raster composed of 1 or more bands.</span></dt></dl></div><div class="refentry" title="ST_Clip"><a name="RT_ST_Clip"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Clip — Returns the raster clipped by the input geometry.  If band number not is specified, all bands are processed. If <code class="varname">crop</code> is not specified or TRUE, the output raster is cropped.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, double precision[]  <var class="pdparam">nodataval=NULL</var>, boolean  <var class="pdparam">crop=TRUE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">nodataval</var>, boolean  <var class="pdparam">crop=TRUE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">crop</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision[]  <var class="pdparam">nodataval=NULL</var>, boolean  <var class="pdparam">crop=TRUE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, double precision  <var class="pdparam">nodataval</var>, boolean  <var class="pdparam">crop=TRUE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Clip</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var>, boolean  <var class="pdparam">crop</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91480784"></a><h2>Description</h2><p>
						Returns a raster that is clipped by the input geometry <code class="varname">geom</code>. If band index is not specified, all bands are processed.
					</p><p>
						Rasters resulting from ST_Clip must have a nodata value assigned for areas clipped, one for each band. If none are provided and the input raster do not have a nodata value defined, nodata values of the resulting raster are set to ST_MinPossibleValue(ST_BandPixelType(rast, band)). When the number of nodata value in the array is smaller than the number of band, the last one in the array is used for the remaining bands. If the number of nodata value is greater than the number of band, the extra nodata values are ignored. All variants accepting an array of nodata values also accept a single value which will be assigned to each band.
					</p><p>
						If <code class="varname">crop</code> is not specified, true is assumed meaning the output raster is cropped to the intersection of the <code class="varname">geom</code>and <code class="varname">rast</code> extents. If <code class="varname">crop</code> is set to false, the new raster gets the same extent as <code class="varname">rast</code>.
					</p><p>Availability: 2.0.0 </p><p>Enhanced: 2.1.0 Rewritten in C</p><p>
						Examples here use Massachusetts aerial data available on MassGIS site <a class="ulink" href="http://www.mass.gov/mgis/colororthos2008.htm" target="_top">MassGIS Aerial Orthos</a>. Coordinates are in Massachusetts State Plane Meters.
					</p></div><div class="refsection" title="Examples: 1 band clipping"><a name="idp91486672"></a><h2>Examples: 1 band clipping</h2><pre class="programlisting">
-- Clip the first band of an aerial tile by a 20 meter buffer.
SELECT ST_Clip(rast, 1,
		ST_Buffer(ST_Centroid(ST_Envelope(rast)),20)
	) from aerials.boston
WHERE rid = 4;
					</pre><pre class="programlisting">
-- Demonstrate effect of crop on final dimensions of raster
-- Note how final extent is clipped to that of the geometry
-- if crop = true
SELECT ST_XMax(ST_Envelope(ST_Clip(rast, 1, clipper, true))) As xmax_w_trim,
	ST_XMax(clipper) As xmax_clipper,
	ST_XMax(ST_Envelope(ST_Clip(rast, 1, clipper, false))) As xmax_wo_trim,
	ST_XMax(ST_Envelope(rast)) As xmax_rast_orig
FROM (SELECT rast, ST_Buffer(ST_Centroid(ST_Envelope(rast)),6) As clipper
	FROM aerials.boston
WHERE rid = 6) As foo;

   xmax_w_trim    |   xmax_clipper   |   xmax_wo_trim   |  xmax_rast_orig
------------------+------------------+------------------+------------------
 230657.436173996 | 230657.436173996 | 230666.436173996 | 230666.436173996
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip01.png"><div class="caption"><p>Full raster tile before clipping</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip02.png"><div class="caption"><p>After Clipping</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="Examples: 1 band clipping with no crop and add back other bands unchanged"><a name="idp91496656"></a><h2>Examples: 1 band clipping with no crop and add back other bands unchanged</h2><pre class="programlisting">
-- Same example as before, but we need to set crop to false to be able to use ST_AddBand
-- because ST_AddBand requires all bands be the same Width and height
SELECT ST_AddBand(ST_Clip(rast, 1,
		ST_Buffer(ST_Centroid(ST_Envelope(rast)),20),false
	), ARRAY[ST_Band(rast,2),ST_Band(rast,3)] ) from aerials.boston
WHERE rid = 6;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip04.png"><div class="caption"><p>Full raster tile before clipping</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip05.png"><div class="caption"><p>After Clipping - surreal</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="Examples: Clip all bands"><a name="idp91510352"></a><h2>Examples: Clip all bands</h2><pre class="programlisting">
-- Clip all bands of an aerial tile by a 20 meter buffer.
-- Only difference is we don't specify a specific band to clip
-- so all bands are clipped
SELECT ST_Clip(rast,
	  ST_Buffer(ST_Centroid(ST_Envelope(rast)), 20),
	  false
	) from aerials.boston
WHERE rid = 4;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip01.png"><div class="caption"><p>Full raster tile before clipping</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_clip03.png"><div class="caption"><p>After Clipping</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp91520080"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>,
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>
					</p></div></div><div class="refentry" title="ST_ColorMap"><div class="refentry.separator"><hr></div><a name="RT_ST_ColorMap"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ColorMap — Creates a new raster of up to four 8BUI bands (grayscale, RGB, RGBA) from the source raster and a specified band. Band 1 is assumed if not specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_ColorMap</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, text  <var class="pdparam">colormap=grayscale</var>, text  <var class="pdparam">method=INTERPOLATE</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_ColorMap</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">colormap</var>, text  <var class="pdparam">method=INTERPOLATE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91543632"></a><h2>Description</h2><p>
						Apply a <code class="varname">colormap</code> to the band at <code class="varname">nband</code> of <code class="varname">rast</code> resulting a new raster comprised of up to four 8BUI bands. The number of 8BUI bands in the new raster is determined by the number of color components defined in <code class="varname">colormap</code>.
					</p><p>If <code class="varname">nband</code> is not specified, then band 1 is assumed.</p><p>
						<code class="varname">colormap</code> can be a keyword of a pre-defined colormap or a set of lines defining the value and the color components.
					</p><p>
						Valid pre-defined <code class="varname">colormap</code> keyword:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
								<code class="varname">grayscale</code> or <code class="varname">greyscale</code> for a one 8BUI band raster of shades of gray.
							</p></li><li class="listitem"><p>
								<code class="varname">pseudocolor</code> for a four 8BUI (RGBA) band raster with colors going from blue to green to red.
							</p></li><li class="listitem"><p>
								<code class="varname">fire</code> for a four 8BUI (RGBA) band raster with colors going from black to red to pale yellow.
							</p></li><li class="listitem"><p>
								<code class="varname">bluered</code> for a four 8BUI (RGBA) band raster with colors going from blue to pale white to red.
							</p></li></ul></div><p>
						Users can pass a set of entries (one per line) to <code class="varname">colormap</code> to specify custom colormaps. Each entry generally consists of five values: the pixel value and corresponding Red, Green, Blue, Alpha components (color components between 0 and 255). Percent values can be used instead of pixel values where 0% and 100% are the minimum and maximum values found in the raster band. Values can be separated with commas (','), tabs, colons (':') and/or spaces. The pixel value can be set to <span class="emphasis"><em>nv</em></span>, <span class="emphasis"><em>null</em></span> or <span class="emphasis"><em>nodata</em></span> for the NODATA value. An example is provided below.
					</p><pre class="programlisting">
5 0 0 0 255
4 100:50 55 255
1 150,100 150 255
0% 255 255 255 255
nv 0 0 0 0
					</pre><p>
						The syntax of <code class="varname">colormap</code> is similar to that of the color-relief mode of GDAL <a class="ulink" href="http://www.gdal.org/gdaldem.html#gdaldem_color_relief" target="_top">gdaldem</a>.
					</p><p>
						Valid keywords for <code class="varname">method</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
								<code class="varname">INTERPOLATE</code> to use linear interpolation to smoothly blend the colors between the given pixel values
							</p></li><li class="listitem"><p>
								<code class="varname">EXACT</code> to strictly match only those pixels values found in the colormap. Pixels whose value does not match a colormap entry will be set to 0 0 0 0 (RGBA)
							</p></li><li class="listitem"><p>
								<code class="varname">NEAREST</code> to use the colormap entry whose value is closest to the pixel value
							</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							A great reference for colormaps is <a class="ulink" href="http://www.colorbrewer2.org" target="_top">ColorBrewer</a>.
						</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							The resulting bands of new raster will have no NODATA value set.  Use <a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> to set a NODATA value if one is needed.
						</p></td></tr></table></div><p>Availability: 2.1.0 </p></div><div class="refsection" title="Examples"><a name="idp91565520"></a><h2>Examples</h2><p>This is a junk table to play with</p><pre class="programlisting">
-- setup test raster table --
DROP TABLE IF EXISTS funky_shapes;
CREATE TABLE funky_shapes(rast raster);

INSERT INTO funky_shapes(rast)
WITH ref AS (
	SELECT ST_MakeEmptyRaster( 200, 200, 0, 200, 1, -1, 0, 0) AS rast
)
SELECT
	ST_Union(rast)
FROM (
	SELECT
		ST_AsRaster(
			ST_Rotate(
				ST_Buffer(
					ST_GeomFromText('LINESTRING(0 2,50 50,150 150,125 50)'),
					i*2
				),
				pi() * i * 0.125, ST_Point(50,50)
			),
			ref.rast, '8BUI'::text, i * 5
		) AS rast
	FROM ref
	CROSS JOIN generate_series(1, 10, 3) AS i
) AS shapes;
					</pre><pre class="programlisting">
SELECT
	ST_NumBands(rast) As n_orig,
	ST_NumBands(ST_ColorMap(rast,1, 'greyscale')) As ngrey,
	ST_NumBands(ST_ColorMap(rast,1, 'pseudocolor')) As npseudo,
	ST_NumBands(ST_ColorMap(rast,1, 'fire')) As nfire,
	ST_NumBands(ST_ColorMap(rast,1, 'bluered')) As nbluered,
	ST_NumBands(ST_ColorMap(rast,1, '
100% 255   0   0
 80% 160   0   0
 50% 130   0   0
 30%  30   0   0
 20%  60   0   0
  0%   0   0   0
  nv 255 255 255
	')) As nred
FROM funky_shapes;
					</pre><pre class="screen">
 n_orig | ngrey | npseudo | nfire | nbluered | nred
--------+-------+---------+-------+----------+------
      1 |     1 |       4 |     4 |        4 |    3
					</pre></div><div class="refsection" title="Examples: Compare different color map looks using ST_AsPNG"><a name="idp91568336"></a><h2>Examples: Compare different color map looks using ST_AsPNG</h2><pre class="programlisting">
SELECT
	ST_AsPNG(rast) As orig_png,
	ST_AsPNG(ST_ColorMap(rast,1,'greyscale')) As grey_png,
	ST_AsPNG(ST_ColorMap(rast,1, 'pseudocolor')) As pseudo_png,
	ST_AsPNG(ST_ColorMap(rast,1, 'nfire')) As fire_png,
	ST_AsPNG(ST_ColorMap(rast,1, 'bluered')) As bluered_png,
	ST_AsPNG(ST_ColorMap(rast,1, '
100% 255   0   0
 80% 160   0   0
 50% 130   0   0
 30%  30   0   0
 20%  60   0   0
  0%   0   0   0
  nv 255 255 255
	')) As red_png
FROM funky_shapes;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_orig.png"><div class="caption"><p>orig_png</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_grey.png"><div class="caption"><p>grey_png</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_pseudo.png"><div class="caption"><p>pseudo_png</p></div></div></div><p>
										</p>
									</td></tr><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_fire.png"><div class="caption"><p>fire_png</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_bluered.png"><div class="caption"><p>bluered_png</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_colormap_red.png"><div class="caption"><p>red_png</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp91591248"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>,
						<a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a>,
						<a class="xref" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a>,
						<a class="xref" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a>,
						<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>
					</p></div></div><div class="refentry" title="ST_Intersection"><div class="refentry.separator"><hr></div><a name="RT_ST_Intersection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Intersection — Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geomval <b class="fsfunc">ST_Intersection</b>(</code>geometry  <var class="pdparam">geom</var>, raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var><code>)</code>;</p><p><code class="funcdef">setof geomval <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast</var>, geometry  <var class="pdparam">geom</var><code>)</code>;</p><p><code class="funcdef">setof geomval <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, geometry  <var class="pdparam">geomin</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">returnband</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Intersection</b>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, text  <var class="pdparam">returnband</var>, double precision[]  <var class="pdparam">nodataval</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91637584"></a><h2>Description</h2><p>
						Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.
					</p><p>
						The first three variants, returning a setof geomval, works in vector space. The raster is first vectorized (using ST_DumpAsPolygon) into a set of geomval rows and those rows are then intersected with the geometry using the ST_Intersection(geometry, geometry) PostGIS function. Geometries intersecting only with a nodata value area of a raster returns an empty geometry. They are normally excluded from the results by the proper usage of ST_Intersect in the WHERE clause.
					</p><p>
						You can access the geometry and the value parts of the resulting set of geomval by surrounding them with parenthesis and adding '.geom' or '.val' at the end of the expression. e.g. (ST_Intersection(rast, geom)).geom
					</p><p>
						The other variants, returning a raster, works in raster space. They are using the two rasters version of ST_MapAlgebraExpr to perform the intersection.
					</p><p>
						The extent of the resulting raster corresponds to the geometrical intersection of the two raster extents. The resulting raster includes 'BAND1', 'BAND2' or 'BOTH' bands, following what is passed as the <code class="varname">returnband</code> parameter. Nodata value areas present in any band results in nodata value areas in every bands of the result. In other words, any pixel intersecting with a nodata value pixel becomes a nodata value pixel in the result.
					</p><p>
						Rasters resulting from ST_Intersection must have a nodata value assigned for areas not intersecting. You can define or replace the nodata value for any resulting band by providing a <code class="varname">nodataval[]</code> array of one or two nodata values depending if you request 'BAND1', 'BAND2' or 'BOTH' bands. The first value in the array replace the nodata value in the first band and the second value replace the nodata value in the second band. If one input band do not have a nodata value defined and none are provided as an array, one is chosen using the ST_MinPossibleValue function. All variant accepting an array of nodata value can also accept a single value which will be assigned to each requested band.
					</p><p>
						In all variants, if no band number is specified band 1 is assumed.  If you need an intersection between a raster and geometry that returns a raster, refer to <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							To get more control on the resulting extent or on what to return when encountering a nodata value, use the two rasters version of <a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>.
						</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							To compute the intersection of a raster band with a geometry in raster space, use <a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>. ST_Clip works on multiple bands rasters and does not return a band corresponding to the rasterized geometry.
						</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							ST_Intersection should be used in conjunction with ST_Intersects and an index on the raster column and/or the geometry column.
						</p></td></tr></table></div><p>
						Enhanced: 2.0.0 - Intersection in the raster space was introduced. In earlier pre-2.0.0 versions, only intersection performed in vector space were supported.
					</p></div><div class="refsection" title="Examples: Geometry, Raster -- resulting in geometry vals"><a name="idp91654096"></a><h2>Examples: Geometry, Raster -- resulting in geometry vals</h2><pre class="programlisting">
SELECT
	foo.rid,
	foo.gid,
	ST_AsText((foo.geomval).geom) As geomwkt,
	(foo.geomval).val
FROM (
	SELECT
		A.rid,
		g.gid,
		ST_Intersection(A.rast, g.geom) As geomval
	FROM dummy_rast AS A
	CROSS JOIN (
		VALUES
			(1, ST_Point(3427928, 5793243.85) ),
			(2, ST_GeomFromText('LINESTRING(3427927.85 5793243.75,3427927.8 5793243.75,3427927.8 5793243.8)')),
			(3, ST_GeomFromText('LINESTRING(1 2, 3 4)'))
	) As g(gid,geom)
	WHERE A.rid = 2
) As foo;

 rid | gid |      geomwkt												| val
-----+-----+---------------------------------------------------------------------------------------------
   2 |   1 | POINT(3427928 5793243.85)									| 249
   2 |   1 | POINT(3427928 5793243.85)									| 253
   2 |   2 | POINT(3427927.85 5793243.75)								| 254
   2 |   2 | POINT(3427927.8 5793243.8)									| 251
   2 |   2 | POINT(3427927.8 5793243.8)									| 253
   2 |   2 | LINESTRING(3427927.8 5793243.75,3427927.8 5793243.8)	| 252
   2 |   2 | MULTILINESTRING((3427927.8 5793243.8,3427927.8 5793243.75),...) | 250
   2 |   3 | GEOMETRYCOLLECTION EMPTY
					</pre></div><div class="refsection" title="See Also"><a name="idp91655376"></a><h2>See Also</h2><p>
						<a class="xref" href="#geomval" title="geomval">geomval</a>,
						<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
						<a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>,
						<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebra"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebra"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebra — 
						Callback function version - Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.
					</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>rastbandarg[]  <var class="pdparam">rastbandargset</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast</var>, integer[]  <var class="pdparam">nband</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=FIRST</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=FIRST</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">nband1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">nband2</var>, regprocedure  <var class="pdparam">callbackfunc</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, integer  <var class="pdparam">distancex=0</var>, integer  <var class="pdparam">distancey=0</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>nband <var class="pdparam">integer</var>, regprocedure  <var class="pdparam">callbackfunc</var>, float8[]  <var class="pdparam">mask</var>, boolean  <var class="pdparam">weighted</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, raster  <var class="pdparam">customextent=NULL</var>, text[]  <var class="pdparam">VARIADIC userargs=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91721296"></a><h2>Description</h2><p>
						Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.
					</p><div class="variablelist"><dl><dt><span class="term">rast,rast1,rast2, rastbandargset</span></dt><dd><p>
									Rasters on which the map algebra process is evaluated.</p><p><code class="varname">rastbandargset</code> allows the use of a map algebra operation on many rasters and/or many bands. See example Variant 1.
								</p></dd><dt><span class="term">nband, nband1, nband2</span></dt><dd><p>
									Band numbers of the raster to be evaluated. nband can be an integer or integer[] denoting the bands. nband1 is band on rast1 and nband2 is band on rast2 for hte 2 raster/2band case.
								</p></dd><dt><span class="term">callbackfunc</span></dt><dd><p>
									The <code class="varname">callbackfunc</code> parameter must be the name and signature of an SQL or PL/pgSQL function, cast to a regprocedure. An example PL/pgSQL function example is:
									</p><pre class="programlisting">
CREATE OR REPLACE FUNCTION sample_callbackfunc(value double precision[][][], position integer[][], VARIADIC userargs text[])
	RETURNS double precision
	AS $$
	BEGIN
		RETURN 0;
	END;
	$$ LANGUAGE 'plpgsql' IMMUTABLE;
									</pre><p>

									The <code class="varname">callbackfunc</code> must have three arguments: a 3-dimension double precision array, a 2-dimension integer array and a variadic 1-dimension text array. The first argument <code class="varname">value</code> is the set of values (as double precision) from all input rasters. The three dimensions (where indexes are 1-based) are: raster #, row y, column x. The second argument <code class="varname">position</code> is the set of pixel positions from the output raster and input rasters. The outer dimension (where indexes are 0-based) is the raster #.  The position at outer dimension index 0 is the output raster's pixel position.  For each outer dimension, there are two elements in the inner dimension for X and Y.  The third argument <code class="varname">userargs</code> is for passing through any user-specified arguments.
								</p><p>
									Passing a <span class="type">regprocedure</span> argument to a SQL function requires the full function signature to be passed, then cast to a <span class="type">regprocedure</span> type. To pass the above example PL/pgSQL function as an argument, the SQL for the argument is:

									</p><pre class="programlisting">
'sample_callbackfunc(double precision[], integer[], text[])'::regprocedure
									</pre><p>

									Note that the argument contains the name of the function, the types of the function arguments, quotes around the name and argument types, and a cast to a <span class="type">regprocedure</span>.
								</p></dd><dt><span class="term">mask</span></dt><dd><p>
									An n-dimenional array (matrix) of numbers used to filter what cells get passed to map algebra call-back function. 0 means a neighbor cell value should be treated as no-data and 1 means value should be treated as data.  If weight is set to true, then the values, are used as multipliers to multiple the pixel value of that value in the neighborhood position.
								</p></dd><dt><span class="term">weighted</span></dt><dd><p>
									boolean (true/false) to denote if a mask value should be weighted (multiplied by original value) or not (only applies to proto that takes a mask).
								</p></dd><dt><span class="term">pixeltype</span></dt><dd><p>
									If <code class="varname">pixeltype</code> is passed in, the one band of the new raster will be of that pixeltype. If pixeltype is passed NULL or left out, the new raster band will have the same pixeltype as the specified band of the first raster (for extent types: INTERSECTION, UNION, FIRST, CUSTOM) or the specified band of the appropriate raster (for extent types: SECOND, LAST).  If in doubt, always specify <code class="varname">pixeltype</code>.
								</p><p>
									The resulting pixel type of the output raster must be one listed in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> or left out or set to NULL.
								</p></dd><dt><span class="term">extenttype</span></dt><dd><p>
									Possible values are INTERSECTION (default), UNION, FIRST (default for one raster variants), SECOND, LAST, CUSTOM.
								</p></dd><dt><span class="term">customextent</span></dt><dd><p>
									If <code class="varname">extentype</code> is CUSTOM, a raster must be provided for <code class="varname">customextent</code>. See example 4 of Variant 1.
								</p></dd><dt><span class="term">distancex</span></dt><dd><p>
									The distance in pixels from the reference cell. So width of resulting matrix would be <code class="code">2*distancex + 1</code>.If not specified only the reference cell is considered (neighborhood of 0).
								</p></dd><dt><span class="term">distancey</span></dt><dd><p>
									The distance in pixels from reference cell in y direction. Height of resulting matrix would be <code class="code">2*distancey + 1</code> .If not specified only the reference cell is considered (neighborhood of 0).
								</p></dd><dt><span class="term">userargs</span></dt><dd><p>
									The third argument to the <code class="varname">callbackfunc</code> is a <span class="type">variadic text</span> array. All trailing text arguments are passed through to the specified <code class="varname">callbackfunc</code>, and are contained in the <code class="varname">userargs</code> argument.
								</p></dd></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							For more information about the VARIADIC keyword, please refer to the PostgreSQL documentation and the "SQL Functions with Variable Numbers of Arguments" section of <a class="ulink" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">Query Language (SQL) Functions</a>.
						</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							The <span class="type">text[]</span> argument to the <code class="varname">callbackfunc</code> is required, regardless of whether you choose to pass any arguments to the callback function for processing or not.
						</p></td></tr></table></div><p>
						Variant 1 accepts an array of <code class="varname">rastbandarg</code> allowing the use of a map algebra operation on many rasters and/or many bands. See example Variant 1.
					</p><p>
						Variants 2 and 3 operate upon one or more bands of one raster. See example Variant 2 and 3.
					</p><p>
						Variant 4 operate upon two rasters with one band per raster. See example Variant 4.
					</p><p>Availability: 2.2.0: Ability to add a mask</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp91763536"></a><h2>Examples: Variant 1</h2><p>One raster, one band</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		ARRAY[ROW(rast, 1)]::rastbandarg[],
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo
					</pre><p>One raster, several bands</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		ARRAY[ROW(rast, 3), ROW(rast, 1), ROW(rast, 3), ROW(rast, 2)]::rastbandarg[],
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo
					</pre><p>Several rasters, several bands</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast UNION ALL
	SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI', 300, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		ARRAY[ROW(t1.rast, 3), ROW(t2.rast, 1), ROW(t2.rast, 3), ROW(t1.rast, 2)]::rastbandarg[],
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
	AND t2.rid = 2
					</pre><p>Complete example of tiles of a coverage with neighborhood.  This query only works with PostgreSQL 9.1 or higher.</p><pre class="programlisting">
WITH foo AS (
	SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast UNION ALL
	SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, 0, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0) AS rast UNION ALL
	SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, 0, 1, -1, 0, 0, 0), 1, '16BUI', 3, 0) AS rast UNION ALL

	SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -2, 1, -1, 0, 0, 0), 1, '16BUI', 10, 0) AS rast UNION ALL
	SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -2, 1, -1, 0, 0, 0), 1, '16BUI', 20, 0) AS rast UNION ALL
	SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -2, 1, -1, 0, 0, 0), 1, '16BUI', 30, 0) AS rast UNION ALL

	SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -4, 1, -1, 0, 0, 0), 1, '16BUI', 100, 0) AS rast UNION ALL
	SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -4, 1, -1, 0, 0, 0), 1, '16BUI', 200, 0) AS rast UNION ALL
	SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -4, 1, -1, 0, 0, 0), 1, '16BUI', 300, 0) AS rast
)
SELECT
	t1.rid,
	ST_MapAlgebra(
		ARRAY[ROW(ST_Union(t2.rast), 1)]::rastbandarg[],
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure,
		'32BUI',
		'CUSTOM', t1.rast,
		1, 1
	) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 4
	AND t2.rid BETWEEN 0 AND 8
	AND ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rid, t1.rast
					</pre><p>Example like the prior one for tiles of a coverage with neighborhood but works with PostgreSQL 9.0.</p><pre class="programlisting">
WITH src AS (
	SELECT 0 AS rid, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0) AS rast UNION ALL
	SELECT 1, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, 0, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0) AS rast UNION ALL
	SELECT 2, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, 0, 1, -1, 0, 0, 0), 1, '16BUI', 3, 0) AS rast UNION ALL

	SELECT 3, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -2, 1, -1, 0, 0, 0), 1, '16BUI', 10, 0) AS rast UNION ALL
	SELECT 4, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -2, 1, -1, 0, 0, 0), 1, '16BUI', 20, 0) AS rast UNION ALL
	SELECT 5, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -2, 1, -1, 0, 0, 0), 1, '16BUI', 30, 0) AS rast UNION ALL

	SELECT 6, ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, -4, 1, -1, 0, 0, 0), 1, '16BUI', 100, 0) AS rast UNION ALL
	SELECT 7, ST_AddBand(ST_MakeEmptyRaster(2, 2, 2, -4, 1, -1, 0, 0, 0), 1, '16BUI', 200, 0) AS rast UNION ALL
	SELECT 8, ST_AddBand(ST_MakeEmptyRaster(2, 2, 4, -4, 1, -1, 0, 0, 0), 1, '16BUI', 300, 0) AS rast
)
WITH foo AS (
	SELECT
		t1.rid,
		ST_Union(t2.rast) AS rast
	FROM src t1
	JOIN src t2
		ON ST_Intersects(t1.rast, t2.rast)
		AND t2.rid BETWEEN 0 AND 8
	WHERE t1.rid = 4
	GROUP BY t1.rid
), bar AS (
	SELECT
		t1.rid,
		ST_MapAlgebra(
			ARRAY[ROW(t2.rast, 1)]::rastbandarg[],
			'raster_nmapalgebra_test(double precision[], int[], text[])'::regprocedure,
			'32BUI',
			'CUSTOM', t1.rast,
			1, 1
		) AS rast
	FROM src t1
	JOIN foo t2
		ON t1.rid = t2.rid
)
SELECT
	rid,
	(ST_Metadata(rast)),
	(ST_BandMetadata(rast, 1)),
	ST_Value(rast, 1, 1, 1)
FROM bar;
					</pre></div><div class="refsection" title="Examples: Variants 2 and 3"><a name="idp91768912"></a><h2>Examples: Variants 2 and 3</h2><p>One raster, several bands</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		rast, ARRAY[3, 1, 3, 2]::integer[],
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo
					</pre><p>One raster, one band</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		rast, 2,
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo
					</pre></div><div class="refsection" title="Examples: Variant 4"><a name="idp91771600"></a><h2>Examples: Variant 4</h2><p>Two rasters, two bands</p><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast UNION ALL
	SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI', 300, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		t1.rast, 2,
		t2.rast, 1,
		'sample_callbackfunc(double precision[], int[], text[])'::regprocedure
	) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
	AND t2.rid = 2
					</pre></div><div class="refsection" title="Examples: Using Masks"><a name="idp91773264"></a><h2>Examples: Using Masks</h2><pre class="programlisting">
WITH foo AS (SELECT
   ST_SetBandNoDataValue(
ST_SetValue(ST_SetValue(ST_AsRaster(
		ST_Buffer(
			ST_GeomFromText('LINESTRING(50 50,100 90,100 50)'), 5,'join=bevel'),
			200,200,ARRAY['8BUI'], ARRAY[100], ARRAY[0]), ST_Buffer('POINT(70 70)'::geometry,10,'quad_segs=1') ,50),
  'LINESTRING(20 20, 100 100, 150 98)'::geometry,1),0)  AS rast )
SELECT 'original' AS title, rast
FROM foo
UNION ALL
SELECT 'no mask mean value' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure) AS rast
FROM foo
UNION ALL
SELECT 'mask only consider neighbors, exclude center' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure,
    '{{1,1,1}, {1,0,1}, {1,1,1}}'::double precision[], false) As rast
FROM foo

UNION ALL
SELECT 'mask weighted only consider neighbors, exclude center multi otehr pixel values by 2' AS title, ST_MapAlgebra(rast,1,'ST_mean4ma(double precision[], int[], text[])'::regprocedure,
    '{{2,2,2}, {2,0,2}, {2,2,2}}'::double precision[], true) As rast
FROM foo;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask01.png"><div class="caption"><p>original</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask02.png"><div class="caption"><p>no mask mean value (same as having all 1s in mask matrix)</p></div></div></div><p>
										</p>
									</td></tr><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask03.png"><div class="caption"><p>mask only consider neighbors, exclude center</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebramask04.png"><div class="caption"><p>mask weighted only consider neighbors, exclude center multi other pixel values by 2</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp91789648"></a><h2>See Also</h2><p>
						<a class="xref" href="#rastbandarg" title="rastbandarg">rastbandarg</a>,
						<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>,
						<a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra">ST_MapAlgebra</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebra"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebra_expr"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebra — 
						Expression version - Returns a one-band raster given one or two input rasters, band indexes and one or more user-specified SQL expressions.
					</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">nband1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">nband2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebra</b>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=NULL</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91832912"></a><h2>Description</h2><p>
						Expression version - Returns a one-band raster given one or two input rasters, band indexes and one or more user-specified SQL expressions.
					</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Description: Variants 1 and 2 (one raster)"><a name="idp91834448"></a><h2>Description: Variants 1 and 2 (one raster)</h2><p>
						Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation defined by the <code class="varname">expression</code> on the input raster (<code class="varname">rast</code>). If <code class="varname">nband</code> is not provided, band 1 is assumed. The new raster will have the same georeference, width, and height as the original raster but will only have one band.
					</p><p>
						If <code class="varname">pixeltype</code> is passed in, then the new raster will have a band of that pixeltype.  If pixeltype is passed NULL, then the new raster band will have the same pixeltype as the input <code class="varname">rast</code> band.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Keywords permitted for <code class="varname">expression</code></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">[rast]</code> - Pixel value of the pixel of interest</p></li><li class="listitem"><p><code class="varname">[rast.val]</code> - Pixel value of the pixel of interest</p></li><li class="listitem"><p><code class="varname">[rast.x]</code> - 1-based pixel column of the pixel of interest</p></li><li class="listitem"><p><code class="varname">[rast.y]</code> - 1-based pixel row of the pixel of interest</p></li></ol></div></li></ul></div></div><div class="refsection" title="Description: Variants 3 and 4 (two raster)"><a name="idp91844048"></a><h2>Description: Variants 3 and 4 (two raster)</h2><p>
						Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation to the two bands defined by the <code class="varname">expression</code> on the two input raster bands <code class="varname">rast1</code>, (<code class="varname">rast2</code>). If no <code class="varname">band1</code>,  <code class="varname">band2</code> is specified band 1 is assumed. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster. The resulting raster will have the extent defined by the <code class="varname">extenttype</code> parameter.
					</p><div class="variablelist"><dl><dt><span class="term">expression</span></dt><dd><p>
									A PostgreSQL algebraic expression involving the two rasters and PostgreSQL defined functions/operators that will define the pixel value when pixels intersect. e.g. (([rast1] + [rast2])/2.0)::integer
								</p></dd><dt><span class="term">pixeltype</span></dt><dd><p>
									The resulting pixel type of the output raster.  Must be one listed in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, left out or set to NULL.  If not passed in or set to NULL, will default to the pixeltype of the first raster.
								</p></dd><dt><span class="term">extenttype</span></dt><dd><p>
									Controls the extent of resulting raster
								</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
											<code class="varname">INTERSECTION</code> - The extent of the new raster is the intersection of the two rasters. This is the default.
										</p></li><li class="listitem"><p>
											<code class="varname">UNION</code> - The extent of the new raster is the union of the two rasters.
										</p></li><li class="listitem"><p>
											<code class="varname">FIRST</code> - The extent of the new raster is the  same as the one of the first raster.
										</p></li><li class="listitem"><p>
											<code class="varname">SECOND</code> - The extent of the new raster is the  same as the one of the second raster.
										</p></li></ol></div></dd><dt><span class="term">nodata1expr</span></dt><dd><p>
									An algebraic expression involving only <code class="varname">rast2</code> or a constant that defines what to return when pixels of <code class="varname">rast1</code> are nodata values and spatially corresponding rast2 pixels have values.
								</p></dd><dt><span class="term">nodata2expr</span></dt><dd><p>
									An algebraic expression involving only <code class="varname">rast1</code> or a constant that defines what to return when pixels of <code class="varname">rast2</code> are nodata values and spatially corresponding rast1 pixels have values.
								</p></dd><dt><span class="term">nodatanodataval</span></dt><dd><p>
									A numeric constant to return when spatially corresponding rast1 and rast2 pixels are both nodata values.
								</p></dd></dl></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Keywords permitted in <code class="varname">expression</code>, <code class="varname">nodata1expr</code> and <code class="varname">nodata2expr</code></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">[rast1]</code> - Pixel value of the pixel of interest from <code class="varname">rast1</code></p></li><li class="listitem"><p><code class="varname">[rast1.val]</code> - Pixel value of the pixel of interest from <code class="varname">rast1</code></p></li><li class="listitem"><p><code class="varname">[rast1.x]</code> - 1-based pixel column of the pixel of interest from <code class="varname">rast1</code></p></li><li class="listitem"><p><code class="varname">[rast1.y]</code> - 1-based pixel row of the pixel of interest from <code class="varname">rast1</code></p></li><li class="listitem"><p><code class="varname">[rast2]</code> - Pixel value of the pixel of interest from <code class="varname">rast2</code></p></li><li class="listitem"><p><code class="varname">[rast2.val]</code> - Pixel value of the pixel of interest from <code class="varname">rast2</code></p></li><li class="listitem"><p><code class="varname">[rast2.x]</code> - 1-based pixel column of the pixel of interest from <code class="varname">rast2</code></p></li><li class="listitem"><p><code class="varname">[rast2.y]</code> - 1-based pixel row of the pixel of interest from <code class="varname">rast2</code></p></li></ol></div></li></ul></div></div><div class="refsection" title="Examples: Variants 1 and 2"><a name="idp91886288"></a><h2>Examples: Variants 1 and 2</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_AddBand(ST_MakeEmptyRaster(10, 10, 0, 0, 1, 1, 0, 0, 0), '32BF', 1, -1) AS rast
)
SELECT
	ST_MapAlgebra(rast, 1, NULL, 'ceil([rast]*[rast.x]/[rast.y]+[rast.val])')
FROM foo
					</pre></div><div class="refsection" title="Examples: Variant 3 and 4"><a name="idp91887568"></a><h2>Examples: Variant 3 and 4</h2><pre class="programlisting">
WITH foo AS (
	SELECT 1 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 0, 1, -1, 0, 0, 0), 1, '16BUI', 1, 0), 2, '8BUI', 10, 0), 3, '32BUI', 100, 0) AS rast UNION ALL
	SELECT 2 AS rid, ST_AddBand(ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(2, 2, 0, 1, 1, -1, 0, 0, 0), 1, '16BUI', 2, 0), 2, '8BUI', 20, 0), 3, '32BUI', 300, 0) AS rast
)
SELECT
	ST_MapAlgebra(
		t1.rast, 2,
		t2.rast, 1,
		'([rast2] + [rast1.val]) / 2'
	) AS rast
FROM foo t1
CROSS JOIN foo t2
WHERE t1.rid = 1
	AND t2.rid = 2
					</pre></div><div class="refsection" title="See Also"><a name="idp91888848"></a><h2>See Also</h2><p>
						<a class="xref" href="#rastbandarg" title="rastbandarg">rastbandarg</a>,
						<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>,
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebraExpr"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebraExpr"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraExpr — 1 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the input raster band and of pixeltype provided.  Band 1 is assumed if no band is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraExpr</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraExpr</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">pixeltype</var>, text  <var class="pdparam">expression</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91942480"></a><h2>Description</h2><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							<a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> is deprecated as of 2.1.0. Use <a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra">ST_MapAlgebra</a> instead.
						</p></td></tr></table></div><p>
						Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation defined by the <code class="varname">expression</code> on the input raster (<code class="varname">rast</code>). If no <code class="varname">band</code> is specified band 1 is assumed.  The new raster will have the same georeference, width, and height as the original raster but will only have one band.
					</p><p>
						If <code class="varname">pixeltype</code> is passed in, then the new raster will have a band of that pixeltype.  If pixeltype is passed NULL, then the new raster band will have the same pixeltype as the input <code class="varname">rast</code> band.
					</p><p>
						In the expression you can use the term <code class="varname">[rast]</code> to refer to the pixel value of the original band, <code class="varname">[rast.x]</code> to refer to the 1-based pixel column index, <code class="varname">[rast.y]</code> to refer to the 1-based pixel row index.
					</p><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp91949520"></a><h2>Examples</h2><p>Create a new 1 band raster from our original that is  a function of modulo 2 of the original raster band.</p><pre class="programlisting">
ALTER TABLE dummy_rast ADD COLUMN map_rast raster;
UPDATE dummy_rast SET map_rast = ST_MapAlgebraExpr(rast,NULL,'mod([rast],2)') WHERE rid = 2;

SELECT
	ST_Value(rast,1,i,j) As origval,
	ST_Value(map_rast, 1, i, j) As mapval
FROM dummy_rast
CROSS JOIN generate_series(1, 3) AS i
CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     253 |      1
     254 |      0
     253 |      1
     253 |      1
     254 |      0
     254 |      0
     250 |      0
     254 |      0
     254 |      0
					</pre><p>Create a new 1 band raster of pixel-type 2BUI from our original that is reclassified and set the nodata value to be 0.</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast2 raster;
UPDATE dummy_rast SET
	map_rast2 = ST_MapAlgebraExpr(rast,'2BUI','CASE WHEN [rast] BETWEEN 100 and 250 THEN 1 WHEN [rast] = 252 THEN 2 WHEN [rast] BETWEEN 253 and 254 THEN 3 ELSE 0 END', '0')
WHERE rid = 2;

SELECT DISTINCT
	ST_Value(rast,1,i,j) As origval,
	ST_Value(map_rast2, 1, i, j) As mapval
FROM dummy_rast
CROSS JOIN generate_series(1, 5) AS i
CROSS JOIN generate_series(1,5) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     249 |      1
     250 |      1
     251 |
     252 |      2
     253 |      3
     254 |      3

SELECT
	ST_BandPixelType(map_rast2) As b1pixtyp
FROM dummy_rast
WHERE rid = 2;

 b1pixtyp
----------
 2BUI
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr01.png"><div class="caption"><p>original (column rast-view)</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr02.png"><div class="caption"><p>rast_view_ma</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div><p>Create a new 3 band raster same pixel type from our original 3 band raster with first band altered by map algebra and remaining 2 bands unaltered.</p><pre class="programlisting">
SELECT
	ST_AddBand(
		ST_AddBand(
			ST_AddBand(
				ST_MakeEmptyRaster(rast_view),
				ST_MapAlgebraExpr(rast_view,1,NULL,'tan([rast])*[rast]')
			),
			ST_Band(rast_view,2)
		),
		ST_Band(rast_view, 3) As rast_view_ma
	)
FROM wind
WHERE rid=167;
					</pre></div><div class="refsection" title="See Also"><a name="idp91961424"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>,
						<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
						<a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>,
						<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebraExpr"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebraExpr2"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraExpr — 
						2 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the two input raster bands and of pixeltype provided.  band 1 of each raster is assumed if no band numbers are specified. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster and have its extent defined by the "extenttype" parameter. Values for "extenttype" can be: INTERSECTION, UNION, FIRST, SECOND.
					</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraExpr</b>(</code>raster  <var class="pdparam">rast1</var>, raster  <var class="pdparam">rast2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=same_as_rast1_band</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraExpr</b>(</code>raster  <var class="pdparam">rast1</var>, integer  <var class="pdparam">band1</var>, raster  <var class="pdparam">rast2</var>, integer  <var class="pdparam">band2</var>, text  <var class="pdparam">expression</var>, text  <var class="pdparam">pixeltype=same_as_rast1_band</var>, text  <var class="pdparam">extenttype=INTERSECTION</var>, text  <var class="pdparam">nodata1expr=NULL</var>, text  <var class="pdparam">nodata2expr=NULL</var>, double precision  <var class="pdparam">nodatanodataval=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp91989328"></a><h2>Description</h2><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							<a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> is deprecated as of 2.1.0. Use <a class="xref" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra">ST_MapAlgebra</a> instead.
						</p></td></tr></table></div><p>
						Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation to the two bands defined by the <code class="varname">expression</code> on the two input raster bands <code class="varname">rast1</code>, (<code class="varname">rast2</code>). If no <code class="varname">band1</code>,  <code class="varname">band2</code> is specified band 1 is assumed. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster. The resulting raster will have the extent defined by the <code class="varname">extenttype</code> parameter.
					</p><div class="variablelist"><dl><dt><span class="term">expression</span></dt><dd><p>
									A PostgreSQL algebraic expression involving the two rasters and PostgreSQL defined functions/operators that will define the pixel value when pixels intersect. e.g. (([rast1] + [rast2])/2.0)::integer
								</p></dd><dt><span class="term">pixeltype</span></dt><dd><p>
									The resulting pixel type of the output raster.  Must be one listed in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>, left out or set to NULL.  If not passed in or set to NULL, will default to the pixeltype of the first raster.
								</p></dd><dt><span class="term">extenttype</span></dt><dd><p>Controls the extent of resulting raster</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
											<code class="varname">INTERSECTION</code> - The extent of the new raster is the intersection of the two rasters. This is the default.
										</p></li><li class="listitem"><p>
											<code class="varname">UNION</code> - The extent of the new raster is the union of the two rasters.
										</p></li><li class="listitem"><p>
											<code class="varname">FIRST</code> - The extent of the new raster is the  same as the one of the first raster.
										</p></li><li class="listitem"><p>
											<code class="varname">SECOND</code> - The extent of the new raster is the  same as the one of the second raster.
										</p></li></ol></div></dd><dt><span class="term">nodata1expr</span></dt><dd><p>
									An algebraic expression involving only <code class="varname">rast2</code> or a constant that defines what to return when pixels of <code class="varname">rast1</code> are nodata values and spatially corresponding rast2 pixels have values.
								</p></dd><dt><span class="term">nodata2expr</span></dt><dd><p>
									An algebraic expression involving only <code class="varname">rast1</code> or a constant that defines what to return when pixels of <code class="varname">rast2</code> are nodata values and spatially corresponding rast1 pixels have values.
								</p></dd><dt><span class="term">nodatanodataval</span></dt><dd><p>
									A numeric constant to return when spatially corresponding rast1 and rast2 pixels are both nodata values.
								</p></dd></dl></div><p>
						If <code class="varname">pixeltype</code> is passed in, then the new raster will have a band of that pixeltype.  If pixeltype is passed NULL or no pixel type specified, then the new raster band will have the same pixeltype as the input <code class="varname">rast1</code> band.
					</p><p>
						Use the term <code class="varname">[rast1.val]</code>  <code class="varname">[rast2.val]</code> to refer to the pixel value of the original raster bands and <code class="varname">[rast1.x]</code>, <code class="varname">[rast1.y]</code> etc. to refer to the column / row positions of the pixels.
					</p><p>Availability: 2.0.0 </p></div><div class="refsection" title="Example: 2 Band Intersection and Union"><a name="idp92015312"></a><h2>Example: 2 Band Intersection and Union</h2><p>Create a new 1 band raster from our original that is  a function of modulo 2 of the original raster band.</p><pre class="programlisting">
--Create a cool set of rasters --
DROP TABLE IF EXISTS fun_shapes;
CREATE TABLE fun_shapes(rid serial PRIMARY KEY, fun_name text, rast raster);

-- Insert some cool shapes around Boston in Massachusetts state plane meters --
INSERT INTO fun_shapes(fun_name, rast)
VALUES ('ref', ST_AsRaster(ST_MakeEnvelope(235229, 899970, 237229, 901930,26986),200,200,'8BUI',0,0));

INSERT INTO fun_shapes(fun_name,rast)
WITH ref(rast) AS (SELECT rast FROM fun_shapes WHERE fun_name = 'ref' )
SELECT 'area' AS fun_name, ST_AsRaster(ST_Buffer(ST_SetSRID(ST_Point(236229, 900930),26986), 1000),
			ref.rast,'8BUI', 10, 0) As rast
FROM ref
UNION ALL
SELECT 'rand bubbles',
			ST_AsRaster(
			(SELECT ST_Collect(geom)
	FROM (SELECT ST_Buffer(ST_SetSRID(ST_Point(236229 + i*random()*100, 900930 + j*random()*100),26986), random()*20) As geom
			FROM generate_series(1,10) As i, generate_series(1,10) As j
			) As foo ), ref.rast,'8BUI', 200, 0)
FROM ref;

--map them -
SELECT  ST_MapAlgebraExpr(
		area.rast, bub.rast, '[rast2.val]', '8BUI', 'INTERSECTION', '[rast2.val]', '[rast1.val]') As interrast,
		ST_MapAlgebraExpr(
			area.rast, bub.rast, '[rast2.val]', '8BUI', 'UNION', '[rast2.val]', '[rast1.val]') As unionrast
FROM
  (SELECT rast FROM fun_shapes WHERE
 fun_name = 'area') As area
CROSS JOIN  (SELECT rast
FROM fun_shapes WHERE
 fun_name = 'rand bubbles') As bub
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_01.png"><div class="caption"><p>mapalgebra intersection</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_02.png"><div class="caption"><p>map algebra union</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="Example: Overlaying rasters on a canvas as separate bands"><a name="idp92029264"></a><h2>Example: Overlaying rasters on a canvas as separate bands</h2><pre class="programlisting">
-- we use ST_AsPNG to render the image so all single band ones look grey --
WITH mygeoms
    AS ( SELECT 2 As bnum, ST_Buffer(ST_Point(1,5),10) As geom
            UNION ALL
            SELECT 3 AS bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 10,'join=bevel') As geom
            UNION ALL
            SELECT 1 As bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(60 50,150 150,150 50)'), 5,'join=bevel') As geom
            ),
   -- define our canvas to be 1 to 1 pixel to geometry
   canvas
    AS (SELECT ST_AddBand(ST_MakeEmptyRaster(200,
        200,
        ST_XMin(e)::integer, ST_YMax(e)::integer, 1, -1, 0, 0) , '8BUI'::text,0) As rast
        FROM (SELECT ST_Extent(geom) As e,
                    Max(ST_SRID(geom)) As srid
                    from mygeoms
                    ) As foo
            ),
   rbands AS (SELECT ARRAY(SELECT ST_MapAlgebraExpr(canvas.rast, ST_AsRaster(m.geom, canvas.rast, '8BUI', 100),
                 '[rast2.val]', '8BUI', 'FIRST', '[rast2.val]', '[rast1.val]') As rast
                FROM mygeoms AS m CROSS JOIN canvas
                ORDER BY m.bnum) As rasts
                )
          SELECT rasts[1] As rast1 , rasts[2] As rast2, rasts[3] As rast3, ST_AddBand(
                    ST_AddBand(rasts[1],rasts[2]), rasts[3]) As final_rast
            FROM rbands;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_04.png"><div class="caption"><p>rast1</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_05.png"><div class="caption"><p>rast2</p></div></div></div><p>
										</p>
									</td></tr><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_06.png"><div class="caption"><p>rast3</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_07.png"><div class="caption"><p>final_rast</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="Example: Overlay 2 meter boundary of select parcels over an aerial imagery"><a name="idp92053584"></a><h2>Example: Overlay 2 meter boundary of select parcels over an aerial imagery</h2><pre class="programlisting">-- Create new 3 band raster composed of first 2 clipped bands, and overlay of 3rd band with our geometry
-- This query took 3.6 seconds on PostGIS windows 64-bit install
WITH pr AS
-- Note the order of operation: we clip all the rasters to dimensions of our region
(SELECT ST_Clip(rast,ST_Expand(geom,50) ) As rast, g.geom
	FROM aerials.o_2_boston AS r INNER JOIN
-- union our parcels of interest so they form a single geometry we can later intersect with
		(SELECT ST_Union(ST_Transform(the_geom,26986)) AS geom
		  FROM landparcels WHERE pid IN('0303890000', '0303900000')) As g
		ON ST_Intersects(rast::geometry, ST_Expand(g.geom,50))
),
-- we then union the raster shards together
-- ST_Union on raster is kinda of slow but much faster the smaller you can get the rasters
-- therefore we want to clip first and then union
prunion AS
(SELECT ST_AddBand(NULL, ARRAY[ST_Union(rast,1),ST_Union(rast,2),ST_Union(rast,3)] ) As clipped,geom
FROM pr
GROUP BY geom)
-- return our final raster which is the unioned shard with
-- with the overlay of our parcel boundaries
-- add first 2 bands, then mapalgebra of 3rd band + geometry
SELECT ST_AddBand(ST_Band(clipped,ARRAY[1,2])
	, ST_MapAlgebraExpr(ST_Band(clipped,3), ST_AsRaster(ST_Buffer(ST_Boundary(geom),2),clipped, '8BUI',250),
	 '[rast2.val]', '8BUI', 'FIRST', '[rast2.val]', '[rast1.val]') ) As rast
FROM prunion;
					</pre><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr2_08.png"><div class="caption"><p>The blue lines are the boundaries of select parcels</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp92059856"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>,
						<a class="xref" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a>,
						<a class="xref" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a>,
						<a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>,
						<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
						<a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>,
						<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>,
						<a class="xref" href="#RT_ST_Union" title="ST_Union">ST_Union</a>,
						<a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebraFct"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebraFct"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFct — 1 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the input raster band and of pixeltype prodived. Band 1 is assumed if no band is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast</var>, integer <var class="pdparam">band</var>, text <var class="pdparam">pixeltype</var>, regprocedure <var class="pdparam">onerasteruserfunc</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92110032"></a><h2>Description</h2><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							<a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> is deprecated as of 2.1.0. Use <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> instead.
						</p></td></tr></table></div><p>Creates a new one band raster formed by applying a valid PostgreSQL function specified by the <code class="varname">onerasteruserfunc</code> on the input raster (<code class="varname">rast</code>). If no <code class="varname">band</code> is specified, band 1 is assumed. The new raster will have the same georeference, width, and height as the original raster but will only have one band.</p><p>If <code class="varname">pixeltype</code> is passed in, then the new raster will have a band of that pixeltype. If pixeltype is passed NULL, then the new raster band will have the same pixeltype as the input <code class="varname">rast</code> band.</p><p>The <code class="varname">onerasteruserfunc</code> parameter must be the name and signature of a SQL or PL/pgSQL function, cast to a regprocedure. A very simple and quite useless PL/pgSQL function example is:
                </p><pre class="programlisting">CREATE OR REPLACE FUNCTION simple_function(pixel FLOAT, pos INTEGER[], VARIADIC args TEXT[])
    RETURNS FLOAT
    AS $$ BEGIN
        RETURN 0.0;
    END; $$
    LANGUAGE 'plpgsql' IMMUTABLE;</pre><p>
                The <code class="varname">userfunction</code> may accept two or three arguments: a float value, an optional integer array, and a variadic text array. The first argument is the value of an individual raster cell (regardless of the raster datatype). The second argument is the position of the current processing cell in the form '{x,y}'. The third argument indicates that all remaining parameters to <a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> shall be passed through to the <code class="varname">userfunction</code>.
					</p><p>
						Passing a <span class="type">regprodedure</span> argument to a SQL function requires the full function signature to be passed, then cast to a <span class="type">regprocedure</span> type. To pass the above example PL/pgSQL function as an argument, the SQL for the argument is:</p><pre class="programlisting">'simple_function(float,integer[],text[])'::regprocedure</pre><p>Note that the argument contains the name of the function, the types of the function arguments, quotes around the name and argument types, and a cast to a <span class="type">regprocedure</span>.
					</p><p>
						The third argument to the <code class="varname">userfunction</code> is a <span class="type">variadic text</span> array. All trailing text arguments to any <a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> call are passed through to the specified <code class="varname">userfunction</code>, and are contained in the <code class="varname">args</code> argument.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For more information about the VARIADIC keyword, please refer to the PostgreSQL documentation and the "SQL Functions with Variable Numbers of Arguments" section of <a class="ulink" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">Query Language (SQL) Functions</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <span class="type">text[]</span> argument to the <code class="varname">userfunction</code> is required, regardless of whether you choose to pass any arguments to your user function for processing or not.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp92125392"></a><h2>Examples</h2><p>Create a new 1 band raster from our original that is a function of modulo 2 of the original raster band.</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast raster;
CREATE FUNCTION mod_fct(pixel float, pos integer[], variadic args text[])
RETURNS float
AS $$
BEGIN
    RETURN pixel::integer % 2;
END;
$$
LANGUAGE 'plpgsql' IMMUTABLE;

UPDATE dummy_rast SET map_rast = ST_MapAlgebraFct(rast,NULL,'mod_fct(float,integer[],text[])'::regprocedure) WHERE rid = 2;

SELECT ST_Value(rast,1,i,j) As origval, ST_Value(map_rast, 1, i, j) As mapval
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     253 |      1
     254 |      0
     253 |      1
     253 |      1
     254 |      0
     254 |      0
     250 |      0
     254 |      0
     254 |      0
					</pre><p>Create a new 1 band raster of pixel-type 2BUI from our original that is reclassified and set the nodata value to a passed parameter to the user function (0).</p><pre class="programlisting">ALTER TABLE dummy_rast ADD COLUMN map_rast2 raster;
CREATE FUNCTION classify_fct(pixel float, pos integer[], variadic args text[])
RETURNS float
AS
$$
DECLARE
    nodata float := 0;
BEGIN
    IF NOT args[1] IS NULL THEN
        nodata := args[1];
    END IF;
    IF pixel &lt; 251 THEN
        RETURN 1;
    ELSIF pixel = 252 THEN
        RETURN 2;
    ELSIF pixel &gt; 252 THEN
        RETURN 3;
    ELSE
        RETURN nodata;
    END IF;
END;
$$
LANGUAGE 'plpgsql';
UPDATE dummy_rast SET map_rast2 = ST_MapAlgebraFct(rast,'2BUI','classify_fct(float,integer[],text[])'::regprocedure, '0') WHERE rid = 2;

SELECT DISTINCT ST_Value(rast,1,i,j) As origval, ST_Value(map_rast2, 1, i, j) As mapval
FROM dummy_rast CROSS JOIN generate_series(1, 5) AS i CROSS JOIN generate_series(1,5) AS j
WHERE rid = 2;

 origval | mapval
---------+--------
     249 |      1
     250 |      1
     251 |
     252 |      2
     253 |      3
     254 |      3

SELECT ST_BandPixelType(map_rast2) As b1pixtyp
FROM dummy_rast WHERE rid = 2;

 b1pixtyp
----------
 2BUI
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr01.png"><div class="caption"><p>original (column rast-view)</p></div></div></div></td><td><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebraexpr02.png"><div class="caption"><p>rast_view_ma</p></div></div></div></td></tr></tbody></table></div><p>Create a new 3 band raster same pixel type from our original 3 band raster with first band altered by map algebra and remaining 2 bands unaltered.</p><pre class="programlisting">CREATE FUNCTION rast_plus_tan(pixel float, pos integer[], variadic args text[])
RETURNS float
AS
$$
BEGIN
	RETURN tan(pixel) * pixel;
END;
$$
LANGUAGE 'plpgsql';

SELECT ST_AddBand(
	ST_AddBand(
		ST_AddBand(
			ST_MakeEmptyRaster(rast_view),
			ST_MapAlgebraFct(rast_view,1,NULL,'rast_plus_tan(float,integer[],text[])'::regprocedure)
		),
		ST_Band(rast_view,2)
	),
	ST_Band(rast_view, 3) As rast_view_ma
)
FROM wind
WHERE rid=167;
					</pre></div><div class="refsection" title="See Also"><a name="idp92135504"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
						<a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>,
						<a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebraFct"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebraFct2"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFct — 2 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the 2 input raster bands and of pixeltype prodived. Band 1 is assumed if no band is specified. Extent type defaults to INTERSECTION if not specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast1</var>, raster <var class="pdparam">rast2</var>, regprocedure <var class="pdparam">tworastuserfunc</var>, text <var class="pdparam">pixeltype=same_as_rast1</var>, text <var class="pdparam">extenttype=INTERSECTION</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFct</b>(</code>raster <var class="pdparam">rast1</var>, integer <var class="pdparam">band1</var>, raster <var class="pdparam">rast2</var>, integer <var class="pdparam">band2</var>, regprocedure <var class="pdparam">tworastuserfunc</var>, text <var class="pdparam">pixeltype=same_as_rast1</var>, text <var class="pdparam">extenttype=INTERSECTION</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92166352"></a><h2>Description</h2><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							<a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> is deprecated as of 2.1.0. Use <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> instead.
						</p></td></tr></table></div><p>Creates a new one band raster formed by applying a valid PostgreSQL function specified by the <code class="varname">tworastuserfunc</code> on the input raster <code class="varname">rast1</code>, <code class="varname">rast2</code>. If no <code class="varname">band1</code> or <code class="varname">band2</code> is specified, band 1 is assumed. The new raster will have the same georeference, width, and height as the original rasters but will only have one band.
					</p><p>If <code class="varname">pixeltype</code> is passed in, then the new raster will have a band of that pixeltype. If pixeltype is passed NULL or left out, then the new raster band will have the same pixeltype as the input <code class="varname">rast1</code> band.
					</p><p>The <code class="varname">tworastuserfunc</code> parameter must be the name and signature of an SQL or PL/pgSQL function, cast to a regprocedure. An example PL/pgSQL function example is:
                </p><pre class="programlisting">CREATE OR REPLACE FUNCTION simple_function_for_two_rasters(pixel1 FLOAT, pixel2 FLOAT, pos INTEGER[], VARIADIC args TEXT[])
    RETURNS FLOAT
    AS $$ BEGIN
        RETURN 0.0;
    END; $$
    LANGUAGE 'plpgsql' IMMUTABLE;</pre><p>

						The <code class="varname">tworastuserfunc</code> may accept three or four arguments: a double precision value, a double precision value, an optional integer array, and a variadic text array. The first argument is the value of an individual raster cell in <code class="varname">rast1</code> (regardless of the raster datatype). The second argument is an individual raster cell value in <code class="varname">rast2</code>.  The third argument is the position of the current processing cell in the form '{x,y}'. The fourth argument indicates that all remaining parameters to <a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> shall be passed through to the <code class="varname">tworastuserfunc</code>.
					</p><p>Passing a <span class="type">regprodedure</span> argument to a SQL function requires the full function signature to be passed, then cast to a <span class="type">regprocedure</span> type. To pass the above example PL/pgSQL function as an argument, the SQL for the argument is:</p><pre class="programlisting">'simple_function(double precision, double precision, integer[], text[])'::regprocedure</pre><p>Note that the argument contains the name of the function, the types of the function arguments, quotes around the name and argument types, and a cast to a <span class="type">regprocedure</span>.
					</p><p>The fourst argument to the <code class="varname">tworastuserfunc</code> is a <span class="type">variadic text</span> array. All trailing text arguments to any <a class="xref" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> call are passed through to the specified <code class="varname">tworastuserfunc</code>, and are contained in the <code class="varname">userargs</code> argument.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>For more information about the VARIADIC keyword, please refer to the PostgreSQL documentation and the "SQL Functions with Variable Numbers of Arguments" section of <a class="ulink" href="http://www.postgresql.org/docs/current/static/xfunc-sql.html" target="_top">Query Language (SQL) Functions</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <span class="type">text[]</span> argument to the <code class="varname">tworastuserfunc</code> is required, regardless of whether you choose to pass any arguments to your user function for processing or not.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Example: Overlaying rasters on a canvas as separate bands"><a name="idp92183248"></a><h2>Example: Overlaying rasters on a canvas as separate bands</h2><pre class="programlisting">
-- define our user defined function --
CREATE OR REPLACE FUNCTION raster_mapalgebra_union(
	rast1 double precision,
	rast2 double precision,
    pos integer[],
	VARIADIC userargs text[]
)
	RETURNS double precision
	AS $$
	DECLARE
	BEGIN
		CASE
			WHEN rast1 IS NOT NULL AND rast2 IS NOT NULL THEN
				RETURN ((rast1 + rast2)/2.);
			WHEN rast1 IS NULL AND rast2 IS NULL THEN
				RETURN NULL;
			WHEN rast1 IS NULL THEN
				RETURN rast2;
			ELSE
				RETURN rast1;
		END CASE;

		RETURN NULL;
	END;
	$$ LANGUAGE 'plpgsql' IMMUTABLE COST 1000;

-- prep our test table of rasters
DROP TABLE IF EXISTS map_shapes;
CREATE TABLE map_shapes(rid serial PRIMARY KEY, rast raster, bnum integer, descrip text);
INSERT INTO map_shapes(rast,bnum, descrip)
WITH mygeoms
    AS ( SELECT 2 As bnum, ST_Buffer(ST_Point(90,90),30) As geom, 'circle' As descrip
            UNION ALL
            SELECT 3 AS bnum,
                ST_Buffer(ST_GeomFromText('LINESTRING(50 50,150 150,150 50)'), 15) As geom, 'big road' As descrip
            UNION ALL
            SELECT 1 As bnum,
                ST_Translate(ST_Buffer(ST_GeomFromText('LINESTRING(60 50,150 150,150 50)'), 8,'join=bevel'), 10,-6) As geom, 'small road' As descrip
            ),
   -- define our canvas to be 1 to 1 pixel to geometry
   canvas
    AS ( SELECT ST_AddBand(ST_MakeEmptyRaster(250,
        250,
        ST_XMin(e)::integer, ST_YMax(e)::integer, 1, -1, 0, 0 ) , '8BUI'::text,0) As rast
        FROM (SELECT ST_Extent(geom) As e,
                    Max(ST_SRID(geom)) As srid
                    from mygeoms
                    ) As foo
            )
-- return our rasters aligned with our canvas
SELECT ST_AsRaster(m.geom, canvas.rast, '8BUI', 240) As rast, bnum, descrip
                FROM mygeoms AS m CROSS JOIN canvas
UNION ALL
SELECT canvas.rast, 4, 'canvas'
FROM canvas;

-- Map algebra on single band rasters and then collect with ST_AddBand
INSERT INTO map_shapes(rast,bnum,descrip)
SELECT ST_AddBand(ST_AddBand(rasts[1], rasts[2]),rasts[3]), 4, 'map bands overlay fct union (canvas)'
	FROM (SELECT ARRAY(SELECT ST_MapAlgebraFct(m1.rast, m2.rast,
			'raster_mapalgebra_union(double precision, double precision, integer[], text[])'::regprocedure, '8BUI', 'FIRST')
                FROM map_shapes As m1 CROSS JOIN map_shapes As m2
	WHERE m1.descrip = 'canvas' AND m2.descrip &lt;&gt; 'canvas' ORDER BY m2.bnum) As rasts) As foo;
					</pre><div class="informaltable"><table border="1"><colgroup><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafct2_01.png"><div class="caption"><p>map bands overlay (canvas) (R: small road, G: circle, B: big road)</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="User Defined function that takes extra args"><a name="idp92197456"></a><h2>User Defined function that takes extra args</h2><pre class="programlisting">
CREATE OR REPLACE FUNCTION raster_mapalgebra_userargs(
	rast1 double precision,
	rast2 double precision,
    pos integer[],
	VARIADIC userargs text[]
)
	RETURNS double precision
	AS $$
	DECLARE
	BEGIN
		CASE
			WHEN rast1 IS NOT NULL AND rast2 IS NOT NULL THEN
				RETURN least(userargs[1]::integer,(rast1 + rast2)/2.);
			WHEN rast1 IS NULL AND rast2 IS NULL THEN
				RETURN userargs[2]::integer;
			WHEN rast1 IS NULL THEN
				RETURN greatest(rast2,random()*userargs[3]::integer)::integer;
			ELSE
				RETURN greatest(rast1, random()*userargs[4]::integer)::integer;
		END CASE;

		RETURN NULL;
	END;
	$$ LANGUAGE 'plpgsql' VOLATILE COST 1000;

SELECT ST_MapAlgebraFct(m1.rast, 1, m1.rast, 3,
			'raster_mapalgebra_userargs(double precision, double precision, integer[], text[])'::regprocedure,
				'8BUI', 'INTERSECT', '100','200','200','0')
                FROM map_shapes As m1
	WHERE m1.descrip = 'map bands overlay fct union (canvas)';
					</pre><p>
						</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafct2_02.png"><div class="caption"><p>user defined with extra args and different bands from same raster</p></div></div></div><p>
					</p></div><div class="refsection" title="See Also"><a name="idp92201296"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
						<a class="xref" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a>,
						<a class="xref" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a>
					</p></div></div><div class="refentry" title="ST_MapAlgebraFctNgb"><div class="refentry.separator"><hr></div><a name="RT_ST_MapAlgebraFctNgb"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MapAlgebraFctNgb — 1-band version: Map Algebra Nearest Neighbor using user-defined PostgreSQL function. Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_MapAlgebraFctNgb</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, text  <var class="pdparam">pixeltype</var>, integer  <var class="pdparam">ngbwidth</var>, integer  <var class="pdparam">ngbheight</var>, regprocedure  <var class="pdparam">onerastngbuserfunc</var>, text  <var class="pdparam">nodatamode</var>, text[]  <var class="pdparam">VARIADIC args</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92216016"></a><h2>Description</h2><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> is deprecated as of 2.1.0. Use <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> instead.
						</p></td></tr></table></div><p>(one raster version) Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band. The user function takes the neighborhood of pixel values as an array of numbers, for each pixel, returns the result from the user function, replacing pixel value of currently inspected pixel with the function result. </p><div class="variablelist"><dl><dt><span class="term">rast</span></dt><dd><p>Raster on which the user function is evaluated.</p></dd><dt><span class="term">band</span></dt><dd><p>Band number of the raster to be evaluated. Default to 1.</p></dd><dt><span class="term">pixeltype</span></dt><dd><p>The resulting pixel type of the output raster.  Must be one listed in <a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> or left out or set to NULL.  If not passed in or set to NULL, will default to the pixeltype of the <code class="varname">rast</code>. Results are truncated if they are larger than what is allowed for the pixeltype.</p></dd><dt><span class="term">ngbwidth</span></dt><dd><p>The width of the neighborhood, in cells.</p></dd><dt><span class="term">ngbheight</span></dt><dd><p>The height of the neighborhood, in cells.</p></dd><dt><span class="term">onerastngbuserfunc</span></dt><dd><p>PLPGSQL/psql user function to apply to neighborhood pixels of a single band of a raster. The first element is a 2-dimensional array of numbers representing the rectangular pixel neighborhood</p></dd><dt><span class="term">nodatamode</span></dt><dd><p>Defines what value to pass to the function for a neighborhood pixel that is nodata or NULL</p><p>'ignore': any NODATA values encountered in the neighborhood are ignored by the computation -- this flag must be sent to the user callback function, and the user function decides how to ignore it.</p><p>'NULL': any NODATA values encountered in the neighborhood will cause the resulting pixel to be NULL -- the user callback function is skipped in this case.</p><p>'value': any NODATA values encountered in the neighborhood are replaced by the reference pixel (the one in the center of the neighborhood). Note that if this value is NODATA, the behavior is the same as 'NULL' (for the affected neighborhood)</p></dd><dt><span class="term">args</span></dt><dd><p>Arguments to pass into the user function.</p></dd></dl></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp92232144"></a><h2>Examples</h2><p>Examples utilize the katrina raster loaded as a single tile described in <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html" target="_top">http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html</a> and then prepared in the <a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> examples </p><pre class="programlisting">
--
-- A simple 'callback' user function that averages up all the values in a neighborhood.
--
CREATE OR REPLACE FUNCTION rast_avg(matrix float[][], nodatamode text, variadic args text[])
    RETURNS float AS
    $$
    DECLARE
		_matrix float[][];
        x1 integer;
        x2 integer;
        y1 integer;
        y2 integer;
        sum float;
    BEGIN
		_matrix := matrix;
        sum := 0;
        FOR x in array_lower(matrix, 1)..array_upper(matrix, 1) LOOP
            FOR y in array_lower(matrix, 2)..array_upper(matrix, 2) LOOP
                sum := sum + _matrix[x][y];
            END LOOP;
        END LOOP;
        RETURN (sum*1.0/(array_upper(matrix,1)*array_upper(matrix,2) ))::integer ;
    END;
    $$
LANGUAGE 'plpgsql' IMMUTABLE COST 1000;

-- now we apply to our raster averaging pixels within 2 pixels of each other in X and Y direction --
SELECT ST_MapAlgebraFctNgb(rast, 1,  '8BUI', 4,4,
		'rast_avg(float[][], text, text[])'::regprocedure, 'NULL', NULL) As nn_with_border
	FROM katrinas_rescaled
	limit 1;
					</pre><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafctngb01.png"><div class="caption"><p>First band of our raster</p></div></div></div><p>
										</p>
									</td><td>
										<p>
											</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_mapalgebrafctngb02.png"><div class="caption"><p>new raster after averaging pixels withing 4x4 pixels of each other</p></div></div></div><p>
										</p>
									</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp92243152"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a>,
						<a class="xref" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a>,
						<a class="xref" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a>
					</p></div></div><div class="refentry" title="ST_Reclass"><div class="refentry.separator"><hr></div><a name="RT_ST_Reclass"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Reclass — Creates a new raster composed of band types reclassified from original.  The nband is the band to be changed.  If nband is not specified assumed to be 1.  All other bands are returned unchanged. Use case: convert a 16BUI band to a 8BUI and so forth for simpler rendering as viewable formats.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Reclass</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, text  <var class="pdparam">reclassexpr</var>, text  <var class="pdparam">pixeltype</var>, double precision  <var class="pdparam">nodataval=NULL</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Reclass</b>(</code>raster  <var class="pdparam">rast</var>, reclassarg[]  <var class="pdparam">VARIADIC reclassargset</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Reclass</b>(</code>raster  <var class="pdparam">rast</var>, text  <var class="pdparam">reclassexpr</var>, text  <var class="pdparam">pixeltype</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92266064"></a><h2>Description</h2><p>Creates a new raster formed by applying a valid PostgreSQL algebraic operation defined by the <code class="varname">reclassexpr</code> on the input raster (<code class="varname">rast</code>). If no <code class="varname">band</code> is specified band 1 is assumed.  The new raster will have the same georeference, width, and height as the original raster.  Bands not designated will come back unchanged.  Refer to <a class="xref" href="#reclassarg" title="reclassarg">reclassarg</a> for description of valid reclassification expressions.</p><p>The bands of the new raster will have pixel type of <code class="varname">pixeltype</code>.  If <code class="varname">reclassargset</code> is passed in then each reclassarg defines behavior of each band generated.</p><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples Basic"><a name="idp92278608"></a><h2>Examples Basic</h2><p>Create a new raster from the original where band 2 is converted from 8BUI to 4BUI and all values from 101-254 are set to nodata value.</p><pre class="programlisting">
ALTER TABLE dummy_rast ADD COLUMN reclass_rast raster;
UPDATE dummy_rast SET reclass_rast = ST_Reclass(rast,2,'0-87:1-10, 88-100:11-15, 101-254:0-0', '4BUI',0) WHERE rid = 2;

SELECT i as col, j as row, ST_Value(rast,2,i,j) As origval,
    ST_Value(reclass_rast, 2, i, j) As reclassval,
    ST_Value(reclass_rast, 2, i, j, false) As reclassval_include_nodata
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

 col | row | origval | reclassval | reclassval_include_nodata
-----+-----+---------+------------+---------------------------
   1 |   1 |      78 |          9 |                         9
   2 |   1 |      98 |         14 |                        14
   3 |   1 |     122 |            |                         0
   1 |   2 |      96 |         14 |                        14
   2 |   2 |     118 |            |                         0
   3 |   2 |     180 |            |                         0
   1 |   3 |      99 |         15 |                        15
   2 |   3 |     112 |            |                         0
   3 |   3 |     169 |            |                         0
					</pre></div><div class="refsection" title="Example: Advanced using multiple reclassargs"><a name="idp92280272"></a><h2>Example: Advanced using multiple reclassargs</h2><p>Create a new raster from the original where band 1,2,3 is converted to 1BB,4BUI, 4BUI respectively and reclassified. Note this uses the variadic <code class="varname">reclassarg</code> argument which can take as input an indefinite number of reclassargs (theoretically as many bands as you have) </p><pre class="programlisting">
UPDATE dummy_rast SET reclass_rast =
    ST_Reclass(rast,
        ROW(2,'0-87]:1-10, (87-100]:11-15, (101-254]:0-0', '4BUI',NULL)::reclassarg,
        ROW(1,'0-253]:1, 254:0', '1BB', NULL)::reclassarg,
        ROW(3,'0-70]:1, (70-86:2, [86-150):3, [150-255:4', '4BUI', NULL)::reclassarg
        ) WHERE rid = 2;

SELECT i as col, j as row,ST_Value(rast,1,i,j) As ov1,  ST_Value(reclass_rast, 1, i, j) As rv1,
    ST_Value(rast,2,i,j) As ov2, ST_Value(reclass_rast, 2, i, j) As rv2,
    ST_Value(rast,3,i,j) As ov3, ST_Value(reclass_rast, 3, i, j) As rv3
FROM dummy_rast CROSS JOIN generate_series(1, 3) AS i CROSS JOIN generate_series(1,3) AS j
WHERE rid = 2;

col | row | ov1 | rv1 | ov2 | rv2 | ov3 | rv3
----+-----+-----+-----+-----+-----+-----+-----
  1 |   1 | 253 |   1 |  78 |   9 |  70 |   1
  2 |   1 | 254 |   0 |  98 |  14 |  86 |   3
  3 |   1 | 253 |   1 | 122 |   0 | 100 |   3
  1 |   2 | 253 |   1 |  96 |  14 |  80 |   2
  2 |   2 | 254 |   0 | 118 |   0 | 108 |   3
  3 |   2 | 254 |   0 | 180 |   0 | 162 |   4
  1 |   3 | 250 |   1 |  99 |  15 |  90 |   3
  2 |   3 | 254 |   0 | 112 |   0 | 108 |   3
  3 |   3 | 254 |   0 | 169 |   0 | 175 |   4
					</pre></div><div class="refsection" title="Example: Advanced Map a single band 32BF raster to multiple viewable bands"><a name="idp92282448"></a><h2>Example: Advanced Map a single band 32BF raster to multiple viewable bands</h2><p>Create a new 3 band (8BUI,8BUI,8BUI viewable raster) from a raster that has only one 32bf band </p><pre class="programlisting">
ALTER TABLE wind ADD COLUMN rast_view raster;
UPDATE wind
	set rast_view = ST_AddBand( NULL,
        ARRAY[
	ST_Reclass(rast, 1,'0.1-10]:1-10,9-10]:11,(11-33:0'::text, '8BUI'::text,0),
	ST_Reclass(rast,1, '11-33):0-255,[0-32:0,(34-1000:0'::text, '8BUI'::text,0),
	ST_Reclass(rast,1,'0-32]:0,(32-100:100-255'::text, '8BUI'::text,0)
	]
	);
					</pre></div><div class="refsection" title="See Also"><a name="idp92288336"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>,
						<a class="xref" href="#RT_ST_Band" title="ST_Band">ST_Band</a>,
						<a class="xref" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a>,
						<a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>,
						<a class="xref" href="#reclassarg" title="reclassarg">reclassarg</a>,
						<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>
					</p></div></div><div class="refentry" title="ST_Union"><div class="refentry.separator"><hr></div><a name="RT_ST_Union"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Union — Returns the union of a set of raster tiles into a single raster composed of 1 or more bands.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Union</b>(</code>setof raster  <var class="pdparam">rast</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Union</b>(</code>setof raster  <var class="pdparam">rast</var>, unionarg[]  <var class="pdparam">unionargset</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Union</b>(</code>setof raster <var class="pdparam">rast</var>, integer <var class="pdparam">nband</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Union</b>(</code>setof raster <var class="pdparam">rast</var>, text <var class="pdparam">uniontype</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Union</b>(</code>setof raster <var class="pdparam">rast</var>, integer <var class="pdparam">nband</var>, text <var class="pdparam">uniontype</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92316240"></a><h2>Description</h2><p>Returns the union of a set of raster tiles into a single raster composed of at least one band.  The resulting raster's extent is the extent of the whole set.  In the case of intersection, the resulting value is defined by <code class="varname">uniontype</code> which is one of the following: LAST (default), FIRST, MIN, MAX, COUNT, SUM, MEAN, RANGE.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In order for rasters to be unioned, they most all have the same alignment.  Use <a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> and <a class="xref" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> for more details and help. One way to fix alignment issues is to use <a class="xref" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> and use the same reference raster for alignment.</p></td></tr></table></div><p>Availability: 2.0.0 </p><p>Enhanced: 2.1.0 Improved Speed (fully C-Based).</p><p>Availability: 2.1.0 ST_Union(rast, unionarg) variant was introduced.</p><p>Enhanced: 2.1.0 ST_Union(rast) (variant 1) unions all bands of all input rasters.  Prior versions of PostGIS assumed the first band.</p><p>Enhanced: 2.1.0 ST_Union(rast, uniontype) (variant 4) unions all bands of all input rasters.</p></div><div class="refsection" title="Examples: Reconstitute a single band chunked raster tile"><a name="idp92321616"></a><h2>Examples: Reconstitute a single band chunked raster tile</h2><pre class="programlisting">
-- this creates a single band from first band of raster tiles
-- that form the original file system tile
SELECT filename, ST_Union(rast,1) As file_rast
FROM sometable WHERE filename IN('dem01', 'dem02') GROUP BY filename;
					</pre></div><div class="refsection" title="Examples: Return a multi-band raster that is the union of tiles intersecting geometry"><a name="idp92322896"></a><h2>Examples: Return a multi-band raster that is the union of tiles intersecting geometry</h2><pre class="programlisting">
-- this creates a multi band raster collecting all the tiles that intersect a line
-- Note: In 2.0, this would have just returned a single band raster
-- , new union works on all bands by default
-- this is equivalent to unionarg: ARRAY[ROW(1, 'LAST'), ROW(2, 'LAST'), ROW(3, 'LAST')]::unionarg[]
SELECT ST_Union(rast)
FROM aerials.boston
WHERE ST_Intersects(rast,  ST_GeomFromText('LINESTRING(230486 887771, 230500 88772)',26986) );
					</pre></div><div class="refsection" title="Examples: Return a multi-band raster that is the union of tiles intersecting geometry"><a name="idp92324176"></a><h2>Examples: Return a multi-band raster that is the union of tiles intersecting geometry</h2><p>Here we use the longer syntax if we only wanted a subset of bands or we want to change order of bands</p><pre class="programlisting">
-- this creates a multi band raster collecting all the tiles that intersect a line
SELECT ST_Union(rast,ARRAY[ROW(2, 'LAST'), ROW(1, 'LAST'), ROW(3, 'LAST')]::unionarg[])
FROM aerials.boston
WHERE ST_Intersects(rast,  ST_GeomFromText('LINESTRING(230486 887771, 230500 88772)',26986) );
					</pre></div><div class="refsection" title="See Also"><a name="idp92326224"></a><h2>See Also</h2><p>
						<a class="xref" href="#unionarg" title="unionarg">unionarg</a>,
						<a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>,
						<a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>,
						<a class="xref" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a>,
						<a class="xref" href="#ST_Union" title="ST_Union">ST_Union</a>
					</p></div></div></div><div class="sect2" title="9.11.2. Built-in Map Algebra Callback Functions"><div class="titlepage"><div><div><h3 class="title"><a name="Raster_Processing_MapAlgebra_Callbacks"></a>9.11.2. Built-in Map Algebra Callback Functions</h3></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_Distinct4ma">ST_Distinct4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the number of unique pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_InvDistWeight4ma">ST_InvDistWeight4ma</a></span><span class="refpurpose"> — Raster processing function that interpolates a pixel's value from the pixel's neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Max4ma">ST_Max4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the maximum pixel value in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Mean4ma">ST_Mean4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the mean pixel value in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Min4ma">ST_Min4ma</a></span><span class="refpurpose"> — 
					Raster processing function that calculates the minimum pixel value in a neighborhood.
				</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MinDist4ma">ST_MinDist4ma</a></span><span class="refpurpose"> — Raster processing function that returns the minimum distance (in number of pixels) between the pixel of interest and a neighboring pixel with value.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Range4ma">ST_Range4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the range of pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_StdDev4ma">ST_StdDev4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the standard deviation of pixel values in a neighborhood.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Sum4ma">ST_Sum4ma</a></span><span class="refpurpose"> — Raster processing function that calculates the sum of all pixel values in a neighborhood.</span></dt></dl></div><div class="refentry" title="ST_Distinct4ma"><a name="RT_ST_Distinct4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Distinct4ma — Raster processing function that calculates the number of unique pixel values in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Distinct4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Distinct4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92345680"></a><h2>Description</h2><p>Calculate the number of unique pixel values in a neighborhood of pixels.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92351056"></a><h2>Examples</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_distinct4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |        3
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92352336"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
                </p></div></div><div class="refentry" title="ST_InvDistWeight4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_InvDistWeight4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_InvDistWeight4ma — Raster processing function that interpolates a pixel's value from the pixel's neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_InvDistWeight4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][] <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92363472"></a><h2>Description</h2><p>Calculate an interpolated value for a pixel using the Inverse Distance Weighted method.</p><p>
					There are two optional parameters that can be passed through <code class="varname">userargs</code>. The first parameter is the power factor (variable k in the equation below) between 0 and 1 used in the Inverse Distance Weighted equation. If not specified, default value is 1. The second parameter is the weight percentage applied only when the value of the pixel of interest is included with the interpolated value from the neighborhood. If not specified and the pixel of interest has a value, that value is returned.
				</p><p>
					The basic inverse distance weight equation is:

					</p><div class="informalfigure"><div class="mediaobject"><img src="images/st_invdistweight4ma_equation.png"><div class="caption"><p>
									k = power factor, a real number between 0 and 1
								</p></div></div></div><p>
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92369872"></a><h2>Examples</h2><pre class="programlisting">
-- NEEDS EXAMPLE
				</pre></div><div class="refsection" title="See Also"><a name="idp92371152"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_MinDist4ma" title="ST_MinDist4ma">ST_MinDist4ma</a>
				</p></div></div><div class="refentry" title="ST_Max4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_Max4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Max4ma — Raster processing function that calculates the maximum pixel value in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Max4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Max4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92392272"></a><h2>Description</h2><p>Calculate the maximum pixel value in a neighborhood of pixels.</p><p>
					For Variant 2, a substitution value for NODATA pixels can be specified by passing that value to userargs.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92398288"></a><h2>Examples</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_max4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |      254
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92399568"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_Mean4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_Mean4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Mean4ma — Raster processing function that calculates the mean pixel value in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Mean4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Mean4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92419024"></a><h2>Description</h2><p>Calculate the mean pixel value in a neighborhood of pixels.</p><p>
					For Variant 2, a substitution value for NODATA pixels can be specified by passing that value to userargs.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp92425040"></a><h2>Examples: Variant 1</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_mean4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 253.222229003906
(1 row)
				</pre></div><div class="refsection" title="Examples: Variant 2"><a name="idp92426320"></a><h2>Examples: Variant 2</h2><pre class="programlisting">SELECT
    rid,
    st_value(
              ST_MapAlgebra(rast, 1, 'st_mean4ma(double precision[][][], integer[][], text[])'::regprocedure,'32BF', 'FIRST', NULL, 1, 1)
       ,  2, 2)
  FROM dummy_rast
   WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 253.222229003906
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp92427600"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_Min4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_Min4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Min4ma — 
					Raster processing function that calculates the minimum pixel value in a neighborhood.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Min4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text  <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Min4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92450768"></a><h2>Description</h2><p>
					Calculate the minimum pixel value in a neighborhood of pixels.
				</p><p>
					For Variant 2, a substitution value for NODATA pixels can be specified by passing that value to userargs.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92456784"></a><h2>Examples</h2><pre class="programlisting">
SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_min4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |      250
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92458064"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_MinDist4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_MinDist4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinDist4ma — Raster processing function that returns the minimum distance (in number of pixels) between the pixel of interest and a neighboring pixel with value.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">double precision <b class="fsfunc">ST_MinDist4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][] <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92469072"></a><h2>Description</h2><p>Return the shortest distance (in number of pixels) between the pixel of interest and the closest pixel with value in the neighborhood.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						The intent of this function is to provide an informative data point that helps infer the usefulness of the pixel of interest's interpolated value from <a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>. This function is particularly useful when the neighborhood is sparsely populated.
					</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92473040"></a><h2>Examples</h2><pre class="programlisting">
-- NEEDS EXAMPLE
				</pre></div><div class="refsection" title="See Also"><a name="idp92474320"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a>
				</p></div></div><div class="refentry" title="ST_Range4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_Range4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Range4ma — Raster processing function that calculates the range of pixel values in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Range4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Range4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92495440"></a><h2>Description</h2><p>Calculate the range of pixel values in a neighborhood of pixels.</p><p>
					For Variant 2, a substitution value for NODATA pixels can be specified by passing that value to userargs.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92501456"></a><h2>Examples</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, NULL, 1, 1, 'st_range4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |        4
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92502736"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_StdDev4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_StdDev4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_StdDev4ma — Raster processing function that calculates the standard deviation of pixel values in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_StdDev4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text  <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_StdDev4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92518096"></a><h2>Description</h2><p>Calculate the standard deviation of pixel values in a neighborhood of pixels.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92523600"></a><h2>Examples</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_stddev4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid |     st_value
-----+------------------
   2 | 1.30170822143555
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92524880"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div><div class="refentry" title="ST_Sum4ma"><div class="refentry.separator"><hr></div><a name="RT_ST_Sum4ma"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Sum4ma — Raster processing function that calculates the sum of all pixel values in a neighborhood.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">float8 <b class="fsfunc">ST_Sum4ma</b>(</code>float8[][] <var class="pdparam">matrix</var>, text <var class="pdparam">nodatamode</var>, text[] <var class="pdparam">VARIADIC args</var><code>)</code>;</p><p><code class="funcdef">double precision <b class="fsfunc">ST_Sum4ma</b>(</code>double precision[][][] <var class="pdparam">value</var>, integer[][]  <var class="pdparam">pos</var>, text[] <var class="pdparam">VARIADIC userargs</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92540240"></a><h2>Description</h2><p>Calculate the sum of all pixel values in a neighborhood of pixels.</p><p>
					For Variant 2, a substitution value for NODATA pixels can be specified by passing that value to userargs.
				</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Variant 1 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Variant 2 is a specialized callback function for use as a callback parameter to <a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>.
					</p></td></tr></table></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						Use of Variant 1 is discouraged since <a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> has been deprecated as of 2.1.0.
					</p></td></tr></table></div><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 Addition of Variant 2</p></div><div class="refsection" title="Examples"><a name="idp92554448"></a><h2>Examples</h2><pre class="programlisting">SELECT
    rid,
    st_value(
        st_mapalgebrafctngb(rast, 1, '32BF', 1, 1, 'st_sum4ma(float[][],text,text[])'::regprocedure, 'ignore', NULL), 2, 2
    )
FROM dummy_rast
WHERE rid = 2;
 rid | st_value
-----+----------
   2 |     2279
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp92555728"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a>,
					<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
					<a class="xref" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a>,
					<a class="xref" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a>,
					<a class="xref" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a>,
					<a class="xref" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a>,
					<a class="xref" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a>,
					<a class="xref" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a>
				</p></div></div></div><div class="sect2" title="9.11.3. DEM (Elevation)"><div class="titlepage"><div><div><h3 class="title"><a name="Raster_Processing_DEM"></a>9.11.3. DEM (Elevation)</h3></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_Aspect">ST_Aspect</a></span><span class="refpurpose"> — Returns the aspect (in degrees by default) of an elevation raster band.  Useful for analyzing terrain.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_HillShade">ST_HillShade</a></span><span class="refpurpose"> — Returns the hypothetical illumination of an elevation raster band using provided azimuth, altitude, brightness and scale inputs.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Roughness">ST_Roughness</a></span><span class="refpurpose"> — Returns a raster with the calculated "roughness" of a DEM.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Slope">ST_Slope</a></span><span class="refpurpose"> — Returns the slope (in degrees by default) of an elevation raster band.  Useful for analyzing terrain.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_TPI">ST_TPI</a></span><span class="refpurpose"> — Returns a raster with the calculated Topographic Position Index.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_TRI">ST_TRI</a></span><span class="refpurpose"> — Returns a raster with the calculated Terrain Ruggedness Index.</span></dt></dl></div><div class="refentry" title="ST_Aspect"><a name="RT_ST_Aspect"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Aspect — Returns the aspect (in degrees by default) of an elevation raster band.  Useful for analyzing terrain.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Aspect</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Aspect</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92586576"></a><h2>Description</h2><p>Returns the aspect (in degrees by default) of an elevation raster band. Utilizes map algebra and applies the aspect equation to neighboring pixels.</p><p>
						<code class="varname">units</code> indicates the units of the aspect. Possible values are: RADIANS, DEGREES (default).
					</p><p>
						When <code class="varname">units</code> = RADIANS, values are between 0 and 2 * pi radians measured clockwise from North.
					</p><p>
						When <code class="varname">units</code> = DEGREES, values are between 0 and 360 degrees measured clockwise from North.
					</p><p>
						If slope of pixel is zero, aspect of pixel is -1.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
                            For more information about Slope, Aspect and Hillshade, please refer to <a class="ulink" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top">ESRI - How hillshade works</a> and <a class="ulink" href="http://e2b.erdas.com/fieldguide/wwhelp/wwhimpl/common/html/wwhelp.htm?context=FieldGuide&amp;file=Aspect_Images.html" target="_top">ERDAS Field Guide - Aspect Images</a>.
						</p></td></tr></table></div><p>Availability: 2.0.0 </p><p>Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional <code class="varname">interpolate_nodata</code> function parameter</p><p>Changed: 2.1.0 In prior versions, return values were in radians. Now, return values default to degrees</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp92593872"></a><h2>Examples: Variant 1</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_SetValues(
		ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
		1, 1, 1, ARRAY[
			[1, 1, 1, 1, 1],
			[1, 2, 2, 2, 1],
			[1, 2, 3, 2, 1],
			[1, 2, 2, 2, 1],
			[1, 1, 1, 1, 1]
		]::double precision[][]
	) AS rast
)
SELECT
	ST_DumpValues(ST_Aspect(rast, 1, '32BF'))
FROM foo

                                                                                                    st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
----------------------------------
 (1,"{{315,341.565063476562,0,18.4349479675293,45},{288.434936523438,315,0,45,71.5650482177734},{270,270,-1,90,90},{251.565048217773,225,180,135,108.434951782227},{225,198.43495178
2227,180,161.565048217773,135}}")
(1 row)
					</pre></div><div class="refsection" title="Examples: Variant 2"><a name="idp92595280"></a><h2>Examples: Variant 2</h2><p>Complete example of tiles of a coverage.  This query only works with PostgreSQL 9.1 or higher.</p><pre class="programlisting">
WITH foo AS (
	SELECT ST_Tile(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
				1, '32BF', 0, -9999
			),
			1, 1, 1, ARRAY[
				[1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 2, 1],
				[1, 2, 2, 3, 3, 1],
				[1, 1, 3, 2, 1, 1],
				[1, 2, 2, 1, 2, 1],
				[1, 1, 1, 1, 1, 1]
			]::double precision[]
		),
		2, 2
	) AS rast
)
SELECT
	t1.rast,
	ST_Aspect(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
					</pre></div><div class="refsection" title="See Also"><a name="idp92596944"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>,
						<a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>,
						<a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>,
						<a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>,
						<a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>
					</p></div></div><div class="refentry" title="ST_HillShade"><div class="refentry.separator"><hr></div><a name="RT_ST_HillShade"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_HillShade — Returns the hypothetical illumination of an elevation raster band using provided azimuth, altitude, brightness and scale inputs.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_HillShade</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, double precision  <var class="pdparam">azimuth=315</var>, double precision  <var class="pdparam">altitude=45</var>, double precision  <var class="pdparam">max_bright=255</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_HillShade</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, double precision  <var class="pdparam">azimuth=315</var>, double precision  <var class="pdparam">altitude=45</var>, double precision  <var class="pdparam">max_bright=255</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92628688"></a><h2>Description</h2><p>Returns the hypothetical illumination of an elevation raster band using the azimuth, altitude, brightness, and scale inputs. Utilizes map algebra and applies the hill shade equation to neighboring pixels. Return pixel values are between 0 and 255.</p><p>
						<code class="varname">azimuth</code> is a value between 0 and 360 degrees measured clockwise from North.
					</p><p>
						<code class="varname">altitude</code> is a value between 0 and 90 degrees where 0 degrees is at the horizon and 90 degrees is directly overhead.
					</p><p>
						<code class="varname">max_bright</code> is a value between 0 and 255 with 0 as no brightness and 255 as max brightness.
					</p><p>
						<code class="varname">scale</code> is the ratio of vertical units to horizontal. For Feet:LatLon use scale=370400, for Meters:LatLon use scale=111120.
					</p><p>
						If <code class="varname">interpolate_nodata</code> is TRUE, values for NODATA pixels from the input raster will be interpolated using <a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a> before computing the hillshade illumination.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							For more information about Hillshade, please refer to <a class="ulink" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top">How hillshade works</a>.
						</p></td></tr></table></div><p>Availability: 2.0.0 </p><p>Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional <code class="varname">interpolate_nodata</code> function parameter</p><p>Changed: 2.1.0 In prior versions, azimuth and altitude were expressed in radians. Now, azimuth and altitude are expressed in degrees</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp92637264"></a><h2>Examples: Variant 1</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_SetValues(
		ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
		1, 1, 1, ARRAY[
			[1, 1, 1, 1, 1],
			[1, 2, 2, 2, 1],
			[1, 2, 3, 2, 1],
			[1, 2, 2, 2, 1],
			[1, 1, 1, 1, 1]
		]::double precision[][]
	) AS rast
)
SELECT
	ST_DumpValues(ST_Hillshade(rast, 1, '32BF'))
FROM foo

                                                                                                                       st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-----------------------------------------------------------------------
 (1,"{{NULL,NULL,NULL,NULL,NULL},{NULL,251.32763671875,220.749786376953,147.224319458008,NULL},{NULL,220.749786376953,180.312225341797,67.7497863769531,NULL},{NULL,147.224319458008
,67.7497863769531,43.1210060119629,NULL},{NULL,NULL,NULL,NULL,NULL}}")
(1 row)
					</pre></div><div class="refsection" title="Examples: Variant 2"><a name="idp92638544"></a><h2>Examples: Variant 2</h2><p>Complete example of tiles of a coverage.  This query only works with PostgreSQL 9.1 or higher.</p><pre class="programlisting">
WITH foo AS (
	SELECT ST_Tile(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
				1, '32BF', 0, -9999
			),
			1, 1, 1, ARRAY[
				[1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 2, 1],
				[1, 2, 2, 3, 3, 1],
				[1, 1, 3, 2, 1, 1],
				[1, 2, 2, 1, 2, 1],
				[1, 1, 1, 1, 1, 1]
			]::double precision[]
		),
		2, 2
	) AS rast
)
SELECT
	t1.rast,
	ST_Hillshade(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
					</pre></div><div class="refsection" title="See Also"><a name="idp92640336"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>,
						<a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>,
						<a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>,
						<a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>,
						<a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>
					</p></div></div><div class="refentry" title="ST_Roughness"><div class="refentry.separator"><hr></div><a name="RT_ST_Roughness"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Roughness — Returns a raster with the calculated "roughness" of a DEM.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Roughness</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92653136"></a><h2>Description</h2><p>Calculates the "roughness" of a DEM, by subtracting the maximum from the minimum for a given area.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92654672"></a><h2>Examples</h2><pre class="programlisting">
-- needs examples
					</pre></div><div class="refsection" title="See Also"><a name="idp92655952"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>,
						<a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>,
						<a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>,
						<a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>,
						<a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>
					</p></div></div><div class="refentry" title="ST_Slope"><div class="refentry.separator"><hr></div><a name="RT_ST_Slope"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Slope — Returns the slope (in degrees by default) of an elevation raster band.  Useful for analyzing terrain.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_Slope</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=1</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p><p><code class="funcdef">raster <b class="fsfunc">ST_Slope</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype=32BF</var>, text  <var class="pdparam">units=DEGREES</var>, double precision  <var class="pdparam">scale=1.0</var>, boolean  <var class="pdparam">interpolate_nodata=FALSE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92687184"></a><h2>Description</h2><p>Returns the slope (in degrees by default) of an elevation raster band. Utilizes map algebra and applies the slope equation to neighboring pixels.</p><p>
						<code class="varname">units</code> indicates the units of the slope. Possible values are: RADIANS, DEGREES (default), PERCENT.
					</p><p>
						<code class="varname">scale</code> is the ratio of vertical units to horizontal. For Feet:LatLon use scale=370400, for Meters:LatLon use scale=111120.
					</p><p>
						If <code class="varname">interpolate_nodata</code> is TRUE, values for NODATA pixels from the input raster will be interpolated using <a class="xref" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a> before computing the surface slope.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
                            For more information about Slope, Aspect and Hillshade, please refer to <a class="ulink" href="http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=How%20Hillshade%20works" target="_top">ESRI - How hillshade works</a> and <a class="ulink" href="http://e2b.erdas.com/fieldguide/wwhelp/wwhimpl/common/html/wwhelp.htm?context=FieldGuide&amp;file=Slope_Images.html" target="_top">ERDAS Field Guide - Slope Images</a>.
						</p></td></tr></table></div><p>Availability: 2.0.0 </p><p>Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional <code class="varname">units</code>, <code class="varname">scale</code>, <code class="varname">interpolate_nodata</code> function parameters</p><p>Changed: 2.1.0 In prior versions, return values were in radians. Now, return values default to degrees</p></div><div class="refsection" title="Examples: Variant 1"><a name="idp92695376"></a><h2>Examples: Variant 1</h2><pre class="programlisting">
WITH foo AS (
	SELECT ST_SetValues(
		ST_AddBand(ST_MakeEmptyRaster(5, 5, 0, 0, 1, -1, 0, 0, 0), 1, '32BF', 0, -9999),
		1, 1, 1, ARRAY[
			[1, 1, 1, 1, 1],
			[1, 2, 2, 2, 1],
			[1, 2, 3, 2, 1],
			[1, 2, 2, 2, 1],
			[1, 1, 1, 1, 1]
		]::double precision[][]
	) AS rast
)
SELECT
	ST_DumpValues(ST_Slope(rast, 1, '32BF'))
FROM foo

                            st_dumpvalues

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
---------------------------------------------------------------------
 (1,"{{10.0249881744385,21.5681285858154,26.5650520324707,21.5681285858154,10.0249881744385},{21.5681285858154,35.2643890380859,36.8698959350586,35.2643890380859,21.5681285858154},
{26.5650520324707,36.8698959350586,0,36.8698959350586,26.5650520324707},{21.5681285858154,35.2643890380859,36.8698959350586,35.2643890380859,21.5681285858154},{10.0249881744385,21.
5681285858154,26.5650520324707,21.5681285858154,10.0249881744385}}")
(1 row)
					</pre></div><div class="refsection" title="Examples: Variant 2"><a name="idp92696656"></a><h2>Examples: Variant 2</h2><p>Complete example of tiles of a coverage.  This query only works with PostgreSQL 9.1 or higher.</p><pre class="programlisting">
WITH foo AS (
	SELECT ST_Tile(
		ST_SetValues(
			ST_AddBand(
				ST_MakeEmptyRaster(6, 6, 0, 0, 1, -1, 0, 0, 0),
				1, '32BF', 0, -9999
			),
			1, 1, 1, ARRAY[
				[1, 1, 1, 1, 1, 1],
				[1, 1, 1, 1, 2, 1],
				[1, 2, 2, 3, 3, 1],
				[1, 1, 3, 2, 1, 1],
				[1, 2, 2, 1, 2, 1],
				[1, 1, 1, 1, 1, 1]
			]::double precision[]
		),
		2, 2
	) AS rast
)
SELECT
	t1.rast,
	ST_Slope(ST_Union(t2.rast), 1, t1.rast)
FROM foo t1
CROSS JOIN foo t2
WHERE ST_Intersects(t1.rast, t2.rast)
GROUP BY t1.rast;
					</pre></div><div class="refsection" title="See Also"><a name="idp92698448"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>,
						<a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>,
						<a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>,
						<a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>,
						<a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>
					</p></div></div><div class="refentry" title="ST_TPI"><div class="refentry.separator"><hr></div><a name="RT_ST_TPI"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_TPI — Returns a raster with the calculated Topographic Position Index.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_TPI</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92715344"></a><h2>Description</h2><p>Calculates the Topographic Position Index, which is defined as the folcal mean with radius of one minus the center cell.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function only supports a focalmean radius of one.</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92717904"></a><h2>Examples</h2><pre class="programlisting">
-- needs examples
					</pre></div><div class="refsection" title="See Also"><a name="idp92719184"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
						<a class="xref" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a>,
						<a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>,
						<a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>,
						<a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>,
						<a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>
					</p></div></div><div class="refentry" title="ST_TRI"><div class="refentry.separator"><hr></div><a name="RT_ST_TRI"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_TRI — Returns a raster with the calculated Terrain Ruggedness Index.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">raster <b class="fsfunc">ST_TRI</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband</var>, raster  <var class="pdparam">customextent</var>, text  <var class="pdparam">pixeltype="32BF"</var> , boolean  <var class="pdparam"> interpolate_nodata=FALSE </var> <code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92731984"></a><h2>Description</h2><p>
						Terrain Ruggedness Index is calculated by comparing a central pixel with its neighbors, taking the absolute values of the differences, and averaging the result.
					</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function only supports a focalmean radius of one.</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92738512"></a><h2>Examples</h2><pre class="programlisting">
-- needs examples
					</pre></div><div class="refsection" title="See Also"><a name="idp92739792"></a><h2>See Also</h2><p>
							<a class="xref" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a>,
							<a class="xref" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a>,
							<a class="xref" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a>,
							<a class="xref" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a>,
							<a class="xref" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a>,
							<a class="xref" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a>
						</p></div></div></div><div class="sect2" title="9.11.4. Raster to Geometry"><div class="titlepage"><div><div><h3 class="title"><a name="Raster_Processing_Geometry"></a>9.11.4. Raster to Geometry</h3></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_Box3D">Box3D</a></span><span class="refpurpose"> — Returns the box 3d representation of the enclosing box of the raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ConvexHull">ST_ConvexHull</a></span><span class="refpurpose"> — Return the convex hull geometry of the raster including pixel values equal to BandNoDataValue.
					For regular shaped and non-skewed
					rasters, this gives the same result as ST_Envelope so only useful for irregularly shaped or skewed rasters.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_DumpAsPolygons">ST_DumpAsPolygons</a></span><span class="refpurpose"> — Returns a set of geomval (geom,val) rows, from a given raster band.  If no band number is specified, band num defaults to 1.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Envelope">ST_Envelope</a></span><span class="refpurpose"> — Returns the polygon representation of the extent of the raster.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_MinConvexHull">ST_MinConvexHull</a></span><span class="refpurpose"> — 
						Return the convex hull geometry of the raster excluding NODATA pixels.
					</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Polygon">ST_Polygon</a></span><span class="refpurpose"> — Returns a multipolygon geometry formed by the union of pixels that have a pixel value that is not no data value.  If no band number is specified, band num defaults to 1.</span></dt></dl></div><div class="refentry" title="Box3D"><a name="RT_Box3D"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Box3D — Returns the box 3d representation of the enclosing box of the raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">box3d <b class="fsfunc">Box3D</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92749136"></a><h2>Description</h2><p>Returns the box representing the extent of the raster.</p><p>
						The polygon is defined by the corner points of the bounding box ((<code class="varname">MINX</code>, <code class="varname">MINY</code>), (<code class="varname">MAXX</code>, <code class="varname">MAXY</code>))
					</p><p>Changed: 2.0.0 In pre-2.0 versions, there used to be a box2d instead of box3d.  Since box2d is a deprecated type, this was changed to box3d.</p></div><div class="refsection" title="Examples"><a name="idp92752592"></a><h2>Examples</h2><pre class="programlisting">
SELECT
	rid,
	Box3D(rast) AS rastbox
FROM dummy_rast;

rid |        rastbox
----+-------------------------------------------------
1   | BOX3D(0.5 0.5 0,20.5 60.5 0)
2   | BOX3D(3427927.75 5793243.5 0,3427928 5793244 0)
					</pre></div><div class="refsection" title="See Also"><a name="idp92753872"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>
					</p></div></div><div class="refentry" title="ST_ConvexHull"><div class="refentry.separator"><hr></div><a name="RT_ST_ConvexHull"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ConvexHull — Return the convex hull geometry of the raster including pixel values equal to BandNoDataValue.
					For regular shaped and non-skewed
					rasters, this gives the same result as ST_Envelope so only useful for irregularly shaped or skewed rasters.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_ConvexHull</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92760144"></a><h2>Description</h2><p>Return the convex hull geometry of the raster including the NoDataBandValue band pixels. For regular shaped and non-skewed
					rasters, this gives more or less the same result as ST_Envelope
					so only useful for irregularly shaped or skewed rasters.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>ST_Envelope floors the coordinates and hence add a little buffer around the raster so the answer is subtly
						different from ST_ConvexHull which does not floor.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp92761936"></a><h2>Examples</h2><p>Refer to <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRaster/SpecificationWorking01" target="_top">PostGIS Raster Specification</a> for a diagram of this.</p><pre class="programlisting">
-- Note envelope and convexhull are more or less the same
SELECT ST_AsText(ST_ConvexHull(rast)) As convhull,
	ST_AsText(ST_Envelope(rast)) As env
FROM dummy_rast WHERE rid=1;

                        convhull                        |                env
--------------------------------------------------------+------------------------------------
 POLYGON((0.5 0.5,20.5 0.5,20.5 60.5,0.5 60.5,0.5 0.5)) | POLYGON((0 0,20 0,20 60,0 60,0 0))
				</pre><pre class="programlisting">
-- now we skew the raster
-- note how the convex hull and envelope are now different
SELECT ST_AsText(ST_ConvexHull(rast)) As convhull,
	ST_AsText(ST_Envelope(rast)) As env
FROM (SELECT ST_SetRotation(rast, 0.1, 0.1) As rast
	FROM dummy_rast WHERE rid=1) As foo;

                        convhull                        |                env
--------------------------------------------------------+------------------------------------
 POLYGON((0.5 0.5,20.5 1.5,22.5 61.5,2.5 60.5,0.5 0.5)) | POLYGON((0 0,22 0,22 61,0 61,0 0))
					</pre></div><div class="refsection" title="See Also"><a name="idp92773200"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>,
						<a class="xref" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a>,
						<a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>,
						<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
					</p></div></div><div class="refentry" title="ST_DumpAsPolygons"><div class="refentry.separator"><hr></div><a name="RT_ST_DumpAsPolygons"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DumpAsPolygons — Returns a set of geomval (geom,val) rows, from a given raster band.  If no band number is specified, band num defaults to 1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof geomval <b class="fsfunc">ST_DumpAsPolygons</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var>, boolean  <var class="pdparam">exclude_nodata_value=TRUE</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92783056"></a><h2>Description</h2><p>This is a set-returning function (SRF). It returns a set of
					geomval rows, formed by a geometry (geom) and a pixel band value (val).
					Each polygon is the union of all pixels for that band that have the same pixel value denoted by val.</p><p>ST_DumpAsPolygon is useful for polygonizing rasters. It is the
					reverse of a GROUP BY in that it creates new rows. For example it
					can be used to expand a single raster into multiple POLYGONS/MULTIPOLYGONS.</p><p>Availability: Requires GDAL 1.7 or higher.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If there is a no data value set for a band, pixels with that value will not be returned.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you only care about count of pixels with a given value in a raster, it is faster to use <a class="xref" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
							This is different than ST_PixelAsPolygons where one geometry is returned for each pixel regardless of pixel value.
						</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp92787280"></a><h2>Examples</h2><pre class="programlisting">
SELECT val, ST_AsText(geom) As geomwkt
FROM (
SELECT (ST_DumpAsPolygons(rast)).*
FROM dummy_rast
WHERE rid = 2
) As foo
WHERE val BETWEEN 249 and 251
ORDER BY val;

 val |                                                       geomwkt
-----+--------------------------------------------------------------------------
 249 | POLYGON((3427927.95 5793243.95,3427927.95 5793243.85,3427928 5793243.85,
		3427928 5793243.95,3427927.95 5793243.95))
 250 | POLYGON((3427927.75 5793243.9,3427927.75 5793243.85,3427927.8 5793243.85,
		3427927.8 5793243.9,3427927.75 5793243.9))
 250 | POLYGON((3427927.8 5793243.8,3427927.8 5793243.75,3427927.85 5793243.75,
		3427927.85 5793243.8, 3427927.8 5793243.8))
 251 | POLYGON((3427927.75 5793243.85,3427927.75 5793243.8,3427927.8 5793243.8,
		3427927.8 5793243.85,3427927.75 5793243.85))
					</pre></div><div class="refsection" title="See Also"><a name="idp92788560"></a><h2>See Also</h2><p>
						<a class="xref" href="#geomval" title="geomval">geomval</a>,
						<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>,
						<a class="xref" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a>,
						<a class="xref" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a>
					</p></div></div><div class="refentry" title="ST_Envelope"><div class="refentry.separator"><hr></div><a name="RT_ST_Envelope"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Envelope — Returns the polygon representation of the extent of the raster.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Envelope</b>(</code>raster  <var class="pdparam">rast</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92795984"></a><h2>Description</h2><p>Returns the polygon representation of the extent of the raster in spatial coordinate units defined by srid. It is a float8 minimum bounding box represented as a polygon. </p><p>The polygon is defined by the corner points of the bounding box
			((<code class="varname">MINX</code>, <code class="varname">MINY</code>),
			(<code class="varname">MINX</code>, <code class="varname">MAXY</code>),
			(<code class="varname">MAXX</code>, <code class="varname">MAXY</code>),
			(<code class="varname">MAXX</code>, <code class="varname">MINY</code>),
			(<code class="varname">MINX</code>, <code class="varname">MINY</code>))
					</p></div><div class="refsection" title="Examples"><a name="idp92801360"></a><h2>Examples</h2><pre class="programlisting">
SELECT rid, ST_AsText(ST_Envelope(rast)) As envgeomwkt
FROM dummy_rast;

 rid |                                         envgeomwkt
-----+--------------------------------------------------------------------
   1 | POLYGON((0 0,20 0,20 60,0 60,0 0))
   2 | POLYGON((3427927 5793243,3427928 5793243,
		3427928 5793244,3427927 5793244, 3427927 5793243))
					</pre></div><div class="refsection" title="See Also"><a name="idp92802640"></a><h2>See Also</h2><p>
						<a class="xref" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a>,
						<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>,
						<a class="xref" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a>
					</p></div></div><div class="refentry" title="ST_MinConvexHull"><div class="refentry.separator"><hr></div><a name="RT_ST_MinConvexHull"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MinConvexHull — 
						Return the convex hull geometry of the raster excluding NODATA pixels.
					</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_MinConvexHull</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">nband=NULL</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92823120"></a><h2>Description</h2><p>
						Return the convex hull geometry of the raster excluding NODATA pixels.  If <code class="varname">nband</code> is NULL, all bands of the raster are considered.
					</p><p>Availability: 2.1.0 </p></div><div class="refsection" title="Examples"><a name="idp92825168"></a><h2>Examples</h2><pre class="programlisting">
WITH foo AS (
	SELECT
		ST_SetValues(
			ST_SetValues(
				ST_AddBand(ST_AddBand(ST_MakeEmptyRaster(9, 9, 0, 0, 1, -1, 0, 0, 0), 1, '8BUI', 0, 0), 2, '8BUI', 1, 0),
				1, 1, 1,
				ARRAY[
					[0, 0, 0, 0, 0, 0, 0, 0, 0],
					[0, 0, 0, 0, 0, 0, 0, 0, 0],
					[0, 0, 0, 0, 0, 0, 0, 0, 0],
					[0, 0, 0, 1, 0, 0, 0, 0, 1],
					[0, 0, 0, 1, 1, 0, 0, 0, 0],
					[0, 0, 0, 1, 0, 0, 0, 0, 0],
					[0, 0, 0, 0, 0, 0, 0, 0, 0],
					[0, 0, 0, 0, 0, 0, 0, 0, 0],
					[0, 0, 0, 0, 0, 0, 0, 0, 0]
				]::double precision[][]
			),
			2, 1, 1,
			ARRAY[
				[0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0],
				[1, 0, 0, 0, 0, 1, 0, 0, 0],
				[0, 0, 0, 0, 1, 1, 0, 0, 0],
				[0, 0, 0, 0, 0, 1, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 0, 0, 0, 0, 0, 0, 0],
				[0, 0, 1, 0, 0, 0, 0, 0, 0]
			]::double precision[][]
		) AS rast
)
SELECT
	ST_AsText(ST_ConvexHull(rast)) AS hull,
	ST_AsText(ST_MinConvexHull(rast)) AS mhull,
	ST_AsText(ST_MinConvexHull(rast, 1)) AS mhull_1,
	ST_AsText(ST_MinConvexHull(rast, 2)) AS mhull_2
FROM foo

               hull               |                mhull                |               mhull_1               |               mhull_2
----------------------------------+-------------------------------------+-------------------------------------+-------------------------------------
 POLYGON((0 0,9 0,9 -9,0 -9,0 0)) | POLYGON((0 -3,9 -3,9 -9,0 -9,0 -3)) | POLYGON((3 -3,9 -3,9 -6,3 -6,3 -3)) | POLYGON((0 -3,6 -3,6 -9,0 -9,0 -3))
					</pre></div><div class="refsection" title="See Also"><a name="idp92826448"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a>,
						<a class="xref" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>,
						<a class="xref" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>,
						<a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
					</p></div></div><div class="refentry" title="ST_Polygon"><div class="refentry.separator"><hr></div><a name="RT_ST_Polygon"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Polygon — Returns a multipolygon geometry formed by the union of pixels that have a pixel value that is not no data value.  If no band number is specified, band num defaults to 1.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Polygon</b>(</code>raster  <var class="pdparam">rast</var>, integer  <var class="pdparam">band_num=1</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92839120"></a><h2>Description</h2><p>Availability: 0.1.6 Requires GDAL 1.7 or higher.</p><p>Enhanced: 2.1.0 Improved Speed (fully C-Based) and the returning multipolygon is ensured to be valid.</p><p>Changed: 2.1.0 In prior versions would sometimes return a polygon, changed to always return multipolygon.</p></div><div class="refsection" title="Examples"><a name="idp92841040"></a><h2>Examples</h2><pre class="programlisting">
-- by default no data band value is 0 or not set, so polygon will return a square polygon
SELECT ST_AsText(ST_Polygon(rast)) As geomwkt
FROM dummy_rast
WHERE rid = 2;

geomwkt
--------------------------------------------
MULTIPOLYGON(((3427927.75 5793244,3427928 5793244,3427928 5793243.75,3427927.75 5793243.75,3427927.75 5793244)))


-- now we change the no data value of first band
UPDATE dummy_rast SET rast = ST_SetBandNoDataValue(rast,1,254)
WHERE rid = 2;
SELECt rid, ST_BandNoDataValue(rast)
from dummy_rast where rid = 2;

-- ST_Polygon excludes the pixel value 254 and returns a multipolygon
SELECT ST_AsText(ST_Polygon(rast)) As geomwkt
FROM dummy_rast
WHERE rid = 2;

geomwkt
---------------------------------------------------------
MULTIPOLYGON(((3427927.9 5793243.95,3427927.85 5793243.95,3427927.85 5793244,3427927.9 5793244,3427927.9 5793243.95)),((3427928 5793243.85,3427928 5793243.8,3427927.95 5793243.8,3427927.95 5793243.85,3427927.9 5793243.85,3427927.9 5793243.9,3427927.9 5793243.95,3427927.95 5793243.95,3427928 5793243.95,3427928 5793243.85)),((3427927.8 5793243.75,3427927.75 5793243.75,3427927.75 5793243.8,3427927.75 5793243.85,3427927.75 5793243.9,3427927.75 5793244,3427927.8 5793244,3427927.8 5793243.9,3427927.8 5793243.85,3427927.85 5793243.85,3427927.85 5793243.8,3427927.85 5793243.75,3427927.8 5793243.75)))

-- Or if you want the no data value different for just one time

SELECT ST_AsText(
	ST_Polygon(
		ST_SetBandNoDataValue(rast,1,252)
		)
	) As geomwkt
FROM dummy_rast
WHERE rid =2;

geomwkt
---------------------------------
MULTIPOLYGON(((3427928 5793243.85,3427928 5793243.8,3427928 5793243.75,3427927.85 5793243.75,3427927.8 5793243.75,3427927.8 5793243.8,3427927.75 5793243.8,3427927.75 5793243.85,3427927.75 5793243.9,3427927.75 5793244,3427927.8 5793244,3427927.85 5793244,3427927.9 5793244,3427928 5793244,3427928 5793243.95,3427928 5793243.85),(3427927.9 5793243.9,3427927.9 5793243.85,3427927.95 5793243.85,3427927.95 5793243.9,3427927.9 5793243.9)))
					</pre></div><div class="refsection" title="See Also"><a name="idp92842320"></a><h2>See Also</h2><p>
						<a class="xref" href="#RT_ST_Value" title="ST_Value">ST_Value</a>,
						<a class="xref" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a>
					</p></div></div></div></div><div class="sect1" title="9.12. Raster Operators"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="RT_Operators"></a>9.12. Raster Operators</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_Raster_Intersect">&amp;&amp;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box intersects B's bounding box.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_OverLeft">&amp;&lt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is to the left of B's.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_OverRight">&amp;&gt;</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is to the right of B's.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_EQ">=</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's. Uses double precision bounding box.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_Contained">@</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is contained by B's. Uses double precision bounding box.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_Same">~=</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's.</span></dt><dt><span class="refentrytitle"><a href="#RT_Raster_Contains">~</a></span><span class="refpurpose"> — Returns <code class="varname">TRUE</code> if A's bounding box is contains B's. Uses double precision bounding box.</span></dt></dl></div><div class="refentry" title="&amp;&amp;"><a name="RT_Raster_Intersect"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&amp; — Returns <code class="varname">TRUE</code> if A's bounding box intersects B's bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
						raster 
						<var class="pdparam">A</var>
					, 
						raster 
						<var class="pdparam">B</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
						raster 
						<var class="pdparam">A</var>
					, 
						geometry 
						<var class="pdparam">B</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">&amp;&amp;</b>(</code>
						geometry 
						<var class="pdparam">B</var>
					, 
						raster 
						<var class="pdparam">A</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92863824"></a><h2>Description</h2><p>The <code class="varname">&amp;&amp;</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster/geometr A intersects the bounding box of raster/geometr B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				rasters.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp92866768"></a><h2>Examples</h2><pre class="programlisting">SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;&amp; B.rast As intersect
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B LIMIT 3;

 a_rid | b_rid | intersect
-------+-------+---------
     2 |     2 | t
     2 |     3 | f
     2 |     1 | f
</pre></div></div><div class="refentry" title="&amp;&lt;"><div class="refentry.separator"><hr></div><a name="RT_Raster_OverLeft"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&lt; — Returns <code class="varname">TRUE</code> if A's bounding box is to the left of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&lt;</b>(</code>
				  raster 

				  <var class="pdparam">A</var>
				, 
				  raster 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92874704"></a><h2>Description</h2><p>The <code class="varname">&amp;&lt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster A
			overlaps or is to the left of the bounding box of raster B, or more accurately, overlaps or is NOT to the right
			of the bounding box of raster B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the rasters.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp92877136"></a><h2>Examples</h2><pre class="programlisting">SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;&lt; B.rast As overleft
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

a_rid | b_rid | overleft
------+-------+----------
    2 |     2 | t
    2 |     3 | f
    2 |     1 | f
    3 |     2 | t
    3 |     3 | t
    3 |     1 | f
    1 |     2 | t
    1 |     3 | t
    1 |     1 | t
</pre></div></div><div class="refentry" title="&amp;&gt;"><div class="refentry.separator"><hr></div><a name="RT_Raster_OverRight"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>&amp;&gt; — Returns <code class="varname">TRUE</code> if A's bounding box is to the right of B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">&amp;&gt;</b>(</code>
				  raster 

				  <var class="pdparam">A</var>
				, 
				  raster 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92885072"></a><h2>Description</h2><p>The <code class="varname">&amp;&gt;</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster A
			overlaps or is to the right of the bounding box of raster B, or more accurately, overlaps or is NOT to the left
			of the bounding box of raster B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
				geometries.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp92887504"></a><h2>Examples</h2><pre class="programlisting">SELECT A.rid As a_rid, B.rid As b_rid, A.rast &amp;&gt; B.rast As overright
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

 a_rid | b_rid | overright
-------+-------+----------
     2 |     2 | t
     2 |     3 | t
     2 |     1 | t
     3 |     2 | f
     3 |     3 | t
     3 |     1 | f
     1 |     2 | f
     1 |     3 | t
     1 |     1 | t
</pre></div></div><div class="refentry" title="="><div class="refentry.separator"><hr></div><a name="RT_Raster_EQ"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>= — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's. Uses double precision bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">=</b>(</code>
				  raster 

				  <var class="pdparam">A</var>
				, 
				  raster 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92895440"></a><h2>Description</h2><p>The <code class="varname">=</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster A
			is the same as the bounding box of raster B.  PostgreSQL uses the =, &lt;, and &gt; operators defined for rasters  to
			perform internal orderings and comparison of rasters (ie. in a GROUP BY or ORDER BY clause).</p><div class="caution" title="Caution" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Caution"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will NOT make use of any indexes that may be available on the
				rasters. Use <a class="xref" href="#RT_Raster_Same" title="~=">~=</a> instead.  This operator exists mostly so one can group by the raster column.</p></td></tr></table></div><p>Availability:  2.1.0 </p></div><div class="refsection" title="See Also"><a name="idp92898768"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Same" title="~=">~=</a></p></div></div><div class="refentry" title="@"><div class="refentry.separator"><hr></div><a name="RT_Raster_Contained"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>@ — Returns <code class="varname">TRUE</code> if A's bounding box is contained by B's. Uses double precision bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
              raster 
              <var class="pdparam">A</var>
            , 
              raster 
              <var class="pdparam">B</var>
            <code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
              geometry 
              <var class="pdparam">A</var>
            , 
              raster 
              <var class="pdparam">B</var>
            <code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">@</b>(</code>
              raster 
              <var class="pdparam">B</var>
            , 
              geometry 
              <var class="pdparam">A</var>
            <code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92922448"></a><h2>Description</h2><p>The <code class="varname">@</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster/geometry A
			is contained by bounding box of raster/geometr B.  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will use spatial indexes on the rasters. </p></td></tr></table></div><p>Availability:  2.0.0 raster @ raster, raster @ geometry introduced</p><p>Availability:  2.0.5 geometry @ raster introduced </p></div><div class="refsection" title="See Also"><a name="idp92925648"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Contains" title="~">~</a></p></div></div><div class="refentry" title="~="><div class="refentry.separator"><hr></div><a name="RT_Raster_Same"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~= — Returns <code class="varname">TRUE</code> if A's bounding box is the same as B's.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~=</b>(</code>
				  raster 

				  <var class="pdparam">A</var>
				, 
				  raster 

				  <var class="pdparam">B</var>
				<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92933584"></a><h2>Description</h2><p>The <code class="varname">~=</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster A
        is the same as the bounding box of raster B.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will make use of any indexes that may be available on the
          rasters.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp92936400"></a><h2>Examples</h2><p>Very useful usecase is for taking two sets of single band rasters that are of the same chunk but represent different themes and creating a multi-band raster</p><pre class="programlisting">SELECT ST_AddBand(prec.rast, alt.rast) As new_rast
    FROM prec INNER JOIN alt ON (prec.rast ~= alt.rast);
        </pre></div><div class="refsection" title="See Also"><a name="idp92938192"></a><h2>See Also</h2><p><a class="xref" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a>, <a class="xref" href="#RT_Raster_EQ" title="=">=</a></p></div></div><div class="refentry" title="~"><div class="refentry.separator"><hr></div><a name="RT_Raster_Contains"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>~ — Returns <code class="varname">TRUE</code> if A's bounding box is contains B's. Uses double precision bounding box.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
              raster 
              <var class="pdparam">A</var>
            , 
              raster 
              <var class="pdparam">B</var>
            <code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
              geometry 
              <var class="pdparam">A</var>
            , 
              raster 
              <var class="pdparam">B</var>
            <code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">~</b>(</code>
              raster 
              <var class="pdparam">B</var>
            , 
              geometry 
              <var class="pdparam">A</var>
            <code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92962256"></a><h2>Description</h2><p>The <code class="varname">~</code> operator returns <code class="varname">TRUE</code> if the bounding box of raster/geometry A
			is contains bounding box of raster/geometr B.  </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This operand will use spatial indexes on the rasters. </p></td></tr></table></div><p>Availability:  2.0.0</p></div><div class="refsection" title="See Also"><a name="idp92965200"></a><h2>See Also</h2><p><a class="xref" href="#RT_Raster_Contained" title="@">@</a></p></div></div></div><div class="sect1" title="9.13. Raster and Raster Band Spatial Relationships"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Raster_Relationships"></a>9.13. Raster and Raster Band Spatial Relationships</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#RT_ST_Contains">ST_Contains</a></span><span class="refpurpose"> — 
				Return true if no points of raster rastB lie in the exterior of raster rastA and at least one point of the interior of rastB lies in the interior of rastA.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_ContainsProperly">ST_ContainsProperly</a></span><span class="refpurpose"> — 
				Return true if rastB intersects the interior of rastA but not the boundary or exterior of rastA.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Covers">ST_Covers</a></span><span class="refpurpose"> — 
				Return true if no points of raster rastB lie outside raster rastA.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_CoveredBy">ST_CoveredBy</a></span><span class="refpurpose"> — 
				Return true if no points of raster rastA lie outside raster rastB.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Disjoint">ST_Disjoint</a></span><span class="refpurpose"> — 
				Return true if raster rastA does not spatially intersect rastB.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Intersects">ST_Intersects</a></span><span class="refpurpose"> — Return true if raster rastA spatially intersects raster rastB.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Overlaps">ST_Overlaps</a></span><span class="refpurpose"> — 
				Return true if raster rastA and rastB intersect but one does not completely contain the other.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Touches">ST_Touches</a></span><span class="refpurpose"> — 
				Return true if raster rastA and rastB have at least one point in common but their interiors do not intersect.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_SameAlignment">ST_SameAlignment</a></span><span class="refpurpose"> — Returns true if rasters have same skew, scale, spatial ref, and offset (pixels can be put on same grid without cutting into pixels) and false if they don't with notice detailing issue.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a></span><span class="refpurpose"> — Returns text stating if rasters are aligned and if not aligned, a reason why.</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_Within">ST_Within</a></span><span class="refpurpose"> — 
				Return true if no points of raster rastA lie in the exterior of raster rastB and at least one point of the interior of rastA lies in the interior of rastB.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_DWithin">ST_DWithin</a></span><span class="refpurpose"> — 
				Return true if rasters rastA and rastB are within the specified distance of each other.
			</span></dt><dt><span class="refentrytitle"><a href="#RT_ST_DFullyWithin">ST_DFullyWithin</a></span><span class="refpurpose"> — 
				Return true if rasters rastA and rastB are fully within the specified distance of each other.
			</span></dt></dl></div><div class="refentry" title="ST_Contains"><a name="RT_ST_Contains"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Contains — 
				Return true if no points of raster rastB lie in the exterior of raster rastA and at least one point of the interior of rastB lies in the interior of rastA.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Contains</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Contains</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp92980048"></a><h2>Description</h2><p>
				Raster rastA contains rastB if and only if no points of rastB lie in the exterior of rastA and at least one point of the interior of rastB lies in the interior of rastA. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Contains(ST_Polygon(raster), geometry) or ST_Contains(geometry, ST_Polygon(raster)).
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					ST_Contains() is the inverse of ST_Within().  So, ST_Contains(rastA, rastB) implies ST_Within(rastB, rastA).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp92984016"></a><h2>Examples</h2><pre class="programlisting">
-- specified band numbers
SELECT r1.rid, r2.rid, ST_Contains(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 1;

NOTICE:  The first raster provided has no bands
 rid | rid | st_contains
-----+-----+-------------
   1 |   1 |
   1 |   2 | f
			</pre><pre class="programlisting">
-- no band numbers specified
SELECT r1.rid, r2.rid, ST_Contains(r1.rast, r2.rast) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 1;
 rid | rid | st_contains
-----+-----+-------------
   1 |   1 | t
   1 |   2 | f
			</pre></div><div class="refsection" title="See Also"><a name="idp92985808"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
				<a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a>
			</p></div></div><div class="refentry" title="ST_ContainsProperly"><div class="refentry.separator"><hr></div><a name="RT_ST_ContainsProperly"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ContainsProperly — 
				Return true if rastB intersects the interior of rastA but not the boundary or exterior of rastA.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_ContainsProperly</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_ContainsProperly</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93020880"></a><h2>Description</h2><p>
				Raster rastA contains properly rastB if rastB intersects the interior of rastA but not the boundary or exterior of rastA. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><p>
				Raster rastA does not contain properly itself but does contain itself.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_ContainsProperly(ST_Polygon(raster), geometry) or ST_ContainsProperly(geometry, ST_Polygon(raster)).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93024336"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_ContainsProperly(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_containsproperly
-----+-----+---------------------
   2 |   1 | f
   2 |   2 | f
			</pre></div><div class="refsection" title="See Also"><a name="idp93025744"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
				<a class="xref" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a>
			</p></div></div><div class="refentry" title="ST_Covers"><div class="refentry.separator"><hr></div><a name="RT_ST_Covers"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Covers — 
				Return true if no points of raster rastB lie outside raster rastA.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Covers</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Covers</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93040208"></a><h2>Description</h2><p>
				Raster rastA covers rastB if and only if no points of rastB lie in the exterior of rastA. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Covers(ST_Polygon(raster), geometry) or ST_Covers(geometry, ST_Polygon(raster)).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93043408"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_Covers(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_covers
-----+-----+-----------
   2 |   1 | f
   2 |   2 | t
			</pre></div><div class="refsection" title="See Also"><a name="idp93044688"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
				<a class="xref" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>
			</p></div></div><div class="refentry" title="ST_CoveredBy"><div class="refentry.separator"><hr></div><a name="RT_ST_CoveredBy"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CoveredBy — 
				Return true if no points of raster rastA lie outside raster rastB.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_CoveredBy</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_CoveredBy</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93067472"></a><h2>Description</h2><p>
				Raster rastA is covered by rastB if and only if no points of rastA lie in the exterior of rastB. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_CoveredBy(ST_Polygon(raster), geometry) or ST_CoveredBy(geometry, ST_Polygon(raster)).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93070544"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_CoveredBy(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_coveredby
-----+-----+--------------
   2 |   1 | f
   2 |   2 | t
			</pre></div><div class="refsection" title="See Also"><a name="idp93071824"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
				<a class="xref" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a>
			</p></div></div><div class="refentry" title="ST_Disjoint"><div class="refentry.separator"><hr></div><a name="RT_ST_Disjoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Disjoint — 
				Return true if raster rastA does not spatially intersect rastB.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Disjoint</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Disjoint</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93094608"></a><h2>Description</h2><p>
				Raster rastA and rastB are disjointed if they do not share any space together. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function does NOT use any indexes.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Disjoint(ST_Polygon(raster), geometry).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93097680"></a><h2>Examples</h2><pre class="programlisting">
-- rid = 1 has no bands, hence the NOTICE and the NULL value for st_disjoint
SELECT r1.rid, r2.rid, ST_Disjoint(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

NOTICE:  The second raster provided has no bands
 rid | rid | st_disjoint
-----+-----+-------------
   2 |   1 |
   2 |   2 | f
			</pre><pre class="programlisting">
-- this time, without specifying band numbers
SELECT r1.rid, r2.rid, ST_Disjoint(r1.rast, r2.rast) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_disjoint
-----+-----+-------------
   2 |   1 | t
   2 |   2 | f
			</pre></div><div class="refsection" title="See Also"><a name="idp93099600"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
			</p></div></div><div class="refentry" title="ST_Intersects"><div class="refentry.separator"><hr></div><a name="RT_ST_Intersects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Intersects — Return true if raster rastA spatially intersects raster rastB.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						raster 
						<var class="pdparam">rast</var>
					, 
						integer 
						<var class="pdparam">nband</var>
					, 
						geometry 
						<var class="pdparam">geommin</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						raster 
						<var class="pdparam">rast</var>
					, 
						geometry 
						<var class="pdparam">geommin</var>
					, 
						integer 
						<var class="pdparam">nband=NULL</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Intersects</b>(</code>
						geometry 
						<var class="pdparam">geommin</var>
					, 
						raster 
						<var class="pdparam">rast</var>
					, 
						integer 
						<var class="pdparam">nband=NULL</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93129168"></a><h2>Description</h2><p>
				Return true if raster rastA spatially intersects raster rastB. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><p>
				Enhanced: 2.0.0 support raster/raster intersects was introduced.
			</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					Changed: 2.1.0 The behavior of the ST_Intersects(raster, geometry) variants changed to match that of ST_Intersects(geometry, raster).
				</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp93132368"></a><h2>Examples</h2><pre class="programlisting">
-- different bands of same raster
SELECT ST_Intersects(rast, 2, rast, 3) FROM dummy_rast WHERE rid = 2;

 st_intersects
---------------
 t
			</pre></div><div class="refsection" title="See Also"><a name="idp93133648"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a>,
				<a class="xref" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>
			</p></div></div><div class="refentry" title="ST_Overlaps"><div class="refentry.separator"><hr></div><a name="RT_ST_Overlaps"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Overlaps — 
				Return true if raster rastA and rastB intersect but one does not completely contain the other.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Overlaps</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Overlaps</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93148240"></a><h2>Description</h2><p>
				Return true if raster rastA spatially overlaps raster rastB. This means that rastA and rastB intersect but one does not completely contain the other. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Overlaps(ST_Polygon(raster), geometry).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93151312"></a><h2>Examples</h2><pre class="programlisting">
-- comparing different bands of same raster
SELECT ST_Overlaps(rast, 1, rast, 2) FROM dummy_rast WHERE rid = 2;

 st_overlaps
-------------
 f
			</pre></div><div class="refsection" title="See Also"><a name="idp93152592"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
			</p></div></div><div class="refentry" title="ST_Touches"><div class="refentry.separator"><hr></div><a name="RT_ST_Touches"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Touches — 
				Return true if raster rastA and rastB have at least one point in common but their interiors do not intersect.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Touches</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Touches</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93166928"></a><h2>Description</h2><p>
				Return true if raster rastA spatially touches raster rastB. This means that rastA and rastB have at least one point in common but their interiors do not intersect. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This function will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Touches(ST_Polygon(raster), geometry).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93170000"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_Touches(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_touches
-----+-----+------------
   2 |   1 | f
   2 |   2 | f
			</pre></div><div class="refsection" title="See Also"><a name="idp93171280"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>
			</p></div></div><div class="refentry" title="ST_SameAlignment"><div class="refentry.separator"><hr></div><a name="RT_ST_SameAlignment"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_SameAlignment — Returns true if rasters have same skew, scale, spatial ref, and offset (pixels can be put on same grid without cutting into pixels) and false if they don't with notice detailing issue.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_SameAlignment</b>(</code>
				  raster 
				  <var class="pdparam">rastA</var>
				, 
				  raster 
				  <var class="pdparam">rastB</var>
				<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_SameAlignment</b>(</code>
				  double precision 
				  <var class="pdparam">ulx1</var>
				, 
				  double precision 
				  <var class="pdparam">uly1</var>
				, 
				  double precision 
				  <var class="pdparam">scalex1</var>
				, 
				  double precision 
				  <var class="pdparam">scaley1</var>
				, 
				  double precision 
				  <var class="pdparam">skewx1</var>
				, 
				  double precision 
				  <var class="pdparam">skewy1</var>
				, 
				  double precision 
				  <var class="pdparam">ulx2</var>
				, 
				  double precision 
				  <var class="pdparam">uly2</var>
				, 
				  double precision 
				  <var class="pdparam">scalex2</var>
				, 
				  double precision 
				  <var class="pdparam">scaley2</var>
				, 
				  double precision 
				  <var class="pdparam">skewx2</var>
				, 
				  double precision 
				  <var class="pdparam">skewy2</var>
				<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_SameAlignment</b>(</code>
						raster set 
						<var class="pdparam">rastfield</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93198416"></a><h2>Description</h2><p>
				Non-Aggregate version (Variants 1 and 2): Returns true if the two rasters (either provided directly or made using the values for upperleft, scale, skew and srid) have the same scale, skew, srid and at least one of any of the four corners of any pixel of one raster falls on any corner of the grid of the other raster. Returns false if they don't and a NOTICE detailing the alignment issue.
			</p><p>
				Aggregate version (Variant 3): From a set of rasters, returns true if all rasters in the set are aligned. The ST_SameAlignment() function is an "aggregate" function in the terminology of PostgreSQL. That means that it operates on rows of data, in the same way the SUM() and AVG() functions do.
			</p><p>Availability: 2.0.0</p><p>Enhanced: 2.1.0 addition of Aggegrate variant</p></div><div class="refsection" title="Examples: Rasters"><a name="idp93200720"></a><h2>Examples: Rasters</h2><pre class="programlisting">SELECT ST_SameAlignment(
	ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
	ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0)
) as sm;

sm
----
t
</pre><pre class="programlisting">
SELECT ST_SameAlignment(A.rast,b.rast)
 FROM dummy_rast AS A CROSS JOIN dummy_rast AS B;

 NOTICE:  The two rasters provided have different SRIDs
NOTICE:  The two rasters provided have different SRIDs
 st_samealignment
------------------
 t
 f
 f
 f
</pre></div><div class="refsection" title="See Also"><a name="idp93202512"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_Loading_Rasters" title="5.1. Loading and Creating Rasters">Section 5.1, “Loading and Creating Rasters”</a>,
					<a class="xref" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a>,
					<a class="xref" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a>
				</p></div></div><div class="refentry" title="ST_NotSameAlignmentReason"><div class="refentry.separator"><hr></div><a name="RT_ST_NotSameAlignmentReason"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NotSameAlignmentReason — Returns text stating if rasters are aligned and if not aligned, a reason why.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_NotSameAlignmentReason</b>(</code>raster <var class="pdparam">rastA</var>, raster <var class="pdparam">rastB</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93218512"></a><h2>Description</h2><p>Returns text stating if rasters are aligned and if not aligned, a reason why.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
						If there are several reasons why the rasters are not aligned, only one reason (the first test to fail) will be returned.
					</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93220816"></a><h2>Examples</h2><pre class="programlisting">
SELECT
	ST_SameAlignment(
		ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
		ST_MakeEmptyRaster(1, 1, 0, 0, 1.1, 1.1, 0, 0)
	),
	ST_NotSameAlignmentReason(
		ST_MakeEmptyRaster(1, 1, 0, 0, 1, 1, 0, 0),
		ST_MakeEmptyRaster(1, 1, 0, 0, 1.1, 1.1, 0, 0)
	)
;

 st_samealignment |            st_notsamealignmentreason
------------------+-------------------------------------------------
 f                | The rasters have different scales on the X axis
(1 row)
				</pre></div><div class="refsection" title="See Also"><a name="idp93222224"></a><h2>See Also</h2><p>
					<a class="xref" href="#RT_Loading_Rasters" title="5.1. Loading and Creating Rasters">Section 5.1, “Loading and Creating Rasters”</a>,
					<a class="xref" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a>
				</p></div></div><div class="refentry" title="ST_Within"><div class="refentry.separator"><hr></div><a name="RT_ST_Within"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Within — 
				Return true if no points of raster rastA lie in the exterior of raster rastB and at least one point of the interior of rastA lies in the interior of rastB.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_Within</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_Within</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93236688"></a><h2>Description</h2><p>
				Raster rastA is within rastB if and only if no points of rastA lie in the exterior of rastB and at least one point of the interior of rastA lies in the interior of rastB. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This operand will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_Within(ST_Polygon(raster), geometry) or ST_Within(geometry, ST_Polygon(raster)).
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					ST_Within() is the inverse of ST_Contains().  So, ST_Within(rastA, rastB) implies ST_Contains(rastB, rastA).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93240784"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_Within(r1.rast, 1, r2.rast, 1) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_within
-----+-----+-----------
   2 |   1 | f
   2 |   2 | t
			</pre></div><div class="refsection" title="See Also"><a name="idp93242064"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a>,
				<a class="xref" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a>,
				<a class="xref" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a>,
				<a class="xref" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>
			</p></div></div><div class="refentry" title="ST_DWithin"><div class="refentry.separator"><hr></div><a name="RT_ST_DWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DWithin — 
				Return true if rasters rastA and rastB are within the specified distance of each other.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_DWithin</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					, 
						double precision 
						<var class="pdparam">distance_of_srid</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_DWithin</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						double precision 
						<var class="pdparam">distance_of_srid</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93272272"></a><h2>Description</h2><p>
				Return true if rasters rastA and rastB are within the specified distance of each other. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><p>
				The distance is specified in units defined by the spatial reference system of the rasters. For this function to make sense, the source rasters must both be of the same coordinate projection, having the same SRID.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This operand will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_DWithin(ST_Polygon(raster), geometry).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93275856"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_DWithin(r1.rast, 1, r2.rast, 1, 3.14) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_dwithin
-----+-----+------------
   2 |   1 | f
   2 |   2 | t
			</pre></div><div class="refsection" title="See Also"><a name="idp93277136"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a>,
				<a class="xref" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>
			</p></div></div><div class="refentry" title="ST_DFullyWithin"><div class="refentry.separator"><hr></div><a name="RT_ST_DFullyWithin"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_DFullyWithin — 
				Return true if rasters rastA and rastB are fully within the specified distance of each other.
			</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">ST_DFullyWithin</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						integer 
						<var class="pdparam">nbandA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						integer 
						<var class="pdparam">nbandB</var>
					, 
						double precision 
						<var class="pdparam">distance_of_srid</var>
					<code>)</code>;</p><p><code class="funcdef">boolean <b class="fsfunc">ST_DFullyWithin</b>(</code>
						raster 
						<var class="pdparam">rastA</var>
					, 
						raster 
						<var class="pdparam">rastB</var>
					, 
						double precision 
						<var class="pdparam">distance_of_srid</var>
					<code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp93294288"></a><h2>Description</h2><p>
				Return true if rasters rastA and rastB are fully within the specified distance of each other. If the band number is not provided (or set to NULL), only the convex hull of the raster is considered in the test. If the band number is provided, only those pixels with value (not NODATA) are considered in the test.
			</p><p>
				The distance is specified in units defined by the spatial reference system of the rasters. For this function to make sense, the source rasters must both be of the same coordinate projection, having the same SRID.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					This operand will make use of any indexes that may be available on the rasters.
				</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
					To test the spatial relationship of a raster and a geometry, use ST_Polygon on the raster, e.g. ST_DFullyWithin(ST_Polygon(raster), geometry).
				</p></td></tr></table></div><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp93297744"></a><h2>Examples</h2><pre class="programlisting">
SELECT r1.rid, r2.rid, ST_DFullyWithin(r1.rast, 1, r2.rast, 1, 3.14) FROM dummy_rast r1 CROSS JOIN dummy_rast r2 WHERE r1.rid = 2;

 rid | rid | st_dfullywithin
-----+-----+-----------------
   2 |   1 | f
   2 |   2 | t
			</pre></div><div class="refsection" title="See Also"><a name="idp93299024"></a><h2>See Also</h2><p>
				<a class="xref" href="#RT_ST_Within" title="ST_Within">ST_Within</a>,
				<a class="xref" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a>
			</p></div></div></div></div><div class="chapter" title="Chapter 10. PostGIS Raster Frequently Asked Questions"><div class="titlepage"><div><div><h2 class="title"><a name="RT_FAQ"></a>Chapter 10. PostGIS Raster Frequently Asked Questions</h2></div></div></div><div class="qandaset" title="Frequently Asked Questions"><a name="idp97724752"></a><dl><dt>10.1. <a href="#faq_security_change_1">I'm getting error ERROR: RASTER_fromGDALRaster: Could not open bytea with GDAL. Check that the bytea is of a GDAL supported format.  when using ST_FromGDALRaster
        or ERROR: rt_raster_to_gdal: Could not load the output GDAL driver when trying to use ST_AsPNG or other raster input functions.</a></dt><dt>10.2. <a href="#idp97728976">Where can I find out more about the PostGIS Raster Project?</a></dt><dt>10.3. <a href="#idp97731408">Are there any books or tutorials to get me started with this wonderful invention?</a></dt><dt>10.4. <a href="#idp97777232">How do I install Raster support in my PostGIS database?</a></dt><dt>10.5. <a href="#idp97782480">I get error could not load library "C:/Program Files/PostgreSQL/8.4/lib/rtpostgis.dll": The specified module could not be found.
	or could not load library on Linux when trying to run rtpostgis.sql</a></dt><dt>10.6. <a href="#idp97813584">How do I load Raster data into PostGIS?</a></dt><dt>10.7. <a href="#idp97816656">What kind of raster file formats can I load into my database?</a></dt><dt>10.8. <a href="#idp97819984">Can I export my PostGIS raster data to other raster formats?</a></dt><dt>10.9. <a href="#idp97834192">Are their binaries of GDAL available already compiled with PostGIS Raster suppport?</a></dt><dt>10.10. <a href="#idp97838032">What tools can I use to view PostGIS raster data?</a></dt><dt>10.11. <a href="#idp97840848">How can I add a PostGIS raster layer to my MapServer map?</a></dt><dt>10.12. <a href="#idp97846096">What functions can I currently use with my raster data?</a></dt><dt>10.13. <a href="#qa_raster_function_not_unique">I am getting error  ERROR:  function st_intersects(raster, unknown) is not unique or st_union(geometry,text) is not unique.  How do I fix?</a></dt><dt>10.14. <a href="#idp97853264">How is PostGIS Raster different from Oracle GeoRaster (SDO_GEORASTER) and SDO_RASTER types?</a></dt><dt>10.15. <a href="#qa_raster_fails_encoding_conversion">raster2pgsql load of large file fails with String of N bytes is too long for encoding conversion?</a></dt></dl><table border="0" width="100%" summary="Q and A Set"><col align="left" width="1%"><col><tbody><tr class="question" title="10.1."><td align="left" valign="top"><a name="faq_security_change_1"></a><a name="idp97725392"></a><p><b>10.1.</b></p></td><td align="left" valign="top"><p>I'm getting error <code class="code">ERROR: RASTER_fromGDALRaster: Could not open bytea with GDAL. Check that the bytea is of a GDAL supported format.</code>  when using ST_FromGDALRaster
        or <code class="code">ERROR: rt_raster_to_gdal: Could not load the output GDAL driver</code> when trying to use ST_AsPNG or other raster input functions.</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>As of PostGIS 2.1.3 and 2.0.5, a security change was made to by default disable all GDAL drivers and out of db rasters. The release notes are at <a class="ulink" href="http://postgis.net/2014/05/19/postgis-2.0.6_and_2.1.3" target="_top">PostGIS 2.0.6, 2.1.3 security release</a>. In order to reenable specific drivers or all drivers and reenable out of database support, refer to <a class="xref" href="#install_short_version" title="2.1. Short Version">Section 2.1, “Short Version”</a>.</p></td></tr><tr class="question" title="10.2."><td align="left" valign="top"><a name="idp97728976"></a><a name="idp97729232"></a><p><b>10.2.</b></p></td><td align="left" valign="top"><p>Where can I find out more about the PostGIS Raster Project?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Refer to the <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRaster" target="_top">PostGIS Raster home page</a>.</p></td></tr><tr class="question" title="10.3."><td align="left" valign="top"><a name="idp97731408"></a><a name="idp97731664"></a><p><b>10.3.</b></p></td><td align="left" valign="top"><p>Are there any books or tutorials to get me started with this wonderful invention?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>There is a full length beginner tutorial <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRasterTutorial01" target="_top"> Intersecting vector buffers with large raster coverage using PostGIS Raster</a>.
        Jorge has a series of blog articles on PostGIS Raster that demonstrate how to load raster data as well as cross compare to same tasks in Oracle GeoRaster. Check out
            <a class="ulink" href="http://gis4free.wordpress.com/category/postgis-raster/" target="_top">Jorge's PostGIS Raster / Oracle GeoRaster Series</a>.
            There is a whole chapter (more than 35 pages of content) dedicated to PostGIS Raster with free code and data downloads at <a class="ulink" href="https://www.manning.com/books/postgis-in-action-second-edition" target="_top">PostGIS in Action - Raster chapter</a>.
        You can <a class="ulink" href="http://www.postgis.us/page_buy_book" target="_top">buy PostGIS in Action</a>  now from Manning in hard-copy (significant discounts for bulk purchases) or just the E-book format.
        You can also buy from Amazon and various other book distributors. All hard-copy books come with a free coupon to download the E-book version.
        </p><p>Here is a review from a PostGIS Raster user <a class="ulink" href="http://fuzzytolerance.info/blog/2010/10/25/2010-10-26-postgis-raster-ftw/" target="_top">PostGIS raster applied to land classification urban forestry</a></p></td></tr><tr class="question" title="10.4."><td align="left" valign="top"><a name="idp97777232"></a><a name="idp97777488"></a><p><b>10.4.</b></p></td><td align="left" valign="top"><p>How do I install Raster support in my PostGIS database?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The easiest is to download binaries for PostGIS and Raster which are currently available for windows and latest versions of Mac OSX.
	First you need a working PostGIS 2.0.0 or above and be running PostgreSQL 8.4, 9.0, or 9.1. Note in PostGIS 2.0 PostGIS Raster is fully integrated, so it will be compiled when you compile PostGIS.</p><p>Instructions for installing and running under windows are available at <a class="ulink" href="http://gis4free.wordpress.com/2011/03/10/how-to-install-and-configure-postgis-raster-on-windows/" target="_top">How to Install and Configure PostGIS raster on windows</a></p><p>
			If you are on windows, you can compile yourself, or use the <a class="ulink" href="http://postgis.net/windows_downloads" target="_top">pre-compiled
            PostGIS Raster windows binaries</a>.
			If you are on Mac OSX Leopard or Snow Leopard, there are binaries available at <a class="ulink" href="http://www.kyngchaos.com/software/postgres" target="_top">Kyng Chaos Mac OSX PostgreSQL/GIS binaries</a>.
		</p><p>Then to enable raster support in your database, run the rtpostgis.sql file in your database.  To upgrade an existing install use rtpostgis_upgrade_minor..sql instead of rtpostgis.sql</p><p>For other platforms, you generally need to compile yourself. Dependencies are PostGIS and GDAL. For more details about compiling from source, please refer to <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRaster/Documentation01#a2.3-CompilingandInstallingfromSources" target="_top">Installing PostGIS Raster from source (in prior versions of PostGIS)</a></p></td></tr><tr class="question" title="10.5."><td align="left" valign="top"><a name="idp97782480"></a><a name="idp97782736"></a><p><b>10.5.</b></p></td><td align="left" valign="top"><p>I get error could not load library "C:/Program Files/PostgreSQL/8.4/lib/rtpostgis.dll": The specified module could not be found.
	or could not load library on Linux when trying to run rtpostgis.sql</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>rtpostgis.so/dll is built with dependency on libgdal.dll/so. Make sure for Windows you have libgdal-1.dll in the bin folder of your PostgreSQL install.
        For Linux libgdal has to be in your path or bin folder.  </p><p>You may also run into different errors if you don't have PostGIS installed in your database.  Make sure to install PostGIS first in your
		database before trying to install the raster support.</p></td></tr><tr class="question" title="10.6."><td align="left" valign="top"><a name="idp97813584"></a><a name="idp97813840"></a><p><b>10.6.</b></p></td><td align="left" valign="top"><p>How do I load Raster data into PostGIS?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The latest version of PostGIS comes packaged with a <code class="varname">raster2pgsql</code> raster loader executable capable of loading many kinds of rasters and also generating lower resolution overviews without any additional software. Please refer to <a class="xref" href="#RT_Raster_Loader" title="5.1.1. Using raster2pgsql to load rasters">Section 5.1.1, “Using raster2pgsql to load rasters”</a> for more details. Pre-2.0 versions came with a <code class="varname">raster2pgsql.py</code> that required python with numpy and GDAL.  This is no longer needed.</p></td></tr><tr class="question" title="10.7."><td align="left" valign="top"><a name="idp97816656"></a><a name="idp97816912"></a><p><b>10.7.</b></p></td><td align="left" valign="top"><p>What kind of raster file formats can I load into my database?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Any that your GDAL library supports. GDAL supported formats are documented <a class="ulink" href="http://www.gdal.org/formats_list.html" target="_top">GDAL File Formats</a>.</p><p>Your particular GDAL install may not support all formats.  To verify the ones supported by your particular GDAL install, you can use</p><pre class="programlisting">raster2pgsql -G</pre></td></tr><tr class="question" title="10.8."><td align="left" valign="top"><a name="idp97819984"></a><a name="idp97820240"></a><p><b>10.8.</b></p></td><td align="left" valign="top"><p>Can I export my PostGIS raster data to other raster formats?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes</p><p>GDAL 1.7+ has a PostGIS raster driver, but is only compiled in if you choose to compile with PostgreSQL support. </p><p>The driver currently doesn't support irregularly blocked rasters,
		although you can store irregularly blocked rasters in PostGIS raster data type.</p><p>If you are compiling from source, you need to include in your configure
		 </p><pre class="programlisting">--with-pg=path/to/pg_config</pre><p>  to enable the driver.
		 Refer to <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/BuildHints" target="_top">GDAL Build Hints</a> for tips
		 on building GDAL against in various OS platforms.
		 </p><p>If your version of GDAL is compiled with the PostGIS Raster driver
		 you should see PostGIS Raster in list when you do
		 </p><pre class="programlisting">gdalinfo --formats</pre><p>To get a summary about your raster via GDAL use gdalinfo:
		 </p><pre class="programlisting">gdalinfo  "PG:host=localhost port=5432 dbname='mygisdb' user='postgres' password='whatever' schema='someschema' table=sometable"</pre><p>
		 </p><p>To export data to other raster formats,
			use gdal_translate the below will export all data from a table to a PNG file at 10% size.</p><p>Depending on your pixel band types, some translations may not work if the export format does not support that Pixel type.
		 For example floating point band types and 32 bit unsigned ints
			will not translate easily to JPG or some others.</p><p>Here is an example simple translation</p><pre class="programlisting">gdal_translate -of PNG -outsize 10% 10% "PG:host=localhost port=5432 dbname='mygisdb' user='postgres' password='whatever' schema='someschema' table=sometable" C:\somefile.png</pre><p>You can also use SQL where clauses in your export using the where=... in your driver connection string.
			Below are some using a where clause</p><pre class="programlisting">gdal_translate -of PNG -outsize 10% 10% "PG:host=localhost port=5432 dbname='mygisdb' user='postgres' password='whatever' schema='someschema' table=sometable where='filename=\'abcd.sid\''" " C:\somefile.png</pre><pre class="programlisting">gdal_translate -of PNG -outsize 10% 10% "PG:host=localhost port=5432 dbname='mygisdb' user='postgres' password='whatever' schema='someschema' table=sometable where='ST_Intersects(rast, ST_SetSRID(ST_Point(-71.032,42.3793),4326) )' " C:\intersectregion.png</pre><p>To see more examples and syntax refer to <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html#a3.2-Readingrasterdatafromthedatabase" target="_top">Reading Raster Data of PostGIS Raster section</a></p></td></tr><tr class="question" title="10.9."><td align="left" valign="top"><a name="idp97834192"></a><a name="idp97834448"></a><p><b>10.9.</b></p></td><td align="left" valign="top"><p>Are their binaries of GDAL available already compiled with PostGIS Raster suppport?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Yes. Check out the page <a class="ulink" href="http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries" target="_top">GDAL Binaries</a> page.  Any compiled with PostgreSQL
		support should have PostGIS Raster in them.  </p><p>PostGIS Raster is undergoing many changes.  If you want to get the latest nightly build for Windows -- then check out
		 the Tamas Szekeres  nightly builds built with Visual Studio which contain GDAL trunk, Python Bindings and MapServer executables and PostGIS Raster driver built-in.  Just
         click the SDK bat and run your commands from there.  <a class="ulink" href="www.gisinternals.com" target="_top">http://www.gisinternals.com</a>.
			Also available are VS project files.</p><p><a class="ulink" href="http://fwtools.maptools.org/" target="_top">FWTools latest stable version for Windows is compiled with Raster support</a>.</p></td></tr><tr class="question" title="10.10."><td align="left" valign="top"><a name="idp97838032"></a><a name="idp97838288"></a><p><b>10.10.</b></p></td><td align="left" valign="top"><p>What tools can I use to view PostGIS raster data?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>You can use MapServer compiled with GDAL 1.7+ and PostGIS Raster driver support to view Raster data. QuantumGIS (QGIS) now supports viewing of PostGIS Raster if you
        have PostGIS raster driver installed.</p><p>In theory any tool that renders data using GDAL can support PostGIS raster data or
            support it with fairly minimal effort. Again for Windows, Tamas' binaries <a class="ulink" href="www.gisinternals.com" target="_top">http://www.gisinternals.com</a> are a good choice if you don't want the hassle of having to setup to compile your own.</p></td></tr><tr class="question" title="10.11."><td align="left" valign="top"><a name="idp97840848"></a><a name="idp97841104"></a><p><b>10.11.</b></p></td><td align="left" valign="top"><p>How can I add a PostGIS raster layer to my MapServer map?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>First you need GDAL 1.7 or higher compiled with PostGIS raster support.
            GDAL 1.8 or above is preferred since many issues have been fixed in 1.8 and more PostGIS raster issues fixed in trunk version.</p><p>You can much like you can with any other raster.
        Refer to <a class="ulink" href="http://mapserver.org/input/raster.html" target="_top">MapServer Raster processing options</a>
        for list of various processing functions you can use with MapServer raster layers.</p><p>What makes PostGIS raster data particularly interesting, is that since
	each tile can have various standard database columns, you can segment it in your data source</p><p>Below is an example of how you would define a PostGIS raster layer in MapServer.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The mode=2 is required for tiled rasters and was added in PostGIS 2.0 and GDAL 1.8 drivers.  This does not exist in GDAL 1.7 drivers.</p></td></tr></table></div><pre class="programlisting">
-- displaying raster with standard raster options
LAYER
	NAME coolwktraster
	TYPE raster
	STATUS ON
	DATA "PG:host=localhost port=5432 dbname='somedb' user='someuser' password='whatever'
		schema='someschema' table='cooltable' mode='2'"
	PROCESSING "NODATA=0"
	PROCESSING "SCALE=AUTO"
	#... other standard raster processing functions here
	#... classes are optional but useful for 1 band data
	CLASS
		NAME "boring"
		EXPRESSION ([pixel] &lt; 20)
		COLOR 250 250 250
	END
	CLASS
		NAME "mildly interesting"
		EXPRESSION ([pixel] &gt; 20 AND [pixel] &lt; 1000)
		COLOR 255 0 0
	END
	CLASS
		NAME "very interesting"
		EXPRESSION ([pixel] &gt;= 1000)
		COLOR 0 255 0
	END
END
        </pre><pre class="programlisting">
-- displaying raster with standard raster options and a where clause
LAYER
	NAME soil_survey2009
	TYPE raster
	STATUS ON
	DATA "PG:host=localhost port=5432 dbname='somedb' user='someuser' password='whatever'
		schema='someschema' table='cooltable' where='survey_year=2009' mode='2'"
	PROCESSING "NODATA=0"
	#... other standard raster processing functions here
	#... classes are optional but useful for 1 band data
END
        </pre></td></tr><tr class="question" title="10.12."><td align="left" valign="top"><a name="idp97846096"></a><a name="idp97846352"></a><p><b>10.12.</b></p></td><td align="left" valign="top"><p>What functions can I currently use with my raster data?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>Refer to the list of <a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a>.
        There are more, but this is still a work in progress.</p><p>Refer to the <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRaster/PlanningAndFunding" target="_top">PostGIS Raster roadmap page</a>
		for details of what you can expect in the future.</p></td></tr><tr class="question" title="10.13."><td align="left" valign="top"><a name="qa_raster_function_not_unique"></a><a name="idp97849680"></a><p><b>10.13.</b></p></td><td align="left" valign="top"><p>I am getting error  ERROR:  function st_intersects(raster, unknown) is not unique or st_union(geometry,text) is not unique.  How do I fix?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>The function is not unique error happens if one of your arguments is a textual representation of a geometry instead of a geometry.  In these cases, PostgreSQL marks the textual representation as an unknown type, which means it can fall into the st_intersects(raster, geometry) or st_intersects(raster,raster) thus resulting in a non-unique case since both functions can in theory support your request.  To prevent this, you need to cast the textual representation of the geometry to a geometry.</p><p>For example if your code looks like this:</p><pre class="programlisting">SELECT rast
 FROM my_raster
   WHERE ST_Intersects(rast, 'SRID=4326;POINT(-10 10)');</pre><p>Cast the textual geometry representation to a geometry by changing your code to this:</p><pre class="programlisting">SELECT rast
 FROM my_raster
   WHERE ST_Intersects(rast, 'SRID=4326;POINT(-10 10)'::geometry);</pre></td></tr><tr class="question" title="10.14."><td align="left" valign="top"><a name="idp97853264"></a><a name="idp97853520"></a><p><b>10.14.</b></p></td><td align="left" valign="top"><p>How is PostGIS Raster different from Oracle GeoRaster (SDO_GEORASTER) and SDO_RASTER types?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>For a more extensive discussion on this topic, check out Jorge Arévalo <a class="ulink" href="http://gis4free.wordpress.com/2010/07/19/oracle-georaster-part-i/" target="_top">Oracle GeoRaster and PostGIS Raster: First impressions </a></p><p>The major advantage of one-georeference-by-raster over one-georeference-by-layer is to allow:</p><p>* coverages to be not necessarily rectangular (which is often the case of raster coverage covering large extents. See the possible raster arrangements in the documentation)</p><p>* rasters to overlaps (which is necessary to implement lossless vector to raster conversion) </p><p>These arrangements are possible in Oracle as well, but they imply
        the storage of multiple SDO_GEORASTER objects linked to as many
        SDO_RASTER tables. A complex coverage can lead to hundreds of tables in
        the database. With PostGIS Raster you can store a similar raster arrangement into a unique table.</p><p>It's a bit like if PostGIS would force you to store only full rectangular vector coverage without gaps or overlaps (a perfect rectangular topological layer).
	This is very practical in some applications but practice has shown that it is not realistic or desirable for most geographical coverages. Vector structures needs the flexibility to store discontinuous and non-rectangular coverages.
	We think it is a big advantage that raster structure should benefit as well. </p></td></tr><tr class="question" title="10.15."><td align="left" valign="top"><a name="qa_raster_fails_encoding_conversion"></a><a name="idp97857872"></a><p><b>10.15.</b></p></td><td align="left" valign="top"><p>raster2pgsql load of large file fails with String of N bytes is too long for encoding conversion?</p></td></tr><tr class="answer"><td align="left" valign="top"></td><td align="left" valign="top"><p>raster2pgsql doesn't make any connections to your database when generating the file to load. If your database has set an explicit client encoding different
	from your database encoding, then when loading large raster files (above 30 MB in size), you may run into a <code class="code">bytes is too long for encoding conversion</code>.</p><p>This generally happens if for example you have your database in UTF8, but to support windows apps, you have the client encoding set to <code class="code">WIN1252</code>.</p><p>To work around this make sure the client encoding is the same as your database encoding during load.  You can do this by explicitly setting the encoding in your load script.  Example, if you are on windows:
		</p><pre class="programlisting">set PGCLIENTENCODING=UTF8</pre><p>If you are on Unix/Linux
	</p><pre class="programlisting">export PGCLIENTENCODING=UTF8</pre><p>Gory details of this issue are detailed in <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2209" target="_top">http://trac.osgeo.org/postgis/ticket/2209</a></p></td></tr></tbody></table></div></div><div class="chapter" title="Chapter 11. Topology"><div class="titlepage"><div><div><h2 class="title"><a name="Topology"></a>Chapter 11. Topology</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Topology_Types">11.1. Topology Types</a></span></dt><dt><span class="sect1"><a href="#Topology_Domains">11.2. Topology Domains</a></span></dt><dt><span class="sect1"><a href="#Topology_ManagementFunctions">11.3. Topology and TopoGeometry Management</a></span></dt><dt><span class="sect1"><a href="#Topology_Constructors">11.4. Topology Constructors</a></span></dt><dt><span class="sect1"><a href="#Topology_Editing">11.5. Topology Editors</a></span></dt><dt><span class="sect1"><a href="#Topology_Accessors">11.6. Topology Accessors</a></span></dt><dt><span class="sect1"><a href="#Topology_Processing">11.7. Topology Processing</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Constructors">11.8. TopoGeometry Constructors</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Editors">11.9. TopoGeometry Editors</a></span></dt><dt><span class="sect1"><a href="#TopoGeom_Accessors">11.10. TopoGeometry Accessors</a></span></dt><dt><span class="sect1"><a href="#TopoGeometry_Outputs">11.11. TopoGeometry Outputs</a></span></dt><dt><span class="sect1"><a href="#Topology_Relationships">11.12. Topology Spatial Relationships</a></span></dt></dl></div><p>The PostGIS Topology types and functions are used to manage topological objects such as faces, edges and nodes. </p><p>Sandro Santilli's presentation at PostGIS Day Paris 2011  conference gives a good synopsis of PostGIS Topology and where it is headed <a class="ulink" href="http://strk.keybit.net/projects/postgis/Paris2011_TopologyWithPostGIS_2_0.pdf" target="_top">Topology with PostGIS 2.0 slide deck</a>.</p><p>Vincent Picavet provides a good synopsis and overview of what is Topology, how is it used, and various FOSS4G tools that support it in <a class="ulink" href="https://github.com/Oslandia/presentations/blob/master/pgconf_eu_2012/pgconfeu2012_vincent_picavet_postgis_topology.pdf?raw=true" target="_top">PostGIS Topology PGConf EU 2012</a>.</p><p>An example of a topologically based GIS database is the <a class="ulink" href="https://www.census.gov/geo/maps-data/data/tiger.html" target="_top">US Census Topologically Integrated Geographic Encoding and Referencing System (TIGER)</a> database. If you want to experiment with PostGIS topology and need some data, check out <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a>.</p><p>The PostGIS topology module has existed in prior versions of PostGIS but was never part of the Official PostGIS documentation.
	    In PostGIS 2.0.0 major cleanup is going on to remove use of all deprecated functions in it, fix known usability issues, better document the features and functions, add new functions, and enhance to closer conform to SQL-MM standards.</p><p>Details of this project can be found at <a class="ulink" href="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgisTopology" target="_top">PostGIS Topology Wiki</a></p><p>All functions and tables associated with this module are installed in a schema called <code class="varname">topology</code>.</p><p>Functions that are defined in SQL/MM standard are prefixed with ST_ and functions specific to PostGIS are not prefixed.</p><p>To build PostGIS 2.0 with topology support, compile with the --with-topology option as described in <a class="xref" href="#postgis_installation" title="Chapter 2. PostGIS Installation">Chapter 2, <i>PostGIS Installation</i></a>.  Some functions depend on GEOS 3.3+ so you should compile with GEOS 3.3+ to fully utilize the topology support.</p><div class="sect1" title="11.1. Topology Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Types"></a>11.1. Topology Types</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL data types installed by PostGIS Topology.  Note we describe the casting behavior of these which is very
                    important especially when designing your own functions.
                </p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#getfaceedges_returntype">getfaceedges_returntype</a></span><span class="refpurpose"> — A composite type that consists of a sequence number and edge number.  This is the return type for <code class="varname">ST_GetFaceEdges</code></span></dt><dt><span class="refentrytitle"><a href="#topogeometry">TopoGeometry</a></span><span class="refpurpose"> — A composite type representing a topologically defined geometry</span></dt><dt><span class="refentrytitle"><a href="#validatetopology_returntype">validatetopology_returntype</a></span><span class="refpurpose"> — A composite type that consists of an error message and id1 and id2 to denote location of error.  This is the return type for <code class="varname">ValidateTopology</code></span></dt></dl></div><div class="refentry" title="getfaceedges_returntype"><a name="getfaceedges_returntype"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>getfaceedges_returntype — A composite type that consists of a sequence number and edge number.  This is the return type for <code class="varname">ST_GetFaceEdges</code></p></div><div class="refsection" title="Description"><a name="idp97957328"></a><h2>Description</h2><p>A composite type that consists of a sequence number and edge number.  This is the return type for <code class="varname">ST_GetFaceEdges</code> function.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">sequence</code> is an integer:  Refers to a topology defined in the topology.topology table which defines the topology schema and srid.</p></li><li class="listitem"><p><code class="varname">edge</code> is an integer: The identifier of an edge.</p></li></ol></div></div></div><div class="refentry" title="TopoGeometry"><div class="refentry.separator"><hr></div><a name="topogeometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeometry — A composite type representing a topologically defined geometry</p></div><div class="refsection" title="Description"><a name="idp97963344"></a><h2>Description</h2><p>A composite type that refers to a topology geometry in a specific topology layer, having a specific type and a specific id. The elements of a TopoGeometry are the properties: topology_id, layer_id, id integer, type integer.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">topology_id</code> is an integer:  Refers to a topology defined in the topology.topology table which defines the topology schema and srid.</p></li><li class="listitem"><p><code class="varname">layer_id</code> is an integer: The layer_id in the layers table that the TopoGeometry belongs to.  The combination of topology_id, layer_id provides a unique reference in the topology.layers table.</p></li><li class="listitem"><p><code class="varname">id</code> is an integer: The id is the autogenerated sequence number that uniquely defines the topogeometry in the respective topology layer.</p></li><li class="listitem"><p><code class="varname">type</code> integer between 1 - 4 that defines the geometry type: 1:[multi]point, 2:[multi]line, 3:[multi]poly, 4:collection</p></li></ol></div></div><div class="refsection" title="Casting Behavior"><a name="idp97969616"></a><h2>Casting Behavior</h2><p>This section lists the automatic as well as explicit casts allowed for this data type</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><tbody><tr><td>Cast To</td><td>Behavior</td></tr><tr><td>geometry</td><td>automatic</td></tr></tbody></table></div></div><div class="refsection" title="See Also"><a name="idp97974992"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a></p></div></div><div class="refentry" title="validatetopology_returntype"><div class="refentry.separator"><hr></div><a name="validatetopology_returntype"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>validatetopology_returntype — A composite type that consists of an error message and id1 and id2 to denote location of error.  This is the return type for <code class="varname">ValidateTopology</code></p></div><div class="refsection" title="Description"><a name="idp97978320"></a><h2>Description</h2><p>A composite type that consists of an error message and two integers.  The <a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> function returns a set of these to denote validation errors and the id1 and id2 to denote the ids of the topology objects involved in the error.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">error</code> is varchar:  Denotes type of error. </p><p>Current error descriptors are: coincident nodes, edge crosses node, edge not simple, edge end node geometry mis-match, edge start node geometry mismatch, face overlaps face,face within face,  </p></li><li class="listitem"><p><code class="varname">id1</code> is an integer: Denotes identifier of edge / face / nodes in error.</p></li><li class="listitem"><p><code class="varname">id2</code> is an integer: For errors that involve 2 objects denotes the secondary edge / or node</p></li></ol></div></div><div class="refsection" title="See Also"><a name="idp97984336"></a><h2>See Also</h2><p><a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a></p></div></div></div><div class="sect1" title="11.2. Topology Domains"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Domains"></a>11.2. Topology Domains</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL domains installed by PostGIS Topology.  Domains can be used like object types as return objects of functions or table columns. The distinction between
                    a domain and a type is that a domain is an existing type with a check constraint bound to it.
                </p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#topoelement">TopoElement</a></span><span class="refpurpose"> — An array of 2 integers generally used to identify a TopoGeometry component.</span></dt><dt><span class="refentrytitle"><a href="#topoelementarray">TopoElementArray</a></span><span class="refpurpose"> — An array of TopoElement objects</span></dt></dl></div><div class="refentry" title="TopoElement"><a name="topoelement"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoElement — An array of 2 integers generally used to identify a TopoGeometry component.</p></div><div class="refsection" title="Description"><a name="idp97989456"></a><h2>Description</h2><p>
An array of 2 integers used to represent one component of a simple or
hierarchical <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>.
			</p><p>
In the case of a simple TopoGeometry the first element of the array
represents the identifier of a topological primitive and the second
element represents its type (1:node, 2:edge, 3:face). In the case of a
hierarchical TopoGeometry the first element of the array represents the
identifier of a child TopoGeometry and the second element represents
its layer identifier.
			</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
For any given hierarchical TopoGeometry all child TopoGeometry
elements will come from the same child layer, as specified in
the topology.layer record for the layer of the TopoGeometry
being defined.
</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp97991888"></a><h2>Examples</h2><pre class="programlisting">
SELECT te[1] AS id, te[2] AS type FROM
( SELECT ARRAY[1,2]::topology.topoelement AS te ) f;
 id | type
----+------
  1 |    2
                 </pre><pre class="programlisting">SELECT ARRAY[1,2]::topology.topoelement;
  te
-------
 {1,2}
                 </pre><pre class="programlisting">
--Example of what happens when you try to case a 3 element array to topoelement
-- NOTE: topoement has to be a 2 element array so fails dimension check
SELECT ARRAY[1,2,3]::topology.topoelement;
ERROR:  value for domain topology.topoelement violates check constraint "dimensions"
                 </pre></div><div class="refsection" title="See Also"><a name="idp97994448"></a><h2>See Also</h2><p>
                  <a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>,
                  <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>,
                  <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>,
                  <a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>,
                  <a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a>
                </p></div></div><div class="refentry" title="TopoElementArray"><div class="refentry.separator"><hr></div><a name="topoelementarray"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoElementArray — An array of TopoElement objects</p></div><div class="refsection" title="Description"><a name="idp98007504"></a><h2>Description</h2><p>An array of 1 or more TopoElement objects, generally used to pass around components of TopoGeometry objects.</p></div><div class="refsection" title="Examples"><a name="idp98008656"></a><h2>Examples</h2><pre class="programlisting">SELECT '{{1,2},{4,3}}'::topology.topoelementarray As tea;
  tea
-------
{{1,2},{4,3}}

-- more verbose equivalent --
SELECT ARRAY[ARRAY[1,2], ARRAY[4,3]]::topology.topoelementarray As tea;

  tea
-------
{{1,2},{4,3}}

--using the array agg function packaged with topology --
SELECT topology.TopoElementArray_Agg(ARRAY[e,t]) As tea
  FROM generate_series(1,4) As e CROSS JOIN generate_series(1,3) As t;
  tea
--------------------------------------------------------------------------
{{1,1},{1,2},{1,3},{2,1},{2,2},{2,3},{3,1},{3,2},{3,3},{4,1},{4,2},{4,3}}
                 </pre><pre class="programlisting">SELECT '{{1,2,4},{3,4,5}}'::topology.topoelementarray As tea;
ERROR:  value for domain topology.topoelementarray violates check constraint "dimensions"
                 </pre></div><div class="refsection" title="See Also"><a name="idp98010704"></a><h2>See Also</h2><p>
<a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>,
<a class="xref" href="#GetTopoGeomElementArray" title="GetTopoGeomElementArray">GetTopoGeomElementArray</a>,
<a class="xref" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a>
                </p></div></div></div><div class="sect1" title="11.3. Topology and TopoGeometry Management"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_ManagementFunctions"></a>11.3. Topology and TopoGeometry Management</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the Topology functions for building new Topology schemas, validating topologies, and managing TopoGeometry Columns</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#AddTopoGeometryColumn">AddTopoGeometryColumn</a></span><span class="refpurpose"> — Adds a topogeometry column to an existing table, registers this new column as a layer in topology.layer and returns the new layer_id.</span></dt><dt><span class="refentrytitle"><a href="#DropTopology">DropTopology</a></span><span class="refpurpose"> — Use with caution: Drops a topology schema and deletes its reference from  topology.topology table and references to tables in that schema from the geometry_columns table.</span></dt><dt><span class="refentrytitle"><a href="#DropTopoGeometryColumn">DropTopoGeometryColumn</a></span><span class="refpurpose"> — Drops the topogeometry column from the table named <code class="varname">table_name</code> in schema <code class="varname">schema_name</code> and unregisters the columns from topology.layer table.</span></dt><dt><span class="refentrytitle"><a href="#Populate_Topology_Layer">Populate_Topology_Layer</a></span><span class="refpurpose"> — Adds missing entries to topology.layer table by reading metadata from topo tables.</span></dt><dt><span class="refentrytitle"><a href="#TopologySummary">TopologySummary</a></span><span class="refpurpose"> — Takes a topology name and provides summary totals of types of objects in topology</span></dt><dt><span class="refentrytitle"><a href="#ValidateTopology">ValidateTopology</a></span><span class="refpurpose"> — Returns a set of validatetopology_returntype objects detailing issues with topology</span></dt></dl></div><div class="refentry" title="AddTopoGeometryColumn"><a name="AddTopoGeometryColumn"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddTopoGeometryColumn — Adds a topogeometry column to an existing table, registers this new column as a layer in topology.layer and returns the new layer_id.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">AddTopoGeometryColumn</b>(</code>varchar 
                        <var class="pdparam">topology_name</var>, varchar 
                        <var class="pdparam">schema_name</var>, varchar 
                        <var class="pdparam">table_name</var>, varchar 
                        <var class="pdparam">column_name</var>, varchar 
                        <var class="pdparam">feature_type</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">AddTopoGeometryColumn</b>(</code>varchar 
                        <var class="pdparam">topology_name</var>, varchar 
                        <var class="pdparam">schema_name</var>, varchar 
                        <var class="pdparam">table_name</var>, varchar 
                        <var class="pdparam">column_name</var>, varchar 
                        <var class="pdparam">feature_type</var>, integer 
                        <var class="pdparam">child_layer</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98039632"></a><h2>Description</h2><p>Each TopoGeometry object belongs to a specific Layer of a specific Topology. Before creating a TopoGeometry object you need to create its TopologyLayer.
                    A Topology Layer is an association of a feature-table with the topology. It also contain type and hierarchy information. We create a layer using the AddTopoGeometryColumn() function: </p><p>This function will both add the requested column to the table and add a record to the topology.layer table with all the given info.</p><p>If you don't specify [child_layer] (or set it to NULL) this layer would contain Basic TopoGeometries (composed by primitive topology elements).
                    Otherwise this layer will contain hierarchical TopoGeometries (composed by TopoGeometries from the child_layer).</p><p>Once the layer is created (its id is returned by the AddTopoGeometryColumn function) you're ready to construct TopoGeometry objects in it</p><p>Valid <code class="varname">feature_type</code>s are: POINT, LINE, POLYGON, COLLECTION</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98043344"></a><h2>Examples</h2><pre class="programlisting">-- Note for this example we created our new table in the ma_topo schema
-- though we could have created it in a different schema -- in which case topology_name and schema_name would be different
CREATE SCHEMA ma;
CREATE TABLE ma.parcels(gid serial, parcel_id varchar(20) PRIMARY KEY, address text);
SELECT topology.AddTopoGeometryColumn('ma_topo', 'ma', 'parcels', 'topo', 'POLYGON');</pre><pre class="programlisting">
CREATE SCHEMA ri;
CREATE TABLE ri.roads(gid serial PRIMARY KEY, road_name text);
SELECT topology.AddTopoGeometryColumn('ri_topo', 'ri', 'roads', 'topo', 'LINE');
</pre></div><div class="refsection" title="See Also"><a name="idp98045392"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a></p></div></div><div class="refentry" title="DropTopology"><div class="refentry.separator"><hr></div><a name="DropTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropTopology — Use with caution: Drops a topology schema and deletes its reference from  topology.topology table and references to tables in that schema from the geometry_columns table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">DropTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98051792"></a><h2>Description</h2><p>Drops a topology schema and deletes its reference from topology.topology table and references to tables in that schema from the geometry_columns table.
                This function should be USED WITH CAUTION, as it could destroy data you care about.  If the schema does not exist, it just removes reference entries the named schema.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98053584"></a><h2>Examples</h2><p>Cascade drops the ma_topo schema and removes all references to it in topology.topology and geometry_columns.</p><pre class="programlisting">SELECT topology.DropTopology('ma_topo');</pre></div><div class="refsection" title="See Also"><a name="idp98055632"></a><h2>See Also</h2><p></p></div></div><div class="refentry" title="DropTopoGeometryColumn"><div class="refentry.separator"><hr></div><a name="DropTopoGeometryColumn"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>DropTopoGeometryColumn — Drops the topogeometry column from the table named <code class="varname">table_name</code> in schema <code class="varname">schema_name</code> and unregisters the columns from topology.layer table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">DropTopoGeometryColumn</b>(</code>varchar  <var class="pdparam">schema_name</var>, varchar  <var class="pdparam">table_name</var>, varchar  <var class="pdparam">column_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98064208"></a><h2>Description</h2><p>Drops the topogeometry column from the table named <code class="varname">table_name</code> in schema <code class="varname">schema_name</code> and unregisters the columns from topology.layer table. Returns summary
                of drop status.  NOTE: it first sets all values to NULL before dropping to bypass referential integrity checks.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98066768"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.DropTopoGeometryColumn('ma_topo', 'parcel_topo', 'topo');</pre></div><div class="refsection" title="See Also"><a name="idp98068304"></a><h2>See Also</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a></p></div></div><div class="refentry" title="Populate_Topology_Layer"><div class="refentry.separator"><hr></div><a name="Populate_Topology_Layer"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Populate_Topology_Layer — Adds missing entries to topology.layer table by reading metadata from topo tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">Populate_Topology_Layer</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98073552"></a><h2>Description</h2><p>Adds missing entries to the <code class="varname">topology.layer</code> table by inspecting topology constraints on tables.
                This function is useful for fixing up entries in topology catalog after restores of schemas with topo data.</p><p>It returns the list of entries created. Returned columns are <code class="varname">schema_name</code>, <code class="varname">table_name</code>, <code class="varname">feature_column</code>.</p><p>Availability: 2.3.0</p></div><div class="refsection" title="Examples"><a name="idp98077264"></a><h2>Examples</h2><pre class="programlisting">SELECT CreateTopology('strk_topo');
CREATE SCHEMA strk;
CREATE TABLE strk.parcels(gid serial, parcel_id varchar(20) PRIMARY KEY, address text);
SELECT topology.AddTopoGeometryColumn('strk_topo', 'strk', 'parcels', 'topo', 'POLYGON');
-- this will return no records because this feature is already registered
SELECT * 
  FROM topology.Populate_Topology_Layer(); 

-- let's rebuild
TRUNCATE TABLE topology.layer;

SELECT * 
  FROM topology.Populate_Topology_Layer(); 
  
SELECT topology_id,layer_id, schema_name As sn, table_name As tn, feature_column As fc
FROM topology.layer;
				
				</pre><pre class="screen"> schema_name | table_name | feature_column
-------------+------------+----------------
 strk        | parcels    | topo
(1 row)

 topology_id | layer_id |  sn  |   tn    |  fc
-------------+----------+------+---------+------
           2 |        2 | strk | parcels | topo
(1 row)</pre></div><div class="refsection" title="See Also"><a name="idp98079440"></a><h2>See Also</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a></p></div></div><div class="refentry" title="TopologySummary"><div class="refentry.separator"><hr></div><a name="TopologySummary"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopologySummary — Takes a topology name and provides summary totals of types of objects in topology</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">TopologySummary</b>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98085328"></a><h2>Description</h2><p>Takes a topology name and provides summary totals of types of objects in topology.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98087120"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.topologysummary('city_data');
                    topologysummary
--------------------------------------------------------
 Topology city_data (329), SRID 4326, precision: 0
 22 nodes, 24 edges, 10 faces, 29 topogeoms in 5 layers
 Layer 1, type Polygonal (3), 9 topogeoms
  Deploy: features.land_parcels.feature
 Layer 2, type Puntal (1), 8 topogeoms
  Deploy: features.traffic_signs.feature
 Layer 3, type Lineal (2), 8 topogeoms
  Deploy: features.city_streets.feature
 Layer 4, type Polygonal (3), 3 topogeoms
  Hierarchy level 1, child layer 1
  Deploy: features.big_parcels.feature
 Layer 5, type Puntal (1), 1 topogeoms
  Hierarchy level 1, child layer 2
  Deploy: features.big_signs.feature</pre></div><div class="refsection" title="See Also"><a name="idp98088784"></a><h2>See Also</h2><p><a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div><div class="refentry" title="ValidateTopology"><div class="refentry.separator"><hr></div><a name="ValidateTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ValidateTopology — Returns a set of validatetopology_returntype objects detailing issues with topology</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof validatetopology_returntype <b class="fsfunc">ValidateTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98094672"></a><h2>Description</h2><p>Returns a set of <a class="xref" href="#validatetopology_returntype" title="validatetopology_returntype">validatetopology_returntype</a> objects detailing issues with topology. List of possible errors and what the returned ids represent are displayed below:</p><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><thead><tr><th>Error</th><th>id1</th><th>id2</th></tr></thead><tbody><tr><td>edge crosses node</td><td>edge_id</td><td>node_id</td></tr><tr><td>invalid edge</td><td>edge_id</td><td>null</td></tr><tr><td>edge not simple</td><td>edge_id</td><td>null</td></tr><tr><td>edge crosses edge</td><td>edge_id</td><td>edge_id</td></tr><tr><td>edge start node geometry mis-match</td><td>edge_id</td><td>node_id</td></tr><tr><td>edge end node geometry mis-match</td><td>edge_id</td><td>node_id</td></tr><tr><td>face without edges</td><td>face_id</td><td>null</td></tr><tr><td>face has no rings</td><td>face_id</td><td>null</td></tr><tr><td>face overlaps face</td><td>face_id</td><td>face_id</td></tr><tr><td>face within face</td><td>inner face_id</td><td>outer face_id</td></tr></tbody></table></div><p>Availability: 1.0.0</p><p>Enhanced: 2.0.0 more efficient edge crossing detection and fixes for false positives that were existent in prior versions.</p><p>Changed: 2.2.0 values for id1 and id2 were swapped for 'edge crosses node' to be consistent with error description.</p></div><div class="refsection" title="Examples"><a name="idp98116688"></a><h2>Examples</h2><pre class="programlisting">SELECT * FROM  topology.ValidateTopology('ma_topo');
      error        | id1 | id2
-------------------+-----+-----
face without edges |   0 |
				</pre></div><div class="refsection" title="See Also"><a name="idp98118224"></a><h2>See Also</h2><p><a class="xref" href="#validatetopology_returntype" title="validatetopology_returntype">validatetopology_returntype</a>, <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div></div><div class="sect1" title="11.4. Topology Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Constructors"></a>11.4. Topology Constructors</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section covers the topology functions for creating new topologies.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#CreateTopology">CreateTopology</a></span><span class="refpurpose"> — Creates a new topology schema and registers this new schema in the topology.topology table.</span></dt><dt><span class="refentrytitle"><a href="#CopyTopology">CopyTopology</a></span><span class="refpurpose"> — Makes a copy of a topology structure (nodes, edges, faces, layers and TopoGeometries).</span></dt><dt><span class="refentrytitle"><a href="#ST_InitTopoGeo">ST_InitTopoGeo</a></span><span class="refpurpose"> — Creates a new topology schema and registers this new schema in the topology.topology table and details summary of process.</span></dt><dt><span class="refentrytitle"><a href="#ST_CreateTopoGeo">ST_CreateTopoGeo</a></span><span class="refpurpose"> — 
Adds a collection of geometries to a given empty topology and returns a message detailing success.
				</span></dt><dt><span class="refentrytitle"><a href="#TopoGeo_AddPoint">TopoGeo_AddPoint</a></span><span class="refpurpose"> — 
Adds a point to an existing topology using a tolerance and possibly splitting an existing edge.
				</span></dt><dt><span class="refentrytitle"><a href="#TopoGeo_AddLineString">TopoGeo_AddLineString</a></span><span class="refpurpose"> — 
Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces. Returns edge identifiers
				</span></dt><dt><span class="refentrytitle"><a href="#TopoGeo_AddPolygon">TopoGeo_AddPolygon</a></span><span class="refpurpose"> — 
Adds a polygon to an existing topology using a tolerance and possibly splitting existing edges/faces.
				</span></dt></dl></div><div class="refentry" title="CreateTopology"><a name="CreateTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CreateTopology — Creates a new topology schema and registers this new schema in the topology.topology table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">CreateTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">CreateTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">CreateTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">tolerance</var><code>)</code>;</p><p><code class="funcdef">integer <b class="fsfunc">CreateTopology</b>(</code>varchar  <var class="pdparam">topology_schema_name</var>, integer  <var class="pdparam">srid</var>, double precision  <var class="pdparam">tolerance</var>, boolean  <var class="pdparam">hasz</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98139600"></a><h2>Description</h2><p>Creates a new schema with name <code class="varname">topology_name</code> consisting of tables (<code class="varname">edge_data</code>,<code class="varname">face</code>,<code class="varname">node</code>, <code class="varname">relation</code>
                    and registers this new topology in the topology.topology table. It returns the id of the topology in the topology table. The srid is the spatial reference identified as
                defined in spatial_ref_sys table for that topology.  Topologies must be uniquely named.  The tolerance is measured in the units of the spatial reference system.  If the tolerance is not specified defaults to 0.</p><p>This is similar to the SQL/MM <a class="xref" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a> but a bit more functional.  <code class="varname">hasz</code> defaults to false if not specified.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98144464"></a><h2>Examples</h2><p>This example creates a new schema called ma_topo that will store edges, faces, and relations in Massachusetts State Plane meters.
					The tolerance represents 1/2 meter since the spatial reference system is a meter based spatial reference system</p><pre class="programlisting">SELECT topology.CreateTopology('ma_topo',26986, 0.5);</pre><p>Create Rhode Island topology in State Plane ft</p><pre class="programlisting">SELECT topology.CreateTopology('ri_topo',3438) As topoid;
topoid
------
2</pre></div><div class="refsection" title="See Also"><a name="idp98147408"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a>, <a class="xref" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a></p></div></div><div class="refentry" title="CopyTopology"><div class="refentry.separator"><hr></div><a name="CopyTopology"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CopyTopology — Makes a copy of a topology structure (nodes, edges, faces, layers and TopoGeometries).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">CopyTopology</b>(</code>varchar  <var class="pdparam">existing_topology_name</var>, varchar  <var class="pdparam">new_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98155216"></a><h2>Description</h2><p>
Creates a new topology with name <code class="varname">new_topology_name</code> and SRID and precision taken from <code class="varname">existing_topology_name</code>, copies all nodes, edges and faces in there, copies layers and their TopoGeometries too.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
The new rows in topology.layer will contain synthesized values for schema_name, table_name and feature_column. This is because the TopoGeometry will only exist as a definition but won't be available in any user-level table yet.
		</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98158288"></a><h2>Examples</h2><p>
This example makes a backup of a topology called ma_topo
				</p><pre class="programlisting">SELECT topology.CopyTopology('ma_topo', 'ma_topo_bakup');</pre></div><div class="refsection" title="See Also"><a name="idp98160208"></a><h2>See Also</h2><p><a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a></p></div></div><div class="refentry" title="ST_InitTopoGeo"><div class="refentry.separator"><hr></div><a name="ST_InitTopoGeo"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_InitTopoGeo — Creates a new topology schema and registers this new schema in the topology.topology table and details summary of process.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_InitTopoGeo</b>(</code>varchar  <var class="pdparam">topology_schema_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98166736"></a><h2>Description</h2><p>This is an SQL-MM equivalent of CreateTopology but lacks the spatial reference and tolerance options of CreateTopology and outputs a text description of creation instead of topology id.</p><p>Availability: 1.?</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.17</p></div><div class="refsection" title="Examples"><a name="idp98174160"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.ST_InitTopoGeo('topo_schema_to_create') AS topocreation;
                      astopocreation
------------------------------------------------------------
 Topology-Geometry 'topo_schema_to_create' (id:7) created.
				</pre></div><div class="refsection" title="See Also"><a name="idp98175696"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a></p></div></div><div class="refentry" title="ST_CreateTopoGeo"><div class="refentry.separator"><hr></div><a name="ST_CreateTopoGeo"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_CreateTopoGeo — 
Adds a collection of geometries to a given empty topology and returns a message detailing success.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_CreateTopoGeo</b>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">acollection</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98223696"></a><h2>Description</h2><p>
Adds a collection of geometries to a given empty topology and returns a message detailing success.
                </p><p>Useful for populating an empty topology.</p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details -- X.3.18</p></div><div class="refsection" title="Examples"><a name="idp98227408"></a><h2>Examples</h2><pre class="programlisting">
-- Populate topology --
SELECT topology.ST_CreateTopoGeo('ri_topo',
 ST_GeomFromText('MULTILINESTRING((384744 236928,384750 236923,384769 236911,384799 236895,384811 236890,384833 236884,
  384844 236882,384866 236881,384879 236883,384954 236898,385087 236932,385117 236938,
  385167 236938,385203 236941,385224 236946,385233 236950,385241 236956,385254 236971,
  385260 236979,385268 236999,385273 237018,385273 237037,385271 237047,385267 237057,
  385225 237125,385210 237144,385192 237161,385167 237192,385162 237202,385159 237214,
  385159 237227,385162 237241,385166 237256,385196 237324,385209 237345,385234 237375,
  385237 237383,385238 237399,385236 237407,385227 237419,385213 237430,385193 237439,
  385174 237451,385170 237455,385169 237460,385171 237475,385181 237503,385190 237521,
  385200 237533,385206 237538,385213 237541,385221 237542,385235 237540,385242 237541,
  385249 237544,385260 237555,385270 237570,385289 237584,385292 237589,385291 237596,385284 237630))',3438)
  );

      st_createtopogeo
----------------------------
 Topology ri_topo populated


-- create tables and topo geometries --
CREATE TABLE ri.roads(gid serial PRIMARY KEY, road_name text);

SELECT topology.AddTopoGeometryColumn('ri_topo', 'ri', 'roads', 'topo', 'LINE');
				</pre></div><div class="refsection" title="See Also"><a name="idp98228944"></a><h2>See Also</h2><p><a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a></p></div></div><div class="refentry" title="TopoGeo_AddPoint"><div class="refentry.separator"><hr></div><a name="TopoGeo_AddPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddPoint — 
Adds a point to an existing topology using a tolerance and possibly splitting an existing edge.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">TopoGeo_AddPoint</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98237904"></a><h2>Description</h2><p>
Adds a point to an existing topology and return its identifier.
The given point will snap to existing nodes or edges within given tolerance.
An existing edge may be split by the snapped point.
                </p><p>Availability: 2.0.0</p></div><div class="refsection" title="See Also"><a name="idp98240080"></a><h2>See Also</h2><p>
<a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>,
<a class="xref" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>,
<a class="xref" href="#AddNode" title="AddNode">AddNode</a>,
<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>
</p></div></div><div class="refentry" title="TopoGeo_AddLineString"><div class="refentry.separator"><hr></div><a name="TopoGeo_AddLineString"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddLineString — 
Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces. Returns edge identifiers
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">SETOF integer <b class="fsfunc">TopoGeo_AddLineString</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">aline</var>, float8  <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98249680"></a><h2>Description</h2><p>
Adds a linestring to an existing topology and return a set of edge identifiers forming it up.
The given line will snap to existing nodes or edges within given tolerance.
Existing edges and faces may be split by the line.
                </p><p>Availability: 2.0.0</p></div><div class="refsection" title="See Also"><a name="idp98251728"></a><h2>See Also</h2><p>
<a class="xref" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>,
<a class="xref" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a>,
<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>,
<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>
				</p></div></div><div class="refentry" title="TopoGeo_AddPolygon"><div class="refentry.separator"><hr></div><a name="TopoGeo_AddPolygon"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeo_AddPolygon — 
Adds a polygon to an existing topology using a tolerance and possibly splitting existing edges/faces.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">TopoGeo_AddPolygon</b>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoly</var>, float8  <var class="pdparam">atolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98261328"></a><h2>Description</h2><p>
Adds a polygon to an existing topology and return a set of face identifiers forming it up.
The boundary of the given polygon will snap to existing nodes or edges within given tolerance.
Existing edges and faces may be split by the boundary of the new polygon.
                </p><p>Availability: 2.0.0</p></div><div class="refsection" title="See Also"><a name="idp98263376"></a><h2>See Also</h2><p>
<a class="xref" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a>,
<a class="xref" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a>,
<a class="xref" href="#AddFace" title="AddFace">AddFace</a>,
<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>
				</p></div></div></div><div class="sect1" title="11.5. Topology Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Editing"></a>11.5. Topology Editors</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section covers topology functions for adding, moving, deleting, and splitting edges, faces, and nodes. All of these functions are defined by ISO SQL/MM.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#ST_AddIsoNode">ST_AddIsoNode</a></span><span class="refpurpose"> — Adds an isolated node to a face in a topology and returns the nodeid of the new node. If face is null, the node is still created.</span></dt><dt><span class="refentrytitle"><a href="#ST_AddIsoEdge">ST_AddIsoEdge</a></span><span class="refpurpose"> — Adds an isolated edge defined by geometry <code class="varname">alinestring</code> to a topology connecting two existing isolated nodes <code class="varname">anode</code> and <code class="varname">anothernode</code> and returns the edge id of the new edge.</span></dt><dt><span class="refentrytitle"><a href="#ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></span><span class="refpurpose"> — Add a new edge and, if in doing so it splits a face, delete the original face and replace it with two new faces.</span></dt><dt><span class="refentrytitle"><a href="#ST_AddEdgeModFace">ST_AddEdgeModFace</a></span><span class="refpurpose"> — Add a new edge and, if in doing so it splits a face, modify the original face and add a new face.</span></dt><dt><span class="refentrytitle"><a href="#ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></span><span class="refpurpose"> — 
Removes an edge and, if the removed edge separated two faces,
delete the original faces and replace them with a new face.
        </span></dt><dt><span class="refentrytitle"><a href="#ST_RemEdgeModFace">ST_RemEdgeModFace</a></span><span class="refpurpose"> — 
Removes an edge and, if the removed edge separated two faces,
delete one of the them and modify the other to take the space of both.
        </span></dt><dt><span class="refentrytitle"><a href="#ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a></span><span class="refpurpose"> — 
Changes the shape of an edge without affecting the topology structure.
				</span></dt><dt><span class="refentrytitle"><a href="#ST_ModEdgeSplit">ST_ModEdgeSplit</a></span><span class="refpurpose"> — Split an edge by creating a new node along an existing edge, modifying the original edge and adding a new edge.</span></dt><dt><span class="refentrytitle"><a href="#ST_ModEdgeHeal">ST_ModEdgeHeal</a></span><span class="refpurpose"> — 
Heal two edges by deleting the node connecting them, modifying the first edge
and deleting the second edge. Returns the id of the deleted node.
				</span></dt><dt><span class="refentrytitle"><a href="#ST_NewEdgeHeal">ST_NewEdgeHeal</a></span><span class="refpurpose"> — 
Heal two edges by deleting the node connecting them, deleting both edges,
and replacing them with an edge whose direction is the same as the first
edge provided.
				</span></dt><dt><span class="refentrytitle"><a href="#ST_MoveIsoNode">ST_MoveIsoNode</a></span><span class="refpurpose"> — Moves an isolated node in a topology from one point to another.  If new <code class="varname">apoint</code> geometry exists as a node an error is thrown. REturns description of move.</span></dt><dt><span class="refentrytitle"><a href="#ST_NewEdgesSplit">ST_NewEdgesSplit</a></span><span class="refpurpose"> — Split an edge by creating a new node along an existing edge, deleting the original edge and replacing it with two new edges.  Returns the id of the new node created that joins the new edges.</span></dt><dt><span class="refentrytitle"><a href="#ST_RemoveIsoNode">ST_RemoveIsoNode</a></span><span class="refpurpose"> — Removes an isolated node and returns description of action. If the node is not isolated (is start or end of an edge), then an exception is thrown.</span></dt></dl></div><div class="refentry" title="ST_AddIsoNode"><a name="ST_AddIsoNode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddIsoNode — Adds an isolated node to a face in a topology and returns the nodeid of the new node. If face is null, the node is still created.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_AddIsoNode</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98275024"></a><h2>Description</h2><p>Adds an isolated node with point location <code class="varname">apoint</code> to an existing face with faceid <code class="varname">aface</code> to a topology <code class="varname">atopology</code> and returns the nodeid of the new node.</p><p>If the spatial reference system (srid) of the point geometry is not the same as the topology, the <code class="varname">apoint</code> is not a point geometry, the point is null, or the point intersects an existing edge (even at the boundaries) then an exception is thrown. If the point already
                    exists as a node, an exception is thrown. </p><p>If <code class="varname">aface</code> is not null and the <code class="varname">apoint</code> is not within the face, then an exception is thrown.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X+1.3.1</p></div><div class="refsection" title="Examples"><a name="idp98281424"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98282960"></a><h2>See Also</h2><p><a class="xref" href="#AddNode" title="AddNode">AddNode</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>, <a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div><div class="refentry" title="ST_AddIsoEdge"><div class="refentry.separator"><hr></div><a name="ST_AddIsoEdge"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddIsoEdge — Adds an isolated edge defined by geometry <code class="varname">alinestring</code> to a topology connecting two existing isolated nodes <code class="varname">anode</code> and <code class="varname">anothernode</code> and returns the edge id of the new edge.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_AddIsoEdge</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">alinestring</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98294352"></a><h2>Description</h2><p>Adds an isolated edge defined by geometry <code class="varname">alinestring</code> to a topology connecting two existing isolated nodes <code class="varname">anode</code> and <code class="varname">anothernode</code> and returns the edge id of the new edge.</p><p>If the spatial reference system (srid) of the <code class="varname">alinestring</code> geometry is not the same as the topology, any of the input arguments are null,   or the nodes are contained in more than one face, or the nodes are start or end nodes of an existing edge,
                    then an exception is thrown. </p><p>If the <code class="varname">alinestring</code> is not within the face of the face the <code class="varname">anode</code> and <code class="varname">anothernode</code> belong to, then an exception is thrown. </p><p>If the <code class="varname">anode</code> and <code class="varname">anothernode</code> are not the start and end points of the <code class="varname">alinestring</code> then an exception is thrown.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.4</p></div><div class="refsection" title="Examples"><a name="idp98302672"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98304208"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a>,  <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_Within" title="ST_Within">ST_Within</a></p></div></div><div class="refentry" title="ST_AddEdgeNewFaces"><div class="refentry.separator"><hr></div><a name="ST_AddEdgeNewFaces"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddEdgeNewFaces — Add a new edge and, if in doing so it splits a face, delete the original face and replace it with two new faces.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_AddEdgeNewFaces</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98330704"></a><h2>Description</h2><p>
Add a new edge and, if in doing so it splits a face, delete the original
face and replace it with two new faces.
Returns the id of the newly added edge.
		</p><p>
Updates all existing joined edges and relationships accordingly.
		</p><p>If any arguments are null, the given nodes are unknown (must already exist in the <code class="varname">node</code> table of the topology schema) ,
                    the <code class="varname">acurve</code> is not a <code class="varname">LINESTRING</code>, the <code class="varname">anode</code> and <code class="varname">anothernode</code> are not the start
                    and endpoints of <code class="varname">acurve</code> then an error is thrown.</p><p>If the spatial reference system (srid) of the <code class="varname">acurve</code> geometry is not the same as the topology an exception is thrown.</p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.12</p></div><div class="refsection" title="Examples"><a name="idp98337872"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98339408"></a><h2>See Also</h2><p><a class="xref" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></p><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p></div></div><div class="refentry" title="ST_AddEdgeModFace"><div class="refentry.separator"><hr></div><a name="ST_AddEdgeModFace"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_AddEdgeModFace — Add a new edge and, if in doing so it splits a face, modify the original face and add a new face.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_AddEdgeModFace</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var>, integer  <var class="pdparam">anothernode</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98349008"></a><h2>Description</h2><p>
Add a new edge and, if doing so splits a face, modify the original
face and add a new one.
                </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
If possible, the new face will be created on left side of the new edge.
This will not be possible if the face on the left side will need to
be the Universe face (unbounded).
</p></td></tr></table></div><p>
Returns the id of the newly added edge.
		</p><p>
Updates all existing joined edges and relationships accordingly.
		</p><p>If any arguments are null, the given nodes are unknown (must already exist in the <code class="varname">node</code> table of the topology schema) ,
                    the <code class="varname">acurve</code> is not a <code class="varname">LINESTRING</code>, the <code class="varname">anode</code> and <code class="varname">anothernode</code> are not the start
                    and endpoints of <code class="varname">acurve</code> then an error is thrown.</p><p>If the spatial reference system (srid) of the <code class="varname">acurve</code> geometry is not the same as the topology an exception is thrown.</p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.13</p></div><div class="refsection" title="Examples"><a name="idp98357072"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98358608"></a><h2>See Also</h2><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></p></div></div><div class="refentry" title="ST_RemEdgeNewFace"><div class="refentry.separator"><hr></div><a name="ST_RemEdgeNewFace"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RemEdgeNewFace — 
Removes an edge and, if the removed edge separated two faces,
delete the original faces and replace them with a new face.
        </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_RemEdgeNewFace</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98374352"></a><h2>Description</h2><p>
Removes an edge and, if the removed edge separated two faces,
delete the original faces and replace them with a new face.
		            </p><p>
Returns the id of a newly created face or NULL, if no new face is created.
No new face is created when the removed edge is dangling or isolated or
confined with the universe face (possibly making the universe flood into
the face on the other side).
		            </p><p>
Updates all existing joined edges and relationships accordingly.
		            </p><p>
Refuses to remove an edge partecipating in the definition of an
existing TopoGeometry.
Refuses to heal two faces if any TopoGeometry is defined by only
one of them (and not the other).
		            </p><p>
If any arguments are null, the given edge is unknown (must already exist in
the <code class="varname">edge</code> table of the topology schema), the topology
name is invalid then an error is thrown.
                </p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.14</p></div><div class="refsection" title="Examples"><a name="idp98387792"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98389328"></a><h2>See Also</h2><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a></p></div></div><div class="refentry" title="ST_RemEdgeModFace"><div class="refentry.separator"><hr></div><a name="ST_RemEdgeModFace"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RemEdgeModFace — 
Removes an edge and, if the removed edge separated two faces,
delete one of the them and modify the other to take the space of both.
        </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_RemEdgeModFace</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98396880"></a><h2>Description</h2><p>
Removes an edge and, if the removed edge separated two faces,
delete one of the them and modify the other to take the space of both.
Preferentially keeps the face on the right, to be symmetric with
ST_AddEdgeModFace also keeping it.
Returns the id of the face remaining in place of the removed edge.
		            </p><p>
Updates all existing joined edges and relationships accordingly.
		            </p><p>
Refuses to remove an edge partecipating in the definition of an
existing TopoGeometry.
Refuses to heal two faces if any TopoGeometry is defined by only
one of them (and not the other).
		            </p><p>
If any arguments are null, the given edge is unknown (must already exist in
the <code class="varname">edge</code> table of the topology schema), the topology
name is invalid then an error is thrown.
                </p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.15</p></div><div class="refsection" title="Examples"><a name="idp98401616"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98403280"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p><p><a class="xref" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a></p></div></div><div class="refentry" title="ST_ChangeEdgeGeom"><div class="refentry.separator"><hr></div><a name="ST_ChangeEdgeGeom"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ChangeEdgeGeom — 
Changes the shape of an edge without affecting the topology structure.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_ChangeEdgeGeom</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">acurve</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98411856"></a><h2>Description</h2><p>
Changes the shape of an edge without affecting the topology structure.
		</p><p>
If any arguments are null, the given edge does not exist in
the <code class="varname">edge</code> table of the topology schema, the
<code class="varname">acurve</code> is not a <code class="varname">LINESTRING</code>, the
<code class="varname">anode</code> and <code class="varname">anothernode</code> are not the
start and endpoints of <code class="varname">acurve</code> or the modification would
change the underlying topology then an error is thrown.
		</p><p>If the spatial reference system (srid) of the <code class="varname">acurve</code> geometry is not the same as the topology an exception is thrown.</p><p>If the new <code class="varname">acurve</code> is not simple, then an error is thrown.</p><p>
If moving the edge from old to new position would hit an obstacle then
an error is thrown.
		</p><p>Availability: 1.1.0</p><p>
	Enhanced: 2.0.0 adds topological consistency enforcement
		</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details X.3.6</p></div><div class="refsection" title="Examples"><a name="idp98420432"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.ST_ChangeEdgeGeom('ma_topo', 1,
		ST_GeomFromText('LINESTRING(227591.9 893900.4,227622.6 893844.3,227641.6 893816.6, 227704.5 893778.5)', 26986) );
 ----
 Edge 1 changed</pre></div><div class="refsection" title="See Also"><a name="idp98421968"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a></p><p><a class="xref" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a></p><p><a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a></p></div></div><div class="refentry" title="ST_ModEdgeSplit"><div class="refentry.separator"><hr></div><a name="ST_ModEdgeSplit"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ModEdgeSplit — Split an edge by creating a new node along an existing edge, modifying the original edge and adding a new edge.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_ModEdgeSplit</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98431056"></a><h2>Description</h2><p>
Split an edge by creating a new node along an existing edge,
modifying the original edge and adding a new edge.
Updates all existing joined edges and relationships accordingly.
Returns the identifier of the newly added node.
		</p><p>Availability: 1.? </p><p>Changed: 2.0 - In prior versions, this was misnamed ST_ModEdgesSplit</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</p></div><div class="refsection" title="Examples"><a name="idp98434640"></a><h2>Examples</h2><pre class="programlisting">
-- Add an edge --
 SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227592 893910, 227600 893910)', 26986) ) As edgeid;

-- edgeid-
3


-- Split the edge  --
SELECT topology.ST_ModEdgeSplit('ma_topo',  3, ST_SetSRID(ST_Point(227594,893910),26986)  ) As node_id;
        node_id
-------------------------
7
</pre></div><div class="refsection" title="See Also"><a name="idp98436304"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>,
				<a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>,
				<a class="xref" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a>,
				<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>
				</p></div></div><div class="refentry" title="ST_ModEdgeHeal"><div class="refentry.separator"><hr></div><a name="ST_ModEdgeHeal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_ModEdgeHeal — 
Heal two edges by deleting the node connecting them, modifying the first edge
and deleting the second edge. Returns the id of the deleted node.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">int <b class="fsfunc">ST_ModEdgeHeal</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, integer  <var class="pdparam">anotheredge</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98445776"></a><h2>Description</h2><p>
Heal two edges by deleting the node connecting them, modifying the first edge
and deleting the second edge.
Returns the id of the deleted node.
Updates all existing joined edges and relationships accordingly.
		</p><p>Availability: 2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</p></div><div class="refsection" title="See Also"><a name="idp98449232"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>
				</p></div></div><div class="refentry" title="ST_NewEdgeHeal"><div class="refentry.separator"><hr></div><a name="ST_NewEdgeHeal"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NewEdgeHeal — 
Heal two edges by deleting the node connecting them, deleting both edges,
and replacing them with an edge whose direction is the same as the first
edge provided.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">int <b class="fsfunc">ST_NewEdgeHeal</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, integer  <var class="pdparam">anotheredge</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98457936"></a><h2>Description</h2><p>
Heal two edges by deleting the node connecting them, deleting both edges,
and replacing them with an edge whose direction is the same as the first
edge provided.
Returns the id of the new edge replacing the healed ones.
Updates all existing joined edges and relationships accordingly.
		</p><p>Availability: 2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</p></div><div class="refsection" title="See Also"><a name="idp98461520"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a>
				</p></div></div><div class="refentry" title="ST_MoveIsoNode"><div class="refentry.separator"><hr></div><a name="ST_MoveIsoNode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_MoveIsoNode — Moves an isolated node in a topology from one point to another.  If new <code class="varname">apoint</code> geometry exists as a node an error is thrown. REturns description of move.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_MoveIsoNode</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98470992"></a><h2>Description</h2><p>Moves an isolated node in a topology from one point to another.  If new <code class="varname">apoint</code> geometry exists as a node an error is thrown.</p><p>If any arguments are null, the <code class="varname">apoint</code> is not a point, the existing node is not isolated (is a start or end point of an existing edge), new node location intersects an existing edge (even at the end points) then an exception is thrown.</p><p>If the spatial reference system (srid) of the point geometry is not the same as the topology an exception is thrown.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X.3.2</p></div><div class="refsection" title="Examples"><a name="idp98475856"></a><h2>Examples</h2><pre class="programlisting">
-- Add an isolated node with no face  --
SELECT topology.ST_AddIsoNode('ma_topo',  NULL, ST_GeomFromText('POINT(227579 893916)', 26986) ) As nodeid;
 nodeid
--------
      7
-- Move the new node --
SELECT topology.ST_MoveIsoNode('ma_topo', 7,  ST_GeomFromText('POINT(227579.5 893916.5)', 26986) ) As descrip;
                      descrip
----------------------------------------------------
Isolated Node 7 moved to location 227579.5,893916.5</pre></div><div class="refsection" title="See Also"><a name="idp98481616"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a></p></div></div><div class="refentry" title="ST_NewEdgesSplit"><div class="refentry.separator"><hr></div><a name="ST_NewEdgesSplit"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_NewEdgesSplit — Split an edge by creating a new node along an existing edge, deleting the original edge and replacing it with two new edges.  Returns the id of the new node created that joins the new edges.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">ST_NewEdgesSplit</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anedge</var>, geometry  <var class="pdparam">apoint</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98489680"></a><h2>Description</h2><p>
Split an edge with edge id <code class="varname">anedge</code> by creating a
new node with point location <code class="varname">apoint</code> along current
edge, deleting the original edge and replacing it with two new edges.
Returns the id of the new node created that joins the new edges.
Updates all existing joined edges and relationships accordingly.
		</p><p>If the spatial reference system (srid) of the point geometry is not the same as the topology, the <code class="varname">apoint</code> is not a point geometry, the point is null, the point already exists as a node, the edge does not correspond to an existing edge or the point is not within the edge then an exception is thrown.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X.3.8</p></div><div class="refsection" title="Examples"><a name="idp98494416"></a><h2>Examples</h2><pre class="programlisting">
-- Add an edge  --
SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227575 893917,227592 893900)', 26986) ) As edgeid;
-- result-
edgeid
------
	2
-- Split the new edge --
SELECT topology.ST_NewEdgesSplit('ma_topo', 2,  ST_GeomFromText('POINT(227578.5 893913.5)', 26986) ) As newnodeid;
 newnodeid
---------
       6</pre></div><div class="refsection" title="See Also"><a name="idp98495952"></a><h2>See Also</h2><p>
				<a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a>
				<a class="xref" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a>
				<a class="xref" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a>
				<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>
				</p></div></div><div class="refentry" title="ST_RemoveIsoNode"><div class="refentry.separator"><hr></div><a name="ST_RemoveIsoNode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_RemoveIsoNode — Removes an isolated node and returns description of action. If the node is not isolated (is start or end of an edge), then an exception is thrown.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">ST_RemoveIsoNode</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98504400"></a><h2>Description</h2><p>Removes an isolated node and returns description of action. If the node is not isolated (is start or end of an edge), then an exception is thrown.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X+1.3.3</p></div><div class="refsection" title="Examples"><a name="idp98507728"></a><h2>Examples</h2><pre class="programlisting">
-- Remove an isolated node with no face  --
SELECT topology.ST_RemoveIsoNode('ma_topo',  7 ) As result;
         result
-------------------------
 Isolated node 7 removed
</pre></div><div class="refsection" title="See Also"><a name="idp98509264"></a><h2>See Also</h2><p><a class="xref" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a></p></div></div></div><div class="sect1" title="11.6. Topology Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Accessors"></a>11.6. Topology Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#GetEdgeByPoint">GetEdgeByPoint</a></span><span class="refpurpose"> — Find the edge-id of an edge that intersects a given point</span></dt><dt><span class="refentrytitle"><a href="#GetFaceByPoint">GetFaceByPoint</a></span><span class="refpurpose"> — Find the face-id of a face that intersects a given point</span></dt><dt><span class="refentrytitle"><a href="#GetNodeByPoint">GetNodeByPoint</a></span><span class="refpurpose"> — Find the id of a node at a point location</span></dt><dt><span class="refentrytitle"><a href="#GetTopologyID">GetTopologyID</a></span><span class="refpurpose"> — Returns the id of a topology in the topology.topology table given the name of the topology.</span></dt><dt><span class="refentrytitle"><a href="#GetTopologySRID">GetTopologySRID</a></span><span class="refpurpose"> — Returns the SRID of a topology in the topology.topology table given the name of the topology.</span></dt><dt><span class="refentrytitle"><a href="#GetTopologyName">GetTopologyName</a></span><span class="refpurpose"> — Returns the name of a topology (schema) given the id of the topology.</span></dt><dt><span class="refentrytitle"><a href="#ST_GetFaceEdges">ST_GetFaceEdges</a></span><span class="refpurpose"> — Returns a set of ordered edges that bound <code class="varname">aface</code>.</span></dt><dt><span class="refentrytitle"><a href="#ST_GetFaceGeometry">ST_GetFaceGeometry</a></span><span class="refpurpose"> — Returns the polygon in the given topology with the specified face id.</span></dt><dt><span class="refentrytitle"><a href="#GetRingEdges">GetRingEdges</a></span><span class="refpurpose"> — 
Returns the ordered set of signed edge identifiers met by walking on an
a given edge side.
				</span></dt><dt><span class="refentrytitle"><a href="#GetNodeEdges">GetNodeEdges</a></span><span class="refpurpose"> — 
Returns an ordered set of edges incident to the given node.
				</span></dt></dl></div><div class="refentry" title="GetEdgeByPoint"><a name="GetEdgeByPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetEdgeByPoint — Find the edge-id of an edge that intersects a given point</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">GetEdgeByPoint</b>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tol</var><code>)</code>;</p></div></div><div class="refsection" title="Retrieve the id of an edge that intersects a Point"><a name="idp98522320"></a><h2>Retrieve the id of an edge that intersects a Point</h2><p>The function returns an integer (id-edge) given a topology, a POINT and a tolerance. If tolerance = 0 then the point has to intersect the edge.</p><p>If the point doesn't intersect an edge, returns 0 (zero).</p><p>If use tolerance &gt; 0 and there is more than one edge near the point then an exception is thrown.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If tolerance = 0, the function use ST_Intersects otherwise uses ST_DWithin.</p></td></tr></table></div><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. </p></div><div class="refsection" title="Examples"><a name="idp98534224"></a><h2>Examples</h2><p>These examples use edges we created in <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a></p><pre class="programlisting">SELECT topology.GetEdgeByPoint('ma_topo',geom, 1) As with1mtol, topology.GetEdgeByPoint('ma_topo',geom,0) As withnotol
FROM ST_GeomFromEWKT('SRID=26986;POINT(227622.6 893843)') As geom;
 with1mtol | withnotol
-----------+-----------
         2 |         0
</pre><pre class="programlisting">SELECT topology.GetEdgeByPoint('ma_topo',geom, 1) As nearnode
FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;

-- get error --
ERROR:  Two or more edges found</pre></div><div class="refsection" title="See Also"><a name="idp98536912"></a><h2>See Also</h2><p>
<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>,
<a class="xref" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a>,
<a class="xref" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a>
</p></div></div><div class="refentry" title="GetFaceByPoint"><div class="refentry.separator"><hr></div><a name="GetFaceByPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetFaceByPoint — Find the face-id of a face that intersects a given point</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">GetFaceByPoint</b>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">apoint</var>, float8  <var class="pdparam">tol</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98546000"></a><h2>Description</h2><p>Retrieve the id of a face that intersects a Point.</p><p>The function returns an integer (id-face) given a topology, a POINT and a tolerance. If tolerance = 0 then the point has to intersect the face.</p><p>If the point doesn't intersect a face, returns 0 (zero).</p><p>If use tolerance &gt; 0 and there is more than one face near the point then an exception is thrown.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If tolerance = 0, the function uses ST_Intersects otherwise uses ST_DWithin.</p></td></tr></table></div><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. </p></div><div class="refsection" title="Examples"><a name="idp98549968"></a><h2>Examples</h2><p>These examples use edges faces created in <a class="xref" href="#AddFace" title="AddFace">AddFace</a></p><pre class="programlisting">SELECT topology.GetFaceByPoint('ma_topo',geom, 10) As with1mtol, topology.GetFaceByPoint('ma_topo',geom,0) As withnotol
	FROM ST_GeomFromEWKT('POINT(234604.6 899382.0)') As geom;

	 with1mtol | withnotol
	-----------+-----------
			 1 |         0</pre><pre class="programlisting">SELECT topology.GetFaceByPoint('ma_topo',geom, 1) As nearnode
	FROM ST_GeomFromEWKT('POINT(227591.9 893900.4)') As geom;

-- get error --
ERROR:  Two or more faces found</pre></div><div class="refsection" title="See Also"><a name="idp98556880"></a><h2>See Also</h2><p>
<a class="xref" href="#AddFace" title="AddFace">AddFace</a>,
<a class="xref" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a>,
<a class="xref" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a>
</p></div></div><div class="refentry" title="GetNodeByPoint"><div class="refentry.separator"><hr></div><a name="GetNodeByPoint"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetNodeByPoint — Find the id of a node at a point location</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">GetNodeByPoint</b>(</code>varchar  <var class="pdparam">atopology</var>, geometry  <var class="pdparam">point</var>, float8  <var class="pdparam">tol</var><code>)</code>;</p></div></div><div class="refsection" title="Retrieve the id of a node at a point location"><a name="idp98570064"></a><h2>Retrieve the id of a node at a point location</h2><p>The function return an integer (id-node) given a topology, a POINT and a tolerance. If tolerance = 0 mean exactly intersection otherwise retrieve the node from an interval.</p><p>If there isn't a node at the point, it return 0 (zero).</p><p>If use tolerance &gt; 0 and near the point there are more than one node it throw an exception.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If tolerance = 0, the function use ST_Intersects otherwise will use ST_DWithin.</p></td></tr></table></div><p>Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. </p></div><div class="refsection" title="Examples"><a name="idp98573648"></a><h2>Examples</h2><p>These examples use edges we created in <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a></p><pre class="programlisting">SELECT topology.GetNodeByPoint('ma_topo',geom, 1) As nearnode
 FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;
  nearnode
----------
        2
 </pre><pre class="programlisting">SELECT topology.GetNodeByPoint('ma_topo',geom, 1000) As too_much_tolerance
 FROM ST_GeomFromEWKT('SRID=26986;POINT(227591.9 893900.4)') As geom;

 ----get error--
 ERROR:  Two or more nodes found
 </pre></div><div class="refsection" title="See Also"><a name="idp98576464"></a><h2>See Also</h2><p>
<a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>,
<a class="xref" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a>,
<a class="xref" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a>
</p></div></div><div class="refentry" title="GetTopologyID"><div class="refentry.separator"><hr></div><a name="GetTopologyID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetTopologyID — Returns the id of a topology in the topology.topology table given the name of the topology.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">GetTopologyID</b>(</code>varchar <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98583504"></a><h2>Description</h2><p>Returns the id of a topology in the topology.topology table given the name of the topology.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98585296"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.GetTopologyID('ma_topo') As topo_id;
 topo_id
---------
       1</pre></div><div class="refsection" title="See Also"><a name="idp98586832"></a><h2>See Also</h2><p>
	<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>,
	<a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>,
	<a class="xref" href="#GetTopologyName" title="GetTopologyName">GetTopologyName</a>,
	<a class="xref" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a>
				</p></div></div><div class="refentry" title="GetTopologySRID"><div class="refentry.separator"><hr></div><a name="GetTopologySRID"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetTopologySRID — Returns the SRID of a topology in the topology.topology table given the name of the topology.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">GetTopologyID</b>(</code>varchar <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98594256"></a><h2>Description</h2><p>Returns the spatial reference id of a topology in the topology.topology table given the name of the topology.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98596048"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.GetTopologySRID('ma_topo') As SRID;
 SRID
-------
  4326</pre></div><div class="refsection" title="See Also"><a name="idp98597584"></a><h2>See Also</h2><p>
	<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>,
	<a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>,
	<a class="xref" href="#GetTopologyName" title="GetTopologyName">GetTopologyName</a>,
	<a class="xref" href="#GetTopologyID" title="GetTopologyID">GetTopologyID</a>
				</p></div></div><div class="refentry" title="GetTopologyName"><div class="refentry.separator"><hr></div><a name="GetTopologyName"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetTopologyName — Returns the name of a topology (schema) given the id of the topology.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">varchar <b class="fsfunc">GetTopologyName</b>(</code>integer <var class="pdparam">topology_id</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98605008"></a><h2>Description</h2><p>Returns the topology name (schema) of a topology from the topology.topology table given the topology id of the topology.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98606928"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.GetTopologyName(1) As topo_name;
 topo_name
-----------
 ma_topo</pre></div><div class="refsection" title="See Also"><a name="idp98612688"></a><h2>See Also</h2><p>
	<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>,
	<a class="xref" href="#DropTopology" title="DropTopology">DropTopology</a>,
	<a class="xref" href="#GetTopologyID" title="GetTopologyID">GetTopologyID</a>,
	<a class="xref" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a>
				</p></div></div><div class="refentry" title="ST_GetFaceEdges"><div class="refentry.separator"><hr></div><a name="ST_GetFaceEdges"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GetFaceEdges — Returns a set of ordered edges that bound <code class="varname">aface</code>.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <b class="fsfunc">ST_GetFaceEdges</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98621520"></a><h2>Description</h2><p>Returns a set of ordered edges that bound <code class="varname">aface</code>. Each output consists of a sequence and edgeid. Sequence numbers start with value 1.</p><p>
Enumeration of each ring edges start from the edge with smallest identifier.
Order of edges follows a left-hand-rule (bound face is on the left of each directed edge).
		</p><p>Availability: 2.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.5</p></div><div class="refsection" title="Examples"><a name="idp98625488"></a><h2>Examples</h2><pre class="programlisting">
-- Returns the edges bounding face 1
SELECT (topology.ST_GetFaceEdges('tt', 1)).*;
-- result --
 sequence | edge
----------+------
        1 |   -4
        2 |    5
        3 |    7
        4 |   -6
        5 |    1
        6 |    2
        7 |    3
(7 rows)
</pre><pre class="programlisting">
-- Returns the sequence, edge id
-- and geometry of the edges that bound face 1
-- If you just need geom and seq, can use ST_GetFaceGeometry
SELECT t.seq, t.edge, geom
FROM topology.ST_GetFaceEdges('tt',1) As t(seq,edge)
	INNER JOIN tt.edge AS e ON abs(t.edge) = e.edge_id;
</pre></div><div class="refsection" title="See Also"><a name="idp98627536"></a><h2>See Also</h2><p>
<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>,
<a class="xref" href="#AddFace" title="AddFace">AddFace</a>,
<a class="xref" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a>
				</p></div></div><div class="refentry" title="ST_GetFaceGeometry"><div class="refentry.separator"><hr></div><a name="ST_GetFaceGeometry"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_GetFaceGeometry — Returns the polygon in the given topology with the specified face id.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_GetFaceGeometry</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aface</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98635600"></a><h2>Description</h2><p>Returns the polygon in the given topology with the specified face id. Builds the polygon from the edges making up the face.</p><p>Availability: 1.? </p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.16</p></div><div class="refsection" title="Examples"><a name="idp98639056"></a><h2>Examples</h2><pre class="programlisting">
-- Returns the wkt of the polygon added with AddFace
SELECT ST_AsText(topology.ST_GetFaceGeometry('ma_topo', 1)) As facegeomwkt;
-- result --
               facegeomwkt

--------------------------------------------------------------------------------
 POLYGON((234776.9 899563.7,234896.5 899456.7,234914 899436.4,234946.6 899356.9,
234872.5 899328.7,234891 899285.4,234992.5 899145,234890.6 899069,
234755.2 899255.4,234612.7 899379.4,234776.9 899563.7))
</pre></div><div class="refsection" title="See Also"><a name="idp98640592"></a><h2>See Also</h2><p><a class="xref" href="#AddFace" title="AddFace">AddFace</a></p></div></div><div class="refentry" title="GetRingEdges"><div class="refentry.separator"><hr></div><a name="GetRingEdges"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetRingEdges — 
Returns the ordered set of signed edge identifiers met by walking on an
a given edge side.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <b class="fsfunc">GetRingEdges</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">aring</var>, integer  <var class="pdparam">max_edges=null</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98648784"></a><h2>Description</h2><p>
Returns the ordered set of signed edge identifiers met by walking on an
a given edge side.
Each output consists of a sequence and a signed edge id.
Sequence numbers start with value 1.
                </p><p>
If you pass a positive edge id, the walk starts on the left side
of the corresponding edge and follows the edge direction.
If you pass a negative edge id, the walk starts on the right side
of it and goes backward.
                </p><p>
If <code class="varname">max_edges</code> is not null no more than those records
are returned by that function. This is meant to be a safety parameter
when dealing with possibly invalid topologies.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This function uses edge ring linking metadata.
    </p></td></tr></table></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="See Also"><a name="idp98652496"></a><h2>See Also</h2><p>
<a class="xref" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a>,
<a class="xref" href="#GetNodeEdges" title="GetNodeEdges">GetNodeEdges</a>
				</p></div></div><div class="refentry" title="GetNodeEdges"><div class="refentry.separator"><hr></div><a name="GetNodeEdges"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetNodeEdges — 
Returns an ordered set of edges incident to the given node.
				</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">getfaceedges_returntype <b class="fsfunc">GetNodeEdges</b>(</code>varchar  <var class="pdparam">atopology</var>, integer  <var class="pdparam">anode</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98668368"></a><h2>Description</h2><p>
Returns an ordered set of edges incident to the given node.
Each output consists of a sequence and a signed edge id.
Sequence numbers start with value 1.
A positive edge starts at the given node.
A negative edge ends into the given node.
Closed edges will appear twice (with both signs).
Order is clockwise starting from northbound.
		</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This function computes ordering rather than deriving from metadata
and is thus usable to build edge ring linking.
		</p></td></tr></table></div><p>Availability: 2.0 </p></div><div class="refsection" title="See Also"><a name="idp98671440"></a><h2>See Also</h2><p>
<a class="xref" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a>,
<a class="xref" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a>
				</p></div></div></div><div class="sect1" title="11.7. Topology Processing"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Processing"></a>11.7. Topology Processing</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section covers the functions for processing topologies in non-standard ways.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#TopologyPolygonize">Polygonize</a></span><span class="refpurpose"> — Find and register all faces defined by topology edges</span></dt><dt><span class="refentrytitle"><a href="#AddNode">AddNode</a></span><span class="refpurpose"> — Adds a point node to the node table in the specified topology schema and returns the nodeid of new node. If point already exists as node, the existing nodeid is returned.</span></dt><dt><span class="refentrytitle"><a href="#AddEdge">AddEdge</a></span><span class="refpurpose"> — Adds a linestring edge to the edge table and associated start and end points to the point nodes table of the specified topology schema using the specified linestring geometry and returns the edgeid of the new (or existing) edge.</span></dt><dt><span class="refentrytitle"><a href="#AddFace">AddFace</a></span><span class="refpurpose"> — 
Registers a face primitive to a topology and gets its identifier.
        </span></dt><dt><span class="refentrytitle"><a href="#TP_ST_Simplify">ST_Simplify</a></span><span class="refpurpose"> — Returns a "simplified" geometry version of the given TopoGeometry using
				the Douglas-Peucker algorithm.</span></dt></dl></div><div class="refentry" title="Polygonize"><a name="TopologyPolygonize"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Polygonize — Find and register all faces defined by topology edges</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Polygonize</b>(</code>varchar  <var class="pdparam">toponame</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98680144"></a><h2>Description</h2><p>Register all faces that can be built out a topology edge primitives.</p><p>The target topology is assumed to contain no self-intersecting edges.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Already known faces are recognized, so it is safe to call Polygonize multiple times on the same topology.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This function does not use nor set the next_left_edge and next_right_edge fields of the edge table.
                </p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="See Also"><a name="idp98683728"></a><h2>See Also</h2><p><a class="xref" href="#AddFace" title="AddFace">AddFace</a>, <a class="xref" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a></p></div></div><div class="refentry" title="AddNode"><div class="refentry.separator"><hr></div><a name="AddNode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddNode — Adds a point node to the node table in the specified topology schema and returns the nodeid of new node. If point already exists as node, the existing nodeid is returned.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">AddNode</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">apoint</var>, boolean  <var class="pdparam">allowEdgeSplitting=false</var>, boolean  <var class="pdparam">computeContainingFace=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98693456"></a><h2>Description</h2><p>
Adds a point node to the node table in the specified topology schema.
The <a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a> function automatically adds start and end
points of an edge when called so not necessary to explicitly add nodes
of an edge.
                </p><p>
If any edge crossing the node is found either an exception is raised or
the edge is split, depending on the <code class="varname">allowEdgeSplitting</code>
parameter value.
	</p><p>
If <code class="varname">computeContainingFace</code> is true a newly added node would
get the correct containing face computed.
	</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If the <code class="varname">apoint</code> geometry already exists as a node, the node is not added but the existing nodeid is returned.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98698192"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.AddNode('ma_topo', ST_GeomFromText('POINT(227641.6 893816.5)', 26986) ) As nodeid;
-- result --
nodeid
--------
 4

</pre></div><div class="refsection" title="See Also"><a name="idp98699728"></a><h2>See Also</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a></p></div></div><div class="refentry" title="AddEdge"><div class="refentry.separator"><hr></div><a name="AddEdge"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddEdge — Adds a linestring edge to the edge table and associated start and end points to the point nodes table of the specified topology schema using the specified linestring geometry and returns the edgeid of the new (or existing) edge.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">AddEdge</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">aline</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98711248"></a><h2>Description</h2><p>Adds an edge to the edge table and associated nodes to the nodes table of the specified <code class="varname">toponame</code> schema using the specified linestring geometry and returns the edgeid of the new or existing record.
                The newly added edge has "universe" face on both sides and links to itself.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If the <code class="varname">aline</code> geometry crosses, overlaps, contains or is contained by an existing linestring edge, then an error is thrown and the edge is not added.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The geometry of <code class="varname">aline</code> must have the same <code class="varname">srid</code> as defined for the topology otherwise an invalid spatial reference sys error will be thrown.</p></td></tr></table></div><p>Availability: 2.0.0 requires GEOS &gt;= 3.3.0.</p></div><div class="refsection" title="Examples"><a name="idp98715728"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227575.8 893917.2,227591.9 893900.4)', 26986) ) As edgeid;
-- result-
edgeid
--------
 1

SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.9 893900.4,227622.6 893844.2,227641.6 893816.5,
 227704.5 893778.5)', 26986) ) As edgeid;
-- result --
edgeid
--------
 2

 SELECT topology.AddEdge('ma_topo', ST_GeomFromText('LINESTRING(227591.2 893900, 227591.9 893900.4,
  227704.5 893778.5)', 26986) ) As edgeid;
 -- gives error --
 ERROR:  Edge intersects (not on endpoints) with existing edge 1
</pre></div><div class="refsection" title="See Also"><a name="idp98717264"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a></p></div></div><div class="refentry" title="AddFace"><div class="refentry.separator"><hr></div><a name="AddFace"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AddFace — 
Registers a face primitive to a topology and gets its identifier.
        </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">integer <b class="fsfunc">AddFace</b>(</code>varchar  <var class="pdparam">toponame</var>, geometry  <var class="pdparam">apolygon</var>, boolean  <var class="pdparam">force_new=false</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98725840"></a><h2>Description</h2><p>
Registers a face primitive to a topology and gets its identifier.
                </p><p>
For a newly added face, the edges forming its boundaries and the ones
contained in the face will be updated to have correct values in the
left_face and right_face fields.
Isolated nodes contained in the face will also be updated to have a correct
containing_face field value.
                </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
This function does not use nor set the next_left_edge and next_right_edge fields of the edge table.
                </p></td></tr></table></div><p>The target topology is assumed to be valid (containing no self-intersecting edges). An exception is raised if: The polygon boundary is not fully defined by existing edges or the polygon overlaps an existing face.</p><p>
If the <code class="varname">apolygon</code> geometry already exists as a face, then:
if <code class="varname">force_new</code> is false (the default) the
face id of the existing face is returned;
if <code class="varname">force_new</code> is true a new id will be assigned to
the newly registered face.
                </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
When a new registration of an existing face is performed (force_new=true),
no action will be taken to resolve dangling references to the existing
face in the edge, node an relation tables, nor will the MBR field of the
existing face record be updated. It is up to the caller to deal with that.
                </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="varname">apolygon</code> geometry must have the same <code class="varname">srid</code> as defined for the topology otherwise an invalid spatial reference sys error will be thrown.</p></td></tr></table></div><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98732496"></a><h2>Examples</h2><pre class="programlisting">
-- first add the edges we use generate_series as an iterator (the below
-- will only work for polygons with &lt; 10000 points because of our max in gs)
SELECT topology.AddEdge('ma_topo', ST_MakeLine(ST_PointN(geom,i), ST_PointN(geom, i + 1) )) As edgeid
    FROM (SELECT  ST_NPoints(geom) AS npt, geom
            FROM
                (SELECT ST_Boundary(ST_GeomFromText('POLYGON((234896.5 899456.7,234914 899436.4,234946.6 899356.9,234872.5 899328.7,
                234891 899285.4,234992.5 899145, 234890.6 899069,234755.2 899255.4,
                234612.7 899379.4,234776.9 899563.7,234896.5 899456.7))', 26986) )  As geom
            )  As geoms) As facen CROSS JOIN generate_series(1,10000) As i
         WHERE i &lt; npt;
-- result --
 edgeid
--------
      3
      4
      5
      6
      7
      8
      9
     10
     11
     12
(10 rows)
-- then add the face -

SELECT topology.AddFace('ma_topo',
    ST_GeomFromText('POLYGON((234896.5 899456.7,234914 899436.4,234946.6 899356.9,234872.5 899328.7,
    234891 899285.4,234992.5 899145, 234890.6 899069,234755.2 899255.4,
    234612.7 899379.4,234776.9 899563.7,234896.5 899456.7))', 26986) ) As faceid;
-- result --
faceid
--------
 1

</pre></div><div class="refsection" title="See Also"><a name="idp98734032"></a><h2>See Also</h2><p><a class="xref" href="#AddEdge" title="AddEdge">AddEdge</a>, <a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#spatial_ref_sys" title="4.3.1. The SPATIAL_REF_SYS Table and Spatial Reference Systems">Section 4.3.1, “The SPATIAL_REF_SYS Table and Spatial Reference Systems”</a></p></div></div><div class="refentry" title="ST_Simplify"><div class="refentry.separator"><hr></div><a name="TP_ST_Simplify"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>ST_Simplify — Returns a "simplified" geometry version of the given TopoGeometry using
				the Douglas-Peucker algorithm.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">geometry <b class="fsfunc">ST_Simplify</b>(</code>TopoGeometry <var class="pdparam">geomA</var>, float <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98741840"></a><h2>Description</h2><p>Returns a "simplified" geometry version of the given TopoGeometry using
				the Douglas-Peucker algorithm on each component edge.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The returned geometry may be non-simple or non-valid.</p><p>Splitting component edges may help retaining simplicity/validity.</p></td></tr></table></div><p>Performed by the GEOS module.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="See Also"><a name="idp98744656"></a><h2>See Also</h2><p>Geometry <a class="xref" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>, <a class="xref" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>, <a class="xref" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>, <a class="xref" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a></p></div></div></div><div class="sect1" title="11.8. TopoGeometry Constructors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TopoGeometry_Constructors"></a>11.8. TopoGeometry Constructors</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section covers the topology functions for creating new topogeometries.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#CreateTopoGeom">CreateTopoGeom</a></span><span class="refpurpose"> — Creates a new topo geometry object from topo element array - tg_type: 1:[multi]point, 2:[multi]line, 3:[multi]poly, 4:collection</span></dt><dt><span class="refentrytitle"><a href="#toTopoGeom">toTopoGeom</a></span><span class="refpurpose"> — 
Converts a simple Geometry into a topo geometry
        </span></dt><dt><span class="refentrytitle"><a href="#TopoElementArray_Agg">TopoElementArray_Agg</a></span><span class="refpurpose"> — Returns a <code class="varname">topoelementarray</code> for a set of element_id, type arrays (topoelements)</span></dt></dl></div><div class="refentry" title="CreateTopoGeom"><a name="CreateTopoGeom"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>CreateTopoGeom — Creates a new topo geometry object from topo element array - tg_type: 1:[multi]point, 2:[multi]line, 3:[multi]poly, 4:collection</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <b class="fsfunc">CreateTopoGeom</b>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">tg_type</var>, integer <var class="pdparam">layer_id</var>, topoelementarray <var class="pdparam">tg_objs</var><code>)</code>;</p><p><code class="funcdef">topogeometry <b class="fsfunc">CreateTopoGeom</b>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">tg_type</var>, integer <var class="pdparam">layer_id</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98761424"></a><h2>Description</h2><p>Creates a topogeometry object for layer denoted by layer_id and registers it in the relations table in the <code class="varname">toponame</code> schema.</p><p>tg_type is an integer: 1:[multi]point (punctal), 2:[multi]line (lineal), 3:[multi]poly (areal), 4:collection. layer_id is the layer id in the topology.layer table.</p><p>punctal layers are formed from set of nodes, lineal layers are formed from a set of edges, areal layers are formed from a set of faces,
	and collections can be formed from a mixture of nodes, edges, and faces.</p><p>Omitting the array of components generates an empty TopoGeometry object.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples: Form from existing edges"><a name="idp98764880"></a><h2>Examples: Form from existing edges</h2><p>Create a topogeom in ri_topo schema for layer 2 (our ri_roads), of type (2) LINE, for the first edge (we loaded in <code class="varname">ST_CreateTopoGeo</code>.</p><pre class="programlisting">INSERT INTO ri.ri_roads(road_name, topo) VALUES('Unknown', topology.CreateTopoGeom('ri_topo',2,2,'{{1,2}}'::topology.topoelementarray);</pre></div><div class="refsection" title="Examples: Convert an areal geometry to best guess topogeometry"><a name="idp98767056"></a><h2>Examples: Convert an areal geometry to best guess topogeometry</h2><p>Lets say we have geometries that should be formed from a collection of faces. We have for example blockgroups table
					and want to know the topo geometry of each block group. If our data was perfectly aligned, we could do this:</p><pre class="programlisting">
-- create our topo geometry column --
SELECT topology.AddTopoGeometryColumn(
	'topo_boston',
	'boston', 'blockgroups', 'topo', 'POLYGON');

-- addtopgeometrycolumn --
1

-- update our column assuming
-- everything is perfectly aligned with our edges
UPDATE boston.blockgroups AS bg
	SET topo = topology.CreateTopoGeom('topo_boston'
        ,3,1
        , foo.bfaces)
FROM (SELECT b.gid,  topology.TopoElementArray_Agg(ARRAY[f.face_id,3]) As bfaces
	FROM boston.blockgroups As b
            INNER JOIN topo_boston.face As f ON b.geom &amp;&amp; f.mbr
        WHERE ST_Covers(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
            GROUP BY b.gid) As foo
WHERE foo.gid = bg.gid;
</pre><pre class="programlisting">
--the world is rarely perfect allow for some error
--count the face if 50% of it falls
-- within what we think is our blockgroup boundary
UPDATE boston.blockgroups AS bg
	SET topo = topology.CreateTopoGeom('topo_boston'
        ,3,1
        , foo.bfaces)
FROM (SELECT b.gid,  topology.TopoElementArray_Agg(ARRAY[f.face_id,3]) As bfaces
	FROM boston.blockgroups As b
            INNER JOIN topo_boston.face As f ON b.geom &amp;&amp; f.mbr
        WHERE ST_Covers(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
	OR
 (  ST_Intersects(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id))
            AND ST_Area(ST_Intersection(b.geom, topology.ST_GetFaceGeometry('topo_boston', f.face_id) ) ) &gt;
                ST_Area(topology.ST_GetFaceGeometry('topo_boston', f.face_id))*0.5
                )
            GROUP BY b.gid) As foo
WHERE foo.gid = bg.gid;

-- and if we wanted to convert our topogeometry back
-- to a denomalized geometry aligned with our faces and edges
-- cast the topo to a geometry
-- The really cool thing is my new geometries
-- are now aligned with my tiger street centerlines
UPDATE boston.blockgroups SET new_geom = topo::geometry;
</pre></div><div class="refsection" title="See Also"><a name="idp98769488"></a><h2>See Also</h2><p>
<a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>,
<a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>
<a class="xref" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a>,
<a class="xref" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a>,
<a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a>,
<a class="xref" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a>
				</p></div></div><div class="refentry" title="toTopoGeom"><div class="refentry.separator"><hr></div><a name="toTopoGeom"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>toTopoGeom — 
Converts a simple Geometry into a topo geometry
        </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <b class="fsfunc">toTopoGeom</b>(</code>geometry  <var class="pdparam">geom</var>, varchar  <var class="pdparam">toponame</var>, integer <var class="pdparam">layer_id</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p><p><code class="funcdef">topogeometry <b class="fsfunc">toTopoGeom</b>(</code>geometry  <var class="pdparam">geom</var>, topogeometry  <var class="pdparam">topogeom</var>, float8 <var class="pdparam">tolerance</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98805840"></a><h2>Description</h2><p>
Converts a simple Geometry into a <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>.
                </p><p>
Topological primitives required to represent the input geometry will be
added to the underlying topology, possibly splitting existing ones,
and they will be associated with the output TopoGeometry in the
<code class="varname">relation</code> table.
                </p><p>
Existing TopoGeometry objects (with the possible exception of
<code class="varname">topogeom</code>, if given) will retain their shapes.
                </p><p>
When <code class="varname">tolerance</code> is given it will be used to snap the
input geometry to existing primitives.
                </p><p>
In the first form a new TopoGeometry will be created for the given
layer (<code class="varname">layer_id</code>) of the given topology (<code class="varname">toponame</code>).
                </p><p>
In the second form the primitives resulting from the conversion will be
added to the pre-existing TopoGeometry (<code class="varname">topogeom</code>),
possibly adding space to its final shape. To have the new shape completely
replace the old one see <a class="xref" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a>.
                </p><p>Availability: 2.0</p><p>Enhanced: 2.1.0 adds the version taking an existing TopoGeometry.</p></div><div class="refsection" title="Examples"><a name="idp98813264"></a><h2>Examples</h2><p>This is a full self-contained workflow</p><pre class="programlisting"> -- do this if you don't have a topology setup already
-- creates topology not allowing any tolerance
SELECT topology.CreateTopology('topo_boston_test', 2249);
-- create a new table
CREATE TABLE nei_topo(gid serial primary key, nei varchar(30));
--add a topogeometry column to it
SELECT topology.AddTopoGeometryColumn('topo_boston_test', 'public', 'nei_topo', 'topo', 'MULTIPOLYGON') As new_layer_id;
new_layer_id
-----------
1

--use new layer id in populating the new topogeometry column
-- we add the topogeoms to the new layer with 0 tolerance
INSERT INTO nei_topo(nei, topo)
SELECT nei,  topology.toTopoGeom(geom, 'topo_boston_test', 1)
FROM neighborhoods
WHERE gid BETWEEN 1 and 15;

--use to verify what has happened --
SELECT * FROM
    topology.TopologySummary('topo_boston_test');

-- summary--
Topology topo_boston_test (5), SRID 2249, precision 0
61 nodes, 87 edges, 35 faces, 15 topogeoms in 1 layers
Layer 1, type Polygonal (3), 15 topogeoms
 Deploy: public.nei_topo.topo</pre><pre class="programlisting">
-- Shrink all TopoGeometry polygons by 10 meters
UPDATE nei_topo SET topo = ST_Buffer(clearTopoGeom(topo), -10);

-- Get the no-one-lands left by the above operation
-- I think GRASS calls this "polygon0 layer"
SELECT ST_GetFaceGeometry('topo_boston_test', f.face_id)
  FROM topo_boston_test.face f
  WHERE f.face_id &gt; 0 -- don't consider the universe face
  AND NOT EXISTS ( -- check that no TopoGeometry references the face
    SELECT * FROM topo_boston_test.relation
    WHERE layer_id = 1 AND element_id = f.face_id
  );
        </pre></div><div class="refsection" title="See Also"><a name="idp98815696"></a><h2>See Also</h2><p>
<a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>,
<a class="xref" href="#AddTopoGeometryColumn" title="AddTopoGeometryColumn">AddTopoGeometryColumn</a>,
<a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>,
<a class="xref" href="#TopologySummary" title="TopologySummary">TopologySummary</a>,
<a class="xref" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a>
        </p></div></div><div class="refentry" title="TopoElementArray_Agg"><div class="refentry.separator"><hr></div><a name="TopoElementArray_Agg"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoElementArray_Agg — Returns a <code class="varname">topoelementarray</code> for a set of element_id, type arrays (topoelements)</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topoelementarray <b class="fsfunc">TopoElementArray_Agg</b>(</code>topoelement set <var class="pdparam">tefield</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98823888"></a><h2>Description</h2><p>Used to create a <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a> from a set of <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98826576"></a><h2>Examples</h2><pre class="programlisting">SELECT topology.TopoElementArray_Agg(ARRAY[e,t]) As tea
  FROM generate_series(1,3) As e CROSS JOIN generate_series(1,4) As t;
  tea
--------------------------------------------------------------------------
{{1,1},{1,2},{1,3},{1,4},{2,1},{2,2},{2,3},{2,4},{3,1},{3,2},{3,3},{3,4}}</pre></div><div class="refsection" title="See Also"><a name="idp98827856"></a><h2>See Also</h2><p><a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a></p></div></div></div><div class="sect1" title="11.9. TopoGeometry Editors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TopoGeometry_Editors"></a>11.9. TopoGeometry Editors</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section covers the topology functions for editing existing topogeometries.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#clearTopoGeom">clearTopoGeom</a></span><span class="refpurpose"> — Clears the content of a topo geometry</span></dt><dt><span class="refentrytitle"><a href="#TopoGeom_addElement">TopoGeom_addElement</a></span><span class="refpurpose"> — Add an element to the definition of a TopoGeometry</span></dt><dt><span class="refentrytitle"><a href="#TopoGeom_remElement">TopoGeom_remElement</a></span><span class="refpurpose"> — Remove an element from the definition of a TopoGeometry</span></dt><dt><span class="refentrytitle"><a href="#toTopoGeom_editor_proxy">toTopoGeom</a></span><span class="refpurpose"> — Adds a geometry shape to an existing topo geometry</span></dt></dl></div><div class="refentry" title="clearTopoGeom"><a name="clearTopoGeom"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>clearTopoGeom — Clears the content of a topo geometry</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <b class="fsfunc">clearTopoGeom</b>(</code>topogeometry  <var class="pdparam">topogeom</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98836304"></a><h2>Description</h2><p>
Clears the content a <a class="xref" href="#topogeometry" title="TopoGeometry">TopoGeometry</a>
turning it into an empty one. Mostly useful in conjunction with <a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> to replace the shape of existing
objects and any dependent object in higher hierarchical levels.
                </p><p>Availability: 2.1</p></div><div class="refsection" title="Examples"><a name="idp98838992"></a><h2>Examples</h2><pre class="programlisting">
-- Shrink all TopoGeometry polygons by 10 meters
UPDATE nei_topo SET topo = ST_Buffer(clearTopoGeom(topo), -10);
				</pre></div><div class="refsection" title="See Also"><a name="idp98840656"></a><h2>See Also</h2><p>
<a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>
        </p></div></div><div class="refentry" title="TopoGeom_addElement"><div class="refentry.separator"><hr></div><a name="TopoGeom_addElement"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeom_addElement — Add an element to the definition of a TopoGeometry</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <b class="fsfunc">TopoGeom_addElement</b>(</code>topogeometry  <var class="pdparam">tg</var>, topoelement  <var class="pdparam">el</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98852048"></a><h2>Description</h2><p>
Adds a <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a> to the definition of a
TopoGeometry object. Does not error out if the element is already
part of the definition.
                </p><p>Availability: 2.3</p></div><div class="refsection" title="Examples"><a name="idp98854352"></a><h2>Examples</h2><pre class="programlisting">
-- Add edge 5 to TopoGeometry tg
UPDATE mylayer SET tg = TopoGeom_addElement(tg, '{5,2}');
				</pre></div><div class="refsection" title="See Also"><a name="idp98855888"></a><h2>See Also</h2><p>
<a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a>,
<a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>
        </p></div></div><div class="refentry" title="TopoGeom_remElement"><div class="refentry.separator"><hr></div><a name="TopoGeom_remElement"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>TopoGeom_remElement — Remove an element from the definition of a TopoGeometry</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topogeometry <b class="fsfunc">TopoGeom_remElement</b>(</code>topogeometry  <var class="pdparam">tg</var>, topoelement  <var class="pdparam">el</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98863568"></a><h2>Description</h2><p>
Removes a <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a> from the definition of a
TopoGeometry object.
                </p><p>Availability: 2.3</p></div><div class="refsection" title="Examples"><a name="idp98865744"></a><h2>Examples</h2><pre class="programlisting">
-- Remove face 43 from TopoGeometry tg
UPDATE mylayer SET tg = TopoGeom_remElement(tg, '{43,3}');
				</pre></div><div class="refsection" title="See Also"><a name="idp98867280"></a><h2>See Also</h2><p>
<a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>,
<a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>
        </p></div></div><div class="refentry" title="toTopoGeom"><div class="refentry.separator"><hr></div><a name="toTopoGeom_editor_proxy"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>toTopoGeom — Adds a geometry shape to an existing topo geometry</p></div><div class="refsection" title="Description"><a name="idp98879184"></a><h2>Description</h2><p>
Refer to <a class="xref" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a>
</p></div></div></div><div class="sect1" title="11.10. TopoGeometry Accessors"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TopoGeom_Accessors"></a>11.10. TopoGeometry Accessors</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#GetTopoGeomElementArray">GetTopoGeomElementArray</a></span><span class="refpurpose"> — Returns a <code class="varname">topoelementarray</code> (an array of topoelements) containing the topological elements and type of the given TopoGeometry (primitive elements)</span></dt><dt><span class="refentrytitle"><a href="#GetTopoGeomElements">GetTopoGeomElements</a></span><span class="refpurpose"> — Returns a set of <code class="varname">topoelement</code> objects containing the topological  element_id,element_type of the given TopoGeometry (primitive elements)</span></dt></dl></div><div class="refentry" title="GetTopoGeomElementArray"><a name="GetTopoGeomElementArray"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetTopoGeomElementArray — Returns a <code class="varname">topoelementarray</code> (an array of topoelements) containing the topological elements and type of the given TopoGeometry (primitive elements)</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">topoelementarray <b class="fsfunc">GetTopoGeomElementArray</b>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">layer_id</var>, integer <var class="pdparam">tg_id</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">topoelementarray topoelement <b class="fsfunc">GetTopoGeomElementArray</b>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98891472"></a><h2>Description</h2><p>Returns a <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a> containing the topological elements and type of the given TopoGeometry (primitive elements).  This is similar to GetTopoGeomElements except it returns the elements as an array rather
                than as a dataset.</p><p>tg_id is the topogeometry id of the topogeometry object in the topology in the layer denoted by <code class="varname">layer_id</code> in the topology.layer table.</p><p>Availability: 1.?</p></div><div class="refsection" title="Examples"><a name="idp98894544"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98896080"></a><h2>See Also</h2><p><a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>, <a class="xref" href="#topoelementarray" title="TopoElementArray">TopoElementArray</a></p></div></div><div class="refentry" title="GetTopoGeomElements"><div class="refentry.separator"><hr></div><a name="GetTopoGeomElements"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>GetTopoGeomElements — Returns a set of <code class="varname">topoelement</code> objects containing the topological  element_id,element_type of the given TopoGeometry (primitive elements)</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof topoelement <b class="fsfunc">GetTopoGeomElements</b>(</code>varchar  <var class="pdparam">toponame</var>, integer  <var class="pdparam">layer_id</var>, integer <var class="pdparam">tg_id</var><code>)</code>;</p></div><div class="funcsynopsis"><p><code class="funcdef">setof topoelement <b class="fsfunc">GetTopoGeomElements</b>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98907472"></a><h2>Description</h2><p>Returns a set of element_id,element_type (topoelements) for a given topogeometry object in <code class="varname">toponame</code> schema.</p><p>tg_id is the topogeometry id of the topogeometry object in the topology in the layer denoted by <code class="varname">layer_id</code> in the topology.layer table.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp98910416"></a><h2>Examples</h2><p></p></div><div class="refsection" title="See Also"><a name="idp98916176"></a><h2>See Also</h2><p>
          <a class="xref" href="#GetTopoGeomElementArray" title="GetTopoGeomElementArray">GetTopoGeomElementArray</a>,
          <a class="xref" href="#topoelement" title="TopoElement">TopoElement</a>,
          <a class="xref" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a>,
          <a class="xref" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a>
        </p></div></div></div><div class="sect1" title="11.11. TopoGeometry Outputs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="TopoGeometry_Outputs"></a>11.11. TopoGeometry Outputs</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#AsGML">AsGML</a></span><span class="refpurpose"> — Returns the GML representation of a topogeometry.</span></dt><dt><span class="refentrytitle"><a href="#AsTopoJSON">AsTopoJSON</a></span><span class="refpurpose"> — Returns the TopoJSON representation of a topogeometry.</span></dt></dl></div><div class="refentry" title="AsGML"><a name="AsGML"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AsGML — Returns the GML representation of a topogeometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">visitedTable</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">nsprefix</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">idprefix</var><code>)</code>;</p><p><code class="funcdef">text <b class="fsfunc">AsGML</b>(</code>topogeometry  <var class="pdparam">tg</var>, text  <var class="pdparam">nsprefix_in</var>, integer  <var class="pdparam">precision</var>, integer  <var class="pdparam">options</var>, regclass  <var class="pdparam">visitedTable</var>, text  <var class="pdparam">idprefix</var>, int  <var class="pdparam">gmlversion</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp98970960"></a><h2>Description</h2><p>Returns the GML representation of a topogeometry in version GML3 format. If no <code class="varname">nsprefix_in</code> is specified then <code class="varname">gml</code> is used. Pass in an empty string for nsprefix to get a non-qualified name space. The precision (default: 15) and options (default 1) parameters, if given, are passed untouched to the underlying call to ST_AsGML.</p><p>
The <code class="varname">visitedTable</code> parameter, if given, is used for keeping track of the visited Node and Edge elements so to use cross-references (xlink:xref) rather than duplicating definitions. The table is expected to have (at least) two integer fields: 'element_type' and 'element_id'. The calling user must have both read and write privileges on the given table.
For best performance, an index should be defined on
<code class="varname">element_type</code> and <code class="varname">element_id</code>,
in that order. Such index would be created automatically by adding a unique
constraint to the fields. Example:
</p><pre class="programlisting">
CREATE TABLE visited (
  element_type integer, element_id integer,
  unique(element_type, element_id)
);
</pre><p>
		</p><p>The <code class="varname">idprefix</code> parameter, if given, will be prepended to Edge and Node tag identifiers.</p><p>The <code class="varname">gmlver</code> parameter, if given, will be passed to the underlying ST_AsGML. Defaults to 3.</p><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp98977360"></a><h2>Examples</h2><p>This uses the topo geometry we created in <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a></p><pre class="programlisting">SELECT topology.AsGML(topo) As rdgml
  FROM ri.roads
  WHERE road_name = 'Unknown';

-- rdgml--
&lt;gml:TopoCurve&gt;
    &lt;gml:directedEdge&gt;
        &lt;gml:Edge gml:id="E1"&gt;
            &lt;gml:directedNode orientation="-"&gt;
                &lt;gml:Node gml:id="N1"/&gt;
            &lt;/gml:directedNode&gt;
            &lt;gml:directedNode&gt;&lt;/gml:directedNode&gt;
            &lt;gml:curveProperty&gt;
                &lt;gml:Curve srsName="urn:ogc:def:crs:EPSG::3438"&gt;
                    &lt;gml:segments&gt;
                        &lt;gml:LineStringSegment&gt;
                            &lt;gml:posList srsDimension="2"&gt;384744 236928 384750 236923 384769 236911 384799 236895 384811 236890
                            384833 236884 384844 236882 384866 236881 384879 236883 384954 236898 385087 236932 385117 236938
                            385167 236938 385203 236941 385224 236946 385233 236950 385241 236956 385254 236971
                            385260 236979 385268 236999 385273 237018 385273 237037 385271 237047 385267 237057 385225 237125
                            385210 237144 385192 237161 385167 237192 385162 237202 385159 237214 385159 237227 385162 237241
                            385166 237256 385196 237324 385209 237345 385234 237375 385237 237383 385238 237399 385236 237407
                            385227 237419 385213 237430 385193 237439 385174 237451 385170 237455 385169 237460 385171 237475
                            385181 237503 385190 237521 385200 237533 385206 237538 385213 237541 385221 237542 385235 237540 385242 237541
                            385249 237544 385260 237555 385270 237570 385289 237584 385292 237589 385291 237596 385284 237630&lt;/gml:posList&gt;
                        &lt;/gml:LineStringSegment&gt;
                    &lt;/gml:segments&gt;
                &lt;/gml:Curve&gt;
            &lt;/gml:curveProperty&gt;
        &lt;/gml:Edge&gt;
    &lt;/gml:directedEdge&gt;
&lt;/gml:TopoCurve&gt;
</pre><p>Same exercise as previous without namespace</p><pre class="programlisting">SELECT topology.AsGML(topo,'') As rdgml
  FROM ri.roads
  WHERE road_name = 'Unknown';

-- rdgml--
&lt;TopoCurve&gt;
    &lt;directedEdge&gt;
        &lt;Edge id="E1"&gt;
            &lt;directedNode orientation="-"&gt;
                &lt;Node id="N1"/&gt;
            &lt;/directedNode&gt;
            &lt;directedNode&gt;&lt;/directedNode&gt;
            &lt;curveProperty&gt;
                &lt;Curve srsName="urn:ogc:def:crs:EPSG::3438"&gt;
                    &lt;segments&gt;
                        &lt;LineStringSegment&gt;
                            &lt;posList srsDimension="2"&gt;384744 236928 384750 236923 384769 236911 384799 236895 384811 236890
                            384833 236884 384844 236882 384866 236881 384879 236883 384954 236898 385087 236932 385117 236938
                            385167 236938 385203 236941 385224 236946 385233 236950 385241 236956 385254 236971
                            385260 236979 385268 236999 385273 237018 385273 237037 385271 237047 385267 237057 385225 237125
                            385210 237144 385192 237161 385167 237192 385162 237202 385159 237214 385159 237227 385162 237241
                            385166 237256 385196 237324 385209 237345 385234 237375 385237 237383 385238 237399 385236 237407
                            385227 237419 385213 237430 385193 237439 385174 237451 385170 237455 385169 237460 385171 237475
                            385181 237503 385190 237521 385200 237533 385206 237538 385213 237541 385221 237542 385235 237540 385242 237541
                            385249 237544 385260 237555 385270 237570 385289 237584 385292 237589 385291 237596 385284 237630&lt;/posList&gt;
                         &lt;/LineStringSegment&gt;
                    &lt;/segments&gt;
                &lt;/Curve&gt;
            &lt;/curveProperty&gt;
        &lt;/Edge&gt;
    &lt;/directedEdge&gt;
&lt;/TopoCurve&gt;
</pre></div><div class="refsection" title="See Also"><a name="idp97931984"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>, <a class="xref" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a></p></div></div><div class="refentry" title="AsTopoJSON"><div class="refentry.separator"><hr></div><a name="AsTopoJSON"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>AsTopoJSON — Returns the TopoJSON representation of a topogeometry.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">AsTopoJSON</b>(</code>topogeometry  <var class="pdparam">tg</var>, regclass  <var class="pdparam">edgeMapTable</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp97939280"></a><h2>Description</h2><p>Returns the TopoJSON representation of a topogeometry. If <code class="varname">edgeMapTable</code> is not null, it will be used as a lookup/storage mapping of edge identifiers to arc indices. This is to be able to allow for a compact "arcs" array in the final document.
</p><p>
The table, if given, is expected to have an "arc_id" field of type "serial" and an "edge_id" of type integer; the code will query the table for "edge_id" so it is recommended to add an index on that field.
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
Arc indices in the TopoJSON output are 0-based but they are 1-based
in the "edgeMapTable" table.
</p></td></tr></table></div><p>
A full TopoJSON document will be need to contain, in
addition to the snippets returned by this function,
the actual arcs plus some headers. See the <a class="ulink" href="http://github.com/mbostock/topojson-specification/blob/master/README.md" target="_top">TopoJSON specification</a>.
		</p><p>Availability: 2.1.0 </p><p>Enhanced: 2.2.1 added support for puntal inputs</p></div><div class="refsection" title="See Also"><a name="idp99005136"></a><h2>See Also</h2><p><a class="xref" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a></p></div><div class="refsection" title="Examples"><a name="idp99006416"></a><h2>Examples</h2><pre class="programlisting">
CREATE TEMP TABLE edgemap(arc_id serial, edge_id int unique);

-- header
SELECT '{ "type": "Topology", "transform": { "scale": [1,1], "translate": [0,0] }, "objects": {'

-- objects
UNION ALL SELECT '"' || feature_name || '": ' || AsTopoJSON(feature, 'edgemap')
FROM features.big_parcels WHERE feature_name = 'P3P4';

-- arcs
WITH edges AS (
  SELECT m.arc_id, e.geom FROM edgemap m, city_data.edge e
  WHERE e.edge_id = m.edge_id
), points AS (
  SELECT arc_id, (st_dumppoints(geom)).* FROM edges
), compare AS (
  SELECT p2.arc_id,
         CASE WHEN p1.path IS NULL THEN p2.geom
              ELSE ST_Translate(p2.geom, -ST_X(p1.geom), -ST_Y(p1.geom))
         END AS geom
  FROM points p2 LEFT OUTER JOIN points p1
  ON ( p1.arc_id = p2.arc_id AND p2.path[1] = p1.path[1]+1 )
  ORDER BY arc_id, p2.path
), arcsdump AS (
  SELECT arc_id, (regexp_matches( ST_AsGeoJSON(geom), '\[.*\]'))[1] as t
  FROM compare
), arcs AS (
  SELECT arc_id, '[' || array_to_string(array_agg(t), ',') || ']' as a FROM arcsdump
  GROUP BY arc_id
  ORDER BY arc_id
)
SELECT '}, "arcs": [' UNION ALL
SELECT array_to_string(array_agg(a), E',\n') from arcs

-- footer
UNION ALL SELECT ']}'::text as t;

-- Result:
{ "type": "Topology", "transform": { "scale": [1,1], "translate": [0,0] }, "objects": {
"P3P4": { "type": "MultiPolygon", "arcs": [[[-1]],[[6,5,-5,-4,-3,1]]]}
}, "arcs": [
 [[25,30],[6,0],[0,10],[-14,0],[0,-10],[8,0]],
 [[35,6],[0,8]],
 [[35,6],[12,0]],
 [[47,6],[0,8]],
 [[47,14],[0,8]],
 [[35,22],[12,0]],
 [[35,14],[0,8]]
 ]}
</pre></div></div></div><div class="sect1" title="11.12. Topology Spatial Relationships"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Topology_Relationships"></a>11.12. Topology Spatial Relationships</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the Topology functions used to check relationships between topogeometries and topology primitives</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#TG_Equals">Equals</a></span><span class="refpurpose"> — Returns true if two topogeometries are composed of the same topology primitives.</span></dt><dt><span class="refentrytitle"><a href="#TG_Intersects">Intersects</a></span><span class="refpurpose"> — 
Returns true if any pair of primitives from the
two topogeometries intersect.
          </span></dt></dl></div><div class="refentry" title="Equals"><a name="TG_Equals"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Equals — Returns true if two topogeometries are composed of the same topology primitives.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">Equals</b>(</code>topogeometry  <var class="pdparam">tg1</var>, topogeometry  <var class="pdparam">tg2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp99081168"></a><h2>Description</h2><p>Returns true if two topogeometries are composed of the same topology primitives: faces, edges, nodes.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function not supported for topogeometries that are geometry collections.  It also can not compare topogeometries from different topologies.</p></td></tr></table></div><p>Availability: 1.1.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp99085776"></a><h2>Examples</h2><pre class="programlisting"></pre></div><div class="refsection" title="See Also"><a name="idp99087312"></a><h2>See Also</h2><p><a class="xref" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a>, <a class="xref" href="#ST_Equals" title="ST_Equals">ST_Equals</a></p></div></div><div class="refentry" title="Intersects"><div class="refentry.separator"><hr></div><a name="TG_Intersects"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Intersects — 
Returns true if any pair of primitives from the
two topogeometries intersect.
          </p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">Intersects</b>(</code>topogeometry  <var class="pdparam">tg1</var>, topogeometry  <var class="pdparam">tg2</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp99094736"></a><h2>Description</h2><p>
Returns true if any pair of primitives from the
two topogeometries intersect.
          </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function not supported for topogeometries that are geometry collections.  It also can not compare topogeometries from different topologies.
            Also not currently supported for hierarchichal topogeometries (topogeometries composed of other topogeometries).</p></td></tr></table></div><p>Availability: 1.1.0 </p><p><span class="inlinemediaobject"><img src="images/check.png"></span>
 This function supports 3d and will not drop the z-index.</p></div><div class="refsection" title="Examples"><a name="idp99099344"></a><h2>Examples</h2><pre class="programlisting"></pre></div><div class="refsection" title="See Also"><a name="idp99100880"></a><h2>See Also</h2><p><a class="xref" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a></p></div></div></div></div><div class="chapter" title="Chapter 12. Address Standardizer"><div class="titlepage"><div><div><h2 class="title"><a name="Address_Standardizer"></a>Chapter 12. Address Standardizer</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Address_Standardizer_Basics">12.1. How the Parser Works</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Types">12.2. Address Standardizer Types</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Tables">12.3. Address Standardizer Tables</a></span></dt><dt><span class="sect1"><a href="#Address_Standardizer_Functions">12.4. Address Standardizer Functions</a></span></dt></dl></div><p>This is a fork of the <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-11.html" target="_top">PAGC standardizer</a> (original code for this portion was  <a class="ulink" href="http://sourceforge.net/p/pagc/code/360/tree/branches/sew-refactor/postgresql" target="_top">PAGC PostgreSQL Address Standardizer</a>). </p><p>The address standardizer is a single line address parser that takes an input address and normalizes it based on a set of rules stored in a table and helper lex and gaz tables.</p><p>The code is built into a single postgresql extension library called <code class="code">address_standardizer</code> which can be installed with <code class="code">CREATE EXTENSION address_standardizer;</code>. In addition to the address_standardizer extension, a sample data extension called <code class="code">address_standardizer_data_us</code> extensions is built, which contains gaz, lex, and rules tables for US data.  This extensions can be installed via: <code class="code">CREATE EXTENSION address_standardizer_data_us;</code></p><p>The code for this extension can be found in the PostGIS <code class="filename">extensions/address_standardizer</code> and is currently self-contained.</p><p>For installation instructions refer to: <a class="xref" href="#installing_pagc_address_standardizer" title="2.7. Installing and Using the address standardizer">Section 2.7, “Installing and Using the address standardizer”</a>.</p><div class="sect1" title="12.1. How the Parser Works"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Basics"></a>12.1. How the Parser Works</h2></div></div></div><p>The parser works from right to left looking first at the macro elements
			for postcode, state/province, city, and then looks micro elements to determine
if we are dealing with a house number street or intersection or landmark.
It currently does not look for a country code or name, but that could be
introduced in the future.</p><div class="variablelist"><dl><dt><span class="term">Country code</span></dt><dd><p>Assumed to be US or CA based on: postcode as US or Canada state/province as US or Canada else US</p></dd><dt><span class="term">Postcode/zipcode</span></dt><dd><p>These are recognized using Perl compatible regular expressions.
These regexs are currently in the parseaddress-api.c and are relatively
simple to make changes to if needed.</p></dd><dt><span class="term">State/province</span></dt><dd><p>These are recognized using Perl compatible regular expressions.
These regexs are currently in the parseaddress-api.c but could get moved
into includes in the future for easier maintenance.</p></dd></dl></div></div><div class="sect1" title="12.2. Address Standardizer Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Types"></a>12.2. Address Standardizer Types</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL data types installed by Address Standardizer extension.  Note we describe the casting behavior of these which is very
				important especially when designing your own functions.
			</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#stdaddr">stdaddr</a></span><span class="refpurpose"> — A composite type that consists of the elements of an address.  This is the return type for <code class="varname">standardize_address</code> function.</span></dt></dl></div><div class="refentry" title="stdaddr"><a name="stdaddr"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>stdaddr — A composite type that consists of the elements of an address.  This is the return type for <code class="varname">standardize_address</code> function.</p></div><div class="refsection" title="Description"><a name="idp100193360"></a><h2>Description</h2><p>A composite type that consists of elements of an address.   This is the return type for <a class="xref" href="#standardize_address" title="standardize_address">standardize_address</a> function. Some descriptions for elements are borrowed from <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#ss12.1" target="_top">PAGC Postal Attributes</a>.</p><p>The token numbers denote the output reference number in the <a class="xref" href="#rulestab" title="rules table">rules table</a>.</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs address_standardizer extension.</p><div class="variablelist"><dl><dt><span class="term">building</span></dt><dd><p> is text (token number <code class="code">0</code>):  Refers to building number or name. Unparsed building identifiers and types. Generally blank for most addresses.</p></dd><dt><span class="term">house_num</span></dt><dd><p>is a text (token number <code class="code">1</code>): This is the street number on a street. Example <span class="emphasis"><em>75</em></span> in <code class="code">75 State Street</code>.</p></dd><dt><span class="term">predir</span></dt><dd><p> is text (token number <code class="code">2</code>): STREET NAME PRE-DIRECTIONAL such as North, South, East, West etc.</p></dd><dt><span class="term">qual</span></dt><dd><p>is text (token number <code class="code">3</code>): STREET NAME PRE-MODIFIER Example <span class="emphasis"><em>OLD</em></span> in <code class="code">3715 OLD HIGHWAY 99</code>.</p></dd><dt><span class="term">pretype</span></dt><dd><p> is text (token number <code class="code">4</code>): STREET PREFIX TYPE</p></dd><dt><span class="term">name</span></dt><dd><p>is text (token number <code class="code">5</code>): STREET NAME</p></dd><dt><span class="term">suftype</span></dt><dd><p>is text (token number <code class="code">6</code>): STREET POST TYPE e.g. St, Ave, Cir.  A street type following the root street name. Example <span class="emphasis"><em>STREET</em></span> in <code class="code">75 State Street</code>.</p></dd><dt><span class="term">sufdir</span></dt><dd><p>is text (token number <code class="code">7</code>): STREET POST-DIRECTIONAL A directional modifier that follows the street name.. Example <span class="emphasis"><em>WEST</em></span> in <code class="code">3715 TENTH AVENUE WEST</code>.</p></dd><dt><span class="term">ruralroute</span></dt><dd><p>is text (token number <code class="code">8</code>): RURAL ROUTE . Example <span class="emphasis"><em>8</em></span> in <code class="code">RR 7</code>.</p></dd><dt><span class="term">extra</span></dt><dd><p>is text: Extra information like Floor number.</p></dd><dt><span class="term">city</span></dt><dd><p>is text (token number <code class="code">10</code>): Example Boston.</p></dd><dt><span class="term">state</span></dt><dd><p>is text (token number <code class="code">11</code>):  Example <code class="code">MASSACHUSETTS</code></p></dd><dt><span class="term">country</span></dt><dd><p>is text (token number <code class="code">12</code>):  Example <code class="code">USA</code></p></dd><dt><span class="term">postcode</span></dt><dd><p>is text POSTAL CODE (ZIP CODE) (token number <code class="code">13</code>):  Example <code class="code">02109</code></p></dd><dt><span class="term">box</span></dt><dd><p>is text POSTAL BOX NUMBER (token number <code class="code">14 and 15</code>):  Example <code class="code">02109</code></p></dd><dt><span class="term">unit</span></dt><dd><p>is text Apartment number or Suite Number (token number <code class="code">17</code>):  Example <span class="emphasis"><em>3B</em></span> in <code class="code">APT 3B</code>.</p></dd></dl></div></div></div></div><div class="sect1" title="12.3. Address Standardizer Tables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Tables"></a>12.3. Address Standardizer Tables</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>This section lists the PostgreSQL table formats used by the address_standardizer for normalizing addresses.  Note that these tables do not need to be named the same as what is referenced here.  You can have different lex, gaz, rules tables for each country for example or for your custom geocoder.  The names of these tables get passed into the address standardizer functions.
                </p><p>The packaged extension <code class="varname">address_standardizer_data_us</code> contains data for standardizing US addresses.</p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#rulestab">rules table</a></span><span class="refpurpose"> — The rules table contains a set of rules that maps address input sequence tokens to standardized output sequence. A rule is defined as a set of input tokens followed by -1 (terminator) followed by set of output tokens followed by -1 followed by number denoting kind of rule followed by ranking of rule.</span></dt><dt><span class="refentrytitle"><a href="#lextab">lex table</a></span><span class="refpurpose"> — A lex table is used to classify alphanumeric input and associate that input with (a) input tokens ( See <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a>) and (b) standardized representations.</span></dt><dt><span class="refentrytitle"><a href="#gaztab">gaz table</a></span><span class="refpurpose"> — A gaz table is used to standardize place names and associate that input with (a) input tokens ( See <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a>) and (b) standardized representations.</span></dt></dl></div><div class="refentry" title="rules table"><a name="rulestab"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>rules table — The rules table contains a set of rules that maps address input sequence tokens to standardized output sequence. A rule is defined as a set of input tokens followed by -1 (terminator) followed by set of output tokens followed by -1 followed by number denoting kind of rule followed by ranking of rule.</p></div><div class="refsection" title="Description"><a name="idp100238160"></a><h2>Description</h2><p>A rules table must have at least the following columns, though you are allowed to add more for your own uses. </p><div class="variablelist"><dl><dt><span class="term">id</span></dt><dd><p>Primary key of table</p></dd><dt><span class="term">rule</span></dt><dd><p>text field denoting the rule. Details at <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-rec--" target="_top">PAGC Address Standardizer Rule records</a>.</p><p>A rule consists of a set of non-negative integers representing input tokens, terminated by a -1, followed by an equal number of non-negative integers representing postal attributes, terminated by a -1, followed by an integer representing a rule type, followed by an integer representing the rank of the rule. The rules are ranked from 0 (lowest) to 17 (highest).</p><p>So for example the rule <code class="code">2 0 2 22 3 -1 5 5 6 7 3 -1 2 6</code> maps to sequence of output tokens <span class="emphasis"><em>TYPE NUMBER TYPE DIRECT QUALIF</em></span> to the output sequence <span class="emphasis"><em>STREET STREET SUFTYP SUFDIR QUALIF</em></span>. The rule is an ARC_C rule of rank 6. </p><p>Numbers for corresponding output tokens are listed in <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>.</p></dd></dl></div></div><div class="refsection" title="Input Tokens"><a name="rule_input_tokens"></a><h2>Input Tokens</h2><p>Each rule starts with a set of input tokens followed by a terminator <code class="code">-1</code>. Valid input tokens excerpted from <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#ss12.2" target="_top">PAGC Input Tokens</a> are as follows:</p><p><span class="bold"><strong>Form-Based Input Tokens</strong></span></p><div class="variablelist"><dl><dt><span class="term">AMPERS</span></dt><dd><p>(13). The ampersand (&amp;) is frequently used to abbreviate the word "and".</p></dd><dt><span class="term">DASH</span></dt><dd><p>(9). A punctuation character.</p></dd><dt><span class="term">DOUBLE</span></dt><dd><p>(21). A sequence of two letters. Often used as identifiers.</p></dd><dt><span class="term">FRACT</span></dt><dd><p>(25). Fractions are sometimes used in civic numbers or unit numbers.</p></dd><dt><span class="term">MIXED</span></dt><dd><p>(23). An alphanumeric string that contains both letters and digits. Used for identifiers.</p></dd><dt><span class="term">NUMBER</span></dt><dd><p>(0). A string of digits.</p></dd><dt><span class="term">ORD</span></dt><dd><p>(15). Representations such as First or 1st. Often used in street names.</p></dd><dt><span class="term">ORD</span></dt><dd><p>(18). A single letter.</p></dd><dt><span class="term">WORD</span></dt><dd><p>(1). A word is a string of letters of arbitrary length. A single letter can be both a SINGLE and a WORD.</p></dd></dl></div><p><span class="bold"><strong>Function-based Input Tokens</strong></span></p><div class="variablelist"><dl><dt><span class="term">BOXH</span></dt><dd><p>(14). Words used to denote post office boxes. For example <span class="emphasis"><em>Box</em></span> or <span class="emphasis"><em>PO Box</em></span>.</p></dd><dt><span class="term">BUILDH</span></dt><dd><p>(19). Words used to denote buildings or building complexes, usually as a prefix. For example: <span class="emphasis"><em>Tower</em></span> in <span class="emphasis"><em>Tower 7A</em></span>.</p></dd><dt><span class="term">BUILDT</span></dt><dd><p>(24). Words and abbreviations used to denote buildings or building complexes, usually as a suffix. For example: <span class="emphasis"><em>Shopping Centre</em></span>.</p></dd><dt><span class="term">DIRECT</span></dt><dd><p>(22). Words used to denote directions, for example <span class="emphasis"><em>North</em></span>.</p></dd><dt><span class="term">MILE</span></dt><dd><p>(20). Words used to denote milepost addresses.</p></dd><dt><span class="term">ROAD</span></dt><dd><p>(6). Words and abbreviations used to denote highways and roads. For example: the <span class="emphasis"><em>Interstate</em></span> in <span class="emphasis"><em>Interstate 5</em></span></p></dd><dt><span class="term">RR</span></dt><dd><p>(8). Words and abbreviations used to denote rural routes. <span class="emphasis"><em>RR</em></span>.</p></dd><dt><span class="term">TYPE</span></dt><dd><p>(2). Words and abbreviation used to denote street typess. For example: <span class="emphasis"><em>ST</em></span> or <span class="emphasis"><em>AVE</em></span>.</p></dd><dt><span class="term">UNITH</span></dt><dd><p>(16). Words and abbreviation used to denote internal subaddresses. For example, <span class="emphasis"><em>APT</em></span> or <span class="emphasis"><em>UNIT</em></span>.</p></dd></dl></div><p><span class="bold"><strong>Postal Type Input Tokens</strong></span></p><div class="variablelist"><dl><dt><span class="term">QUINT</span></dt><dd><p>(28). A 5 digit number. Identifies a Zip Code</p></dd><dt><span class="term">QUAD</span></dt><dd><p>(29). A 4 digit number. Identifies ZIP4.</p></dd><dt><span class="term">PCH</span></dt><dd><p>(27). A 3 character sequence of letter number letter. Identifies an FSA, the first 3 characters of a Canadian postal code.</p></dd><dt><span class="term">PCT</span></dt><dd><p>(26). A 3 character sequence of number letter number. Identifies an LDU, the last 3 characters of a Canadian postal code.</p></dd></dl></div><p><span class="bold"><strong>Stopwords</strong></span></p><p>STOPWORDS combine with WORDS. In rules a string of multiple WORDs and STOPWORDs will be represented by a single WORD token.</p><div class="variablelist"><dl><dt><span class="term">STOPWORD</span></dt><dd><p>(7). A word with low lexical significance, that can be omitted in parsing. For example: <span class="emphasis"><em>THE</em></span>.</p></dd></dl></div></div><div class="refsection" title="Output Tokens"><a name="idp100306640"></a><h2>Output Tokens</h2><p>After the first -1 (terminator), follows the output tokens and their order, followed by a terminator <code class="code">-1</code>.  Numbers for corresponding output tokens are listed in <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>. What are allowed is dependent on kind of rule.  Output tokens valid for each rule type are listed in <a class="xref" href="#rule_types_rank" title="Rule Types and Rank">the section called “Rule Types and Rank”</a>.</p></div><div class="refsection" title="Rule Types and Rank"><a name="rule_types_rank"></a><h2>Rule Types and Rank</h2><p>The final part of the rule is the rule type which is denoted by one of the following, followed by a rule rank.  The rules are ranked from 0 (lowest) to 17 (highest).</p><p><span class="bold"><strong>MACRO_C</strong></span></p><p>(token number = "<span class="bold"><strong>0</strong></span>"). The class of rules for parsing MACRO clauses such as <span class="emphasis"><em>PLACE STATE ZIP</em></span></p><p><span class="bold"><strong>MACRO_C output tokens</strong></span> (excerpted from <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>.</p><div class="variablelist"><dl><dt><span class="term">CITY</span></dt><dd><p>(token number "10"). Example "Albany"</p></dd><dt><span class="term">STATE</span></dt><dd><p>(token number "11"). Example "NY"</p></dd><dt><span class="term">NATION</span></dt><dd><p>(token number "12").  This attribute is not used in most reference files. Example "USA"</p></dd><dt><span class="term">POSTAL</span></dt><dd><p>(token number "13").  (SADS elements "ZIP CODE" , "PLUS 4" ). This attribute is used for both the US Zip and the Canadian Postal Codes.</p></dd></dl></div><p><span class="bold"><strong>MICRO_C</strong></span></p><p>(token number = "<span class="bold"><strong>1</strong></span>"). The class of rules for parsing full MICRO clauses (such as House, street, sufdir, predir, pretyp, suftype, qualif) (ie ARC_C plus CIVIC_C). These rules are not used in the build phase.</p><p><span class="bold"><strong>MICRO_C output tokens</strong></span> (excerpted from <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>.</p><div class="variablelist"><dl><dt><span class="term">HOUSE</span></dt><dd><p>is a text (token number <code class="code">1</code>): This is the street number on a street. Example <span class="emphasis"><em>75</em></span> in <code class="code">75 State Street</code>.</p></dd><dt><span class="term">predir</span></dt><dd><p> is text (token number <code class="code">2</code>): STREET NAME PRE-DIRECTIONAL such as North, South, East, West etc.</p></dd><dt><span class="term">qual</span></dt><dd><p>is text (token number <code class="code">3</code>): STREET NAME PRE-MODIFIER Example <span class="emphasis"><em>OLD</em></span> in <code class="code">3715 OLD HIGHWAY 99</code>.</p></dd><dt><span class="term">pretype</span></dt><dd><p> is text (token number <code class="code">4</code>): STREET PREFIX TYPE</p></dd><dt><span class="term">street</span></dt><dd><p>is text (token number <code class="code">5</code>): STREET NAME</p></dd><dt><span class="term">suftype</span></dt><dd><p>is text (token number <code class="code">6</code>): STREET POST TYPE e.g. St, Ave, Cir.  A street type following the root street name. Example <span class="emphasis"><em>STREET</em></span> in <code class="code">75 State Street</code>.</p></dd><dt><span class="term">sufdir</span></dt><dd><p>is text (token number <code class="code">7</code>): STREET POST-DIRECTIONAL A directional modifier that follows the street name.. Example <span class="emphasis"><em>WEST</em></span> in <code class="code">3715 TENTH AVENUE WEST</code>.</p></dd></dl></div><p><span class="bold"><strong>ARC_C</strong></span></p><p>(token number = "<span class="bold"><strong>2</strong></span>"). The class of rules for parsing MICRO clauses, excluding the HOUSE attribute. As such uses same set of output tokens as MICRO_C minus the HOUSE token.</p><p><span class="bold"><strong>CIVIC_C</strong></span></p><p>(token number = "<span class="bold"><strong>3</strong></span>"). The class of rules for parsing the HOUSE attribute.</p><p><span class="bold"><strong>EXTRA_C</strong></span></p><p>(token number = "<span class="bold"><strong>4</strong></span>"). The class of rules for parsing EXTRA attributes - attributes excluded from geocoding. These rules are not used in the build phase.</p><p><span class="bold"><strong>EXTRA_C output tokens</strong></span> (excerpted from <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--" target="_top">http://www.pagcgeo.org/docs/html/pagc-12.html#--r-typ--</a>.</p><div class="variablelist"><dl><dt><span class="term">BLDNG</span></dt><dd><p>(token number <code class="code">0</code>):  Unparsed building identifiers and types.</p></dd><dt><span class="term">BOXH</span></dt><dd><p>i(token number <code class="code">14</code>): The <span class="bold"><strong>BOX</strong></span> in <code class="code">BOX 3B</code></p></dd><dt><span class="term">BOXT</span></dt><dd><p>(token number <code class="code">15</code>): The <span class="bold"><strong>3B</strong></span> in <code class="code">BOX 3B</code></p></dd><dt><span class="term">RR</span></dt><dd><p>(token number <code class="code">8</code>): The <span class="bold"><strong>RR</strong></span> in <code class="code">RR 7</code></p></dd><dt><span class="term">UNITH</span></dt><dd><p>(token number <code class="code">16</code>): The <span class="bold"><strong>APT</strong></span> in <code class="code">APT 3B</code></p></dd><dt><span class="term">UNITT</span></dt><dd><p>(token number <code class="code">17</code>): The <span class="bold"><strong>3B</strong></span> in <code class="code">APT 3B</code></p></dd><dt><span class="term">UNKNWN</span></dt><dd><p>(token number <code class="code">9</code>): An otherwise unclassified output.</p></dd></dl></div></div></div><div class="refentry" title="lex table"><div class="refentry.separator"><hr></div><a name="lextab"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>lex table — A lex table is used to classify alphanumeric input and associate that input with (a) input tokens ( See <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a>) and (b) standardized representations.</p></div><div class="refsection" title="Description"><a name="idp100363728"></a><h2>Description</h2><p>A lex (short for lexicon) table is used to classify alphanumeric input and associate that input with  <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a> and (b) standardized representations. Things you will find in these tables are <code class="code">ONE</code> mapped to stdword: <code class="code">1</code>.</p><p>A lex has at least the following columns in the table. You may add</p><div class="variablelist"><dl><dt><span class="term">id</span></dt><dd><p>Primary key of table</p></dd><dt><span class="term">seq</span></dt><dd><p>integer: definition number?</p></dd><dt><span class="term">word</span></dt><dd><p>text: the input word</p></dd><dt><span class="term">stdword</span></dt><dd><p>text: the standardized replacement word</p></dd><dt><span class="term">token</span></dt><dd><p>integer: the kind of word it is.  Only if it is used in this context will it be replaced. Refer to <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--i-tok--" target="_top">PAGC Tokens</a>.</p></dd></dl></div></div></div><div class="refentry" title="gaz table"><div class="refentry.separator"><hr></div><a name="gaztab"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>gaz table — A gaz table is used to standardize place names and associate that input with (a) input tokens ( See <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a>) and (b) standardized representations.</p></div><div class="refsection" title="Description"><a name="idp100376656"></a><h2>Description</h2><p>A gaz (short for gazeteer) table is used to classify place names and associate that input with <a class="xref" href="#rule_input_tokens" title="Input Tokens">the section called “Input Tokens”</a> and (b) standardized representations. For example if you are in US, you may load these with State Names and associated abbreviations.</p><p>A gaz table has at least the following columns in the table. You may add more columns if you wish for your own purposes.</p><div class="variablelist"><dl><dt><span class="term">id</span></dt><dd><p>Primary key of table</p></dd><dt><span class="term">seq</span></dt><dd><p>integer: definition number? - identifer used for that instance of the word</p></dd><dt><span class="term">word</span></dt><dd><p>text: the input word</p></dd><dt><span class="term">stdword</span></dt><dd><p>text: the standardized replacement word</p></dd><dt><span class="term">token</span></dt><dd><p>integer: the kind of word it is.  Only if it is used in this context will it be replaced. Refer to <a class="ulink" href="http://www.pagcgeo.org/docs/html/pagc-12.html#--i-tok--" target="_top">PAGC Tokens</a>.</p></dd></dl></div></div></div></div><div class="sect1" title="12.4. Address Standardizer Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Address_Standardizer_Functions"></a>12.4. Address Standardizer Functions</h2></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#parse_address">parse_address</a></span><span class="refpurpose"> — Takes a 1 line address and breaks into parts</span></dt><dt><span class="refentrytitle"><a href="#standardize_address">standardize_address</a></span><span class="refpurpose"> — Returns an stdaddr form of an input address utilizing lex, gaz, and rule tables.</span></dt></dl></div><div class="refentry" title="parse_address"><a name="parse_address"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>parse_address — Takes a 1 line address and breaks into parts</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">parse_address</b>(</code>text  <var class="pdparam">address</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100392400"></a><h2>Description</h2><p>Returns takes as input an address, and returns a record output consisting of fields <span class="emphasis"><em>num</em></span>, <span class="emphasis"><em>street</em></span>, <span class="emphasis"><em>street2</em></span>,
			<span class="emphasis"><em>address1</em></span>, <span class="emphasis"><em>city</em></span>, <span class="emphasis"><em>state</em></span>, <span class="emphasis"><em>zip</em></span>, <span class="emphasis"><em>zipplus</em></span>, <span class="emphasis"><em>country</em></span>.</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs address_standardizer extension.</p></div><div class="refsection" title="Examples"><a name="idp100407376"></a><h2>Examples</h2><p>Single Addresss</p><pre class="programlisting">SELECT num, street, city, zip, zipplus
	FROM parse_address('1 Devonshire Place, Boston, MA 02109-1234') AS a;</pre><pre class="screen">
 num |      street      |  city  |  zip  | zipplus
-----+------------------+--------+-------+---------
 1   | Devonshire Place | Boston | 02109 | 1234		</pre><p>Table of addresses</p><pre class="programlisting">-- basic table
CREATE TABLE places(addid serial PRIMARY KEY, address text);

INSERT INTO places(address)
VALUES ('529 Main Street, Boston MA, 02129'),
 ('77 Massachusetts Avenue, Cambridge, MA 02139'),
 ('25 Wizard of Oz, Walaford, KS 99912323'),
 ('26 Capen Street, Medford, MA'),
 ('124 Mount Auburn St, Cambridge, Massachusetts 02138'),
 ('950 Main Street, Worcester, MA 01610');

 -- parse the addresses
 -- if you want all fields you can use (a).*
SELECT addid, (a).num, (a).street, (a).city, (a).state, (a).zip, (a).zipplus
FROM (SELECT addid, parse_address(address) As a
 FROM places) AS p;</pre><pre class="screen"> addid | num |        street        |   city    | state |  zip  | zipplus
-------+-----+----------------------+-----------+-------+-------+---------
     1 | 529 | Main Street          | Boston    | MA    | 02129 |
     2 | 77  | Massachusetts Avenue | Cambridge | MA    | 02139 |
     3 | 25  | Wizard of Oz         | Walaford  | KS    | 99912 | 323
     4 | 26  | Capen Street         | Medford   | MA    |       |
     5 | 124 | Mount Auburn St      | Cambridge | MA    | 02138 |
     6 | 950 | Main Street          | Worcester | MA    | 01610 |
(6 rows)</pre></div><div class="refsection" title="See Also"><a name="idp100411344"></a><h2>See Also</h2><p></p></div></div><div class="refentry" title="standardize_address"><div class="refentry.separator"><hr></div><a name="standardize_address"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>standardize_address — Returns an stdaddr form of an input address utilizing lex, gaz, and rule tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">stdaddr <b class="fsfunc">standardize_address</b>(</code>text  <var class="pdparam">lextab</var>, text  <var class="pdparam">gaztab</var>, text  <var class="pdparam">rultab</var>, text  <var class="pdparam">address</var><code>)</code>;</p><p><code class="funcdef">stdaddr <b class="fsfunc">standardize_address</b>(</code>text  <var class="pdparam">lextab</var>, text  <var class="pdparam">gaztab</var>, text  <var class="pdparam">rultab</var>, text  <var class="pdparam">micro</var>, text  <var class="pdparam">macro</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100426576"></a><h2>Description</h2><p>Returns an <a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a> form of an input address utilizing <a class="xref" href="#lextab" title="lex table">lex table</a> table name, <a class="xref" href="#gaztab" title="gaz table">gaz table</a>, and <a class="xref" href="#rulestab" title="rules table">rules table</a> table names and an address.</p><p>Variant 1: Takes an address as a single line.</p><p>Variant 2: Takes an address as 2 parts.  A <code class="varname">micro</code> consisting of standard first line of postal address e.g. <code class="code">house_num street</code>, and a macro consisting of standard postal second line of an address e.g <code class="code">city, state postal_code country</code>.</p><p>Availability: 2.2.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs address_standardizer extension.</p></div><div class="refsection" title="Examples"><a name="idp100433232"></a><h2>Examples</h2><p>Using address_standardizer_data_us extension</p><pre class="programlisting">CREATE EXTENSION address_standardizer_data_us; -- only needs to be done once</pre><p>Variant 1: Single line address.  This doesn't work well with non-US addresses</p><pre class="programlisting">SELECT house_num, name, suftype, city, country, state, unit  FROM standardize_address('us_lex',
			   'us_gaz', 'us_rules', 'One Devonshire Place, PH 301, Boston, MA 02109');</pre><pre class="screen">house_num |    name    | suftype |  city  | country |     state     |      unit
----------+------------+---------+--------+---------+---------------+-----------------
1         | DEVONSHIRE | PLACE   | BOSTON | USA     | MASSACHUSETTS | # PENTHOUSE 301</pre><p>Using tables packaged with tiger geocoder. This example only works if you installed <code class="varname">postgis_tiger_geocoder</code>.</p><pre class="programlisting">SELECT *  FROM standardize_address('tiger.pagc_lex',
         'tiger.pagc_gaz', 'tiger.pagc_rules', 'One Devonshire Place, PH 301, Boston, MA 02109-1234');</pre><p>Make easier to read we'll dump output using hstore extension CREATE EXTENSION hstore; you need to install</p><pre class="programlisting">SELECT (each(hstore(p))).*
 FROM standardize_address('tiger.pagc_lex', 'tiger.pagc_gaz',
   'tiger.pagc_rules', 'One Devonshire Place, PH 301, Boston, MA 02109') As p;</pre><pre class="screen">    key     |      value
------------+-----------------
 box        |
 city       | BOSTON
 name       | DEVONSHIRE
 qual       |
 unit       | # PENTHOUSE 301
 extra      |
 state      | MA
 predir     |
 sufdir     |
 country    | USA
 pretype    |
 suftype    | PL
 building   |
 postcode   | 02109
 house_num  | 1
 ruralroute |
(16 rows)
			</pre><p>Variant 2: As a two part Address</p><pre class="programlisting">SELECT (each(hstore(p))).*
 FROM standardize_address('tiger.pagc_lex', 'tiger.pagc_gaz',
   'tiger.pagc_rules', 'One Devonshire Place, PH 301', 'Boston, MA 02109, US') As p;</pre><pre class="screen">    key     |      value
------------+-----------------
 box        |
 city       | BOSTON
 name       | DEVONSHIRE
 qual       |
 unit       | # PENTHOUSE 301
 extra      |
 state      | MA
 predir     |
 sufdir     |
 country    | USA
 pretype    |
 suftype    | PL
 building   |
 postcode   | 02109
 house_num  | 1
 ruralroute |
(16 rows)</pre></div><div class="refsection" title="See Also"><a name="idp100440784"></a><h2>See Also</h2><p><a class="xref" href="#stdaddr" title="stdaddr">stdaddr</a>, <a class="xref" href="#rulestab" title="rules table">rules table</a>, <a class="xref" href="#lextab" title="lex table">lex table</a>, <a class="xref" href="#gaztab" title="gaz table">gaz table</a>, <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a></p></div></div></div></div><div class="chapter" title="Chapter 13. PostGIS Extras"><div class="titlepage"><div><div><h2 class="title"><a name="Extras"></a>Chapter 13. PostGIS Extras</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#Tiger_Geocoder">13.1. Tiger Geocoder</a></span></dt></dl></div><p>This chapter documents features found in the extras folder of the PostGIS source tarballs and source repository.  These
  are not always packaged with PostGIS binary releases, but are usually plpgsql based or standard shell scripts that can be run as is.</p><div class="sect1" title="13.1. Tiger Geocoder"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="Tiger_Geocoder"></a>13.1. Tiger Geocoder</h2></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>A plpgsql based geocoder written to work with the <a class="ulink" href="http://www.census.gov/geo/www/tiger/" target="_top">TIGER (Topologically Integrated Geographic Encoding and Referencing system ) / Line and Master Address database export</a> released by the US Census Bureau.   </p><p>There are four components to the geocoder: the data loader functions, the address normalizer, the address geocoder, and the reverse geocoder. </p><p>Although it is designed specifically for the US, a lot of the concepts and functions are applicable and can be adapted to work with other country address and road networks.</p><p>The script builds a schema called <code class="varname">tiger</code> to house all the tiger related functions, reusable lookup data such as road type prefixes, suffixes, states, various control tables for managing data load, and skeleton base tables from which all the tiger loaded tables inherit from.</p><p>Another schema called <code class="varname">tiger_data</code> is also created which houses all the census data for each state that the loader downloads from Census site and loads into the database. In the current model, each set of state tables is
                prefixed with the state code e.g <code class="varname">ma_addr</code>, <code class="varname">ma_edges</code> etc with constraints to enforce only that state data.  Each of these tables inherits from the tables <code class="varname">addr</code>, <code class="varname">faces</code>, <code class="varname">edges</code>, etc located in the <code class="varname">tiger schema</code>. </p><p>All the geocode functions only reference the base tables, so there is no requirement that the data schema be called <code class="varname">tiger_data</code> or that data can't be further partitioned into other schemas -- e.g a different schema
            for each state, as long as all the tables inherit from the tables in the <code class="varname">tiger</code> schema.</p><p>For instructions on how to enable the extension in your database and also to load data using it, refer to <a class="xref" href="#install_tiger_geocoder_extension" title="2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension">Section 2.8.1, “Tiger Geocoder Enabling your PostGIS database: Using Extension”</a>.</p><p> </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>
If you are using tiger geocoder (tiger_2010),
you can upgrade the scripts using the accompanying upgrade_geocoder.bat
/ .sh scripts in extras/tiger.  One major change between <code class="varname">tiger_2010</code> and <code class="varname">tiger_2011+</code> is that the <code class="varname">county</code> and <code class="varname">state</code> tables are no longer broken out by state.    If you have data from tiger_2010 and want to replace with tiger_2015, refer to <a class="xref" href="#upgrade_tiger_geocoder" title="2.8.5. Upgrading your Tiger Geocoder Install">Section 2.8.5, “Upgrading your Tiger Geocoder Install”</a>
              </p></td></tr></table></div><p>

              </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>New in PostGIS 2.2.0 release is support for Tiger 2015 data and inclusion of Address Standardizer as part of PostGIS.</p><p>New in PostGIS 2.1.0 release is ability to install tiger geocoder with PostgreSQL extension model if you are running PostgreSQL 9.1+. Refer to <a class="xref" href="#install_tiger_geocoder_extension" title="2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension">Section 2.8.1, “Tiger Geocoder Enabling your PostGIS database: Using Extension”</a> for details.</p></td></tr></table></div><p>
              </p><p>The <a class="xref" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> function as a drop in replacement for in-built <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>. Refer to <a class="xref" href="#installing_pagc_address_standardizer" title="2.7. Installing and Using the address standardizer">Section 2.7, “Installing and Using the address standardizer”</a> for compile and installation instructions.</p><p>Design:</p><p>The goal of this project is to build a fully functional geocoder that can process an arbitrary
            United States address string and using normalized TIGER census data, produce a point geometry and rating reflecting the location of the given address and likeliness of the location. The higher the rating number the worse the result.</p><p>The <code class="varname">reverse_geocode</code> function, introduced in PostGIS 2.0.0 is useful for deriving the street address and cross streets of a GPS location.</p><p>The geocoder should be simple for anyone familiar with PostGIS to install and use, and should be easily installable and usable on all platforms supported by PostGIS.</p><p>It should be robust enough to function properly despite formatting and spelling errors.</p><p>It should be extensible enough to be used with future data updates, or alternate data sources with a minimum of coding changes.</p><p>
                </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The <code class="varname">tiger</code> schema must be added to the database search path for the functions to work properly.</p></td></tr></table></div><p>
            </p></div></div></div></div><div class="toc"><dl><dt><span class="refentrytitle"><a href="#Drop_Indexes_Generate_Script">Drop_Indexes_Generate_Script</a></span><span class="refpurpose"> — Generates a script that drops all non-primary key and non-unique indexes on tiger schema and user specified schema.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.</span></dt><dt><span class="refentrytitle"><a href="#Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a></span><span class="refpurpose"> — Generates a script that drops all tables in the specified schema that start with <code class="varname">county_all</code>, <code class="varname">state_all</code> or state code followed by <code class="varname">county</code> or <code class="varname">state</code>.</span></dt><dt><span class="refentrytitle"><a href="#Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a></span><span class="refpurpose"> — Generates a script that drops all tables in the specified schema that are prefixed with the state abbreviation.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.</span></dt><dt><span class="refentrytitle"><a href="#Geocode">Geocode</a></span><span class="refpurpose"> — Takes in an address as a string (or other normalized address) and outputs a set of possible locations which include a point geometry in NAD 83 long lat, a normalized address for each, and the rating.  The lower the rating the more likely the match.
            Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10, and restrict_region (defaults to NULL)</span></dt><dt><span class="refentrytitle"><a href="#Geocode_Intersection">Geocode_Intersection</a></span><span class="refpurpose"> — Takes in 2 streets that intersect and a state, city, zip, and outputs a set of possible locations on the first cross street that is at the intersection, also includes a geomout as the point location in NAD 83 long lat, a <code class="varname">normalized_address</code> (addy) for each location, and the rating. The lower the rating the more likely the match. Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10. Uses Tiger data (edges, faces, addr), PostgreSQL fuzzy string matching (soundex, levenshtein).</span></dt><dt><span class="refentrytitle"><a href="#Get_Geocode_Setting">Get_Geocode_Setting</a></span><span class="refpurpose"> — Returns value of specific setting stored in tiger.geocode_settings table.</span></dt><dt><span class="refentrytitle"><a href="#Get_Tract">Get_Tract</a></span><span class="refpurpose"> — Returns census tract or field from tract table of where the geometry is located. Default to returning short name of tract.</span></dt><dt><span class="refentrytitle"><a href="#Install_Missing_Indexes">Install_Missing_Indexes</a></span><span class="refpurpose"> — Finds all tables with key columns used in geocoder joins and filter conditions that are missing used indexes on those columns and will add them.</span></dt><dt><span class="refentrytitle"><a href="#Loader_Generate_Census_Script">Loader_Generate_Census_Script</a></span><span class="refpurpose"> — Generates a shell script for the specified platform for the specified states that will download Tiger census state tract, bg, and tabblocks data tables, stage and load into <code class="varname">tiger_data</code> schema. Each state script is returned as a separate record.</span></dt><dt><span class="refentrytitle"><a href="#Loader_Generate_Script">Loader_Generate_Script</a></span><span class="refpurpose"> — Generates a shell script for the specified platform for the specified states that will download Tiger data, stage and load into <code class="varname">tiger_data</code> schema. Each state script is returned as a separate record. Latest version supports Tiger 2010 structural changes and also loads census tract, block groups, and blocks tables.</span></dt><dt><span class="refentrytitle"><a href="#Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></span><span class="refpurpose"> — Generates a shell script for the specified platform that loads in the county and state lookup tables.</span></dt><dt><span class="refentrytitle"><a href="#Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></span><span class="refpurpose"> — Finds all tables with key columns used in geocoder joins that are missing indexes on those columns and will output the SQL DDL to
            define the index for those tables.</span></dt><dt><span class="refentrytitle"><a href="#Normalize_Address">Normalize_Address</a></span><span class="refpurpose"> — Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This function
        will work with just the lookup data packaged with the tiger_geocoder (no need for tiger census data).</span></dt><dt><span class="refentrytitle"><a href="#Pagc_Normalize_Address">Pagc_Normalize_Address</a></span><span class="refpurpose"> — Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This function
        will work with just the lookup data packaged with the tiger_geocoder (no need for tiger census data). Requires address_standardizer extension.</span></dt><dt><span class="refentrytitle"><a href="#Pprint_Addy">Pprint_Addy</a></span><span class="refpurpose"> — Given a <code class="varname">norm_addy</code> composite type object, returns a pretty print representation of it. Usually used in conjunction with normalize_address.</span></dt><dt><span class="refentrytitle"><a href="#Reverse_Geocode">Reverse_Geocode</a></span><span class="refpurpose"> — Takes a geometry point in a known spatial ref sys and returns a record containing an array of theoretically possible addresses and an array of cross streets.  If include_strnum_range = true, includes the street range in the cross streets.</span></dt><dt><span class="refentrytitle"><a href="#Topology_Load_Tiger">Topology_Load_Tiger</a></span><span class="refpurpose"> — Loads a defined region of tiger data into a PostGIS Topology and transforming the tiger data to spatial reference of the topology
            and snapping to the precision tolerance of the topology.</span></dt><dt><span class="refentrytitle"><a href="#Set_Geocode_Setting">Set_Geocode_Setting</a></span><span class="refpurpose"> — Sets a setting that affects behavior of geocoder functions.</span></dt></dl></div><p>There are a couple other open source geocoders for PostGIS, that unlike tiger geocoder have the advantage of multi-country geocoding support</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="ulink" href="http://wiki.openstreetmap.org/wiki/Nominatim" target="_top">Nominatim</a>
     uses OpenStreetMap gazeteer formatted data.  It requires osm2pgsql for loading the data, PostgreSQL 8.4+ and PostGIS 1.5+ to function.  It is packaged as a webservice interface and seems designed to be called as a webservice.
     Just like the tiger geocoder, it has both a geocoder and a reverse geocoder component.  From the documentation, it is unclear if it has a pure SQL interface like the tiger geocoder, or if a good deal of the logic is implemented in the web interface.</p></li><li class="listitem"><p><a class="ulink" href="http://www.gisgraphy.com/" target="_top">GIS Graphy</a> also utilizes PostGIS and like Nominatim works with OpenStreetMap (OSM) data.  It comes with a loader to load OSM data and similar to Nominatim is capable of geocoding not just US. Much like Nominatim, it runs as a webservice and relies on Java 1.5, Servlet apps, Solr. GisGraphy is cross-platform and also has a reverse geocoder among some other neat features.</p></li></ul></div><div class="refentry" title="Drop_Indexes_Generate_Script"><a name="Drop_Indexes_Generate_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Drop_Indexes_Generate_Script — Generates a script that drops all non-primary key and non-unique indexes on tiger schema and user specified schema.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Drop_Indexes_Generate_Script</b>(</code>text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100762832"></a><h2>Description</h2><p>Generates a script that drops all non-primary key and non-unique indexes on tiger schema and user specified schema.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.</p><p>This is useful for minimizing index bloat that may confuse the query planner or take up unnecessary space.  Use in combination with <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a> to add just the indexes used by the geocoder.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp100765520"></a><h2>Examples</h2><pre class="programlisting">SELECT drop_indexes_generate_script() As actionsql;
actionsql
---------------------------------------------------------
DROP INDEX tiger.idx_tiger_countysub_lookup_lower_name;
DROP INDEX tiger.idx_tiger_edges_countyfp;
DROP INDEX tiger.idx_tiger_faces_countyfp;
DROP INDEX tiger.tiger_place_the_geom_gist;
DROP INDEX tiger.tiger_edges_the_geom_gist;
DROP INDEX tiger.tiger_state_the_geom_gist;
DROP INDEX tiger.idx_tiger_addr_least_address;
DROP INDEX tiger.idx_tiger_addr_tlid;
DROP INDEX tiger.idx_tiger_addr_zip;
DROP INDEX tiger.idx_tiger_county_countyfp;
DROP INDEX tiger.idx_tiger_county_lookup_lower_name;
DROP INDEX tiger.idx_tiger_county_lookup_snd_name;
DROP INDEX tiger.idx_tiger_county_lower_name;
DROP INDEX tiger.idx_tiger_county_snd_name;
DROP INDEX tiger.idx_tiger_county_the_geom_gist;
DROP INDEX tiger.idx_tiger_countysub_lookup_snd_name;
DROP INDEX tiger.idx_tiger_cousub_countyfp;
DROP INDEX tiger.idx_tiger_cousub_cousubfp;
DROP INDEX tiger.idx_tiger_cousub_lower_name;
DROP INDEX tiger.idx_tiger_cousub_snd_name;
DROP INDEX tiger.idx_tiger_cousub_the_geom_gist;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_least_address;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_tlid;
DROP INDEX tiger_data.idx_tiger_data_ma_addr_zip;
DROP INDEX tiger_data.idx_tiger_data_ma_county_countyfp;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lookup_lower_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lookup_snd_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_lower_name;
DROP INDEX tiger_data.idx_tiger_data_ma_county_snd_name;
:
:
</pre></div><div class="refsection" title="See Also"><a name="idp100783568"></a><h2>See Also</h2><p><a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a>, <a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></p></div></div><div class="refentry" title="Drop_Nation_Tables_Generate_Script"><div class="refentry.separator"><hr></div><a name="Drop_Nation_Tables_Generate_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Drop_Nation_Tables_Generate_Script — Generates a script that drops all tables in the specified schema that start with <code class="varname">county_all</code>, <code class="varname">state_all</code> or state code followed by <code class="varname">county</code> or <code class="varname">state</code>.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Drop_Nation_Tables_Generate_Script</b>(</code>text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100791632"></a><h2>Description</h2><p>Generates a script that drops all tables in the specified schema that start with <code class="varname">county_all</code>, <code class="varname">state_all</code> or stae code followed by <code class="varname">county</code> or <code class="varname">state</code>.  This is needed if you are upgrading from <code class="varname">tiger_2010</code> to <code class="varname">tiger_2011</code> data.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Examples"><a name="idp100795472"></a><h2>Examples</h2><pre class="programlisting">SELECT drop_nation_tables_generate_script();
DROP TABLE tiger_data.county_all;
DROP TABLE tiger_data.county_all_lookup;
DROP TABLE tiger_data.state_all;
DROP TABLE tiger_data.ma_county;
DROP TABLE tiger_data.ma_state;</pre></div><div class="refsection" title="See Also"><a name="idp100797008"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></p></div></div><div class="refentry" title="Drop_State_Tables_Generate_Script"><div class="refentry.separator"><hr></div><a name="Drop_State_Tables_Generate_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Drop_State_Tables_Generate_Script — Generates a script that drops all tables in the specified schema that are prefixed with the state abbreviation.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Drop_State_Tables_Generate_Script</b>(</code>text  <var class="pdparam">param_state</var>, text  <var class="pdparam">param_schema=tiger_data</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100808656"></a><h2>Description</h2><p>Generates a script that drops all tables in the specified schema that are prefixed with the state abbreviation.  Defaults schema to <code class="varname">tiger_data</code> if no schema is specified.
        This function is useful for dropping tables of a state just before you reload a state in case something went wrong during your previous load.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp100810576"></a><h2>Examples</h2><pre class="programlisting">SELECT drop_state_tables_generate_script('PA');
DROP TABLE tiger_data.pa_addr;
DROP TABLE tiger_data.pa_county;
DROP TABLE tiger_data.pa_county_lookup;
DROP TABLE tiger_data.pa_cousub;
DROP TABLE tiger_data.pa_edges;
DROP TABLE tiger_data.pa_faces;
DROP TABLE tiger_data.pa_featnames;
DROP TABLE tiger_data.pa_place;
DROP TABLE tiger_data.pa_state;
DROP TABLE tiger_data.pa_zip_lookup_base;
DROP TABLE tiger_data.pa_zip_state;
DROP TABLE tiger_data.pa_zip_state_loc;
        </pre></div><div class="refsection" title="See Also"><a name="idp100812240"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a></p></div></div><div class="refentry" title="Geocode"><div class="refentry.separator"><hr></div><a name="Geocode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Geocode — Takes in an address as a string (or other normalized address) and outputs a set of possible locations which include a point geometry in NAD 83 long lat, a normalized address for each, and the rating.  The lower the rating the more likely the match.
            Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10, and restrict_region (defaults to NULL)</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">geocode</b>(</code>varchar  <var class="pdparam">address</var>, integer  <var class="pdparam">max_results=10</var>, geometry  <var class="pdparam">restrict_region=NULL</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p><p><code class="funcdef">setof record <b class="fsfunc">geocode</b>(</code>norm_addy  <var class="pdparam">in_addy</var>, integer  <var class="pdparam">max_results=10</var>, geometry  <var class="pdparam">restrict_region=NULL</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100831312"></a><h2>Description</h2><p>Takes in an address as a string (or already normalized address) and outputs a set of possible locations which include a point geometry in NAD 83 long lat, a <code class="varname">normalized_address</code> (addy) for each, and the rating.  The lower the rating the more likely the match.
            Results are sorted by lowest rating first.  Uses Tiger data (edges,faces,addr), PostgreSQL fuzzy string matching (soundex,levenshtein) and PostGIS line interpolation functions to interpolate address along the Tiger edges. The higher the rating the less likely the geocode is right.
            The geocoded point is defaulted to offset 10 meters from center-line off to side (L/R) of street address is located on.</p><p>Enhanced: 2.0.0 to support Tiger 2010 structured data and revised some logic to improve speed, accuracy of geocoding, and to offset point from centerline to side of street address is located on. The new parameter <code class="varname">max_results</code> useful for specifying number of best results or just returning the best result.</p></div><div class="refsection" title="Examples: Basic"><a name="idp100833616"></a><h2>Examples: Basic</h2><p>The below examples timings are on a 3.0 GHZ single processor Windows 7 machine with 2GB ram running PostgreSQL 9.1rc1/PostGIS 2.0 loaded with all of MA,MN,CA, RI state Tiger data loaded.</p><p>Exact matches are faster to compute (61ms)</p><pre class="programlisting">SELECT g.rating, ST_X(g.geomout) As lon, ST_Y(g.geomout) As lat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('75 State Street, Boston MA 02109') As g;
 rating |        lon        |       lat        | stno | street | styp |  city  | st |  zip
--------+-------------------+------------------+------+--------+------+--------+----+-------
      0 | -71.0556722990239 | 42.3589914927049 |   75 | State  | St   | Boston | MA | 02109
</pre><p>Even if zip is not passed in the geocoder can guess (took about 122-150 ms)</p><pre class="programlisting">SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('226 Hanover Street, Boston, MA',1) As g;
 rating |         wktlonlat         | stno | street  | styp |  city  | st |  zip
--------+---------------------------+------+---------+------+--------+----+-------
      1 | POINT(-71.05528 42.36316) |  226 | Hanover | St   | Boston | MA | 02113
</pre><p>Can handle misspellings and provides more than one possible solution with ratings and takes longer (500ms).</p><pre class="programlisting">SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp, (addy).location As city, (addy).stateabbrev As st,(addy).zip
    FROM geocode('31 - 37 Stewart Street, Boston, MA 02116') As g;
 rating |         wktlonlat         | stno | street | styp |  city  | st |  zip
--------+---------------------------+------+--------+------+--------+----+-------
     70 | POINT(-71.06459 42.35113) |   31 | Stuart | St   | Boston | MA | 02116
    </pre><p>Using to do a batch geocode of addresses. Easiest is to set <code class="varname">max_results=1</code>. Only process those not yet geocoded (have no rating).</p><pre class="programlisting">CREATE TABLE addresses_to_geocode(addid serial PRIMARY KEY, address text,
        lon numeric, lat numeric, new_address text, rating integer);

INSERT INTO addresses_to_geocode(address)
VALUES ('529 Main Street, Boston MA, 02129'),
 ('77 Massachusetts Avenue, Cambridge, MA 02139'),
 ('25 Wizard of Oz, Walaford, KS 99912323'),
 ('26 Capen Street, Medford, MA'),
 ('124 Mount Auburn St, Cambridge, Massachusetts 02138'),
 ('950 Main Street, Worcester, MA 01610');

-- only update the first 3 addresses (323-704 ms -  there are caching and shared memory effects so first geocode you do is always slower) --
-- for large numbers of addresses you don't want to update all at once
-- since the whole geocode must commit at once
-- For this example we rejoin with LEFT JOIN
-- and set to rating to -1 rating if no match
-- to ensure we don't regeocode a bad address
UPDATE addresses_to_geocode
  SET  (rating, new_address, lon, lat)
    = ( COALESCE((g.geo).rating,-1), pprint_addy((g.geo).addy),
       ST_X((g.geo).geomout)::numeric(8,5), ST_Y((g.geo).geomout)::numeric(8,5) )
FROM (SELECT addid
    FROM addresses_to_geocode
    WHERE rating IS NULL ORDER BY addid LIMIT 3) As a
    LEFT JOIN (SELECT addid, (geocode(address,1)) As geo
    FROM addresses_to_geocode As ag
    WHERE ag.rating IS NULL ORDER BY addid LIMIT 3) As g ON a.addid = g.addid
WHERE a.addid = addresses_to_geocode.addid;

result
-----
Query returned successfully: 3 rows affected, 480 ms execution time.

SELECT * FROM addresses_to_geocode WHERE rating is not null;

 addid |                   address                    |    lon    |   lat    |                new_address                | rating
-------+----------------------------------------------+-----------+----------+-------------------------------------------+--------
     1 | 529 Main Street, Boston MA, 02129            | -71.07181 | 42.38359 | 529 Main St, Boston, MA 02129             |      0
     2 | 77 Massachusetts Avenue, Cambridge, MA 02139 | -71.09428 | 42.35988 | 77 Massachusetts Ave, Cambridge, MA 02139 |      0
     3 | 25 Wizard of Oz, Walaford, KS 99912323       |           |          |                                           |     -1
</pre></div><div class="refsection" title="Examples: Using Geometry filter"><a name="idp100724176"></a><h2>Examples: Using Geometry filter</h2><pre class="programlisting">
SELECT g.rating, ST_AsText(ST_SnapToGrid(g.geomout,0.00001)) As wktlonlat,
    (addy).address As stno, (addy).streetname As street,
    (addy).streettypeabbrev As styp,
    (addy).location As city, (addy).stateabbrev As st,(addy).zip
  FROM geocode('100 Federal Street, MA',
        3,
        (SELECT ST_Union(the_geom)
            FROM place WHERE statefp = '25' AND name = 'Lynn')::geometry
        ) As g;

 rating |        wktlonlat         | stno | street  | styp | city | st |  zip
--------+--------------------------+------+---------+------+------+----+-------
      8 | POINT(-70.96796 42.4659) |  100 | Federal | St   | Lynn | MA | 01905
Total query runtime: 245 ms.
          </pre></div><div class="refsection" title="See Also"><a name="idp100725712"></a><h2>See Also</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a>, <a class="xref" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>, <a class="xref" href="#ST_X" title="ST_X">ST_X</a>, <a class="xref" href="#ST_Y" title="ST_Y">ST_Y</a></p></div></div><div class="refentry" title="Geocode_Intersection"><div class="refentry.separator"><hr></div><a name="Geocode_Intersection"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Geocode_Intersection — Takes in 2 streets that intersect and a state, city, zip, and outputs a set of possible locations on the first cross street that is at the intersection, also includes a geomout as the point location in NAD 83 long lat, a <code class="varname">normalized_address</code> (addy) for each location, and the rating. The lower the rating the more likely the match. Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10. Uses Tiger data (edges, faces, addr), PostgreSQL fuzzy string matching (soundex, levenshtein).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof record <b class="fsfunc">geocode_intersection</b>(</code>text  <var class="pdparam"> roadway1</var>, text  <var class="pdparam"> roadway2</var>, text  <var class="pdparam"> in_state</var>, text  <var class="pdparam"> in_city</var>, text  <var class="pdparam"> in_zip</var>, integer  <var class="pdparam">max_results=10</var>, norm_addy  <var class="pdparam">OUT addy</var>, geometry  <var class="pdparam">OUT geomout</var>, integer  <var class="pdparam">OUT rating</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100877904"></a><h2>Description</h2><p>Takes in 2 streets that intersect and a state, city, zip,  and outputs a set of possible locations on the first cross street that is at the intersection, also includes a point geometry in NAD 83 long lat, a normalized address for each location, and the rating.  The lower the rating the more likely the match.
            Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10.
            Returns <code class="varname">normalized_address</code> (addy) for each, geomout as the point location in nad 83 long lat, and the rating.  The lower the rating the more likely the match.
            Results are sorted by lowest rating first.  Uses Tiger data (edges,faces,addr), PostgreSQL fuzzy string matching (soundex,levenshtein) </p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples: Basic"><a name="idp100879824"></a><h2>Examples: Basic</h2><p>The below examples timings are on a 3.0 GHZ single processor Windows 7 machine with 2GB ram running PostgreSQL 9.0/PostGIS 1.5 loaded with all of MA state Tiger data loaded. Currently a bit slow (3000 ms)</p><p>Testing on Windows 2003 64-bit 8GB on PostGIS 2.0 PostgreSQL 64-bit Tiger 2011 data loaded -- (41ms)</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
            FROM geocode_intersection( 'Haverford St','Germania St', 'MA', 'Boston', '02130',1);
           pprint_addy            |         st_astext          | rating
----------------------------------+----------------------------+--------
98 Haverford St, Boston, MA 02130 | POINT(-71.101375 42.31376) |      0
</pre><p>Even if zip is not passed in the geocoder can guess (took about 3500 ms on the windows 7 box), on the windows 2003 64-bit 741 ms</p><pre class="programlisting">SELECT pprint_addy(addy), st_astext(geomout),rating
                FROM geocode_intersection('Weld', 'School', 'MA', 'Boston');
          pprint_addy          |        st_astext         | rating
-------------------------------+--------------------------+--------
 98 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
 99 Weld Ave, Boston, MA 02119 | POINT(-71.099 42.314234) |      3
</pre></div><div class="refsection" title="See Also"><a name="idp100887248"></a><h2>See Also</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#ST_AsText" title="ST_AsText">ST_AsText</a></p></div></div><div class="refentry" title="Get_Geocode_Setting"><div class="refentry.separator"><hr></div><a name="Get_Geocode_Setting"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Get_Geocode_Setting — Returns value of specific setting stored in tiger.geocode_settings table.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Get_Geocode_Setting</b>(</code>text  <var class="pdparam"> setting_name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100894032"></a><h2>Description</h2><p>Returns value of specific setting stored in tiger.geocode_settings table.  Settings allow you to toggle debugging of functions.  Later plans will be to control rating with settings. Current list of settings are as follows:</p><pre class="screen">              name              | setting |  unit   | category  |                                                             short_desc
--------------------------------+---------+---------+-----------+------------------------------------------------------------------------------------------------------------------------------
 debug_geocode_address          | false   | boolean | debug     | outputs debug information in notice log such as queries when geocode_address is called if true
 debug_geocode_intersection     | false   | boolean | debug     | outputs debug information in notice log such as queries when geocode_intersection is called if true
 debug_normalize_address        | false   | boolean | debug     | outputs debug information in notice log such as queries and intermediate expressions when normalize_address is called if true
 debug_reverse_geocode          | false   | boolean | debug     | if true, outputs debug information in notice log such as queries and intermediate expressions when reverse_geocode
 reverse_geocode_numbered_roads | 0       | integer | rating    | For state and county highways, 0 - no preference in name,
                                                                  1 - prefer the numbered highway name, 2 - prefer local state/county name
 use_pagc_address_parser        | false   | boolean | normalize | If set to true, will try to use the address_standardizer extension (via pagc_normalize_address)
                                                                 instead of tiger normalize_address built one    </pre><p>Changed: 2.2.0 : default settings are now kept in a table called geocode_settings_default. Use customized settingsa are in geocode_settings and only contain those that have been set by user.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Example return debugging setting"><a name="idp100896464"></a><h2>Example return debugging setting</h2><pre class="programlisting">SELECT get_geocode_setting('debug_geocode_address) As result;
result
---------
false
        </pre></div><div class="refsection" title="See Also"><a name="idp100898000"></a><h2>See Also</h2><p><a class="xref" href="#Set_Geocode_Setting" title="Set_Geocode_Setting">Set_Geocode_Setting</a></p></div></div><div class="refentry" title="Get_Tract"><div class="refentry.separator"><hr></div><a name="Get_Tract"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Get_Tract — Returns census tract or field from tract table of where the geometry is located. Default to returning short name of tract.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">get_tract</b>(</code>geometry  <var class="pdparam"> loc_geom</var>, text  <var class="pdparam"> output_field=name</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100905296"></a><h2>Description</h2><p>Given a geometry will return the census tract location of that geometry. NAD 83 long lat is assumed if no spatial ref sys is specified.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples: Basic"><a name="idp100906832"></a><h2>Examples: Basic</h2><pre class="programlisting">SELECT get_tract(ST_Point(-71.101375, 42.31376) ) As tract_name;
tract_name
---------
1203.01
        </pre><pre class="programlisting">--this one returns the tiger geoid
SELECT get_tract(ST_Point(-71.101375, 42.31376), 'tract_id' ) As tract_id;
tract_id
---------
25025120301</pre></div><div class="refsection" title="See Also"><a name="idp100908880"></a><h2>See Also</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>&gt;</p></div></div><div class="refentry" title="Install_Missing_Indexes"><div class="refentry.separator"><hr></div><a name="Install_Missing_Indexes"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Install_Missing_Indexes — Finds all tables with key columns used in geocoder joins and filter conditions that are missing used indexes on those columns and will add them.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">boolean <b class="fsfunc">Install_Missing_Indexes</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100922448"></a><h2>Description</h2><p>Finds all tables in <code class="varname">tiger</code> and <code class="varname">tiger_data</code> schemas with key columns used in geocoder joins and filters that are missing indexes on those columns and will output the SQL DDL to
            define the index for those tables and then execute the generated script. This is a helper function that adds new indexes needed to make queries faster that may have been missing during the load process.
           This function is a companion to <a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a> that in addition to generating the create index script, also executes it.
           It is called as part of the <code class="filename">update_geocode.sql</code> upgrade script.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp100925776"></a><h2>Examples</h2><pre class="programlisting">SELECT install_missing_indexes();
         install_missing_indexes
-------------------------
 t
        </pre></div><div class="refsection" title="See Also"><a name="idp100927440"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>, <a class="xref" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a></p></div></div><div class="refentry" title="Loader_Generate_Census_Script"><div class="refentry.separator"><hr></div><a name="Loader_Generate_Census_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Census_Script — Generates a shell script for the specified platform for the specified states that will download Tiger census state tract, bg, and tabblocks data tables, stage and load into <code class="varname">tiger_data</code> schema. Each state script is returned as a separate record.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof text <b class="fsfunc">loader_generate_census_script</b>(</code>text[] <var class="pdparam">param_states</var>, text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100935248"></a><h2>Description</h2><p>Generates a shell script for the specified platform for the specified states that will download Tiger data census state <code class="varname">tract</code>, block groups <code class="varname">bg</code>, and <code class="varname">tabblocks</code> data tables, stage and load into <code class="varname">tiger_data</code> schema.  Each state script is returned as a separate record.</p><p>It uses unzip on Linux (7-zip on Windows by default) and wget to do the downloading. It uses <a class="xref" href="#shp2pgsql_usage" title="4.4.2. shp2pgsql: Using the ESRI Shapefile Loader">Section 4.4.2, “shp2pgsql: Using the ESRI Shapefile Loader”</a> to load in the data. Note the smallest unit it does is a whole state.  It will only
        process the files in the staging and temp folders.</p><p>It uses the following control tables to control the process and different OS shell syntax variations.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> keeps track of various variables such as census site, year, data and staging schemas</p></li><li class="listitem"><p><code class="varname">loader_platform</code> profiles of various platforms and where the various executables are located.  Comes with windows and linux. More can be added.</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> each record defines a kind of table (state, county), whether to process records in it and how to load them in.  Defines the steps to import data, stage data, add, removes columns, indexes, and constraints for each.  Each table is prefixed with the state and inherits from a table in the tiger schema. e.g. creates <code class="varname">tiger_data.ma_faces</code> which inherits from <code class="varname">tiger.faces</code></p></li></ol></div><p>Availability: 2.0.0 </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a> includes this logic, but if you installed tiger geocoder prior to PostGIS 2.0.0 alpha5, you'll need to run this on the states you have already done
            to get these additional tables.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp100944976"></a><h2>Examples</h2><p>Generate script to load up data for select states in Windows shell script format.</p><pre class="programlisting">SELECT loader_generate_census_script(ARRAY['MA'], 'windows');
-- result --
set STATEDIR="\gisdata\www2.census.gov\geo\pvs\tiger2010st\25_Massachusetts"
set TMPDIR=\gisdata\temp\
set UNZIPTOOL="C:\Program Files\7-Zip\7z.exe"
set WGETTOOL="C:\wget\wget.exe"
set PGBIN=C:\projects\pg\pg91win\bin\
set PGPORT=5432
set PGHOST=localhost
set PGUSER=postgres
set PGPASSWORD=yourpasswordhere
set PGDATABASE=tiger_postgis20
set PSQL="%PGBIN%psql"
set SHP2PGSQL="%PGBIN%shp2pgsql"
cd \gisdata

%WGETTOOL% http://www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts/25/ --no-parent --relative --accept=*bg10.zip,*tract10.zip,*tabblock10.zip --mirror --reject=html
del %TMPDIR%\*.* /Q
%PSQL% -c "DROP SCHEMA tiger_staging CASCADE;"
%PSQL% -c "CREATE SCHEMA tiger_staging;"
cd %STATEDIR%
for /r %%z in (*.zip) do %UNZIPTOOL% e %%z  -o%TMPDIR%
cd %TMPDIR%
%PSQL% -c "CREATE TABLE tiger_data.MA_tract(CONSTRAINT pk_MA_tract PRIMARY KEY (tract_id) ) INHERITS(tiger.tract); "
%SHP2PGSQL% -c -s 4269 -g the_geom   -W "latin1" tl_2010_25_tract10.dbf tiger_staging.ma_tract10 | %PSQL%
%PSQL% -c "ALTER TABLE tiger_staging.MA_tract10 RENAME geoid10 TO tract_id;  SELECT loader_load_staged_data(lower('MA_tract10'), lower('MA_tract')); "
%PSQL% -c "CREATE INDEX tiger_data_MA_tract_the_geom_gist ON tiger_data.MA_tract USING gist(the_geom);"
%PSQL% -c "VACUUM ANALYZE tiger_data.MA_tract;"
%PSQL% -c "ALTER TABLE tiger_data.MA_tract ADD CONSTRAINT chk_statefp CHECK (statefp = '25');"
: </pre><p>Generate sh script</p><pre class="programlisting">STATEDIR="/gisdata/www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts"
TMPDIR="/gisdata/temp/"
UNZIPTOOL=unzip
WGETTOOL="/usr/bin/wget"
export PGBIN=/usr/pgsql-9.0/bin
export PGPORT=5432
export PGHOST=localhost
export PGUSER=postgres
export PGPASSWORD=yourpasswordhere
export PGDATABASE=geocoder
PSQL=${PGBIN}/psql
SHP2PGSQL=${PGBIN}/shp2pgsql
cd /gisdata

wget http://www2.census.gov/geo/pvs/tiger2010st/25_Massachusetts/25/ --no-parent --relative --accept=*bg10.zip,*tract10.zip,*tabblock10.zip --mirror --reject=html
rm -f ${TMPDIR}/*.*
${PSQL} -c "DROP SCHEMA tiger_staging CASCADE;"
${PSQL} -c "CREATE SCHEMA tiger_staging;"
cd $STATEDIR
for z in *.zip; do $UNZIPTOOL -o -d $TMPDIR $z; done
:
: </pre></div><div class="refsection" title="See Also"><a name="idp100947792"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a></p></div></div><div class="refentry" title="Loader_Generate_Script"><div class="refentry.separator"><hr></div><a name="Loader_Generate_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Script — Generates a shell script for the specified platform for the specified states that will download Tiger data, stage and load into <code class="varname">tiger_data</code> schema. Each state script is returned as a separate record. Latest version supports Tiger 2010 structural changes and also loads census tract, block groups, and blocks tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">setof text <b class="fsfunc">loader_generate_script</b>(</code>text[] <var class="pdparam">param_states</var>, text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100955216"></a><h2>Description</h2><p>Generates a shell script for the specified platform for the specified states that will download Tiger data, stage and load into <code class="varname">tiger_data</code> schema.  Each state script is returned as a separate record.</p><p>It uses unzip on Linux (7-zip on Windows by default) and wget to do the downloading. It uses <a class="xref" href="#shp2pgsql_usage" title="4.4.2. shp2pgsql: Using the ESRI Shapefile Loader">Section 4.4.2, “shp2pgsql: Using the ESRI Shapefile Loader”</a> to load in the data. Note the smallest unit it does is a whole state, but you can overwrite this by downloading the files yourself.  It will only
        process the files in the staging and temp folders.</p><p>It uses the following control tables to control the process and different OS shell syntax variations.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> keeps track of various variables such as census site, year, data and staging schemas</p></li><li class="listitem"><p><code class="varname">loader_platform</code> profiles of various platforms and where the various executables are located.  Comes with windows and linux. More can be added.</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> each record defines a kind of table (state, county), whether to process records in it and how to load them in.  Defines the steps to import data, stage data, add, removes columns, indexes, and constraints for each.  Each table is prefixed with the state and inherits from a table in the tiger schema. e.g. creates <code class="varname">tiger_data.ma_faces</code> which inherits from <code class="varname">tiger.faces</code></p></li></ol></div><p>Availability: 2.0.0 to support Tiger 2010 structured data and load census tract (tract), block groups (bg), and blocks (tabblocks) tables .</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you are using pgAdmin 3, be warned that by default pgAdmin 3 truncates long text.  To fix, change 
         <span class="emphasis"><em>File -&gt; Options -&gt; Query Tool -&gt; Query Editor - &gt; Max. characters per column</em></span> to larger than 50000 characters.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp100963792"></a><h2>Examples</h2><p>Using psql where gistest is your database and <code class="filename">/gisdata/data_load.sh</code> is the file to create with the shell commands to run.</p><pre class="programlisting">psql -U postgres -h localhost -d gistest -A -t \
 -c "SELECT Loader_Generate_Script(ARRAY['MA'], 'gistest')" &gt; /gisdata/data_load.sh;
</pre><p>Generate script to load up data for 2 states in Windows shell script format.</p><pre class="programlisting">SELECT loader_generate_script(ARRAY['MA','RI'], 'windows') AS result;
-- result --
set TMPDIR=\gisdata\temp\
set UNZIPTOOL="C:\Program Files\7-Zip\7z.exe"
set WGETTOOL="C:\wget\wget.exe"
set PGBIN=C:\Program Files\PostgreSQL\9.4\bin\
set PGPORT=5432
set PGHOST=localhost
set PGUSER=postgres
set PGPASSWORD=yourpasswordhere
set PGDATABASE=geocoder
set PSQL="%PGBIN%psql"
set SHP2PGSQL="%PGBIN%shp2pgsql"
cd \gisdata

cd \gisdata
%WGETTOOL% ftp://ftp2.census.gov/geo/tiger/TIGER2015/PLACE/tl_*_25_* --no-parent --relative --recursive --level=2 --accept=zip --mirror --reject=html
cd \gisdata/ftp2.census.gov/geo/tiger/TIGER2015/PLACE
:
:</pre><p>Generate sh script</p><pre class="programlisting">SELECT loader_generate_script(ARRAY['MA','RI'], 'sh') AS result;
-- result --
TMPDIR="/gisdata/temp/"
UNZIPTOOL=unzip
WGETTOOL="/usr/bin/wget"
export PGBIN=/usr/lib/postgresql/9.4/bin
export PGPORT=5432
export PGHOST=localhost
export PGUSER=postgres
export PGPASSWORD=yourpasswordhere
export PGDATABASE=geocoder
PSQL=${PGBIN}/psql
SHP2PGSQL=${PGBIN}/shp2pgsql
cd /gisdata

cd /gisdata
wget ftp://ftp2.census.gov/geo/tiger/TIGER2015/PLACE/tl_*_25_* --no-parent --relative --recursive --level=2 --accept=zip --mirror --reject=html
cd /gisdata/ftp2.census.gov/geo/tiger/TIGER2015/PLACE
rm -f ${TMPDIR}/*.*
:
:</pre></div><div class="refsection" title="See Also"><a name="idp100968144"></a><h2>See Also</h2><p><a class="xref" href="#install_tiger_geocoder_extension" title="2.8.1. Tiger Geocoder Enabling your PostGIS database: Using Extension">Section 2.8.1, “Tiger Geocoder Enabling your PostGIS database: Using Extension”</a>, <a class="xref" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a></p></div></div><div class="refentry" title="Loader_Generate_Nation_Script"><div class="refentry.separator"><hr></div><a name="Loader_Generate_Nation_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Loader_Generate_Nation_Script — Generates a shell script for the specified platform that loads in the county and state lookup tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">loader_generate_nation_script</b>(</code>text <var class="pdparam">os</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100974416"></a><h2>Description</h2><p>Generates a shell script for the specified platform that loads in the <code class="varname">county_all</code>, <code class="varname">county_all_lookup</code>, <code class="varname">state_all</code> tables into <code class="varname">tiger_data</code> schema.  These inherit respectively from the <code class="varname">county</code>, <code class="varname">county_lookup</code>, <code class="varname">state</code> tables in <code class="varname">tiger</code> schema.</p><p>It uses unzip on Linux (7-zip on Windows by default) and wget to do the downloading. It uses <a class="xref" href="#shp2pgsql_usage" title="4.4.2. shp2pgsql: Using the ESRI Shapefile Loader">Section 4.4.2, “shp2pgsql: Using the ESRI Shapefile Loader”</a> to load in the data. </p><p>It uses the following control tables <code class="varname">tiger.loader_platform</code>, <code class="varname">tiger.loader_variables</code>, and <code class="varname">tiger.loader_lookuptables</code> to control the process and different OS shell syntax variations.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">loader_variables</code> keeps track of various variables such as census site, year, data and staging schemas</p></li><li class="listitem"><p><code class="varname">loader_platform</code> profiles of various platforms and where the various executables are located.  Comes with windows and linux/unix. More can be added.</p></li><li class="listitem"><p><code class="varname">loader_lookuptables</code> each record defines a kind of table (state, county), whether to process records in it and how to load them in.  Defines the steps to import data, stage data, add, removes columns, indexes, and constraints for each.  Each table is prefixed with the state and inherits from a table in the tiger schema. e.g. creates <code class="varname">tiger_data.ma_faces</code> which inherits from <code class="varname">tiger.faces</code></p></li></ol></div><p>Availability: 2.1.0 </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>If you were running <code class="varname">tiger_2010</code> version and you want to reload as state with <code class="varname">tiger_2011</code>, you'll need to for the very first load generate and run drop statements <a class="xref" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a> before you run this script.</p></td></tr></table></div></div><div class="refsection" title="Examples"><a name="idp100987600"></a><h2>Examples</h2><p>Generate script script to load nation data Windows.</p><pre class="programlisting">SELECT loader_generate_nation_script('windows'); </pre><p>Generate script to load up data for Linux/Unix systems.</p><pre class="programlisting">SELECT loader_generate_nation_script('sh'); </pre></div><div class="refsection" title="See Also"><a name="idp100990416"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a></p></div></div><div class="refentry" title="Missing_Indexes_Generate_Script"><div class="refentry.separator"><hr></div><a name="Missing_Indexes_Generate_Script"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Missing_Indexes_Generate_Script — Finds all tables with key columns used in geocoder joins that are missing indexes on those columns and will output the SQL DDL to
            define the index for those tables.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Missing_Indexes_Generate_Script</b>(</code><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp100995664"></a><h2>Description</h2><p>Finds all tables in <code class="varname">tiger</code> and <code class="varname">tiger_data</code> schemas with key columns used in geocoder joins that are missing indexes on those columns and will output the SQL DDL to
            define the index for those tables. This is a helper function that adds new indexes needed to make queries faster that may have been missing during the load process.
            As the geocoder is improved, this function will be updated to accommodate new indexes being used. If this function outputs nothing, it means
            all your tables have what we think are the key indexes already in place.</p><p>Availability: 2.0.0</p></div><div class="refsection" title="Examples"><a name="idp100997968"></a><h2>Examples</h2><pre class="programlisting">SELECT missing_indexes_generate_script();
-- output: This was run on a database that was created before many corrections were made to the loading script ---
CREATE INDEX idx_tiger_county_countyfp ON tiger.county USING btree(countyfp);
CREATE INDEX idx_tiger_cousub_countyfp ON tiger.cousub USING btree(countyfp);
CREATE INDEX idx_tiger_edges_tfidr ON tiger.edges USING btree(tfidr);
CREATE INDEX idx_tiger_edges_tfidl ON tiger.edges USING btree(tfidl);
CREATE INDEX idx_tiger_zip_lookup_all_zip ON tiger.zip_lookup_all USING btree(zip);
CREATE INDEX idx_tiger_data_ma_county_countyfp ON tiger_data.ma_county USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_cousub_countyfp ON tiger_data.ma_cousub USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_edges_countyfp ON tiger_data.ma_edges USING btree(countyfp);
CREATE INDEX idx_tiger_data_ma_faces_countyfp ON tiger_data.ma_faces USING btree(countyfp);
        </pre></div><div class="refsection" title="See Also"><a name="idp100999504"></a><h2>See Also</h2><p><a class="xref" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a>, <a class="xref" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a></p></div></div><div class="refentry" title="Normalize_Address"><div class="refentry.separator"><hr></div><a name="Normalize_Address"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Normalize_Address — Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This function
        will work with just the lookup data packaged with the tiger_geocoder (no need for tiger census data).</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">norm_addy <b class="fsfunc">normalize_address</b>(</code>varchar  <var class="pdparam">in_address</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101006288"></a><h2>Description</h2><p>Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This is the first step in the geocoding process to
            get all addresses into normalized postal form. No other data is required aside from what is packaged with the geocoder.</p><p>This function just uses the various direction/state/suffix lookup tables preloaded with the tiger_geocoder and located in the <code class="varname">tiger</code> schema, so it doesn't need you to download tiger census data or any other additional data to make use of it.
         You may find the need to add more abbreviations or alternative namings to the various lookup tables in the  <code class="varname">tiger</code> schema.</p><p>It uses various control lookup tables located in <code class="varname">tiger</code> schema to normalize the input address.</p><p>Fields in the <code class="varname">norm_addy</code> type object returned by this function in this order where  () indicates a field required by the geocoder, [] indicates an optional field:</p><p>(address) [predirAbbrev] (streetName) [streetTypeAbbrev] [postdirAbbrev] [internal] [location] [stateAbbrev] [zip]</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">address</code> is an integer:  The street number</p></li><li class="listitem"><p><code class="varname">predirAbbrev</code> is varchar: Directional prefix of road such as N, S, E, W etc.  These are controlled using the <code class="varname">direction_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">streetName</code> varchar</p></li><li class="listitem"><p><code class="varname">streetTypeAbbrev</code> varchar abbreviated version of street type: e.g. St, Ave, Cir.  These are controlled using the <code class="varname">street_type_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">postdirAbbrev</code> varchar abbreviated directional suffice of road N, S, E, W etc. These are controlled using the <code class="varname">direction_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">internal</code> varchar internal address such as an apartment or suite number.</p></li><li class="listitem"><p><code class="varname">location</code> varchar usually a city or governing province.</p></li><li class="listitem"><p><code class="varname">stateAbbrev</code> varchar two character US State.  e.g MA, NY, MI.  These are controlled by the <code class="varname">state_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">zip</code> varchar 5-digit zipcode. e.g. 02109.</p></li><li class="listitem"><p><code class="varname">parsed</code> boolean - denotes if addess was formed from normalize process. The normalize_address function sets this to true before returning the address.</p></li></ol></div></div><div class="refsection" title="Examples"><a name="idp101023824"></a><h2>Examples</h2><p>Output select fields.  Use <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a> if you want a pretty textual output.</p><pre class="programlisting">SELECT address As orig, (g.na).streetname, (g.na).streettypeabbrev
 FROM (SELECT address, normalize_address(address) As na
        FROM addresses_to_geocode) As g;

                        orig                         |  streetname   | streettypeabbrev
-----------------------------------------------------+---------------+------------------
 28 Capen Street, Medford, MA                        | Capen         | St
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | Mount Auburn  | St
 950 Main Street, Worcester, MA 01610                | Main          | St
 529 Main Street, Boston MA, 02129                   | Main          | St
 77 Massachusetts Avenue, Cambridge, MA 02139        | Massachusetts | Ave
 25 Wizard of Oz, Walaford, KS 99912323              | Wizard of Oz  |
        </pre></div><div class="refsection" title="See Also"><a name="idp101026256"></a><h2>See Also</h2><p><a class="xref" href="#Geocode" title="Geocode">Geocode</a>, <a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a></p></div></div><div class="refentry" title="Pagc_Normalize_Address"><div class="refentry.separator"><hr></div><a name="Pagc_Normalize_Address"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Pagc_Normalize_Address — Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This function
        will work with just the lookup data packaged with the tiger_geocoder (no need for tiger census data). Requires address_standardizer extension.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">norm_addy <b class="fsfunc">pagc_normalize_address</b>(</code>varchar  <var class="pdparam">in_address</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101033040"></a><h2>Description</h2><p>Given a textual street address, returns a composite <code class="varname">norm_addy</code> type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields.  This is the first step in the geocoding process to
            get all addresses into normalized postal form. No other data is required aside from what is packaged with the geocoder.</p><p>This function just uses the various pagc_* lookup tables preloaded with the tiger_geocoder and located in the <code class="varname">tiger</code> schema, so it doesn't need you to download tiger census data or any other additional data to make use of it.
         You may find the need to add more abbreviations or alternative namings to the various lookup tables in the  <code class="varname">tiger</code> schema.</p><p>It uses various control lookup tables located in <code class="varname">tiger</code> schema to normalize the input address.</p><p>Fields in the <code class="varname">norm_addy</code> type object returned by this function in this order where  () indicates a field required by the geocoder, [] indicates an optional field:</p><p>There are slight variations in casing and formatting over the <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>.</p><p>Availability: 2.1.0</p><p><span class="inlinemediaobject"><img src="images/check.png"></span> This method needs address_standardizer extension.</p><p>(address) [predirAbbrev] (streetName) [streetTypeAbbrev] [postdirAbbrev] [internal] [location] [stateAbbrev] [zip]</p><p>The native standardaddr of address_standardizer extension is at this time a bit richer than norm_addy since its designed to support international addresses (including country).  standardaddr equivalent fields are:</p><p>house_num,predir, name, suftype, sufdir, unit, city, state, postcode</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">address</code> is an integer:  The street number</p></li><li class="listitem"><p><code class="varname">predirAbbrev</code> is varchar: Directional prefix of road such as N, S, E, W etc.  These are controlled using the <code class="varname">direction_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">streetName</code> varchar</p></li><li class="listitem"><p><code class="varname">streetTypeAbbrev</code> varchar abbreviated version of street type: e.g. St, Ave, Cir.  These are controlled using the <code class="varname">street_type_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">postdirAbbrev</code> varchar abbreviated directional suffice of road N, S, E, W etc. These are controlled using the <code class="varname">direction_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">internal</code> varchar internal address such as an apartment or suite number.</p></li><li class="listitem"><p><code class="varname">location</code> varchar usually a city or governing province.</p></li><li class="listitem"><p><code class="varname">stateAbbrev</code> varchar two character US State.  e.g MA, NY, MI.  These are controlled by the <code class="varname">state_lookup</code> table.</p></li><li class="listitem"><p><code class="varname">zip</code> varchar 5-digit zipcode. e.g. 02109.</p></li><li class="listitem"><p><code class="varname">parsed</code> boolean - denotes if addess was formed from normalize process. The normalize_address function sets this to true before returning the address.</p></li></ol></div></div><div class="refsection" title="Examples"><a name="idp101061968"></a><h2>Examples</h2><p>Single call example</p><pre class="programlisting">
SELECT addy.*
FROM pagc_normalize_address('9000 E ROO ST STE 999, Springfield, CO') AS addy;


 address | predirabbrev | streetname | streettypeabbrev | postdirabbrev | internal  |  location   | stateabbrev | zip | parsed
---------+--------------+------------+------------------+---------------+-----------+-------------+-------------+-----+--------
    9000 | E            | ROO        | ST               |               | SUITE 999 | SPRINGFIELD | CO          |     | t</pre><p>Batch call.  There are currently speed issues with the way postgis_tiger_geocoder wraps the address_standardizer.  These will hopefully
be resolved in later editions.  To work around them, if you need speed for batch geocoding to call generate a normaddy  in batch mode, you are encouraged
to directly call the address_standardizer standardize_address function as shown below which is similar exercise to what we did in <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a> that uses data created in <a class="xref" href="#Geocode" title="Geocode">Geocode</a>.</p><pre class="programlisting">WITH g AS (SELECT address, ROW((sa).house_num, (sa).predir, (sa).name
  , (sa).suftype, (sa).sufdir, (sa).unit , (sa).city, (sa).state, (sa).postcode, true)::norm_addy As na
 FROM (SELECT address, standardize_address('tiger.pagc_lex'
       , 'tiger.pagc_gaz'
       , 'tiger.pagc_rules', address) As sa
        FROM addresses_to_geocode) As g)
SELECT address As orig, (g.na).streetname, (g.na).streettypeabbrev
 FROM  g;

 orig                                                |  streetname   | streettypeabbrev
-----------------------------------------------------+---------------+------------------
 529 Main Street, Boston MA, 02129                   | MAIN          | ST
 77 Massachusetts Avenue, Cambridge, MA 02139        | MASSACHUSETTS | AVE
 25 Wizard of Oz, Walaford, KS 99912323              | WIZARD OF     |
 26 Capen Street, Medford, MA                        | CAPEN         | ST
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | MOUNT AUBURN  | ST
 950 Main Street, Worcester, MA 01610                | MAIN          | ST</pre></div><div class="refsection" title="See Also"><a name="idp101065680"></a><h2>See Also</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>, <a class="xref" href="#Geocode" title="Geocode">Geocode</a></p></div></div><div class="refentry" title="Pprint_Addy"><div class="refentry.separator"><hr></div><a name="Pprint_Addy"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Pprint_Addy — Given a <code class="varname">norm_addy</code> composite type object, returns a pretty print representation of it. Usually used in conjunction with normalize_address.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">varchar <b class="fsfunc">pprint_addy</b>(</code>norm_addy  <var class="pdparam">in_addy</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101072464"></a><h2>Description</h2><p>Given a <code class="varname">norm_addy</code> composite type object, returns a pretty print representation of it. No other data is required aside from what is packaged with the geocoder.</p><p>Usually used in conjunction with <a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a>.</p></div><div class="refsection" title="Examples"><a name="idp101074896"></a><h2>Examples</h2><p>Pretty print a single address</p><pre class="programlisting">SELECT pprint_addy(normalize_address('202 East Fremont Street, Las Vegas, Nevada 89101')) As pretty_address;
            pretty_address
---------------------------------------
 202 E Fremont St, Las Vegas, NV 89101
        </pre><p>Pretty print address a table of addresses</p><pre class="programlisting">SELECT address As orig, pprint_addy(normalize_address(address)) As pretty_address
        FROM addresses_to_geocode;

                        orig                         |              pretty_address
-----------------------------------------------------+-------------------------------------------
 529 Main Street, Boston MA, 02129                   | 529 Main St, Boston MA, 02129
 77 Massachusetts Avenue, Cambridge, MA 02139        | 77 Massachusetts Ave, Cambridge, MA 02139
 28 Capen Street, Medford, MA                        | 28 Capen St, Medford, MA
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | 124 Mount Auburn St, Cambridge, MA 02138
 950 Main Street, Worcester, MA 01610                | 950 Main St, Worcester, MA 01610</pre></div><div class="refsection" title="See Also"><a name="idp101077712"></a><h2>See Also</h2><p><a class="xref" href="#Normalize_Address" title="Normalize_Address">Normalize_Address</a></p></div></div><div class="refentry" title="Reverse_Geocode"><div class="refentry.separator"><hr></div><a name="Reverse_Geocode"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Reverse_Geocode — Takes a geometry point in a known spatial ref sys and returns a record containing an array of theoretically possible addresses and an array of cross streets.  If include_strnum_range = true, includes the street range in the cross streets.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">record <b class="fsfunc">Reverse_Geocode</b>(</code>geometry  <var class="pdparam">pt</var>, boolean  <var class="pdparam">include_strnum_range=false</var>, geometry[]  <var class="pdparam">OUT intpt</var>, norm_addy[]  <var class="pdparam">OUT addy</var>, varchar[]  <var class="pdparam">OUT street</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101096144"></a><h2>Description</h2><p>Takes a geometry point in a known spatial ref and returns a record containing an array of theoretically possible addresses and an array of cross streets.  If include_strnum_range = true, includes the street range in the cross streets.
        include_strnum_range defaults to false if not passed in. Addresses are sorted according to which road a point is closest to so first address is most likely the right one.</p><p>Why do we say theoretical instead of actual addresses.  The Tiger data doesn't have real addresses, but just street ranges.  As such the theoretical address is an interpolated address based on the
        street ranges. Like for example interpolating one of my addresses returns a 26 Court St. and 26 Court Sq., though there is no such place as 26 Court Sq.  This is because a point may be at a corner of 2
        streets and thus the logic interpolates along both streets.  The logic also assumes addresses are equally spaced along a street, which of course is wrong since you can have a municipal building taking up
            a good chunk of the street range and the rest of the buildings are clustered at the end.</p><p>Note: Hmm this function relies on Tiger data.  If you have not loaded data covering the region of this point, then hmm you will get a record filled with NULLS.</p><p> Returned elements of the record are as follows:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">intpt</code> is an array of points:  These are the center line points on the street closest to the input point. There are as many points as there are addresses.</p></li><li class="listitem"><p><code class="varname">addy</code> is an array of norm_addy (normalized addresses):  These are an array of possible addresses that fit the input point.  The first one in the array is most likely.
                Generally there should be only one, except in the case when a point is at the corner of 2 or 3 streets, or the point is somewhere on the road and not off to the side.</p></li><li class="listitem"><p><code class="varname">street</code> an array of varchar:  These are cross streets (or the street) (streets that intersect or are the street the point is projected to be on).</p></li></ol></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Examples"><a name="idp101107024"></a><h2>Examples</h2><p>Example of a point at the corner of two streets, but closest to one.  This is approximate location of MIT: 77 Massachusetts Ave, Cambridge, MA 02139
            Note that although we don't have 3 streets, PostgreSQL will just return null for entries above our upper bound so safe to use.  This includes street ranges</p><pre class="programlisting">SELECT pprint_addy(r.addy[1]) As st1, pprint_addy(r.addy[2]) As st2, pprint_addy(r.addy[3]) As st3,
            array_to_string(r.street, ',') As cross_streets
        FROM reverse_geocode(ST_GeomFromText('POINT(-71.093902 42.359446)',4269),true) As r;

 result
 ------
      st1                                  | st2 | st3 |               cross_streets
-------------------------------------------+-----+-----+----------------------------------------------
 67 Massachusetts Ave, Cambridge, MA 02139 |     |     | 67 - 127 Massachusetts Ave,32 - 88 Vassar St</pre><p>Here we choose not to include the address ranges for the cross streets and picked a location
really really close to a corner of 2 streets thus could be known by two different addresses.</p><pre class="programlisting">SELECT pprint_addy(r.addy[1]) As st1, pprint_addy(r.addy[2]) As st2,
pprint_addy(r.addy[3]) As st3, array_to_string(r.street, ',') As cross_str
FROM reverse_geocode(ST_GeomFromText('POINT(-71.06941 42.34225)',4269)) As r;

result
--------
               st1               |               st2               | st3 | cross_str
---------------------------------+---------------------------------+-----+------------------------
 5 Bradford St, Boston, MA 02118 | 49 Waltham St, Boston, MA 02118 |     | Waltham St
</pre><p>For this one we reuse our geocoded example from <a class="xref" href="#Geocode" title="Geocode">Geocode</a> and we only want the primary address and at most 2 cross streets.</p><pre class="programlisting">SELECT actual_addr, lon, lat, pprint_addy((rg).addy[1]) As int_addr1,
    (rg).street[1] As cross1, (rg).street[2] As cross2
FROM (SELECT address As actual_addr, lon, lat,
    reverse_geocode( ST_SetSRID(ST_Point(lon,lat),4326) ) As rg
    FROM addresses_to_geocode WHERE rating &gt; -1) As foo;

                     actual_addr                     |    lon    |   lat    |                 int_addr1                 |     cross1      |   cross2
-----------------------------------------------------+-----------+----------+-------------------------------------------+-----------------+------------
 529 Main Street, Boston MA, 02129                   | -71.07181 | 42.38359 | 527 Main St, Boston, MA 02129             | Medford St      |
 77 Massachusetts Avenue, Cambridge, MA 02139        | -71.09428 | 42.35988 | 77 Massachusetts Ave, Cambridge, MA 02139 | Vassar St       |
 26 Capen Street, Medford, MA                        | -71.12377 | 42.41101 | 9 Edison Ave, Medford, MA 02155           | Capen St        | Tesla Ave
 124 Mount Auburn St, Cambridge, Massachusetts 02138 | -71.12304 | 42.37328 | 3 University Rd, Cambridge, MA 02138      | Mount Auburn St |
 950 Main Street, Worcester, MA 01610                | -71.82368 | 42.24956 | 3 Maywood St, Worcester, MA 01603         | Main St         | Maywood Pl
</pre></div><div class="refsection" title="See Also"><a name="idp101111248"></a><h2>See Also</h2><p><a class="xref" href="#Pprint_Addy" title="Pprint_Addy">Pprint_Addy</a>, <a class="xref" href="#Geocode" title="Geocode">Geocode</a></p></div></div><div class="refentry" title="Topology_Load_Tiger"><div class="refentry.separator"><hr></div><a name="Topology_Load_Tiger"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Topology_Load_Tiger — Loads a defined region of tiger data into a PostGIS Topology and transforming the tiger data to spatial reference of the topology
            and snapping to the precision tolerance of the topology.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Topology_Load_Tiger</b>(</code>varchar  <var class="pdparam">topo_name</var>, varchar  <var class="pdparam">region_type</var>, varchar  <var class="pdparam">region_id</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101119696"></a><h2>Description</h2><p>Loads a defined region of tiger data into a PostGIS Topology. The faces, nodes and edges are transformed to the spatial reference system of the target topology and points are snapped to the tolerance of the target topology. The created faces, nodes, edges maintain the same ids as the original Tiger data faces, nodes, edges
        so that datasets can be in the future be more easily reconciled with tiger data. Returns summary details about the process.</p><p>This would be useful for example for redistricting data where you require the newly formed polygons to follow the center lines of streets and for the resulting polygons not to overlap.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>This function relies on Tiger data as well as the installation of the PostGIS topology module.  For more information, refer to <a class="xref" href="#Topology" title="Chapter 11. Topology">Chapter 11, <i>Topology</i></a> and <a class="xref" href="#installation_configuration" title="2.4.1. Configuration">Section 2.4.1, “Configuration”</a>.  If you have not loaded data covering the region of interest, then no topology records will be created. This function will also fail if you have not created a topology using the topology functions.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Most topology validation errors are a result of tolerance issues where after transformation the edges points don't quite line up or overlap.
        To remedy the situation you may want to increase or lower the precision if you get topology validation failures.</p></td></tr></table></div><p> Required arguments:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="varname">topo_name</code> The name of an existing PostGIS topology to load data into.</p></li><li class="listitem"><p><code class="varname">region_type</code> The type of bounding region. Currently only <code class="varname">place</code> and <code class="varname">county</code> are supported.  Plan is to have several more.  This is the table to look into to define the region bounds.  e.g <code class="varname">tiger.place</code>, <code class="varname">tiger.county</code></p></li><li class="listitem"><p><code class="varname">region_id</code> This is what TIGER calls the geoid.  It is the unique identifier of the region in the table.  For place it is the  <code class="varname">plcidfp</code> column in <code class="varname">tiger.place</code>.  For county it is the <code class="varname">cntyidfp</code> column in <code class="varname">tiger.county</code>
            </p></li></ol></div><p>Availability: 2.0.0 </p></div><div class="refsection" title="Example: Boston, Massachusetts Topology"><a name="idp101131216"></a><h2>Example: Boston, Massachusetts Topology</h2><p>Create a topology for Boston, Massachusetts in Mass State Plane Feet (2249)
          with tolerance 0.25 feet and then load in Boston city tiger faces, edges, nodes.</p><pre class="programlisting">SELECT topology.CreateTopology('topo_boston', 2249, 0.25);
createtopology
--------------
   15
-- 60,902 ms ~ 1 minute on windows 7 desktop running 9.1 (with 5 states tiger data loaded)
SELECT tiger.topology_load_tiger('topo_boston', 'place', '2507000');
-- topology_loader_tiger --
29722 edges holding in temporary. 11108 faces added. 1875 edges of faces added.  20576 nodes added.
19962 nodes contained in a face.  0 edge start end corrected.  31597 edges added.

-- 41 ms --
SELECT topology.TopologySummary('topo_boston');
 -- topologysummary--
Topology topo_boston (15), SRID 2249, precision 0.25
20576 nodes, 31597 edges, 11109 faces, 0 topogeoms in 0 layers

-- 28,797 ms to validate yeh returned no errors --
SELECT * FROM
    topology.ValidateTopology('topo_boston');

       error       |   id1    |    id2
-------------------+----------+-----------
      </pre></div><div class="refsection" title="Example: Suffolk, Massachusetts Topology"><a name="idp101132880"></a><h2>Example: Suffolk, Massachusetts Topology</h2><p>Create a topology for Suffolk, Massachusetts in Mass State Plane Meters (26986)
          with tolerance 0.25 meters and then load in Suffolk county tiger faces, edges, nodes.</p><pre class="programlisting">SELECT topology.CreateTopology('topo_suffolk', 26986, 0.25);
-- this took 56,275 ms ~ 1 minute on Windows 7 32-bit with 5 states of tiger loaded
-- must have been warmed up after loading boston
SELECT tiger.topology_load_tiger('topo_suffolk', 'county', '25025');
-- topology_loader_tiger --
 36003 edges holding in temporary. 13518 faces added. 2172 edges of faces added.
 24761 nodes added.  24075 nodes contained in a face.  0 edge start end corrected.  38175 edges added.
-- 31 ms --
SELECT topology.TopologySummary('topo_suffolk');
 -- topologysummary--
 Topology topo_suffolk (14), SRID 26986, precision 0.25
24761 nodes, 38175 edges, 13519 faces, 0 topogeoms in 0 layers

-- 33,606 ms to validate --
SELECT * FROM
    topology.ValidateTopology('topo_suffolk');

       error       |   id1    |    id2
-------------------+----------+-----------
 coincident nodes  | 81045651 |  81064553
 edge crosses node | 81045651 |  85737793
 edge crosses node | 81045651 |  85742215
 edge crosses node | 81045651 | 620628939
 edge crosses node | 81064553 |  85697815
 edge crosses node | 81064553 |  85728168
 edge crosses node | 81064553 |  85733413
      </pre></div><div class="refsection" title="See Also"><a name="idp101134544"></a><h2>See Also</h2><p><a class="xref" href="#CreateTopology" title="CreateTopology">CreateTopology</a>, <a class="xref" href="#CreateTopoGeom" title="CreateTopoGeom">CreateTopoGeom</a>, <a class="xref" href="#TopologySummary" title="TopologySummary">TopologySummary</a>, <a class="xref" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a></p></div></div><div class="refentry" title="Set_Geocode_Setting"><div class="refentry.separator"><hr></div><a name="Set_Geocode_Setting"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>Set_Geocode_Setting — Sets a setting that affects behavior of geocoder functions.</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><p><code class="funcdef">text <b class="fsfunc">Set_Geocode_Setting</b>(</code>text  <var class="pdparam"> setting_name</var>, text  <var class="pdparam"> setting_value</var><code>)</code>;</p></div></div><div class="refsection" title="Description"><a name="idp101142736"></a><h2>Description</h2><p>Sets value of specific setting stored in <code class="varname">tiger.geocode_settings</code> table.  Settings allow you to toggle debugging of functions.  Later plans will be to control rating with settings. Current list of settings are listed in <a class="xref" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a>.</p><p>Availability: 2.1.0</p></div><div class="refsection" title="Example return debugging setting"><a name="idp101145168"></a><h2>Example return debugging setting</h2><p>If you run <a class="xref" href="#Geocode" title="Geocode">Geocode</a> when this function is true, the NOTICE log will output timing and queries.</p><pre class="programlisting">SELECT set_geocode_setting('debug_geocode_address', 'true') As result;
result
---------
true</pre></div><div class="refsection" title="See Also"><a name="idp101147472"></a><h2>See Also</h2><p><a class="xref" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a></p></div></div></div></div><div class="chapter" title="Chapter 14. PostGIS Special Functions Index"><div class="titlepage"><div><div><h2 class="title"><a name="PostGIS_Special_Functions_Index"></a>Chapter 14. PostGIS Special Functions Index</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#PostGIS_Aggregate_Functions">14.1. PostGIS Aggregate Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Window_Functions">14.2. PostGIS Window Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_SQLMM_Functions">14.3. PostGIS SQL-MM Compliant Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_GeographyFunctions">14.4. PostGIS Geography Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_RasterFunctions">14.5. PostGIS Raster Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Geometry_DumpFunctions">14.6. PostGIS Geometry / Geography / Raster Dump Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_BoxFunctions">14.7. PostGIS Box Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_3D_Functions">14.8. PostGIS Functions that support 3D</a></span></dt><dt><span class="sect1"><a href="#PostGIS_Curved_GeometryFunctions">14.9. PostGIS Curved Geometry Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_PS_GeometryFunctions">14.10. PostGIS Polyhedral Surface Support Functions</a></span></dt><dt><span class="sect1"><a href="#PostGIS_TypeFunctionMatrix">14.11. PostGIS Function Support Matrix</a></span></dt><dt><span class="sect1"><a href="#NewFunctions">14.12. New, Enhanced or changed PostGIS Functions</a></span></dt><dd><dl><dt><span class="sect2"><a href="#NewFunctions_2_3">14.12.1. PostGIS Functions new or enhanced in 2.3</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_2">14.12.2. PostGIS Functions new or enhanced in 2.2</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_2">14.12.3. PostGIS functions breaking changes in 2.2</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_1">14.12.4. PostGIS Functions new or enhanced in 2.1</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_1">14.12.5. PostGIS functions breaking changes in 2.1</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0">14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0_Changed">14.12.7. PostGIS Functions changed behavior in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_5">14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_4">14.12.9. PostGIS Functions new, behavior changed, or enhanced in 1.4</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_3">14.12.10. PostGIS Functions new in 1.3</a></span></dt></dl></dd></dl></div><div class="sect1" title="14.1. PostGIS Aggregate Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Aggregate_Functions"></a>14.1. PostGIS Aggregate Functions</h2></div></div></div><p>The functions given below are spatial aggregate functions provided with PostGIS that can be used just like any other sql aggregate function such as sum, average.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - an aggregate function that returns the box3D bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a> - Aggregate. Constructs an array of geometries.</li><li class="listitem"><a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a> - Aggregate. Returns an array with the connected components of a set of geometries</li><li class="listitem"><a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a> - Aggregate. Returns an array of GeometryCollections, where each GeometryCollection represents a set of geometries separated by no more than the specified distance.</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - Return a specified ST_Geometry value from a collection of other geometries.</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - an aggregate function that returns the bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - Creates a Linestring from point, multipoint, or line geometries.</li><li class="listitem"><a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a> - Same as ST_Union, only memory-friendly (uses less memory and more processor time).</li><li class="listitem"><a class="link" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a> - Aggregate. Creates a GeometryCollection containing possible polygons formed from the constituent linework of a set of geometries.</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - Returns true if rasters have same skew, scale, spatial ref, and offset (pixels can be put on same grid without cutting into pixels) and false if they don't with notice detailing issue.</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - Returns a geometry that represents the point set union of the Geometries.</li><li class="listitem"><a class="link" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> - Returns a topoelementarray for a set of element_id, type arrays (topoelements)</li></ul></div></div><div class="sect1" title="14.2. PostGIS Window Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Window_Functions"></a>14.2. PostGIS Window Functions</h2></div></div></div><p>The functions given below are spatial window functions provided with PostGIS that can be used just like any other sql window function such as row_numer(), lead(), lag(). All these require an SQL OVER() clause.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - Windowing function that returns integer id for the cluster each input geometry is in based on 2D implementation of Density-based spatial clustering of applications with noise (DBSCAN) algorithm.</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - Windowing function that returns integer id for the cluster each input geometry is in.</li></ul></div></div><div class="sect1" title="14.3. PostGIS SQL-MM Compliant Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_SQLMM_Functions"></a>14.3. PostGIS SQL-MM Compliant Functions</h2></div></div></div><p>The functions given below are PostGIS functions that conform to the SQL/MM 3 standard</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>SQL-MM defines the default SRID of all geometry constructors as 0.
			  PostGIS uses a default SRID of -1.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units.
   
     
   
  This method implements the SQL/MM specification. SQL-MM ?</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in projected units.
   
     
   
  This method implements the SQL/MM specification. SQL-MM ?</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - Returns TRUE if the Geometries "spatially intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area). With SFCGAL backend enabled also supports TINS
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: ?</li><li class="listitem"><a class="link" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a> - Add a new edge and, if in doing so it splits a face, modify the original face and add a new face.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.13</li><li class="listitem"><a class="link" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a> - Add a new edge and, if in doing so it splits a face, delete the original face and replace it with two new faces.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.12</li><li class="listitem"><a class="link" href="#ST_AddIsoEdge" title="ST_AddIsoEdge">ST_AddIsoEdge</a> - Adds an isolated edge defined by geometry alinestring to a topology connecting two existing isolated nodes anode and anothernode and returns the edge id of the new edge.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.4</li><li class="listitem"><a class="link" href="#ST_AddIsoNode" title="ST_AddIsoNode">ST_AddIsoNode</a> - Adds an isolated node to a face in a topology and returns the nodeid of the new node. If face is null, the node is still created.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X+1.3.1</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - Returns the area of the surface if it is a Polygon or MultiPolygon. For geometry, a 2D Cartesian area is determined with units specified by the SRID. For geography, area is determined on a curved surface with units in square meters.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.1.2, 9.5.3</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.37</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.25</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - Returns the closure of the combinatorial boundary of this Geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.14</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - (T)Returns a geometry covering all points within a given distancefrom the input geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.17</li><li class="listitem"><a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a> - Returns the geometric center of a geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.1.4, 9.5.5</li><li class="listitem"><a class="link" href="#ST_ChangeEdgeGeom" title="ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a> - Changes the shape of an edge without affecting the topology structure.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details X.3.6</li><li class="listitem"><a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a> - Returns true if and only if no points of B lie in the exterior of A, and at least one point of the interior of B lies in the interior of A.
   
     
   
  This method implements the SQL/MM specification.	SQL-MM 3: 5.1.31</li><li class="listitem"><a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - The convex hull of a geometry represents the minimum convex geometry that encloses all geometries within the set.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.16</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - Return the coordinate dimension of the ST_Geometry value.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.3</li><li class="listitem"><a class="link" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a> - Adds a collection of geometries to a given empty topology and returns a message detailing success.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details -- X.3.18</li><li class="listitem"><a class="link" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a> - Returns TRUE if the supplied geometries have some, but not all, interior points in common.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.29</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - Converts a CIRCULARSTRING/CURVEPOLYGON to a LINESTRING/POLYGON
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.7</li><li class="listitem"><a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a> - Returns a geometry that represents that part of geometry A that does not intersect with geometry B.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.20</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - The inherent dimension of this Geometry object, which must be less than or equal to the coordinate dimension.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.2</li><li class="listitem"><a class="link" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - Returns TRUE if the Geometries do not "spatially intersect" - if they do not share any space together.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.26</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - For geometry type Returns the 2D Cartesian distance between two geometries in projected units (based on spatial ref). For geography type defaults to return minimum geodesic distance between two geographies in meters.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.23</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - Returns the last point of a LINESTRING or CIRCULARLINESTRING geometry as a POINT.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.4</li><li class="listitem"><a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a> - Returns a geometry representing the double precision (float8) bounding box of the supplied geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.15</li><li class="listitem"><a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a> - Returns true if the given geometries represent the same geometry. Directionality is ignored.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.24</li><li class="listitem"><a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a> - Returns a line string representing the exterior ring of the POLYGON geometry. Return NULL if the geometry is not a polygon. Will not work with MULTIPOLYGON
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.2.3, 8.3.3</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - Return a specified ST_Geometry value from GML representation. This is an alias name for ST_GeomFromGML
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.50 (except for curves support).</li><li class="listitem"><a class="link" href="#ST_GeomCollFromText" title="ST_GeomCollFromText">ST_GeomCollFromText</a> - Makes a collection Geometry from collection WKT with the given SRID. If SRID is not give, it defaults to 0.
   
     
   
  This method implements the SQL/MM specification.</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - Return a specified ST_Geometry value from Well-Known Text representation (WKT).
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.40</li><li class="listitem"><a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> - Creates a geometry instance from a Well-Known Binary geometry representation (WKB) and optional SRID.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.41</li><li class="listitem"><a class="link" href="#ST_GeometryFromText" title="ST_GeometryFromText">ST_GeometryFromText</a> - Return a specified ST_Geometry value from Well-Known Text representation (WKT). This is an alias name for ST_GeomFromText
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.40</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Return the 1-based Nth geometry if the geometry is a GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE Otherwise, return NULL.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 9.1.5</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - Return the geometry type of the ST_Geometry value.
   
     
   
  This method implements the SQL/MM specification.	SQL-MM 3: 5.1.4</li><li class="listitem"><a class="link" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a> - Returns a set of ordered edges that bound aface.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.5</li><li class="listitem"><a class="link" href="#ST_GetFaceGeometry" title="ST_GetFaceGeometry">ST_GetFaceGeometry</a> - Returns the polygon in the given topology with the specified face id.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.16</li><li class="listitem"><a class="link" href="#ST_InitTopoGeo" title="ST_InitTopoGeo">ST_InitTopoGeo</a> - Creates a new topology schema and registers this new schema in the topology.topology table and details summary of process.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3 Topo-Geo and Topo-Net 3: Routine Details: X.3.17</li><li class="listitem"><a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a> - Return the Nth interior linestring ring of the polygon geometry. Return NULL if the geometry is not a polygon or the given N is out of range.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.2.6, 8.3.5</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - (T)Returns a geometry that represents the shared portion of geomA and geomB.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.18</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - Returns TRUE if the Geometries/Geography "spatially intersect in 2D" - (share any portion of space) and FALSE if they don't (they are Disjoint). For geography -- tolerance is 0.00001 meters (so any points that close are considered to intersect)
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.27</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - Returns TRUE if the LINESTRING's start and end points are coincident. For Polyhedral surface is closed (volumetric).
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.5, 9.3.3</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - Returns true if this Geometry is an empty geometrycollection, polygon, point etc.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.7</li><li class="listitem"><a class="link" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a> - Returns TRUE if this LINESTRING is both closed and simple.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.6</li><li class="listitem"><a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a> - Returns (TRUE) if this Geometry has no anomalous geometric points, such as self intersection or self tangency.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.8</li><li class="listitem"><a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a> - Returns true if the ST_Geometry is well formed.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.9</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - Returns the 2D length of the geometry if it is a LineString or MultiLineString. geometry are in units of spatial reference and geography are in meters (default spheroid)
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.2, 9.3.4</li><li class="listitem"><a class="link" href="#ST_LineFromText" title="ST_LineFromText">ST_LineFromText</a> - Makes a Geometry from WKT representation with the given SRID. If SRID is not given, it defaults to 0.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.2.8</li><li class="listitem"><a class="link" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a> - Makes a LINESTRING from WKB with the given SRID
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.2.9</li><li class="listitem"><a class="link" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a> - Makes a geometry from WKB with the given SRID.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.2.9</li><li class="listitem"><a class="link" href="#ST_M" title="ST_M">ST_M</a> - Return the M coordinate of the point, or NULL if not available. Input must be a point.
   
     
   
  This method implements the SQL/MM specification.</li><li class="listitem"><a class="link" href="#ST_MLineFromText" title="ST_MLineFromText">ST_MLineFromText</a> - Return a specified ST_MultiLineString value from WKT representation.
   
     
   
  This method implements the SQL/MM specification.SQL-MM 3: 9.4.4</li><li class="listitem"><a class="link" href="#ST_MPointFromText" title="ST_MPointFromText">ST_MPointFromText</a> - Makes a Geometry from WKT with the given SRID. If SRID is not give, it defaults to 0.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 9.2.4</li><li class="listitem"><a class="link" href="#ST_MPolyFromText" title="ST_MPolyFromText">ST_MPolyFromText</a> - Makes a MultiPolygon Geometry from WKT with the given SRID. If SRID is not give, it defaults to 0.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 9.6.4</li><li class="listitem"><a class="link" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a> - Heal two edges by deleting the node connecting them, modifying the first edgeand deleting the second edge. Returns the id of the deleted node.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</li><li class="listitem"><a class="link" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a> - Split an edge by creating a new node along an existing edge, modifying the original edge and adding a new edge.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</li><li class="listitem"><a class="link" href="#ST_MoveIsoNode" title="ST_MoveIsoNode">ST_MoveIsoNode</a> - Moves an isolated node in a topology from one point to another. If new apoint geometry exists as a node an error is thrown. REturns description of move.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X.3.2</li><li class="listitem"><a class="link" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a> - Heal two edges by deleting the node connecting them, deleting both edges,and replacing them with an edge whose direction is the same as the firstedge provided.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.9</li><li class="listitem"><a class="link" href="#ST_NewEdgesSplit" title="ST_NewEdgesSplit">ST_NewEdgesSplit</a> - Split an edge by creating a new node along an existing edge, deleting the original edge and replacing it with two new edges. Returns the id of the new node created that joins the new edges.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Net Routines:  X.3.8</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the number of geometries, for single geometries will return 1, otherwise return NULL.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 9.1.4</li><li class="listitem"><a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> - Return the number of interior rings of a polygon geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.2.5</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - Return the number of faces on a Polyhedral Surface. Will return null for non-polyhedral geometries.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: ?</li><li class="listitem"><a class="link" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a> - Return the number of points in an ST_LineString or ST_CircularString value.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.2.4</li><li class="listitem"><a class="link" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a> - Returns true if the given geometries represent the same geometry and points are in the same directional order.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.43</li><li class="listitem"><a class="link" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - Returns TRUE if the Geometries share space, are of the same dimension, but are not completely contained by each other.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.32</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - Return the 1-based Nth geometry (face) if the geometry is a POLYHEDRALSURFACE, POLYHEDRALSURFACEM. Otherwise, return NULL.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: ?</li><li class="listitem"><a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a> - Return the length measurement of the boundary of an ST_Surface or ST_MultiSurface geometry or geography. (Polygon, MultiPolygon). geometry measurement is in units of spatial reference and geography is in meters.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.1.3, 9.5.4</li><li class="listitem"><a class="link" href="#ST_Point" title="ST_Point">ST_Point</a> - Returns an ST_Point with the given coordinate values. OGC alias for ST_MakePoint.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 6.1.2</li><li class="listitem"><a class="link" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a> - Makes a point Geometry from WKT with the given SRID. If SRID is not given, it defaults to unknown.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 6.1.8</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - Makes a geometry from WKB with the given SRID
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 6.1.9</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - Return the Nth point in the first LineString or circular LineString in the geometry. Negative values are counted backwards from the end of the LineString. Returns NULL if there is no linestring in the geometry.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.2.5, 7.3.5</li><li class="listitem"><a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a> - Returns a POINT guaranteed to lie on the surface.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.1.5, 9.5.6.
		 According to the specs, ST_PointOnSurface works for surface geometries (POLYGONs, MULTIPOLYGONS, CURVED POLYGONS).  So PostGIS seems to be extending what
		 the spec allows here.  Most databases Oracle,DB II, ESRI SDE seem to only support this function for surfaces.  SQL Server 2008 like PostGIS supports for all common geometries.</li><li class="listitem"><a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a> - Returns a polygon built from the specified linestring and SRID.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.3.2</li><li class="listitem"><a class="link" href="#ST_PolygonFromText" title="ST_PolygonFromText">ST_PolygonFromText</a> - Makes a Geometry from WKT with the given SRID. If SRID is not give, it defaults to 0.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 8.3.6</li><li class="listitem"><a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a> - Returns true if this Geometry is spatially related to anotherGeometry, by testing for intersections between the Interior, Boundary and Exterior of the two geometries as specified by the values in the intersectionMatrixPattern. If no intersectionMatrixPattern is passed in, then returns the maximum intersectionMatrixPattern that relates the 2 geometries.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.25</li><li class="listitem"><a class="link" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a> - Removes an edge and, if the removed edge separated two faces,delete one of the them and modify the other to take the space of both.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.15</li><li class="listitem"><a class="link" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a> - Removes an edge and, if the removed edge separated two faces,delete the original faces and replace them with a new face.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X.3.14</li><li class="listitem"><a class="link" href="#ST_RemoveIsoNode" title="ST_RemoveIsoNode">ST_RemoveIsoNode</a> - Removes an isolated node and returns description of action. If the node is not isolated (is start or end of an edge), then an exception is thrown.
   
     
   
  This method implements the SQL/MM specification. SQL-MM: Topo-Geo and Topo-Net 3: Routine Details:  X+1.3.3</li><li class="listitem"><a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a> - Returns the spatial reference identifier for the ST_Geometry as defined in spatial_ref_sys table.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.5</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - Returns the first point of a LINESTRING geometry as a POINT.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 7.1.3</li><li class="listitem"><a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> - Returns a geometry that represents the portions of A and B that do not intersect. It is called a symmetric difference because ST_SymDifference(A,B) = ST_SymDifference(B,A).
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.21</li><li class="listitem"><a class="link" href="#ST_Touches" title="ST_Touches">ST_Touches</a> - Returns TRUE if the geometries have at least one point in common, but their interiors do not intersect.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.28</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - Return a new geometry with its coordinates transformed to a different spatial reference.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.6</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - Returns a geometry that represents the point set union of the Geometries.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.19
		the z-index (elevation) when polygons are involved.</li><li class="listitem"><a class="link" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a> - Return a specified ST_Geometry value from Well-Known Binary representation (WKB). This is an alias name for ST_GeomFromWKB that takes no srid
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.36</li><li class="listitem"><a class="link" href="#ST_WKTToSQL" title="ST_WKTToSQL">ST_WKTToSQL</a> - Return a specified ST_Geometry value from Well-Known Text representation (WKT). This is an alias name for ST_GeomFromText
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.34</li><li class="listitem"><a class="link" href="#ST_Within" title="ST_Within">ST_Within</a> - Returns true if the geometry A is completely inside geometry B
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 5.1.30</li><li class="listitem"><a class="link" href="#ST_X" title="ST_X">ST_X</a> - Return the X coordinate of the point, or NULL if not available. Input must be a point.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 6.1.3</li><li class="listitem"><a class="link" href="#ST_Y" title="ST_Y">ST_Y</a> - Return the Y coordinate of the point, or NULL if not available. Input must be a point.
   
     
   
  This method implements the SQL/MM specification. SQL-MM 3: 6.1.4</li><li class="listitem"><a class="link" href="#ST_Z" title="ST_Z">ST_Z</a> - Return the Z coordinate of the point, or NULL if not available. Input must be a point.
   
     
   
  This method implements the SQL/MM specification.</li></ul></div></div><div class="sect1" title="14.4. PostGIS Geography Support Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_GeographyFunctions"></a>14.4. PostGIS Geography Support Functions</h2></div></div></div><p>The functions and operators given below are PostGIS functions/operators that take as input or return as output a <a class="link" href="#PostGIS_Geography" title="4.2. PostGIS Geography Type">geography</a> data type object.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Functions with a (T) are not native geodetic functions, and use a ST_Transform call to and from geometry to do the operation.  As a result, they may not behave as expected when going over dateline, poles, 
				and for large geometries or geometry pairs that cover more than one UTM zone. Basic transform - (favoring UTM, Lambert Azimuthal (North/South), and falling back on mercator in worst case scenario)</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - Returns the area of the surface if it is a Polygon or MultiPolygon. For geometry, a 2D Cartesian area is determined with units specified by the SRID. For geography, area is determined on a curved surface with units in square meters.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Return the geometry as a GML version 2 or 3 element.</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - Return the geometry as a GeoJSON element.</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - Return the geometry as a KML element. Several variants. Default version=2, default precision=15</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - Returns a Geometry in SVG path data given a geometry or geography object.</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - Returns the north-based azimuth as the angle in radians measured clockwise from the vertical on pointA to pointB.</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - (T)Returns a geometry covering all points within a given distancefrom the input geometry.</li><li class="listitem"><a class="link" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - Returns 1 (TRUE) if no point in Geometry/Geography A is outside Geometry/Geography B</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - Returns 1 (TRUE) if no point in Geometry B is outside Geometry A</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Returns true if the geometries are within the specified distance of one another. For geometry units are in those of spatial reference and For geography units are in meters and measurement is defaulted to use_spheroid=true (measure around spheroid), for faster check, use_spheroid=false to measure along sphere.</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - For geometry type Returns the 2D Cartesian distance between two geometries in projected units (based on spatial ref). For geography type defaults to return minimum geodesic distance between two geographies in meters.</li><li class="listitem"><a class="link" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a> - Return a specified geography value from Well-Known Text representation or extended (WKT).</li><li class="listitem"><a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a> - Creates a geography instance from a Well-Known Binary geometry representation (WKB) or extended Well Known Binary (EWKB).</li><li class="listitem"><a class="link" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a> - Return a specified geography value from Well-Known Text representation or extended (WKT).</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - Returns TRUE if A's bounding box is the same as B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - (T)Returns a geometry that represents the shared portion of geomA and geomB.</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - Returns TRUE if the Geometries/Geography "spatially intersect in 2D" - (share any portion of space) and FALSE if they don't (they are Disjoint). For geography -- tolerance is 0.00001 meters (so any points that close are considered to intersect)</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - Returns the 2D length of the geometry if it is a LineString or MultiLineString. geometry are in units of spatial reference and geography are in meters (default spheroid)</li><li class="listitem"><a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a> - Return the length measurement of the boundary of an ST_Surface or ST_MultiSurface geometry or geography. (Polygon, MultiPolygon). geometry measurement is in units of spatial reference and geography is in meters.</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - Returns a POINT projected from a start point using a distance in meters and bearing (azimuth) in radians.</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - Return a modified geometry/geography having no segment longer than the given distance.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Returns a text summary of the contents of the geometry.</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - Returns the 2D distance between A and B.</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - Returns TRUE if A's 2D bounding box intersects B's 2D bounding box.</li></ul></div></div><div class="sect1" title="14.5. PostGIS Raster Support Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_RasterFunctions"></a>14.5. PostGIS Raster Support Functions</h2></div></div></div><p>The functions and operators given below are PostGIS functions/operators that take as input or return as output a <a class="xref" href="#raster" title="raster">raster</a> data type object. Listed
			in alphabetical order.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - Returns the box 3d representation of the enclosing box of the raster.</li><li class="listitem"><a class="link" href="#RT_Raster_Contained" title="@">@</a> - Returns TRUE if A's bounding box is contained by B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#RT_Raster_Contains" title="~">~</a> - Returns TRUE if A's bounding box is contains B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#RT_Raster_EQ" title="=">=</a> - Returns TRUE if A's bounding box is the same as B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#RT_Raster_Intersect" title="&amp;&amp;">&amp;&amp;</a> - Returns TRUE if A's bounding box intersects B's bounding box.</li><li class="listitem"><a class="link" href="#RT_Raster_OverLeft" title="&amp;&lt;">&amp;&lt;</a> - Returns TRUE if A's bounding box is to the left of B's.</li><li class="listitem"><a class="link" href="#RT_Raster_OverRight" title="&amp;&gt;">&amp;&gt;</a> - Returns TRUE if A's bounding box is to the right of B's.</li><li class="listitem"><a class="link" href="#RT_Raster_Same" title="~=">~=</a> - Returns TRUE if A's bounding box is the same as B's.</li><li class="listitem"><a class="link" href="#RT_Retile" title="ST_Retile">ST_Retile</a> - Return a set of configured tiles from an arbitrarily tiled raster coverage.</li><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - Returns a raster with the new band(s) of given type added with given initial value in the given index location. If no index is specified, the band is added to the end.</li><li class="listitem"><a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the raster without SRID meta data.</li><li class="listitem"><a class="link" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> - Return the raster tile in the designated GDAL Raster format. Raster formats are one of those supported by your compiled library. Use ST_GDALRasters() to get a list of formats supported by your library.</li><li class="listitem"><a class="link" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a> - Return the raster tile selected bands as a single Joint Photographic Exports Group (JPEG) image (byte array). If no band is specified and 1 or more than 3 bands, then only the first band is used. If only 3 bands then all 3 bands are used and mapped to RGB.</li><li class="listitem"><a class="link" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a> - Return the raster tile selected bands as a single portable network graphics (PNG) image (byte array). If 1, 3, or 4 bands in raster and no bands are specified, then all bands are used. If more 2 or more than 4 bands and no bands specified, then only band 1 is used. Bands are mapped to RGB or RGBA space.</li><li class="listitem"><a class="link" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> - Converts a PostGIS geometry to a PostGIS raster.</li><li class="listitem"><a class="link" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> - Return the raster selected bands as a single TIFF image (byte array). If no band is specified, then will try to use all bands.</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - Returns the aspect (in degrees by default) of an elevation raster band. Useful for analyzing terrain.</li><li class="listitem"><a class="link" href="#RT_ST_Band" title="ST_Band">ST_Band</a> - Returns one or more bands of an existing raster as a new raster. Useful for building new rasters from existing rasters.</li><li class="listitem"><a class="link" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> - Returns true if the band is filled with only nodata values.</li><li class="listitem"><a class="link" href="#RT_ST_BandMetaData" title="ST_BandMetaData">ST_BandMetaData</a> - Returns basic meta data for a specific raster band. band num 1 is assumed if none-specified.</li><li class="listitem"><a class="link" href="#RT_ST_BandNoDataValue" title="ST_BandNoDataValue">ST_BandNoDataValue</a> - Returns the value in a given band that represents no data. If no band num 1 is assumed.</li><li class="listitem"><a class="link" href="#RT_ST_BandPath" title="ST_BandPath">ST_BandPath</a> - Returns system file path to a band stored in file system. If no bandnum specified, 1 is assumed.</li><li class="listitem"><a class="link" href="#RT_ST_BandPixelType" title="ST_BandPixelType">ST_BandPixelType</a> - Returns the type of pixel for given band. If no bandnum specified, 1 is assumed.</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - Returns the raster clipped by the input geometry. If band number not is specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped.</li><li class="listitem"><a class="link" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a> - Creates a new raster of up to four 8BUI bands (grayscale, RGB, RGBA) from the source raster and a specified band. Band 1 is assumed if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a> - Return true if no points of raster rastB lie in the exterior of raster rastA and at least one point of the interior of rastB lies in the interior of rastA.</li><li class="listitem"><a class="link" href="#RT_ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - Return true if rastB intersects the interior of rastA but not the boundary or exterior of rastA.</li><li class="listitem"><a class="link" href="#RT_ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - Return the convex hull geometry of the raster including pixel values equal to BandNoDataValue. For regular shaped and non-skewed rasters, this gives the same result as ST_Envelope so only useful for irregularly shaped or skewed rasters.</li><li class="listitem"><a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a> - Returns the number of pixels in a given band of a raster or raster coverage. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the nodata value.</li><li class="listitem"><a class="link" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a> - Aggregate. Returns the number of pixels in a given band of a set of rasters. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the NODATA value.</li><li class="listitem"><a class="link" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - Return true if no points of raster rastA lie outside raster rastB.</li><li class="listitem"><a class="link" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a> - Return true if no points of raster rastB lie outside raster rastA.</li><li class="listitem"><a class="link" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - Return true if rasters rastA and rastB are fully within the specified distance of each other.</li><li class="listitem"><a class="link" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Return true if rasters rastA and rastB are within the specified distance of each other.</li><li class="listitem"><a class="link" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - Return true if raster rastA does not spatially intersect rastB.</li><li class="listitem"><a class="link" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> - Returns a set of geomval (geom,val) rows, from a given raster band. If no band number is specified, band num defaults to 1.</li><li class="listitem"><a class="link" href="#RT_ST_DumpValues" title="ST_DumpValues">ST_DumpValues</a> - Get the values of the specified band as a 2-dimension array.</li><li class="listitem"><a class="link" href="#RT_ST_Envelope" title="ST_Envelope">ST_Envelope</a> - Returns the polygon representation of the extent of the raster.</li><li class="listitem"><a class="link" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a> - Returns a raster from a supported GDAL raster file.</li><li class="listitem"><a class="link" href="#RT_ST_GeoReference" title="ST_GeoReference">ST_GeoReference</a> - Returns the georeference meta data in GDAL or ESRI format as commonly seen in a world file. Default is GDAL.</li><li class="listitem"><a class="link" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a> - Returns true if there is no band with given band number. If no band number is specified, then band number 1 is assumed.</li><li class="listitem"><a class="link" href="#RT_ST_Height" title="ST_Height">ST_Height</a> - Returns the height of the raster in pixels.</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - Returns the hypothetical illumination of an elevation raster band using provided azimuth, altitude, brightness and scale inputs.</li><li class="listitem"><a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a> - Returns a set of record summarizing a raster or raster coverage data distribution separate bin ranges. Number of bins are autocomputed if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> - Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.</li><li class="listitem"><a class="link" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a> - Return true if raster rastA spatially intersects raster rastB.</li><li class="listitem"><a class="link" href="#RT_ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</li><li class="listitem"><a class="link" href="#RT_ST_MakeEmptyRaster" title="ST_MakeEmptyRaster">ST_MakeEmptyRaster</a> - Returns an empty raster (having no bands) of given dimensions (width &amp; height), upperleft X and Y, pixel size and rotation (scalex, scaley, skewx &amp; skewy) and reference system (srid). If a raster is passed in, returns a new raster with the same size, alignment and SRID. If srid is left out, the spatial ref is set to unknown (0).</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> - Callback function version - Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 1 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the input raster band and of pixeltype provided. Band 1 is assumed if no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - 2 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the two input raster bands and of pixeltype provided. band 1 of each raster is assumed if no band numbers are specified. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster and have its extent defined by the "extenttype" parameter. Values for "extenttype" can be: INTERSECTION, UNION, FIRST, SECOND.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 1 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the input raster band and of pixeltype prodived. Band 1 is assumed if no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - 2 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the 2 input raster bands and of pixeltype prodived. Band 1 is assumed if no band is specified. Extent type defaults to INTERSECTION if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> - 1-band version: Map Algebra Nearest Neighbor using user-defined PostgreSQL function. Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra">ST_MapAlgebra</a> - Expression version - Returns a one-band raster given one or two input rasters, band indexes and one or more user-specified SQL expressions.</li><li class="listitem"><a class="link" href="#RT_ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Returns the amount of space (in bytes) the raster takes.</li><li class="listitem"><a class="link" href="#RT_ST_MetaData" title="ST_MetaData">ST_MetaData</a> - Returns basic meta data about a raster object such as pixel size, rotation (skew), upper, lower left, etc.</li><li class="listitem"><a class="link" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a> - Return the convex hull geometry of the raster excluding NODATA pixels.</li><li class="listitem"><a class="link" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a> - Returns the nearest non-NODATA value of a given band's pixel specified by a columnx and rowy or a geometric point expressed in the same spatial reference coordinate system as the raster.</li><li class="listitem"><a class="link" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a> - Returns a 2-D double precision array of the non-NODATA values around a given band's pixel specified by either a columnX and rowY or a geometric point expressed in the same spatial reference coordinate system as the raster.</li><li class="listitem"><a class="link" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> - Returns text stating if rasters are aligned and if not aligned, a reason why.</li><li class="listitem"><a class="link" href="#RT_ST_NumBands" title="ST_NumBands">ST_NumBands</a> - Returns the number of bands in the raster object.</li><li class="listitem"><a class="link" href="#RT_ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - Return true if raster rastA and rastB intersect but one does not completely contain the other.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> - Returns the centroid (point geometry) of the area represented by a pixel.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - Returns the centroid (point geometry) for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel. The point geometry is the centroid of the area represented by a pixel.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a> - Returns a point geometry of the pixel's upper-left corner.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - Returns a point geometry for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel. The coordinates of the point geometry are of the pixel's upper-left corner.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a> - Returns the polygon geometry that bounds the pixel for a particular row and column.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - Returns the polygon geometry that bounds every pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.</li><li class="listitem"><a class="link" href="#RT_ST_PixelHeight" title="ST_PixelHeight">ST_PixelHeight</a> - Returns the pixel height in geometric units of the spatial reference system.</li><li class="listitem"><a class="link" href="#RT_ST_PixelOfValue" title="ST_PixelOfValue">ST_PixelOfValue</a> - Get the columnx, rowy coordinates of the pixel whose value equals the search value.</li><li class="listitem"><a class="link" href="#RT_ST_PixelWidth" title="ST_PixelWidth">ST_PixelWidth</a> - Returns the pixel width in geometric units of the spatial reference system.</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - Returns a multipolygon geometry formed by the union of pixels that have a pixel value that is not no data value. If no band number is specified, band num defaults to 1.</li><li class="listitem"><a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a> - Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoord" title="ST_RasterToWorldCoord">ST_RasterToWorldCoord</a> - Returns the raster's upper left corner as geometric X and Y (longitude and latitude) given a column and row. Column and row starts at 1.</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a> - Returns the geometric X coordinate upper left of a raster, column and row. Numbering of columns and rows starts at 1.</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a> - Returns the geometric Y coordinate upper left corner of a raster, column and row. Numbering of columns and rows starts at 1.</li><li class="listitem"><a class="link" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> - Creates a new raster composed of band types reclassified from original. The nband is the band to be changed. If nband is not specified assumed to be 1. All other bands are returned unchanged. Use case: convert a 16BUI band to a 8BUI and so forth for simpler rendering as viewable formats.</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - Resample a raster using a specified resampling algorithm, new dimensions, an arbitrary grid corner and a set of raster georeferencing attributes defined or borrowed from another raster.</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a> - Resize a raster to a new width/height</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_Rotation" title="ST_Rotation">ST_Rotation</a> - Returns the rotation of the raster in radian.</li><li class="listitem"><a class="link" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a> - Returns a raster with the calculated "roughness" of a DEM.</li><li class="listitem"><a class="link" href="#RT_ST_SRID" title="ST_SRID">ST_SRID</a> - Returns the spatial reference identifier of the raster as defined in spatial_ref_sys table.</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - Returns true if rasters have same skew, scale, spatial ref, and offset (pixels can be put on same grid without cutting into pixels) and false if they don't with notice detailing issue.</li><li class="listitem"><a class="link" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a> - Returns the X component of the pixel width in units of coordinate reference system.</li><li class="listitem"><a class="link" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a> - Returns the Y component of the pixel height in units of coordinate reference system.</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a> - Sets the isnodata flag of the band to TRUE.</li><li class="listitem"><a class="link" href="#RT_ST_SetBandNoDataValue" title="ST_SetBandNoDataValue">ST_SetBandNoDataValue</a> - Sets the value for the given band that represents no data. Band 1 is assumed if no band is specified. To mark a band as having no nodata value, set the nodata value = NULL.</li><li class="listitem"><a class="link" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a> - Set Georeference 6 georeference parameters in a single call. Numbers should be separated by white space. Accepts inputs in GDAL or ESRI format. Default is GDAL.</li><li class="listitem"><a class="link" href="#RT_ST_SetRotation" title="ST_SetRotation">ST_SetRotation</a> - Set the rotation of the raster in radian.</li><li class="listitem"><a class="link" href="#RT_ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> - Sets the SRID of a raster to a particular integer srid defined in the spatial_ref_sys table.</li><li class="listitem"><a class="link" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a> - Sets the X and Y size of pixels in units of coordinate reference system. Number units/pixel width/height.</li><li class="listitem"><a class="link" href="#RT_ST_SetSkew" title="ST_SetSkew">ST_SetSkew</a> - Sets the georeference X and Y skew (or rotation parameter). If only one is passed in, sets X and Y to the same value.</li><li class="listitem"><a class="link" href="#RT_ST_SetUpperLeft" title="ST_SetUpperLeft">ST_SetUpperLeft</a> - Sets the value of the upper left corner of the pixel to projected X and Y coordinates.</li><li class="listitem"><a class="link" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> - Returns modified raster resulting from setting the value of a given band in a given columnx, rowy pixel or the pixels that intersect a particular geometry. Band numbers start at 1 and assumed to be 1 if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a> - Returns modified raster resulting from setting the values of a given band.</li><li class="listitem"><a class="link" href="#RT_ST_SkewX" title="ST_SkewX">ST_SkewX</a> - Returns the georeference X skew (or rotation parameter).</li><li class="listitem"><a class="link" href="#RT_ST_SkewY" title="ST_SkewY">ST_SkewY</a> - Returns the georeference Y skew (or rotation parameter).</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - Returns the slope (in degrees by default) of an elevation raster band. Useful for analyzing terrain.</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - Resample a raster by snapping it to a grid. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_Summary" title="ST_Summary">ST_Summary</a> - Returns a text summary of the contents of the raster.</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> - Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage. Band 1 is assumed is no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> - Aggregate. Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a set of raster. Band 1 is assumed is no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a> - Returns a raster with the calculated Topographic Position Index.</li><li class="listitem"><a class="link" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a> - Returns a raster with the calculated Terrain Ruggedness Index.</li><li class="listitem"><a class="link" href="#RT_ST_Tile" title="ST_Tile">ST_Tile</a> - Returns a set of rasters resulting from the split of the input raster based upon the desired dimensions of the output rasters.</li><li class="listitem"><a class="link" href="#RT_ST_Touches" title="ST_Touches">ST_Touches</a> - Return true if raster rastA and rastB have at least one point in common but their interiors do not intersect.</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - Reprojects a raster in a known spatial reference system to another known spatial reference system using specified resampling algorithm. Options are NearestNeighbor, Bilinear, Cubic, CubicSpline, Lanczos defaulting to NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Returns the union of a set of raster tiles into a single raster composed of 1 or more bands.</li><li class="listitem"><a class="link" href="#RT_ST_UpperLeftX" title="ST_UpperLeftX">ST_UpperLeftX</a> - Returns the upper left X coordinate of raster in projected spatial ref.</li><li class="listitem"><a class="link" href="#RT_ST_UpperLeftY" title="ST_UpperLeftY">ST_UpperLeftY</a> - Returns the upper left Y coordinate of raster in projected spatial ref.</li><li class="listitem"><a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a> - Returns the value of a given band in a given columnx, rowy pixel or at a particular geometric point. Band numbers start at 1 and assumed to be 1 if not specified. If exclude_nodata_value is set to false, then all pixels include nodata pixels are considered to intersect and return value. If exclude_nodata_value is not passed in then reads it from metadata of raster.</li><li class="listitem"><a class="link" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> - Returns a set of records containing a pixel band value and count of the number of pixels in a given band of a raster (or a raster coverage) that have a given set of values. If no band is specified defaults to band 1. By default nodata value pixels are not counted. and all other values in the pixel are output and pixel band values are rounded to the nearest integer.</li><li class="listitem"><a class="link" href="#RT_ST_Width" title="ST_Width">ST_Width</a> - Returns the width of the raster in pixels.</li><li class="listitem"><a class="link" href="#RT_ST_Within" title="ST_Within">ST_Within</a> - Return true if no points of raster rastA lie in the exterior of raster rastB and at least one point of the interior of rastA lies in the interior of rastB.</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoord" title="ST_WorldToRasterCoord">ST_WorldToRasterCoord</a> - Returns the upper left corner as column and row given geometric X and Y (longitude and latitude) or a point geometry expressed in the spatial reference coordinate system of the raster.</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a> - Returns the column in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented in world spatial reference system of raster.</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a> - Returns the row in the raster of the point geometry (pt) or a X and Y world coordinate (xw, yw) represented in world spatial reference system of raster.</li><li class="listitem"><a class="link" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a> - Change the SRID of all rasters in the user-specified column and table.</li></ul></div></div><div class="sect1" title="14.6. PostGIS Geometry / Geography / Raster Dump Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Geometry_DumpFunctions"></a>14.6. PostGIS Geometry / Geography / Raster Dump Functions</h2></div></div></div><p>The functions given below are PostGIS functions that take as input or return as output a set of or single <a class="link" href="#geometry_dump" title="geometry_dump">geometry_dump</a> or  <a class="link" href="#geomval" title="geomval">geomval</a> data type object.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#RT_ST_DumpAsPolygons" title="ST_DumpAsPolygons">ST_DumpAsPolygons</a> - Returns a set of geomval (geom,val) rows, from a given raster band. If no band number is specified, band num defaults to 1.</li><li class="listitem"><a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> - Returns a raster or a set of geometry-pixelvalue pairs representing the shared portion of two rasters or the geometrical intersection of a vectorization of the raster and a geometry.</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</li><li class="listitem"><a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a> - Returns a set of geometry_dump rows, representing the exterior and interior rings of a polygon.</li></ul></div></div><div class="sect1" title="14.7. PostGIS Box Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_BoxFunctions"></a>14.7. PostGIS Box Functions</h2></div></div></div><p>The functions given below are PostGIS functions that take as input or return as output the box* family of PostGIS spatial types.
				The box family of types consists of <a class="link" href="#box2d_type" title="box2d">box2d</a>, and <a class="link" href="#box3d_type" title="box3d">box3d</a></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - Returns a BOX2D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - Returns a BOX3D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - Returns the box 3d representation of the enclosing box of the raster.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - an aggregate function that returns the box3D bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a> - Creates a BOX3D defined by the given 3d point geometries.</li><li class="listitem"><a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a> - Returns the geometry as TWKB, aka "Tiny Well-Known Binary"</li><li class="listitem"><a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a> - Return a BOX2D from a GeoHash string.</li><li class="listitem"><a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a> - Returns the portion of a geometry falling within a rectangle.</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - Return the 'estimated' extent of the given spatial table. The estimated is taken from the geometry column's statistics. The current schema will be used if not specified.</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - Returns bounding box expanded in all directions from the bounding box of the input geometry. Uses double-precision</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - an aggregate function that returns the bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a> - Creates a BOX2D defined by the given point geometries.</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - Returns X maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - Returns X minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - Returns Y maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - Returns Y minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - Returns TRUE if two 2D float precision bounding boxes (BOX2DF) intersect each other.</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - Returns TRUE if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</li></ul></div></div><div class="sect1" title="14.8. PostGIS Functions that support 3D"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_3D_Functions"></a>14.8. PostGIS Functions that support 3D</h2></div></div></div><p>The functions given below are PostGIS functions that do not throw away the Z-Index.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Adds a geometry column to an existing table of attributes. By default uses type modifier to define rather than constraints. Pass in false for use_typmod to get old check constraint based behavior</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - Returns a BOX3D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - Removes a geometry column from a spatial table.</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - Returns the type of the geometry as a string. Eg: 'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - Computes area of 3D surface geometries. Will return 0 for solids.</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - Returns the 3-dimensional point on g1 that is closest to g2. This is the first point of the 3D shortest line.</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - Returns true if all of the 3D geometries are within the specified distance of one another.</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units.</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - Perform 3D difference</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - an aggregate function that returns the box3D bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - Perform 3D intersection</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - Returns TRUE if the Geometries "spatially intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area). With SFCGAL backend enabled also supports TINS</li><li class="listitem"><a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a> - Returns the 3-dimensional or 2-dimensional length of the geometry if it is a linestring or multi-linestring.</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - Returns the 3-dimensional longest line between two geometries</li><li class="listitem"><a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a> - Creates a BOX3D defined by the given 3d point geometries.</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - For geometry type Returns the 3-dimensional cartesian maximum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a> - Returns the 3-dimensional perimeter of the geometry, if it is a polygon or multi-polygon.</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - Returns the 3-dimensional shortest line between two geometries</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - Perform 3D union</li><li class="listitem"><a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a> - Aggregate. Constructs an array of geometries.</li><li class="listitem"><a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a> - Return a derived geometry with measure elements linearly interpolated between the start and end points.</li><li class="listitem"><a class="link" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a> - Add a point to a LineString.</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - Apply a 3d affine transformation to a geometry.</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - Compute the approximate medial axis of an areal geometry.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - Return the Well-Known Binary (WKB) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Return the geometry as a GML version 2 or 3 element.</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - Return the geometry as a GeoJSON element.</li><li class="listitem"><a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a> - Returns a Geometry in HEXEWKB format (as text) using either little-endian (NDR) or big-endian (XDR) encoding.</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - Return the geometry as a KML element. Several variants. Default version=2, default precision=15</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - Returns a Geometry in X3D xml node element format: ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - Returns the closure of the combinatorial boundary of this Geometry.</li><li class="listitem"><a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a> - Returns the diagonal of the supplied geometry's bounding box.</li><li class="listitem"><a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a> - Returns true if the trajectories' closest points of approachare within the specified distance.</li><li class="listitem"><a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a> - Returns the measure at which points interpolated along two lines are closest.</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - Return a specified ST_Geometry value from a collection of other geometries.</li><li class="listitem"><a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a> - The convex hull of a geometry represents the minimum convex geometry that encloses all geometries within the set.</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - Return the coordinate dimension of the ST_Geometry value.</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - Converts a CIRCULARSTRING/CURVEPOLYGON to a LINESTRING/POLYGON</li><li class="listitem"><a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a> - Return a Delaunay triangulation around the given input points.</li><li class="listitem"><a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a> - Returns a geometry that represents that part of geometry A that does not intersect with geometry B.</li><li class="listitem"><a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> - Returns the distance between closest points of approach in two trajectories.</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</li><li class="listitem"><a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a> - Returns a set of geometry_dump rows, representing the exterior and interior rings of a polygon.</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - Returns the last point of a LINESTRING or CIRCULARLINESTRING geometry as a POINT.</li><li class="listitem"><a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a> - Returns a line string representing the exterior ring of the POLYGON geometry. Return NULL if the geometry is not a polygon. Will not work with MULTIPOLYGON</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - Extrude a surface to a related volume</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - Returns a version of the given geometry with X and Y axis flipped. Useful for people who have built latitude/longitude features and need to fix them.</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - Force the geometries into a "2-dimensional mode".</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - Upcast a geometry into its curved type, if applicable.</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - Force LHR orientation</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - Force the orientation of the vertices in a polygon to follow the Right-Hand-Rule.</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - Force the geometries to use SFS 1.1 geometry types only.</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force_3D</a> - Force the geometries into XYZ mode. This is an alias for ST_Force3DZ.</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force_3DZ</a> - Force the geometries into XYZ mode.</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force_4D</a> - Force the geometries into XYZM mode.</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_Force_Collection</a> - Convert the geometry into a GEOMETRYCOLLECTION.</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - Return a specified ST_Geometry value from Extended Well-Known Binary representation (EWKB).</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - Return a specified ST_Geometry value from Extended Well-Known Text representation (EWKT).</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - Takes as input GML representation of geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - Takes as input a geojson representation of a geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a> - Takes as input KML representation of geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">ST_GeometricMedian</a> - Returns the geometric median of a MultiPoint.</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Return the 1-based Nth geometry if the geometry is a GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - Return the geometry type of the ST_Geometry value.</li><li class="listitem"><a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a> - Returns true if a geometry or geometry collection contains a circular string</li><li class="listitem"><a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a> - Return the Nth interior linestring ring of the polygon geometry. Return NULL if the geometry is not a polygon or the given N is out of range.</li><li class="listitem"><a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a> - Return the value of the measure dimension of a geometry at the point closed to the provided point.</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - Returns TRUE if the LINESTRING's start and end points are coincident. For Polyhedral surface is closed (volumetric).</li><li class="listitem"><a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a> - Returns TRUE if the argument is a collection (MULTI*, GEOMETRYCOLLECTION, ...)</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - Check if a surface is or not planar</li><li class="listitem"><a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a> - Returns (TRUE) if this Geometry has no anomalous geometric points, such as self intersection or self tangency.</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - Test if the geometry is a solid. No validity check is performed.</li><li class="listitem"><a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> - Returns true if the geometry is a valid trajectory.</li><li class="listitem"><a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_Length_Spheroid</a> - Calculates the 2D or 3D length/perimeter of a geometry on an ellipsoid. This is useful if the coordinates of the geometry are in longitude/latitude and a length is desired without reprojection.</li><li class="listitem"><a class="link" href="#ST_LineFromMultiPoint" title="ST_LineFromMultiPoint">ST_LineFromMultiPoint</a> - Creates a LineString from a MultiPoint geometry.</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> - Returns a point interpolated along a line. Second argument is a float8 between 0 and 1 representing fraction of total length of linestring the point has to be located.</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - Return a linestring being a substring of the input one starting and ending at the given fractions of total 2d length. Second and third arguments are float8 values between 0 and 1.</li><li class="listitem"><a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a> - Converts a LINESTRING/POLYGON to a CIRCULARSTRING, CURVEPOLYGON</li><li class="listitem"><a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a> - Return a derived geometry (collection) value with elements that intersect the specified range of elevations inclusively. Only 3D, 4D LINESTRINGS and MULTILINESTRINGS are supported.</li><li class="listitem"><a class="link" href="#ST_M" title="ST_M">ST_M</a> - Return the M coordinate of the point, or NULL if not available. Input must be a point.</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - Creates a Linestring from point, multipoint, or line geometries.</li><li class="listitem"><a class="link" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a> - Creates a 2D,3DZ or 4D point geometry.</li><li class="listitem"><a class="link" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a> - Creates a Polygon formed by the given shell. Input geometries must be closed LINESTRINGS.</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - Cast the geometry into a solid. No check is performed. To obtain a valid solid, the input geometry must be a closed Polyhedral Surface or a closed TIN.</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - Attempts to make an invalid geometry valid without losing vertices.</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Returns the amount of space (in bytes) the geometry takes.</li><li class="listitem"><a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a> - Same as ST_Union, only memory-friendly (uses less memory and more processor time).</li><li class="listitem"><a class="link" href="#ST_NDims" title="ST_NDims">ST_NDims</a> - Returns coordinate dimension of the geometry as a small int. Values are: 2,3 or 4.</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - Return the number of points (vertexes) in a geometry.</li><li class="listitem"><a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a> - If the geometry is a polygon or multi-polygon returns the number of rings.</li><li class="listitem"><a class="link" href="#ST_Node" title="ST_Node">ST_Node</a> - Node a set of linestrings.</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the number of geometries, for single geometries will return 1, otherwise return NULL.</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - Return the number of faces on a Polyhedral Surface. Will return null for non-polyhedral geometries.</li><li class="listitem"><a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a> - Determine surface orientation</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - Return the 1-based Nth geometry (face) if the geometry is a POLYHEDRALSURFACE, POLYHEDRALSURFACEM. Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - Makes a geometry from WKB with the given SRID</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - Return the Nth point in the first LineString or circular LineString in the geometry. Negative values are counted backwards from the end of the LineString. Returns NULL if there is no linestring in the geometry.</li><li class="listitem"><a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a> - Returns a POINT guaranteed to lie on the surface.</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - Returns a MultiPoint containing all of the coordinates of a geometry.</li><li class="listitem"><a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a> - Returns a polygon built from the specified linestring and SRID.</li><li class="listitem"><a class="link" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a> - Remove point from a linestring.</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - Returns a version of the given geometry with duplicated points removed.</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - Rotate a geometry rotRadians counter-clockwise about an origin.</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - Rotate a geometry rotRadians about the X axis.</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - Rotate a geometry rotRadians about the Y axis.</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - Rotate a geometry rotRadians about the Z axis.</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - Scale a geometry by given factors.</li><li class="listitem"><a class="link" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a> - Replace point of a linestring with a given point.</li><li class="listitem"><a class="link" href="#ST_Shift_Longitude" title="ST_ShiftLongitude">ST_Shift_Longitude</a> - Toggle geometry coordinates between -180..180 and 0..360 ranges.</li><li class="listitem"><a class="link" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - Snap all points of the input geometry to a regular grid.</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - Returns the first point of a LINESTRING geometry as a POINT.</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - Compute a straight skeleton from a geometry</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - Returns a version of the given geometry with given ordinate values swapped.</li><li class="listitem"><a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a> - Returns a geometry that represents the portions of A and B that do not intersect. It is called a symmetric difference because ST_SymDifference(A,B) = ST_SymDifference(B,A).</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - Perform surface Tesselation of a polygon or polyhedralsurface and returns as a TIN or collection of TINS</li><li class="listitem"><a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a> - Translate a geometry by given factors and offsets.</li><li class="listitem"><a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a> - Translate a geometry by given offsets.</li><li class="listitem"><a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> - Like ST_Union, but working at the geometry component level.</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - Computes the volume of a 3D solid. If applied to surface (even closed) geometries will return 0.</li><li class="listitem"><a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a> - Wrap a geometry around an X value.</li><li class="listitem"><a class="link" href="#ST_X" title="ST_X">ST_X</a> - Return the X coordinate of the point, or NULL if not available. Input must be a point.</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - Returns X maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - Returns X minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_Y" title="ST_Y">ST_Y</a> - Return the Y coordinate of the point, or NULL if not available. Input must be a point.</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - Returns Y maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - Returns Y minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_Z" title="ST_Z">ST_Z</a> - Return the Z coordinate of the point, or NULL if not available. Input must be a point.</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a> - Returns ZM (dimension semantic) flag of the geometries as a small int. Values are: 0=2d, 1=3dm, 2=3dz, 3=4d.</li><li class="listitem"><a class="link" href="#TG_Equals" title="Equals">TG_Equals</a> - Returns true if two topogeometries are composed of the same topology primitives.</li><li class="listitem"><a class="link" href="#TG_Intersects" title="Intersects">TG_Intersects</a> - Returns true if any pair of primitives from thetwo topogeometries intersect.</li><li class="listitem"><a class="link" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a> - Updates the SRID of all features in a geometry column, geometry_columns metadata and srid. If it was enforced with constraints, the constraints will be updated with new srid constraint. If the old was enforced by type definition, the type definition will be changed.</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">geometry_overlaps_nd</a> - Returns TRUE if A's n-D bounding box intersects B's n-D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">overlaps_nd_geometry_gidx</a> - Returns TRUE if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">overlaps_nd_gidx_geometry</a> - Returns TRUE if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">overlaps_nd_gidx_gidx</a> - Returns TRUE if two n-D float precision bounding boxes (GIDX) intersect each other.</li><li class="listitem"><a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a> - Returns the version of SFCGAL in use</li></ul></div></div><div class="sect1" title="14.9. PostGIS Curved Geometry Support Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_Curved_GeometryFunctions"></a>14.9. PostGIS Curved Geometry Support Functions</h2></div></div></div><p>The functions given below are PostGIS functions that can use CIRCULARSTRING, CURVEPOLYGON, and other curved geometry types</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Adds a geometry column to an existing table of attributes. By default uses type modifier to define rather than constraints. Pass in false for use_typmod to get old check constraint based behavior</li><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - Returns a BOX2D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - Returns a BOX3D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - Removes a geometry column from a spatial table.</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - Returns the type of the geometry as a string. Eg: 'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</li><li class="listitem"><a class="link" href="#PostGIS_AddBBox" title="PostGIS_AddBBox">PostGIS_AddBBox</a> - Add bounding box to the geometry.</li><li class="listitem"><a class="link" href="#PostGIS_DropBBox" title="PostGIS_DropBBox">PostGIS_DropBBox</a> - Drop the bounding box cache from the geometry.</li><li class="listitem"><a class="link" href="#PostGIS_HasBBox" title="PostGIS_HasBBox">PostGIS_HasBBox</a> - Returns TRUE if the bbox of this geometry is cached, FALSE otherwise.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - an aggregate function that returns the box3D bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a> - Aggregate. Constructs an array of geometries.</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - Apply a 3d affine transformation to a geometry.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - Return the Well-Known Binary (WKB) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a> - Returns a Geometry in HEXEWKB format (as text) using either little-endian (NDR) or big-endian (XDR) encoding.</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - Return a specified ST_Geometry value from a collection of other geometries.</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - Return the coordinate dimension of the ST_Geometry value.</li><li class="listitem"><a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a> - Converts a CIRCULARSTRING/CURVEPOLYGON to a LINESTRING/POLYGON</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - For geometry type Returns the 2D Cartesian distance between two geometries in projected units (based on spatial ref). For geography type defaults to return minimum geodesic distance between two geographies in meters.</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - Returns the last point of a LINESTRING or CIRCULARLINESTRING geometry as a POINT.</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - Return the 'estimated' extent of the given spatial table. The estimated is taken from the geometry column's statistics. The current schema will be used if not specified.</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - Returns a version of the given geometry with X and Y axis flipped. Useful for people who have built latitude/longitude features and need to fix them.</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - Force the geometries into a "2-dimensional mode".</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - Upcast a geometry into its curved type, if applicable.</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - Force the geometries to use SFS 1.1 geometry types only.</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - Force the geometries into XYZ mode. This is an alias for ST_Force3DZ.</li><li class="listitem"><a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a> - Force the geometries into XYM mode.</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - Force the geometries into XYZ mode.</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - Force the geometries into XYZM mode.</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - Convert the geometry into a GEOMETRYCOLLECTION.</li><li class="listitem"><a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a> - Return a GeoHash representation of the geometry.</li><li class="listitem"><a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a> - Creates a geography instance from a Well-Known Binary geometry representation (WKB) or extended Well Known Binary (EWKB).</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - Return a specified ST_Geometry value from Extended Well-Known Binary representation (EWKB).</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - Return a specified ST_Geometry value from Extended Well-Known Text representation (EWKT).</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - Return a specified ST_Geometry value from Well-Known Text representation (WKT).</li><li class="listitem"><a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a> - Creates a geometry instance from a Well-Known Binary geometry representation (WKB) and optional SRID.</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Return the 1-based Nth geometry if the geometry is a GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - Returns TRUE if A's bounding box is the same as B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a> - Returns TRUE if A's bounding box overlaps or is below B's.</li><li class="listitem"><a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a> - Returns true if a geometry or geometry collection contains a circular string</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - Returns TRUE if the LINESTRING's start and end points are coincident. For Polyhedral surface is closed (volumetric).</li><li class="listitem"><a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a> - Returns TRUE if the argument is a collection (MULTI*, GEOMETRYCOLLECTION, ...)</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - Returns true if this Geometry is an empty geometrycollection, polygon, point etc.</li><li class="listitem"><a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a> - Converts a LINESTRING/POLYGON to a CIRCULARSTRING, CURVEPOLYGON</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Returns the amount of space (in bytes) the geometry takes.</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - Return the number of points (vertexes) in a geometry.</li><li class="listitem"><a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a> - If the geometry is a polygon or multi-polygon returns the number of rings.</li><li class="listitem"><a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a> - Makes a geometry from WKB with the given SRID</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - Return the Nth point in the first LineString or circular LineString in the geometry. Negative values are counted backwards from the end of the LineString. Returns NULL if there is no linestring in the geometry.</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - Returns a MultiPoint containing all of the coordinates of a geometry.</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - Rotate a geometry rotRadians counter-clockwise about an origin.</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - Rotate a geometry rotRadians about the Z axis.</li><li class="listitem"><a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a> - Returns the spatial reference identifier for the ST_Geometry as defined in spatial_ref_sys table.</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - Scale a geometry by given factors.</li><li class="listitem"><a class="link" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a> - Set the SRID on a geometry to a particular integer value.</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - Returns the first point of a LINESTRING geometry as a POINT.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Returns a text summary of the contents of the geometry.</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - Returns a version of the given geometry with given ordinate values swapped.</li><li class="listitem"><a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a> - Translate a geometry by given factors and offsets.</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - Return a new geometry with its coordinates transformed to a different spatial reference.</li><li class="listitem"><a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a> - Translate a geometry by given offsets.</li><li class="listitem"><a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a> - Returns X maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a> - Returns X minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a> - Returns Y maxima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a> - Returns Y minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a> - Returns Z minima of a bounding box 2d or 3d or a geometry.</li><li class="listitem"><a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a> - Returns ZM (dimension semantic) flag of the geometries as a small int. Values are: 0=2d, 1=3dm, 2=3dz, 3=4d.</li><li class="listitem"><a class="link" href="#UpdateGeometrySRID" title="UpdateGeometrySRID">UpdateGeometrySRID</a> - Updates the SRID of all features in a geometry column, geometry_columns metadata and srid. If it was enforced with constraints, the constraints will be updated with new srid constraint. If the old was enforced by type definition, the type definition will be changed.</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - Returns TRUE if A's 2D bounding box intersects B's 2D bounding box.</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - Returns TRUE if A's n-D bounding box intersects B's n-D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - Returns TRUE if two 2D float precision bounding boxes (BOX2DF) intersect each other.</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - Returns TRUE if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - Returns TRUE if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - Returns TRUE if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - Returns TRUE if two n-D float precision bounding boxes (GIDX) intersect each other.</li></ul></div></div><div class="sect1" title="14.10. PostGIS Polyhedral Surface Support Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_PS_GeometryFunctions"></a>14.10. PostGIS Polyhedral Surface Support Functions</h2></div></div></div><p>The functions given below are PostGIS functions that can use POLYHEDRALSURFACE, POLYHEDRALSURFACEM geometries</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - Returns a BOX2D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - Returns a BOX3D representing the maximum extents of the geometry.</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - Returns the type of the geometry as a string. Eg: 'LINESTRING', 'POLYGON', 'MULTIPOINT', etc.</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - Computes area of 3D surface geometries. Will return 0 for solids.</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - Returns the 3-dimensional point on g1 that is closest to g2. This is the first point of the 3D shortest line.</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - Returns true if all of the 3D geometries are within the specified distance of one another.</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units.</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - Perform 3D difference</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - an aggregate function that returns the box3D bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - Perform 3D intersection</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - Returns TRUE if the Geometries "spatially intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area). With SFCGAL backend enabled also supports TINS</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - Returns the 3-dimensional longest line between two geometries</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - For geometry type Returns the 3-dimensional cartesian maximum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - Returns the 3-dimensional shortest line between two geometries</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - Perform 3D union</li><li class="listitem"><a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a> - Aggregate. Constructs an array of geometries.</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - Apply a 3d affine transformation to a geometry.</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - Compute the approximate medial axis of an areal geometry.</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - Returns the area of the surface if it is a Polygon or MultiPolygon. For geometry, a 2D Cartesian area is determined with units specified by the SRID. For geography, area is determined on a curved surface with units in square meters.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - Return the Well-Known Binary (WKB) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - Return the Well-Known Text (WKT) representation of the geometry with SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Return the geometry as a GML version 2 or 3 element.</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - Returns a Geometry in X3D xml node element format: ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a> - Return the coordinate dimension of the ST_Geometry value.</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - The inherent dimension of this Geometry object, which must be less than or equal to the coordinate dimension.</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - Returns a set of geometry_dump (geom,path) rows, that make up a geometry g1.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - Returns bounding box expanded in all directions from the bounding box of the input geometry. Uses double-precision</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - an aggregate function that returns the bounding box that bounds rows of geometries.</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - Extrude a surface to a related volume</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - Returns a version of the given geometry with X and Y axis flipped. Useful for people who have built latitude/longitude features and need to fix them.</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - Force the geometries into a "2-dimensional mode".</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - Force LHR orientation</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - Force the orientation of the vertices in a polygon to follow the Right-Hand-Rule.</li><li class="listitem"><a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a> - Force the geometries to use SFS 1.1 geometry types only.</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - Force the geometries into XYZ mode. This is an alias for ST_Force3DZ.</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - Force the geometries into XYZ mode.</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - Convert the geometry into a GEOMETRYCOLLECTION.</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - Return a specified ST_Geometry value from Extended Well-Known Binary representation (EWKB).</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - Return a specified ST_Geometry value from Extended Well-Known Text representation (EWKT).</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - Takes as input GML representation of geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Return the 1-based Nth geometry if the geometry is a GEOMETRYCOLLECTION, (MULTI)POINT, (MULTI)LINESTRING, MULTICURVE or (MULTI)POLYGON, POLYHEDRALSURFACE Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - Return the geometry type of the ST_Geometry value.</li><li class="listitem"><a class="link" href="#ST_Geometry_EQ" title="=">=</a> - Returns TRUE if A's bounding box is the same as B's. Uses double precision bounding box.</li><li class="listitem"><a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a> - Returns TRUE if A's bounding box overlaps or is below B's.</li><li class="listitem"><a class="link" href="#ST_Geometry_Same" title="~=">~=</a> - Returns TRUE if A's bounding box is the same as B's.</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - Returns TRUE if the LINESTRING's start and end points are coincident. For Polyhedral surface is closed (volumetric).</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - Check if a surface is or not planar</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - Test if the geometry is a solid. No validity check is performed.</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - Cast the geometry into a solid. No check is performed. To obtain a valid solid, the input geometry must be a closed Polyhedral Surface or a closed TIN.</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Returns the amount of space (in bytes) the geometry takes.</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - Return the number of points (vertexes) in a geometry.</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - If geometry is a GEOMETRYCOLLECTION (or MULTI*) return the number of geometries, for single geometries will return 1, otherwise return NULL.</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - Return the number of faces on a Polyhedral Surface. Will return null for non-polyhedral geometries.</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - Return the 1-based Nth geometry (face) if the geometry is a POLYHEDRALSURFACE, POLYHEDRALSURFACEM. Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - Returns a version of the given geometry with duplicated points removed.</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - Rotate a geometry rotRadians counter-clockwise about an origin.</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - Rotate a geometry rotRadians about the X axis.</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - Rotate a geometry rotRadians about the Y axis.</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - Rotate a geometry rotRadians about the Z axis.</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - Scale a geometry by given factors.</li><li class="listitem"><a class="link" href="#ST_Shift_Longitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a> - Toggle geometry coordinates between -180..180 and 0..360 ranges.</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - Compute a straight skeleton from a geometry</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Returns a text summary of the contents of the geometry.</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - Returns a version of the given geometry with given ordinate values swapped.</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - Perform surface Tesselation of a polygon or polyhedralsurface and returns as a TIN or collection of TINS</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - Return a new geometry with its coordinates transformed to a different spatial reference.</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - Computes the volume of a 3D solid. If applied to surface (even closed) geometries will return 0.</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - Returns TRUE if A's 2D bounding box intersects B's 2D bounding box.</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - Returns TRUE if A's n-D bounding box intersects B's n-D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - Returns TRUE if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - Returns TRUE if two 2D float precision bounding boxes (BOX2DF) intersect each other.</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - Returns TRUE if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - Returns TRUE if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - Returns TRUE if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - Returns TRUE if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - Returns TRUE if two n-D float precision bounding boxes (GIDX) intersect each other.</li><li class="listitem"><a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a> - Returns the version of SFCGAL in use</li></ul></div></div><div class="sect1" title="14.11. PostGIS Function Support Matrix"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="PostGIS_TypeFunctionMatrix"></a>14.11. PostGIS Function Support Matrix</h2></div></div></div><p>Below is an alphabetical listing of spatial specific functions in PostGIS and the kinds of spatial
				types they work with or OGC/SQL compliance they try to conform to.</p><p>
      </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span> means the function works with the type or subtype natively.</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_transform.png"></span> means it works but with a transform cast built-in using cast to geometry, transform to a "best srid" spatial ref and then cast back. Results may not be as expected for large areas or areas at poles 
						and may accumulate floating point junk.</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span> means the function works with the type because of a auto-cast to another such as to box3d rather than direct type support.</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span> means the function only available if PostGIS compiled with SFCGAL support.</li><li class="listitem">A <span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span> means the function support is provided by SFCGAL if PostGIS compiled with SFCGAL support, otherwise GEOS/built-in support.</li><li class="listitem">geom - Basic 2D geometry support (x,y).</li><li class="listitem">geog - Basic 2D geography support (x,y).</li><li class="listitem">2.5D - basic 2D geometries in 3 D/4D space (has Z or M coord).</li><li class="listitem">PS - Polyhedral surfaces</li><li class="listitem">T - Triangles and Triangulated Irregular Network surfaces (TIN)</li></ul></div><p>
    </p><p>
      </p><div class="informaltable"><table border="1"><colgroup><col align="left" class="function"><col align="center" class="geometry"><col align="center" class="geography"><col align="center" class="25D"><col align="center" class="Curves"><col align="center" class="SQLMM"><col align="center" class="PS"><col align="center" class="T"></colgroup><thead><tr><th align="left">Function</th><th align="center">geom</th><th align="center">geog</th><th align="center">2.5D</th><th align="center">Curves</th><th align="center">SQL MM</th><th align="center">PS</th><th align="center">T</th></tr></thead><tbody><tr><td align="left">
                <a class="link" href="#Box2D" title="Box2D">Box2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#Box3D" title="Box3D">Box3D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#Find_SRID" title="Find_SRID">Find_SRID</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#GeometryType" title="GeometryType">GeometryType</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AddPoint" title="ST_AddPoint">ST_AddPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Area" title="ST_Area">ST_Area</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsHEXEWKB" title="ST_AsHEXEWKB">ST_AsHEXEWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsLatLonText" title="ST_AsLatLonText">ST_AsLatLonText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_BdMPolyFromText" title="ST_BdMPolyFromText">ST_BdMPolyFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_BdPolyFromText" title="ST_BdPolyFromText">ST_BdPolyFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_transform.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_BuildArea" title="ST_BuildArea">ST_BuildArea</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Centroid" title="ST_Centroid">ST_Centroid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ConvexHull" title="ST_ConvexHull">ST_ConvexHull</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_CoordDim" title="ST_CoordDim">ST_CoordDim</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Crosses" title="ST_Crosses">ST_Crosses</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_CurveToLine" title="ST_CurveToLine">ST_CurveToLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Difference" title="ST_Difference">ST_Difference</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_DumpRings" title="ST_DumpRings">ST_DumpRings</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Equals" title="ST_Equals">ST_Equals</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_ExteriorRing" title="ST_ExteriorRing">ST_ExteriorRing</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ForceSFS" title="ST_ForceSFS">ST_ForceSFS</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeneratePoints" title="ST_GeneratePoints">ST_GeneratePoints</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeogFromText" title="ST_GeogFromText">ST_GeogFromText</a>
              </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeogFromWKB" title="ST_GeogFromWKB">ST_GeogFromWKB</a>
              </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeographyFromText" title="ST_GeographyFromText">ST_GeographyFromText</a>
              </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomCollFromText" title="ST_GeomCollFromText">ST_GeomCollFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromTWKB" title="ST_GeomFromTWKB">ST_GeomFromTWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeomFromWKB" title="ST_GeomFromWKB">ST_GeomFromWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">
			  ST_GeometricMedian
		  </a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeometryFromText" title="ST_GeometryFromText">ST_GeometryFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Above" title="|&gt;&gt;">|&gt;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Below" title="&lt;&lt;|">&lt;&lt;|</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Contain" title="~">~</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Contained" title="@">@</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_EQ" title="=">=</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Left" title="&lt;&lt;">&lt;&lt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Overabove" title="|&amp;&gt;">|&amp;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Overbelow" title="&amp;&lt;|">&amp;&lt;|</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Overleft" title="&amp;&lt;">&amp;&lt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Overright" title="&amp;&gt;">&amp;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Right" title="&gt;&gt;">&gt;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Geometry_Same" title="~=">~=</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_HasArc" title="ST_HasArc">ST_HasArc</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_InteriorRingN" title="ST_InteriorRingN">ST_InteriorRingN</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_transform.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsCollection" title="ST_IsCollection">ST_IsCollection</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_IsRing" title="ST_IsRing">ST_IsRing</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsSimple" title="ST_IsSimple">ST_IsSimple</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_IsValid" title="ST_IsValid">ST_IsValid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Length" title="ST_Length">ST_Length</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_enhanced.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Length2D" title="ST_Length2D">ST_Length2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Length2D_Spheroid" title="ST_Length2D_Spheroid">ST_Length2D_Spheroid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineCrossingDirection" title="ST_LineCrossingDirection">ST_LineCrossingDirection</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineFromMultiPoint" title="ST_LineFromMultiPoint">ST_LineFromMultiPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineFromText" title="ST_LineFromText">ST_LineFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineFromWKB" title="ST_LineFromWKB">ST_LineFromWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineMerge" title="ST_LineMerge">ST_LineMerge</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LineToCurve" title="ST_LineToCurve">ST_LineToCurve</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LinestringFromWKB" title="ST_LinestringFromWKB">ST_LinestringFromWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_M" title="ST_M">ST_M</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MLineFromText" title="ST_MLineFromText">ST_MLineFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MPointFromText" title="ST_MPointFromText">ST_MPointFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MPolyFromText" title="ST_MPolyFromText">ST_MPolyFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakeBox2D" title="ST_MakeBox2D">ST_MakeBox2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakePoint" title="ST_MakePoint">ST_MakePoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakePointM" title="ST_MakePointM">ST_MakePointM</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakePolygon" title="ST_MakePolygon">ST_MakePolygon</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_MemUnion" title="ST_MemUnion">ST_MemUnion</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MinimumBoundingRadius" title="ST_MinimumBoundingRadius">ST_MinimumBoundingRadius</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_MinkowskiSum" title="ST_MinkowskiSum">ST_MinkowskiSum</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Multi" title="ST_Multi">ST_Multi</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NDims" title="ST_NDims">ST_NDims</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NRings" title="ST_NRings">ST_NRings</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Node" title="ST_Node">ST_Node</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Normalize" title="ST_Normalize">ST_Normalize</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_NumInteriorRing" title="ST_NumInteriorRing">ST_NumInteriorRing</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_NumPoints" title="ST_NumPoints">ST_NumPoints</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_OffsetCurve" title="ST_OffsetCurve">ST_OffsetCurve</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_OrderingEquals" title="ST_OrderingEquals">ST_OrderingEquals</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Perimeter" title="ST_Perimeter">ST_Perimeter</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Perimeter2D" title="ST_Perimeter2D">ST_Perimeter2D</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Point" title="ST_Point">ST_Point</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PointFromText" title="ST_PointFromText">ST_PointFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PointFromWKB" title="ST_PointFromWKB">ST_PointFromWKB</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PointOnSurface" title="ST_PointOnSurface">ST_PointOnSurface</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Point_Inside_Circle" title="ST_PointInsideCircle">ST_PointInsideCircle</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Points" title="ST_Points">ST_Points</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Polygon" title="ST_Polygon">ST_Polygon</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_PolygonFromText" title="ST_PolygonFromText">ST_PolygonFromText</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Polygonize" title="ST_Polygonize">ST_Polygonize</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Project" title="ST_Project">ST_Project</a>
              </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_RemovePoint" title="ST_RemovePoint">ST_RemovePoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Reverse" title="ST_Reverse">ST_Reverse</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_SRID" title="ST_SRID">ST_SRID</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SetPoint" title="ST_SetPoint">ST_SetPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SetSRID" title="ST_SetSRID">ST_SetSRID</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SharedPaths" title="ST_SharedPaths">ST_SharedPaths</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Shift_Longitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Simplify" title="ST_Simplify">ST_Simplify</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Snap" title="ST_Snap">ST_Snap</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Split" title="ST_Split">ST_Split</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_SymDifference" title="ST_SymDifference">ST_SymDifference</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_Touches" title="ST_Touches">ST_Touches</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_TransScale" title="ST_TransScale">ST_TransScale</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Translate" title="ST_Translate">ST_Translate</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Union" title="ST_Union">ST_Union</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_WKBToSQL" title="ST_WKBToSQL">ST_WKBToSQL</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_WKTToSQL" title="ST_WKTToSQL">ST_WKTToSQL</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Within" title="ST_Within">ST_Within</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_X" title="ST_X">ST_X</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_XMax" title="ST_XMax">ST_XMax</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_XMin" title="ST_XMin">ST_XMin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Y" title="ST_Y">ST_Y</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_YMax" title="ST_YMax">ST_YMax</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_YMin" title="ST_YMin">ST_YMin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Z" title="ST_Z">ST_Z</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ZMax" title="ST_ZMax">ST_ZMax</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_ZMin" title="ST_ZMin">ST_ZMin</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#ST_Zmflag" title="ST_Zmflag">ST_Zmflag</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_distance_box_nd" title="&lt;&lt;#&gt;&gt;">&lt;&lt;#&gt;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_distance_centroid_nd" title="&lt;&lt;-&gt;&gt;">&lt;&lt;-&gt;&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_distance_cpa" title="|=|">|=|</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_autocast.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a>
              </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_checkmark.png"></span></td></tr><tr><td align="left">
                <a class="link" href="#postgis_backend" title="postgis.backend">postgis.backend</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td><td align="center"> </td></tr><tr><td align="left">
                <a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a>
              </td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"> </td><td align="center"> </td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td><td align="center"><span class="inlinemediaobject"><img src="images/matrix_sfcgal_required.png"></span></td></tr></tbody></table></div><p>
    </p></div><div class="sect1" title="14.12. New, Enhanced or changed PostGIS Functions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="NewFunctions"></a>14.12. New, Enhanced or changed PostGIS Functions</h2></div></div></div><div class="toc"><dl><dt><span class="sect2"><a href="#NewFunctions_2_3">14.12.1. PostGIS Functions new or enhanced in 2.3</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_2">14.12.2. PostGIS Functions new or enhanced in 2.2</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_2">14.12.3. PostGIS functions breaking changes in 2.2</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_1">14.12.4. PostGIS Functions new or enhanced in 2.1</a></span></dt><dt><span class="sect2"><a href="#ChangedFunctions_2_1">14.12.5. PostGIS functions breaking changes in 2.1</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0">14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_2_0_Changed">14.12.7. PostGIS Functions changed behavior in 2.0</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_5">14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_4">14.12.9. PostGIS Functions new, behavior changed, or enhanced in 1.4</a></span></dt><dt><span class="sect2"><a href="#NewFunctions_1_3">14.12.10. PostGIS Functions new in 1.3</a></span></dt></dl></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS 2.3.0: PostgreSQL 9.6+ support for parallel queries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS 2.3.0: PostgreSQL 9.4+ support for BRIN indexes. Refer to <a class="xref" href="#brin_indexes" title="4.6.2. BRIN Indexes">Section 4.6.2, “BRIN Indexes”</a>.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS 2.3.0: Tiger Geocoder upgraded to work with TIGER 2016 data.</p></td></tr></table></div><div class="sect2" title="14.12.1. PostGIS Functions new or enhanced in 2.3"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_2_3"></a>14.12.1. PostGIS Functions new or enhanced in 2.3</h3></div></div></div><p>The functions given below are PostGIS functions that were added or enhanced.</p><p>Functions new in PostGIS 2.3</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_GeometricMedian" title="ST_GeometricMedian">
			  ST_GeometricMedian
		  </a> - Availability: 2.3.0 Returns the geometric median of a MultiPoint.</li><li class="listitem"><a class="link" href="#overlaps_nd_geometry_gidx" title="&amp;&amp;&amp;(geometry,gidx)">&amp;&amp;&amp;(geometry,gidx)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a geometry's (cached) n-D bounding box intersects a n-D float precision bounding box (GIDX).</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_geometry" title="&amp;&amp;&amp;(gidx,geometry)">&amp;&amp;&amp;(gidx,geometry)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a n-D float precision bounding box (GIDX) intersects a geometry's (cached) n-D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_nd_gidx_gidx" title="&amp;&amp;&amp;(gidx,gidx)">&amp;&amp;&amp;(gidx,gidx)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if two n-D float precision bounding boxes (GIDX) intersect each other.</li><li class="listitem"><a class="link" href="#overlaps_box2df_box2df" title="&amp;&amp;(box2df,box2df)">&amp;&amp;(box2df,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if two 2D float precision bounding boxes (BOX2DF) intersect each other.</li><li class="listitem"><a class="link" href="#overlaps_box2df_geometry" title="&amp;&amp;(box2df,geometry)">&amp;&amp;(box2df,geometry)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a 2D float precision bounding box (BOX2DF) intersects a geometry's (cached) 2D bounding box.</li><li class="listitem"><a class="link" href="#overlaps_geometry_box2df" title="&amp;&amp;(geometry,box2df)">&amp;&amp;(geometry,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a geometry's (cached) 2D bounding box intersects a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#is_contained_box2df_box2df" title="@(box2df,box2df)">@(box2df,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into another 2D float precision bounding box.</li><li class="listitem"><a class="link" href="#is_contained_box2df_geometry" title="@(box2df,geometry)">@(box2df,geometry)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a 2D float precision bounding box (BOX2DF) is contained into a geometry's 2D bounding box.</li><li class="listitem"><a class="link" href="#is_contained_geometry_box2df" title="@(geometry,box2df)">@(geometry,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a geometry's 2D bounding box is contained into a 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#Populate_Topology_Layer" title="Populate_Topology_Layer">Populate_Topology_Layer</a> - Availability: 2.3.0 Adds missing entries to topology.layer table by reading metadata from topo tables.</li><li class="listitem"><a class="link" href="#ST_ClusterDBSCAN" title="ST_ClusterDBSCAN">ST_ClusterDBSCAN</a> - Availability: 2.3.0 - requires GEOS  Windowing function that returns integer id for the cluster each input geometry is in based on 2D implementation of Density-based spatial clustering of applications with noise (DBSCAN) algorithm.</li><li class="listitem"><a class="link" href="#ST_ClusterKMeans" title="ST_ClusterKMeans">ST_ClusterKMeans</a> - Availability: 2.3.0 - requires GEOS  Windowing function that returns integer id for the cluster each input geometry is in.</li><li class="listitem"><a class="link" href="#ST_GeneratePoints" title="ST_GeneratePoints">ST_GeneratePoints</a> - Availability: 2.3.0 Converts a polygon or multi-polygon into a multi-point composed of randomly location points within the original areas.</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - Availability: 2.3.0 -  Support for multipoint input elements was introduced Creates a Linestring from point, multipoint, or line geometries.</li><li class="listitem"><a class="link" href="#ST_MinimumClearance" title="ST_MinimumClearance">ST_MinimumClearance</a> - Availability: 2.3.0 - requires GEOS &gt;= 3.6.0 Returns the minimum clearance of a geometry, a measure of a geometry's robustness.</li><li class="listitem"><a class="link" href="#ST_MinimumClearanceLine" title="ST_MinimumClearanceLine">ST_MinimumClearanceLine</a> - Availability: 2.3.0 - requires GEOS &gt;= 3.6.0 Returns the two-point LineString spanning a geometry's minimum clearance.</li><li class="listitem"><a class="link" href="#ST_Points" title="ST_Points">ST_Points</a> - Availability: 2.3.0 Returns a MultiPoint containing all of the coordinates of a geometry.</li><li class="listitem"><a class="link" href="#ST_VoronoiLines" title="ST_VoronoiLines">ST_VoronoiLines</a> - Availability: 2.3.0 - requires GEOS &gt;= 3.5.0. Returns the boundaries between the cells of the Voronoi diagram constructed from the vertices of a geometry.</li><li class="listitem"><a class="link" href="#ST_VoronoiPolygons" title="ST_VoronoiPolygons">ST_VoronoiPolygons</a> - Availability: 2.3.0 - requires GEOS &gt;= 3.5.0. Returns the cells of the Voronoi diagram constructed from the vertices of a geometry.</li><li class="listitem"><a class="link" href="#ST_WrapX" title="ST_WrapX">ST_WrapX</a> - Availability: 2.3.0 Wrap a geometry around an X value.</li><li class="listitem"><a class="link" href="#TopoGeom_addElement" title="TopoGeom_addElement">TopoGeom_addElement</a> - Availability: 2.3 Add an element to the definition of a TopoGeometry</li><li class="listitem"><a class="link" href="#TopoGeom_remElement" title="TopoGeom_remElement">TopoGeom_remElement</a> - Availability: 2.3 Remove an element from the definition of a TopoGeometry</li><li class="listitem"><a class="link" href="#contains_box2df_box2df" title="~(box2df,box2df)">~(box2df,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a 2D float precision bounding box (BOX2DF) contains another 2D float precision bounding box (BOX2DF).</li><li class="listitem"><a class="link" href="#contains_box2df_geometry" title="~(box2df,geometry)">~(box2df,geometry)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a 2D float precision bounding box (BOX2DF) contains a geometry's 2D bonding box.</li><li class="listitem"><a class="link" href="#contains_geometry_box2df" title="~(geometry,box2df)">~(geometry,box2df)</a> - Availability: 2.3.0 support for Block Range INdexes (BRIN) was introduced. Requires PostgreSQL 9.5+. Returns TRUE if a geometry's 2D bonding box contains a 2D float precision bounding box (GIDX).</li></ul></div><p>The functions given below are PostGIS functions that are enhanced in PostGIS 2.3.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_Contains" title="ST_Contains">ST_Contains</a> - Enhanced: 2.3.0 Enhancement to PIP short-circuit extended to support MultiPoints with few points. Prior versions only supported point in polygon.</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - Enhanced: 2.3.0 Enhancement to PIP short-circuit for geometry extended to support MultiPoints with few points. Prior versions only supported point in polygon.</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - Enhanced: 2.3.0 support was added to expand a box by different amounts in different dimensions.</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - Enhanced: 2.3.0 Enhancement to PIP short-circuit extended to support MultiPoints with few points. Prior versions only supported point in polygon.</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - Enhanced: 2.3.0 Segmentize geography now uses equal length segments</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - Enhanced: 2.3.0 support for direct PROJ.4 text was introduced.</li><li class="listitem"><a class="link" href="#ST_Within" title="ST_Within">ST_Within</a> - Enhanced: 2.3.0 Enhancement to PIP short-circuit for geometry extended to support MultiPoints with few points. Prior versions only supported point in polygon.</li></ul></div></div><div class="sect2" title="14.12.2. PostGIS Functions new or enhanced in 2.2"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_2_2"></a>14.12.2. PostGIS Functions new or enhanced in 2.2</h3></div></div></div><p>The functions given below are PostGIS functions that were added or enhanced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>postgis_sfcgal now can be installed as an extension using CREATE EXTENSION postgis_sfcgal;</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS 2.2.0: Tiger Geocoder upgraded to work with TIGER 2015 data.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>address_standardizer, address_standardizer_data_us extensions for standardizing address data refer to <a class="xref" href="#Address_Standardizer" title="Chapter 12. Address Standardizer">Chapter 12, <i>Address Standardizer</i></a> for details.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Many functions in topology rewritten as C functions for increased performance.</p></td></tr></table></div><p>Functions new in PostGIS 2.2</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#geometry_distance_box_nd" title="&lt;&lt;#&gt;&gt;">&lt;&lt;#&gt;&gt;</a> - Availability: 2.2.0 -- KNN only available for PostgreSQL 9.1+ Returns the n-D distance between A and B bounding boxes.</li><li class="listitem"><a class="link" href="#geometry_distance_centroid_nd" title="&lt;&lt;-&gt;&gt;">&lt;&lt;-&gt;&gt;</a> - Availability: 2.2.0 -- KNN only available for PostgreSQL 9.1+ Returns the n-D distance between the centroids of A and B boundingboxes.</li><li class="listitem"><a class="link" href="#ST_3DDifference" title="ST_3DDifference">ST_3DDifference</a> - Availability: 2.2.0 Perform 3D difference</li><li class="listitem"><a class="link" href="#ST_3DUnion" title="ST_3DUnion">ST_3DUnion</a> - Availability: 2.2.0 Perform 3D union</li><li class="listitem"><a class="link" href="#ST_ApproximateMedialAxis" title="ST_ApproximateMedialAxis">ST_ApproximateMedialAxis</a> - Availability: 2.2.0 Compute the approximate medial axis of an areal geometry.</li><li class="listitem"><a class="link" href="#ST_AsEncodedPolyline" title="ST_AsEncodedPolyline">ST_AsEncodedPolyline</a> - Availability: 2.2.0 Returns an Encoded Polyline from a LineString geometry.</li><li class="listitem"><a class="link" href="#ST_AsTWKB" title="ST_AsTWKB">ST_AsTWKB</a> - Availability: 2.2.0 Returns the geometry as TWKB, aka "Tiny Well-Known Binary"</li><li class="listitem"><a class="link" href="#ST_BoundingDiagonal" title="ST_BoundingDiagonal">ST_BoundingDiagonal</a> - Availability: 2.2.0 Returns the diagonal of the supplied geometry's bounding box.</li><li class="listitem"><a class="link" href="#ST_CPAWithin" title="ST_CPAWithin">ST_CPAWithin</a> - Availability: 2.2.0 Returns true if the trajectories' closest points of approachare within the specified distance.</li><li class="listitem"><a class="link" href="#ST_ClipByBox2D" title="ST_ClipByBox2D">ST_ClipByBox2D</a> - Availability: 2.2.0 - requires GEOS &gt;= 3.5.0. Returns the portion of a geometry falling within a rectangle.</li><li class="listitem"><a class="link" href="#ST_ClosestPointOfApproach" title="ST_ClosestPointOfApproach">ST_ClosestPointOfApproach</a> - Availability: 2.2.0 Returns the measure at which points interpolated along two lines are closest.</li><li class="listitem"><a class="link" href="#ST_ClusterIntersecting" title="ST_ClusterIntersecting">ST_ClusterIntersecting</a> - Availability: 2.2.0 - requires GEOS  Aggregate. Returns an array with the connected components of a set of geometries</li><li class="listitem"><a class="link" href="#ST_ClusterWithin" title="ST_ClusterWithin">ST_ClusterWithin</a> - Availability: 2.2.0 - requires GEOS Aggregate. Returns an array of GeometryCollections, where each GeometryCollection represents a set of geometries separated by no more than the specified distance.</li><li class="listitem"><a class="link" href="#RT_ST_CountAgg" title="ST_CountAgg">ST_CountAgg</a> - Availability: 2.2.0  Aggregate. Returns the number of pixels in a given band of a set of rasters. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the NODATA value.</li><li class="listitem"><a class="link" href="#RT_CreateOverview" title="ST_CreateOverview">ST_CreateOverview</a> - Availability: 2.2.0 Create an reduced resolution version of a given raster coverage.</li><li class="listitem"><a class="link" href="#ST_DistanceCPA" title="ST_DistanceCPA">ST_DistanceCPA</a> - Availability: 2.2.0 Returns the distance between closest points of approach in two trajectories.</li><li class="listitem"><a class="link" href="#ST_ForceCurve" title="ST_ForceCurve">ST_ForceCurve</a> - Availability: 2.2.0 Upcast a geometry into its curved type, if applicable.</li><li class="listitem"><a class="link" href="#ST_IsPlanar" title="ST_IsPlanar">ST_IsPlanar</a> - Availability: 2.2.0: This was documented in 2.1.0 but got accidentally left out in 2.1 release. Check if a surface is or not planar</li><li class="listitem"><a class="link" href="#ST_IsSolid" title="ST_IsSolid">ST_IsSolid</a> - Availability: 2.2.0 Test if the geometry is a solid. No validity check is performed.</li><li class="listitem"><a class="link" href="#ST_IsValidTrajectory" title="ST_IsValidTrajectory">ST_IsValidTrajectory</a> - Availability: 2.2.0 Returns true if the geometry is a valid trajectory.</li><li class="listitem"><a class="link" href="#ST_LineFromEncodedPolyline" title="ST_LineFromEncodedPolyline">ST_LineFromEncodedPolyline</a> - Availability: 2.2.0 Creates a LineString from an Encoded Polyline.</li><li class="listitem"><a class="link" href="#ST_MakeSolid" title="ST_MakeSolid">ST_MakeSolid</a> - Availability: 2.2.0 Cast the geometry into a solid. No check is performed. To obtain a valid solid, the input geometry must be a closed Polyhedral Surface or a closed TIN.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> - Availability: 2.2.0: Ability to add a mask Callback function version - Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.</li><li class="listitem"><a class="link" href="#RT_ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Availability: 2.2.0 Returns the amount of space (in bytes) the raster takes.</li><li class="listitem"><a class="link" href="#ST_RemoveRepeatedPoints" title="ST_RemoveRepeatedPoints">ST_RemoveRepeatedPoints</a> - Availability: 2.2.0 Returns a version of the given geometry with duplicated points removed.</li><li class="listitem"><a class="link" href="#RT_Retile" title="ST_Retile">ST_Retile</a> - Availability: 2.2.0 Return a set of configured tiles from an arbitrarily tiled raster coverage.</li><li class="listitem"><a class="link" href="#ST_SetEffectiveArea" title="ST_SetEffectiveArea">ST_SetEffectiveArea</a> - Availability: 2.2.0 Sets the effective area for each vertex, storing the value in the M ordinate. A simplified geometry can then be generated by filtering on the M ordinate.</li><li class="listitem"><a class="link" href="#ST_SimplifyVW" title="ST_SimplifyVW">ST_SimplifyVW</a> - Availability: 2.2.0 Returns a "simplified" version of the given geometry using the Visvalingam-Whyatt algorithm</li><li class="listitem"><a class="link" href="#ST_Subdivide" title="ST_Subdivide">ST_Subdivide</a> - Availability: 2.2.0 requires GEOS &gt;= 3.5.0. Returns a set of geometry where no geometry in the set has more than the specified number of vertices.</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStatsAgg" title="ST_SummaryStatsAgg">ST_SummaryStatsAgg</a> - Availability: 2.2.0  Aggregate. Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a set of raster. Band 1 is assumed is no band is specified.</li><li class="listitem"><a class="link" href="#ST_SwapOrdinates" title="ST_SwapOrdinates">ST_SwapOrdinates</a> - Availability: 2.2.0 Returns a version of the given geometry with given ordinate values swapped.</li><li class="listitem"><a class="link" href="#ST_Volume" title="ST_Volume">ST_Volume</a> - Availability: 2.2.0 Computes the volume of a 3D solid. If applied to surface (even closed) geometries will return 0.</li><li class="listitem"><a class="link" href="#parse_address" title="parse_address">parse_address</a> - Availability: 2.2.0 Takes a 1 line address and breaks into parts</li><li class="listitem"><a class="link" href="#postgis_enable_outdb_rasters" title="postgis.enable_outdb_rasters">postgis.enable_outdb_rasters</a> - Availability: 2.2.0 A boolean configuration option to enable access to out-db raster bands.</li><li class="listitem"><a class="link" href="#postgis_gdal_datapath" title="postgis.gdal_datapath">postgis.gdal_datapath</a> - Availability: 2.2.0 A configuration option to assign the value of GDAL's GDAL_DATA option. If not set, the environmentally set GDAL_DATA variable is used.</li><li class="listitem"><a class="link" href="#postgis_gdal_enabled_drivers" title="postgis.gdal_enabled_drivers">postgis.gdal_enabled_drivers</a> - Availability: 2.2.0 A configuration option to set the enabled GDAL drivers in the PostGIS environment. Affects the GDAL configuration variable GDAL_SKIP.</li><li class="listitem"><a class="link" href="#standardize_address" title="standardize_address">standardize_address</a> - Availability: 2.2.0 Returns an stdaddr form of an input address utilizing lex, gaz, and rule tables.</li><li class="listitem"><a class="link" href="#geometry_distance_cpa" title="|=|">|=|</a> - Availability: 2.2.0. Index-supported only available for PostgreSQL 9.5+ Returns the distance between A and B trajectories at their closest point of approach.</li></ul></div><p>The functions given below are PostGIS functions that are enhanced in PostGIS 2.2.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AsTopoJSON" title="AsTopoJSON">AsTopoJSON</a> - Enhanced: 2.2.1 added support for puntal inputs</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - Enhanced: 2.2.0 - measurement on spheroid performed with GeographicLib for improved accuracy and robustness.  Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - Enhanced: 2.2.0: Support for GeoCoordinates and axis (x/y, long/lat) flipping.  Look at options for details.</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - Enhanced: 2.2.0 measurement on spheroid performed with GeographicLib for improved accuracy and robustness.  Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - Enhanced: 2.2.0 - measurement on spheroid performed with GeographicLib for improved accuracy and robustness. Requires Proj &gt;= 4.9.0 to take advantage of the new feature.</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - Enhanced: 2.2.0 support for scaling all dimension (geometry parameter) was introduced.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Enhanced: 2.2.0 Added support for TIN and Curves</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - Enhanced: 2.2.0 -- True KNN ("K nearest neighbor") behavior for geometry and geography for PostgreSQL 9.5+. Note for geography KNN is based on sphere rather than spheroid.  For PostgreSQL 9.4 and below, geography support is new but only supports centroid box.</li></ul></div></div><div class="sect2" title="14.12.3. PostGIS functions breaking changes in 2.2"><div class="titlepage"><div><div><h3 class="title"><a name="ChangedFunctions_2_2"></a>14.12.3. PostGIS functions breaking changes in 2.2</h3></div></div></div><p>The functions given below are PostGIS functions that have possibly breaking changes in PostGIS 2.2.  If you use any of these, you may need to check your existing code.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a> - Changed: 2.2.0 : default settings are now kept in a table called geocode_settings_default. Use customized settingsa are in geocode_settings and only contain those that have been set by user.</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - Changed: 2.2.0 - In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - Changed: 2.2.0 - In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - Changed: 2.2.0 - if 2 2D geometries are input, a 2D point is returned (instead of old behavior assuming 0 for missing Z). In case of 2D and 3D, Z is no longer assumed to be 0 for missing Z.</li><li class="listitem"><a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a> - Changed: 2.2.0 In prior versions this used to be called ST_Distance_Sphere</li><li class="listitem"><a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a> - Changed: 2.2.0 In prior versions this used to be called ST_Distance_Spheroid</li><li class="listitem"><a class="link" href="#ST_Length_Spheroid" title="ST_LengthSpheroid">ST_LengthSpheroid</a> - Changed: 2.2.0 In prior versions this used to be called ST_Length_Spheroid and used to have a ST_3DLength_Spheroid alias</li><li class="listitem"><a class="link" href="#ST_MemSize" title="ST_MemSize">ST_MemSize</a> - Changed: 2.2.0 name changed to ST_MemSize to follow naming convention.  In prior versions this function was called ST_Mem_Size, old name deprecated though still available.</li><li class="listitem"><a class="link" href="#ST_Point_Inside_Circle" title="ST_PointInsideCircle">ST_PointInsideCircle</a> - Changed: 2.2.0 In prior versions this used to be called ST_Point_Inside_Circle</li><li class="listitem"><a class="link" href="#ST_Split" title="ST_Split">ST_Split</a> - Changed: 2.2.0 support for splitting a line by a multiline, a multipoint or (multi)polygon boundary was introduced.</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - Changed: 2.2.0 values for id1 and id2 were swapped for 'edge crosses node' to be consistent with error description.</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - Changed: 2.2.0 -- For PostgreSQL 9.5 users, old Hybrid syntax may be slower, so you'll want to get rid of that hack if you are running your code only on PostGIS 2.2+ 9.5+.  See examples below.</li></ul></div></div><div class="sect2" title="14.12.4. PostGIS Functions new or enhanced in 2.1"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_2_1"></a>14.12.4. PostGIS Functions new or enhanced in 2.1</h3></div></div></div><p>The functions given below are PostGIS functions that were added or enhanced.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>More Topology performance Improvements.  Please refer to <a class="xref" href="#Topology" title="Chapter 11. Topology">Chapter 11, <i>Topology</i></a> for more details.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Bug fixes (particularly with handling of out-of-band rasters), many new functions (often shortening code you have to write to accomplish a common task) and massive speed improvements to raster functionality. Refer to <a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a> for more details. </p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>PostGIS 2.1.0: Tiger Geocoder upgraded to work with TIGER 2012 census data. <code class="varname">geocode_settings</code> added for debugging and tweaking rating preferences, loader made less greedy, now only downloads tables to be loaded. PostGIS 2.1.1: Tiger Geocoder upgraded to work with TIGER 2013 data. 
					Please refer to <a class="xref" href="#Tiger_Geocoder" title="13.1. Tiger Geocoder">Section 13.1, “Tiger Geocoder”</a> for more details.</p></td></tr></table></div><p>Functions new in PostGIS 2.1</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AsTopoJSON" title="AsTopoJSON">AsTopoJSON</a> - Availability: 2.1.0  Returns the TopoJSON representation of a topogeometry.</li><li class="listitem"><a class="link" href="#Drop_Nation_Tables_Generate_Script" title="Drop_Nation_Tables_Generate_Script">Drop_Nation_Tables_Generate_Script</a> - Availability: 2.1.0 Generates a script that drops all tables in the specified schema that start with county_all, state_all or state code followed by county or state.</li><li class="listitem"><a class="link" href="#Get_Geocode_Setting" title="Get_Geocode_Setting">Get_Geocode_Setting</a> - Availability: 2.1.0 Returns value of specific setting stored in tiger.geocode_settings table.</li><li class="listitem"><a class="link" href="#Loader_Generate_Nation_Script" title="Loader_Generate_Nation_Script">Loader_Generate_Nation_Script</a> - Availability: 2.1.0  Generates a shell script for the specified platform that loads in the county and state lookup tables.</li><li class="listitem"><a class="link" href="#Pagc_Normalize_Address" title="Pagc_Normalize_Address">Pagc_Normalize_Address</a> - Availability: 2.1.0 Given a textual street address, returns a composite norm_addy type that has road suffix, prefix and type standardized, street, streetname etc. broken into separate fields. This function will work with just the lookup data packaged with the tiger_geocoder (no need for tiger census data). Requires address_standardizer extension.</li><li class="listitem"><a class="link" href="#ST_3DArea" title="ST_3DArea">ST_3DArea</a> - Availability: 2.1.0 Computes area of 3D surface geometries. Will return 0 for solids.</li><li class="listitem"><a class="link" href="#ST_3DIntersection" title="ST_3DIntersection">ST_3DIntersection</a> - Availability: 2.1.0 Perform 3D intersection</li><li class="listitem"><a class="link" href="#ST_Box2dFromGeoHash" title="ST_Box2dFromGeoHash">ST_Box2dFromGeoHash</a> - Availability: 2.1.0 Return a BOX2D from a GeoHash string.</li><li class="listitem"><a class="link" href="#RT_ST_ColorMap" title="ST_ColorMap">ST_ColorMap</a> - Availability: 2.1.0  Creates a new raster of up to four 8BUI bands (grayscale, RGB, RGBA) from the source raster and a specified band. Band 1 is assumed if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_Contains" title="ST_Contains">ST_Contains</a> - Availability: 2.1.0 Return true if no points of raster rastB lie in the exterior of raster rastA and at least one point of the interior of rastB lies in the interior of rastA.</li><li class="listitem"><a class="link" href="#RT_ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - Availability: 2.1.0 Return true if rastB intersects the interior of rastA but not the boundary or exterior of rastA.</li><li class="listitem"><a class="link" href="#RT_ST_CoveredBy" title="ST_CoveredBy">ST_CoveredBy</a> - Availability: 2.1.0 Return true if no points of raster rastA lie outside raster rastB.</li><li class="listitem"><a class="link" href="#RT_ST_Covers" title="ST_Covers">ST_Covers</a> - Availability: 2.1.0 Return true if no points of raster rastB lie outside raster rastA.</li><li class="listitem"><a class="link" href="#RT_ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - Availability: 2.1.0 Return true if rasters rastA and rastB are fully within the specified distance of each other.</li><li class="listitem"><a class="link" href="#RT_ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Availability: 2.1.0 Return true if rasters rastA and rastB are within the specified distance of each other.</li><li class="listitem"><a class="link" href="#ST_DelaunayTriangles" title="ST_DelaunayTriangles">ST_DelaunayTriangles</a> - Availability: 2.1.0 - requires GEOS &gt;= 3.4.0. Return a Delaunay triangulation around the given input points.</li><li class="listitem"><a class="link" href="#RT_ST_Disjoint" title="ST_Disjoint">ST_Disjoint</a> - Availability: 2.1.0 Return true if raster rastA does not spatially intersect rastB.</li><li class="listitem"><a class="link" href="#RT_ST_DumpValues" title="ST_DumpValues">ST_DumpValues</a> - Availability: 2.1.0 Get the values of the specified band as a 2-dimension array.</li><li class="listitem"><a class="link" href="#ST_Extrude" title="ST_Extrude">ST_Extrude</a> - Availability: 2.1.0 Extrude a surface to a related volume</li><li class="listitem"><a class="link" href="#ST_ForceLHR" title="ST_ForceLHR">ST_ForceLHR</a> - Availability: 2.1.0 Force LHR orientation</li><li class="listitem"><a class="link" href="#RT_ST_FromGDALRaster" title="ST_FromGDALRaster">ST_FromGDALRaster</a> - Availability: 2.1.0 Returns a raster from a supported GDAL raster file.</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoHash" title="ST_GeomFromGeoHash">ST_GeomFromGeoHash</a> - Availability: 2.1.0 Return a geometry from a GeoHash string.</li><li class="listitem"><a class="link" href="#RT_ST_InvDistWeight4ma" title="ST_InvDistWeight4ma">ST_InvDistWeight4ma</a> - Availability: 2.1.0 Raster processing function that interpolates a pixel's value from the pixel's neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra" title="ST_MapAlgebra">ST_MapAlgebra</a> - Availability: 2.1.0 Callback function version - Returns a one-band raster given one or more input rasters, band indexes and one user-specified callback function.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebra_expr" title="ST_MapAlgebra">ST_MapAlgebra</a> - Availability: 2.1.0 Expression version - Returns a one-band raster given one or two input rasters, band indexes and one or more user-specified SQL expressions.</li><li class="listitem"><a class="link" href="#RT_ST_MinConvexHull" title="ST_MinConvexHull">ST_MinConvexHull</a> - Availability: 2.1.0  Return the convex hull geometry of the raster excluding NODATA pixels.</li><li class="listitem"><a class="link" href="#RT_ST_MinDist4ma" title="ST_MinDist4ma">ST_MinDist4ma</a> - Availability: 2.1.0 Raster processing function that returns the minimum distance (in number of pixels) between the pixel of interest and a neighboring pixel with value.</li><li class="listitem"><a class="link" href="#ST_MinkowskiSum" title="ST_MinkowskiSum">ST_MinkowskiSum</a> - Availability: 2.1.0 Performs Minkowski sum</li><li class="listitem"><a class="link" href="#RT_ST_NearestValue" title="ST_NearestValue">ST_NearestValue</a> - Availability: 2.1.0 Returns the nearest non-NODATA value of a given band's pixel specified by a columnx and rowy or a geometric point expressed in the same spatial reference coordinate system as the raster.</li><li class="listitem"><a class="link" href="#RT_ST_Neighborhood" title="ST_Neighborhood">ST_Neighborhood</a> - Availability: 2.1.0 Returns a 2-D double precision array of the non-NODATA values around a given band's pixel specified by either a columnX and rowY or a geometric point expressed in the same spatial reference coordinate system as the raster.</li><li class="listitem"><a class="link" href="#RT_ST_NotSameAlignmentReason" title="ST_NotSameAlignmentReason">ST_NotSameAlignmentReason</a> - Availability: 2.1.0 Returns text stating if rasters are aligned and if not aligned, a reason why.</li><li class="listitem"><a class="link" href="#ST_Orientation" title="ST_Orientation">ST_Orientation</a> - Availability: 2.1.0 Determine surface orientation</li><li class="listitem"><a class="link" href="#RT_ST_Overlaps" title="ST_Overlaps">ST_Overlaps</a> - Availability: 2.1.0 Return true if raster rastA and rastB intersect but one does not completely contain the other.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroid" title="ST_PixelAsCentroid">ST_PixelAsCentroid</a> - Availability: 2.1.0 Returns the centroid (point geometry) of the area represented by a pixel.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - Availability: 2.1.0 Returns the centroid (point geometry) for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel. The point geometry is the centroid of the area represented by a pixel.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoint" title="ST_PixelAsPoint">ST_PixelAsPoint</a> - Availability: 2.1.0 Returns a point geometry of the pixel's upper-left corner.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - Availability: 2.1.0 Returns a point geometry for each pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel. The coordinates of the point geometry are of the pixel's upper-left corner.</li><li class="listitem"><a class="link" href="#RT_ST_PixelOfValue" title="ST_PixelOfValue">ST_PixelOfValue</a> - Availability: 2.1.0 Get the columnx, rowy coordinates of the pixel whose value equals the search value.</li><li class="listitem"><a class="link" href="#ST_PointFromGeoHash" title="ST_PointFromGeoHash">ST_PointFromGeoHash</a> - Availability: 2.1.0 Return a point from a GeoHash string.</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoord" title="ST_RasterToWorldCoord">ST_RasterToWorldCoord</a> - Availability: 2.1.0 Returns the raster's upper left corner as geometric X and Y (longitude and latitude) given a column and row. Column and row starts at 1.</li><li class="listitem"><a class="link" href="#RT_ST_Resize" title="ST_Resize">ST_Resize</a> - Availability: 2.1.0  Requires GDAL 1.6.1+ Resize a raster to a new width/height</li><li class="listitem"><a class="link" href="#RT_ST_Roughness" title="ST_Roughness">ST_Roughness</a> - Availability: 2.1.0 Returns a raster with the calculated "roughness" of a DEM.</li><li class="listitem"><a class="link" href="#RT_ST_SetValues" title="ST_SetValues">ST_SetValues</a> - Availability: 2.1.0 Returns modified raster resulting from setting the values of a given band.</li><li class="listitem"><a class="link" href="#TP_ST_Simplify" title="ST_Simplify">ST_Simplify</a> - Availability: 2.1.0 Returns a "simplified" geometry version of the given TopoGeometry using the Douglas-Peucker algorithm.</li><li class="listitem"><a class="link" href="#ST_StraightSkeleton" title="ST_StraightSkeleton">ST_StraightSkeleton</a> - Availability: 2.1.0 Compute a straight skeleton from a geometry</li><li class="listitem"><a class="link" href="#RT_ST_Summary" title="ST_Summary">ST_Summary</a> - Availability: 2.1.0 Returns a text summary of the contents of the raster.</li><li class="listitem"><a class="link" href="#RT_ST_TPI" title="ST_TPI">ST_TPI</a> - Availability: 2.1.0 Returns a raster with the calculated Topographic Position Index.</li><li class="listitem"><a class="link" href="#RT_ST_TRI" title="ST_TRI">ST_TRI</a> - Availability: 2.1.0 Returns a raster with the calculated Terrain Ruggedness Index.</li><li class="listitem"><a class="link" href="#ST_Tesselate" title="ST_Tesselate">ST_Tesselate</a> - Availability: 2.1.0 Perform surface Tesselation of a polygon or polyhedralsurface and returns as a TIN or collection of TINS</li><li class="listitem"><a class="link" href="#RT_ST_Tile" title="ST_Tile">ST_Tile</a> - Availability: 2.1.0 Returns a set of rasters resulting from the split of the input raster based upon the desired dimensions of the output rasters.</li><li class="listitem"><a class="link" href="#RT_ST_Touches" title="ST_Touches">ST_Touches</a> - Availability: 2.1.0 Return true if raster rastA and rastB have at least one point in common but their interiors do not intersect.</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Availability: 2.1.0 ST_Union(rast, unionarg) variant was introduced. Returns the union of a set of raster tiles into a single raster composed of 1 or more bands.</li><li class="listitem"><a class="link" href="#RT_ST_Within" title="ST_Within">ST_Within</a> - Availability: 2.1.0 Return true if no points of raster rastA lie in the exterior of raster rastB and at least one point of the interior of rastA lies in the interior of rastB.</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoord" title="ST_WorldToRasterCoord">ST_WorldToRasterCoord</a> - Availability: 2.1.0 Returns the upper left corner as column and row given geometric X and Y (longitude and latitude) or a point geometry expressed in the spatial reference coordinate system of the raster.</li><li class="listitem"><a class="link" href="#Set_Geocode_Setting" title="Set_Geocode_Setting">Set_Geocode_Setting</a> - Availability: 2.1.0 Sets a setting that affects behavior of geocoder functions.</li><li class="listitem"><a class="link" href="#RT_UpdateRasterSRID" title="UpdateRasterSRID">UpdateRasterSRID</a> - Availability: 2.1.0 Change the SRID of all rasters in the user-specified column and table.</li><li class="listitem"><a class="link" href="#clearTopoGeom" title="clearTopoGeom">clearTopoGeom</a> - Availability: 2.1 Clears the content of a topo geometry</li><li class="listitem"><a class="link" href="#postgis_backend" title="postgis.backend">postgis.backend</a> - Availability: 2.1.0 The backend to service a function where GEOS and SFCGAL overlap. Options: geos or sfcgal. Defaults to geos.</li><li class="listitem"><a class="link" href="#postgis_sfcgal_version" title="postgis_sfcgal_version">postgis_sfcgal_version</a> - Availability: 2.1.0 Returns the version of SFCGAL in use</li></ul></div><p>The functions given below are PostGIS functions that are enhanced in PostGIS 2.1.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - Enhanced: 2.1.0 support for addbandarg added.</li><li class="listitem"><a class="link" href="#RT_ST_AddBand" title="ST_AddBand">ST_AddBand</a> - Enhanced: 2.1.0 support for new out-db bands added.</li><li class="listitem"><a class="link" href="#RT_ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Enhanced: 2.1.0 Addition of outasin</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional interpolate_nodata function parameter</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - Enhanced: 2.1.0 Rewritten in C</li><li class="listitem"><a class="link" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional interpolate_nodata function parameter</li><li class="listitem"><a class="link" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - Enhanced: 2.1.0 exclude_nodata_value optional argument was added.</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - Enhanced: 2.1.0 Improved Speed (fully C-Based) and the returning multipolygon is ensured to be valid.</li><li class="listitem"><a class="link" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - Enhanced: 2.1.0 addition of Aggegrate variant</li><li class="listitem"><a class="link" href="#RT_ST_SetGeoReference" title="ST_SetGeoReference">ST_SetGeoReference</a> - Enhanced: 2.1.0 Addition of ST_SetGeoReference(raster, double precision, ...) variant</li><li class="listitem"><a class="link" href="#RT_ST_SetValue" title="ST_SetValue">ST_SetValue</a> - Enhanced: 2.1.0 Geometry variant of ST_SetValue() now supports any geometry type, not just point. The geometry variant is a wrapper around the geomval[] variant of ST_SetValues()</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - Enhanced: 2.1.0 Uses ST_MapAlgebra() and added optional units, scale, interpolate_nodata function parameters</li><li class="listitem"><a class="link" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a> - Enhanced: 2.1.0 Addition of Variant 2</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - Enhanced: 2.1.0 Addition of ST_Transform(rast, alignto) variant</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Enhanced: 2.1.0 Improved Speed (fully C-Based).</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Enhanced: 2.1.0 ST_Union(rast) (variant 1) unions all bands of all input rasters.  Prior versions of PostGIS assumed the first band.</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Enhanced: 2.1.0 ST_Union(rast, uniontype) (variant 4) unions all bands of all input rasters.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Enhanced: 2.1.0 id support was introduced, for GML 3.</li><li class="listitem"><a class="link" href="#ST_Boundary" title="ST_Boundary">ST_Boundary</a> - Enhanced: 2.1.0 support for Triangle was introduced</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Enhanced: 2.1.0 improved speed for geography. See Making Geography faster for details.</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Enhanced: 2.1.0 support for curved geometries was introduced.</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - Enhanced: 2.1.0 improved speed for geography. See Making Geography faster for details.</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - Enhanced: 2.1.0 - support for curved geometries was introduced.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Enhanced: 2.1.0 Faster speed. Reimplemented as native-C.</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - Enhanced: 2.1.0 added support for GEOMETRYCOLLECTION and MULTIPOINT.</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - Enhanced: 2.1.0 support for geography was introduced.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Enhanced: 2.1.0 S flag to denote if has a known spatial reference system</li><li class="listitem"><a class="link" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> - Enhanced: 2.1.0 adds the version taking an existing TopoGeometry.</li></ul></div></div><div class="sect2" title="14.12.5. PostGIS functions breaking changes in 2.1"><div class="titlepage"><div><div><h3 class="title"><a name="ChangedFunctions_2_1"></a>14.12.5. PostGIS functions breaking changes in 2.1</h3></div></div></div><p>The functions given below are PostGIS functions that have possibly breaking changes in PostGIS 2.1.  If you use any of these, you may need to check your existing code.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - Changed: 2.1.0 In prior versions, return values were in radians. Now, return values default to degrees</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - Changed: 2.1.0 In prior versions, azimuth and altitude were expressed in radians. Now, azimuth and altitude are expressed in degrees</li><li class="listitem"><a class="link" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 
					Changed: 2.1.0 The behavior of the ST_Intersects(raster, geometry) variants changed to match that of ST_Intersects(geometry, raster).
				</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsCentroids" title="ST_PixelAsCentroids">ST_PixelAsCentroids</a> - Changed: 2.1.1 Changed behavior of exclude_nodata_value.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPoints" title="ST_PixelAsPoints">ST_PixelAsPoints</a> - Changed: 2.1.1 Changed behavior of exclude_nodata_value.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - Changed: 2.1.1 Changed behavior of exclude_nodata_value.</li><li class="listitem"><a class="link" href="#RT_ST_Polygon" title="ST_Polygon">ST_Polygon</a> - Changed: 2.1.0 In prior versions would sometimes return a polygon, changed to always return multipolygon.</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordX" title="ST_RasterToWorldCoordX">ST_RasterToWorldCoordX</a> - Changed: 2.1.0 In prior versions, this was called ST_Raster2WorldCoordX</li><li class="listitem"><a class="link" href="#RT_ST_RasterToWorldCoordY" title="ST_RasterToWorldCoordY">ST_RasterToWorldCoordY</a> - Changed: 2.1.0 In prior versions, this was called ST_Raster2WorldCoordY</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - Changed: 2.1.0 Parameter srid removed. Variants with a reference raster no longer applies the reference raster's SRID. Use ST_Transform() to reproject raster. Works on rasters with no SRID.</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - Changed: 2.1.0 Works on rasters with no SRID</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - Changed: 2.1.0 Works on rasters with no SRID</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - Changed: 2.1.0 In prior versions, return values were in radians. Now, return values default to degrees</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - Changed: 2.1.0 Works on rasters with no SRID</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordX" title="ST_WorldToRasterCoordX">ST_WorldToRasterCoordX</a> - Changed: 2.1.0 In prior versions, this was called ST_World2RasterCoordX</li><li class="listitem"><a class="link" href="#RT_ST_WorldToRasterCoordY" title="ST_WorldToRasterCoordY">ST_WorldToRasterCoordY</a> - Changed: 2.1.0 In prior versions, this was called ST_World2RasterCoordY</li><li class="listitem"><a class="link" href="#ST_EstimatedExtent" title="ST_EstimatedExtent">ST_EstimatedExtent</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Estimated_Extent.</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_2D.</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3D.</li><li class="listitem"><a class="link" href="#ST_Force_3DM" title="ST_Force3DM">ST_Force3DM</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3DM.</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_3DZ.</li><li class="listitem"><a class="link" href="#ST_Force_4D" title="ST_Force4D">ST_Force4D</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_4D.</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Force_Collection.</li><li class="listitem"><a class="link" href="#ST_LineInterpolatePoint" title="ST_LineInterpolatePoint">ST_LineInterpolatePoint</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Interpolate_Point.</li><li class="listitem"><a class="link" href="#ST_LineLocatePoint" title="ST_LineLocatePoint">ST_LineLocatePoint</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Locate_Point.</li><li class="listitem"><a class="link" href="#ST_LineSubstring" title="ST_LineSubstring">ST_LineSubstring</a> - Changed: 2.1.0. Up to 2.0.x this was called ST_Line_Substring.</li><li class="listitem"><a class="link" href="#ST_Segmentize" title="ST_Segmentize">ST_Segmentize</a> - Changed: 2.1.0 As a result of the introduction of geography support: The construct SELECT ST_Segmentize('LINESTRING(1 2, 3 4)',0.5); will result in ambiguous function error.  You need to have properly typed object e.g. a geometry/geography column, use ST_GeomFromText, ST_GeogFromText or
				SELECT ST_Segmentize('LINESTRING(1 2, 3 4)'::geometry,0.5);</li></ul></div></div><div class="sect2" title="14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_2_0"></a>14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0</h3></div></div></div><p>The functions given below are PostGIS functions that were added, enhanced, or have <a class="xref" href="#NewFunctions_2_0_Changed" title="14.12.7. PostGIS Functions changed behavior in 2.0">Section 14.12.7, “PostGIS Functions changed behavior in 2.0”</a> breaking changes in 2.0 releases.</p><p>New geometry types: TIN and Polyhedral surfaces was introduced in 2.0</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Greatly improved support for Topology.  Please refer to <a class="xref" href="#Topology" title="Chapter 11. Topology">Chapter 11, <i>Topology</i></a> for more details.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>In PostGIS 2.0, raster type and raster functionality has been integrated.  There are way too many new raster functions to list here and all are new so 
					please refer to <a class="xref" href="#RT_reference" title="Chapter 9. Raster Reference">Chapter 9, <i>Raster Reference</i></a> for more details of the raster functions available. Earlier pre-2.0 versions had raster_columns/raster_overviews as real tables. These were changed to views before release.  Functions such as <code class="varname">ST_AddRasterColumn</code> were removed and replaced with <a class="xref" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a>, <a class="xref" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> as a result some apps that created raster tables may need changing.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Tiger Geocoder upgraded to work with TIGER 2010 census data and now included in the core PostGIS documentation.  A reverse geocoder function was also added.
					Please refer to <a class="xref" href="#Tiger_Geocoder" title="13.1. Tiger Geocoder">Section 13.1, “Tiger Geocoder”</a> for more details.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#RT_Raster_Intersect" title="&amp;&amp;">&amp;&amp;</a> - Availability: 2.0.0 Returns TRUE if A's bounding box intersects B's bounding box.</li><li class="listitem"><a class="link" href="#geometry_overlaps_nd" title="&amp;&amp;&amp;">&amp;&amp;&amp;</a> - Availability: 2.0.0 Returns TRUE if A's n-D bounding box intersects B's n-D bounding box.</li><li class="listitem"><a class="link" href="#geometry_distance_box" title="&lt;#&gt;">&lt;#&gt;</a> - Availability: 2.0.0 -- KNN only available for PostgreSQL 9.1+ Returns the 2D distance between A and B bounding boxes.</li><li class="listitem"><a class="link" href="#geometry_distance_knn" title="&lt;-&gt;">&lt;-&gt;</a> - Availability: 2.0.0 -- Weak KNN provides nearest neighbors based on geometry centroid distances instead of true distances. Exact results for points, inexact for all other types. Available for PostgreSQL 9.1+ Returns the 2D distance between A and B.</li><li class="listitem"><a class="link" href="#AddEdge" title="AddEdge">AddEdge</a> - Availability: 2.0.0 requires GEOS &gt;= 3.3.0. Adds a linestring edge to the edge table and associated start and end points to the point nodes table of the specified topology schema using the specified linestring geometry and returns the edgeid of the new (or existing) edge.</li><li class="listitem"><a class="link" href="#AddFace" title="AddFace">AddFace</a> - Availability: 2.0.0 Registers a face primitive to a topology and gets its identifier.</li><li class="listitem"><a class="link" href="#AddNode" title="AddNode">AddNode</a> - Availability: 2.0.0 Adds a point node to the node table in the specified topology schema and returns the nodeid of new node. If point already exists as node, the existing nodeid is returned.</li><li class="listitem"><a class="link" href="#RT_AddOverviewConstraints" title="AddOverviewConstraints">AddOverviewConstraints</a> - Availability: 2.0.0 Tag a raster column as being an overview of another.</li><li class="listitem"><a class="link" href="#RT_AddRasterConstraints" title="AddRasterConstraints">AddRasterConstraints</a> - Availability: 2.0.0 Adds raster constraints to a loaded raster table for a specific column that constrains spatial ref, scaling, blocksize, alignment, bands, band type and a flag to denote if raster column is regularly blocked. The table must be loaded with data for the constraints to be inferred. Returns true of the constraint setting was accomplished and if issues a notice.</li><li class="listitem"><a class="link" href="#AsGML" title="AsGML">AsGML</a> - Availability: 2.0.0  Returns the GML representation of a topogeometry.</li><li class="listitem"><a class="link" href="#CopyTopology" title="CopyTopology">CopyTopology</a> - Availability: 2.0.0 Makes a copy of a topology structure (nodes, edges, faces, layers and TopoGeometries).</li><li class="listitem"><a class="link" href="#RT_DropOverviewConstraints" title="DropOverviewConstraints">DropOverviewConstraints</a> - Availability: 2.0.0 Untag a raster column from being an overview of another.</li><li class="listitem"><a class="link" href="#RT_DropRasterConstraints" title="DropRasterConstraints">DropRasterConstraints</a> - Availability: 2.0.0 Drops PostGIS raster constraints that refer to a raster table column. Useful if you need to reload data or update your raster column data.</li><li class="listitem"><a class="link" href="#Drop_Indexes_Generate_Script" title="Drop_Indexes_Generate_Script">Drop_Indexes_Generate_Script</a> - Availability: 2.0.0 Generates a script that drops all non-primary key and non-unique indexes on tiger schema and user specified schema. Defaults schema to tiger_data if no schema is specified.</li><li class="listitem"><a class="link" href="#Drop_State_Tables_Generate_Script" title="Drop_State_Tables_Generate_Script">Drop_State_Tables_Generate_Script</a> - Availability: 2.0.0 Generates a script that drops all tables in the specified schema that are prefixed with the state abbreviation. Defaults schema to tiger_data if no schema is specified.</li><li class="listitem"><a class="link" href="#Geocode_Intersection" title="Geocode_Intersection">Geocode_Intersection</a> - Availability: 2.0.0 Takes in 2 streets that intersect and a state, city, zip, and outputs a set of possible locations on the first cross street that is at the intersection, also includes a geomout as the point location in NAD 83 long lat, a normalized_address (addy) for each location, and the rating. The lower the rating the more likely the match. Results are sorted by lowest rating first. Can optionally pass in maximum results, defaults to 10. Uses Tiger data (edges, faces, addr), PostgreSQL fuzzy string matching (soundex, levenshtein).</li><li class="listitem"><a class="link" href="#GetEdgeByPoint" title="GetEdgeByPoint">GetEdgeByPoint</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.  Find the edge-id of an edge that intersects a given point</li><li class="listitem"><a class="link" href="#GetFaceByPoint" title="GetFaceByPoint">GetFaceByPoint</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.  Find the face-id of a face that intersects a given point</li><li class="listitem"><a class="link" href="#GetNodeByPoint" title="GetNodeByPoint">GetNodeByPoint</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.  Find the id of a node at a point location</li><li class="listitem"><a class="link" href="#GetNodeEdges" title="GetNodeEdges">GetNodeEdges</a> - Availability: 2.0  Returns an ordered set of edges incident to the given node.</li><li class="listitem"><a class="link" href="#GetRingEdges" title="GetRingEdges">GetRingEdges</a> - Availability: 2.0.0  Returns the ordered set of signed edge identifiers met by walking on ana given edge side.</li><li class="listitem"><a class="link" href="#GetTopoGeomElements" title="GetTopoGeomElements">GetTopoGeomElements</a> - Availability: 2.0.0 Returns a set of topoelement objects containing the topological element_id,element_type of the given TopoGeometry (primitive elements)</li><li class="listitem"><a class="link" href="#GetTopologySRID" title="GetTopologySRID">GetTopologySRID</a> - Availability: 2.0.0 Returns the SRID of a topology in the topology.topology table given the name of the topology.</li><li class="listitem"><a class="link" href="#Get_Tract" title="Get_Tract">Get_Tract</a> - Availability: 2.0.0 Returns census tract or field from tract table of where the geometry is located. Default to returning short name of tract.</li><li class="listitem"><a class="link" href="#Install_Missing_Indexes" title="Install_Missing_Indexes">Install_Missing_Indexes</a> - Availability: 2.0.0 Finds all tables with key columns used in geocoder joins and filter conditions that are missing used indexes on those columns and will add them.</li><li class="listitem"><a class="link" href="#Loader_Generate_Census_Script" title="Loader_Generate_Census_Script">Loader_Generate_Census_Script</a> - Availability: 2.0.0  Generates a shell script for the specified platform for the specified states that will download Tiger census state tract, bg, and tabblocks data tables, stage and load into tiger_data schema. Each state script is returned as a separate record.</li><li class="listitem"><a class="link" href="#Loader_Generate_Script" title="Loader_Generate_Script">Loader_Generate_Script</a> - Availability: 2.0.0 to support Tiger 2010 structured data and load census tract (tract), block groups (bg), and blocks (tabblocks) tables . Generates a shell script for the specified platform for the specified states that will download Tiger data, stage and load into tiger_data schema. Each state script is returned as a separate record. Latest version supports Tiger 2010 structural changes and also loads census tract, block groups, and blocks tables.</li><li class="listitem"><a class="link" href="#Missing_Indexes_Generate_Script" title="Missing_Indexes_Generate_Script">Missing_Indexes_Generate_Script</a> - Availability: 2.0.0 Finds all tables with key columns used in geocoder joins that are missing indexes on those columns and will output the SQL DDL to define the index for those tables.</li><li class="listitem"><a class="link" href="#TopologyPolygonize" title="Polygonize">Polygonize</a> - Availability: 2.0.0 Find and register all faces defined by topology edges</li><li class="listitem"><a class="link" href="#Reverse_Geocode" title="Reverse_Geocode">Reverse_Geocode</a> - Availability: 2.0.0  Takes a geometry point in a known spatial ref sys and returns a record containing an array of theoretically possible addresses and an array of cross streets. If include_strnum_range = true, includes the street range in the cross streets.</li><li class="listitem"><a class="link" href="#ST_3DClosestPoint" title="ST_3DClosestPoint">ST_3DClosestPoint</a> - Availability: 2.0.0 Returns the 3-dimensional point on g1 that is closest to g2. This is the first point of the 3D shortest line.</li><li class="listitem"><a class="link" href="#ST_3DDFullyWithin" title="ST_3DDFullyWithin">ST_3DDFullyWithin</a> - Availability: 2.0.0 Returns true if all of the 3D geometries are within the specified distance of one another.</li><li class="listitem"><a class="link" href="#ST_3DDWithin" title="ST_3DDWithin">ST_3DDWithin</a> - Availability: 2.0.0 For 3d (z) geometry type Returns true if two geometries 3d distance is within number of units.</li><li class="listitem"><a class="link" href="#ST_3DDistance" title="ST_3DDistance">ST_3DDistance</a> - Availability: 2.0.0 For geometry type Returns the 3-dimensional cartesian minimum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DIntersects" title="ST_3DIntersects">ST_3DIntersects</a> - Availability: 2.0.0 Returns TRUE if the Geometries "spatially intersect" in 3d - only for points, linestrings, polygons, polyhedral surface (area). With SFCGAL backend enabled also supports TINS</li><li class="listitem"><a class="link" href="#ST_3DLongestLine" title="ST_3DLongestLine">ST_3DLongestLine</a> - Availability: 2.0.0 Returns the 3-dimensional longest line between two geometries</li><li class="listitem"><a class="link" href="#ST_3DMaxDistance" title="ST_3DMaxDistance">ST_3DMaxDistance</a> - Availability: 2.0.0 For geometry type Returns the 3-dimensional cartesian maximum distance (based on spatial ref) between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_3DShortestLine" title="ST_3DShortestLine">ST_3DShortestLine</a> - Availability: 2.0.0 Returns the 3-dimensional shortest line between two geometries</li><li class="listitem"><a class="link" href="#ST_AddEdgeModFace" title="ST_AddEdgeModFace">ST_AddEdgeModFace</a> - Availability: 2.0  Add a new edge and, if in doing so it splits a face, modify the original face and add a new face.</li><li class="listitem"><a class="link" href="#ST_AddEdgeNewFaces" title="ST_AddEdgeNewFaces">ST_AddEdgeNewFaces</a> - Availability: 2.0  Add a new edge and, if in doing so it splits a face, delete the original face and replace it with two new faces.</li><li class="listitem"><a class="link" href="#RT_ST_AsGDALRaster" title="ST_AsGDALRaster">ST_AsGDALRaster</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Return the raster tile in the designated GDAL Raster format. Raster formats are one of those supported by your compiled library. Use ST_GDALRasters() to get a list of formats supported by your library.</li><li class="listitem"><a class="link" href="#RT_ST_AsJPEG" title="ST_AsJPEG">ST_AsJPEG</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Return the raster tile selected bands as a single Joint Photographic Exports Group (JPEG) image (byte array). If no band is specified and 1 or more than 3 bands, then only the first band is used. If only 3 bands then all 3 bands are used and mapped to RGB.</li><li class="listitem"><a class="link" href="#ST_AsLatLonText" title="ST_AsLatLonText">ST_AsLatLonText</a> - Availability: 2.0 Return the Degrees, Minutes, Seconds representation of the given point.</li><li class="listitem"><a class="link" href="#RT_ST_AsPNG" title="ST_AsPNG">ST_AsPNG</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Return the raster tile selected bands as a single portable network graphics (PNG) image (byte array). If 1, 3, or 4 bands in raster and no bands are specified, then all bands are used. If more 2 or more than 4 bands and no bands specified, then only band 1 is used. Bands are mapped to RGB or RGBA space.</li><li class="listitem"><a class="link" href="#RT_ST_AsRaster" title="ST_AsRaster">ST_AsRaster</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Converts a PostGIS geometry to a PostGIS raster.</li><li class="listitem"><a class="link" href="#RT_ST_AsTIFF" title="ST_AsTIFF">ST_AsTIFF</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Return the raster selected bands as a single TIFF image (byte array). If no band is specified, then will try to use all bands.</li><li class="listitem"><a class="link" href="#ST_AsX3D" title="ST_AsX3D">ST_AsX3D</a> - Availability: 2.0.0: ISO-IEC-19776-1.2-X3DEncodings-XML Returns a Geometry in X3D xml node element format: ISO-IEC-19776-1.2-X3DEncodings-XML</li><li class="listitem"><a class="link" href="#RT_ST_Aspect" title="ST_Aspect">ST_Aspect</a> - Availability: 2.0.0  Returns the aspect (in degrees by default) of an elevation raster band. Useful for analyzing terrain.</li><li class="listitem"><a class="link" href="#RT_ST_Band" title="ST_Band">ST_Band</a> - Availability: 2.0.0 Returns one or more bands of an existing raster as a new raster. Useful for building new rasters from existing rasters.</li><li class="listitem"><a class="link" href="#RT_ST_BandIsNoData" title="ST_BandIsNoData">ST_BandIsNoData</a> - Availability: 2.0.0 Returns true if the band is filled with only nodata values.</li><li class="listitem"><a class="link" href="#RT_ST_Clip" title="ST_Clip">ST_Clip</a> - Availability: 2.0.0  Returns the raster clipped by the input geometry. If band number not is specified, all bands are processed. If crop is not specified or TRUE, the output raster is cropped.</li><li class="listitem"><a class="link" href="#ST_CollectionHomogenize" title="ST_CollectionHomogenize">ST_CollectionHomogenize</a> - Availability: 2.0.0 Given a geometry collection, return the "simplest" representation of the contents.</li><li class="listitem"><a class="link" href="#ST_ConcaveHull" title="ST_ConcaveHull">ST_ConcaveHull</a> - Availability: 2.0.0 The concave hull of a geometry represents a possibly concave geometry that encloses all geometries within the set. You can think of it as shrink wrapping.</li><li class="listitem"><a class="link" href="#RT_ST_Count" title="ST_Count">ST_Count</a> - Availability: 2.0.0  Returns the number of pixels in a given band of a raster or raster coverage. If no band is specified defaults to band 1. If exclude_nodata_value is set to true, will only count pixels that are not equal to the nodata value.</li><li class="listitem"><a class="link" href="#ST_CreateTopoGeo" title="ST_CreateTopoGeo">ST_CreateTopoGeo</a> - Availability: 2.0  Adds a collection of geometries to a given empty topology and returns a message detailing success.</li><li class="listitem"><a class="link" href="#RT_ST_Distinct4ma" title="ST_Distinct4ma">ST_Distinct4ma</a> - Availability: 2.0.0 Raster processing function that calculates the number of unique pixel values in a neighborhood.</li><li class="listitem"><a class="link" href="#ST_FlipCoordinates" title="ST_FlipCoordinates">ST_FlipCoordinates</a> - Availability: 2.0.0 Returns a version of the given geometry with X and Y axis flipped. Useful for people who have built latitude/longitude features and need to fix them.</li><li class="listitem"><a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> - Availability: 2.0.0 - requires GDAL &gt;= 1.6.0.  Returns a list of raster formats supported by your lib gdal. These are the formats you can output your raster using ST_AsGDALRaster.</li><li class="listitem"><a class="link" href="#ST_GeomFromGeoJSON" title="ST_GeomFromGeoJSON">ST_GeomFromGeoJSON</a> - Availability: 2.0.0 requires - JSON-C &gt;= 0.9 Takes as input a geojson representation of a geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GetFaceEdges" title="ST_GetFaceEdges">ST_GetFaceEdges</a> - Availability: 2.0  Returns a set of ordered edges that bound aface.</li><li class="listitem"><a class="link" href="#RT_ST_HasNoBand" title="ST_HasNoBand">ST_HasNoBand</a> - Availability: 2.0.0 Returns true if there is no band with given band number. If no band number is specified, then band number 1 is assumed.</li><li class="listitem"><a class="link" href="#RT_ST_HillShade" title="ST_HillShade">ST_HillShade</a> - Availability: 2.0.0  Returns the hypothetical illumination of an elevation raster band using provided azimuth, altitude, brightness and scale inputs.</li><li class="listitem"><a class="link" href="#RT_ST_Histogram" title="ST_Histogram">ST_Histogram</a> - Availability: 2.0.0  Returns a set of record summarizing a raster or raster coverage data distribution separate bin ranges. Number of bins are autocomputed if not specified.</li><li class="listitem"><a class="link" href="#ST_InterpolatePoint" title="ST_InterpolatePoint">ST_InterpolatePoint</a> - Availability: 2.0.0 Return the value of the measure dimension of a geometry at the point closed to the provided point.</li><li class="listitem"><a class="link" href="#RT_ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - Availability: 2.0.0 Returns true if the raster is empty (width = 0 and height = 0). Otherwise, returns false.</li><li class="listitem"><a class="link" href="#ST_IsValidDetail" title="ST_IsValidDetail">ST_IsValidDetail</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. Returns a valid_detail (valid,reason,location) row stating if a geometry is valid or not and if not valid, a reason why and a location where.</li><li class="listitem"><a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a> - Availability: 2.0 - requires GEOS &gt;= 3.3.0 for the version taking flags. Returns text stating if a geometry is valid or not and if not valid, a reason why.</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - Availability: 2.0.0 -  Support for linestring input elements was introduced Creates a Linestring from point, multipoint, or line geometries.</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - Availability: 2.0.0, requires GEOS-3.3.0 Attempts to make an invalid geometry valid without losing vertices.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - Availability: 2.0.0  1 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the input raster band and of pixeltype provided. Band 1 is assumed if no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraExpr2" title="ST_MapAlgebraExpr">ST_MapAlgebraExpr</a> - Availability: 2.0.0  2 raster band version: Creates a new one band raster formed by applying a valid PostgreSQL algebraic operation on the two input raster bands and of pixeltype provided. band 1 of each raster is assumed if no band numbers are specified. The resulting raster will be aligned (scale, skew and pixel corners) on the grid defined by the first raster and have its extent defined by the "extenttype" parameter. Values for "extenttype" can be: INTERSECTION, UNION, FIRST, SECOND.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - Availability: 2.0.0 1 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the input raster band and of pixeltype prodived. Band 1 is assumed if no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFct2" title="ST_MapAlgebraFct">ST_MapAlgebraFct</a> - Availability: 2.0.0 2 band version - Creates a new one band raster formed by applying a valid PostgreSQL function on the 2 input raster bands and of pixeltype prodived. Band 1 is assumed if no band is specified. Extent type defaults to INTERSECTION if not specified.</li><li class="listitem"><a class="link" href="#RT_ST_MapAlgebraFctNgb" title="ST_MapAlgebraFctNgb">ST_MapAlgebraFctNgb</a> - Availability: 2.0.0  1-band version: Map Algebra Nearest Neighbor using user-defined PostgreSQL function. Return a raster which values are the result of a PLPGSQL user function involving a neighborhood of values from the input raster band.</li><li class="listitem"><a class="link" href="#RT_ST_Max4ma" title="ST_Max4ma">ST_Max4ma</a> - Availability: 2.0.0 Raster processing function that calculates the maximum pixel value in a neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_Mean4ma" title="ST_Mean4ma">ST_Mean4ma</a> - Availability: 2.0.0 Raster processing function that calculates the mean pixel value in a neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_Min4ma" title="ST_Min4ma">ST_Min4ma</a> - Availability: 2.0.0 Raster processing function that calculates the minimum pixel value in a neighborhood.</li><li class="listitem"><a class="link" href="#ST_ModEdgeHeal" title="ST_ModEdgeHeal">ST_ModEdgeHeal</a> - Availability: 2.0 Heal two edges by deleting the node connecting them, modifying the first edgeand deleting the second edge. Returns the id of the deleted node.</li><li class="listitem"><a class="link" href="#ST_NewEdgeHeal" title="ST_NewEdgeHeal">ST_NewEdgeHeal</a> - Availability: 2.0 Heal two edges by deleting the node connecting them, deleting both edges,and replacing them with an edge whose direction is the same as the firstedge provided.</li><li class="listitem"><a class="link" href="#ST_Node" title="ST_Node">ST_Node</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. Node a set of linestrings.</li><li class="listitem"><a class="link" href="#ST_NumPatches" title="ST_NumPatches">ST_NumPatches</a> - Availability: 2.0.0 Return the number of faces on a Polyhedral Surface. Will return null for non-polyhedral geometries.</li><li class="listitem"><a class="link" href="#ST_OffsetCurve" title="ST_OffsetCurve">ST_OffsetCurve</a> - 
Availability: 2.0 - requires GEOS &gt;= 3.2, improved with GEOS &gt;= 3.3
				 Return an offset line at a given distance and side from an input line. Useful for computing parallel lines about a center line</li><li class="listitem"><a class="link" href="#ST_PatchN" title="ST_PatchN">ST_PatchN</a> - Availability: 2.0.0 Return the 1-based Nth geometry (face) if the geometry is a POLYHEDRALSURFACE, POLYHEDRALSURFACEM. Otherwise, return NULL.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygon" title="ST_PixelAsPolygon">ST_PixelAsPolygon</a> - Availability: 2.0.0 Returns the polygon geometry that bounds the pixel for a particular row and column.</li><li class="listitem"><a class="link" href="#RT_ST_PixelAsPolygons" title="ST_PixelAsPolygons">ST_PixelAsPolygons</a> - Availability: 2.0.0 Returns the polygon geometry that bounds every pixel of a raster band along with the value, the X and the Y raster coordinates of each pixel.</li><li class="listitem"><a class="link" href="#ST_Project" title="ST_Project">ST_Project</a> - Availability: 2.0.0 Returns a POINT projected from a start point using a distance in meters and bearing (azimuth) in radians.</li><li class="listitem"><a class="link" href="#RT_ST_Quantile" title="ST_Quantile">ST_Quantile</a> - Availability: 2.0.0  Compute quantiles for a raster or raster table coverage in the context of the sample or population. Thus, a value could be examined to be at the raster's 25%, 50%, 75% percentile.</li><li class="listitem"><a class="link" href="#RT_ST_Range4ma" title="ST_Range4ma">ST_Range4ma</a> - Availability: 2.0.0 Raster processing function that calculates the range of pixel values in a neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_Reclass" title="ST_Reclass">ST_Reclass</a> - Availability: 2.0.0  Creates a new raster composed of band types reclassified from original. The nband is the band to be changed. If nband is not specified assumed to be 1. All other bands are returned unchanged. Use case: convert a 16BUI band to a 8BUI and so forth for simpler rendering as viewable formats.</li><li class="listitem"><a class="link" href="#ST_RelateMatch" title="ST_RelateMatch">ST_RelateMatch</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0.  Returns true if intersectionMattrixPattern1 implies intersectionMatrixPattern2</li><li class="listitem"><a class="link" href="#ST_RemEdgeModFace" title="ST_RemEdgeModFace">ST_RemEdgeModFace</a> - Availability: 2.0  Removes an edge and, if the removed edge separated two faces,delete one of the them and modify the other to take the space of both.</li><li class="listitem"><a class="link" href="#ST_RemEdgeNewFace" title="ST_RemEdgeNewFace">ST_RemEdgeNewFace</a> - Availability: 2.0  Removes an edge and, if the removed edge separated two faces,delete the original faces and replace them with a new face.</li><li class="listitem"><a class="link" href="#RT_ST_Resample" title="ST_Resample">ST_Resample</a> - Availability: 2.0.0 Requires GDAL 1.6.1+ Resample a raster using a specified resampling algorithm, new dimensions, an arbitrary grid corner and a set of raster georeferencing attributes defined or borrowed from another raster.</li><li class="listitem"><a class="link" href="#RT_ST_Rescale" title="ST_Rescale">ST_Rescale</a> - Availability: 2.0.0  Requires GDAL 1.6.1+ Resample a raster by adjusting only its scale (or pixel size). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_Reskew" title="ST_Reskew">ST_Reskew</a> - Availability: 2.0.0  Requires GDAL 1.6.1+ Resample a raster by adjusting only its skew (or rotation parameters). New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#RT_ST_SameAlignment" title="ST_SameAlignment">ST_SameAlignment</a> - Availability: 2.0.0 Returns true if rasters have same skew, scale, spatial ref, and offset (pixels can be put on same grid without cutting into pixels) and false if they don't with notice detailing issue.</li><li class="listitem"><a class="link" href="#RT_ST_SetBandIsNoData" title="ST_SetBandIsNoData">ST_SetBandIsNoData</a> - Availability: 2.0.0 Sets the isnodata flag of the band to TRUE.</li><li class="listitem"><a class="link" href="#ST_SharedPaths" title="ST_SharedPaths">ST_SharedPaths</a> - Availability: 2.0.0 requires GEOS &gt;= 3.3.0. Returns a collection containing paths shared by the two input linestrings/multilinestrings.</li><li class="listitem"><a class="link" href="#RT_ST_Slope" title="ST_Slope">ST_Slope</a> - Availability: 2.0.0  Returns the slope (in degrees by default) of an elevation raster band. Useful for analyzing terrain.</li><li class="listitem"><a class="link" href="#ST_Snap" title="ST_Snap">ST_Snap</a> - Availability: 2.0.0 requires GEOS &gt;= 3.3.0. Snap segments and vertices of input geometry to vertices of a reference geometry.</li><li class="listitem"><a class="link" href="#RT_ST_SnapToGrid" title="ST_SnapToGrid">ST_SnapToGrid</a> - Availability: 2.0.0  Requires GDAL 1.6.1+ Resample a raster by snapping it to a grid. New pixel values are computed using the NearestNeighbor (english or american spelling), Bilinear, Cubic, CubicSpline or Lanczos resampling algorithm. Default is NearestNeighbor.</li><li class="listitem"><a class="link" href="#ST_Split" title="ST_Split">ST_Split</a> - Availability: 2.0.0 Returns a collection of geometries resulting by splitting a geometry.</li><li class="listitem"><a class="link" href="#RT_ST_StdDev4ma" title="ST_StdDev4ma">ST_StdDev4ma</a> - Availability: 2.0.0 Raster processing function that calculates the standard deviation of pixel values in a neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_Sum4ma" title="ST_Sum4ma">ST_Sum4ma</a> - Availability: 2.0.0 Raster processing function that calculates the sum of all pixel values in a neighborhood.</li><li class="listitem"><a class="link" href="#RT_ST_SummaryStats" title="ST_SummaryStats">ST_SummaryStats</a> - Availability: 2.0.0  Returns summarystats consisting of count, sum, mean, stddev, min, max for a given raster band of a raster or raster coverage. Band 1 is assumed is no band is specified.</li><li class="listitem"><a class="link" href="#RT_ST_Transform" title="ST_Transform">ST_Transform</a> - Availability: 2.0.0  Requires GDAL 1.6.1+ Reprojects a raster in a known spatial reference system to another known spatial reference system using specified resampling algorithm. Options are NearestNeighbor, Bilinear, Cubic, CubicSpline, Lanczos defaulting to NearestNeighbor.</li><li class="listitem"><a class="link" href="#ST_UnaryUnion" title="ST_UnaryUnion">ST_UnaryUnion</a> - Availability: 2.0.0 - requires GEOS &gt;= 3.3.0. Like ST_Union, but working at the geometry component level.</li><li class="listitem"><a class="link" href="#RT_ST_Union" title="ST_Union">ST_Union</a> - Availability: 2.0.0  Returns the union of a set of raster tiles into a single raster composed of 1 or more bands.</li><li class="listitem"><a class="link" href="#RT_ST_ValueCount" title="ST_ValueCount">ST_ValueCount</a> - Availability: 2.0.0  Returns a set of records containing a pixel band value and count of the number of pixels in a given band of a raster (or a raster coverage) that have a given set of values. If no band is specified defaults to band 1. By default nodata value pixels are not counted. and all other values in the pixel are output and pixel band values are rounded to the nearest integer.</li><li class="listitem"><a class="link" href="#TopoElementArray_Agg" title="TopoElementArray_Agg">TopoElementArray_Agg</a> - Availability: 2.0.0 Returns a topoelementarray for a set of element_id, type arrays (topoelements)</li><li class="listitem"><a class="link" href="#TopoGeo_AddLineString" title="TopoGeo_AddLineString">TopoGeo_AddLineString</a> - Availability: 2.0.0 Adds a linestring to an existing topology using a tolerance and possibly splitting existing edges/faces. Returns edge identifiers</li><li class="listitem"><a class="link" href="#TopoGeo_AddPoint" title="TopoGeo_AddPoint">TopoGeo_AddPoint</a> - Availability: 2.0.0 Adds a point to an existing topology using a tolerance and possibly splitting an existing edge.</li><li class="listitem"><a class="link" href="#TopoGeo_AddPolygon" title="TopoGeo_AddPolygon">TopoGeo_AddPolygon</a> - Availability: 2.0.0 Adds a polygon to an existing topology using a tolerance and possibly splitting existing edges/faces.</li><li class="listitem"><a class="link" href="#TopologySummary" title="TopologySummary">TopologySummary</a> - Availability: 2.0.0 Takes a topology name and provides summary totals of types of objects in topology</li><li class="listitem"><a class="link" href="#Topology_Load_Tiger" title="Topology_Load_Tiger">Topology_Load_Tiger</a> - Availability: 2.0.0  Loads a defined region of tiger data into a PostGIS Topology and transforming the tiger data to spatial reference of the topology and snapping to the precision tolerance of the topology.</li><li class="listitem"><a class="link" href="#toTopoGeom" title="toTopoGeom">toTopoGeom</a> - Availability: 2.0 Converts a simple Geometry into a topo geometry</li><li class="listitem"><a class="link" href="#RT_Raster_Same" title="~=">~=</a> - Availability: 2.0.0 Returns TRUE if A's bounding box is the same as B's.</li></ul></div><p>The functions given below are PostGIS functions that are enhanced in PostGIS 2.0.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Enhanced: 2.0.0 use_typmod argument introduced.  Defaults to creating typmod geometry column instead of constraint-based.</li><li class="listitem"><a class="link" href="#Box2D" title="Box2D">Box2D</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#Box3D" title="Box3D">Box3D</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#Geocode" title="Geocode">Geocode</a> - Enhanced: 2.0.0 to support Tiger 2010 structured data and revised some logic to improve speed, accuracy of geocoding, and to offset point from centerline to side of street address is located on. The new parameter max_results useful for specifying number of best results or just returning the best result.</li><li class="listitem"><a class="link" href="#GeometryType" title="GeometryType">GeometryType</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - Enhanced: 2.0.0 use_typmod optional argument was introduced that allows controlling if columns are created with typmodifiers or with check constraints.</li><li class="listitem"><a class="link" href="#RT_ST_Intersection" title="ST_Intersection">ST_Intersection</a> - 
						Enhanced: 2.0.0 - Intersection in the raster space was introduced. In earlier pre-2.0.0 versions, only intersection performed in vector space were supported.
					</li><li class="listitem"><a class="link" href="#RT_ST_Intersects" title="ST_Intersects">ST_Intersects</a> - 
				Enhanced: 2.0.0 support raster/raster intersects was introduced.
			</li><li class="listitem"><a class="link" href="#RT_ST_Value" title="ST_Value">ST_Value</a> - Enhanced: 2.0.0 exclude_nodata_value optional argument was added.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Accum" title="ST_Accum">ST_Accum</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Affine" title="ST_Affine">ST_Affine</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Area" title="ST_Area">ST_Area</a> - Enhanced: 2.0.0 - support for 2D polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Enhanced: 2.0.0 support for higher coordinate dimensions was introduced.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Enhanced: 2.0.0 support for specifying endian with geography was introduced.</li><li class="listitem"><a class="link" href="#ST_AsEWKB" title="ST_AsEWKB">ST_AsEWKB</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_AsEWKT" title="ST_AsEWKT">ST_AsEWKT</a> - Enhanced: 2.0.0 support for Geography, Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Enhanced: 2.0.0 prefix support was introduced. Option 4 for GML3 was introduced to allow using LineString instead of Curve tag for lines. GML3 Support for Polyhedral surfaces and TINS was introduced. Option 32 was introduced to output the box.</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - Enhanced: 2.0.0 - Add prefix namespace. Default is no prefix</li><li class="listitem"><a class="link" href="#ST_Azimuth" title="ST_Azimuth">ST_Azimuth</a> - Enhanced: 2.0.0 support for geography was introduced.</li><li class="listitem"><a class="link" href="#ST_ChangeEdgeGeom" title="ST_ChangeEdgeGeom">ST_ChangeEdgeGeom</a> - 
	Enhanced: 2.0.0 adds topological consistency enforcement
		</li><li class="listitem"><a class="link" href="#ST_Dimension" title="ST_Dimension">ST_Dimension</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TINs was introduced. No longer throws an exception if given empty geometry.</li><li class="listitem"><a class="link" href="#ST_Dump" title="ST_Dump">ST_Dump</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Expand" title="ST_Expand">ST_Expand</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Force2D" title="ST_Force2D">ST_Force2D</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_ForceRHR" title="ST_ForceRHR">ST_ForceRHR</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_Force_3D" title="ST_Force3D">ST_Force3D</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_Force_3DZ" title="ST_Force3DZ">ST_Force3DZ</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_Force_Collection" title="ST_ForceCollection">ST_ForceCollection</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - Enhanced: 2.0.0 default srid optional parameter added.</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKB" title="ST_GeomFromEWKB">ST_GeomFromEWKB</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_GeomFromEWKT" title="ST_GeomFromEWKT">ST_GeomFromEWKT</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - Enhanced: 2.0.0 default srid optional parameter added.</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_GeometryType" title="ST_GeometryType">ST_GeometryType</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_IsClosed" title="ST_IsClosed">ST_IsClosed</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a> - Enhanced: 2.0: Ability to specify an envelope without specifying an SRID was introduced.</li><li class="listitem"><a class="link" href="#ST_MakeValid" title="ST_MakeValid">ST_MakeValid</a> - Enhanced: 2.0.1, speed improvements requires GEOS-3.3.4</li><li class="listitem"><a class="link" href="#ST_NPoints" title="ST_NPoints">ST_NPoints</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Relate" title="ST_Relate">ST_Relate</a> - Enhanced: 2.0.0 - added support for specifying boundary node rule (requires GEOS &gt;= 3.0).</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Rotate" title="ST_Rotate">ST_Rotate</a> - Enhanced: 2.0.0 additional parameters for specifying the origin of rotation were added.</li><li class="listitem"><a class="link" href="#ST_RotateX" title="ST_RotateX">ST_RotateX</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_RotateY" title="ST_RotateY">ST_RotateY</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_RotateZ" title="ST_RotateZ">ST_RotateZ</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Scale" title="ST_Scale">ST_Scale</a> - Enhanced: 2.0.0 support for Polyhedral surfaces, Triangles and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Shift_Longitude" title="ST_ShiftLongitude">ST_ShiftLongitude</a> - Enhanced: 2.0.0 support for Polyhedral surfaces and TIN was introduced.</li><li class="listitem"><a class="link" href="#ST_Summary" title="ST_Summary">ST_Summary</a> - Enhanced: 2.0.0 added support for geography</li><li class="listitem"><a class="link" href="#ST_Transform" title="ST_Transform">ST_Transform</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li><li class="listitem"><a class="link" href="#ValidateTopology" title="ValidateTopology">ValidateTopology</a> - Enhanced: 2.0.0 more efficient edge crossing detection and fixes for false positives that were existent in prior versions.</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - Enhanced: 2.0.0 support for Polyhedral surfaces was introduced.</li></ul></div></div><div class="sect2" title="14.12.7. PostGIS Functions changed behavior in 2.0"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_2_0_Changed"></a>14.12.7. PostGIS Functions changed behavior in 2.0</h3></div></div></div><p>The functions given below are PostGIS functions that have changed behavior in PostGIS 2.0 and may require application changes.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Most deprecated functions have been removed.  These are functions that haven't been documented since 1.2
                        or some internal functions that were never documented.  If you are using a function that you don't see documented,
                        it's probably deprecated, about to be deprecated, or internal and should be avoided.  If you have applications or tools
                        that rely on deprecated functions, please refer to <a class="xref" href="#legacy_faq" title="3.2.">Q: 3.2</a> for more details.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Bounding boxes of geometries have been changed from float4 to double precision (float8).  This has an impact
                    	on answers you get using bounding box operators and casting of bounding boxes to geometries. E.g ST_SetSRID(abbox) will
                    	often return a different more accurate answer in PostGIS 2.0+ than it did in prior versions which may very well slightly
                    	change answers to view port queries.</p></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>The arguments hasnodata was replaced with exclude_nodata_value which has the same meaning as the older hasnodata but clearer in purpose.</p></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Changed: 2.0.0 This function no longer updates geometry_columns since geometry_columns is a view that reads from system catalogs.  It by default
			also does not create constraints, but instead uses the built in type modifier behavior of PostgreSQL.  So for example building a wgs84 POINT column with this function is now
			equivalent to: ALTER TABLE some_table ADD COLUMN geom geometry(Point,4326); </li><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Changed: 2.0.0 If you require the old behavior of constraints use the default use_typmod, but set it to false.</li><li class="listitem"><a class="link" href="#AddGeometryColumn" title="AddGeometryColumn">AddGeometryColumn</a> - Changed: 2.0.0 Views can no longer be manually registered in geometry_columns, however views built against geometry typmod tables geometries and used without wrapper functions will register themselves correctly
		            because they inherit the typmod behavior of their parent table column.
		            Views that use geometry functions that output other geometries will need to be cast to typmod geometries for these view geometry columns to be registered correctly
		            in geometry_columns. Refer to .
			</li><li class="listitem"><a class="link" href="#DropGeometryColumn" title="DropGeometryColumn">DropGeometryColumn</a> - Changed: 2.0.0 This function is provided for backward compatibility.  Now that since geometry_columns is now a view against the system catalogs,
			    you can drop a geometry column like any other table column using ALTER TABLE</li><li class="listitem"><a class="link" href="#DropGeometryTable" title="DropGeometryTable">DropGeometryTable</a> - Changed: 2.0.0 This function is provided for backward compatibility.  Now that since geometry_columns is now a view against the system catalogs,
			    you can drop a table with geometry columns like any other table using DROP TABLE</li><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - Changed: 2.0.0 By default, now uses type modifiers instead of check constraints to constrain geometry types.  You can still use check
		    constraint behavior instead by using the new  use_typmod and setting it to false.</li><li class="listitem"><a class="link" href="#RT_Box3D" title="Box3D">Box3D</a> - Changed: 2.0.0 In pre-2.0 versions, there used to be a box2d instead of box3d.  Since box2d is a deprecated type, this was changed to box3d.</li><li class="listitem"><a class="link" href="#RT_ST_GDALDrivers" title="ST_GDALDrivers">ST_GDALDrivers</a> - Changed: 2.0.6, 2.1.3 - by default no drivers are enabled, unless GUC or Environment variable gdal_enabled_drivers is set.</li><li class="listitem"><a class="link" href="#RT_ST_ScaleX" title="ST_ScaleX">ST_ScaleX</a> - Changed: 2.0.0. In WKTRaster versions this was called ST_PixelSizeX.</li><li class="listitem"><a class="link" href="#RT_ST_ScaleY" title="ST_ScaleY">ST_ScaleY</a> - Changed: 2.0.0. In WKTRaster versions this was called ST_PixelSizeY.</li><li class="listitem"><a class="link" href="#RT_ST_SetScale" title="ST_SetScale">ST_SetScale</a> - Changed: 2.0.0 In WKTRaster versions this was called ST_SetPixelSize.  This was changed in 2.0.0.</li><li class="listitem"><a class="link" href="#ST_3DExtent" title="ST_3DExtent">ST_3DExtent</a> - Changed: 2.0.0 In prior versions this used to be called ST_Extent3D</li><li class="listitem"><a class="link" href="#ST_3DLength" title="ST_3DLength">ST_3DLength</a> - Changed: 2.0.0 In prior versions this used to be called ST_Length3D</li><li class="listitem"><a class="link" href="#ST_3DMakeBox" title="ST_3DMakeBox">ST_3DMakeBox</a> - Changed: 2.0.0 In prior versions this used to be called ST_MakeBox3D</li><li class="listitem"><a class="link" href="#ST_3DPerimeter" title="ST_3DPerimeter">ST_3DPerimeter</a> - Changed: 2.0.0 In prior versions this used to be called ST_Perimeter3D</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Changed: 2.0.0 Inputs to this function can not be unknown -- must be geometry.  Constructs such as ST_AsBinary('POINT(1 2)') are no longer valid and you will get an n st_asbinary(unknown)  is not unique error.  Code like that
			needs to be changed to ST_AsBinary('POINT(1 2)'::geometry);.  If that is not possible, then install legacy.sql.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Changed: 2.0.0 use default named args</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - Changed: 2.0.0 support default args and named args.</li><li class="listitem"><a class="link" href="#ST_AsKML" title="ST_AsKML">ST_AsKML</a> - Changed: 2.0.0 - uses default args and supports named args</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - Changed: 2.0.0 to use default args and support named args</li><li class="listitem"><a class="link" href="#ST_EndPoint" title="ST_EndPoint">ST_EndPoint</a> - Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.
	  The older behavior was an undocumented feature, but people who assumed they had their data stored as LINESTRING
	  may experience these returning NULL in 2.0 now.</li><li class="listitem"><a class="link" href="#ST_GeomFromText" title="ST_GeomFromText">ST_GeomFromText</a> - Changed: 2.0.0 In prior versions of PostGIS ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') was allowed.  This is now illegal in PostGIS 2.0.0 to better conform with SQL/MM standards. This should now be
			    written as ST_GeomFromText('GEOMETRYCOLLECTION EMPTY')</li><li class="listitem"><a class="link" href="#ST_GeometryN" title="ST_GeometryN">ST_GeometryN</a> - Changed: 2.0.0 Prior versions would return NULL for singular geometries.  This was changed to return the geometry for ST_GeometryN(..,1) case.</li><li class="listitem"><a class="link" href="#ST_IsEmpty" title="ST_IsEmpty">ST_IsEmpty</a> - Changed: 2.0.0 In prior versions of PostGIS ST_GeomFromText('GEOMETRYCOLLECTION(EMPTY)') was allowed.  This is now illegal in PostGIS 2.0.0 to better conform with SQL/MM standards</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - Changed: 2.0.0 Breaking change -- in prior versions applying this to a MULTI/POLYGON of type geography would give you the perimeter of the POLYGON/MULTIPOLYGON.  In 2.0.0
			this was changed to return 0 to be in line with geometry behavior.  Please use ST_Perimeter if you want the perimeter of a polygon</li><li class="listitem"><a class="link" href="#ST_LocateAlong" title="ST_LocateAlong">ST_LocateAlong</a> - Changed: 2.0.0 in prior versions this used to be called ST_Locate_Along_Measure.  The old name has been deprecated and will be removed in the future but is still available.</li><li class="listitem"><a class="link" href="#ST_LocateBetween" title="ST_LocateBetween">ST_LocateBetween</a> - Changed: 2.0.0 - in prior versions this used to be called ST_Locate_Between_Measures.  The old name has been deprecated and will be removed in the future but is still available for backward compatibility.</li><li class="listitem"><a class="link" href="#ST_ModEdgeSplit" title="ST_ModEdgeSplit">ST_ModEdgeSplit</a> - Changed: 2.0 - In prior versions, this was misnamed ST_ModEdgesSplit</li><li class="listitem"><a class="link" href="#ST_NumGeometries" title="ST_NumGeometries">ST_NumGeometries</a> - Changed: 2.0.0 In prior versions this would return NULL if the geometry was not a collection/MULTI type.
				2.0.0+ now returns 1 for single geometries e.g POLYGON, LINESTRING, POINT.</li><li class="listitem"><a class="link" href="#ST_NumInteriorRings" title="ST_NumInteriorRings">ST_NumInteriorRings</a> - Changed: 2.0.0 - in prior versions it would allow passing a MULTIPOLYGON, returning the number of interior rings of first POLYGON.</li><li class="listitem"><a class="link" href="#ST_PointN" title="ST_PointN">ST_PointN</a> - Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.</li><li class="listitem"><a class="link" href="#ST_StartPoint" title="ST_StartPoint">ST_StartPoint</a> - Changed: 2.0.0 no longer works with single geometry multilinestrings.  In older
	  versions of PostGIS -- a single line multilinestring would work happily with this
	  function and return the start point.  In 2.0.0 it just returns NULL like any other multilinestring.
	  The older behavior was an undocumented feature, but people who assumed they had their data stored as LINESTRING
	  may experience these returning NULL in 2.0 now.</li></ul></div></div><div class="sect2" title="14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_1_5"></a>14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5</h3></div></div></div><p>The functions given below are PostGIS functions that were introduced or enhanced in this minor release.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#PostGIS_LibXML_Version" title="PostGIS_LibXML_Version">PostGIS_LibXML_Version</a> - Availability: 1.5 Returns the version number of the libxml2 library.</li><li class="listitem"><a class="link" href="#ST_AddMeasure" title="ST_AddMeasure">ST_AddMeasure</a> - Availability: 1.5.0 Return a derived geometry with measure elements linearly interpolated between the start and end points.</li><li class="listitem"><a class="link" href="#ST_AsBinary" title="ST_AsBinary">ST_AsBinary</a> - Availability: 1.5.0 geography support was introduced. Return the Well-Known Binary (WKB) representation of the geometry/geography without SRID meta data.</li><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Availability: 1.5.0 geography support was introduced. Return the geometry as a GML version 2 or 3 element.</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - Availability: 1.5.0 geography support was introduced. Return the geometry as a GeoJSON element.</li><li class="listitem"><a class="link" href="#ST_AsText" title="ST_AsText">ST_AsText</a> - Availability: 1.5 - support for geography was introduced. Return the Well-Known Text (WKT) representation of the geometry/geography without SRID metadata.</li><li class="listitem"><a class="link" href="#ST_Buffer" title="ST_Buffer">ST_Buffer</a> - Availability: 1.5 - ST_Buffer was enhanced to support different endcaps and join types. These are useful for example to convert road linestrings
					into polygon roads with flat or square edges instead of rounded edges. Thin wrapper for geography was added. - requires GEOS &gt;= 3.2 to take advantage of advanced geometry functionality.
				 (T)Returns a geometry covering all points within a given distancefrom the input geometry.</li><li class="listitem"><a class="link" href="#ST_ClosestPoint" title="ST_ClosestPoint">ST_ClosestPoint</a> - Availability: 1.5.0 Returns the 2-dimensional point on g1 that is closest to g2. This is the first point of the shortest line.</li><li class="listitem"><a class="link" href="#ST_CollectionExtract" title="ST_CollectionExtract">ST_CollectionExtract</a> - Availability: 1.5.0 Given a (multi)geometry, return a (multi)geometry consisting only of elements of the specified type.</li><li class="listitem"><a class="link" href="#ST_Covers" title="ST_Covers">ST_Covers</a> - Availability: 1.5 - support for geography was introduced.  Returns 1 (TRUE) if no point in Geometry B is outside Geometry A</li><li class="listitem"><a class="link" href="#ST_DFullyWithin" title="ST_DFullyWithin">ST_DFullyWithin</a> - Availability: 1.5.0 Returns true if all of the geometries are within the specified distance of one another</li><li class="listitem"><a class="link" href="#ST_DWithin" title="ST_DWithin">ST_DWithin</a> - Availability: 1.5.0 support for geography was introduced Returns true if the geometries are within the specified distance of one another. For geometry units are in those of spatial reference and For geography units are in meters and measurement is defaulted to use_spheroid=true (measure around spheroid), for faster check, use_spheroid=false to measure along sphere.</li><li class="listitem"><a class="link" href="#ST_Distance" title="ST_Distance">ST_Distance</a> - Availability: 1.5.0 geography support was introduced in 1.5.  Speed improvements for planar to better handle large or many vertex geometries For geometry type Returns the 2D Cartesian distance between two geometries in projected units (based on spatial ref). For geography type defaults to return minimum geodesic distance between two geographies in meters.</li><li class="listitem"><a class="link" href="#ST_DistanceSphere" title="ST_DistanceSphere">ST_DistanceSphere</a> - Availability: 1.5 - support for other geometry types besides points was introduced. Prior versions only work with points. Returns minimum distance in meters between two lon/lat geometries. Uses a spherical earth and radius derived from the spheroid defined by the SRID. Faster than ST_DistanceSpheroid , but less accurate. PostGIS versions prior to 1.5 only implemented for points.</li><li class="listitem"><a class="link" href="#ST_Distance_Spheroid" title="ST_DistanceSpheroid">ST_DistanceSpheroid</a> - Availability: 1.5 - support for other geometry types besides points was introduced. Prior versions only work with points. Returns the minimum distance between two lon/lat geometries given a particular spheroid. PostGIS versions prior to 1.5 only support points.</li><li class="listitem"><a class="link" href="#ST_DumpPoints" title="ST_DumpPoints">ST_DumpPoints</a> - Availability: 1.5.0 Returns a set of geometry_dump (geom,path) rows of all points that make up a geometry.</li><li class="listitem"><a class="link" href="#ST_Envelope" title="ST_Envelope">ST_Envelope</a> - Availability: 1.5.0 behavior changed to output double precision instead of float4 Returns a geometry representing the double precision (float8) bounding box of the supplied geometry.</li><li class="listitem"><a class="link" href="#ST_GMLToSQL" title="ST_GMLToSQL">ST_GMLToSQL</a> - Availability: 1.5, requires libxml2 1.6+ Return a specified ST_Geometry value from GML representation. This is an alias name for ST_GeomFromGML</li><li class="listitem"><a class="link" href="#ST_GeomFromGML" title="ST_GeomFromGML">ST_GeomFromGML</a> - Availability: 1.5, requires libxml2 1.6+ Takes as input GML representation of geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_GeomFromKML" title="ST_GeomFromKML">ST_GeomFromKML</a> - Availability: 1.5,libxml2 2.6+ Takes as input KML representation of geometry and outputs a PostGIS geometry object</li><li class="listitem"><a class="link" href="#ST_Geometry_Same" title="~=">~=</a> - Availability: 1.5.0 changed behavior Returns TRUE if A's bounding box is the same as B's.</li><li class="listitem"><a class="link" href="#ST_HausdorffDistance" title="ST_HausdorffDistance">ST_HausdorffDistance</a> - Availability: 1.5.0 - requires GEOS &gt;= 3.2.0 Returns the Hausdorff distance between two geometries. Basically a measure of how similar or dissimilar 2 geometries are. Units are in the units of the spatial reference system of the geometries.</li><li class="listitem"><a class="link" href="#ST_Intersection" title="ST_Intersection">ST_Intersection</a> - Availability: 1.5 support for geography data type was introduced. (T)Returns a geometry that represents the shared portion of geomA and geomB.</li><li class="listitem"><a class="link" href="#ST_Intersects" title="ST_Intersects">ST_Intersects</a> - Availability: 1.5 support for geography was introduced. Returns TRUE if the Geometries/Geography "spatially intersect in 2D" - (share any portion of space) and FALSE if they don't (they are Disjoint). For geography -- tolerance is 0.00001 meters (so any points that close are considered to intersect)</li><li class="listitem"><a class="link" href="#ST_Length" title="ST_Length">ST_Length</a> - Availability: 1.5.0 geography support was introduced in 1.5. Returns the 2D length of the geometry if it is a LineString or MultiLineString. geometry are in units of spatial reference and geography are in meters (default spheroid)</li><li class="listitem"><a class="link" href="#ST_LongestLine" title="ST_LongestLine">ST_LongestLine</a> - Availability: 1.5.0 Returns the 2-dimensional longest line points of two geometries. The function will only return the first longest line if more than one, that the function finds. The line returned will always start in g1 and end in g2. The length of the line this function returns will always be the same as st_maxdistance returns for g1 and g2.</li><li class="listitem"><a class="link" href="#ST_MakeEnvelope" title="ST_MakeEnvelope">ST_MakeEnvelope</a> - Availability: 1.5 Creates a rectangular Polygon formed from the given minimums and maximums. Input values must be in SRS specified by the SRID.</li><li class="listitem"><a class="link" href="#ST_MaxDistance" title="ST_MaxDistance">ST_MaxDistance</a> - Availability: 1.5.0 Returns the 2-dimensional largest distance between two geometries in projected units.</li><li class="listitem"><a class="link" href="#ST_ShortestLine" title="ST_ShortestLine">ST_ShortestLine</a> - Availability: 1.5.0 Returns the 2-dimensional shortest line between two geometries</li><li class="listitem"><a class="link" href="#geometry_overlaps" title="&amp;&amp;">&amp;&amp;</a> - Availability: 1.5.0 support for geography was introduced. Returns TRUE if A's 2D bounding box intersects B's 2D bounding box.</li></ul></div></div><div class="sect2" title="14.12.9. PostGIS Functions new, behavior changed, or enhanced in 1.4"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_1_4"></a>14.12.9. PostGIS Functions new, behavior changed, or enhanced in 1.4</h3></div></div></div><p>The functions given below are PostGIS functions that were introduced or enhanced in the 1.4 release.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#Populate_Geometry_Columns" title="Populate_Geometry_Columns">Populate_Geometry_Columns</a> - Ensures geometry columns are defined with type modifiers or have appropriate spatial constraints This ensures they will be registered correctly in geometry_columns view. By default will convert all geometry columns with no type modifier to ones with type modifiers. To get old behavior set use_typmod=false Availability: 1.4.0</li><li class="listitem"><a class="link" href="#ST_AsSVG" title="ST_AsSVG">ST_AsSVG</a> - Returns a Geometry in SVG path data given a geometry or geography object. 
		  Availability: 1.2.2. Availability: 1.4.0  Changed in PostGIS 1.4.0 to include L command in absolute path to conform to http://www.w3.org/TR/SVG/paths.html#PathDataBNF
		</li><li class="listitem"><a class="link" href="#ST_Collect" title="ST_Collect">ST_Collect</a> - Return a specified ST_Geometry value from a collection of other geometries. Availability: 1.4.0 -  ST_Collect(geomarray) was introduced. ST_Collect was enhanced to handle more geometries faster.</li><li class="listitem"><a class="link" href="#ST_ContainsProperly" title="ST_ContainsProperly">ST_ContainsProperly</a> - Returns true if B intersects the interior of A but not the boundary (or exterior). A does not contain properly itself, but does contain itself. Availability: 1.4.0 - requires GEOS &gt;= 3.1.0.</li><li class="listitem"><a class="link" href="#ST_Extent" title="ST_Extent">ST_Extent</a> - an aggregate function that returns the bounding box that bounds rows of geometries. 
		  Availability: 1.4.0
		</li><li class="listitem"><a class="link" href="#ST_GeoHash" title="ST_GeoHash">ST_GeoHash</a> - Return a GeoHash representation of the geometry. Availability: 1.4.0</li><li class="listitem"><a class="link" href="#ST_IsValidReason" title="ST_IsValidReason">ST_IsValidReason</a> - Returns text stating if a geometry is valid or not and if not valid, a reason why. Availability: 1.4 - requires GEOS &gt;= 3.1.0.</li><li class="listitem"><a class="link" href="#ST_LineCrossingDirection" title="ST_LineCrossingDirection">ST_LineCrossingDirection</a> - Given 2 linestrings, returns a number between -3 and 3 denoting what kind of crossing behavior. 0 is no crossing. Availability: 1.4</li><li class="listitem"><a class="link" href="#ST_LocateBetweenElevations" title="ST_LocateBetweenElevations">ST_LocateBetweenElevations</a> - Return a derived geometry (collection) value with elements that intersect the specified range of elevations inclusively. Only 3D, 4D LINESTRINGS and MULTILINESTRINGS are supported. Availability: 1.4.0</li><li class="listitem"><a class="link" href="#ST_MakeLine" title="ST_MakeLine">ST_MakeLine</a> - Creates a Linestring from point, multipoint, or line geometries. Availability: 1.4.0 -  ST_MakeLine(geomarray) was introduced. ST_MakeLine aggregate functions was enhanced to handle more points faster.</li><li class="listitem"><a class="link" href="#ST_MinimumBoundingCircle" title="ST_MinimumBoundingCircle">ST_MinimumBoundingCircle</a> - Returns the smallest circle polygon that can fully contain a geometry. Default uses 48 segments per quarter circle. Availability: 1.4.0 - requires GEOS</li><li class="listitem"><a class="link" href="#ST_Union" title="ST_Union">ST_Union</a> - Returns a geometry that represents the point set union of the Geometries. Availability: 1.4.0 - ST_Union was enhanced. ST_Union(geomarray) was introduced and also faster aggregate collection in PostgreSQL.  If you are using GEOS 3.1.0+
		ST_Union will use the faster Cascaded Union algorithm described in
		http://blog.cleverelephant.ca/2009/01/must-faster-unions-in-postgis-14.html</li></ul></div></div><div class="sect2" title="14.12.10. PostGIS Functions new in 1.3"><div class="titlepage"><div><div><h3 class="title"><a name="NewFunctions_1_3"></a>14.12.10. PostGIS Functions new in 1.3</h3></div></div></div><p>The functions given below are PostGIS functions that were introduced in the 1.3 release.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="link" href="#ST_AsGML" title="ST_AsGML">ST_AsGML</a> - Return the geometry as a GML version 2 or 3 element. Availability: 1.3.2</li><li class="listitem"><a class="link" href="#ST_AsGeoJSON" title="ST_AsGeoJSON">ST_AsGeoJSON</a> - Return the geometry as a GeoJSON element. Availability: 1.3.4</li><li class="listitem"><a class="link" href="#ST_SimplifyPreserveTopology" title="ST_SimplifyPreserveTopology">ST_SimplifyPreserveTopology</a> - Returns a "simplified" version of the given geometry using the Douglas-Peucker algorithm. Will avoid creating derived geometries (polygons in particular) that are invalid. Availability: 1.3.3</li></ul></div></div></div></div><div class="chapter" title="Chapter 15. Reporting Problems"><div class="titlepage"><div><div><h2 class="title"><a name="idp108553936"></a>Chapter 15. Reporting Problems</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#idp108554576">15.1. Reporting Software Bugs</a></span></dt><dt><span class="sect1"><a href="#idp108559184">15.2. Reporting Documentation Issues</a></span></dt></dl></div><div class="sect1" title="15.1. Reporting Software Bugs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108554576"></a>15.1. Reporting Software Bugs</h2></div></div></div><p>Reporting bugs effectively is a fundamental way to help PostGIS
    development. The most effective bug report is that enabling PostGIS
    developers to reproduce it, so it would ideally contain a script
    triggering it and every information regarding the environment in which it
    was detected. Good enough info can be extracted running <code class="code">SELECT
    postgis_full_version()</code> [for postgis] and <code class="code">SELECT
    version()</code> [for postgresql].</p><p>If you aren't using the latest release, it's worth taking a look at
    its <a class="ulink" href="http://svn.osgeo.org/postgis/trunk/NEWS" target="_top">release
    changelog</a> first, to find out if your bug has already been
    fixed.</p><p>Using the <a class="ulink" href="http://trac.osgeo.org/postgis/" target="_top">PostGIS bug
    tracker</a> will ensure your reports are not discarded, and will keep
    you informed on its handling process. Before reporting a new bug please
    query the database to see if it is a known one, and if it is please add
    any new information you have about it.</p><p>You might want to read Simon Tatham's paper about <a class="ulink" href="http://www.chiark.greenend.org.uk/~sgtatham/bugs.html" target="_top">How to Report
    Bugs Effectively</a> before filing a new report.</p></div><div class="sect1" title="15.2. Reporting Documentation Issues"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108559184"></a>15.2. Reporting Documentation Issues</h2></div></div></div><p>The documentation should accurately reflect the features and
    behavior of the software. If it doesn't, it could be because of a software
    bug or because the documentation is in error or deficient.</p><p>Documentation issues can also be reported to the <a class="ulink" href="http://trac.osgeo.org/postgis" target="_top">PostGIS bug
    tracker</a>.</p><p>If your revision is trivial, just describe it in a new bug tracker
    issue, being specific about its location in the documentation.</p><p>If your changes are more extensive, a Subversion patch is definitely
    preferred. This is a four step process on Unix (assuming you already have
    <a class="ulink" href="http://subversion.apache.org/" target="_top">Subversion</a>
    installed):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Check out a copy of PostGIS' Subversion trunk. On Unix,
        type:</p><p><span class="command"><strong>svn checkout
        http://svn.osgeo.org/postgis/trunk/</strong></span></p><p>This will be stored in the directory ./trunk</p></li><li class="listitem"><p>Make your changes to the documentation with your favorite text
        editor. On Unix, type (for example):</p><p><span class="command"><strong>vim trunk/doc/postgis.xml</strong></span></p><p>Note that the documentation is written in DocBook XML rather than HTML,
        so if you are not familiar with it please follow the example of the
        rest of the documentation.</p></li><li class="listitem"><p>Make a patch file containing the differences from the master
        copy of the documentation. On Unix, type:</p><p><span class="command"><strong>svn diff trunk/doc/postgis.xml &gt;
        doc.patch</strong></span></p></li><li class="listitem"><p>Attach the patch to a new issue in bug tracker.</p></li></ol></div></div></div><div class="appendix" title="Appendix A. Appendix"><div class="titlepage"><div><div><h2 class="title"><a name="release_notes"></a>Appendix A. Appendix</h2></div><div><h3 class="subtitle"><i>Release Notes</i></h3></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#idp108610512">A.1. Release 2.3.0</a></span></dt><dt><span class="sect1"><a href="#idp108633552">A.2. Release 2.2.2</a></span></dt><dt><span class="sect1"><a href="#idp108640592">A.3. Release 2.2.1</a></span></dt><dt><span class="sect1"><a href="#idp108651600">A.4. Release 2.2.0</a></span></dt><dt><span class="sect1"><a href="#idp108726224">A.5. Release 2.1.8</a></span></dt><dt><span class="sect1"><a href="#idp108731600">A.6. Release 2.1.7</a></span></dt><dt><span class="sect1"><a href="#idp108735184">A.7. Release 2.1.6</a></span></dt><dt><span class="sect1"><a href="#idp108743760">A.8. Release 2.1.5</a></span></dt><dt><span class="sect1"><a href="#idp108754128">A.9. Release 2.1.4</a></span></dt><dt><span class="sect1"><a href="#idp108806864">A.10. Release 2.1.3</a></span></dt><dt><span class="sect1"><a href="#idp108814032">A.11. Release 2.1.2</a></span></dt><dt><span class="sect1"><a href="#idp108838480">A.12. Release 2.1.1</a></span></dt><dt><span class="sect1"><a href="#idp108864848">A.13. Release 2.1.0</a></span></dt><dt><span class="sect1"><a href="#idp108991568">A.14. Release 2.0.5</a></span></dt><dt><span class="sect1"><a href="#idp109005648">A.15. Release 2.0.4</a></span></dt><dt><span class="sect1"><a href="#idp109042128">A.16. Release 2.0.3</a></span></dt><dt><span class="sect1"><a href="#idp109054416">A.17. Release 2.0.2</a></span></dt><dt><span class="sect1"><a href="#idp109105232">A.18. Release 2.0.1</a></span></dt><dt><span class="sect1"><a href="#idp109157200">A.19. Release 2.0.0</a></span></dt><dt><span class="sect1"><a href="#idp109196496">A.20. Release 1.5.4</a></span></dt><dt><span class="sect1"><a href="#idp109224016">A.21. Release 1.5.3</a></span></dt><dt><span class="sect1"><a href="#idp109248592">A.22. Release 1.5.2</a></span></dt><dt><span class="sect1"><a href="#idp109265488">A.23. Release 1.5.1</a></span></dt><dt><span class="sect1"><a href="#idp109279056">A.24. Release 1.5.0</a></span></dt><dt><span class="sect1"><a href="#idp109301584">A.25. Release 1.4.0</a></span></dt><dt><span class="sect1"><a href="#idp109326544">A.26. Release 1.3.6</a></span></dt><dt><span class="sect1"><a href="#idp109328208">A.27. Release 1.3.5</a></span></dt><dt><span class="sect1"><a href="#idp109329744">A.28. Release 1.3.4</a></span></dt><dt><span class="sect1"><a href="#idp109331664">A.29. Release 1.3.3</a></span></dt><dt><span class="sect1"><a href="#idp109333200">A.30. Release 1.3.2</a></span></dt><dt><span class="sect1"><a href="#idp109334736">A.31. Release 1.3.1</a></span></dt><dt><span class="sect1"><a href="#idp109336528">A.32. Release 1.3.0</a></span></dt><dt><span class="sect1"><a href="#idp109343952">A.33. Release 1.2.1</a></span></dt><dt><span class="sect1"><a href="#idp109348176">A.34. Release 1.2.0</a></span></dt><dt><span class="sect1"><a href="#idp109351504">A.35. Release 1.1.6</a></span></dt><dt><span class="sect1"><a href="#idp109362000">A.36. Release 1.1.5</a></span></dt><dt><span class="sect1"><a href="#idp109372240">A.37. Release 1.1.4</a></span></dt><dt><span class="sect1"><a href="#idp109383120">A.38. Release 1.1.3</a></span></dt><dt><span class="sect1"><a href="#idp109398864">A.39. Release 1.1.2</a></span></dt><dt><span class="sect1"><a href="#idp109411408">A.40. Release 1.1.1</a></span></dt><dt><span class="sect1"><a href="#idp109443664">A.41. Release 1.1.0</a></span></dt><dt><span class="sect1"><a href="#idp109478096">A.42. Release 1.0.6</a></span></dt><dt><span class="sect1"><a href="#idp109488464">A.43. Release 1.0.5</a></span></dt><dt><span class="sect1"><a href="#idp109501392">A.44. Release 1.0.4</a></span></dt><dt><span class="sect1"><a href="#rel_1.0.3_upgrading">A.45. Release 1.0.3</a></span></dt><dt><span class="sect1"><a href="#idp109528272">A.46. Release 1.0.2</a></span></dt><dt><span class="sect1"><a href="#idp109536208">A.47. Release 1.0.1</a></span></dt><dt><span class="sect1"><a href="#idp109546064">A.48. Release 1.0.0</a></span></dt><dt><span class="sect1"><a href="#idp109555536">A.49. Release 1.0.0RC6</a></span></dt><dt><span class="sect1"><a href="#idp109567184">A.50. Release 1.0.0RC5</a></span></dt><dt><span class="sect1"><a href="#idp109574352">A.51. Release 1.0.0RC4</a></span></dt><dt><span class="sect1"><a href="#idp109586512">A.52. Release 1.0.0RC3</a></span></dt><dt><span class="sect1"><a href="#idp109603152">A.53. Release 1.0.0RC2</a></span></dt><dt><span class="sect1"><a href="#idp109613008">A.54. Release 1.0.0RC1</a></span></dt></dl></div><div class="sect1" title="A.1. Release 2.3.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108610512"></a>A.1. Release 2.3.0</h2></div></div></div><p>Release date: 2016/09/26</p><p>This is a new feature release, with new functions, improved performance, all relevant bug fixes from PostGIS 2.2.3,and other goodies.</p><div class="simplesect" title="Important / Breaking Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108611920"></a>Important / Breaking Changes</h3></div></div></div><p>#3466, Casting from box3d to geometry now returns a 3D
                     geometry (Julien Rouhaud of Dalibo)</p><p>#3396, ST_EstimatedExtent, throw WARNING instead of ERROR
                     (Regina Obe)</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp108613456"></a>New Features</h3></div></div></div><p>Add support for custom TOC in postgis_restore.pl
                (Christoph Moench-Tegeder)</p><p>Add support for negative indexing in ST_PointN and ST_SetPoint
                (Rémi Cura)</p><p>Add parameters for geography ST_Buffer (Thomas Bonfort)</p><p>TopoGeom_addElement, TopoGeom_remElement (Sandro Santilli)</p><p>populate_topology_layer (Sandro Santilli)</p><p>#454,  ST_WrapX and lwgeom_wrapx (Sandro Santilli)</p><p>#1758, ST_Normalize (Sandro Santilli)</p><p>#2236, shp2pgsql -d now emits "DROP TABLE IF EXISTS"</p><p>#2259, ST_VoronoiPolygons and ST_VoronoiLines (Dan Baston)</p><p>#2841 and #2996, ST_MinimumBoundingRadius and new ST_MinimumBoundingCircle 
                       implementation using Welzl's algorithm (Dan Baston)</p><p>#2991, Enable ST_Transform to use PROJ.4 text (Mike Toews)</p><p>#3059, Allow passing per-dimension parameters in ST_Expand (Dan Baston)</p><p>#3339, ST_GeneratePoints (Paul Ramsey)</p><p>#3362, ST_ClusterDBSCAN (Dan Baston)</p><p>#3364, ST_GeometricMedian (Dan Baston)</p><p>#3391, Add table inheritance support in ST_EstimatedExtent
                       (Alessandro Pasotti)</p><p>#3424, ST_MinimumClearance (Dan Baston)</p><p>#3428, ST_Points (Dan Baston)</p><p>#3465, ST_ClusterKMeans (Paul Ramsey)</p><p>#3469, ST_MakeLine with MULTIPOINTs (Paul Norman)</p><p>#3549, Support PgSQL 9.6 parallel query mode, as far as possible
                       (Paul Ramsey, Regina Obe)</p><p>#3557, Geometry function costs based on query stats (Paul Norman)</p><p>#3591, Add support for BRIN indexes. PostgreSQL 9.4+ required.
                       (Giuseppe Broccolo of 2nd Quadrant, Julien Rouhaud
                        and Ronan Dunklau of Dalibo)</p><p>#3496, Make postgis non-relocateable for extension install,
                       schema qualify calls in functions (Regina Obe)
                       Should resolve once and for all for extensions #3494, #3486, #3076</p><p>#3547, Update tiger geocoder to support TIGER 2016
                       and to support both http and ftp.</p><p>#3613, Segmentize geography using equal length segments
                       (Hugo Mercier of Oslandia)</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108624464"></a>Bug Fixes</h3></div></div></div><p>All relevant bug fixes from PostGIS 2.2.3</p><p>#2841, ST_MinimumBoundingCircle not covering original</p><p>#3604, pgcommon/Makefile.in orders CFLAGS incorrectly leading to
                       wrong liblwgeom.h (Greg Troxel)</p></div><div class="simplesect" title="Performance Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108630736"></a>Performance Enhancements</h3></div></div></div><p>#75, Enhancement to PIP short circuit (Dan Baston)</p><p>#3383, Avoid deserializing small geometries during index operations
                       (Dan Baston)</p><p>#3400, Minor optimization of PIP routines (Dan Baston)</p><p>Make adding a line to topology interruptible (Sandro Santilli)</p><p>Documentation updates from Mike Toews</p></div></div><div class="sect1" title="A.2. Release 2.2.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108633552"></a>A.2. Release 2.2.2</h2></div></div></div><p>Release date: 2016/03/22</p><p>This is a bug fix and performance improvement release.</p><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp108634960"></a>New Features</h3></div></div></div><p>#3463, Fix crash on face-collapsing edge change</p><p>#3422, Improve ST_Split robustness on standard precision double systems (arm64, ppc64el, s390c, powerpc, ...)</p><p>#3427, Update spatial_ref_sys to EPSG version 8.8</p><p>#3433, ST_ClusterIntersecting incorrect for MultiPoints</p><p>#3435, ST_AsX3D fix rendering of concave geometries</p><p>#3436, memory handling mistake in ptarray_clone_deep</p><p>#3437, ST_Intersects incorrect for MultiPoints</p><p>#3461, ST_GeomFromKML crashes Postgres when there are innerBoundaryIs and no outerBoundaryIs</p><p>#3429, upgrading to 2.3 or from 2.1 can cause loop/hang on some platforms</p><p>#3460, ST_ClusterWithin 'Tolerance not defined' error after upgrade</p><p>#3490, Raster data restore issues, materialized views. Scripts postgis_proc_set_search_path.sql, rtpostgis_proc_set_search_path.sql refer to http://postgis.net/docs/manual-2.2/RT_FAQ.html#faq_raster_data_not_restore</p><p>#3426, failing POINT EMPTY tests on fun architectures</p></div></div><div class="sect1" title="A.3. Release 2.2.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108640592"></a>A.3. Release 2.2.1</h2></div></div></div><p>Release date: 2016/01/06</p><p>This is a bug fix and performance improvement release.</p><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp108642000"></a>New Features</h3></div></div></div><p>#2232, avoid accumulated error in SVG rounding</p><p>#3321, Fix performance regression in topology loading</p><p>#3329, Fix robustness regression in TopoGeo_addPoint</p><p>#3349, Fix installation path of postgis_topology scripts</p><p>#3351, set endnodes isolation on ST_RemoveIsoEdge
					   (and lwt_RemIsoEdge)</p><p>#3355, geography ST_Segmentize has geometry bbox </p><p>#3359, Fix toTopoGeom loss of low-id primitives from
					   TopoGeometry definition</p><p>#3360, _raster_constraint_info_scale invalid input syntax</p><p>#3375, crash in repeated point removal for collection(point)</p><p>#3378, Fix handling of hierarchical TopoGeometries
					   in presence of multiple topologies</p><p>#3380, #3402, Decimate lines on topology load</p><p>#3388, #3410, Fix missing end-points in ST_Removepoints</p><p>#3389, Buffer overflow in lwgeom_to_geojson</p><p>#3390, Compilation under Alpine Linux 3.2
						gives an error when compiling the postgis and postgis_topology extension</p><p>#3393, ST_Area NaN for some polygons</p><p>#3401, Improve ST_Split robustness on 32bit systems</p><p>#3404, ST_ClusterWithin crashes backend</p><p>#3407, Fix crash on splitting a face or an edge
					   defining multiple TopoGeometry objects</p><p>#3411, Clustering functions not using spatial index</p><p>#3412, Improve robustness of snapping step in TopoGeo_addLinestring</p><p>#3415, Fix OSX 10.9 build under pkgsrc</p><p>Fix memory leak in lwt_ChangeEdgeGeom [liblwgeom]</p></div></div><div class="sect1" title="A.4. Release 2.2.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108651600"></a>A.4. Release 2.2.0</h2></div></div></div><p>Release date: 2015/10/07</p><p>This is a new feature release, with new functions, improved performance, and other goodies.</p><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp108653008"></a>New Features</h3></div></div></div><p>Topology API in liblwgeom (Sandro Santilli / Regione Toscana - SITA)</p><p>New lwgeom_unaryunion method in liblwgeom</p><p>New lwgeom_linemerge method in liblwgeom</p><p>New lwgeom_is_simple method in liblwgeom</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3169" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3169" target="_top">#3169</a></a>, Add SFCGAL 1.1 support: add ST_3DDifference, ST_3DUnion, ST_Volume, ST_MakeSolid, ST_IsSolid (Vincent Mora / Oslandia)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3169" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3169" target="_top">#3169</a></a>, ST_ApproximateMedialAxis (Sandro Santilli)</p><p>ST_CPAWithin (Sandro Santilli / Boundless)</p><p>Add |=| operator with CPA semantic and KNN support with PgSQL 9.5+ (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3131" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3131" target="_top">#3131</a></a>, KNN support for the geography type (Paul Ramsey / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3023" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3023" target="_top">#3023</a></a>, ST_ClusterIntersecting / ST_ClusterWithin (Dan Baston)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2703" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2703" target="_top">#2703</a></a>, Exact KNN results for all geometry types, aka "KNN re-check" (Paul Ramsey / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1137" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1137" target="_top">#1137</a></a>, Allow a tolerance value in ST_RemoveRepeatedPoints (Paul Ramsey / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3062" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3062" target="_top">#3062</a></a>, Allow passing M factor to ST_Scale (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3139" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3139" target="_top">#3139</a></a>, ST_BoundingDiagonal (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3129" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3129" target="_top">#3129</a></a>, ST_IsValidTrajectory (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3128" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3128" target="_top">#3128</a></a>, ST_ClosestPointOfApproach (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3152" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3152" target="_top">#3152</a></a>, ST_DistanceCPA (Sandro Santilli / Boundless)</p><p>Canonical output for index key types</p><p>ST_SwapOrdinates (Sandro Santilli / Boundless)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2918" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2918" target="_top">#2918</a></a>, Use GeographicLib functions for geodetics (Mike Toews)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3074" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3074" target="_top">#3074</a></a>, ST_Subdivide to break up large geometry (Paul Ramsey / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3040" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3040" target="_top">#3040</a></a>, KNN GiST index based centroid (&lt;&lt;-&gt;&gt;) n-D distance operators (Sandro Santilli / Boundless)</p><p>Interruptibility API for liblwgeom (Sandro Santilli / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2939" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2939" target="_top">#2939</a></a>, ST_ClipByBox2D (Sandro Santilli / CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2247" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2247" target="_top">#2247</a></a>, ST_Retile and ST_CreateOverview: in-db raster overviews creation (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/899" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/899" target="_top">#899</a></a>, -m shp2pgsql attribute names mapping -m switch (Regina Obe / Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1678" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1678" target="_top">#1678</a></a>, Added GUC postgis.gdal_datapath to specify GDAL config variable GDAL_DATA</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2843" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2843" target="_top">#2843</a></a>, Support reprojection on raster import (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2349" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2349" target="_top">#2349</a></a>, Support for encoded_polyline input/output (Kashif Rasul)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2159" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2159" target="_top">#2159</a></a>, report libjson version from postgis_full_version()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2770" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2770" target="_top">#2770</a></a>, ST_MemSize(raster)</p><p>Add postgis_noop(raster)</p><p>Added missing variants of ST_TPI(), ST_TRI() and ST_Roughness()</p><p>Added GUC postgis.gdal_enabled_drivers to specify GDAL config variable GDAL_SKIP</p><p>Added GUC postgis.enable_outdb_rasters to enable access to rasters with out-db bands</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2387" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2387" target="_top">#2387</a></a>, address_standardizer extension as part of PostGIS (Stephen Woodbridge / imaptools.com, Walter Sinclair, Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2816" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2816" target="_top">#2816</a></a>, address_standardizer_data_us extension  provides reference lex,gaz,rules for address_standardizer (Stephen Woodbridge / imaptools.com, Walter Sinclair, Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2341" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2341" target="_top">#2341</a></a>, New mask parameter for ST_MapAlgebra</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2397" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2397" target="_top">#2397</a></a>, read encoding info automatically in shapefile loader</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2430" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2430" target="_top">#2430</a></a>, ST_ForceCurve</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2565" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2565" target="_top">#2565</a></a>, ST_SummaryStatsAgg()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2567" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2567" target="_top">#2567</a></a>, ST_CountAgg()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2632" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2632" target="_top">#2632</a></a>, ST_AsGML() support for curved features</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2652" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2652" target="_top">#2652</a></a>, Add --upgrade-path switch to run_test.pl</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2754" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2754" target="_top">#2754</a></a>, sfcgal wrapped as an extension</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2227" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2227" target="_top">#2227</a></a>, Simplification with Visvalingam-Whyatt algorithm ST_SimplifyVW, ST_SetEffectiveArea (Nicklas Avén)</p><p>Functions to encode and decode TWKB ST_AsTWKB, ST_GeomFromTWKB (Paul Ramsey / Nicklas Avén / CartoDB)</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108702032"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3223" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3223" target="_top">#3223</a></a>, Add memcmp short-circuit to ST_Equals (Daniel Baston)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3227" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3227" target="_top">#3227</a></a>, Tiger geocoder upgraded to support Tiger 2015 census</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2278" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2278" target="_top">#2278</a></a>, Make liblwgeom compatible between minor releases</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/897" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/897" target="_top">#897</a></a>, ST_AsX3D support for GeoCoordinates and systems "GD" "WE" ability to flip x/y axis (use option = 2, 3)</p><p>ST_Split: allow splitting lines by multilines, multipoints and (multi)polygon boundaries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3070" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3070" target="_top">#3070</a></a>, Simplify geometry type constraint</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2839" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2839" target="_top">#2839</a></a>, Implement selectivity estimator for functional indexes, speeding up spatial queries on raster tables. (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2361" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2361" target="_top">#2361</a></a>, Added spatial_index column to raster_columns view</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2390" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2390" target="_top">#2390</a></a>, Testsuite for pgsql2shp</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2527" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2527" target="_top">#2527</a></a>, Added -k flag to raster2pgsql to skip checking that band is NODATA</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2616" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2616" target="_top">#2616</a></a>, Reduce text casts during topology building and export</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2717" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2717" target="_top">#2717</a></a>, support startpoint, endpoint, pointn, numpoints for compoundcurve</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2747" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2747" target="_top">#2747</a></a>, Add support for GDAL 2.0</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2754" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2754" target="_top">#2754</a></a>, SFCGAL can now be installed with CREATE EXTENSION (Vincent Mora @ Oslandia)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2828" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2828" target="_top">#2828</a></a>, Convert ST_Envelope(raster) from SQL to C</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2829" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2829" target="_top">#2829</a></a>, Shortcut ST_Clip(raster) if geometry fully contains the raster and no NODATA specified</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2906" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2906" target="_top">#2906</a></a>, Update tiger geocoder to handle tiger 2014 data</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3048" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3048" target="_top">#3048</a></a>, Speed up geometry simplification (J.Santana @ CartoDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3092" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3092" target="_top">#3092</a></a>, Slow performance of geometry_columns with many tables</p></div></div><div class="sect1" title="A.5. Release 2.1.8"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108726224"></a>A.5. Release 2.1.8</h2></div></div></div><p>Release date: 2015-07-07</p><p>This is a critical bug fix release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108727632"></a>Bug Fixes</h3></div></div></div><p>#3159, do not force a bbox cache on ST_Affine</p><p>#3018, GROUP BY geography sometimes returns duplicate rows</p><p>#3048, shp2pgsql - illegal number format when specific system locale set</p><p>#3094, Malformed GeoJSON inputs crash backend</p><p>#3104, st_asgml introduces random characters in ID field</p><p>#3155, Remove liblwgeom.h on make uninstall</p><p>#3177, gserialized_is_empty cannot handle nested empty cases</p><p>Fix crash in ST_LineLocatePoint</p></div></div><div class="sect1" title="A.6. Release 2.1.7"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108731600"></a>A.6. Release 2.1.7</h2></div></div></div><p>Release date: 2015-03-30</p><p>This is a critical bug fix release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108733136"></a>Bug Fixes</h3></div></div></div><p>#3086, ST_DumpValues() crashes backend on cleanup with invalid band indexes</p><p>#3088, Do not (re)define strcasestr in a liblwgeom.h</p><p>#3094, Malformed GeoJSON inputs crash backend</p></div></div><div class="sect1" title="A.7. Release 2.1.6"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108735184"></a>A.7. Release 2.1.6</h2></div></div></div><p>Release date: 2015-03-20</p><p>This is a bug fix and performance improvement release.</p><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108736592"></a>Enhancements</h3></div></div></div><p>#3000, Ensure edge splitting and healing algorithms use indexes</p><p>#3048, Speed up geometry simplification (J.Santana @ CartoDB)</p><p>#3050, Speep up geometry type reading (J.Santana @ CartoDB)</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108738512"></a>Bug Fixes</h3></div></div></div><p>#2941, allow geography columns with SRID other than 4326</p><p>#3069, small objects getting inappropriately fluffed up w/ boxes</p><p>#3068, Have postgis_typmod_dims return NULL for unconstrained dims</p><p>#3061, Allow duplicate points in JSON, GML, GML ST_GeomFrom* functions</p><p>#3058, Fix ND-GiST picksplit method to split on the best plane</p><p>#3052, Make operators &lt;-&gt; and &lt;#&gt; available for PostgreSQL &lt; 9.1</p><p>#3045, Fix dimensionality confusion in &amp;&amp;&amp; operator</p><p>#3016, Allow unregistering layers of corrupted topologies</p><p>#3015, Avoid exceptions from TopologySummary</p><p>#3020, ST_AddBand out-db bug where height using width value</p><p>#3031, Allow restore of Geometry(Point) tables dumped with empties in them</p></div></div><div class="sect1" title="A.8. Release 2.1.5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108743760"></a>A.8. Release 2.1.5</h2></div></div></div><p>Release date: 2014-12-18</p><p>This is a bug fix and performance improvement release.</p><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108745168"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2933" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2933" target="_top">#2933</a></a>, Speedup construction of large multi-geometry objects</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108746960"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2947" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2947" target="_top">#2947</a></a>, Fix memory leak in lwgeom_make_valid for single-component
						           collection input</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2949" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2949" target="_top">#2949</a></a>, Fix memory leak in lwgeom_mindistance2d for curve input</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2931" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2931" target="_top">#2931</a></a>, BOX representation is case sensitive</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2942" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2942" target="_top">#2942</a></a>, PostgreSQL 9.5 support</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2953" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2953" target="_top">#2953</a></a>, 2D stats not generated when Z/M values are extreme</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3009" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/3009" target="_top">#3009</a></a>, Geography cast may effect underlying tuple</p></div></div><div class="sect1" title="A.9. Release 2.1.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108754128"></a>A.9. Release 2.1.4</h2></div></div></div><p>Release date: 2014-09-10</p><p>This is a bug fix and performance improvement release.</p><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108755536"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2745" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2745" target="_top">#2745</a></a>, Speedup ST_Simplify calls against points</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2747" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2747" target="_top">#2747</a></a>, Support for GDAL 2.0</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2749" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2749" target="_top">#2749</a></a>, Make rtpostgis_upgrade_20_21.sql ACID</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2811" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2811" target="_top">#2811</a></a>, Do not specify index names when loading shapefiles/rasters</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2829" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2829" target="_top">#2829</a></a>, Shortcut ST_Clip(raster) if geometry fully contains the raster
                       and no NODATA specified</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2895" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2895" target="_top">#2895</a></a>, Raise cost of ST_ConvexHull(raster) to 300 for better query plans</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108762576"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2605" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2605" target="_top">#2605</a></a>, armel: _ST_Covers() returns true for point in hole</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2911" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2911" target="_top">#2911</a></a>, Fix output scale on ST_Rescale/ST_Resample/ST_Resize of rasters
                       with scale 1/-1 and offset 0/0.</p><p>Fix crash in ST_Union(raster)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2704" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2704" target="_top">#2704</a></a>, ST_GeomFromGML() does not work properly with array of gml:pos
                (Even Roualt)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2708" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2708" target="_top">#2708</a></a>, updategeometrysrid doesn't update srid check when schema
                       not specified. Patch from Marc Jansen</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2720" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2720" target="_top">#2720</a></a>, lwpoly_add_ring should update maxrings after realloc</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2759" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2759" target="_top">#2759</a></a>, Fix postgis_restore.pl handling of multiline object comments
                       embedding sql comments</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2774" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2774" target="_top">#2774</a></a>, fix undefined behavior in ptarray_calculate_gbox_geodetic</p><p>Fix potential memory fault in ST_MakeValid</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2784" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2784" target="_top">#2784</a></a>, Fix handling of bogus argument to --with-sfcgal</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2772" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2772" target="_top">#2772</a></a>, Premature memory free in RASTER_getBandPath (ST_BandPath)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2755" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2755" target="_top">#2755</a></a>, Fix regressions tests against all versions of SFCGAL</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2775" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2775" target="_top">#2775</a></a>, lwline_from_lwmpoint leaks memory</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2802" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2802" target="_top">#2802</a></a>, ST_MapAlgebra checks for valid callback function return value</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2803" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2803" target="_top">#2803</a></a>, ST_MapAlgebra handles no userarg and STRICT callback function</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2834" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2834" target="_top">#2834</a></a>, ST_Estimated_Extent and mixedCase table names (regression bug)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2845" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2845" target="_top">#2845</a></a>, Bad geometry created from ST_AddPoint</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2870" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2870" target="_top">#2870</a></a>, Binary insert into geography column results geometry being inserted</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2872" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2872" target="_top">#2872</a></a>, make install builds documentation (Greg Troxell)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2819" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2819" target="_top">#2819</a></a>, find isfinite or replacement on Centos5 / Solaris</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2899" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2899" target="_top">#2899</a></a>, geocode limit 1 not returning best answer (tiger geocoder)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2903" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2903" target="_top">#2903</a></a>, Unable to compile on FreeBSD</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2927" target="_top"><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2927" target="_top">#2927</a></a>  reverse_geocode not filling in direction prefix (tiger geocoder)
                       get rid of deprecated ST_Line_Locate_Point called</p></div></div><div class="sect1" title="A.10. Release 2.1.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108806864"></a>A.10. Release 2.1.3</h2></div></div></div><p>Release date: 2014/05/13</p><p>This is a bug fix and security release.</p><div class="simplesect" title="Important changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108808272"></a>Important changes</h3></div></div></div><p>
			Starting with this version offline raster access and use of GDAL drivers
			are disabled by default.
			</p><p>
			An environment variable is introduced to allow for enabling
			specific GDAL drivers: POSTGIS_GDAL_ENABLED_DRIVERS.
			By default, all GDAL drivers are disabled
			</p><p>
			An environment variable is introduced to allow for enabling
			out-db raster bands: POSTGIS_ENABLE_OUTDB_RASTERS.
			By default, out-db raster bands are disabled
			</p><p>
			The environment variables must be set for the PostgreSQL process,
			and determines the behavior of the whole cluster.
			</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108810832"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2697" target="_top">#2697</a>, invalid GeoJSON Polygon input crashes server process</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2700" target="_top">#2700</a>, Fix dumping of higher-dimension datasets with null rows</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2706" target="_top">#2706</a>, ST_DumpPoints of EMPTY geometries crashes server</p></div></div><div class="sect1" title="A.11. Release 2.1.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108814032"></a>A.11. Release 2.1.2</h2></div></div></div><p>Release date: 2014/03/31</p><p>This is a bug fix release, addressing issues that have been filed since the 2.1.1 release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108815440"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2666" target="_top">#2666</a>, Error out at configure time if no SQL preprocessor can be found</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2534" target="_top">#2534</a>, st_distance returning incorrect results for large geographies</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2539" target="_top">#2539</a>, Check for json-c/json.h presence/usability before json/json.h</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2543" target="_top">#2543</a>, invalid join selectivity error from simple query</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2546" target="_top">#2546</a>, GeoJSON with string coordinates parses incorrectly </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2547" target="_top">#2547</a>, Fix ST_Simplify(TopoGeometry) for hierarchical topogeoms</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2552" target="_top">#2552</a>, Fix NULL raster handling in ST_AsPNG, ST_AsTIFF and
                       ST_AsJPEG</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2555" target="_top">#2555</a>, Fix parsing issue of range arguments of ST_Reclass</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2556" target="_top">#2556</a>, geography ST_Intersects results depending on insert order</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2580" target="_top">#2580</a>, Do not allow installing postgis twice in the same database</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2589" target="_top">#2589</a>, Remove use of unnecessary void pointers</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2607" target="_top">#2607</a>, Cannot open more than 1024 out-db files in one process</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2610" target="_top">#2610</a>, Ensure face splitting algorithm uses the edge index</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2615" target="_top">#2615</a>, EstimatedExtent (and hence, underlying stats) gathering wrong bbox</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2619" target="_top">#2619</a>, Empty rings array in GeoJSON polygon causes crash</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2634" target="_top">#2634</a>, regression in sphere distance code</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2638" target="_top">#2638</a>, Geography distance on M geometries sometimes wrong</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2648" target="_top">#2648</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2653" target="_top">#2653</a>, Fix topology functions when "topology" is not in search_path</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2654" target="_top">#2654</a>, Drop deprecated calls from topology</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2655" target="_top">#2655</a>, Let users without topology privileges call postgis_full_version()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2674" target="_top">#2674</a>, Fix missing operator = and hash_raster_ops opclass on raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2675" target="_top">#2675</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2534" target="_top">#2534</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2636" target="_top">#2636</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2634" target="_top">#2634</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2638" target="_top">#2638</a>, Geography distance issues with tree optimization</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108836048"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2494" target="_top">#2494</a>, avoid memcopy in GiST index (hayamiz)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2560" target="_top">#2560</a>, soft upgrade: avoid drop/recreate of aggregates that hadn't changed</p></div></div><div class="sect1" title="A.12. Release 2.1.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108838480"></a>A.12. Release 2.1.1</h2></div></div></div><p>Release date: 2013/11/06</p><p>This is a bug fix release, addressing issues that have been filed since the 2.1.0 release.</p><div class="simplesect" title="Important Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108839888"></a>Important Changes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2514" target="_top">#2514</a>, Change raster license from GPL v3+ to v2+, allowing distribution of PostGIS Extension as GPLv2.</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108841424"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2396" target="_top">#2396</a>, Make regression tests more endian-agnostic</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2434" target="_top">#2434</a>, Fix ST_Intersection(geog,geog) regression in rare cases</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2454" target="_top">#2454</a>, Fix behavior of ST_PixelAsXXX functions regarding exclude_nodata_value parameter</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2489" target="_top">#2489</a>, Fix upgrades from 2.0 leaving stale function signatures</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2525" target="_top">#2525</a>, Fix handling of SRID in nested collections</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2449" target="_top">#2449</a>, Fix potential infinite loop in index building</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2493" target="_top">#2493</a>, Fix behavior of ST_DumpValues when passed an empty raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2502" target="_top">#2502</a>, Fix postgis_topology_scripts_installed() install schema</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2504" target="_top">#2504</a>, Fix segfault on bogus pgsql2shp call </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2512" target="_top">#2512</a>, Support for foreign tables and materialized views in raster_columns and raster_overviews</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108862288"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2478" target="_top">#2478</a>, support for tiger 2013</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2463" target="_top">#2463</a>, support for exact length calculations on arc geometries</p></div></div><div class="sect1" title="A.13. Release 2.1.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108864848"></a>A.13. Release 2.1.0</h2></div></div></div><p>Release date: 2013/08/17</p><p>This is a minor release addressing both bug fixes and performance and functionality enhancements addressing issues since 2.0.3 release.
		If you are upgrading from 2.0+, only a soft upgrade is required.  If you are upgrading from 1.5 or earlier, a hard upgrade is required.</p><div class="simplesect" title="Important / Breaking Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108866256"></a>Important / Breaking Changes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1653" target="_top">#1653</a>, Removed srid parameter from ST_Resample(raster) and variants
               with reference raster no longer apply reference raster's SRID.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1962" target="_top">#1962</a> ST_Segmentize - As a result of
              the introduction of geography support, The construct:
         <code class="code">SELECT ST_Segmentize('LINESTRING(1 2, 3 4)',0.5);</code>
        will result in ambiguous function error</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2026" target="_top">#2026</a>, ST_Union(raster) now unions all bands of all rasters</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2089" target="_top">#2089</a>, liblwgeom: lwgeom_set_handlers replaces lwgeom_init_allocators.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2150" target="_top">#2150</a>, regular_blocking is no longer a constraint. column of same name
               in raster_columns now checks for existance of spatially_unique
               and coverage_tile constraints</p><p>ST_Intersects(raster, geometry) behaves in the same manner as
        ST_Intersects(geometry, raster).</p><p>point variant of ST_SetValue(raster) previously did not check SRID
        of input geometry and raster.</p><p>ST_Hillshade parameters azimuth and altitude are now in degrees
        instead of radians.</p><p>ST_Slope and ST_Aspect return pixel values in degrees instead of radians.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2104" target="_top">#2104</a>, ST_World2RasterCoord, ST_World2RasterCoordX and
               ST_World2RasterCoordY renamed to ST_WorldToRasterCoord,
               ST_WorldToRasterCoordX and ST_WorldToRasterCoordY.
               ST_Raster2WorldCoord, ST_Raster2WorldCoordX and
               ST_Raster2WorldCoordY renamed to ST_RasterToWorldCoord,
               ST_RasterToWorldCoordX and ST_RasterToWorldCoordY</p><p>ST_Estimated_Extent renamed to ST_EstimatedExtent</p><p>ST_Line_Interpolate_Point renamed to ST_LineInterpolatePoint</p><p>ST_Line_Substring renamed to ST_LineSubstring</p><p>ST_Line_Locate_Point renamed to ST_LineLocatePoint</p><p>ST_Force_XXX renamed to ST_ForceXXX</p><p>ST_MapAlgebraFctNgb and 1 and 2 raster variants of ST_MapAlgebraFct.
        Use ST_MapAlgebra instead</p><p>1 and 2 raster variants of ST_MapAlgebraExpr.
        Use expression variants of ST_MapAlgebra instead</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp108876368"></a>New Features</h3></div></div></div><p>- Refer to http://postgis.net/docs/manual-2.1/PostGIS_Special_Functions_Index.html#NewFunctions_2_1
     for complete list of new functions</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/310" target="_top">#310</a>, ST_DumpPoints converted to a C function (Nathan Wagner) and much faster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/739" target="_top">#739</a>, UpdateRasterSRID()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/945" target="_top">#945</a>, improved join selectivity, N-D selectivity calculations,
      user accessible selectivity and stats reader functions for
      testing (Paul Ramsey / OpenGeo)</p><p>toTopoGeom with TopoGeometry sink (Sandro Santilli / Vizzuality)</p><p>clearTopoGeom (Sandro Santilli / Vizzuality)</p><p>ST_Segmentize(geography) (Paul Ramsey / OpenGeo)</p><p>ST_DelaunayTriangles (Sandro Santilli / Vizzuality)</p><p>ST_NearestValue, ST_Neighborhood (Bborie Park / UC Davis)</p><p>ST_PixelAsPoint, ST_PixelAsPoints (Bborie Park / UC Davis)</p><p>ST_PixelAsCentroid, ST_PixelAsCentroids (Bborie Park / UC Davis)</p><p>ST_Raster2WorldCoord, ST_World2RasterCoord (Bborie Park / UC Davis)</p><p>Additional raster/raster spatial relationship functions
      (ST_Contains, ST_ContainsProperly, ST_Covers, ST_CoveredBy, ST_Disjoint,
      ST_Overlaps, ST_Touches, ST_Within, ST_DWithin, ST_DFullyWithin)
      (Bborie Park / UC Davis)</p><p>Added array variants of ST_SetValues() to set many pixel values of a band
      in one call (Bborie Park / UC Davis)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1293" target="_top">#1293</a>, ST_Resize(raster) to resize rasters based upon width/height</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1627" target="_top">#1627</a>, package tiger_geocoder as a PostgreSQL extension</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1643" target="_top">#1643</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2076" target="_top">#2076</a>, Upgrade tiger geocoder to support loading tiger 2011 and 2012
      (Regina Obe / Paragon Corporation) Funded by Hunter Systems Group</p><p>GEOMETRYCOLLECTION support for ST_MakeValid (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1709" target="_top">#1709</a>, ST_NotSameAlignmentReason(raster, raster)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1818" target="_top">#1818</a>, ST_GeomFromGeoHash and friends (Jason Smith (darkpanda))</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1856" target="_top">#1856</a>, reverse geocoder rating setting for prefer numbered highway name</p><p>ST_PixelOfValue (Bborie Park / UC Davis)</p><p>Casts to/from PostgreSQL geotypes (point/path/polygon).</p><p>Added geomval array variant of ST_SetValues() to set many pixel values of
      a band using a set of geometries and corresponding values in one call
      (Bborie Park / UC Davis)</p><p>ST_Tile(raster) to break up a raster into tiles (Bborie Park / UC Davis)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1895" target="_top">#1895</a>, new r-tree node splitting algorithm (Alex Korotkov)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2011" target="_top">#2011</a>, ST_DumpValues to output raster as array (Bborie Park / UC Davis)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2018" target="_top">#2018</a>, ST_Distance support for CircularString, CurvePolygon, MultiCurve,
      MultiSurface, CompoundCurve </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2030" target="_top">#2030</a>, n-raster (and n-band) ST_MapAlgebra (Bborie Park / UC Davis)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2193" target="_top">#2193</a>, Utilize PAGC parser as drop in replacement for tiger normalizer
              (Steve Woodbridge, Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2210" target="_top">#2210</a>, ST_MinConvexHull(raster)</p><p>lwgeom_from_geojson in liblwgeom (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1687" target="_top">#1687</a>, ST_Simplify for TopoGeometry (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2228" target="_top">#2228</a>, TopoJSON output for TopoGeometry (Sandro Santilli / Vizzuality)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2123" target="_top">#2123</a>, ST_FromGDALRaster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/613" target="_top">#613</a>, ST_SetGeoReference with numerical parameters instead of text</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2276" target="_top">#2276</a>, ST_AddBand(raster) variant for out-db bands</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2280" target="_top">#2280</a>, ST_Summary(raster)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2163" target="_top">#2163</a>, ST_TPI for raster (Nathaniel Clay)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2164" target="_top">#2164</a>, ST_TRI for raster (Nathaniel Clay)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2302" target="_top">#2302</a>, ST_Roughness for raster (Nathaniel Clay)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2290" target="_top">#2290</a>, ST_ColorMap(raster) to generate RGBA bands</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2254" target="_top">#2254</a>, Add SFCGAL backend support.
             (Backend selection throught postgis.backend var)
             Functions available both throught GEOS or SFCGAL:
              ST_Intersects, ST_3DIntersects, ST_Intersection, ST_Area,
              ST_Distance, ST_3DDistance
             New functions available only with SFCGAL backend:
              ST_3DIntersection, ST_Tesselate, ST_3DArea, ST_Extrude, ST_ForceLHR
              ST_Orientation, ST_Minkowski, ST_StraightSkeleton
              postgis_sfcgal_version
             New function available in PostGIS: ST_ForceSFS
             (Olivier Courtin and Hugo Mercier / Oslandia)</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp108908752"></a>Enhancements</h3></div></div></div><p>For detail of new functions and function improvements, please refer to <a class="xref" href="#NewFunctions_2_1" title="14.12.4. PostGIS Functions new or enhanced in 2.1">Section 14.12.4, “PostGIS Functions new or enhanced in 2.1”</a>.</p><p>Much faster raster ST_Union,  ST_Clip and many more function additions operations</p><p>For geometry/geography better planner selectivity and a lot more functions.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/823" target="_top">#823</a>,  tiger geocoder: Make loader_generate_script download portion
             less greedy</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/826" target="_top">#826</a>,  raster2pgsql no longer defaults to padding tiles. Flag -P
             can be used to pad tiles</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1363" target="_top">#1363</a>, ST_AddBand(raster, ...) array version rewritten in C</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1364" target="_top">#1364</a>, ST_Union(raster, ...) aggregate function rewritten in C</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1655" target="_top">#1655</a>, Additional default values for parameters of ST_Slope</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1661" target="_top">#1661</a>, Add aggregate variant of ST_SameAlignment</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1719" target="_top">#1719</a>, Add support for Point and GeometryCollection ST_MakeValid inputs</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1780" target="_top">#1780</a>, support ST_GeoHash for geography</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1796" target="_top">#1796</a>, Big performance boost for distance calculations in geography</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1802" target="_top">#1802</a>, improved function interruptibility.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1823" target="_top">#1823</a>, add parameter in ST_AsGML to use id column for GML 3 output
             (become mandatory since GML 3.2.1)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1856" target="_top">#1856</a>, tiger geocoder: reverse geocoder rating setting for prefer
             numbered highway name</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1938" target="_top">#1938</a>, Refactor basic ST_AddBand to add multiple new bands in one call</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1978" target="_top">#1978</a>, wrong answer when calculating length of a closed circular
             arc (circle)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1989" target="_top">#1989</a>, Preprocess input geometry to just intersection with raster
             to be clipped</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2021" target="_top">#2021</a>, Added multi-band support to ST_Union(raster, ...) aggregate function</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2006" target="_top">#2006</a>, better support of ST_Area(geography) over poles and dateline</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2065" target="_top">#2065</a>, ST_Clip(raster, ...) now a C function</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2069" target="_top">#2069</a>, Added parameters to ST_Tile(raster) to control padding of tiles</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2078" target="_top">#2078</a>, New variants of ST_Slope, ST_Aspect and ST_HillShade to provide
             solution to handling tiles in a coverage</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2097" target="_top">#2097</a>, Added RANGE uniontype option for ST_Union(raster)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2105" target="_top">#2105</a>, Added ST_Transform(raster) variant for aligning output to
             reference raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2119" target="_top">#2119</a>, Rasters passed to ST_Resample(), ST_Rescale(), ST_Reskew(),
             and ST_SnapToGrid() no longer require an SRID</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2141" target="_top">#2141</a>, More verbose output when constraints fail to be added
             to a raster column</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2143" target="_top">#2143</a>, Changed blocksize constraint of raster to allow multiple values</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2148" target="_top">#2148</a>, Addition of coverage_tile constraint for raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2149" target="_top">#2149</a>, Addition of spatially_unique constraint for raster</p><p>TopologySummary output now includes unregistered layers and a count
             of missing TopoGeometry objects from their natural layer.</p><p>ST_HillShade(), ST_Aspect() and ST_Slope() have one new optional
             parameter to interpolate NODATA pixels before running the
             operation.</p><p>Point variant of ST_SetValue(raster) is now a wrapper around geomval
             variant of ST_SetValues(rast).</p><p>Proper support for raster band's isnodata flag in core API and loader.</p><p>Additional default values for parameters of ST_Aspect and ST_HillShade</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2178" target="_top">#2178</a>, ST_Summary now advertises presence of known srid with an [S] flag</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2202" target="_top">#2202</a>, Make libjson-c optional (--without-json configure switch)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2213" target="_top">#2213</a>, Add support libjson-c 0.10+</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2231" target="_top">#2231</a>, raster2pgsql supports user naming of filename column with -n</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2200" target="_top">#2200</a>, ST_Union(raster, uniontype) unions all bands of all rasters</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2264" target="_top">#2264</a>, postgis_restore.pl support for restoring into databases
             with postgis in a custom schema</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2244" target="_top">#2244</a>, emit warning when changing raster's georeference if raster has
             out-db bands</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2222" target="_top">#2222</a>, add parameter OutAsIn to flag whether ST_AsBinary should
             return out-db bands as in-db bands</p></div><div class="simplesect" title="Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108944848"></a>Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1839" target="_top">#1839</a>, handling of subdatasets in GeoTIFF in raster2pgsql.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1840" target="_top">#1840</a>, fix logic of when to compute # of tiles in raster2pgsql.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1870" target="_top">#1870</a>, align the docs and actual behavior of raster's ST_Intersects</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1872" target="_top">#1872</a>, fix ST_ApproxSummarystats to prevent division by zero</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1875" target="_top">#1875</a>, ST_SummaryStats returns NULL for all parameters except count
             when count is zero</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1932" target="_top">#1932</a>, fix raster2pgsql of syntax for index tablespaces</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1936" target="_top">#1936</a>, ST_GeomFromGML on CurvePolygon causes server crash</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1939" target="_top">#1939</a>, remove custom data types: summarystats, histogram, quantile,
             valuecount</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1951" target="_top">#1951</a>, remove crash on zero-length linestrings</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1957" target="_top">#1957</a>, ST_Distance to a one-point LineString returns NULL</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1976" target="_top">#1976</a>, Geography point-in-ring code overhauled for more reliability</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1981" target="_top">#1981</a>, cleanup of unused variables causing warnings with gcc 4.6+</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1996" target="_top">#1996</a>, support POINT EMPTY in GeoJSON output</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2062" target="_top">#2062</a>, improve performance of distance calculations</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2057" target="_top">#2057</a>, Fixed linking issue for raster2psql to libpq</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2077" target="_top">#2077</a>, Fixed incorrect values returning from ST_Hillshade()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2019" target="_top">#2019</a>, ST_FlipCoordinates does not update bbox</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2100" target="_top">#2100</a>, ST_AsRaster may not return raster with specified pixel type</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2126" target="_top">#2126</a>, Better handling of empty rasters from ST_ConvexHull()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2165" target="_top">#2165</a>, ST_NumPoints regression failure with CircularString</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2168" target="_top">#2168</a>, ST_Distance is not always commutative</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2182" target="_top">#2182</a>, Fix issue with outdb rasters with no SRID and ST_Resize</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2188" target="_top">#2188</a>, Fix function parameter value overflow that caused problems
             when copying data from a GDAL dataset</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2198" target="_top">#2198</a>, Fix incorrect dimensions used when generating bands of out-db
             rasters in ST_Tile()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2201" target="_top">#2201</a>, ST_GeoHash wrong on boundaries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2203" target="_top">#2203</a>, Changed how rasters with unknown SRID and default geotransform
             are handled when passing to GDAL Warp API</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2215" target="_top">#2215</a>, Fixed raster exclusion constraint for conflicting name of
             implicit index</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2251" target="_top">#2251</a>, Fix bad dimensions when rescaling rasters with default
             geotransform matrix</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2133" target="_top">#2133</a>, Fix performance regression in expression variant of ST_MapAlgebra</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2257" target="_top">#2257</a>, GBOX variables not initialized when testing with empty geometries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2271" target="_top">#2271</a>, Prevent parallel make of raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2282" target="_top">#2282</a>, Fix call to undefined function nd_stats_to_grid() in debug mode</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2307" target="_top">#2307</a>, ST_MakeValid outputs invalid geometries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2309" target="_top">#2309</a>, Remove confusing INFO message when trying to get SRS info</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2336" target="_top">#2336</a>, FIPS 20 (KS) causes wildcard expansion to wget all files</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2348" target="_top">#2348</a>, Provide raster upgrade path for 2.0 to 2.1</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2351" target="_top">#2351</a>, st_distance between geographies wrong</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2359" target="_top">#2359</a>, Fix handling of schema name when adding overview constraints</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2371" target="_top">#2371</a>, Support GEOS versions with more than 1 digit in micro</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2383" target="_top">#2383</a>, Remove unsafe use of \' from raster warning message</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2384" target="_top">#2384</a>, Incorrect variable datatypes for ST_Neighborhood</p></div><div class="simplesect" title="Known Issues"><div class="titlepage"><div><div><h3 class="title"><a name="idp108989904"></a>Known Issues</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2111" target="_top">#2111</a>, Raster bands can only reference the first 256 bands of out-db rasters</p></div></div><div class="sect1" title="A.14. Release 2.0.5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp108991568"></a>A.14. Release 2.0.5</h2></div></div></div><p>Release date: 2014/03/31</p><p>This is a bug fix release, addressing issues that have been filed since the 2.0.4 release. If you are using PostGIS 2.0+ a soft upgrade is required.  For users of PostGIS 1.5 or below, a hard upgrade is required.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp108992976"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2494" target="_top">#2494</a>, avoid memcpy in GIST index</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2502" target="_top">#2502</a>, Fix postgis_topology_scripts_installed() install schema</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2504" target="_top">#2504</a>, Fix segfault on bogus pgsql2shp call </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2528" target="_top">#2528</a>, Fix memory leak in ST_Split / lwline_split_by_line</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2532" target="_top">#2532</a>, Add missing raster/geometry commutator operators</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2533" target="_top">#2533</a>, Remove duplicated signatures</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2552" target="_top">#2552</a>, Fix NULL raster handling in ST_AsPNG, ST_AsTIFF and ST_AsJPEG</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2555" target="_top">#2555</a>, Fix parsing issue of range arguments of ST_Reclass</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2589" target="_top">#2589</a>, Remove use of unnecessary void pointers</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2607" target="_top">#2607</a>, Cannot open more than 1024 out-db files in process</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2610" target="_top">#2610</a>, Ensure face splitting algorithm uses the edge index </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2619" target="_top">#2619</a>, Empty ring array in GeoJSON polygon causes crash</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2638" target="_top">#2638</a>, Geography distance on M geometries sometimes wrong</p></div><div class="simplesect" title="Important Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109003856"></a>Important Changes</h3></div></div></div><p>#<a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2514" target="_top">#2514</a>, Change raster license from GPL v3+ to v2+, allowing distribution of PostGIS Extension as GPLv2.</p></div></div><div class="sect1" title="A.15. Release 2.0.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109005648"></a>A.15. Release 2.0.4</h2></div></div></div><p>Release date: 2013/09/06</p><p>This is a bug fix release, addressing issues that have been filed since the 2.0.3 release. If you are using PostGIS 2.0+ a soft upgrade is required.  For users of PostGIS 1.5 or below, a hard upgrade is required.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109007056"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2110" target="_top">#2110</a>, Equality operator between EMPTY and point on origin</p><p>Allow adding points at precision distance with TopoGeo_addPoint</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1968" target="_top">#1968</a>, Fix missing edge from toTopoGeom return</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2165" target="_top">#2165</a>, ST_NumPoints regression failure with CircularString</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2168" target="_top">#2168</a>, ST_Distance is not always commutative</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2186" target="_top">#2186</a>, gui progress bar updates too frequent</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2201" target="_top">#2201</a>, ST_GeoHash wrong on boundaries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2257" target="_top">#2257</a>, GBOX variables not initialized when testing with empty geometries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2271" target="_top">#2271</a>, Prevent parallel make of raster</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2267" target="_top">#2267</a>, Server crash from analyze table</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2277" target="_top">#2277</a>, potential segfault removed</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2307" target="_top">#2307</a>, ST_MakeValid outputs invalid geometries</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2351" target="_top">#2351</a>, st_distance between geographies wrong</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2359" target="_top">#2359</a>, Incorrect handling of schema for overview constraints</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2371" target="_top">#2371</a>, Support GEOS versions with more than 1 digit in micro</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2372" target="_top">#2372</a>, Cannot parse space-padded KML coordinates</p><p>Fix build with systemwide liblwgeom installed</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2383" target="_top">#2383</a>, Fix unsafe use of \' in warning message</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2410" target="_top">#2410</a>, Fix segmentize of collinear curve</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2412" target="_top">#2412</a>, ST_LineToCurve support for lines with less than 4 vertices</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2415" target="_top">#2415</a>, ST_Multi support for COMPOUNDCURVE and CURVEPOLYGON</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2420" target="_top">#2420</a>, ST_LineToCurve: require at least 8 edges to define a full circle</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2423" target="_top">#2423</a>, ST_LineToCurve: require all arc edges to form the same angle</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2424" target="_top">#2424</a>, ST_CurveToLine: add support for COMPOUNDCURVE in MULTICURVE</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2427" target="_top">#2427</a>, Make sure to retain first point of curves on ST_CurveToLine</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109038928"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2269" target="_top">#2269</a>, Avoid uselessly detoasting full geometries on ANALYZE</p></div><div class="simplesect" title="Known Issues"><div class="titlepage"><div><div><h3 class="title"><a name="idp109040464"></a>Known Issues</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2111" target="_top">#2111</a>, Raster bands can only reference the first 256 bands of out-db rasters</p></div></div><div class="sect1" title="A.16. Release 2.0.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109042128"></a>A.16. Release 2.0.3</h2></div></div></div><p>Release date: 2013/03/01</p><p>This is a bug fix release, addressing issues that have been filed since the 2.0.2 release. If you are using PostGIS 2.0+ a soft upgrade is required.  For users of PostGIS 1.5 or below, a hard upgrade is required.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109043536"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2126" target="_top">#2126</a>, Better handling of empty rasters from ST_ConvexHull()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2134" target="_top">#2134</a>, Make sure to process SRS before passing it off to GDAL functions</p><p>Fix various memory leaks in liblwgeom</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2173" target="_top">#2173</a>, Fix robustness issue in splitting a line with own vertex also affecting topology building (<a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2172" target="_top">#2172</a>)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2174" target="_top">#2174</a>, Fix usage of wrong function lwpoly_free()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2176" target="_top">#2176</a>, Fix robustness issue with ST_ChangeEdgeGeom</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2184" target="_top">#2184</a>, Properly copy topologies with Z value </p><p>postgis_restore.pl support for mixed case geometry column name in dumps</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2188" target="_top">#2188</a>, Fix function parameter value overflow that caused problems when copying data from a GDAL dataset</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2216" target="_top">#2216</a>, More memory errors in MultiPolygon GeoJSON parsing (with holes)</p><p>Fix Memory leak in GeoJSON parser</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109052240"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2141" target="_top">#2141</a>, More verbose output when constraints fail to be added to a raster column</p><p>Speedup ST_ChangeEdgeGeom</p></div></div><div class="sect1" title="A.17. Release 2.0.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109054416"></a>A.17. Release 2.0.2</h2></div></div></div><p>Release date: 2012/12/03</p><p>This is a bug fix release, addressing issues that have been filed since the 2.0.1 release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109055824"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1287" target="_top">#1287</a>, Drop of "gist_geometry_ops" broke a few clients
     package of legacy_gist.sql for these cases</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1391" target="_top">#1391</a>, Errors during upgrade from 1.5</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1828" target="_top">#1828</a>, Poor selectivity estimate on ST_DWithin</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1838" target="_top">#1838</a>, error importing tiger/line data</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1869" target="_top">#1869</a>, ST_AsBinary is not unique added to legacy_minor/legacy.sql scripts</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1885" target="_top">#1885</a>, Missing field from tabblock table in tiger2010 census_loader.sql</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1891" target="_top">#1891</a>, Use LDFLAGS environment when building liblwgeom</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1900" target="_top">#1900</a>, Fix pgsql2shp for big-endian systems </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1932" target="_top">#1932</a>, Fix raster2pgsql for invalid syntax for setting index tablespace</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1936" target="_top">#1936</a>, ST_GeomFromGML on CurvePolygon causes server crash</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1955" target="_top">#1955</a>, ST_ModEdgeHeal and ST_NewEdgeHeal for doubly connected edges</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1957" target="_top">#1957</a>, ST_Distance to a one-point LineString returns NULL</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1976" target="_top">#1976</a>, Geography point-in-ring code overhauled for more reliability</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1978" target="_top">#1978</a>, wrong answer calculating length of closed circular arc (circle)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1981" target="_top">#1981</a>, Remove unused but set variables as found with gcc 4.6+</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1987" target="_top">#1987</a>, Restore 1.5.x behaviour of ST_Simplify</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1989" target="_top">#1989</a>, Preprocess input geometry to just intersection with raster
           to be clipped</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1991" target="_top">#1991</a>, geocode really slow on PostgreSQL 9.2</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1996" target="_top">#1996</a>, support POINT EMPTY in GeoJSON output</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1998" target="_top">#1998</a>, Fix ST_{Mod,New}EdgeHeal joining edges sharing both endpoints</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2001" target="_top">#2001</a>, ST_CurveToLine has no effect if the geometry doesn't actually contain an arc</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2015" target="_top">#2015</a>, ST_IsEmpty('POLYGON(EMPTY)') returns False</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2019" target="_top">#2019</a>, ST_FlipCoordinates does not update bbox</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2025" target="_top">#2025</a>, Fix side location conflict at TopoGeo_AddLineString</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2026" target="_top">#2026</a>, improve performance of distance calculations</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2033" target="_top">#2033</a>, Fix adding a splitting point into a 2.5d topology </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2051" target="_top">#2051</a>, Fix excess of precision in ST_AsGeoJSON output</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2052" target="_top">#2052</a>, Fix buffer overflow in lwgeom_to_geojson</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2056" target="_top">#2056</a>, Fixed lack of SRID check of raster and geometry in ST_SetValue()</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2057" target="_top">#2057</a>, Fixed linking issue for raster2psql to libpq</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2060" target="_top">#2060</a>, Fix "dimension" check violation by GetTopoGeomElementArray</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2072" target="_top">#2072</a>, Removed outdated checks preventing ST_Intersects(raster) from
           working on out-db bands</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2077" target="_top">#2077</a>, Fixed incorrect answers from ST_Hillshade(raster) </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2092" target="_top">#2092</a>, Namespace issue with ST_GeomFromKML,ST_GeomFromGML for libxml 2.8+</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2099" target="_top">#2099</a>, Fix double free on exception in ST_OffsetCurve</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2100" target="_top">#2100</a>, ST_AsRaster() may not return raster with specified pixel type</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2108" target="_top">#2108</a>, Ensure ST_Line_Interpolate_Point always returns POINT</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2109" target="_top">#2109</a>, Ensure ST_Centroid always returns POINT</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2117" target="_top">#2117</a>, Ensure ST_PointOnSurface always returns POINT</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2129" target="_top">#2129</a>, Fix SRID in ST_Homogenize output with collection input</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2130" target="_top">#2130</a>, Fix memory error in MultiPolygon GeoJson parsing</p><p>Update URL of Maven jar</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109101264"></a>Enhancements</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1581" target="_top">#1581</a>, ST_Clip(raster, ...) no longer imposes NODATA on a band if the
           corresponding band from the source raster did not have NODATA</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1928" target="_top">#1928</a>, Accept array properties in GML input multi-geom input
    (Kashif Rasul and Shoaib Burq / SpacialDB)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2082" target="_top">#2082</a>, Add indices on start_node and end_node of topology edge tables</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/2087" target="_top">#2087</a>, Speedup topology.GetRingEdges using a recursive CTE</p></div></div><div class="sect1" title="A.18. Release 2.0.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109105232"></a>A.18. Release 2.0.1</h2></div></div></div><p>Release date: 2012/06/22</p><p>This is a bug fix release, addressing issues that have been filed since the 2.0.0 release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109110864"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1264" target="_top">#1264</a>, fix st_dwithin(geog, geog, 0). </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1468" target="_top">#1468</a>  shp2pgsql-gui table column schema get shifted</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1694" target="_top">#1694</a>, fix building with clang. (vince)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1708" target="_top">#1708</a>, improve restore of pre-PostGIS 2.0 backups.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1714" target="_top">#1714</a>, more robust handling of high topology tolerance.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1755" target="_top">#1755</a>, ST_GeographyFromText support for higher dimensions.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1759" target="_top">#1759</a>, loading transformed shapefiles in raster enabled db.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1761" target="_top">#1761</a>, handling of subdatasets in NetCDF, HDF4 and HDF5 in raster2pgsql.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1763" target="_top">#1763</a>, topology.toTopoGeom use with custom search_path.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1766" target="_top">#1766</a>, don't let ST_RemEdge* destroy peripheral TopoGeometry objects.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1774" target="_top">#1774</a>, Clearer error on setting an edge geometry to an invalid one.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1775" target="_top">#1775</a>, ST_ChangeEdgeGeom collision detection with 2-vertex target.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1776" target="_top">#1776</a>, fix ST_SymDifference(empty, geom) to return geom.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1779" target="_top">#1779</a>, install SQL comment files.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1782" target="_top">#1782</a>, fix spatial reference string handling in raster.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1789" target="_top">#1789</a>, fix false edge-node crossing report in ValidateTopology.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1790" target="_top">#1790</a>, fix toTopoGeom handling of duplicated primitives.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1791" target="_top">#1791</a>, fix ST_Azimuth with very close but distinct points.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1797" target="_top">#1797</a>, fix (ValidateTopology(xxx)).* syntax calls.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1805" target="_top">#1805</a>, put back the 900913 SRID entry.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1813" target="_top">#1813</a>, Only show readable relations in metadata tables.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1819" target="_top">#1819</a>, fix floating point issues with ST_World2RasterCoord and
					   ST_Raster2WorldCoord variants.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1820" target="_top">#1820</a>  compilation on 9.2beta1.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1822" target="_top">#1822</a>, topology load on PostgreSQL 9.2beta1.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1825" target="_top">#1825</a>, fix prepared geometry cache lookup</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1829" target="_top">#1829</a>, fix uninitialized read in GeoJSON parser</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1834" target="_top">#1834</a>, revise postgis extension to only backup
					   user specified spatial_ref_sys</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1839" target="_top">#1839</a>, handling of subdatasets in GeoTIFF in raster2pgsql.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1840" target="_top">#1840</a>, fix logic of when to compute # of tiles in raster2pgsql.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1851" target="_top">#1851</a>, fix spatial_ref_system parameters for EPSG:3844</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1857" target="_top">#1857</a>, fix failure to detect endpoint mismatch in ST_AddEdge*Face*</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1865" target="_top">#1865</a>, data loss in postgis_restore.pl when data rows have leading
					   dashes.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1867" target="_top">#1867</a>, catch invalid topology name passed to topogeo_add*</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1872" target="_top">#1872</a>, fix ST_ApproxSummarystats to prevent division by zero</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1873" target="_top">#1873</a>, fix ptarray_locate_point to return interpolated Z/M values for
			              on-the-line case</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1875" target="_top">#1875</a>, ST_SummaryStats returns NULL for all parameters except count
			              when count is zero </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1881" target="_top">#1881</a>, shp2pgsql-gui -- editing a field sometimes triggers
						  removing row</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1883" target="_top">#1883</a>, Geocoder install fails trying to run
           create_census_base_tables() (Brian Panulla)</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109153488"></a>Enhancements</h3></div></div></div><p>More detailed exception message from topology editing functions.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1786" target="_top">#1786</a>, improved build dependencies</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1806" target="_top">#1806</a>, speedup of ST_BuildArea, ST_MakeValid and ST_GetFaceGeometry.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1812" target="_top">#1812</a>, Add lwgeom_normalize in LIBLWGEOM for more stable testing.</p></div></div><div class="sect1" title="A.19. Release 2.0.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109157200"></a>A.19. Release 2.0.0</h2></div></div></div><p>Release date: 2012/04/03</p><p>This is a major release.  A hard upgrade is required.  Yes this means a full dump reload and some special preparations if you are using obsolete functions. Refer
        to <a class="xref" href="#hard_upgrade" title="2.10.2. Hard upgrade">Section 2.10.2, “Hard upgrade”</a> for details on upgrading.
        Refer to <a class="xref" href="#NewFunctions_2_0" title="14.12.6. PostGIS Functions new, behavior changed, or enhanced in 2.0">Section 14.12.6, “PostGIS Functions new, behavior changed, or enhanced in 2.0”</a> for more details and changed/new functions.</p><div class="simplesect" title="Testers - Our unsung heroes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109159376"></a>Testers - Our unsung heroes</h3></div></div></div><p>We are most indebted to the numerous members in the PostGIS community
	who were brave enough to test out the new features in this release.
	No major release can be successful without these folk.</p><p>Below are those who have been most valiant, provided very detailed
			and thorough bug reports,
			and detailed analysis.</p><table border="0" summary="Simple list" class="simplelist"><tr><td>Andrea Peri - Lots of testing on topology, checking for correctness</td></tr><tr><td>Andreas Forø Tollefsen - raster testing</td></tr><tr><td>Chris English - topology stress testing loader functions</td></tr><tr><td>Salvatore Larosa - topology robustness testing</td></tr><tr><td>Brian Hamlin - Benchmarking
				(also experimental experimental branches
					before they are folded into core)
				, general testing of various pieces
			   including Tiger and Topology. Testing on various server VMs</td></tr><tr><td>Mike Pease -  Tiger geocoder testing - very detailed reports of issues</td></tr><tr><td>Tom van Tilburg - raster testing</td></tr></table></div><div class="simplesect" title="Important / Breaking Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109164368"></a>Important / Breaking Changes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/722" target="_top">#722</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/302" target="_top">#302</a>, Most deprecated functions removed (over 250 functions) (Regina Obe, Paul Ramsey)</p><p>Unknown SRID changed from -1 to 0. (Paul Ramsey)</p><p> -- (most deprecated in 1.2) removed non-ST variants buffer, length, intersects
	 (and internal functions renamed) etc. </p><p>-- If you have been using deprecated functions CHANGE your apps or suffer the consequences.
     If you don't see a function documented -- it ain't supported or it is an internal function.
     Some constraints in older tables were built with deprecated functions.
     If you restore you may need to rebuild table constraints with populate_geometry_columns().  If you have applications or tools
					that rely on deprecated functions, please refer to <a class="xref" href="#legacy_faq" title="3.2.">Q: 3.2</a> for more details.</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/944" target="_top">#944</a> geometry_columns is now a view instead of a table
    (Paul Ramsey, Regina Obe)
    for tables created the old way reads (srid, type, dims) constraints
    for geometry columns created with type modifiers
    reads rom column definition</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1081" target="_top">#1081</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1082" target="_top">#1082</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1084" target="_top">#1084</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1088" target="_top">#1088</a> - Mangement functions support typmod
    geometry column creation functions now default to typmod creation
    (Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1083" target="_top">#1083</a> probe_geometry_columns(), rename_geometry_table_constraints(),
        fix_geometry_columns(); removed
    - now obsolete with geometry_column view
    (Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/817" target="_top">#817</a> Renaming old 3D functions to the convention ST_3D (Nicklas Avén)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/548" target="_top">#548</a> (sorta), ST_NumGeometries,ST_GeometryN now returns 1 (or the geometry) instead of null
     for single geometries (Sandro Santilli, Maxime van Noppen)</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp109177808"></a>New Features</h3></div></div></div><p><a class="ulink" href="http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/" target="_top">KNN Gist index based centroid (&lt;-&gt;) and box (&lt;#&gt;) distance operators (Paul Ramsey / funded by Vizzuality)</a></p><p>Support for TIN and PolyHedralSurface and enhancement of many functions to support 3D (Olivier Courtin / Oslandia)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/wiki/WKTRaster/PlanningAndFunding" target="_top">Raster support integrated and documented</a>
		(Pierre Racine, Jorge Arévalo, Mateusz Loskot, Sandro Santilli, David Zwarg, Regina Obe, Bborie Park)
		(Company developer and funding: University Laval, Deimos Space, CadCorp,  Michigan Tech Research Institute, Azavea, Paragon Corporation, UC Davis Center for Vectorborne Diseases)</p><p>Making spatial indexes 3D aware - in progress (Paul Ramsey, Mark Cave-Ayland)</p><p>Topology support improved (more functions), documented, testing (Sandro Santilli / Faunalia for RT-SIGTA), Andrea Peri, Regina Obe, Jose Carlos Martinez Llari</p><p>3D relationship and measurement support functions  (Nicklas Avén)</p><p>   ST_3DDistance, ST_3DClosestPoint, ST_3DIntersects, ST_3DShortestLine and more...</p><p>N-Dimensional spatial indexes (Paul Ramsey / OpenGeo)</p><p>ST_Split (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_IsValidDetail (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_MakeValid (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_RemoveRepeatedPoints (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_GeometryN and ST_NumGeometries support for non-collections (Sandro Santilli)</p><p>ST_IsCollection (Sandro Santilli, Maxime van Noppen)</p><p>ST_SharedPaths (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_Snap (Sandro Santilli)</p><p>ST_RelateMatch (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_ConcaveHull (Regina Obe and Leo Hsu / Paragon Corporation)</p><p>ST_UnaryUnion (Sandro Santilli / Faunalia for RT-SIGTA)</p><p>ST_AsX3D (Regina Obe / Arrival 3D funding)</p><p>ST_OffsetCurve (Sandro Santilli, Rafal Magda)</p><p><a class="ulink" href="http://blog.opengeo.org/2011/11/21/st_geomfromgeojson/" target="_top">ST_GeomFromGeoJSON (Kashif Rasul, Paul Ramsey / Vizzuality funding)</a></p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109188176"></a>Enhancements</h3></div></div></div><p>Made shape file loader tolerant of truncated multibyte values found in some free worldwide shapefiles (Sandro Santilli)</p><p>Lots of bug fixes and enhancements to shp2pgsql
	       Beefing up regression tests for loaders
	       Reproject support for both geometry and geography during import
	       (Jeff Adams / Azavea, Mark Cave-Ayland)</p><p>pgsql2shp conversion from predefined list
	       (Loic Dachary / Mark Cave-Ayland)</p><p>Shp-pgsql GUI loader - support loading multiple files at a time.  (Mark Leslie)</p><p>Extras - upgraded tiger_geocoder from using old TIGER format to use new TIGER shp and file structure format (Stephen Frost)</p><p>Extras - revised tiger_geocoder to work with TIGER census 2010 data, addition of reverse geocoder function, various bug fixes, accuracy enhancements,
	     limit max result return, speed improvements, loading routines.
	   (Regina Obe, Leo Hsu / Paragon Corporation / funding provided by Hunter Systems Group)</p><p>Overall Documentation proofreading and corrections. (Kasif Rasul)</p><p>Cleanup PostGIS JDBC classes, revise to use Maven build. (Maria Arias de Reyna, Sandro Santilli)</p></div><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109192400"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1335" target="_top">#1335</a> ST_AddPoint returns incorrect result on Linux (Even Rouault)</p></div><div class="simplesect" title="Release specific credits"><div class="titlepage"><div><div><h3 class="title"><a name="idp109193936"></a>Release specific credits</h3></div></div></div><p>We thank <a class="ulink" href="http://blog.opengeo.org/2012/02/01/it-goes-up-to-2-0/" target="_top">U.S Department of State Human Information Unit (HIU)</a> and <a class="ulink" href="http://blog.cartodb.com/post/17318840209/postgis-core-committer-sandro-santilli-joins-cartodb" target="_top">Vizzuality</a> for general monetary support to get PostGIS 2.0 out the door.</p></div></div><div class="sect1" title="A.20. Release 1.5.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109196496"></a>A.20. Release 1.5.4</h2></div></div></div><p>Release date: 2012/05/07</p><p>This is a bug fix release, addressing issues that have been filed since the 1.5.3 release.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109197904"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/547" target="_top">#547</a>, ST_Contains memory problems (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/621" target="_top">#621</a>, Problem finding intersections with geography (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/627" target="_top">#627</a>, PostGIS/PostgreSQL process die on invalid geometry (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/810" target="_top">#810</a>, Increase accuracy of area calculation (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/852" target="_top">#852</a>, improve spatial predicates robustness (Sandro Santilli, Nicklas Avén)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/877" target="_top">#877</a>, ST_Estimated_Extent returns NULL on empty tables (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1028" target="_top">#1028</a>, ST_AsSVG kills whole postgres server when fails (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1056" target="_top">#1056</a>, Fix boxes of arcs and circle stroking code (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1121" target="_top">#1121</a>, populate_geometry_columns using deprecated functions (Regin Obe, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1135" target="_top">#1135</a>, improve testsuite predictability (Andreas 'ads' Scherbaum)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1146" target="_top">#1146</a>, images generator crashes (bronaugh)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1170" target="_top">#1170</a>, North Pole intersection fails (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1179" target="_top">#1179</a>, ST_AsText crash with bad value (kjurka)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1184" target="_top">#1184</a>, honour DESTDIR in documentation Makefile (Bryce L Nordgren)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1227" target="_top">#1227</a>, server crash on invalid GML </p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1252" target="_top">#1252</a>, SRID appearing in WKT (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1264" target="_top">#1264</a>, st_dwithin(g, g, 0) doesn't work (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1344" target="_top">#1344</a>, allow exporting tables with invalid geometries (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1389" target="_top">#1389</a>, wrong proj4text for SRID 31300 and 31370 (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1406" target="_top">#1406</a>, shp2pgsql crashes when loading into geography (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1595" target="_top">#1595</a>, fixed SRID redundancy in ST_Line_SubString (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1596" target="_top">#1596</a>, check SRID in UpdateGeometrySRID (Mike Toews, Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1602" target="_top">#1602</a>, fix ST_Polygonize to retain Z (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1697" target="_top">#1697</a>, fix crash with EMPTY entries in GiST index (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1772" target="_top">#1772</a>, fix ST_Line_Locate_Point with collapsed input (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1799" target="_top">#1799</a>, Protect ST_Segmentize from max_length=0  (Sandro Santilli)</p><p>Alter parameter order in 900913 (Paul Ramsey)</p><p>Support builds with "gmake" (Greg Troxel)</p></div></div><div class="sect1" title="A.21. Release 1.5.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109224016"></a>A.21. Release 1.5.3</h2></div></div></div><p>Release date: 2011/06/25</p><p>This is a bug fix release, addressing issues that have been filed since the 1.5.2 release. If you are running PostGIS 1.3+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109225424"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1056" target="_top">#1056</a>, produce correct bboxes for arc geometries, fixes index errors
                    (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/1007" target="_top">#1007</a>, ST_IsValid crash fix requires GEOS 3.3.0+ or 3.2.3+
				 (Sandro Santilli, reported by Birgit Laggner)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/940" target="_top">#940</a>, support for PostgreSQL 9.1 beta 1
				 (Regina Obe, Paul Ramsey, patch submitted by stl)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/845" target="_top">#845</a>, ST_Intersects precision error (Sandro Santilli, Nicklas Avén)
				 Reported by cdestigter</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/884" target="_top">#884</a>, Unstable results with ST_Within, ST_Intersects (Chris Hodgson)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/779" target="_top">#779</a>, shp2pgsql -S option seems to fail on points (Jeff Adams)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/666" target="_top">#666</a>, ST_DumpPoints is not null safe (Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/631" target="_top">#631</a>, Update NZ projections for grid transformation support (jpalmer)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/630" target="_top">#630</a>, Peculiar Null treatment in arrays in ST_Collect (Chris Hodgson)
				 Reported by David Bitner</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/624" target="_top">#624</a>, Memory leak in ST_GeogFromText (ryang, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/609" target="_top">#609</a>, Bad source code in manual section 5.2 Java Clients (simoc, Regina Obe)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/604" target="_top">#604</a>, shp2pgsql usage touchups (Mike Toews, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/573" target="_top">#573</a> ST_Union fails on a group of linestrings
				 Not a PostGIS bug, fixed in GEOS 3.3.0</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/457" target="_top">#457</a> ST_CollectionExtract returns non-requested type
				(Nicklas Avén, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/441" target="_top">#441</a> ST_AsGeoJson Bbox on GeometryCollection error (Olivier Courtin)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/411" target="_top">#411</a> Ability to backup invalid geometries (Sando Santilli)
				 Reported by Regione Toscana</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/409" target="_top">#409</a> ST_AsSVG - degraded (Olivier Courtin)
				 Reported by Sdikiy</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/373" target="_top">#373</a> Documentation syntax error in hard upgrade (Paul Ramsey)
				 Reported by psvensso</p></div></div><div class="sect1" title="A.22. Release 1.5.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109248592"></a>A.22. Release 1.5.2</h2></div></div></div><p>Release date: 2010/09/27</p><p>This is a bug fix release, addressing issues that have been filed since the 1.5.1 release. If you are running PostGIS 1.3+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109250000"></a>Bug Fixes</h3></div></div></div><p>Loader: fix handling of empty (0-verticed) geometries in shapefiles. (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/536" target="_top">#536</a>, Geography ST_Intersects, ST_Covers, ST_CoveredBy and Geometry ST_Equals not using spatial index (Regina Obe, Nicklas Aven)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/573" target="_top">#573</a>, Improvement to ST_Contains geography (Paul Ramsey)</p><p>Loader: Add support for command-q shutdown in Mac GTK build (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/393" target="_top">#393</a>, Loader: Add temporary patch for large DBF files (Maxime Guillaud, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/507" target="_top">#507</a>, Fix wrong OGC URN in GeoJSON and GML output (Olivier Courtin)</p><p>spatial_ref_sys.sql Add datum conversion for projection SRID 3021 (Paul Ramsey)</p><p>Geography - remove crash for case when all geographies are out of the estimate (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/469" target="_top">#469</a>, Fix for array_aggregation error (Greg Stark, Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/532" target="_top">#532</a>, Temporary geography tables showing up in other user sessions (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/562" target="_top">#562</a>, ST_Dwithin errors for large geographies (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/513" target="_top">#513</a>, shape loading GUI tries to make spatial index when loading DBF only mode (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/527" target="_top">#527</a>, shape loading GUI should always append log messages (Mark Cave-Ayland)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/504" target="_top">#504</a>, shp2pgsql should rename xmin/xmax fields (Sandro Santilli)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/458" target="_top">#458</a>, postgis_comments being installed in contrib instead of version folder (Mark Cave-Ayland)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/474" target="_top">#474</a>, Analyzing a table with geography column crashes server (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/581" target="_top">#581</a>, LWGEOM-expand produces inconsistent results (Mark Cave-Ayland)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/513" target="_top">#513</a>, Add dbf filter to shp2pgsql-gui and allow uploading dbf only (Paul Ramsey)</p><p>Fix further build issues against PostgreSQL 9.0 (Mark Cave-Ayland)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/572" target="_top">#572</a>, Password whitespace for Shape File (Mark Cave-Ayland)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/603" target="_top">#603</a>, shp2pgsql: "-w" produces invalid WKT for MULTI* objects. (Mark Cave-Ayland)</p></div></div><div class="sect1" title="A.23. Release 1.5.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109265488"></a>A.23. Release 1.5.1</h2></div></div></div><p>Release date: 2010/03/11</p><p>This is a bug fix release, addressing issues that have been filed since the 1.4.1 release. If you are running PostGIS 1.3+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended.</p><div class="simplesect" title="Bug Fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109266896"></a>Bug Fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/410" target="_top">#410</a>, update embedded bbox when applying ST_SetPoint, ST_AddPoint ST_RemovePoint to a linestring (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/411" target="_top">#411</a>, allow dumping tables with invalid geometries (Sandro Santilli, for Regione Toscana-SIGTA)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/414" target="_top">#414</a>, include geography_columns view when running upgrade scripts (Paul Ramsey)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/419" target="_top">#419</a>, allow support for multilinestring in ST_Line_Substring (Paul Ramsey, for Lidwala Consulting Engineers)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/421" target="_top">#421</a>, fix computed string length in ST_AsGML() (Olivier Courtin)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/441" target="_top">#441</a>, fix GML generation with heterogeneous collections (Olivier Courtin)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/443" target="_top">#443</a>, incorrect coordinate reversal in GML 3 generation (Olivier Courtin)</p><p><a class="ulink" href="http://trac.osgeo.org/postgis/ticket/450" target="_top">#450</a>, <a class="ulink" href="http://trac.osgeo.org/postgis/ticket/451" target="_top">#451</a>, wrong area calculation for geography features that  cross the date line (Paul Ramsey)</p><p>Ensure support for upcoming 9.0 PgSQL release (Paul Ramsey)</p></div></div><div class="sect1" title="A.24. Release 1.5.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109279056"></a>A.24. Release 1.5.0</h2></div></div></div><p>Release date: 2010/02/04</p><p>This release provides support for geographic coordinates (lat/lon) via a new GEOGRAPHY type. Also performance enhancements, new input format support (GML,KML) and general upkeep.</p><div class="simplesect" title="API Stability"><div class="titlepage"><div><div><h3 class="title"><a name="idp109280464"></a>API Stability</h3></div></div></div><p>The public API of PostGIS will not change during minor (0.0.X) releases.</p><p>The definition of the =~ operator has changed from an exact geometric equality check to a bounding box equality check.</p></div><div class="simplesect" title="Compatibility"><div class="titlepage"><div><div><h3 class="title"><a name="idp109282256"></a>Compatibility</h3></div></div></div><p>GEOS, Proj4, and LibXML2 are now mandatory dependencies</p><p>The library versions below are the minimum requirements for PostGIS 1.5</p><p>PostgreSQL 8.3 and higher on all platforms</p><p>GEOS 3.1 and higher only (GEOS 3.2+ to take advantage of all features)</p><p>LibXML2 2.5+ related to new ST_GeomFromGML/KML functionality</p><p>Proj4 4.5 and higher only</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp109285328"></a>New Features</h3></div></div></div><p><a class="xref" href="#NewFunctions_1_5" title="14.12.8. PostGIS Functions new, behavior changed, or enhanced in 1.5">Section 14.12.8, “PostGIS Functions new, behavior changed, or enhanced in 1.5”</a></p><p>Added Hausdorff distance calculations (<a class="ulink" href="http://trac.osgeo.org/postgis/ticket/209" target="_top">#209</a>) (Vincent Picavet)</p><p>Added parameters argument to ST_Buffer operation to support one-sided buffering and other buffering styles (Sandro Santilli)</p><p>Addition of other Distance related visualization and analysis functions (Nicklas Aven)</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>ST_ClosestPoint</p></li><li class="listitem"><p>ST_DFullyWithin</p></li><li class="listitem"><p>ST_LongestLine</p></li><li class="listitem"><p>ST_MaxDistance</p></li><li class="listitem"><p>ST_ShortestLine</p></li></ul></div><p>ST_DumpPoints (Maxime van Noppen)</p><p>KML, GML input via ST_GeomFromGML and ST_GeomFromKML (Olivier Courtin)</p><p>Extract homogeneous collection with ST_CollectionExtract (Paul Ramsey)</p><p>Add measure values to an existing linestring with ST_AddMeasure (Paul Ramsey)</p><p>History table implementation in utils (George Silva)</p><p>Geography type and supporting functions</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Spherical algorithms (Dave Skea)</p></li><li class="listitem"><p>Object/index implementation (Paul Ramsey)</p></li><li class="listitem"><p>Selectivity implementation (Mark Cave-Ayland)</p></li><li class="listitem"><p>Serializations to KML, GML and JSON (Olivier Courtin)</p></li><li class="listitem"><p>ST_Area, ST_Distance, ST_DWithin, ST_GeogFromText, ST_GeogFromWKB, ST_Intersects, ST_Covers, ST_Buffer (Paul Ramsey)</p></li></ul></div></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109296848"></a>Enhancements</h3></div></div></div><p>Performance improvements to ST_Distance (Nicklas Aven)</p><p>Documentation updates and improvements (Regina Obe, Kevin Neufeld)</p><p>Testing and quality control (Regina Obe)</p><p>PostGIS 1.5 support PostgreSQL 8.5 trunk (Guillaume Lelarge)</p><p>Win32 support and improvement of core shp2pgsql-gui (Mark Cave-Ayland)</p><p>In place 'make check' support (Paul Ramsey)</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109300048"></a>Bug fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/query?status=closed&amp;milestone=PostGIS+1.5.0&amp;order=priority" target="_top">http://trac.osgeo.org/postgis/query?status=closed&amp;milestone=PostGIS+1.5.0&amp;order=priority</a></p></div></div><div class="sect1" title="A.25. Release 1.4.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109301584"></a>A.25. Release 1.4.0</h2></div></div></div><p>Release date: 2009/07/24</p><p>This release provides performance enhancements, improved internal structures and testing, new features, and upgraded documentation.
        If you are running PostGIS 1.1+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended.</p><div class="simplesect" title="API Stability"><div class="titlepage"><div><div><h3 class="title"><a name="idp109302992"></a>API Stability</h3></div></div></div><p>As of the 1.4 release series, the public API of PostGIS will not change during minor releases.</p></div><div class="simplesect" title="Compatibility"><div class="titlepage"><div><div><h3 class="title"><a name="idp109304144"></a>Compatibility</h3></div></div></div><p>The versions below are the *minimum* requirements for PostGIS 1.4</p><p>PostgreSQL 8.2 and higher on all platforms</p><p>GEOS 3.0 and higher only</p><p>PROJ4 4.5 and higher only</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp109310672"></a>New Features</h3></div></div></div><p>ST_Union() uses high-speed cascaded union when compiled against
         GEOS 3.1+ (Paul Ramsey)</p><p>ST_ContainsProperly() requires GEOS 3.1+</p><p>ST_Intersects(), ST_Contains(), ST_Within() use high-speed cached prepared geometry against GEOS 3.1+ (Paul Ramsey / funded by Zonar Systems)</p><p>Vastly improved documentation and reference manual (Regina Obe &amp; Kevin Neufeld)</p><p>Figures and diagram examples in the reference manual (Kevin Neufeld)</p><p>ST_IsValidReason() returns readable explanations for validity failures (Paul Ramsey)</p><p>ST_GeoHash() returns a geohash.org signature for geometries (Paul Ramsey)</p><p>GTK+ multi-platform GUI for shape file loading (Paul Ramsey)</p><p>ST_LineCrossingDirection() returns crossing directions (Paul Ramsey)</p><p>ST_LocateBetweenElevations() returns sub-string based on Z-ordinate. (Paul Ramsey)</p><p>Geometry parser returns explicit error message about location of syntax errors (Mark Cave-Ayland)</p><p>ST_AsGeoJSON() return JSON formatted geometry (Olivier Courtin)</p><p>Populate_Geometry_Columns() -- automatically add records to geometry_columns for TABLES and VIEWS (Kevin Neufeld)</p><p>ST_MinimumBoundingCircle() -- returns the smallest circle polygon that can encompass a geometry (Bruce Rindahl)</p></div><div class="simplesect" title="Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109316944"></a>Enhancements</h3></div></div></div><p>Core geometry system moved into independent library, liblwgeom. (Mark Cave-Ayland)</p><p>New build system uses PostgreSQL "pgxs" build bootstrapper. (Mark Cave-Ayland)</p><p>Debugging framework formalized and simplified. (Mark Cave-Ayland)</p><p>All build-time #defines generated at configure time and placed in headers for easier cross-platform support (Mark Cave-Ayland)</p><p>Logging framework formalized and simplified (Mark Cave-Ayland)</p><p>Expanded and more stable support for CIRCULARSTRING, COMPOUNDCURVE and CURVEPOLYGON, better parsing, wider support in functions (Mark Leslie &amp; Mark Cave-Ayland)</p><p>Improved support for OpenSolaris builds (Paul Ramsey)</p><p>Improved support for MSVC builds (Mateusz Loskot)</p><p>Updated KML support (Olivier Courtin)</p><p>Unit testing framework for liblwgeom (Paul Ramsey)</p><p>New testing framework to comprehensively exercise every PostGIS function (Regine Obe)</p><p>Performance improvements to all geometry aggregate functions (Paul Ramsey)</p><p>Support for the upcoming PostgreSQL 8.4 (Mark Cave-Ayland, Talha Bin Rizwan)</p><p>Shp2pgsql and pgsql2shp re-worked to depend on the common parsing/unparsing code in liblwgeom (Mark Cave-Ayland)</p><p>Use of PDF DbLatex to build PDF docs and preliminary instructions for build (Jean David Techer)</p><p>Automated User documentation build (PDF and HTML) and Developer Doxygen Documentation (Kevin Neufeld)</p><p>Automated build of document images using ImageMagick from WKT geometry text files (Kevin Neufeld)</p><p>More attractive CSS for HTML documentation (Dane Springmeyer)</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109325008"></a>Bug fixes</h3></div></div></div><p><a class="ulink" href="http://trac.osgeo.org/postgis/query?status=closed&amp;milestone=PostGIS+1.4.0&amp;order=priority" target="_top">http://trac.osgeo.org/postgis/query?status=closed&amp;milestone=PostGIS+1.4.0&amp;order=priority</a></p></div></div><div class="sect1" title="A.26. Release 1.3.6"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109326544"></a>A.26. Release 1.3.6</h2></div></div></div><p>Release date: 2009/05/04</p><p>If you are running PostGIS 1.1+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended. This release adds support for PostgreSQL 8.4, exporting
        prj files from the database with shape data, some crash fixes for shp2pgsql, and several small
        bug fixes in the handling of "curve" types, logical error importing dbf only files, improved error handling of AddGeometryColumns.</p></div><div class="sect1" title="A.27. Release 1.3.5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109328208"></a>A.27. Release 1.3.5</h2></div></div></div><p>Release date: 2008/12/15</p><p>If you are running PostGIS 1.1+, a soft upgrade is sufficient
	otherwise a hard upgrade is recommended. This release is a bug fix release to address a failure
        in ST_Force_Collection and related functions that critically
        affects using MapServer with LINE layers.</p></div><div class="sect1" title="A.28. Release 1.3.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109329744"></a>A.28. Release 1.3.4</h2></div></div></div><p>Release date: 2008/11/24</p><p>This release adds support for GeoJSON output, building
      with PostgreSQL 8.4, improves documentation quality and
      output aesthetics, adds function-level SQL documentation,
      and improves performance for some spatial predicates
      (point-in-polygon tests).</p><p>Bug fixes include removal of crashers in handling
      circular strings for many functions, some memory leaks
      removed, a linear referencing failure for measures on vertices,
      and more. See the NEWS file for details.</p></div><div class="sect1" title="A.29. Release 1.3.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109331664"></a>A.29. Release 1.3.3</h2></div></div></div><p>Release date: 2008/04/12</p><p>This release fixes bugs shp2pgsql, adds enhancements to SVG and
      KML support, adds a ST_SimplifyPreserveTopology function, makes the
      build more sensitive to GEOS versions, and fixes a handful of severe but
      rare failure cases.</p></div><div class="sect1" title="A.30. Release 1.3.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109333200"></a>A.30. Release 1.3.2</h2></div></div></div><p>Release date: 2007/12/01</p><p>This release fixes bugs in ST_EndPoint() and ST_Envelope, improves
      support for JDBC building and OS/X, and adds better support for GML
      output with ST_AsGML(), including GML3 output.</p></div><div class="sect1" title="A.31. Release 1.3.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109334736"></a>A.31. Release 1.3.1</h2></div></div></div><p>Release date: 2007/08/13</p><p>This release fixes some oversights in the previous release around
      version numbering, documentation, and tagging.</p></div><div class="sect1" title="A.32. Release 1.3.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109336528"></a>A.32. Release 1.3.0</h2></div></div></div><p>Release date: 2007/08/09</p><p>This release provides performance enhancements to the relational
      functions, adds new relational functions and begins the migration of our
      function names to the SQL-MM convention, using the spatial type (SP)
      prefix.</p><div class="simplesect" title="Added Functionality"><div class="titlepage"><div><div><h3 class="title"><a name="idp109337936"></a>Added Functionality</h3></div></div></div><p>JDBC: Added Hibernate Dialect (thanks to Norman Barker)</p><p>Added ST_Covers and ST_CoveredBy relational functions.
        Description and justification of these functions can be found at
        <a class="ulink" href="http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html" target="_top">http://lin-ear-th-inking.blogspot.com/2007/06/subtleties-of-ogc-covers-spatial.html</a></p><p>Added ST_DWithin relational function.</p></div><div class="simplesect" title="Performance Enhancements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109340240"></a>Performance Enhancements</h3></div></div></div><p>Added cached and indexed point-in-polygon short-circuits for the
        functions ST_Contains, ST_Intersects, ST_Within and ST_Disjoint</p><p>Added inline index support for relational functions (except
        ST_Disjoint)</p></div><div class="simplesect" title="Other Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109341776"></a>Other Changes</h3></div></div></div><p>Extended curved geometry support into the geometry accessor and
        some processing functions</p><p>Began migration of functions to the SQL-MM naming convention;
        using a spatial type (ST) prefix.</p><p>Added initial support for PostgreSQL 8.3</p></div></div><div class="sect1" title="A.33. Release 1.2.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109343952"></a>A.33. Release 1.2.1</h2></div></div></div><p>Release date: 2007/01/11</p><p>This release provides bug fixes in PostgreSQL 8.2 support and some
      small performance enhancements.</p><div class="simplesect" title="Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109345360"></a>Changes</h3></div></div></div><p>Fixed point-in-polygon shortcut bug in Within().</p><p>Fixed PostgreSQL 8.2 NULL handling for indexes.</p><p>Updated RPM spec files.</p><p>Added short-circuit for Transform() in no-op case.</p><p>JDBC: Fixed JTS handling for multi-dimensional geometries
        (thanks to Thomas Marti for hint and partial patch). Additionally, now
        JavaDoc is compiled and packaged. Fixed classpath problems with GCJ.
        Fixed pgjdbc 8.2 compatibility, losing support for jdk 1.3 and
        older.</p></div></div><div class="sect1" title="A.34. Release 1.2.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109348176"></a>A.34. Release 1.2.0</h2></div></div></div><p>Release date: 2006/12/08</p><p>This release provides type definitions along with
      serialization/deserialization capabilities for SQL-MM defined curved
      geometries, as well as performance enhancements.</p><div class="simplesect" title="Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109349584"></a>Changes</h3></div></div></div><p>Added curved geometry type support for
        serialization/deserialization</p><p>Added point-in-polygon shortcircuit to the Contains and Within
        functions to improve performance for these cases.</p></div></div><div class="sect1" title="A.35. Release 1.1.6"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109351504"></a>A.35. Release 1.1.6</h2></div></div></div><p>Release date: 2006/11/02</p><p>This is a bugfix release, in particular fixing a critical error
      with GEOS interface in 64bit systems. Includes an updated of the SRS
      parameters and an improvement in reprojections (take Z in
      consideration). Upgrade is <span class="emphasis"><em>encouraged</em></span>.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109353296"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109357136"></a>Bug fixes</h3></div></div></div><p>fixed CAPI change that broke 64-bit platforms</p><p>loader/dumper: fixed regression tests and usage output</p><p>Fixed setSRID() bug in JDBC, thanks to Thomas Marti</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109359056"></a>Other changes</h3></div></div></div><p>use Z ordinate in reprojections</p><p>spatial_ref_sys.sql updated to EPSG 6.11.1</p><p>Simplified Version.config infrastructure to use a single pack of
        version variables for everything.</p><p>Include the Version.config in loader/dumper USAGE
        messages</p><p>Replace hand-made, fragile JDBC version parser with
        Properties</p></div></div><div class="sect1" title="A.36. Release 1.1.5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109362000"></a>A.36. Release 1.1.5</h2></div></div></div><p>Release date: 2006/10/13</p><p>This is an bugfix release, including a critical segfault on win32.
      Upgrade is <span class="emphasis"><em>encouraged</em></span>.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109363792"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109367632"></a>Bug fixes</h3></div></div></div><p>Fixed MingW link error that was causing pgsql2shp to segfault on
        Win32 when compiled for PostgreSQL 8.2</p><p>fixed nullpointer Exception in Geometry.equals() method in
        Java</p><p>Added EJB3Spatial.odt to fulfill the GPL requirement of
        distributing the "preferred form of modification"</p><p>Removed obsolete synchronization from JDBC Jts code.</p><p>Updated heavily outdated README files for shp2pgsql/pgsql2shp by
        merging them with the manpages.</p><p>Fixed version tag in jdbc code that still said "1.1.3" in the
        "1.1.4" release.</p></div><div class="simplesect" title="New Features"><div class="titlepage"><div><div><h3 class="title"><a name="idp109370960"></a>New Features</h3></div></div></div><p>Added -S option for non-multi geometries to shp2pgsql</p></div></div><div class="sect1" title="A.37. Release 1.1.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109372240"></a>A.37. Release 1.1.4</h2></div></div></div><p>Release date: 2006/09/27</p><p>This is an bugfix release including some improvements in the Java
      interface. Upgrade is <span class="emphasis"><em>encouraged</em></span>.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109374032"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109378000"></a>Bug fixes</h3></div></div></div><p>Fixed support for PostgreSQL 8.2</p><p>Fixed bug in collect() function discarding SRID of input</p><p>Added SRID match check in MakeBox2d and MakeBox3d</p><p>Fixed regress tests to pass with GEOS-3.0.0</p><p>Improved pgsql2shp run concurrency.</p></div><div class="simplesect" title="Java changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109380688"></a>Java changes</h3></div></div></div><p>reworked JTS support to reflect new upstream JTS developers'
        attitude to SRID handling. Simplifies code and drops build depend on
        GNU trove.</p><p>Added EJB2 support generously donated by the "Geodetix s.r.l. Company" </p><p>Added EJB3 tutorial / examples donated by Norman Barker
        &lt;nbarker@ittvis.com&gt;</p><p>Reorganized java directory layout a little.</p></div></div><div class="sect1" title="A.38. Release 1.1.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109383120"></a>A.38. Release 1.1.3</h2></div></div></div><p>Release date: 2006/06/30</p><p>This is an bugfix release including also some new functionalities
      (most notably long transaction support) and portability enhancements.
      Upgrade is <span class="emphasis"><em>encouraged</em></span>.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109385040"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes / correctness"><div class="titlepage"><div><div><h3 class="title"><a name="idp109388880"></a>Bug fixes / correctness</h3></div></div></div><p>BUGFIX in distance(poly,poly) giving wrong results.</p><p>BUGFIX in pgsql2shp successful return code.</p><p>BUGFIX in shp2pgsql handling of MultiLine WKT.</p><p>BUGFIX in affine() failing to update bounding box.</p><p>WKT parser: forbidden construction of multigeometries with EMPTY
        elements (still supported for GEOMETRYCOLLECTION).</p></div><div class="simplesect" title="New functionalities"><div class="titlepage"><div><div><h3 class="title"><a name="idp109391696"></a>New functionalities</h3></div></div></div><p>NEW Long Transactions support.</p><p>NEW DumpRings() function.</p><p>NEW AsHEXEWKB(geom, XDR|NDR) function.</p></div><div class="simplesect" title="JDBC changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109393744"></a>JDBC changes</h3></div></div></div><p>Improved regression tests: MultiPoint and scientific
        ordinates</p><p>Fixed some minor bugs in jdbc code</p><p>Added proper accessor functions for all fields in preparation of
        making those fields private later</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109395664"></a>Other changes</h3></div></div></div><p>NEW regress test support for loader/dumper.</p><p>Added --with-proj-libdir and --with-geos-libdir configure
        switches.</p><p>Support for build Tru64 build.</p><p>Use Jade for generating documentation.</p><p>Don't link pgsql2shp to more libs then required.</p><p>Initial support for PostgreSQL 8.2.</p></div></div><div class="sect1" title="A.39. Release 1.1.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109398864"></a>A.39. Release 1.1.2</h2></div></div></div><p>Release date: 2006/03/30</p><p>This is an bugfix release including some new functions and
      portability enhancements. Upgrade is
      <span class="emphasis"><em>encouraged</em></span>.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109400784"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109404624"></a>Bug fixes</h3></div></div></div><p>BUGFIX in SnapToGrid() computation of output bounding box</p><p>BUGFIX in EnforceRHR()</p><p>jdbc2 SRID handling fixes in JTS code</p><p>Fixed support for 64bit archs</p></div><div class="simplesect" title="New functionalities"><div class="titlepage"><div><div><h3 class="title"><a name="idp109406928"></a>New functionalities</h3></div></div></div><p>Regress tests can now be run *before* postgis
        installation</p><p>New affine() matrix transformation functions</p><p>New rotate{,X,Y,Z}() function</p><p>Old translating and scaling functions now use affine()
        internally</p><p>Embedded access control in estimated_extent() for builds against
        pgsql &gt;= 8.0.0</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109409744"></a>Other changes</h3></div></div></div><p>More portable ./configure script</p><p>Changed ./run_test script to have more sane default
        behaviour</p></div></div><div class="sect1" title="A.40. Release 1.1.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109411408"></a>A.40. Release 1.1.1</h2></div></div></div><p>Release date: 2006/01/23</p><p>This is an important Bugfix release, upgrade is <span class="emphasis"><em>highly
      recommended</em></span>. Previous version contained a bug in
      postgis_restore.pl preventing <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard
      upgrade</a> procedure to complete and a bug in GEOS-2.2+ connector
      preventing GeometryCollection objects to be used in topological
      operations.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109413712"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later follow the
        <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> procedure.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109438160"></a>Bug fixes</h3></div></div></div><p>Fixed a premature exit in postgis_restore.pl</p><p>BUGFIX in geometrycollection handling of GEOS-CAPI
        connector</p><p>Solaris 2.7 and MingW support improvements</p><p>BUGFIX in line_locate_point()</p><p>Fixed handling of postgresql paths</p><p>BUGFIX in line_substring()</p><p>Added support for localized cluster in regress tester</p></div><div class="simplesect" title="New functionalities"><div class="titlepage"><div><div><h3 class="title"><a name="idp109441616"></a>New functionalities</h3></div></div></div><p>New Z and M interpolation in line_substring()</p><p>New Z and M interpolation in line_interpolate_point()</p><p>added NumInteriorRing() alias due to OpenGIS ambiguity</p></div></div><div class="sect1" title="A.41. Release 1.1.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109443664"></a>A.41. Release 1.1.0</h2></div></div></div><p>Release date: 2005/12/21</p><p>This is a Minor release, containing many improvements and new
      things. Most notably: build procedure greatly simplified; transform()
      performance drastically improved; more stable GEOS connectivity (CAPI
      support); lots of new functions; draft topology support.</p><p>It is <span class="emphasis"><em>highly recommended</em></span> that you upgrade to
      GEOS-2.2.x before installing PostGIS, this will ensure future GEOS
      upgrades won't require a rebuild of the PostGIS library.</p><div class="simplesect" title="Credits"><div class="titlepage"><div><div><h3 class="title"><a name="idp109450064"></a>Credits</h3></div></div></div><p>This release includes code from Mark Cave Ayland for caching of
        proj4 objects. Markus Schaber added many improvements in his JDBC2
        code. Alex Bodnaru helped with PostgreSQL source dependency relief and
        provided Debian specfiles. Michael Fuhr tested new things on Solaris
        arch. David Techer and Gerald Fenoy helped testing GEOS C-API
        connector. Hartmut Tschauner provided code for the azimuth() function.
        Devrim GUNDUZ provided RPM specfiles. Carl Anderson helped with the
        new area building functions. See the <a class="link" href="#credits_other_contributors" title="1.4. Other Contributors">credits</a> section for more names.</p></div><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109451728"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later you
        <span class="emphasis"><em>DO NOT</em></span> need a dump/reload. Simply sourcing the
        new lwpostgis_upgrade.sql script in all your existing databases will
        work. See the <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">soft upgrade</a> chapter
        for more information.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="New functions"><div class="titlepage"><div><div><h3 class="title"><a name="idp109455952"></a>New functions</h3></div></div></div><p>scale() and transscale() companion methods to translate()</p><p>line_substring()</p><p>line_locate_point()</p><p>M(point)</p><p>LineMerge(geometry)</p><p>shift_longitude(geometry)</p><p>azimuth(geometry)</p><p>locate_along_measure(geometry, float8)</p><p>locate_between_measures(geometry, float8, float8)</p><p>SnapToGrid by point offset (up to 4d support)</p><p>BuildArea(any_geometry)</p><p>OGC BdPolyFromText(linestring_wkt, srid)</p><p>OGC BdMPolyFromText(linestring_wkt, srid)</p><p>RemovePoint(linestring, offset)</p><p>ReplacePoint(linestring, offset, point)</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109462608"></a>Bug fixes</h3></div></div></div><p>Fixed memory leak in polygonize()</p><p>Fixed bug in lwgeom_as_anytype cast functions</p><p>Fixed USE_GEOS, USE_PROJ and USE_STATS elements of
        postgis_version() output to always reflect library state.</p></div><div class="simplesect" title="Function semantic changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109464656"></a>Function semantic changes</h3></div></div></div><p>SnapToGrid doesn't discard higher dimensions</p><p>Changed Z() function to return NULL if requested dimension is
        not available</p></div><div class="simplesect" title="Performance improvements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109466320"></a>Performance improvements</h3></div></div></div><p>Much faster transform() function, caching proj4 objects</p><p>Removed automatic call to fix_geometry_columns() in
        AddGeometryColumns() and update_geometry_stats()</p></div><div class="simplesect" title="JDBC2 works"><div class="titlepage"><div><div><h3 class="title"><a name="idp109467856"></a>JDBC2 works</h3></div></div></div><p>Makefile improvements</p><p>JTS support improvements</p><p>Improved regression test system</p><p>Basic consistency check method for geometry collections</p><p>Support for (Hex)(E)wkb</p><p>Autoprobing DriverWrapper for HexWKB / EWKT switching</p><p>fix compile problems in ValueSetter for ancient jdk
        releases.</p><p>fix EWKT constructors to accept SRID=4711; representation</p><p>added preliminary read-only support for java2d geometries</p></div><div class="simplesect" title="Other new things"><div class="titlepage"><div><div><h3 class="title"><a name="idp109472080"></a>Other new things</h3></div></div></div><p>Full autoconf-based configuration, with PostgreSQL source
        dependency relief</p><p>GEOS C-API support (2.2.0 and higher)</p><p>Initial support for topology modelling</p><p>Debian and RPM specfiles</p><p>New lwpostgis_upgrade.sql script</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109474896"></a>Other changes</h3></div></div></div><p>JTS support improvements</p><p>Stricter mapping between DBF and SQL integer and string
        attributes</p><p>Wider and cleaner regression test suite</p><p>old jdbc code removed from release</p><p>obsoleted direct use of postgis_proc_upgrade.pl</p><p>scripts version unified with release version</p></div></div><div class="sect1" title="A.42. Release 1.0.6"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109478096"></a>A.42. Release 1.0.6</h2></div></div></div><p>Release date: 2005/12/06</p><p>Contains a few bug fixes and improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109479504"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later you
        <span class="emphasis"><em>DO NOT</em></span> need a dump/reload.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109483344"></a>Bug fixes</h3></div></div></div><p>Fixed palloc(0) call in collection deserializer (only gives
        problem with --enable-cassert)</p><p>Fixed bbox cache handling bugs</p><p>Fixed geom_accum(NULL, NULL) segfault</p><p>Fixed segfault in addPoint()</p><p>Fixed short-allocation in lwcollection_clone()</p><p>Fixed bug in segmentize()</p><p>Fixed bbox computation of SnapToGrid output</p></div><div class="simplesect" title="Improvements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109486800"></a>Improvements</h3></div></div></div><p>Initial support for postgresql 8.2</p><p>Added missing SRID mismatch checks in GEOS ops</p></div></div><div class="sect1" title="A.43. Release 1.0.5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109488464"></a>A.43. Release 1.0.5</h2></div></div></div><p>Release date: 2005/11/25</p><p>Contains memory-alignment fixes in the library, a segfault fix in
      loader's handling of UTF8 attributes and a few improvements and
      cleanups.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left"></th></tr><tr><td align="left" valign="top"><p>Return code of shp2pgsql changed from previous releases to
        conform to unix standards (return 0 on success).</p></td></tr></table></div><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109490896"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 or later you
        <span class="emphasis"><em>DO NOT</em></span> need a dump/reload.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109494608"></a>Library changes</h3></div></div></div><p>Fixed memory alignment problems</p><p>Fixed computation of null values fraction in analyzer</p><p>Fixed a small bug in the getPoint4d_p() low-level
        function</p><p>Speedup of serializer functions</p><p>Fixed a bug in force_3dm(), force_3dz() and force_4d()</p></div><div class="simplesect" title="Loader changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109497296"></a>Loader changes</h3></div></div></div><p>Fixed return code of shp2pgsql</p><p>Fixed back-compatibility issue in loader (load of null
        shapefiles)</p><p>Fixed handling of trailing dots in dbf numerical
        attributes</p><p>Segfault fix in shp2pgsql (utf8 encoding)</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109499728"></a>Other changes</h3></div></div></div><p>Schema aware postgis_proc_upgrade.pl, support for pgsql
        7.2+</p><p>New "Reporting Bugs" chapter in manual</p></div></div><div class="sect1" title="A.44. Release 1.0.4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109501392"></a>A.44. Release 1.0.4</h2></div></div></div><p>Release date: 2005/09/09</p><p>Contains important bug fixes and a few improvements. In
      particular, it fixes a memory leak preventing successful build of GiST
      indexes for large spatial tables.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109502800"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.3 you <span class="emphasis"><em>DO
        NOT</em></span> need a dump/reload.</p><p>If you are upgrading from a release <span class="emphasis"><em>between 1.0.0RC6
        and 1.0.2</em></span> (inclusive) and really want a live upgrade read
        the <a class="link" href="#rel_1.0.3_upgrading" title="A.45. Release 1.0.3">upgrade section</a> of the
        1.0.3 release notes chapter.</p><p>Upgrade from any release prior to 1.0.0RC6 requires an <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a>.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109506512"></a>Bug fixes</h3></div></div></div><p>Memory leak plugged in GiST indexing</p><p>Segfault fix in transform() handling of proj4 errors</p><p>Fixed some proj4 texts in spatial_ref_sys (missing +proj)</p><p>Loader: fixed string functions usage, reworked NULL objects
        check, fixed segfault on MULTILINESTRING input.</p><p>Fixed bug in MakeLine dimension handling</p><p>Fixed bug in translate() corrupting output bounding box</p></div><div class="simplesect" title="Improvements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109509840"></a>Improvements</h3></div></div></div><p>Documentation improvements</p><p>More robust selectivity estimator</p><p>Minor speedup in distance()</p><p>Minor cleanups</p><p>GiST indexing cleanup</p><p>Looser syntax acceptance in box3d parser</p></div></div><div class="sect1" title="A.45. Release 1.0.3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="rel_1.0.3_upgrading"></a>A.45. Release 1.0.3</h2></div></div></div><p>Release date: 2005/08/08</p><p>Contains some bug fixes - <span class="emphasis"><em>including a severe one
      affecting correctness of stored geometries</em></span> - and a few
      improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109514960"></a>Upgrading</h3></div></div></div><p>Due to a bug in a bounding box computation routine, the upgrade
        procedure requires special attention, as bounding boxes cached in the
        database could be incorrect.</p><p>An <a class="link" href="#hard_upgrade" title="2.10.2. Hard upgrade">hard upgrade</a> procedure
        (dump/reload) will force recomputation of all bounding boxes (not
        included in dumps). This is <span class="emphasis"><em>required</em></span> if upgrading
        from releases prior to 1.0.0RC6.</p><p>If you are upgrading from versions 1.0.0RC6 or up, this release
        includes a perl script (utils/rebuild_bbox_caches.pl) to force
        recomputation of geometries' bounding boxes and invoke all operations
        required to propagate eventual changes in them (geometry statistics
        update, reindexing). Invoke the script after a make install (run with
        no args for syntax help). Optionally run utils/postgis_proc_upgrade.pl
        to refresh postgis procedures and functions signatures (see <a class="link" href="#soft_upgrade" title="2.10.1. Soft upgrade">Soft upgrade</a>).</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109518544"></a>Bug fixes</h3></div></div></div><p>Severe bugfix in lwgeom's 2d bounding box computation</p><p>Bugfix in WKT (-w) POINT handling in loader</p><p>Bugfix in dumper on 64bit machines</p><p>Bugfix in dumper handling of user-defined queries</p><p>Bugfix in create_undef.pl script</p></div><div class="simplesect" title="Improvements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109521232"></a>Improvements</h3></div></div></div><p>Small performance improvement in canonical input function</p><p>Minor cleanups in loader</p><p>Support for multibyte field names in loader</p><p>Improvement in the postgis_restore.pl script</p><p>New rebuild_bbox_caches.pl util script</p></div></div><div class="sect1" title="A.46. Release 1.0.2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109528272"></a>A.46. Release 1.0.2</h2></div></div></div><p>Release date: 2005/07/04</p><p>Contains a few bug fixes and improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109529680"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.0RC6 or up you
        <span class="emphasis"><em>DO NOT</em></span> need a dump/reload.</p><p>Upgrading from older releases requires a dump/reload. See the
        <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Bug fixes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109532112"></a>Bug fixes</h3></div></div></div><p>Fault tolerant btree ops</p><p>Memory leak plugged in pg_error</p><p>Rtree index fix</p><p>Cleaner build scripts (avoided mix of CFLAGS and
        CXXFLAGS)</p></div><div class="simplesect" title="Improvements"><div class="titlepage"><div><div><h3 class="title"><a name="idp109534416"></a>Improvements</h3></div></div></div><p>New index creation capabilities in loader (-I switch)</p><p>Initial support for postgresql 8.1dev</p></div></div><div class="sect1" title="A.47. Release 1.0.1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109536208"></a>A.47. Release 1.0.1</h2></div></div></div><p>Release date: 2005/05/24</p><p>Contains a few bug fixes and some improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109537616"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.0RC6 or up you
        <span class="emphasis"><em>DO NOT</em></span> need a dump/reload.</p><p>Upgrading from older releases requires a dump/reload. See the
        <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109540048"></a>Library changes</h3></div></div></div><p>BUGFIX in 3d computation of length_spheroid()</p><p>BUGFIX in join selectivity estimator</p></div><div class="simplesect" title="Other changes/additions"><div class="titlepage"><div><div><h3 class="title"><a name="idp109541584"></a>Other changes/additions</h3></div></div></div><p>BUGFIX in shp2pgsql escape functions</p><p>better support for concurrent postgis in multiple schemas</p><p>documentation fixes</p><p>jdbc2: compile with "-target 1.2 -source 1.2" by default</p><p>NEW -k switch for pgsql2shp</p><p>NEW support for custom createdb options in
        postgis_restore.pl</p><p>BUGFIX in pgsql2shp attribute names unicity enforcement</p><p>BUGFIX in Paris projections definitions</p><p>postgis_restore.pl cleanups</p></div></div><div class="sect1" title="A.48. Release 1.0.0"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109546064"></a>A.48. Release 1.0.0</h2></div></div></div><p>Release date: 2005/04/19</p><p>Final 1.0.0 release. Contains a few bug fixes, some improvements
      in the loader (most notably support for older postgis versions), and
      more docs.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109547472"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.0RC6 you <span class="emphasis"><em>DO
        NOT</em></span> need a dump/reload.</p><p>Upgrading from any other precedent release requires a
        dump/reload. See the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a>
        chapter for more informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109549904"></a>Library changes</h3></div></div></div><p>BUGFIX in transform() releasing random memory address</p><p>BUGFIX in force_3dm() allocating less memory then
        required</p><p>BUGFIX in join selectivity estimator (defaults, leaks,
        tuplecount, sd)</p></div><div class="simplesect" title="Other changes/additions"><div class="titlepage"><div><div><h3 class="title"><a name="idp109551824"></a>Other changes/additions</h3></div></div></div><p>BUGFIX in shp2pgsql escape of values starting with tab or
        single-quote</p><p>NEW manual pages for loader/dumper</p><p>NEW shp2pgsql support for old (HWGEOM) postgis versions</p><p>NEW -p (prepare) flag for shp2pgsql</p><p>NEW manual chapter about OGC compliancy enforcement</p><p>NEW autoconf support for JTS lib</p><p>BUGFIX in estimator testers (support for LWGEOM and schema
        parsing)</p></div></div><div class="sect1" title="A.49. Release 1.0.0RC6"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109555536"></a>A.49. Release 1.0.0RC6</h2></div></div></div><p>Release date: 2005/03/30</p><p>Sixth release candidate for 1.0.0. Contains a few bug fixes and
      cleanups.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109556944"></a>Upgrading</h3></div></div></div><p>You need a dump/reload to upgrade from precedent releases. See
        the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109558608"></a>Library changes</h3></div></div></div><p>BUGFIX in multi()</p><p>early return [when noop] from multi()</p></div><div class="simplesect" title="Scripts changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109560144"></a>Scripts changes</h3></div></div></div><p>dropped {x,y}{min,max}(box2d) functions</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109565520"></a>Other changes</h3></div></div></div><p>BUGFIX in postgis_restore.pl scrip</p><p>BUGFIX in dumper's 64bit support</p></div></div><div class="sect1" title="A.50. Release 1.0.0RC5"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109567184"></a>A.50. Release 1.0.0RC5</h2></div></div></div><p>Release date: 2005/03/25</p><p>Fifth release candidate for 1.0.0. Contains a few bug fixes and a
      improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109568592"></a>Upgrading</h3></div></div></div><p>If you are upgrading from release 1.0.0RC4 you <span class="emphasis"><em>DO
        NOT</em></span> need a dump/reload.</p><p>Upgrading from any other precedent release requires a
        dump/reload. See the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a>
        chapter for more informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109571024"></a>Library changes</h3></div></div></div><p>BUGFIX (segfaulting) in box3d computation (yes,
        another!).</p><p>BUGFIX (segfaulting) in estimated_extent().</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109572688"></a>Other changes</h3></div></div></div><p>Small build scripts and utilities refinements.</p><p>Additional performance tips documented.</p></div></div><div class="sect1" title="A.51. Release 1.0.0RC4"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109574352"></a>A.51. Release 1.0.0RC4</h2></div></div></div><p>Release date: 2005/03/18</p><p>Fourth release candidate for 1.0.0. Contains bug fixes and a few
      improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109575760"></a>Upgrading</h3></div></div></div><p>You need a dump/reload to upgrade from precedent releases. See
        the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109577424"></a>Library changes</h3></div></div></div><p>BUGFIX (segfaulting) in geom_accum().</p><p>BUGFIX in 64bit architectures support.</p><p>BUGFIX in box3d computation function with collections.</p><p>NEW subselects support in selectivity estimator.</p><p>Early return from force_collection.</p><p>Consistency check fix in SnapToGrid().</p><p>Box2d output changed back to 15 significant digits.</p></div><div class="simplesect" title="Scripts changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109581008"></a>Scripts changes</h3></div></div></div><p>NEW distance_sphere() function.</p><p>Changed get_proj4_from_srid implementation to use PL/PGSQL
        instead of SQL.</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109582544"></a>Other changes</h3></div></div></div><p>BUGFIX in loader and dumper handling of MultiLine shapes</p><p>BUGFIX in loader, skipping all but first hole of
        polygons.</p><p>jdbc2: code cleanups, Makefile improvements</p><p>FLEX and YACC variables set *after* pgsql Makefile.global is
        included and only if the pgsql *stripped* version evaluates to the
        empty string</p><p>Added already generated parser in release</p><p>Build scripts refinements</p><p>improved version handling, central Version.config</p><p>improvements in postgis_restore.pl</p></div></div><div class="sect1" title="A.52. Release 1.0.0RC3"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109586512"></a>A.52. Release 1.0.0RC3</h2></div></div></div><p>Release date: 2005/02/24</p><p>Third release candidate for 1.0.0. Contains many bug fixes and
      improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109587920"></a>Upgrading</h3></div></div></div><p>You need a dump/reload to upgrade from precedent releases. See
        the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109589712"></a>Library changes</h3></div></div></div><p>BUGFIX in transform(): missing SRID, better error
        handling.</p><p>BUGFIX in memory alignment handling</p><p>BUGFIX in force_collection() causing mapserver connector
        failures on simple (single) geometry types.</p><p>BUGFIX in GeometryFromText() missing to add a bbox cache.</p><p>reduced precision of box2d output.</p><p>prefixed DEBUG macros with PGIS_ to avoid clash with pgsql
        one</p><p>plugged a leak in GEOS2POSTGIS converter</p><p>Reduced memory usage by early releasing query-context palloced
        one.</p></div><div class="simplesect" title="Scripts changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109593552"></a>Scripts changes</h3></div></div></div><p>BUGFIX in 72 index bindings.</p><p>BUGFIX in probe_geometry_columns() to work with PG72 and support
        multiple geometry columns in a single table</p><p>NEW bool::text cast</p><p>Some functions made IMMUTABLE from STABLE, for performance
        improvement.</p></div><div class="simplesect" title="JDBC changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109595984"></a>JDBC changes</h3></div></div></div><p>jdbc2: small patches, box2d/3d tests, revised docs and
        license.</p><p>jdbc2: bug fix and testcase in for pgjdbc 8.0 type
        autoregistration</p><p>jdbc2: Removed use of jdk1.4 only features to enable build with
        older jdk releases.</p><p>jdbc2: Added support for building against pg72jdbc2.jar</p><p>jdbc2: updated and cleaned makefile</p><p>jdbc2: added BETA support for jts geometry classes</p><p>jdbc2: Skip known-to-fail tests against older PostGIS
        servers.</p><p>jdbc2: Fixed handling of measured geometries in EWKT.</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109599952"></a>Other changes</h3></div></div></div><p>new performance tips chapter in manual</p><p>documentation updates: pgsql72 requirement, lwpostgis.sql</p><p>few changes in autoconf</p><p>BUILDDATE extraction made more portable</p><p>fixed spatial_ref_sys.sql to avoid vacuuming the whole
        database.</p><p>spatial_ref_sys: changed Paris entries to match the ones
        distributed with 0.x.</p></div></div><div class="sect1" title="A.53. Release 1.0.0RC2"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109603152"></a>A.53. Release 1.0.0RC2</h2></div></div></div><p>Release date: 2005/01/26</p><p>Second release candidate for 1.0.0 containing bug fixes and a few
      improvements.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109604560"></a>Upgrading</h3></div></div></div><p>You need a dump/reload to upgrade from precedent releases. See
        the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Library changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109606352"></a>Library changes</h3></div></div></div><p>BUGFIX in pointarray box3d computation</p><p>BUGFIX in distance_spheroid definition</p><p>BUGFIX in transform() missing to update bbox cache</p><p>NEW jdbc driver (jdbc2)</p><p>GEOMETRYCOLLECTION(EMPTY) syntax support for backward
        compatibility</p><p>Faster binary outputs</p><p>Stricter OGC WKB/WKT constructors</p></div><div class="simplesect" title="Scripts changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109609808"></a>Scripts changes</h3></div></div></div><p>More correct STABLE, IMMUTABLE, STRICT uses in
        lwpostgis.sql</p><p>stricter OGC WKB/WKT constructors</p></div><div class="simplesect" title="Other changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109611344"></a>Other changes</h3></div></div></div><p>Faster and more robust loader (both i18n and not)</p><p>Initial autoconf script</p></div></div><div class="sect1" title="A.54. Release 1.0.0RC1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp109613008"></a>A.54. Release 1.0.0RC1</h2></div></div></div><p>Release date: 2005/01/13</p><p>This is the first candidate of a major postgis release, with
      internal storage of postgis types redesigned to be smaller and faster on
      indexed queries.</p><div class="simplesect" title="Upgrading"><div class="titlepage"><div><div><h3 class="title"><a name="idp109614544"></a>Upgrading</h3></div></div></div><p>You need a dump/reload to upgrade from precedent releases. See
        the <a class="link" href="#upgrading" title="2.10. Upgrading">upgrading</a> chapter for more
        informations.</p></div><div class="simplesect" title="Changes"><div class="titlepage"><div><div><h3 class="title"><a name="idp109616208"></a>Changes</h3></div></div></div><p>Faster canonical input parsing.</p><p>Lossless canonical output.</p><p>EWKB Canonical binary IO with PG&gt;73.</p><p>Support for up to 4d coordinates, providing lossless
        shapefile-&gt;postgis-&gt;shapefile conversion.</p><p>New function: UpdateGeometrySRID(), AsGML(), SnapToGrid(),
        ForceRHR(), estimated_extent(), accum().</p><p>Vertical positioning indexed operators.</p><p>JOIN selectivity function.</p><p>More geometry constructors / editors.</p><p>PostGIS extension API.</p><p>UTF8 support in loader.</p></div></div></div></div></body></html>
